!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="6d21d61b-735f-4edf-9bcc-a7961fa54981",e._sentryDebugIdIdentifier="sentry-dbid-6d21d61b-735f-4edf-9bcc-a7961fa54981")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"1948ae01"};"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9411],{62496:function(e,t,n){n.d(t,{AS:function(){return T},Hj:function(){return A},Rp:function(){return D},Tt:function(){return L},gE:function(){return B},j7:function(){return _},xT:function(){return k},yi:function(){return S}});var r=n(41733),i=n(21262),o=n(71440),a=n(58995),l=n(99165),c=n(293);function s(){var e=(0,i._)(["\n  fragment AnnotationsUser on User {\n    id\n    username\n    fullName\n    image\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,i._)(["\n  fragment AnnotationMessageContent on MessageContentType {\n    __typename\n    ... on TextMessageContentType {\n      text\n    }\n    ... on PreviewMessageContentType {\n      preview\n    }\n    ... on StatusMessageContentType {\n      status\n    }\n  }\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  fragment AnnotationsUIMessage on AnnotationMessage {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    anchor {\n      id\n    }\n    timeCreated\n    content {\n      __typename\n      ...AnnotationMessageContent\n    }\n    currentUserIsAuthor\n    seen\n  }\n  ","\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i._)(["\n  fragment AnnotationsUIAnchor on AnnotationAnchor {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    path\n    otVersion\n    indexStart\n    indexEnd\n    isResolved\n    isGeneral\n    messages {\n      id\n      ...AnnotationsUIMessage\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  query AnnotationAnchorsByRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        annotationAnchors {\n          id\n          ...AnnotationsUIAnchor\n        }\n      }\n    }\n    currentUser {\n      id\n      username\n      fullName\n      image\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function p(){var e=(0,i._)(["\n  mutation CreateAnnotationAnchor(\n    $annotationAnchor: AnnotationAnchorInput!\n    $annotationMessage: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationAnchor(\n      annotationAnchor: $annotationAnchor\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function m(){var e=(0,i._)(["\n  mutation UpdateAnnotationAnchor(\n    $id: String!\n    $changes: AnnotationAnchorChangesInput!\n  ) {\n    updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function v(){var e=(0,i._)(["\n  mutation CreateAnnotationMessage(\n    $replId: String!\n    $anchorId: String!\n    $annotationMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationMessage(\n      replId: $replId\n      anchorId: $anchorId\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function g(){var e=(0,i._)(["\n  mutation updateThreadPreview(\n    $threadId: String!\n    $messageId: String!\n    $message: String\n  ) {\n    updateThreadPreview(\n      threadId: $threadId\n      messageId: $messageId\n      message: $message\n    )\n  }\n"]);return g=function(){return e},e}function y(){var e=(0,i._)(["\n  subscription AnnotationUpdates($replId: String!) {\n    updatedAnnotation: annotationUpdatesByRepl(replId: $replId) {\n      id\n      ...AnnotationsUIAnchor\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function b(){var e=(0,i._)(["\n  subscription MessagePreview($threadId: String!) {\n    threadPreview(threadId: $threadId) {\n      userId\n      messageId\n      message\n    }\n  }\n"]);return b=function(){return e},e}var w={},Z=(0,o.Ps)(s()),x=(0,o.Ps)(u()),C=(0,o.Ps)(d(),Z,x),_=(0,o.Ps)(f(),Z,C),S=(0,o.Ps)(h(),_);function k(e){var t=(0,r._)({},w,e);return a.a(S,t)}var E=(0,o.Ps)(p(),_);function T(e){var t=(0,r._)({},w,e);return l.D(E,t)}var R=(0,o.Ps)(m(),_);function D(e){var t=(0,r._)({},w,e);return l.D(R,t)}var I=(0,o.Ps)(v(),_);function B(e){var t=(0,r._)({},w,e);return l.D(I,t)}var G=(0,o.Ps)(g());function A(e){var t=(0,r._)({},w,e);return l.D(G,t)}var P=(0,o.Ps)(y(),_);function L(e){var t=(0,r._)({},w,e);return c.m(P,t)}b()},527:function(e,t,n){n.d(t,{Ft:function(){return d},Vy:function(){return m},kL:function(){return p}});var r=n(27387),i=n(66626),o=n(96583),a=n(80403),l=n(43182);function c(){return(c=(0,r._)(function(e,t,n){var r;return(0,o.Jh)(this,function(i){switch(i.label){case 0:if(!e.path||"number"!=typeof e.indexStart||"number"!=typeof e.indexEnd||!e.otVersion)return[2];if(n===e.otVersion)return[2,{path:e.path,indexStart:e.indexStart,indexEnd:e.indexEnd,otVersion:e.otVersion}];return[4,t({indexStart:e.indexStart,indexEnd:e.indexEnd,versionFrom:e.otVersion,versionTo:n})];case 1:return r=i.sent(),[2,{path:e.path,indexStart:r.indexStart,indexEnd:r.indexEnd,otVersion:n}]}})})).apply(this,arguments)}var s=n(81199),u=n(50959);function d(e){return f.apply(this,arguments)}function f(){return(f=(0,r._)(function(e){var t,n,r,i,s,u,d;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(t=e.anchor,n=e.version,r=e.transformSelection,i=e.content,!t.path)return[2,null];return[4,function(e,t,n){return c.apply(this,arguments)}(t,r,n)];case 1:if(!(s=o.sent()))return[2,null];return d=function(){if(s){var e=s.indexStart,t=s.indexEnd;try{var n=a.xv.of(i.split("\n")),r=n.lineAt(e),o=n.lineAt(t),c=n.sliceString(n.line(Math.max(r.number-2,1)).from,e),u=n.sliceString(t,n.line(Math.min(o.number+2,n.lines)).to);return{precode:c,code:n.sliceString(e,t),postcode:u}}catch(e){l.Tb(e)}}},[2,{anchor:t,newSelection:s,newPosition:u,getHighlight:d,snippet:h(i,s)}]}})})).apply(this,arguments)}var h=function(e,t){var n=a.xv.of(e.split("\n")),r=n.lineAt(t.indexStart).number,i=n.lineAt(t.indexEnd).number,o=[];r===i&&(r=Math.max(1,r-1),i=Math.min(n.lines,i+1));for(var l=r;l<=i;l++)o.push(n.line(l).text);return{startLineNumber:r,lines:o}};function p(e){var t=(0,s.Z)().fs,n=(0,u.useRef)(null),r=(0,u.useRef)(null),o=(0,i._)((0,u.useState)(!1),2),a=o[0],l=o[1];return(0,u.useEffect)(function(){if(e){var i=function(){r.current=null,l(!1)},o=t.watchTextFile(e,{onReady:function(e){var t=e.transformSelection,i=e.initialContent;n.current=i.toString(),r.current=t,l(!0)},onMoveOrDelete:function(){i()},onError:function(){i()},onChange:function(e){var t=e.latestContent;n.current=t}});return function(){i(),o()}}},[e,t]),{contentRef:n,transformSelectionRef:r,loadedFile:a}}function m(e){var t=(0,s.Z)().fs,n=(0,i._)((0,u.useState)(null),2),r=n[0],o=n[1],a=p(null==e?void 0:e.path),c=a.contentRef,f=a.loadedFile,h=a.transformSelectionRef;return(0,u.useEffect)(function(){(null==e?void 0:e.path)&&f&&h.current&&null!==c.current&&d({anchor:e,version:t.getOTVersion(e.path),transformSelection:h.current,content:c.current}).then(function(e){o(e)}).catch(function(e){o(null),l.Tb(e)})},[t,e,f,h,c]),r}},25612:function(e,t,n){n.d(t,{n:function(){return u}});var r=n(41733),i=n(21262),o=n(71440),a=n(99165);function l(){var e=(0,i._)(["\n  mutation MarkMessagesAsSeen(\n    $replId: String!\n    $threadId: String\n    $messageIds: [String!]\n  ) {\n    markMessagesAsSeen(\n      replId: $replId\n      threadId: $threadId\n      messageIds: $messageIds\n    ) {\n      ... on AnnotationMessageList {\n        messages {\n          id\n          seen\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},s=(0,o.Ps)(l());function u(e){var t=(0,r._)({},c,e);return a.D(s,t)}},68098:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(66626),i=n(50959),o=n(39271),a=n(25612);function l(e){var t=(0,o.Z)(),n=(0,r._)((0,a.n)(),1)[0];(0,i.useEffect)(function(){if(e){var r=e.messages.filter(function(e){return!e.seen}).map(function(e){return e.id});0!==r.length&&n({variables:{replId:t,threadId:e.id,messageIds:r},optimisticResponse:{__typename:"RootMutationType",markMessagesAsSeen:{messages:r.map(function(e){return{id:e,seen:!0,__typename:"AnnotationMessage"}}),__typename:"AnnotationMessageList"}}})}},[t,e,n])}},30470:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(39271),i=n(41733),o=n(21262),a=n(71440),l=n(58995);function c(){var e=(0,o._)(["\n  query ThreadReplCollaborators($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on User {\n            id\n            username\n            image\n            fullName\n          }\n          ... on Team {\n            id\n            username\n            image\n          }\n        }\n        permissions {\n          id\n          user {\n            id\n            username\n            image\n            fullName\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}var s={},u=(0,a.Ps)(c());function d(){var e=(c={variables:{replId:(0,r.Z)()}},d=(0,i._)({},s,c),l.a(u,d)).data;if((null==e?void 0:e.repl.__typename)!=="Repl")return[];var t=[];(null===(f=e.repl.owner)||void 0===f?void 0:f.username)&&"User"===e.repl.owner.__typename&&t.push(e.repl.owner);var n=!0,o=!1,a=void 0;try{for(var c,d,f,h,p=e.repl.permissions[Symbol.iterator]();!(n=(h=p.next()).done);n=!0){var m,v=h.value;(null===(m=v.user)||void 0===m?void 0:m.username)&&t.push(v.user)}}catch(e){o=!0,a=e}finally{try{n||null==p.return||p.return()}finally{if(o)throw a}}return t}},69755:function(e,t,n){n.d(t,{q:function(){return B},J:function(){return I}});var r,i,o,a=n(41733),l=n(30509),c=n(98924),s=n(66626),u=n(4216),d=n(12285),f=n(4955),h=n(9670),p=n(80403),m=n(3030),v=n(5994),g=m.tk.baseTheme({".cm-diff-inserted":{backgroundColor:"#0053A644",borderLeft:"#0053A6 solid 3px"},".cm-diff-deleted":{backgroundColor:"#c93c3733",borderLeft:"#c93c37 solid 3px"}}),y=m.p.line({attributes:{class:"cm-diff-inserted"}}),b=m.p.line({attributes:{class:"cm-diff-deleted"}}),w=p.Py.define({map:function(e,t){return e.map(t)}}),Z=function(e){"use strict";(0,f._)(n,e);var t=(0,h._)(n);function n(){return(0,d._)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-alignment cm-line",e.innerHTML="&nbsp;",e},r.ignoreEvent=function(){return!1},n}(m.l9);function x(e){var t=new p.f_,n=new Z;e.sort(function(e,t){return e.character-t.character});var r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)for(var c=a.value,s=c.character,u=c.padding,d=0;d<u;d++)t.add(s,s,m.p.widget({widget:n,side:-1,block:!0}))}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t.finish()}function C(e){var t=e.coloredLines,n=e.colorDecoration;return[g,m.lg.fromClass(function e(r){"use strict";(0,d._)(this,e);var i=new p.f_,o=!0,a=!1,l=void 0;try{for(var c,s=t[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value,f=r.state.doc.line(u);i.add(f.from,f.from,n)}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}this.decorations=i.finish()},{decorations:function(e){return e.decorations}}),p.QQ.define({create:function(){return m.p.none},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(w))return l.value}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t.docChanged?e.map(t.changes):e},provide:function(e){return m.tk.decorations.from(e)}})]}var _=n(62942),S=n(87502),k=n(50959),E=n(98001),T=(r=function(e,t){return m.tk.domEventHandlers({scroll:function(n,r){if(r===e&&n.target){var i=n.target;if(i.scrollTop){var o=i.scrollTop;t.scrollDOM.scrollTo({top:o})}}}})},i=new p.F6,o=new p.F6,{extensions:function(){return{right:i.of([]),left:o.of([])}},setup:function(e,t){e.dispatch({effects:o.reconfigure(r(e,t))}),t.dispatch({effects:i.reconfigure(r(t,e))})}}),R=T.extensions,D=T.setup;function I(e){var t=e.left,n=e.right,r=e.showDiffDecorations,i=void 0===r||r,o=t.code,u=(0,c._)(t,["code"]),d=n.code,f=(0,c._)(n,["code"]),h=(0,S.Z)(),m=h.ref,g=h.view,Z=(0,S.Z)(),_=Z.ref,E=Z.view,T=(0,k.useMemo)(function(){var e=R().left;return u.extensions?[u.extensions,e]:e},[u.extensions]),I=(0,k.useMemo)(function(){var e=R().right;return f.extensions?[f.extensions,e]:e},[f.extensions]);u=(0,l._)((0,a._)({},u),{extensions:T}),f=(0,l._)((0,a._)({},f),{extensions:I});var B=(0,s._)((0,k.useState)(!1),2),G=B[0],A=B[1],P=(0,s._)((0,k.useState)(!1),2),L=P[0],N=P[1];return(0,k.useEffect)(function(){if(g&&E&&G&&L&&i){var e=setTimeout(function(){var e;D(g,E),e=(0,v.Bz)(g.state.doc.sliceString(0),E.state.doc.sliceString(0)),g.dispatch({effects:[p.Py.appendConfig.of(C({coloredLines:e.leftColored.sort(function(e,t){return e-t}),colorDecoration:b})),w.of(x(e.leftPadded))]}),E.dispatch({effects:[p.Py.appendConfig.of(C({coloredLines:e.rightColored.sort(function(e,t){return e-t}),colorDecoration:y})),w.of(x(e.rightPadded))]})});return function(){return clearTimeout(e)}}},[g,E,G,L,i]),(0,k.useEffect)(function(){g&&(g.dispatch({changes:{from:0,to:g.state.doc.length,insert:o}}),A(!0))},[o,g]),(0,k.useEffect)(function(){E&&(E.dispatch({changes:{from:0,to:E.state.doc.length,insert:d}}),N(!0))},[d,E]),{left:{view:g,ref:m,code:o,options:u,ready:G},right:{view:E,ref:_,code:d,options:f,ready:L}}}function B(e){var t=e.diffViewer,n=(0,c._)(e,["diffViewer"]),r=(0,a._)({},t.options,n);return(0,u.BX)(u.HY,{children:[(0,u.tZ)(_.ZP,(0,a._)({ref:t.ref,css:{height:t.ready?0:"auto"},initialDoc:t.code,lineWrapping:!1,readOnly:!0},r)),!t.ready&&(0,u.tZ)(E.Z,{code:t.code,language:r.language,filePath:r.filePath,lineNumbers:!r.hideGutter,fontSize:r.fontSize})]})}},5994:function(e,t,n){n.d(t,{Bz:function(){return p},PO:function(){return m}});var r=n(12285),i=n(66626),o=n(96583),a=n(85386),l=n.n(a),c=l().DIFF_DELETE,s=l().DIFF_INSERT,u=l().DIFF_EQUAL;function d(e,t){var n=new(l()),r=n.diff_linesToChars_(e,t),i=r.chars1,o=r.chars2,a=r.lineArray,c=n.diff_main(i,o,!1);return n.diff_charsToLines_(c,a),c}function f(e){return e.split("\n").length-1}function h(e,t,n){if(e>0){var r=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===n)return 0;var i=t.indexOf("\n",r);return -1===i?null:1===n?i+1:e(t,n-1,i+1)}(n,t);if(null!==r)return{lineNumber:t,character:r,padding:e}}return null}function p(e,t){var n=!1,r=!1;n="\n"===e[e.length-1],r="\n"===t[t.length-1];for(var o=d(e+(n?"":"\n"),t+(r?"":"\n")),a=0,l=0,p=[],m=[],v=[],g=[],y=0,b=0,w=0;w<o.length;w++){var Z=(0,i._)(o[w],2),x=Z[0],C=f(Z[1]);switch(x){case c:var _,S=(0,i._)(null!==(_=o[w+1])&&void 0!==_?_:[],2),k=S[0],E=S[1];a+=C;for(var T=0;T<C;T++)p.push(a-T);var R=C;k===s&&(R-=f(E));var D=h(R,l,t);D&&g.push(D);break;case s:var I,B=(0,i._)(null!==(I=o[w-1])&&void 0!==I?I:[],2),G=B[0],A=B[1];l+=C;for(var P=0;P<C;P++)m.push(l-P);var L=C;G===c&&(L-=f(A));var N=h(L,a,e);N&&v.push(N);break;case u:l>b&&(b=l),a>y&&(y=a),a+=C,l+=C}}return{leftPadded:v.filter(function(e){return e.lineNumber<b}),rightPadded:g.filter(function(e){return e.lineNumber<y}),leftColored:p,rightColored:m,changedTrailingNewline:n!==r,leftTrailingNewline:n,rightTrailingNewline:r}}var m=function(){"use strict";function e(t,n){(0,r._)(this,e),this.deleted=new Set,this.inserted=new Map,this.linePositions=new Map,this.lineLengths=new Map,this.currentTrailingNewline="\n"===t[t.length-1],this.otherTrailingNewline="\n"===n[n.length-1],this.changedTrailingNewline=this.currentTrailingNewline!==this.otherTrailingNewline;var o=d(t,n),a=[],l=!0,f=!1,h=void 0;try{for(var p,m=o[Symbol.iterator]();!(l=(p=m.next()).done);l=!0){var v=(0,i._)(p.value,2),g=v[0],y=v[1].split("\n");""===y[y.length-1]&&y.pop();var b=!0,w=!1,Z=void 0;try{for(var x,C=y[Symbol.iterator]();!(b=(x=C.next()).done);b=!0){var _=x.value;a.push([g,_])}}catch(e){w=!0,Z=e}finally{try{b||null==C.return||C.return()}finally{if(w)throw Z}}}}catch(e){f=!0,h=e}finally{try{l||null==m.return||m.return()}finally{if(f)throw h}}this.currentTrailingNewline&&!this.otherTrailingNewline?a.push([c,""]):!this.currentTrailingNewline&&this.otherTrailingNewline?a.push([s,""]):this.currentTrailingNewline&&this.otherTrailingNewline&&a.push([u,""]);var S=1,k=0,E=1,T=!0,R=!1,D=void 0;try{for(var I,B=a[Symbol.iterator]();!(T=(I=B.next()).done);T=!0){var G=(0,i._)(I.value,2),A=G[0],P=G[1];switch(A){case c:this.linePositions.set(S,k),this.lineLengths.set(S,P.length),this.deleted.add(S),k+=P.length+1,S++;break;case s:var L=S-1,N=this.inserted.get(L);N||(N=[],this.inserted.set(L,N)),N.push({number:E,content:P}),E++;break;case u:this.linePositions.set(S,k),this.lineLengths.set(S,P.length),k+=P.length+1,S++,E++}}}catch(e){R=!0,D=e}finally{try{T||null==B.return||B.return()}finally{if(R)throw D}}}var t=e.prototype;return t.startInsertions=function(){var e=this.inserted.get(0);return e&&0!==e.length?e:null},t.lineIsDeleted=function(e){return this.deleted.has(e)},t.lineInsertions=function(e){var t=this.inserted.get(e);return t&&0!==t.length?t:null},t.lineInsertedContent=function(e){var t=this.lineInsertions(e);return t?t.map(function(e){return e.content}).join("\n"):null},t.offsetFor=function(e){var t,n,r;r=0+(null!==(n=null===(t=this.inserted.get(0))||void 0===t?void 0:t.length)&&void 0!==n?n:0);for(var i=1;i<e;i++){this.lineIsDeleted(i)&&r--;var o=this.lineInsertions(i);o&&(r+=o.length)}return r},t.linePosition=function(e){var t;return null!==(t=this.linePositions.get(e))&&void 0!==t?t:null},t.lineLength=function(e){var t;return null!==(t=this.lineLengths.get(e))&&void 0!==t?t:null},t.line=function(e){var t=this.linePosition(e),n=this.lineLength(e);if(null===t||null===n)return null;var r=this.offsetFor(e),i=this.lineIsDeleted(e),o=this.lineInsertions(e);return{number:e,from:t,to:t+n,length:n,offset:r,isDeleted:i,insertions:o}},t.lines=function(){var e,t,n,r,a,l,c,s;return(0,o.Jh)(this,function(o){switch(o.label){case 0:e=!0,t=!1,n=void 0,o.label=1;case 1:o.trys.push([1,6,7,8]),r=this.linePositions[Symbol.iterator](),o.label=2;case 2:if(e=(a=r.next()).done)return[3,5];if(l=(0,i._)(a.value,1)[0],!(c=this.line(l)))throw Error("line should not be null");return[4,c];case 3:o.sent(),o.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return s=o.sent(),t=!0,n=s,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(t)throw n}return[7];case 8:return[2]}})},e}()},18857:function(e,t,n){n.d(t,{z:function(){return a}});var r=n(12285),i=n(96583),o=n(51743),a=function(){"use strict";function e(t,n,i,o){(0,r._)(this,e),this.a=t,this.b=n,this.chunks=i,this.map=o}var t=e.prototype;return t.line=function(e,t){return t===o.MF.A?this.a.line(e):this.b.line(e)},t.bounds=function(e){if(0===this.chunks.length)return null;var t=(0,o.Cf)(this.chunks[0],e),n=(0,o.Cf)(this.chunks[this.chunks.length-1],e),r=e===o.MF.A?this.a.length:this.b.length,i=Math.min(n.to,r);return{from:t.from,to:i}},t.hasChanges=function(){return this.chunks.length>0},t.updateA=function(t,n,r){var i=this.b,a=(0,o.U_)(t,i,{chunks:this.chunks,changesA:n},r),l=(0,o.XW)(t,i,a);return new e(t,i,a,l)},t.updateB=function(t,n,r){var i=this.a,a=(0,o.U_)(i,t,{chunks:this.chunks,changesB:n},r),l=(0,o.XW)(i,t,a);return new e(i,t,a,l)},t.getContainingChunk=function(e,t){for(var n=0,r=this.chunks.length-1;n<=r;){var i=n+r>>>1,a=this.chunks[i],l=(0,o.Cf)(a,t);if(e>=l.from&&e<=l.to)return a;e<l.from?r=i-1:e>l.to&&(n=i+1)}return null},t.getCorrespondingLine=function(e,t){var n=this.map.get(t===o.MF.A?-e:e);return n?this.line(n,(0,o.rN)(t)):null},t.getLineChangeType=function(e,t){if(this.map.get(t===o.MF.A?-e:e))return o.dQ.UNCHANGED;var n=this.line(e,t),r=this.getContainingChunk(n.from,t);return r?(0,o.dx)(n,t,r.changes,r):o.dQ.UNCHANGED},t.iterLines=function(e){var t,n,r,a;return(0,i.Jh)(this,function(i){switch(i.label){case 0:t=e===o.MF.A?this.a:this.b,n=1,i.label=1;case 1:if(!(n<=t.lines))return[3,4];return r=t.line(n),a=this.getCorrespondingLine(r.number,e),[4,{line:r,correspondingLine:a}];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}})},t.iterRanges=function(){var e,t,n,r,o;return(0,i.Jh)(this,function(i){switch(i.label){case 0:e=0,i.label=1;case 1:if(!(e<this.chunks.length))return[3,6];t=this.chunks[e].fromA,n=this.chunks[e].fromB,r=0,i.label=2;case 2:if(!(r<this.chunks[e].changes.length))return[3,5];return o=this.chunks[e].changes[r],[4,{fromA:t+o.fromA,toA:t+o.toA,fromB:n+o.fromB,toB:n+o.toB}];case 3:i.sent(),i.label=4;case 4:return r++,[3,2];case 5:return e++,[3,1];case 6:return[2]}})},e.create=function(t,n,r){var i=(0,o.U_)(t,n,void 0,r),a=(0,o.XW)(t,n,i);return new e(t,n,i,a)},e}()},66873:function(e,t,n){n.d(t,{p:function(){return q}});var r,i=n(80403),o=n(12285),a=n(4384),l=n(4955),c=n(9670),s=n(3030),u=n(33083),d=n(99415),f=n(18857),h=n(75869),p=i.r$.define({combine:function(e){var t;return null!==(t=e.filter(Boolean)[0])&&void 0!==t?t:null}}),m=i.QQ.define({create:function(){return{diff:null,tree:d.mp.empty}},update:function(e,t){var n,r,i=t.state.facet(p),o=null===(n=t.state.facet(u.dK))||void 0===n?void 0:n.parser;if(!i)return null===e.diff&&e.tree===d.mp.empty?e:{diff:null,tree:d.mp.empty};var a=e.diff,l=e.tree;return(a&&a.a.eq(i)?t.docChanged&&(a=a.updateB(t.newDoc,t.changes)):(a=f.z.create(i,t.newDoc),l=d.mp.empty),(null===(r=t.startState.facet(u.dK))||void 0===r?void 0:r.parser)!==o&&(l=d.mp.empty),o&&l.length!==a.a.length)?(l=(0,h.p)({parser:o,text:a.a,maxTime:16,base:l}),{diff:a,tree:l}):e.diff===a&&e.tree===l?e:{diff:a,tree:l}}}),v=n(42516),g=n(72093),y="cm-inline-diff-line-deletion-base",b="cm-inline-diff-line-deletion",w="cm-inline-diff-text-deletion",Z="cm-inline-diff-line-insertion-base",x="cm-inline-diff-line-insertion",C="cm-inline-diff-text-insertion",_="rgba(180, 0, 0, 0.075)",S="rgba(180, 0, 0, 0.125)",k="rgba(0, 180, 0, 0.075)",E="rgba(0, 180, 0, 0.125)",T="cm-inline-diff-marker",R="cm-inline-diff-marker-left",D="cm-inline-diff-marker-right";function I(e,t){var n="linear-gradient(to right, ".concat(e,", ").concat(e,")");return t&&(n+=", linear-gradient(to right, ".concat(t,", ").concat(t,")")),n}var B=s.tk.theme((r={},(0,v._)(r,".".concat(y,", .").concat(b),{cursor:"text","&.cm-line ::selection":{backgroundColor:"".concat(g.TV.accentPrimaryDimmest," !important")}}),(0,v._)(r,".".concat(y),{background:I(_)}),(0,v._)(r,".".concat(b),{background:I(_,S)}),(0,v._)(r,".".concat(Z),{background:I(k)}),(0,v._)(r,".".concat(x),{background:I(k,E)}),(0,v._)(r,".".concat(C),{display:"inline-block",background:E,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(E),paddingLeft:"3px",marginLeft:"-6px"}}),(0,v._)(r,".".concat(w),{display:"inline-block",background:S,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(S),paddingLeft:"3px",marginLeft:"-6px"}}),(0,v._)(r,".".concat(T),{display:"flex",width:"100%",justifyContent:"space-between"}),(0,v._)(r,".".concat(R),{width:"calc(50% - 1ch)",textAlign:"right"}),(0,v._)(r,".".concat(D),{width:"50%",textAlign:"right"}),r)),G=n(51743),A=n(90051),P=n(3341),L=n.n(P),N=function(e){"use strict";(0,l._)(n,e);var t=(0,c._)(n);function n(e,r,i){var a;return(0,o._)(this,n),(a=t.call(this)).line=e,a.index=r,a.changed=i,a}var r=n.prototype;return r.toDOM=function(){var e=this,t=document.createElement("div");if(t.className=this.changed?"cm-line ".concat(y):"cm-line ".concat(b),!this.changed||!this.changed.length){var n=!0,r=!1,i=void 0;try{for(var o,a=this.line[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=l.text,s=l.tags,u=document.createElement("span");u.textContent=c||"\xa0",u.className=null!=s?s:"",t.appendChild(u)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}for(var d=0,f=0,h=null,p=null,m=function(t,n){if(!h)throw Error("range is null");var r=e.line[f],i=r.text,o=r.tags,a=i.slice(d-h.from,n-h.from),l=document.createElement("span");l.textContent=a||"\xa0",l.className=null!=o?o:"",t.appendChild(l),d+=a.length};f<this.line.length;){if(!h){var v=this.line[f].text;h={from:d,to:d+v.length}}if(!p){var g=!0,Z=!1,x=void 0;try{for(var C,_=this.changed[Symbol.iterator]();!(g=(C=_.next()).done);g=!0){var S=C.value;if(!(S.from>=h.to)&&!(S.to<=d)){var k=document.createElement("span");k.className=w,p={from:S.from,to:S.to,dom:k},d<p.from&&m(t,p.from),t.appendChild(k);break}}}catch(e){Z=!0,x=e}finally{try{g||null==_.return||_.return()}finally{if(Z)throw x}}}p?(d<p.to&&m(p.dom,p.to),d>=p.to&&(p=null)):m(t,h.to),d>=h.to&&(h=null,f++)}return t},r.eq=function(e){var t,r;return e instanceof n&&this.index===e.index&&this.line.length===e.line.length&&(null===(t=this.changed)||void 0===t?void 0:t.length)===(null===(r=e.changed)||void 0===r?void 0:r.length)&&L()(this.line,e.line)&&L()(this.changed,e.changed)},r.ignoreEvent=function(e){return e.stopImmediatePropagation(),!0},(0,a._)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(s.l9),O=s.p.line({class:Z}),U=s.p.line({class:x}),M=s.p.mark({class:C}),X=s.tk.decorations.compute([m],function(e){var t=function(e,t){if(r.getLineChangeType(e.number,G.MF.B)===G.dQ.COVERED)o.push(U.range(e.from));else{o.push(O.range(e.from));var n=!0,i=!1,a=void 0;try{for(var l,c=(0,G.Po)(e,t,G.MF.B,!1)[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var s=l.value;o.push(M.range(s.from,s.to))}}catch(e){i=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}}},n=e.field(m,!1);if(!n||!n.diff)return s.p.none;var r=n.diff,i=n.tree,o=[],a=!0,l=!1,c=void 0;try{for(var u,d=r.chunks[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var f=u.value;if(f.fromB!==f.endB)for(var h=r.b.lineAt(f.fromB),p=r.b.lineAt(f.endB),v=h.number;v<=p.number;v++)t(r.b.line(v),f);else f.fromA===f.endA&&t(r.b.lineAt(f.fromB),f);if(f.fromA!==f.toA)for(var g=r.a.lineAt(f.fromA),y=(0,A.CT)(i,r.a,e,f.fromA,f.endA),b=0;b<y.length;b++){var w=y[b],Z=r.a.line(g.number+b),x=r.getLineChangeType(Z.number,G.MF.A)===G.dQ.COVERED?null:(0,G.Po)(Z,f,G.MF.A,!0),C=s.p.widget({widget:new N(w,Z.number,x),block:!0,side:-(y.length-b)});o.push(C.range(f.fromB))}}}catch(e){l=!0,c=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw c}}return s.p.set(o,!0)}),F=n(66382),W=(0,s.v5)({class:F.Tr,renderEmptyElements:!0,lineMarker:function(e,t){var n=e.state.field(m,!1);if(!n||!n.diff||!n.diff.hasChanges())return null;if(0===n.diff.a.length)return F.vP;var r=e.state.doc.lineAt(t.from);switch(n.diff.getLineChangeType(r.number,G.MF.B)){case G.dQ.COVERED:case G.dQ.MODIFIED:return F.vP;default:return null}},widgetMarker:function(e,t){if(!(t instanceof N))return null;var n=e.state.field(m,!1);if(!n||!n.diff||!n.diff.hasChanges())return null;switch(n.diff.getLineChangeType(t.index,G.MF.A)){case G.dQ.COVERED:case G.dQ.MODIFIED:return F.We;default:return null}},initialSpacer:function(e){var t=e.state.field(m,!1);return(null==t?void 0:t.diff)?F.vP:F.Do},updateSpacer:function(e,t){var n=t.state.field(m,!1),r=(null==n?void 0:n.diff)?F.vP:F.Do;return e===r?e:r}}),H=n(67346),V=function(e){"use strict";(0,l._)(n,e);var t=(0,c._)(n);function n(e,r){var i;return(0,o._)(this,n),(i=t.call(this)).left=e,i.right=r,i}var r=n.prototype;return r.toDOM=function(e){var t=e.state.doc.lines.toString().length,n=document.createElement("div"),r=document.createElement("span"),i=document.createElement("span");return n.className=T,r.className=R,i.className=D,n.style.width="".concat(2*t+1,"ch"),null!==this.left&&(r.textContent=this.left.toString()),null!==this.right&&(i.textContent=this.right.toString()),n.appendChild(r),n.appendChild(i),n},r.eq=function(e){return e instanceof n&&this.left===e.left&&this.right===e.right},n}(s.SJ),z=H.X4.of(function(e,t){if(t instanceof N)return new V(t.index,null)}),j=[H.gy.of(function(e,t){var n,r=e.state.field(m,!1);if(r&&r.diff&&r.diff.hasChanges()){var i=e.state.doc.lineAt(t.from),o=r.diff.getCorrespondingLine(i.number,G.MF.B);return new V(null!==(n=null==o?void 0:o.number)&&void 0!==n?n:null,i.number)}}),z],q=i.r$.define({enables:function(e){return[p.computeN([e],function(t){return t.facet(e)}),F.Lw,m,B,X,j,W]}})},66382:function(e,t,n){n.d(t,{Do:function(){return I},Lw:function(){return k},Tr:function(){return d},Vt:function(){return D},We:function(){return T},vP:function(){return E},wp:function(){return R}});var r,i=n(12285),o=n(42516),a=n(4955),l=n(9670),c=n(3030),s=n(72093),u=s.TV.space2,d="cm-diff-gutter",f="".concat(d,"-element"),h="".concat(f,"-insertion"),p="".concat(f,"-modified"),m="".concat(f,"-deleted"),v="".concat(f,"-file-added"),g="".concat(f,"-empty"),y=s.TV.greenDefault,b=s.TV.greenStronger,w=s.TV.blueDefault,Z=s.TV.blueStronger,x=s.TV.redDefault,C=s.TV.redStronger,_=s.TV.greenDimmer,S=s.TV.greenDefault,k=c.tk.theme((r={},(0,o._)(r,".".concat(d,":first-of-type, .").concat(f),{width:u}),(0,o._)(r,".".concat(h),{backgroundColor:y,"&.cm-activeLineGutter":{backgroundColor:b}}),(0,o._)(r,".".concat(p),{backgroundColor:w,"&.cm-activeLineGutter":{backgroundColor:Z}}),(0,o._)(r,".".concat(m),{backgroundColor:x,"&.cm-activeLineGutter":{backgroundColor:C}}),(0,o._)(r,".".concat(v),{backgroundColor:_,"&.cm-activeLineGutter":{backgroundColor:S}}),(0,o._)(r,".".concat(g),{opacity:0}),r)),E=new(function(e){"use strict";(0,a._)(n,e);var t=(0,l._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),e.elementClass="".concat(f," ").concat(h),e}return n}(c.SJ)),T=new(function(e){"use strict";(0,a._)(n,e);var t=(0,l._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),e.elementClass="".concat(f," ").concat(m),e}return n}(c.SJ)),R=new(function(e){"use strict";(0,a._)(n,e);var t=(0,l._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),e.elementClass="".concat(f," ").concat(p),e}return n}(c.SJ)),D=new(function(e){"use strict";(0,a._)(n,e);var t=(0,l._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),e.elementClass="".concat(f," ").concat(v),e}return n}(c.SJ)),I=new(function(e){"use strict";(0,a._)(n,e);var t=(0,l._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),e.elementClass="".concat(f," ").concat(g),e}return n}(c.SJ))},28360:function(e,t,n){n.d(t,{el:function(){return c},er:function(){return u},iG:function(){return s}});var r=n(80403),i=n(43182),o=n(34328),a=r.Py.define(),l=r.Py.define(),c=function(e){var t=e.view,n=e.insert,r=e.scrollIntoView;if(e.overwrite)t.dispatch({changes:{from:0,to:t.state.doc.length,insert:n},effects:a.of(null),scrollIntoView:r,annotations:o.Z.of(!0)});else{var i=t.state.selection.main.head;t.dispatch({changes:{from:t.state.selection.main.from,insert:n},selection:{anchor:i+n.length},effects:a.of(null),scrollIntoView:r,annotations:o.Z.of(!0)})}},s=function(e){var t=e.state.field(u,!1);if(!t){i.Tb(Error("RevetGhostwriterCodeInsertState not found when trying to revert"));return}e.dispatch({changes:t,effects:l.of(null)})},u=r.QQ.define({create:function(){return null},update:function(e,t){e&&(e=e.map(t.changes));var n=!0,r=!1,i=void 0;try{for(var o,c=t.effects[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var s=o.value;s.is(a)&&(e=t.changes.invert(t.startState.doc)),s.is(l)&&(e=null)}}catch(e){r=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw i}}return e}})},26294:function(e,t,n){n.d(t,{i:function(){return d},o:function(){return u}});var r=n(7351),i=n(52130),o=n(34156),a=n(80332),l=n(34328),c=n(36480),s=n(22238),u=function(e){var t=e.state.field(a.WF,!1),n=e.state.facet(o.t);if(!(null==t?void 0:t.presented)||Date.now()-t.timestamp<150)return!1;var u=e.state.selection.main.head,d=e.state.doc.lineAt(u);if(u<=d.from+d.length-d.text.trimStart().length){var f=t.changes.closestRange(u);if(f.value instanceof c.Yf){var h=f.value.unfulfilled.toString(),p=(0,s.L)(h,e.state.tabSize);if(p>0&&p>=e.state.tabSize)return!1}}var m=t.changes.asChangeSpec(),v=e.state.changes(m),g=t.changes.extendSelection(e.state.selection);return(0,r._B)(e),e.dispatch({changes:v,selection:g,scrollIntoView:!0,effects:a.OK.of(t.dismiss(a.VJ.ACCEPTED_BY_USER)),annotations:[l.Z.of(!0),i.Iv.of("full")]}),n.onSuggestionAccepted(e,t),!0},d=function(e){var t=e.state.field(a.WF,!1),n=e.state.facet(o.t);return null!=t&&!!t.presented&&(e.dispatch({effects:a.OK.of(t.dismiss(a.VJ.DISMISSED_BY_USER))}),n.onSuggestionExplicitlyDismissed(e,t),!0)}},34156:function(e,t,n){n.d(t,{t:function(){return r}});var r=n(80403).r$.define({combine:function(e){var t=e.filter(Boolean);return{onDismiss:function(e){return t.forEach(function(t){var n;return null===(n=t.onDismiss)||void 0===n?void 0:n.call(t,e)})},onRequestIgnoredBackendOnly:function(e){return t.forEach(function(t){var n;return null===(n=t.onRequestIgnoredBackendOnly)||void 0===n?void 0:n.call(t,e)})},onRequestFirstEmit:function(e){return t.forEach(function(t){var n;return null===(n=t.onRequestFirstEmit)||void 0===n?void 0:n.call(t,e)})},onRequestEndedWithNoSuggestion:function(e){return t.forEach(function(t){var n;return null===(n=t.onRequestEndedWithNoSuggestion)||void 0===n?void 0:n.call(t,e)})},onRequestCompletelyPresented:function(e){return t.forEach(function(t){var n;return null===(n=t.onRequestCompletelyPresented)||void 0===n?void 0:n.call(t,e)})},onSuggestionExplicitlyDismissed:function(e,n){return t.forEach(function(t){var r;return null===(r=t.onSuggestionExplicitlyDismissed)||void 0===r?void 0:r.call(t,e,n)})},onSuggestionAccepted:function(e,n){return t.forEach(function(t){var r;return null===(r=t.onSuggestionAccepted)||void 0===r?void 0:r.call(t,e,n)})}}}})},19934:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(17198),i=n(80047),o=n(41733),a=n(21262),l=n(71440),c=n(58995);function s(){var e=(0,a._)(['\n  query CompleteCodeEngine {\n    currentUser {\n      id\n      defaultEngine: gateVariation(feature: "flag-ghostwriter-complete-engine")\n      hasOverride: gate(feature: "flag-code-suggestion-engine")\n    }\n  }\n']);return s=function(){return e},e}var u={},d=(0,l.Ps)(s());function f(){var e,t,n,a,l=(0,r.Gn)("completeCodeEngine").preferences,s=(e=(0,o._)({},u,void 0),c.a(d,e)).data,f=null==l?void 0:l.completeCodeEngine;if(f&&(null==s?void 0:null===(t=s.currentUser)||void 0===t?void 0:t.hasOverride)&&i.vw.has(f))return{engine:f,settings:i.Uw[f]};var h=null!==(a=null==s?void 0:null===(n=s.currentUser)||void 0===n?void 0:n.defaultEngine)&&void 0!==a?a:i.OO;return{engine:h,settings:i.Uw[h]}}},9853:function(e,t,n){n.d(t,{Yy:function(){return i},ZP:function(){return p},G_:function(){return h}});var r,i,o=n(9413),a=n(41733),l=n(21262),c=n(71440),s=n(58995);function u(){var e=(0,l._)(['\n  query CompleteCode {\n    currentUser {\n      id\n      hasAiPro\n      hasKillswitch: gate(feature: "flag-killswitch-ghostwriter")\n    }\n  }\n']);return u=function(){return e},e}var d={},f=(0,c.Ps)(u());function h(e){return"None"!==e&&"BackendOnly"!==e}function p(){var e,t=(e=(0,a._)({},d,void 0),s.a(f,e)).data,n=(0,o.v)().isTeamWithAiDisabled,r=null==t?void 0:t.currentUser;return!r||r.hasKillswitch||n?"None":r.hasAiPro?"Pro":"Basic"}(r=i||(i={})).None="None",r.Basic="Basic",r.Pro="Pro",r.BackendOnly="BackendOnly"},32754:function(e,t,n){n.d(t,{Z:function(){return e9}});var r,i,o=n(27387),a=n(96583),l=n(43182),c=n(80403),s=n(3030),u=n(26294),d=c.r$.define({combine:function(e){var t;return null!==(t=e.filter(Boolean)[0])&&void 0!==t?t:null}}),f=n(12285),h=n(4384),p=n(80332),m=function(){"use strict";function e(t,n){(0,f._)(this,e),this.cooldown=t,this.ignored=n}var t=e.prototype;return t.delay=function(t){return new e(Date.now()+t,this.ignored)},t.ignore=function(t){return this.ignored!==t?new e(this.cooldown,t):this},t.vent=function(){return null!==this.cooldown?new e(null,this.ignored):this},t.clear=function(){return null!==this.cooldown||null!==this.ignored?new e(null,null):this},t.tick=function(){return null!==this.cooldown&&Date.now()>this.cooldown?this.vent():this},t.handle=function(e,t){switch(t.reason){case p.VJ.FULLY_TYPED_INTO:case p.VJ.ACCEPTED_BY_USER:return this.clear();case p.VJ.DISMISSED_BY_USER:return this.delay(5e3).ignore(e.suggestion.content);case p.VJ.INCOMPATIBLE_DOCUMENT_CHANGE:case p.VJ.INCOMPATIBLE_CURSOR_CHANGE:return e.suggestion.ctx.onEmptyLine?this.delay(5e3):this.delay(1e3)}return this},t.isIgnored=function(e){return null!==this.ignored&&function(e,t){for(var n=Math.max(e.length,t.length),r=0,i=0;i<n;i++)e[i]!==t[i]&&r++;return 1-r/n}(this.ignored,e)>=.8},(0,h._)(e,[{key:"cooling",get:function(){return null!==this.cooldown&&Date.now()<this.cooldown}},{key:"remaining",get:function(){return null!==this.cooldown?Math.max(0,this.cooldown-Date.now()):0}}]),e}(),v=c.r$.define({combine:function(e){return!e.length||e[0]}}),g=c.QQ.define({create:function(){return new m(null,null)},update:function(e,t){if(!t.state.facet(v)||(e=e.tick()).cooling)return e;var n=t.startState.field(p.WF,!1),r=t.state.field(p.WF,!1);return n&&r&&n.presented&&r.stopped?e.handle(n,r):e}}),y=n(85500),b=n(8117),w=n(34328),Z=c.QQ.define({create:function(){return null},update:function(e,t){if(t.annotation(w.Z)||!t.state.field(p.WF).stopped)return null;if(!t.docChanged&&!t.selection)return e;var n=t.newDoc,r=t.newSelection.main.head;return t.annotation(c.YW.remote)?null!==e&&(0,y.zV)(n,r)&&(0,y.to)(n,r)?e:null:t.selection&&t.isUserEvent("select")?(0,y.zV)(n,r)&&(0,y.to)(n,r)?Date.now():null:t.docChanged&&null!==e?(0,y.zV)(n,r)&&(0,y.to)(n,r)?e:null:e}}),x=function(){"use strict";function e(t){(0,f._)(this,e),this.view=t,this.timeout=null}var t=e.prototype;return t.update=function(e){var t=this,n=e.startState.field(Z),r=e.state.field(Z);n!==r&&(null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null),null!==r&&(this.timeout=setTimeout(function(){t.timeout=null,t.view.dispatch({effects:[b.mb.of(b.xz.NOW)]})},2500)))},t.destroy=function(){null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},e}(),C=s.lg.fromClass(x,{provide:function(){return Z}}),_=n(41733),S=n(30509),k=n(33083),E=n(92733),T=n(34156);(r=i||(i={}))[r.HIGH=1]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-1]="LOW";var R=c.r$.define({combine:function(e){var t=e.filter(Boolean);return function(e){return t.map(function(t){return"function"==typeof t?t(e):t}).filter(Boolean).flat()}}}),D=function(){"use strict";function e(t){if((0,f._)(this,e),this.priority=null!==(n=t.priority)&&void 0!==n?n:i.NORMAL,this.header=t.header,this.segments=t.segments,this.accepted=0,this.curLength=0,this.segments.length){var n,r=this.header?this.header.length+1:0;this.maxLength=r+this.segments.reduce(function(e,t){return e+t.length},0),this.minLength=r+this.segments[this.segments.length-1].length}else this.maxLength=0,this.minLength=0}var t=e.prototype;return t.acceptSegment=function(e){if(this.accepted===this.segments.length)return 0;var t=this.segments[this.index-1],n=0===this.accepted&&this.header?this.header.length+t.length+1:t.length;return n>e?0:(this.accepted++,this.curLength+=n,n)},t.acceptAll=function(){this.accepted=this.segments.length,this.curLength=this.maxLength},t.finalize=function(){return 0===this.accepted?null:(this.header?this.header+"\n":"")+this.segments.slice(this.index).join("").trimEnd()},e.acceptSegments=function(e,t){for(var n=t;t>0;){var r=!1,i=!0,o=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value.acceptSegment(t);s&&(t-=s,r=!0)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}if(!r)break}return n-t},(0,h._)(e,[{key:"index",get:function(){return this.segments.length-this.accepted}}]),e}(),I=function(){"use strict";function e(t){(0,f._)(this,e),this.priority=t,this.chunks=[],this.size=0}var t=e.prototype;return t.add=function(e){this.chunks.push(e),this.size+=e.maxLength},t.resize=function(e){if(e<this.accepted)throw Error("Cannot resize below already accepted");this.size=e},t.accept=function(){D.acceptSegments(this.chunks,this.size-this.accepted)},e.fromChunkViews=function(t){var n=[],r=new Map,i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value,u=r.get(s.priority);u||(u=new e(s.priority),n.push(u),r.set(s.priority,u)),u.add(s)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return n},(0,h._)(e,[{key:"accepted",get:function(){return this.chunks.reduce(function(e,t){return e+t.curLength},0)}},{key:"empty",get:function(){return 0===this.size}}]),e}();function B(e,t){switch(e){case"coffeescript":case"dockerfile":case"elixir":case"julia":case"makefile":case"perl":case"python":case"python 3":case"shellscript":case"terraform":case"yaml":return"# ".concat(t);case"sql":case"lua":return"-- ".concat(t);case"html":case"svelte":case"xml":case"xsl":return"<!-- ".concat(t," -->");case"css":return"/* ".concat(t," */");case"tex":case"latex":case"matlab":return"% ".concat(t);case"vb":return"' ".concat(t);case"markdown":return"[]: # ".concat(t);case"handlebars":return"{{!-- ".concat(t," --}}");case"haml":return"-# ".concat(t);case"erb":return"<%# ".concat(t," %>");default:return"// ".concat(t)}}var G=n(31417),A=n(16689),P=n.n(A),L=["o17pu","o1gpu","ovgpu","ovgpure","ovgpuref","ovgpurf","ovgpuva","ovgpuvat","o!gpu","pnzfyhg","pnzjuber","puvap","puvax","pbba","pbbaf","phaavr","phag","phagsnpr","phagubyr","phagyvpx","phagyvpx","phagyvpxre","phagyvpxre","phagyvpxvat","phagyvpxvat","phagent","phagf","qnexvr","qngr encr","qngrencr","snt","sntont","sntt","snttvat","snttvg","snttvgg","snttbg","snttf","sntbg","sntbgf","sntf","sntgneq","sngnff","shpxgneq","shpxgneqf","tnat onat","tnatonat","tnatonatrq","tnatonatrq","tnatonatf","tnlgneq","tnljnq","tbngpk","tbngfr","tevatb","ubne","ubner","ubre","ubbxre","wnvy onvg","wnvyonvg","wnc","wvtnobb","wvttnobb","wvttreobb","xhag","y3v+pu","y3vgpu","yrzba cnegl","ybyvgn","a1ttn","a1ttre","anzoyn","arteb","avtt3e","avtt4u","avttn","avttnu","avttnf","avttnm","avttre","avttref","avtyrg","avt abt","dhrreonvg","dhrreubyr","encr","encvat","encvfg","ergneq","ehfxv","furznyr","fubgn","fxnax","fyhg","fyhgont","fyhgf","jrgonpx","juvgr cbjre","juber"],N=L.reduce(function(e,t){return Math.max(e,t.length)},0),O=new RegExp("(?:\\w+[^\\S\\n]*)?\\w*[^]{".concat(N,"}$")),U=null,M=function(){"use strict";function e(t){var n=this;(0,f._)(this,e),this.config=t,this.finished=!1,this.abortController=new AbortController,this.suggestion="",this.promise=this.start(),this.abortController.signal.addEventListener("abort",function(){if(!n.finished){var e,t;n.finished=!0,null===(e=(t=n.config).onFinished)||void 0===e||e.call(t,null)}})}var t=e.prototype;return t.start=function(){var e=this;return(0,o._)(function(){var t,n,r,i,o,l,c,s,u,d,f,h,p,m,v,g,b,w,Z,x,C,_,S,k,E,T,R,D,I,B,A,M;return(0,a.Jh)(this,function(a){switch(a.label){case 0:a.trys.push([0,13,,14]),i="",o=!0,l=!1,c=void 0;try{for(s=e.config.prefix.iter(-1)[Symbol.iterator]();!(o=(u=s.next()).done)&&(f=(d=u.value).trimEnd(),i=(d?d.slice(f.length):"\n")+i,!(f.length>0));o=!0);}catch(e){l=!0,c=e}finally{try{o||null==s.return||s.return()}finally{if(l)throw c}}h=e.config.prefix.length-i.length,p=i?e.config.prefix.slice(0,h):e.config.prefix,v=e.config.request({prefix:p.toString(),suffix:null===(r=e.config.suffix)||void 0===r?void 0:r.toString(),header:null!==(m=e.config.header)&&void 0!==m?m:void 0,language:e.config.language,maxTokens:e.config.maxTokens,signal:e.abortController.signal}),g=!0,b=!!i,w="",Z=!1,x=!1,a.label=1;case 1:a.trys.push([1,6,7,12]),_=(0,G._)(v),a.label=2;case 2:return[4,_.next()];case 3:if(!(Z=!(S=a.sent()).done))return[3,5];if(k=S.value,b){if(w+=k,(0,y.xb)(k))return[3,4];if(b=!1,E=(0,y.O8)(w),T=(0,y.O8)(i),!E.indentation.startsWith(T.indentation)||!!T.newlines!=!!E.newlines)return e.abort(),[3,5];k=E.indentation.slice(T.indentation.length)+E.content}if(function(e,t){if(t){var n,r;"string"!=typeof t&&(t=t.sliceString(Math.max(0,t.length-2*N))),e=(null!==(r=null===(n=t.match(O))||void 0===n?void 0:n[0])&&void 0!==r?r:t)+e}if(null===U){var i=L.map(function(e){return e.replace(/[a-zA-Z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)+("n">e.toLowerCase()?13:-13))})}).map(function(e){return P()(e.toLowerCase().trim())}).sort(function(e,t){return t.length-e.length}).join("|"),o="\\b|\\d|_";U=RegExp("(?:".concat(o,")(?:").concat(i,")(?:").concat(o,")"),"i")}return U.test(e)}(k,g?p:e.suggestion))return e.abort(),null===(R=(D=e.config).onError)||void 0===R||R.call(D,Error("Slur detected in output")),[3,5];if(e.suggestion+=k,e.config.onTextReceived&&!1===e.config.onTextReceived(e.suggestion,g))return e.abort(),[3,5];g=!1,a.label=4;case 4:return Z=!1,[3,2];case 5:return[3,12];case 6:return I=a.sent(),x=!0,C=I,[3,12];case 7:if(a.trys.push([7,,10,11]),!(Z&&null!=_.return))return[3,9];return[4,_.return()];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:if(x)throw C;return[7];case 11:return[7];case 12:return[3,14];case 13:return B=a.sent(),e.aborted||e.abort(),B instanceof DOMException&&"AbortError"===B.name||null===(A=(M=e.config).onError)||void 0===A||A.call(M,B),[3,14];case 14:if(e.aborted)return[2,null];return e.finished=!0,null===(t=(n=e.config).onFinished)||void 0===t||t.call(n,e.suggestion),[2,e.suggestion]}})})()},t.abort=function(){this.aborted||this.abortController.abort()},t.then=function(e,t){return this.promise.then(e,t)},(0,h._)(e,[{key:"aborted",get:function(){return this.abortController.signal.aborted}}]),e}(),X=n(43037),F=n(75869),W=n(22897),H=function(){"use strict";function e(t,n,r,i,o){(0,f._)(this,e),this.text=t,this.pos=n,this.docA=r,this.treeA=i,this.parser=o}var t=e.prototype;return t.hasTree=function(){return null!==this.parser&&null!==this.treeA},t.update=function(t){var n=this,r=new e(t,this.pos,this.docA,this.treeA,this.parser);if(r._line=this._line,r._onEmptyLine=this._onEmptyLine,r._inEmptyBlock=this._inEmptyBlock,r._blockA=this._blockA,this.parser&&this.treeA&&(this.reuseData||this._treeB)){var i=(0,W.F)(this.text,t),o=[];i.iterChanges(function(e,t,r,i,a){o.push({from:n.pos+e,to:n.pos+t,insert:a})});var a=c.as.of(o,this.docB.length);this.reuseData&&!this._treeB?r.reuseData={diff:this.reuseData.diff.compose(a),docB:this.reuseData.docB,treeB:this.reuseData.treeB}:this._treeB&&(r.reuseData={diff:a,docB:this.docB,treeB:this._treeB})}return r},(0,h._)(e,[{key:"line",get:function(){return void 0===this._line&&(this._line=this.docA.lineAt(this.pos)),this._line}},{key:"onEmptyLine",get:function(){return void 0===this._onEmptyLine&&(this._onEmptyLine=(0,y.xb)(this.line)),this._onEmptyLine}},{key:"changesAtoB",get:function(){return void 0===this._changesAtoB&&(this._changesAtoB=c.as.of({from:this.pos,to:this.docA.length,insert:this.text},this.docA.length)),this._changesAtoB}},{key:"docB",get:function(){return void 0===this._docB&&(this._docB=this.reuseData?this.reuseData.diff.apply(this.reuseData.docB):this.changesAtoB.apply(this.docA)),this._docB}},{key:"treeB",get:function(){return void 0===this._treeB&&(this.treeA&&this.parser?this.reuseData?this._treeB=(0,F.p)({parser:this.parser,changes:this.reuseData.diff,text:this.docB,base:this.reuseData.treeB}):this._treeB=(0,F.p)({parser:this.parser,changes:this.changesAtoB,text:this.docB,base:this.treeA}):this._treeB=null),this._treeB}},{key:"inEmptyBlock",get:function(){return void 0===this._inEmptyBlock&&(this._inEmptyBlock=!!this.treeA&&(0,X.ib)(this.docA,this.treeA,this.pos)),this._inEmptyBlock}},{key:"blockA",get:function(){return void 0===this._blockA&&(this._blockA=this.treeA?(0,X.gQ)(this.treeA,this.pos):null),this._blockA}},{key:"blockB",get:function(){return void 0===this._blockB&&(this._blockB=this.treeB?(0,X.gQ)(this.treeB,this.pos):null),this._blockB}}]),e}(),V=n(63257),z=n(99415);function j(e,t,n){var r,i=null!==(r=e.prop(t<0?z.md.openedBy:z.md.closedBy))&&void 0!==r?r:null;if(null===i||n&&!i.includes(n.name)){if(!n)return null;i=i?(0,V._)(i).concat([n.name]):[n.name]}return i}function q(e,t,n){var r=j(e.type,t,n);if(null===r)return null;for(var i=e.cursor(),o=0;t<0?i.prevSibling():i.nextSibling();){if(0===o&&i.from!==i.to&&r.includes(i.name))return i.node;if(null!==j(i.type,t)){o++;continue}if(null!==j(i.type,-t)){if(0===o)return null;o--}}return null}function J(e){return e.split("").reverse().join("")}function Y(e){if(!e[0]||1===e.length)return e[0]||"";for(var t=0;e[0][t]&&e.every(function(n){return n[t]===e[0][t]});)t++;return e[0].substring(0,t)}function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e.length<1)return{halt:!1};for(var i=e[e.length-1],o=null!==r?i.split(r):e,a=1;a<=n;a++){var l=!1;if(o.length<a+t)break;for(var c=t;c>0;c--)if(o[o.length-c]!==o[o.length-c-a]){l=!0;break}if(!l)return{halt:!0,truncateLine:e.length-1}}return{halt:!1}}var K=function(e,t){return e.length<t.length},Q=function(e,t){var n=""===e?1:parseInt(e,10),r=parseInt(t,10);return!(isNaN(n)||isNaN(r))&&n+1===r};function ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:K;if(e.length<t)return{halt:!1};var o=e.slice(-1*t),a=Y(o),l=J(Y(o.map(J)));if(a.length<n||l.length<r)return{halt:!1};for(var c=null,s=0;s<t;s++){var u=o[s].substring(a.length),d=u.substring(0,u.length-l.length);if(!(!c||i(c,d)))return{halt:!1};c=d}return{halt:!0,truncateLine:e.length-t}}var et=[function(e){return function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=1;r<t;r++){var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return e.length<t||e[e.length-1].trim().length<n?{halt:!1}:e[e.length-1]===e[e.length-t-1]?{halt:!0,truncateLine:e.length-t}:{halt:!1}}(e,r,n);if(i.halt)return i}return{halt:!1}}(e,8,3)},function(e){return ee(e,3,6,3,K)},function(e){return ee(e,3,6,1,Q)},function(e){return $(e,12,12," ")},function(e){return $(e,8,16,"")}],en=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et;return function(t){for(var n=t.split("\n"),r=n.slice(0,-1),i=0;i<e.length;i++){var o=e[i](n);if(o.halt)return{haltAfter:!0,replacementSuggestion:n.slice(0,o.truncateLine).join("\n")};var a=e[i](r);if(a.halt)return{haltAfter:!0,replacementSuggestion:r.slice(0,a.truncateLine).join("\n")}}return{haltAfter:!1}}}(),er=n(36480),ei=/[([{]+(?=\s*$)/,eo=/[)\]};]+\s*$/,ea=function(){"use strict";function e(t,n,r,i,o){(0,f._)(this,e),this.source=t,this.pos=n,this.newlines=r,this.content=i,this.ctx=o,this.empty=(0,y.xb)(i),this.text=this.empty?"":r+i,this.lines=(0,y.uq)(i)}var t=e.prototype;return t.with=function(t){var n=this.source,r=this.content,i=this.newlines;if("source"in t&&void 0!==t.source){n=t.source;var o=(0,y.O8)(n);r=o.indentation+o.content,i=o.newlines}if("text"in t&&void 0!==t.text){var a=(0,y.O8)(t.text);r=a.indentation+a.content,i=a.newlines}"content"in t&&void 0!==t.content&&(r=t.content),"newlines"in t&&void 0!==t.newlines&&(i=t.newlines);var l=this;if(n!==this.source||r!==this.content||i!==this.newlines){var c=this.ctx.update((0,y.xb)(r)?"":i+r);l=new e(n,this.pos,i,r,c)}return!l.empty&&t.process&&(l="boolean"==typeof t.process?l.process():l.process(t.process)),l},t.slice=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?this.with({text:this.text.slice(e,t)}):this.with({content:this.content.slice(e,t)})},t.splice=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=r?this.text:this.content,o=i.slice(0,e),a=i.slice(e+t);return r?this.with({text:o+n+a}):this.with({content:o+n+a})},t.clip=function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=this.segments[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(a.pos>=e)return this.slice(0,a.index+a.offset,!0)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return this},t.stopAtLine=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?this.newlines.length:0;if(e<0||e>this.lines.length+n)throw Error("Index out of range: "+e);if(t&&e<n)return this.with({text:this.newlines.slice(0,e)});for(var r=e-n;r<this.lines.length&&(0,y.Jz)(this.lines[r]);)r++;var i=this.lines.slice(0,r).join("\n");return this.with({content:i})},t.removeIncompleteLine=function(){if(1===this.lines.length)return this;var e=this.lines[this.lines.length-1];return(0,y.xb)(e)||eo.test(e)?this:this.slice(0,this.content.length-e.length)},t.trimEnd=function(){return this.with({content:this.content.trimEnd()})},t.removeNewlinesIfOnEmptyLine=function(){return this.newlines&&this.ctx.onEmptyLine?this.with({newlines:""}):this},t.cutSuggestion=function(){if(this.empty)return this;if((0,y.Jz)(this.lines[0])||!this.ctx.hasTree())return this.stopAtLine(1);var e=(0,X.zX)(this.ctx.treeB,this.pos);if(!e.length)return this.stopAtLine(1);var t=this.pos+this.lines[0].length,n=this.ctx.inEmptyBlock?e:e.filter(function(e){return e.from<=t}),r=n.length?n[n.length-1].to-this.pos:null;return(null!==r&&r<0&&(r=null),this.ctx.blockB&&this.ctx.blockB.node.from<this.pos&&(null===r||r>this.ctx.blockB.node.to-this.pos)&&(this.ctx.inEmptyBlock||!this.ctx.blockA||this.ctx.blockA.node.from<this.ctx.blockB.node.from)&&(r=this.ctx.blockB.node.to-this.pos),null===r)?this.ctx.inEmptyBlock?this.ctx.blockA?this.clip(this.ctx.blockA.node.to):this:this.ctx.blockA?this.stopAtLine(1).clip(this.ctx.blockA.node.to):this.stopAtLine(1):this.ctx.blockA&&(this.ctx.inEmptyBlock||!this.ctx.onEmptyLine)?this.slice(0,r,!0).clip(this.ctx.blockA.node.to):this.slice(0,r,!0)},t.filter=function(){var e=en(this.content).replacementSuggestion;return e?this.with({content:e}):this},t.clearIfContentIsIsolated=function(){if(!this.ctx.onEmptyLine)return this;if(this.newlines)return this.with({content:""});if(1===this.segments.length&&0===this.segments[0].offset)return this;var e=this.segments.find(function(e){return!(0,y.xb)(e.text.slice(e.offset))});return e&&this.ctx.docA.lineAt(e.pos).number!==this.ctx.line.number?this.with({content:""}):this},t.removeDuplicateLastLine=function(){if(!this.newlines&&1===this.lines.length&&!this.ctx.onEmptyLine)return this;var e=this.segments[this.segments.length-1];if(e.offset===e.text.length-1)return this;var t=this.ctx.docA.lineAt(e.pos);if(t.number===this.ctx.docA.lines)return this;var n=e.text.slice(e.offset),r=n.lastIndexOf("\n"),i=-1!==r,o=i?e.index+e.offset+r:e.index+e.offset,a=i?n.slice(r+1):n;return(0,y.xb)(a)?this:(!i&&(0,y.xb)(t)&&(a=t.text+a),a===this.ctx.docA.line(t.number+1).text)?this.slice(0,o,!0):this},t.removeTrailingOpenBrackets=function(){var e=ei.exec(this.content);return e?this.splice(e.index,e.length):this},t.process=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.skipComplexProcessing?this.removeIncompleteLine().trimEnd().removeNewlinesIfOnEmptyLine():this.removeIncompleteLine().removeNewlinesIfOnEmptyLine().cutSuggestion().filter().trimEnd().removeDuplicateLastLine().removeTrailingOpenBrackets().trimEnd().clearIfContentIsIsolated()},e.create=function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=(0,y.O8)(t),l=a.indentation+a.content,c=a.newlines,s=new H((0,y.xb)(l)?"":c+l,n,r,i,o);return new e(t,n,c,l,s)},(0,h._)(e,[{key:"segments",get:function(){if(void 0===this._segments){if(this.ctx.hasTree()){var e,t=function(e){var t=function(e){var t,n,r,i,o=e.insertion,a=e.pos;if("doc"in e){var l=e.parser;t=e.doc,n=e.tree;var s=c.as.of({from:a,to:t.length,insert:o},t.length);r=s.apply(t),i=(0,F.p)({parser:l,changes:s,text:r,base:n})}else t=e.docA,n=e.treeA,r=e.docB,i=e.treeB;return{insertion:o,pos:a,docA:t,treeA:n,docB:r,treeB:i}}(e),n=t.insertion,r=t.pos,i=t.docA,o=t.treeA,a=t.docB,l=t.treeB,s=[],u=[],d=l.cursor();do{if(null===j(d.type,-1))continue;var f=d.node,h=q(f,-1);if(h&&h.to<=r){var p=function(e,t){for(var n=t.resolveInner(e.from,1).node;n&&n.from===e.from;){if(n.type===e.type)return n;n=n.parent}return null}(h,o);if(p){s.push({openA:p,closeB:f});var m=q(p,1,f.type);m&&m.from>=r&&u.push(m)}}}while(d.prev()&&d.to>r);if(0===s.length||0===u.length)return null;var v=[],g=!0,y=!1,b=void 0;try{for(var w,Z=s[Symbol.iterator]();!(g=(w=Z.next()).done);g=!0){var x=w.value,C=x.openA,_=x.closeB,S=a.sliceString(_.from,_.to),k=j(C.type,1,_.type);if(null===k)throw Error("Unexpected null matching types");for(var E=0;E<u.length;E++){var T=u[E];if(k.includes(T.name)&&i.sliceString(T.from,T.to)===S){u.splice(0,E+1),v.unshift({closeA:T,closeB:_});break}}}}catch(e){y=!0,b=e}finally{try{g||null==Z.return||Z.return()}finally{if(y)throw b}}if(0===v.length)return null;var R=[{text:n,pos:r,index:0,offset:0}],D=0,I=!0,B=!1,G=void 0;try{for(var A,P=v[Symbol.iterator]();!(I=(A=P.next()).done);I=!0){var L=A.value,N=L.closeA,O=L.closeB,U=R.pop();if(!U)throw Error("Unexpected empty split");var M=O.from-r,X=0;if(U.pos<N.from){for(var W=1;function(e,t,n,r){var i=e.sliceString(n,n+1);return i===t.sliceString(r,r+1)&&""===i.trim()}(i,a,N.from-W,O.from-W)&&N.from-W>=U.pos&&O.from-W>=r;)W++;X=W-1}M-=X;var H={text:n.slice(D,M),pos:U.pos,index:U.index,offset:U.offset},V={text:n.slice(M),pos:N.to,index:M,offset:N.to-N.from+X};D=M,R.push(H,V)}}catch(e){B=!0,G=e}finally{try{I||null==P.return||P.return()}finally{if(B)throw G}}return""===R[R.length-1].text&&R.pop(),R}({insertion:this.text,pos:this.pos,docA:this.ctx.docA,treeA:this.ctx.treeA,docB:this.ctx.docB,treeB:this.ctx.treeB});t&&(this._segments=t)}null!==(e=this._segments)&&void 0!==e||(this._segments=[{text:this.text,index:0,pos:this.pos,offset:0}])}return this._segments}},{key:"insertions",get:function(){if(void 0===this._insertions){var e=new c.f_,t=!0,n=!1,r=void 0;try{for(var i,o=this.segments[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=c.xv.of((0,y.uq)(a.text)),s=new er.Yf(l,a.offset);e.add(a.pos,a.pos,s)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}this._insertions=e.finish()}return this._insertions}}]),e}(),el=n(15323),ec=n(73393),es=function(){"use strict";function e(t){(0,f._)(this,e),this.view=t,this.destroyed=!1,this.stream=null,this.debounceTimeout=null,this.queued=!1,this.lastPrefixLength=0}var t=e.prototype;return t.dispatchSuggestion=function(e){this.view.dispatch({effects:p.OK.of(e)})},t.dismiss=function(e){this.queued=!1,null!==this.debounceTimeout&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=null),!this.stream||this.stream.finished||this.stream.aborted||this.stream.abort(),this.destroyed||this.suggestion.stopped||this.dispatchSuggestion(this.suggestion.dismiss(e)),this.listeners.onDismiss(this.view)},t.requestSuggestion=function(e){var t,n,r=this;if(null!==this.config&&null!==this.fileTypeConfig){if(null!==this.debounceTimeout&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=null),!this.config.debounceAlways&&!this.regulator.cooling&&e===b.xz.NOW){this.requestSuggestionImmediately();return}var i=this.view.state.selection.main.head,o=this.view.state.wordAt(i),a=o&&o.from!==i?null!==(n=this.config.debounceTimeInsideWord)&&void 0!==n?n:0:null!==(t=this.config.debounceTimeOutsideWord)&&void 0!==t?t:0;this.regulator.cooling&&(a=Math.max(a,this.regulator.remaining)),0===a?this.requestSuggestionImmediately():this.debounceTimeout=setTimeout(function(){r.debounceTimeout=null,r.requestSuggestionImmediately()},a)}},t.requestSuggestionImmediately=function(){var e,t,n,r,i=this;if(this.dismiss(),!this.suggestion.stopped)throw Error("dismiss should have stopped the suggestion");if(null!==this.config&&null!==this.fileTypeConfig&&!this.destroyed&&this.view.hasFocus&&(0,y.zV)(this.view.state.doc,this.view.state.selection.main.head)){var o=this.config,a=this.view.state,c=a.selection.main.head,s=a.doc,u=(0,k.qz)(a),d=null!==(t=null===(e=a.facet(k.dK))||void 0===e?void 0:e.parser)&&void 0!==t?t:null,f=this.fileTypeConfig,h={skipComplexProcessing:null!==(n=f.skipComplexProcessing)&&void 0!==n&&n},m=a.facet(R),v=function(e){var t=e.doc,n=e.pos,r=e.path,i=e.language,o=e.infill,a=e.context,l=e.limit,c=void 0===l?E.UQ:l,s=e.reserved,u=void 0===s?E.i$:s,d=["Language: ".concat(i),"Path: ".concat(r)].map(function(e){return B(i,e)}).join("\n")+"\n";if(d.length>c)throw Error("Cannot fit required header parts in prompt");if(null==a?void 0:a.length){var f=function(e,t){if((t-=2*e.length)<=0)return null;var n=e.map(function(e){return new D(e)}).filter(function(e){return e.maxLength>0&&e.minLength<=t}).sort(function(e,t){return e.priority===t.priority?e.minLength-t.minLength:t.priority-e.priority});if(!n.length)return null;var r=I.fromChunkViews(n),i=r.reduce(function(e,t){return e+t.size},0);if(i>t){var o=!0,a=!1,l=void 0;try{for(var c,s=r[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;u.size>t&&(i-=u.size-t,u.resize(t))}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}for(;i>t;){var d=1,f=!0,h=!1,p=void 0;try{for(var m,v=r[Symbol.iterator]();!(f=(m=v.next()).done);f=!0){var g=m.value;if(!g.empty){var y=Math.max(0,g.size-d);i-=g.size-y,g.resize(y),d++}}}catch(e){h=!0,p=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}}var b=!0,w=!1,Z=void 0;try{for(var x,C=r[Symbol.iterator]();!(b=(x=C.next()).done);b=!0){var _=x.value;_.empty||_.accept()}}catch(e){w=!0,Z=e}finally{try{b||null==C.return||C.return()}finally{if(w)throw Z}}var S=r.reduce(function(e,t){return e+t.accepted},0);S<t&&D.acceptSegments(n,t-S)}else n.forEach(function(e){return e.acceptAll()});return n.map(function(e){return e.finalize()}).filter(Boolean).reverse().join("\n\n")||null}(a,Math.max(u-d.length-2,c-n-d.length-2));f&&(d=f+"\n\n"+d)}var h=function(e,t,n){for(var r=e.slice(0,t);r.length>n;)r=r.lines>1?r.slice(r.line(1).to+1):r.slice(r.length-n);return r}(t,n,c-d.length),p=o?function(e,t){var n=e.slice(t);if(1===n.lines)return n;var r=0,i=null,o=!0,a=!1,l=void 0;try{for(var c,s=n.iterLines()[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;if(r++,""!==u&&u.trimStart()===u){i=n.line(r);break}}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return i?n.slice(0,i.to):n}(t,n):null;if(d.length+h.length>c)throw Error("Prompt is over the maximum length");return{prefix:h,suffix:p,header:d}}({doc:s,pos:c,path:f.path,language:f.id,infill:null!==(r=this.config.infill)&&void 0!==r&&r,context:m(this.view)}),g=v.prefix,w=v.suffix,Z=v.header,x=(0,X.ib)(s,u,c)?E.uV.EMPTY_BLOCK:E.uV.DEFAULT;this.lastPrefixLength=g.length,o.backendOnly||this.dispatchSuggestion(this.suggestion.start()),this.stream=new M({request:o.request,language:f.id,maxTokens:x,prefix:g,suffix:w,header:Z,onTextReceived:function(e,t){if(t&&i.listeners.onRequestFirstEmit(i.view),o.backendOnly){i.listeners.onRequestIgnoredBackendOnly(i.view);return}if(i.suggestion.stopped||!t&&i.suggestion.slotted)return!1;var n=i.suggestion.slotted?i.suggestion.upgrade(ea.create(e,c,s,u,d).process(h)):i.suggestion.with({source:e,process:h});if(n.stopped||n.suggestion.empty)return!1;i.dispatchSuggestion(n)},onFinished:function(e){var t=i.queued;if(i.queued=!1,!o.backendOnly){if(e&&i.suggestion.active){var n=i.suggestion.suggestion.source!==e?i.suggestion.with({source:e,process:h}):i.suggestion;if(!n.stopped&&!n.suggestion.empty&&!i.regulator.isIgnored(n.suggestion.content)){i.dispatchSuggestion(n.presented?n:n.present()),i.listeners.onRequestCompletelyPresented(i.view);return}}i.dismiss(p.VJ.INCOMPATIBLE_SUGGESTION),t&&i.requestSuggestion(b.xz.ENQUEUE),""===e&&i.listeners.onRequestEndedWithNoSuggestion(i.view)}},onError:function(e){l.$e(function(t){t.setExtra("prefix",g.toString()),t.setExtra("suffix",null==w?void 0:w.toString()),t.setExtra("header",Z),t.setExtra("maxTokens",x),t.setExtra("filePath",f.path),t.setExtra("language",f.id),t.setExtra("selection-head",c),t.setExtra("previous-character",s.sliceString(c-1,c)),t.setTag("ghostwriter",!0),l.Tb(e)})}})}},t.postUpdate=function(e){var t=e.startState.field(p.WF,!1),n=e.state.field(p.WF,!1);t&&n&&t.presented&&n.stopped&&n.reason===p.VJ.FULLY_TYPED_INTO&&this.listeners.onSuggestionAccepted(this.view,t),(0,ec.aU)(e,d,el.Yp,el.xR)&&this.dismiss(),(0,ec.aU)(e,p.WF)&&this.suggestion.stopped&&this.streaming&&this.dismiss();var r=(0,b.Io)(e.transactions);switch(r){case b.xz.STOP:this.active&&this.dismiss();break;case b.xz.ENQUEUE:case b.xz.NOW:this.active?this.queued=!0:this.requestSuggestion(r)}},t.destroy=function(){this.destroyed=!0,this.dismiss()},(0,h._)(e,[{key:"config",get:function(){return this.view.state.facet(d)}},{key:"listeners",get:function(){return this.view.state.facet(T.t)}},{key:"suggestion",get:function(){return this.view.state.field(p.WF)}},{key:"regulator",get:function(){return this.view.state.field(g)}},{key:"fileTypeConfig",get:function(){var e,t=this.view.state.facet(el.Yp),n=this.view.state.facet(el.xR),r=null==n?void 0:null===(e=n.getFeature("ai"))||void 0===e?void 0:e.complete;return t&&n&&(null==r?void 0:r.enabled)?(0,S._)((0,_._)({},r),{id:n.id,path:t}):null}},{key:"streaming",get:function(){return null!==this.debounceTimeout||null!==this.stream&&!this.stream.finished}},{key:"active",get:function(){return this.streaming||!this.suggestion.stopped}}]),e}(),eu=s.lg.fromClass(es,{provide:function(e){return s.tk.updateListener.of(function(t){var n;null===(n=t.view.plugin(e))||void 0===n||n.postUpdate(t)})}}),ed=function(){"use strict";function e(t){(0,f._)(this,e),this.view=t,this.gesture=null,this.touchstart=this.touchstart.bind(this),this.touchmove=this.touchmove.bind(this),this.touchend=this.touchend.bind(this),this.touchcancel=this.touchcancel.bind(this),t.dom.addEventListener("touchstart",this.touchstart)}var t=e.prototype;return t.shouldAllowSwiping=function(){if(!this.view.hasFocus)return!1;var e=this.view.state.selection.main.head,t=this.view.viewport;if(t.from>e||t.to<e)return!1;var n=this.view.state.field(p.WF,!1);return!!(null==n?void 0:n.presented)},t.stop=function(){this.gesture&&(this.gesture=null,document.removeEventListener("touchmove",this.touchmove),document.removeEventListener("touchend",this.touchend),document.removeEventListener("touchcancel",this.touchcancel))},t.touchFor=function(e){if(!this.gesture)return null;var t=!0,n=!1,r=void 0;try{for(var i,o=e.changedTouches[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(a.identifier===this.gesture.id)return a}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return null},t.touchstart=function(e){if(this.gesture&&!this.gesture.time)return this.stop();if(!this.gesture&&this.shouldAllowSwiping()&&1===e.changedTouches.length){var t=e.changedTouches[0];this.gesture={id:t.identifier,start:{x:t.clientX,y:t.clientY},end:{x:t.clientX,y:t.clientY},time:null},document.addEventListener("touchmove",this.touchmove,{passive:!1}),document.addEventListener("touchend",this.touchend,{passive:!1}),document.addEventListener("touchcancel",this.touchcancel)}},t.touchmove=function(e){var t=this.touchFor(e);if(this.gesture&&t){if(this.gesture.end.x=t.clientX,this.gesture.end.y=t.clientY,this.gesture.time&&Date.now()-this.gesture.time>500)return this.stop();var n=Math.abs(this.gesture.start.y-this.gesture.end.y),r=Math.abs(this.gesture.start.x-this.gesture.end.x);if(n>20)return this.stop();if(r>10){if(this.gesture.start.x>this.gesture.end.x)return this.stop();this.gesture.time||(this.gesture.time=Date.now()),e.preventDefault()}}},t.touchend=function(e){var t=this.touchFor(e);if(this.gesture&&t){this.gesture.end.x=t.clientX,this.gesture.end.y=t.clientY;var n=Math.abs(this.gesture.start.y-this.gesture.end.y),r=Math.abs(this.gesture.start.x-this.gesture.end.x);n<=20&&r>75&&this.gesture.start.x<this.gesture.end.x&&(!this.gesture.time||Date.now()-this.gesture.time<500)&&((0,u.o)(this.view),e.preventDefault()),this.stop()}},t.touchcancel=function(e){this.touchFor(e)&&this.stop()},t.update=function(){this.gesture&&!this.shouldAllowSwiping()&&this.stop()},t.destroy=function(){this.view.dom.removeEventListener("touchstart",this.touchstart),document.removeEventListener("touchmove",this.touchmove),document.removeEventListener("touchend",this.touchend),document.removeEventListener("touchcancel",this.touchcancel)},e}(),ef=s.lg.fromClass(ed),eh=n(11407),ep=c.r$.define({combine:function(e){var t;return null!==(t=e.filter(Boolean)[0])&&void 0!==t?t:null},enables:function(e){return[d.compute([e],function(t){return t.facet(e)}),p.WF,b._v,eu,ef,C,g,c.Wl.high(s.$f.compute([e],function(t){var n=t.facet(e),r=[];return(null==n?void 0:n.keyAcceptSuggestion)&&r.push({key:(0,eh.cU)(n.keyAcceptSuggestion),run:u.o}),(null==n?void 0:n.keyDismissSuggestion)&&r.push({key:(0,eh.cU)(n.keyDismissSuggestion),run:u.i}),r}))]}}),em=n(17528),ev=n(2178),eg=n(50959);function ey(){return(ey=(0,ev._)(function(e){var t,n,r,i;return(0,a.Jh)(this,function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:return[4,(0,em._)(t.read())];case 2:if(r=(n=o.sent()).done,i=n.value,r)return[3,4];return[4,i];case 3:return o.sent(),[3,1];case 4:return t.releaseLock(),[2]}})})).apply(this,arguments)}var eb=n(25050),ew=n(95563);function eZ(){return(eZ=(0,ev._)(function(e){var t,n,r,i,o,l,c,s,u,d,f,h,p,m;return(0,a.Jh)(this,function(a){switch(a.label){case 0:t=new TextDecoder("utf-8"),n="",r=!1,i=!1,a.label=1;case 1:a.trys.push([1,11,12,17]),l=(0,G._)(function(e){return ey.apply(this,arguments)}(e)),a.label=2;case 2:return[4,(0,em._)(l.next())];case 3:if(!(r=!(c=a.sent()).done))return[3,10];s=c.value,u=t.decode(s,{stream:!0}),n+=u,d=void 0,a.label=4;case 4:if(!(-1!==(d=n.indexOf("\n\n"))))return[3,9];if(!n.startsWith("data: ")||!("text"in(f=JSON.parse(n.slice(6,d)))))return[3,8];h=f.text.split("\n"),p=0,a.label=5;case 5:if(!(p<h.length))return[3,8];return[4,JSON.stringify({text:h[p]+"\n"})+"\n"];case 6:a.sent(),a.label=7;case 7:return p++,[3,5];case 8:return n=n.substring(d+1),[3,4];case 9:return r=!1,[3,2];case 10:return[3,17];case 11:return m=a.sent(),i=!0,o=m,[3,17];case 12:if(a.trys.push([12,,15,16]),!(r&&null!=l.return))return[3,14];return[4,l.return()];case 13:a.sent(),a.label=14;case 14:return[3,16];case 15:if(i)throw o;return[7];case 16:return[7];case 17:return[2]}})})).apply(this,arguments)}var ex=n(9853),eC=n(36556),e_=n(90079),eS=new Map,ek={beforeCompletion:function(e){l.n_({category:"ghostwriter",message:"Called completeCode: "+e.engine,level:"debug"});var t=e_.YX.add(e),n=eC.kg.timeStart({engine:e.engine,replid:e.replId,codeLength:e.header?e.header.length+e.prefix.length:e.prefix.length});return eS.set(t,n),t},afterCompletion:function(e,t,n,r){switch(e){case"aborted":e_.YX.abort(r),eS.delete(r);break;case"success":l.n_({category:"ghostwriter",message:"Suggestion emitted: "+n.partialSuggestion,level:"debug"});var i,o=eS.get(r);if(!o)throw Error("No latency logger found for handle: "+JSON.stringify(r));o("code suggestion",{type:"success",fromCache:n.fromCache,length:null===(i=n.partialSuggestion)||void 0===i?void 0:i.length}),eS.delete(r);break;case"finished":e_.YX.complete(r,{__typename:"CompleteCodeResult",id:Date.now().toString(),code:n.completeSuggestion});break;default:throw Error("Unknown completion kind: "+e)}},erroredCompletion:function(e,t){t&&(e_.YX.abort(t),eS.delete(t)),eC.kg.error("CompleteCode: error in completion provider",{err:String(e)})}},eE=n(60305),eT=n(62591),eR=n(60941),eD=n(17198),eI=n(59786),eB=n(39271),eG=n(36647),eA=n(50798);function eP(e){return JSON.stringify({text:e})+"\n"}var eL=function(){"use strict";function e(){(0,f._)(this,e),this.list=[]}var t=e.prototype;return t.add=function(e,t,n){this.list.push({prefix:e,suggestion:t,tokens:n}),this.list.length>25&&this.list.pop(),this.list.sort(function(e,t){return t.suggestion.length-e.suggestion.length})},t.retrieve=function(e,t){for(var n=0;n<this.list.length;n++){var r=this.list[n],i=r.prefix,o=r.suggestion,a=r.tokens;if(!(2*a<t)){if(e===i)return eP(o);if(!(i.length>e.length||i.length+o.length<=e.length||2*Math.floor((i.length+o.length-e.length)/(o.length/a))<t)){var l=o.lastIndexOf("\n");if(-1===l||!(l<=e.length-i.length)){var c=i+o;if(c.startsWith(e)){var s=c.slice(e.length);if(s.trim().length)return eP(s)}}}}}return null},e}(),eN=n(19934),eO=n(66626),eU=n(75958),eM=n(40635),eX=n(22750),eF="ai.codecomplete.lastTooltipHintTimestamp",eW=(0,eM.cn)({tooltipOpen:!1,consecutiveRejections:0}),eH=n(81199),eV=n(39743),ez=n(45077),ej=n(53557),eq=n(57127),eJ=n(36559),eY=/\n\n(?![^\S\n])/g,e$=new(function(){"use strict";function e(){(0,f._)(this,e),this.map=new Map}var t=e.prototype;return t.removeExpired=function(){if(this.map.size){var e=Date.now(),t=!0,n=!1,r=void 0;try{for(var i,o=this.map.entries()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=(0,eO._)(i.value,2),l=a[0],c=a[1];e-c.timestamp>6e4&&this.map.delete(l)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}},t.get=function(e){return this.removeExpired(),this.map.get(e)},t.add=function(e,t,n){if(this.removeExpired(),!this.map.has(e)&&10===this.map.size){var r=null,i=!0,o=!1,a=void 0;try{for(var l,c=this.map.values()[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;(!r||s.timestamp<r.timestamp)&&(r=s)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}if(!r)throw Error("Expected to find entry to remove from file cache");this.map.delete(r.path)}this.map.set(e,{path:e,type:t,content:n,timestamp:Date.now()})},t.clear=function(){this.map.clear()},e}()),eK=function(){"use strict";function e(t,n,r){var i=this;(0,f._)(this,e),this.view=t,this.readFile=n,this.recentFiles=r,this.destroyed=!1,this.chunks=[],this.dispose=r.subscribe(function(){return i.updateChunks()}),r.current.length&&this.updateChunks()}var t=e.prototype;return t.updateChunks=function(){var e=this;return(0,o._)(function(){var t,n,r,o,l,c,s,u,d,f,h,p,m,v,g,b;return(0,a.Jh)(this,function(w){switch(w.label){case 0:if(r=[],e.chunks=r,o=e.view.state.facet(el.Yp),l=e.view.state.facet(el.xR),!o||!l)return[2];"all"===(s=null!==(c=null===(n=l.features.ai)||void 0===n?void 0:null===(t=n.complete)||void 0===t?void 0:t.groups)&&void 0!==c?c:[])&&(s=[]),u=e.recentFiles.current.filter(function(e){return e!==o&&(0,eJ.Mb)(e)}),d=!0,f=!1,h=void 0,w.label=1;case 1:w.trys.push([1,6,7,8]),p=function(){var t,n,c,u,d,f,h,p,m,g,b,w,Z,x,C;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(t=v.value,h=null==(f=null!==(d=null==(u=e$.get(t))?void 0:u.type)&&void 0!==d?d:ej.$R.from(t))?void 0:null===(n=f.features.ai)||void 0===n?void 0:n.complete,!f||!(null==h?void 0:h.enabled))return[2,"continue"];if(!(f.id===l.id||"all"===h.groups||(null===(c=h.groups)||void 0===c?void 0:c.some(function(e){return s.includes(e)}))))return[3,3];if(void 0!==(p=null==u?void 0:u.content))return[3,2];return[4,e.readFile(t)];case 1:if(m=a.sent(),e.destroyed||e.chunks!==r)return[2,{v:void 0}];if(null===m)return[2,"continue"];p=m,e$.add(t,f,p),a.label=2;case 2:var _;if(!(g=(_=(_=p).trim())?_.split(eY).map(function(e){return e.trim()}).filter(Boolean):[]).length)return[2,"continue"];if(b=B(l.id,"Consider this snippet from ".concat((0,eq.LA)(t,o))),w=B(l.id,""),Z=g.map(function(e){return(0,y.uq)(e).map(function(e){return B(l.id,e)}).join("\n")+"\n".concat(w,"\n")}),x=r.length,C=i.NORMAL,x<2?C=i.HIGH:x>=5&&(C=i.LOW),r.push({header:b,segments:Z,priority:C}),r.length>=10)return[2,"break"];a.label=3;case 3:return[2]}})},m=u[Symbol.iterator](),w.label=2;case 2:if(d=(v=m.next()).done)return[3,5];return[5,(0,a.XA)(p())];case 3:if(g=w.sent(),"object"===(0,ez._)(g))return[2,g.v];if("break"===g)return[3,5];w.label=4;case 4:return d=!0,[3,2];case 5:return[3,8];case 6:return b=w.sent(),f=!0,h=b,[3,8];case 7:try{d||null==m.return||m.return()}finally{if(f)throw h}return[7];case 8:return[2]}})})()},t.update=function(e){(0,ec.aU)(e,el.Yp,el.xR)&&this.updateChunks()},t.destroy=function(){this.destroyed=!0,this.dispose()},e}(),eQ=new eR.j(function(e,t){return e&&t?s.lg.define(function(n){return new eK(n,e,t)},{provide:function(e){return R.of(function(t){var n,r;return null!==(r=null===(n=t.plugin(e))||void 0===n?void 0:n.chunks)&&void 0!==r?r:null})}}):null}),e0=n(78950),e1=n(33566),e2=[];function e4(e){if(!(e.length>800)){var t=e2.indexOf(e);-1!==t&&e2.splice(t,1),e2.unshift(e),e2.length>10&&e2.pop()}}var e3=!1;function e8(e,t){var n=(0,e1.I)(t.state),r=n.text,i=n.linewise;if(r&&r.trim()){if(i){var o=r.split(t.state.lineBreak).filter(function(e){return e.trim()}),a=!0,l=!1,c=void 0;try{for(var s,u=o[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value;e4(d)}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}}else e4(r)}}var e6=[s.lg.define(function(){return!function(){if(!e3){e3=!0;var e=function(e){var t,n=null===(t=document.getSelection())||void 0===t?void 0:t.toString();n&&n.trim()&&Promise.resolve().then(function(){e.defaultPrevented||e4(n)})};document.addEventListener("copy",e),document.addEventListener("cut",e)}}(),{}}),c.Wl.highest(s.tk.domEventObservers({copy:function(e,t){return e8(e,t)},cut:function(e,t){return e8(e,t)}})),R.of(function(e){if(!e2.length)return null;var t=e.state.facet(el.xR);if(!t)return null;var n=function(e){return B(t.id,e)},r=(0,e0._)(e2),o=r[0],a=r.slice(1),l=[];if(o&&o.trim()){var c=n("Consider the current clipboard:"),s=o.trimEnd().split("\n").map(function(e){return n(e)}).join("\n");l.push({header:c,segments:[s],priority:i.HIGH})}var u=a.filter(function(e){return e&&e.trim()});if(u.length){var d=n("Consider the clipboard history:"),f=u.map(function(e){return e.trimEnd().split("\n").map(function(e,t){return 0===t?n("- ".concat(e)):n("  ".concat(e))}).join("\n")}).reverse();l.push({header:d,segments:f})}return l.length?l:null})],e5=new eR.j(function(e,t,n,r,i,o,a,l,c){var s,u;return e?(t===ex.Yy.Pro?(s=E.Dz,u=E.Dz):(s=a,u=a),[ep.of({request:o,infill:i,backendOnly:t===ex.Yy.BackendOnly,debounceTimeOutsideWord:s,debounceTimeInsideWord:u,debounceAlways:t!==ex.Yy.Pro,keyAcceptSuggestion:n,keyDismissSuggestion:r}),l?e6:[],c?[]:v.of(!1)]):null}),e7=new eR.j(function(e,t,n,r){if(!e)return null;var i,o,a=(i=null,o=function(){},{queue:function(e){if(!(Math.random()>.1)){i&&clearTimeout(i);var t=function(){(0,eE.j)(eE.U3.CODE_SUGGESTION_USED,(0,_._)({type:"suggestionPresented"},e))};i=setTimeout(t,500),o=t}},flush:function(){i&&clearTimeout(i),o()},cancel:function(){i&&clearTimeout(i)}});return T.t.of({onDismiss:function(){a.cancel()},onRequestIgnoredBackendOnly:function(){l.n_({category:"ghostwriter",message:"called completeCode for free user but did not show the ghost text.",level:"info"}),(0,eE.j)(eE.U3.CODE_SUGGESTION_USED,{type:"suggestionNotPresented",engine:t,filePath:n,reason:"ghostTextNotEnabledForFreeUser"})},onRequestFirstEmit:function(e){var r=e.plugin(eu);r&&(l.n_({category:"ghostwriter",message:"Suggestion presented",level:"debug"}),a.queue({engine:t,filePath:n,prefixLength:r.lastPrefixLength}))},onRequestEndedWithNoSuggestion:function(){l.n_({category:"ghostwriter",message:"Exited completeCode iteration with no suggestion.",level:"info"}),(0,eE.j)(eE.U3.CODE_SUGGESTION_USED,{type:"suggestionNotPresented",engine:t,filePath:n,reason:"noSuggestion"})},onSuggestionAccepted:function(e,i){var o=e.plugin(eu);o&&(a.flush(),(0,eE.j)(eE.U3.CODE_SUGGESTION_USED,{type:"suggestionAccepted",engine:t,filePath:n,prefixLength:o.lastPrefixLength,suggestionLength:i.suggestion.content.length}),l.n_({category:"ghostwriter",message:"Suggestion accepted",level:"info"}),null==r||r.recordAccept())},onSuggestionExplicitlyDismissed:function(e){var i=e.plugin(eu);i&&(a.flush(),(0,eE.j)(eE.U3.CODE_SUGGESTION_USED,{type:"suggestionDismissed",engine:t,filePath:n,prefixLength:i.lastPrefixLength}),l.n_({category:"ghostwriter",message:"Suggestion explicitly dismissed",level:"info"}),null==r||r.recordReject())}})});function e9(e){var t,n,r,i,l,c,s,u,d,f,h,p,m,v=e.filePath,g=(0,eH.Z)().fs,y=(0,eB.Z)(),b=(0,eD.Gn)("codeSuggestion").preferences,w=(0,ex.ZP)(),Z=b.codeSuggestion&&w!==ex.Yy.None;(0,eg.useEffect)(function(){e_.YX.toggle(Z)},[Z]);var x=(0,eN.Z)(),C=x.engine,k=x.settings,T=(0,eA.gf)(eT.CN.acceptPrimaryCompletion.id),R=(0,eA.gf)(eT.CN.cancelCompletion.id),D=null!==(m=null==k?void 0:k.infill)&&void 0!==m&&m,I=(0,eG.Z)(function(){return new eL},[v,y,C]),A=(n=(t={engine:C,replId:y,provider:(0,eG.Z)(function(){var e;return e=(0,o._)(function(e,t){var n,r,i,o,l,c,s,u,d;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return n=eb.t.production,[4,(0,ew.I8)(e.replId,"completions-1")];case 1:return r=a.sent(),i={model:"replit-code-v1-5",context:e.header?e.header+e.prefix:e.prefix,max_tokens:e.maxTokens,stop_words:e.stop},[4,fetch("".concat(n,"/completions"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},signal:t,body:JSON.stringify(i)})];case 2:if(l=(o=a.sent()).body,!(200!==(c=o.status)))return[3,4];return s=Error.bind,d=(u="Error (".concat(c,") response from /ai/complete: ")).concat,[4,o.text()];case 3:throw new(s.apply(Error,[void 0,d.apply(u,[a.sent()])]));case 4:if(!l)throw Error("No body in response");return[2,function(){return function(e){return eZ.apply(this,arguments)}(l)}]}})}),function(t,n){return e.apply(this,arguments)}},[]),cache:I,hooks:ek}).engine,r=t.replId,i=t.provider,l=t.cache,c=t.hooks,(0,eg.useCallback)((s=(0,ev._)(function(e){var t,o,s,u,d,f,h,p,m,v,g,y,b,w,Z,x,C,_,S,k,E,T,R,D,I;return(0,a.Jh)(this,function(A){switch(A.label){case 0:if(t=e.prefix,o=e.suffix,s=e.header,u=e.language,d=e.maxTokens,f=e.signal,!t)return[2];if(h={prefix:t,suffix:o,header:s,engine:n,maxTokens:d,replId:r,stop:["\n\n","```"]},"markdown"===u&&(h.maxTokens=75,h.stop=[]),p=null==c?void 0:c.beforeCompletion(h),!(null!==(v=l.retrieve(t,d))))return[3,1];return m=(0,ev._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:return[4,v];case 1:return e.sent(),[2]}})}),[3,4];case 1:return A.trys.push([1,3,,4]),[4,(0,em._)(i(h,f))];case 2:return m=A.sent(),[3,4];case 3:if((null==(g=A.sent())?void 0:g.name)==="AbortError")return[2];return null==c||c.erroredCompletion(g instanceof Error?g:Error("Unknown error"),p),[2];case 4:y="",b="",w=!0,Z=!1,f.addEventListener("abort",function(){p&&(null==c||c.afterCompletion("aborted",h,{},p)),Z=!0}),x=!1,C=!1,A.label=5;case 5:A.trys.push([5,13,14,19]),S=(0,G._)(m()),A.label=6;case 6:return[4,(0,em._)(S.next())];case 7:if(!(x=!(k=A.sent()).done))return[3,12];E=k.value,b+=E,T=void 0,A.label=8;case 8:var P;if(!(-1!==(T=b.indexOf("\n"))))return[3,11];if(R=JSON.parse(b.substring(0,T)).text,b=b.substring(T+1),P=u,D=({replacementSuggestion:R.split("\n").filter(function(e){return!(e.startsWith(B(P,"Language: "))||e.startsWith(B(P,"Path: ")))}).join("\n")}).replacementSuggestion,y+=D,Z)return[3,10];return[4,D];case 9:A.sent(),A.label=10;case 10:return!Z&&w&&p&&(null==c||c.afterCompletion("success",h,{fromCache:!!v,partialSuggestion:D},p)),w=!1,en(y).haltAfter&&(Z=!0),[3,8];case 11:return x=!1,[3,6];case 12:return[3,19];case 13:return I=A.sent(),C=!0,_=I,[3,19];case 14:if(A.trys.push([14,,17,18]),!(x&&null!=S.return))return[3,16];return[4,S.return()];case 15:A.sent(),A.label=16;case 16:return[3,18];case 17:if(C)throw _;return[7];case 18:return[7];case 19:if(null===v&&y.trim().length&&l.add(t,y,d),!(!Z&&b))return[3,21];return[4,b];case 20:A.sent(),A.label=21;case 21:return p&&(null==c||c.afterCompletion("finished",h,{completeSuggestion:y,fromCache:!!v},p)),[2]}})}),function(e){return s.apply(this,arguments)}),[n,r,l,c,i])),P=(d=(u=(0,eO._)((0,eX.KO)(eW),2))[0],f=u[1],h=(0,eI.P5)({controlName:"flag-killswitch-pichu",logFlagToAnalytics:!1}),(0,eg.useEffect)(function(){if(h&&d.tooltipOpen){var e=setTimeout(function(){return f(function(e){return(0,S._)((0,_._)({},e),{tooltipOpen:!1})})},2500);return function(){return clearTimeout(e)}}},[h,d.tooltipOpen,f]),(0,eg.useMemo)(function(){return h?{recordAccept:function(){f(function(e){return(0,S._)((0,_._)({},e),{consecutiveRejections:0})})},recordReject:function(){f(function(e){var t=e.consecutiveRejections+1;if(t>=5){var n=eU.Z.get(eF,"number");if(!n||Date.now()-n>=432e6)return eU.Z.set(eF,Date.now()),(0,S._)((0,_._)({},e),{consecutiveRejections:t,tooltipOpen:!0})}return(0,S._)((0,_._)({},e),{consecutiveRejections:t})})}}:null},[h,f])),L=(0,eg.useCallback)((p=(0,o._)(function(e){var t;return(0,a.Jh)(this,function(n){switch(n.label){case 0:return[4,g.readFile(e)];case 1:if(null!==(t=n.sent()).error)return[2,null];return[2,t.content.toString()]}})}),function(e){return p.apply(this,arguments)}),[g]),N=(0,eV._3)(),O=(0,eI.P5)({controlName:"flag-gw-magikarp-bounce-time",logFlagToAnalytics:!1,default:E.yr,type:"number"}),U=(0,eI.P5)({controlName:"flag-completely-different-clipboard",logFlagToAnalytics:!0}),M=(0,eI.P5)({controlName:"flag-completely-different-regulator"}),X=[e5.use(Z,w,T,R,D,A,O,U,M),e7.use(Z,C,v,P),eQ.use(L,N)];return(0,eg.useMemo)(function(){return X},X)}},27318:function(e,t,n){n.d(t,{$_:function(){return L},Bk:function(){return _},II:function(){return I},If:function(){return D},U1:function(){return P},Xs:function(){return G},fL:function(){return R},k4:function(){return A}});var r=n(66626),i=n(63257),o=n(4216),a=n(86257),l=n(55927),c=n(80012),s=n(19068),u=n(82230),d=n(64432),f=n(94778),h=n(49224),p=n(82314),m=n(29318),v=n(36397),g=n(61114),y=n(72093),b=n(7198),w=n(50959),Z=n(99236),x=n(87128),C=n(75235),_=350,S=[y.l0.p(4),y.l0.center,y.l0.borderRadius(4)],k=(0,h.X)({root:(0,i._)(S).concat([y.l0.cursor.pointer,(0,c.ec)("blurple")]),disabled:(0,i._)(S).concat([(0,c.ec)("grey")])});function E(e){return e.disabled||e.connecting?(0,o.tZ)(f.G,{css:k.disabled,tag:"button","data-cy":"ghostwriter-inline-submit",children:e.connecting?(0,o.tZ)(m.Z,{size:12}):(0,o.tZ)(v.Z,{size:12})}):(0,o.tZ)(f.G,{"data-cy":"ghostwriter-inline-submit",css:k.root,tag:"button",onClick:e.onClick,children:e.loading?(0,o.tZ)(g.Z,{size:12}):(0,o.tZ)(v.Z,{size:12})})}var T=(0,h.X)({root:[y.l0.py(8),y.l0.pr(8),y.l0.maxWidth(800),y.l0.colWithGap(4),{fontFamily:y.TV.fontFamilyDefault}],container:[y.l0.position.relative,y.l0.backgroundColor.backgroundDefault],input:[s.gU.outlined,y.l0.borderRadius(4),{paddingBottom:36,"@media (hover: hover)":{":not([disabled]):hover":{backgroundColor:"transparent"}}}],textarea:[y.l0.p(8),y.l0.pb(0),{caretColor:"initial",fontFamily:y.TV.fontFamilyDefault,border:"0 none",resize:"none",height:"1em",backgroundColor:"transparent","@media (hover: hover)":{":not([disabled]):focus":{outline:"0 none"}},"::placeholder":{color:y.TV.foregroundDimmest}}],footer:[y.l0.px(8),y.l0.pr(6),y.l0.rowWithGap(8),y.l0.align.center,y.l0.position.absolute,y.l0.bottom(0),y.l0.left(0),y.l0.width("100%"),{height:36}],footerLeft:[y.l0.rowWithGap(8),y.l0.flex.growAndShrink(1),y.l0.align.center],modelLabel:[y.l0.rowWithGap(4),y.l0.align.center,y.l0.pt(1)],iconText:[y.l0.rowWithGap(4),y.l0.align.center],footerRight:[y.l0.rowWithGap(4),y.l0.align.center,{"& button":[y.l0.height(22),y.l0.py(6),y.l0.py(4),y.l0.borderRadius(4)]}],error:[y.l0.color.accentNegativeStronger]}),R=function(e){var t=e.requestMeasure,n=e.type,r=e.children,i=e.isCodeMirrorPocket,a=(0,l.Z)(t);return(0,o.tZ)(b.Z,{bsod:!0,tags:{ai:!0},extras:{type:n},origin:"ErrorBoundary: InlineAiWidget",children:(0,o.tZ)(f.G,{css:T.root,innerRef:a,className:void 0===i||i?"cm-pocket-widget":void 0,children:r})})},D=function(e){var t=e.requestMeasure,n=e.type,r=e.children,i=e.isCodeMirrorPocket,a=e.error,l=e.clearError,c=e.innerRef;return(0,o.BX)(R,{type:n,requestMeasure:t,isCodeMirrorPocket:void 0===i||i,children:[(0,o.tZ)(f.G,{css:T.container,innerRef:c,children:r}),a?(0,o.tZ)(Z.E,{icon:(0,o.tZ)(x.Z,{color:y.TV.accentNegativeDefault}),text:a,closable:!0,closeAction:l}):null]})};function I(e){var t=(0,a.Z)();return(0,o.tZ)(f.G,{css:T.input,children:(0,o.tZ)("textarea",{value:e.value,onChange:e.onChange,placeholder:e.placeholder,css:T.textarea,ref:function(n){e.inputRef.current=n,t.ref(n)},onKeyDown:e.onKeyDown,autoFocus:e.autoFocus,"data-cy":"ghostwriter-inline-input"})})}var B={generateCode:"Generate new code based on this file.",transformCode:"Modify selected code based on the context of this file."};function G(e){var t=e.type;return(0,o.tZ)(d.u,{tooltip:B[t],children:(0,o.BX)(f.G,{css:T.modelLabel,children:[(0,o.tZ)(p.Z,{size:12,color:y.TV.foregroundDimmest}),(0,o.tZ)(u.xv,{variant:"small",color:"dimmest",children:"transformCode"===t?"Modify with AI":"Generate with AI"})]})})}function A(e){var t=e.loading,n=e.disabled,r=e.promptPresentation,i=e.onClick,a=e.connecting,l=e.escPressed;return(0,o.BX)(o.HY,{children:[t?(0,o.BX)(f.G,{css:T.iconText,children:[(0,o.tZ)(m.Z,{size:12,color:y.TV.blurpleDefault}),r?(0,o.tZ)(u.xv,{variant:"small",color:"dimmest",children:"AI is writing"}):null]}):(0,o.tZ)(o.HY,{children:r?(0,o.tZ)(u.xv,{variant:"small",color:"dimmest",children:l?"Press Esc again to dismiss":"Esc to close, Enter to submit"}):null}),(0,o.tZ)(E,{connecting:a,loading:t,disabled:n,onClick:i})]})}function P(e){var t=e.id,n=e.inputRef,i=e.onClose,o=e.loading,a=e.onSubmit,l=(0,r._)((0,w.useState)(""),2),c=l[0],s=l[1],u=(0,r._)((0,w.useState)(!1),2),d=u[0],f=u[1];return(0,w.useEffect)(function(){var e="inline-ai/input-state/".concat(t),r=C.Z.get(e,"string");r&&s(r);var i=n.current;return function(){if(i){var t=i.value;if(0===t.length){C.Z.remove(e);return}C.Z.set(e,t)}}},[t,n]),{value:c,setValue:s,onKeyDown:function(e){switch(e.key){case"Escape":e.preventDefault(),c.length?d?i():f(!0):i();break;case"Enter":if(e.preventDefault(),o)break;e.shiftKey?s(function(e){return e+"\n"}):!e.metaKey&&c.length&&c.trim()&&a();break;default:f(!1)}},escPressed:d}}var L=function(e){var t=(0,r._)(e.children,2),n=t[0],i=t[1];return(0,o.BX)(f.G,{css:T.footer,children:[(0,o.tZ)(f.G,{css:T.footerLeft,children:n}),(0,o.tZ)(f.G,{css:T.footerRight,children:i})]})}},44322:function(e,t,n){n.d(t,{W:function(){return tx}});var r,i,o,a=n(80403),l=n(3030),c=n(56683),s=n(12285),u=n(4384),d=n(4955),f=n(9670),h=n(33083),p=n(99415),m=n(18857),v=n(75869),g=a.r$.define({combine:function(e){var t;return null!==(t=e.filter(Boolean)[0])&&void 0!==t?t:null}}),y=a.QQ.define({create:function(){return{diff:null,tree:p.mp.empty}},update:function(e,t){var n,r,i=t.state.facet(g),o=null===(n=t.state.facet(h.dK))||void 0===n?void 0:n.parser;if(!i)return null===e.diff&&e.tree===p.mp.empty?e:{diff:null,tree:p.mp.empty};var a=e.diff,l=e.tree;return(a&&a.b.eq(i)?t.docChanged&&(a=a.updateA(t.newDoc,t.changes)):(a=m.z.create(t.newDoc,i),l=p.mp.empty),(null===(r=t.startState.facet(h.dK))||void 0===r?void 0:r.parser)!==o&&(l=p.mp.empty),o&&l.length!==a.b.length)?(l=(0,v.p)({parser:o,text:a.b,maxTime:16,base:l}),{diff:a,tree:l}):e.diff===a&&e.tree===l?e:{diff:a,tree:l}}}),b=n(42516),w=n(72093),Z="cm-transform-diff-line-deletion-base",x="cm-transform-diff-line-deletion",C="cm-transform-diff-text-deletion",_="cm-transform-diff-line-insertion-base",S="cm-transform-diff-line-insertion",k="cm-transform-diff-text-insertion",E="cm-transform-diff-number-marker",T="rgba(180, 0, 0, 0.1)",R="rgba(180, 0, 0, 0.125)",D="rgba(0, 180, 0, 0.1)",I="rgba(0, 180, 0, 0.125)";function B(e,t){var n="linear-gradient(to right, ".concat(e,", ").concat(e,")");return t&&(n+=", linear-gradient(to right, ".concat(t,", ").concat(t,")")),n}var G=l.tk.theme((i={},(0,b._)(i,".".concat(_,", .").concat(S),{cursor:"text","&.cm-line ::selection":{backgroundColor:"".concat(w.TV.accentPrimaryDimmest," !important")}}),(0,b._)(i,".".concat(Z),{background:B(T),backgroundClip:"content-box"}),(0,b._)(i,".".concat(x),{background:B(T,R),backgroundClip:"content-box"}),(0,b._)(i,".".concat(_),{background:B(D),backgroundClip:"content-box"}),(0,b._)(i,".".concat(S),{background:B(D,I),backgroundClip:"content-box"}),(0,b._)(i,".".concat(k),{display:"inline-block",background:I}),(0,b._)(i,".".concat(C),{display:"inline-block",background:R}),(0,b._)(i,".".concat(E),{opacity:.5}),i)),A=n(51743),P=n(90051),L=n(3341),N=n.n(L),O=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e,r,i){var o;return(0,s._)(this,n),(o=t.call(this)).line=e,o.index=r,o.changed=i,o}var r=n.prototype;return r.toDOM=function(){var e=this,t=document.createElement("div");if(t.className=this.changed?"cm-line ".concat(_):"cm-line ".concat(S),!this.changed||!this.changed.length){var n=!0,r=!1,i=void 0;try{for(var o,a=this.line[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=l.text,s=l.tags,u=document.createElement("span");u.textContent=c||"\xa0",u.className=null!=s?s:"",t.appendChild(u)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}for(var d=0,f=0,h=null,p=null,m=function(t,n){if(!h)throw Error("range is null");var r=e.line[f],i=r.text,o=r.tags,a=i.slice(d-h.from,n-h.from),l=document.createElement("span");l.textContent=a||"\xa0",l.className=null!=o?o:"",t.appendChild(l),d+=a.length};f<this.line.length;){if(!h){var v=this.line[f].text;h={from:d,to:d+v.length}}if(!p){var g=!0,y=!1,b=void 0;try{for(var w,Z=this.changed[Symbol.iterator]();!(g=(w=Z.next()).done);g=!0){var x=w.value;if(!(x.from>=h.to)&&!(x.to<=d)){var C=document.createElement("span");C.className=k,p={from:x.from,to:x.to,dom:C},d<p.from&&m(t,p.from),t.appendChild(C);break}}}catch(e){y=!0,b=e}finally{try{g||null==Z.return||Z.return()}finally{if(y)throw b}}}p?(d<p.to&&m(p.dom,p.to),d>=p.to&&(p=null)):m(t,h.to),d>=h.to&&(h=null,f++)}return t},r.eq=function(e){var t,r;return e instanceof n&&this.index===e.index&&this.line.length===e.line.length&&(null===(t=this.changed)||void 0===t?void 0:t.length)===(null===(r=e.changed)||void 0===r?void 0:r.length)&&N()(this.line,e.line)&&N()(this.changed,e.changed)},r.ignoreEvent=function(e){return e.stopImmediatePropagation(),!0},(0,u._)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(l.l9),U=l.p.line({class:Z}),M=l.p.line({class:x}),X=l.p.mark({class:C}),F=l.tk.decorations.compute([y],function(e){var t=function(e,t){if(r.getLineChangeType(e.number,A.MF.A)===A.dQ.COVERED)o.push(M.range(e.from));else{o.push(U.range(e.from));var n=!0,i=!1,a=void 0;try{for(var l,c=(0,A.Po)(e,t,A.MF.A,!1)[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var s=l.value;o.push(X.range(s.from,s.to))}}catch(e){i=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}}},n=e.field(y,!1);if(!n||!n.diff)return l.p.none;var r=n.diff,i=n.tree,o=[],a=!0,c=!1,s=void 0;try{for(var u,d=r.chunks[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var f=u.value;if(f.fromA!==f.endA)for(var h=r.a.lineAt(f.fromA),p=r.a.lineAt(f.endA),m=h.number;m<=p.number;m++)t(r.a.line(m),f);else f.fromB===f.endB&&t(r.a.lineAt(f.fromA),f);if(f.fromB!==f.toB)for(var v=r.b.lineAt(f.fromB),g=(0,P.CT)(i,r.b,e,f.fromB,f.endB),b=0;b<g.length;b++){var w=g[b],Z=r.b.line(v.number+b),x=r.getLineChangeType(Z.number,A.MF.B)===A.dQ.COVERED?null:(0,A.Po)(Z,f,A.MF.B,!0),C=l.p.widget({widget:new O(w,Z.number,x),block:!0,side:b+1}),_=Math.min(f.endA,r.a.length);o.push(C.range(_))}}}catch(e){c=!0,s=e}finally{try{a||null==d.return||d.return()}finally{if(c)throw s}}return l.p.set(o,!0)}),W=n(67346),H=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e){var r;return(0,s._)(this,n),(r=t.call(this)).index=e,r}var r=n.prototype;return r.toDOM=function(){var e=document.createElement("span");return e.className=E,e.textContent=String(this.index),e},r.eq=function(e){return this.index===e.index},n}(l.SJ),V=W.X4.of(function(e,t){if(t instanceof O)return new H(t.index)}),z=a.r$.define({enables:function(e){return[g.computeN([e],function(t){return t.facet(e)}),y,G,F,V]}}),j=n(49532),q=n(5283);(r=o||(o={}))[r.Compare=0]="Compare",r[r.Original=1]="Original",r[r.Suggestion=2]="Suggestion";var J=a.Py.define(),Y=a.QQ.define({create:function(){return o.Suggestion},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,l=t.effects[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value;if(c.is(J))e=c.value;else if(c.is(q.Q))e=null;else if(c.is(q.h)){var s=t.state.field(j.$);if((null==s?void 0:s.type)==="transformCode"&&c.value){var u=t.startState.field(j.u),d=c.value;!u&&d&&(e=o.Suggestion)}}}}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return e}}),$=n(15323),K=n(73393),Q=a.QQ.define({create:function(){return null},update:function(e,t){if(!(0,K.aU)(t,"doc",j.$,$.Yp,Y,j.u))return e;var n,r=t.state.field(j.$),i=t.state.facet($.Yp),a=t.state.field(Y);if(!r||!i||r.codeReference.filePath!==i||a!==o.Suggestion)return null;var l=r.codeReference.range.indexFrom,c=r.codeReference.range.indexTo,s=t.state.doc.slice(l,c),u=null!==(n=t.state.field(j.u))&&void 0!==n?n:"",d=s.lines,f=u.split(t.state.lineBreak).length-d;return e&&e.after===l&&e.offset===f?e:{after:l,offset:f}}}),ee=W.gy.of(function(e,t){var n=e.state.doc.lineAt(t.from),r=e.state.field(Q);if(r&&!(n.from<=r.after))return new W.un(n.number+r.offset)}),et=W.X4.of(function(e,t){if(t instanceof en)return new W.un(t.index)}),en=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e,r,i){var o;return(0,s._)(this,n),(o=t.call(this)).line=e,o.block=r,o.index=i,o}var r=n.prototype;return r.toDOM=function(){var e=document.createElement(this.block?"div":"span");e.className=this.block?"cm-line":"";var t=!0,n=!1,r=void 0;try{for(var i,o=this.line[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=a.text,c=a.tags,s=document.createElement("span");s.textContent=l||"\xa0",c&&(s.className=c),e.appendChild(s)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e},r.eq=function(e){return this.index===e.index&&(0,P.gj)(this.line,e.line)},r.ignoreEvent=function(){return!1},(0,u._)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(l.l9),er=[Q,ee,et,l.tk.decorations.compute([h.dK,j.$,j.u,Y,y,$.Yp,a.yy.lineSeparator],function(e){var t=e.field(j.$),n=e.facet($.Yp),r=e.field(Y);if(!t||"transformCode"!==t.type||!n||t.codeReference.filePath!==n||r!==o.Suggestion)return l.p.none;var i=t.codeReference.range.indexFrom,a=t.codeReference.range.indexTo,c=e.doc.lineAt(i),s=e.doc.lineAt(a),u=e.toText(null!==(x=e.field(j.u))&&void 0!==x?x:""),d=e.changes({from:i,to:a,insert:u}),f=d.apply(e.doc),p=i+u.length,m=null===(Z=e.facet(h.dK))||void 0===Z?void 0:Z.parser,g=null;if(m)g=(0,v.p)({parser:m,text:f,changes:d,base:e,upTo:p}),C=(0,P.CT)(g,f,e,i,p);else{C=[];var y=!0,b=!1,w=void 0;try{for(var Z,x,C,_,S=u.iterLines()[Symbol.iterator]();!(y=(_=S.next()).done);y=!0){var k=_.value;C.push([{text:k}])}}catch(e){b=!0,w=e}finally{try{y||null==S.return||S.return()}finally{if(b)throw w}}}var E=[];C.length>1&&i!==a&&0!==s.length&&a===s.to&&a<e.doc.length?E.push(l.p.replace({inclusive:!1,block:!0}).range(i,a)):E.push(l.p.replace({inclusiveStart:!1,block:!0}).range(i,a));for(var T=0;T<C.length;T++){var R=C[T],D=c.number+T,I=l.p.widget({widget:new en(R,T>0,D),inlineOrder:!0,side:T+1,block:T>0});E.push(I.range(i))}return l.p.set(E,!0)})],ei=n(4216),eo=n(80332),ea=n(52178),el=n(12674),ec=n(60941),es=n(38753),eu=n(60305),ed=n(94778),ef=n(49224),eh=n(73590),ep=n(35068),em=n(37058),ev=n(81202),eg=n.n(ev),ey=n(25150),eb=(0,ef.X)({container:[{marginRight:16},w.l0.height("100%")],hintButton:[w.l0.height("100%")]}),ew=new el.J(function(e){var t=e.onGenerateCode,n=e.height,r=(0,es.T3)(),i=(0,em.gf)(eh.x.id);return(0,ei.tZ)(ed.G,{css:eb.container,children:(0,ei.tZ)(ep.s,{keyCombo:r?void 0:i,text:"Generate",fontSize:Math.round(.6*n),css:eb.hintButton,onClick:function(){(0,eu.j)(ey.U3.GHOSTWRITER_CHAT_INLINE_HINT_CLICKED,{action:"generate"}),t()}})})}),eZ=l.tk.theme({".cm-ghostwriter-hint-layer":{width:"100%"}}),ex=function(e){var t=e.selection.main.head;return e.doc.lineAt(t)},eC=new ec.j(function(e){return a.QQ.define({create:function(e){return ex(e)},compare:eg(),update:function(e,t){return ex(t.state)},provide:function(t){return[eZ,a.Wl.high((0,l.EY)({above:!0,class:"cm-ghostwriter-hint-layer",update:function(e){return(0,K.aU)(e,t,j.$,eo.WF)},markers:function(n){var r=n.state.field(t,!1);if(!r||!n.state.selection.main.empty)return[];var i=n.state.field(j.$,!1),o=0===n.state.doc.length,a=(0,ea.o)(n.state);if(r.length>0||i||a||o)return[];var l=n.dom.querySelector(".cm-minimap-gutter"),c=(null==l?void 0:l.clientWidth)||0,s=r.to,u=n.lineBlockAt(s),d=u.top,f=u.height;return[new e_({top:d+n.documentPadding.top,height:f,right:c,pocketOpen:null!==i,activeEditor:n.hasFocus,onGenerateCode:e})]}}))]}})}),e_=function(){"use strict";function e(t){(0,s._)(this,e),this.options=t}var t=e.prototype;return t.position=function(e){e.style.top=this.options.top+"px",e.style.height=this.options.height+"px",e.style.right=this.options.right+"px",e.style.paddingRight=Math.round(.2*this.options.height)+"px"},t.draw=function(){var e=ew.create({onGenerateCode:this.options.onGenerateCode,height:this.options.height});return e.className="cm-ghostwriter-hint-marker",this.options.activeEditor||(e.style.visibility="hidden"),this.position(e),e},t.eq=function(e){return this.options.top===e.options.top&&this.options.pocketOpen===e.options.pocketOpen&&this.options.activeEditor===e.options.activeEditor},e}(),eS=n(50959),ek=n(24605),eE=n(85763),eT=n(64318),eR=n(38101),eD=n(27318),eI=n(52130),eB=n(28360),eG=n(34328);function eA(e,t){e.dispatch({effects:q.Q.of(null),selection:{anchor:t.range.indexTo,head:t.range.indexTo}}),e.hasFocus||e.focus()}function eP(e,t){(0,eB.el)({view:e,insert:t,scrollIntoView:!0}),e.dispatch({effects:q.Q.of(null)}),e.hasFocus||e.focus()}function eL(e,t){e.dispatch({effects:q.h.of(t)})}function eN(e,t,n){e.dispatch({changes:{from:n.range.indexFrom,to:n.range.indexTo,insert:t},scrollIntoView:!0,effects:q.Q.of(null),annotations:[eG.Z.of(!0),eI.Iv.of("full")]}),e.hasFocus||e.focus()}function eO(e,t){return e.range.indexFrom===t.range.indexFrom&&e.range.indexTo===t.range.indexTo&&e.filePath===t.filePath&&e.fileVersion===t.fileVersion&&e.referenceType===t.referenceType}var eU=(0,ef.X)({root:[w.l0.rowWithGap(8),w.l0.border({color:w.TV.outlineDimmest}),w.l0.p(8),w.l0.borderRadius(4)],text:[w.l0.flex.growAndShrink(1)]}),eM=new el.J(function(e){var t=e.onClose,n=e.requestMeasure;return(0,ei.tZ)(eD.fL,{requestMeasure:n,type:"ghostwriterKillswitch",children:(0,ei.BX)(ed.G,{css:eU.root,children:[(0,ei.tZ)(ed.G,{css:eU.text,children:(0,ei.tZ)(eR.r,{textVariant:"text"})}),(0,ei.tZ)(eE.hU,{alt:"Close",onClick:t,type:"button",children:(0,ei.tZ)(eT.Z,{})})]})})}),eX=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e){var r,i=e.codeReference;return(0,s._)(this,n),(r=t.call(this)).codeReference=i,r}return n.prototype.toDOM=function(e){var t=this;return eM.create({onClose:function(){return eA(e,t.codeReference)},requestMeasure:function(){return e.requestMeasure()}})},n}(l.l9),eF=n(66626),eW=n(95563),eH=n(15235),eV=n(40509),ez=n(41974),ej=n(26949),eq=n(93100),eJ=n(14542),eY=n(17198),e$=n(89421),eK=n(40635),eQ=n(22750),e0=n(55927),e1=(0,eK.cn)(0),e2=(0,eK.cn)(function(e){return e(e1)<=eD.Bk?"compact":"normal"}),e4=new el.J(function(e){var t=e.id,n=e.requestMeasure,r=e.codeReference,i=e.updateCodeBlock,o=e.acceptSuggestion,a=e.onClose,l=e.autoFocus,c=e.source,s=function(){var e=S();(null==e?void 0:e.code)?(o(e.code),(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"suggestion_accepted",intent_type:"generate",message_content:e.code,source:c})):D()},u=function(){var e,t;B.current=A,(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",message_content:A,source:c}),C({message:A,type:eW.G_.GENERATE_CODE,codeReference:{code:r.code,range:r.range,filePath:r.filePath,fileContent:null!==(e=r.fileContent)&&void 0!==e?e:"",fileVersion:r.fileVersion,language:null!==(t=r.language)&&void 0!==t?t:"",referenceType:eW.MD.INLINE}})},d=(0,eW.xe)(),f=(0,eF._)((0,eW.s)(),2),h=f[0],p=f[1],m=(0,eW.ZR)().hasAccessToAdvancedModel,v=(0,eF._)((0,eS.useState)(!1),2),g=v[0],y=v[1],b=(0,eY.Gn)("chatEngine").preferences,w=(0,eS.useRef)(null),Z=(0,ej.G)(),x=(0,eW.XW)({onCode:i,getFileContext:Z}),C=x.sendMessage,_=x.stopMessage,S=x.getCode,k=x.loading,E=x.completed,T=x.error,R=x.clearError,D=(0,eS.useCallback)(function(){_(),a()},[_,a]),I=(0,eS.useCallback)(function(){(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"generate",source:c}),D()},[D,c]),B=(0,eS.useRef)(null),G=(0,eD.U1)({id:t,inputRef:w,loading:k,onSubmit:function(){M?s():u()},onClose:I}),A=G.value,P=G.setValue,L=G.onKeyDown,N=G.escPressed,O=function(){(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"generate",message_content:A,source:c}),_()},U=(0,eW.Un)(),M=U&&E&&B.current===A,X=(0,eF._)((0,eS.useState)(function(){return(0,eK.MT)()}),1)[0],F=(0,eQ.b9)(e1,{store:X}),W=(0,eQ.Dv)(e2,{store:X}),H=(0,e0.Z)(function(e){return F(e.width)});return(0,ei.BX)(ei.HY,{children:[(0,ei.BX)(eD.If,{requestMeasure:n,type:"generateCode",error:T,clearError:R,innerRef:H,children:[(0,ei.tZ)(eD.II,{value:A,inputRef:w,onChange:function(e){return P(e.currentTarget.value)},placeholder:"Enter a prompt to generate new code",onKeyDown:L,autoFocus:l}),(0,ei.BX)(eD.$_,{children:[(0,ei.BX)(ei.HY,{children:[(0,ei.tZ)(eD.Xs,{type:"generateCode"}),E?(0,ei.tZ)(eE.hU,{disabled:!U,alt:"Rerun the same prompt",onClick:function(){return u()},size:12,colorway:"grey",children:(0,ei.tZ)(eV.Z,{})}):null,d?(0,ei.tZ)(eJ.q2,{userLimits:d,selectedItem:h,hasAccessToAdvancedModel:m,onChange:function(e){if(!m&&"advanced"===e){y(!0);return}p(e)},advancedChatEngineOverride:b.chatEngine}):null]}),M?(0,ei.BX)(ei.HY,{children:[(0,ei.tZ)(eH.zx,{variant:"outlined",size:"small",text:"Reject",onClick:function(){var e=S();(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"suggestion_rejected",intent_type:"generate",message_content:(null==e?void 0:e.code)?e.code:"",source:c}),I()}}),(0,ei.tZ)(eH.zx,{size:"small",text:"Accept",colorway:"blurple",onClick:s,dataCy:"ghostwriter-inline-accept-suggestion"})]}):(0,ei.tZ)(eD.k4,{escPressed:N,connecting:!U,loading:k,disabled:!A||!A.trim(),promptPresentation:"normal"===W,onClick:function(){k?O():u()}})]})]}),(0,ei.tZ)(e$.Z,{isOpen:g,onClose:function(){return y(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"}}})]})}),e3=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e){var r,i=e.id,o=e.codeReference,a=e.source;return(0,s._)(this,n),(r=t.call(this)).id=i,r.codeReference=o,r.source=a,r}var r=n.prototype;return r.toDOM=function(e){var t=this.id,n=this.codeReference,r=this.source,i=e4.create({id:t,requestMeasure:function(){return e.requestMeasure()},codeReference:n,onClose:function(){return eA(e,n)},acceptSuggestion:function(t){return eP(e,t)},updateCodeBlock:function(t){return eL(e,t)},autoFocus:!0,source:r});return i.style.position="sticky",i.style.top="0px",i.style.zIndex=String(eq.M.floatingHeaderActive),i},r.updateDOM=function(e,t){var n=this.codeReference;return e4.update(e,function(e){return(0,ez.Uy)(e,function(e){e.requestMeasure=function(){return t.requestMeasure()},e.codeReference=n,e.onClose=function(){return eA(t,n)},e.acceptSuggestion=function(e){return eP(t,e)},e.updateCodeBlock=function(e){return eL(t,e)},e.autoFocus=!1})}),!0},r.eq=function(e){return eO(this.codeReference,e.codeReference)},n}(l.l9),e8=n(85733),e6=n(75235),e5=(0,eK.cn)(0),e7=(0,eK.cn)(function(e){return e(e5)<=eD.Bk?"compact":"normal"}),e9=new el.J(function(e){var t=e.id,n=e.requestMeasure,r=e.codeReference,i=e.updateCodeBlock,a=e.acceptSuggestion,l=e.onClose,c=e.autoFocus,s=e.updateDiffSelection,u=e.source,d=function(){var e=k();(null==e?void 0:e.completed)===void 0&&(null==P?void 0:P.completed)&&(e=P),(null==e?void 0:e.code)?((0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"suggestion_accepted",intent_type:"modify",message_content:e.code,source:u}),a(e.code)):O()},f=function(){var e,t;M.current=H,(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"message_sent",intent_type:"modify",message_content:H,source:u}),_({message:H,type:eW.G_.TRANSFORM_CODE,codeReference:{code:r.code,range:r.range,filePath:r.filePath,fileContent:null!==(e=r.fileContent)&&void 0!==e?e:"",fileVersion:r.fileVersion,language:null!==(t=r.language)&&void 0!==t?t:"",referenceType:eW.MD.INLINE}})},h=(0,eW.xe)(),p=(0,eF._)((0,eW.s)(),2),m=p[0],v=p[1],g=(0,eW.ZR)().hasAccessToAdvancedModel,y=(0,eF._)((0,eS.useState)(!1),2),b=y[0],w=y[1],Z=(0,eY.Gn)("chatEngine").preferences,x=(0,ej.G)(),C=(0,eW.XW)({onCode:i,getFileContext:x}),_=C.sendMessage,S=C.stopMessage,k=C.getCode,E=C.loading,T=C.completed,R=C.error,D=C.clearError,I=(0,eF._)((0,eS.useState)(!1),2),B=I[0],G=I[1],A=(0,eF._)((0,eS.useState)(null),2),P=A[0],L=A[1],N=(0,e8.Z)(s);(0,eS.useEffect)(function(){if(E){N.current(o.Suggestion);return}(T||B)&&N.current(R?o.Original:o.Compare)},[N,T,B,R,E]);var O=(0,eS.useCallback)(function(){S(),l()},[S,l]),U=(0,eS.useCallback)(function(){(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"modify",source:u}),O()},[O,u]),M=(0,eS.useRef)(null),X=function(){(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"modify",message_content:H,source:u}),S()},F=(0,eS.useRef)(null),W=(0,eD.U1)({id:t,inputRef:F,loading:E,onSubmit:function(){J?d():f()},onClose:U}),H=W.value,V=W.setValue,z=W.onKeyDown,j=W.escPressed,q=(0,eW.Un)(),J=q&&!R&&(T||B)&&M.current===H,Y=(0,eF._)((0,eS.useState)(function(){return(0,eK.MT)()}),1)[0],$=(0,eQ.b9)(e5,{store:Y}),K=(0,eQ.Dv)(e7,{store:Y}),Q=(0,e0.Z)(function(e){return $(e.width)});return(0,eS.useEffect)(function(){var e="inline-ai/last-sent-value/".concat(t),n="inline-ai/last-completed/".concat(t),r="inline-ai/last-code-res/".concat(t),i=e6.Z.get(e,"string"),o=e6.Z.get(n,"boolean"),a=e6.Z.get(r,"object");return i&&(M.current=i),G(!!o&&o),a&&L({code:a.code,completed:a.completed,error:a.error}),function(){e6.Z.set(n,T||o);var t=k();if((null==t?void 0:t.completed)!==void 0&&e6.Z.set(r,t),M.current){var i=M.current;if(0===i.length){e6.Z.remove(e);return}e6.Z.set(e,i)}}},[T,k,t]),(0,ei.BX)(ei.HY,{children:[(0,ei.BX)(eD.If,{requestMeasure:n,type:"generateCode",error:R,clearError:D,innerRef:Q,children:[(0,ei.tZ)(eD.II,{value:H,inputRef:F,onChange:function(e){return V(e.currentTarget.value)},placeholder:"Enter a prompt to modify selection",onKeyDown:z,autoFocus:c}),(0,ei.BX)(eD.$_,{children:[(0,ei.BX)(ei.HY,{children:[(0,ei.tZ)(eD.Xs,{type:"transformCode"}),T||B?(0,ei.tZ)(eE.hU,{alt:"Rerun the same prompt",onClick:function(){return f()},size:12,colorway:"grey",disabled:!q,children:(0,ei.tZ)(eV.Z,{})}):null,h?(0,ei.tZ)(eJ.q2,{userLimits:h,selectedItem:m,hasAccessToAdvancedModel:g,onChange:function(e){if(!g&&"advanced"===e){w(!0);return}v(e)},advancedChatEngineOverride:Z.chatEngine}):null]}),J?(0,ei.BX)(ei.HY,{children:[(0,ei.tZ)(eH.zx,{variant:"outlined",size:"small",text:"Reject",onClick:function(){var e=k();(null==e?void 0:e.completed)===void 0&&(null==P?void 0:P.completed)&&(e=P),(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"suggestion_rejected",intent_type:"modify",message_content:(null==e?void 0:e.code)?e.code:"",source:u}),U()}}),(0,ei.tZ)(eH.zx,{size:"small",text:"Accept",colorway:"blurple",onClick:d,dataCy:"ghostwriter-inline-accept-suggestion"})]}):(0,ei.tZ)(eD.k4,{escPressed:j,connecting:!q,loading:E,disabled:!H||!H.trim(),promptPresentation:"normal"===K,onClick:function(){E?X():f()}})]})]}),(0,ei.tZ)(e$.Z,{isOpen:b,onClose:function(){return w(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"}}})]})}),te=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e){var r,i=e.id,o=e.codeReference,a=e.source;return(0,s._)(this,n),(r=t.call(this)).id=i,r.codeReference=o,r.source=a,r}var r=n.prototype;return r.toDOM=function(e){var t=this.id,n=this.codeReference,r=this.source,i=e9.create({id:t,requestMeasure:function(){return e.requestMeasure()},codeReference:n,onClose:function(){return eA(e,n)},acceptSuggestion:function(t){return eN(e,t,n)},updateCodeBlock:function(t){eL(e,t)},updateDiffSelection:function(t){e.dispatch({effects:J.of(t)})},autoFocus:!0,source:r});return i.style.position="sticky",i.style.top="0px",i.style.zIndex="10",i},r.updateDOM=function(e,t){var n=this.codeReference;return e9.update(e,function(e){return(0,ez.Uy)(e,function(e){e.requestMeasure=function(){return t.requestMeasure()},e.codeReference=n,e.onClose=function(){return eA(t,n)},e.acceptSuggestion=function(e){return eN(t,e,n)},e.updateCodeBlock=function(e){return eL(t,e)},e.updateDiffSelection=function(e){t.dispatch({effects:J.of(e)})},e.autoFocus=!1})}),!0},r.eq=function(e){return eO(this.codeReference,e.codeReference)},n}(l.l9),tt=n(5744),tn=n(82230),tr=n(55524),ti=n(29318),to=n(77794),ta=n(78377),tl=n(69249),tc=n(30341),ts=n(25270),tu=a.r$.define({combine:function(e){var t;return null!==(t=e[0])&&void 0!==t?t:function(){}}});new ec.j(function(e){return tu.of(e)});var td=(0,ef.X)({root:[w.l0.colWithGap(8),w.l0.border({color:w.TV.outlineDimmest}),w.l0.p(8),w.l0.borderRadius(4)],header:[w.l0.rowWithGap(8),w.l0.align.center,w.l0.justify.spaceBetween,w.l0.minHeight(28)],headerLeft:[w.l0.flex.growAndShrink(1),w.l0.rowWithGap(8),w.l0.align.center],footer:[w.l0.rowWithGap(8),w.l0.align.center,w.l0.justify.end]}),tf=new el.J(function(e){var t=e.requestMeasure,n=e.codeReference,r=e.onClose,i=e.openAiChatPane,o=e.source,a=(0,ej.G)(),l=(0,eW.gS)({getFileContext:a}),c=l.sessionId,s=l.sendMessage,u=l.stopMessage,d=l.model,f=l.loading,h=l.completed,p=l.message,m=l.retry,v=(0,eW.nV)(),g=(0,eS.useCallback)(function(){var e,t;(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"message_sent",intent_type:"explain",source:o,message_content:n.code}),s({codeReference:{code:n.code,range:n.range,filePath:n.filePath,fileContent:null!==(e=n.fileContent)&&void 0!==e?e:"",fileVersion:n.fileVersion,language:null!==(t=n.language)&&void 0!==t?t:"",referenceType:eW.MD.INLINE}})},[s,n,o]),y=(0,e8.Z)(g),b=(0,e8.Z)(u);(0,eS.useEffect)(function(){y.current();var e=b.current;return function(){e()}},[y,b]);var Z=(0,eW.Un)();return(0,ei.tZ)(eD.fL,{requestMeasure:t,type:"explainCode",children:(0,ei.BX)(ed.G,{css:td.root,dataCy:"ghostwriter-inline-explain-content",children:[p||f?(0,ei.BX)(ed.G,{css:td.header,children:[(0,ei.BX)(ed.G,{css:td.headerLeft,children:[(0,ei.tZ)(tl.R,{advanced:"advanced"===d}),(0,ei.tZ)(ts.Dz,{intent:eW.$h.EXPLAIN,text:{color:"dimmest",variant:"small"},icon:{color:w.TV.foregroundDimmest}})]}),h?(0,ei.tZ)(eE.hU,{alt:"Close",dataCy:"ghostwriter-inline-close",children:(0,ei.tZ)(eT.Z,{onClick:function(){r(),(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"explain",source:o})}})}):(0,ei.tZ)(eH.zx,{iconLeft:(0,ei.tZ)(ta.Z,{}),size:"small",text:"Stop",onClick:function(){u(),(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"explain",source:o,message_content:n.code})}})]}):null,f&&!p?(0,ei.tZ)(ti.Z,{}):null,p?(0,ei.tZ)(tt.J,{text:p,codeComponent:tt._,messageState:h?eW.he.COMPLETE:void 0}):null,h?(0,ei.BX)(ed.G,{css:td.footer,children:[(0,ei.tZ)(tn.xv,{variant:"small",color:"dimmer",children:"Esc to close"}),(0,ei.tZ)(eH.zx,{iconLeft:(0,ei.tZ)(to.Z,{}),variant:"outlined",size:"small",text:"Retry",disabled:!Z,onClick:function(){m(),(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"response_regenerated",intent_type:"explain",source:o,message_content:n.code})}}),c?(0,ei.tZ)(eH.zx,{dataCy:"ghostwriter-inline-reply-in-chat",iconLeft:Z?(0,ei.tZ)(tr.Z,{}):(0,ei.tZ)(ti.Z,{}),disabled:!Z,size:"small",text:"Reply in Chat",colorway:Z?"blurple":void 0,onClick:function(){(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"reply_in_chat",intent_type:"explain",source:o,message_content:n.code}),v(c,{sessionType:eW.FF.CHAT}),i(c)}}):null]}):null]})})}),th=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e){var r,i=e.codeReference,o=e.source;return(0,s._)(this,n),(r=t.call(this)).codeReference=i,r.source=o,r}var r=n.prototype;return r.toDOM=function(e){var t=this.codeReference,n=this.source;return tf.create({requestMeasure:function(){return e.requestMeasure()},codeReference:t,onClose:function(){return eA(e,t)},openAiChatPane:function(t){return(0,tc.ZM)(e.state,{pane:{type:"ghostwriterChat",data:{sessionId:t}}})},source:n})},r.updateDOM=function(e,t){var n=this.codeReference;return tf.update(e,function(e){return(0,ez.Uy)(e,function(e){e.requestMeasure=function(){return t.requestMeasure()},e.codeReference=n,e.onClose=function(){return eA(t,n)}})}),!0},r.eq=function(e){return eO(this.codeReference,e.codeReference)},n}(l.l9),tp=n(9413),tm=ek.TV.blurpleDimmest,tv=ek.TV.accentPrimaryDimmest,tg=l.tk.theme({".cm-pocket-highlight":{backgroundColor:ek.TV.blurpleDimmest,opacity:.2},"@keyframes moveGradient":{"0%":{backgroundPositionX:"100%"},"100%":{backgroundPositionX:"0%"}},".cm-pocket-highlight-loading":{background:"linear-gradient(90deg, ".concat(ek.TV.blurpleDimmest,", ").concat(tv,", ").concat(tm,", ").concat(tv,")"),backgroundSize:"300% 100%",backgroundPositionX:"0%",animation:"moveGradient 2s linear infinite"}}),ty=l.tk.decorations.compute([j.$,Y,$.Yp],function(e){var t=e.field(j.$),n=e.facet($.Yp);if(!t||!n||t.codeReference.filePath!==n)return l.p.none;var r=e.doc.lineAt(t.codeReference.range.indexFrom).from,i={generateCode:e3,transformCode:te,explainCode:th,ghostwriterKillswitch:eX}[t.type],o=l.p.widget({widget:new i({id:t.id,codeReference:t.codeReference,source:t.source}),block:!0,side:0}).range(r);return l.p.set(o)}),tb=(0,l.EY)({above:!1,update:function(e){return(0,K.aU)(e,j.$)},markers:function(e){var t=e.state.field(j.$),n=e.state.facet($.Yp);if(!t||!n||t.codeReference.filePath!==n)return[];var r=t.codeReference.range.indexFrom,i=t.codeReference.range.indexTo,o=e.state.doc.lineAt(i);o.from>=r&&o.to===i&&i<e.state.doc.length&&(i+=1);var c=a.jT.range(r,i),s=t.loading&&t.codeReference.range.indexFrom<t.codeReference.range.indexTo?"cm-pocket-highlight-loading":"cm-pocket-highlight";return l.dc.forRange(e,s,c)}}),tw=z.compute([j.$,j.u,$.Yp,Y],function(e){var t=e.field(j.$),n=e.field(j.u),r=e.facet($.Yp),i=e.field(Y);return t&&n&&r&&t.codeReference.filePath===r&&"transformCode"===t.type&&i===o.Compare?a.as.of({from:t.codeReference.range.indexFrom,to:t.codeReference.range.indexTo,insert:n},e.doc.length).apply(e.doc):null}),tZ=c.V.compute([j.$,j.u,$.Yp],function(e){var t=e.field(j.$),n=e.field(j.u),r=e.facet($.Yp);return t&&n&&r&&t.codeReference.filePath===r&&"generateCode"===t.type?a.as.of({from:t.codeReference.range.indexTo,to:t.codeReference.range.indexTo,insert:n},e.doc.length):null});function tx(e){var t=e.onGenerateCode,n=(0,tp.v)().isTeamWithAiDisabled,r=eC.use(t);return(0,eS.useMemo)(function(){var e=[tg,j.$,j.u,ty,tb,Y,tw,er,tZ,r];return n||e.push(r),e},[r,n])}},5283:function(e,t,n){n.d(t,{Q:function(){return i},h:function(){return o}});var r=n(80403),i=r.Py.define(),o=r.Py.define()},49532:function(e,t,n){n.d(t,{$:function(){return f},u:function(){return h}});var r=n(41733),i=n(30509),o=n(80403),a=n(3030),l=n(5283),c=n(92370),s=n(32472),u=n(60305);function d(e){var t=e.state.field(f);if(t){var n=t.type;return"explainCode"===n?(0,u.j)(u.U3.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"explain",source:t.source}):"generateCode"===n?(0,u.j)(u.U3.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"generate",source:t.source}):"transformCode"===n&&(0,u.j)(u.U3.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"modify",source:t.source}),e.dispatch({effects:l.Q.of(null)}),!0}return!1}var f=o.QQ.define({create:function(){return null},update:function(e,t){if((0,s.j)(t,l.Q,function(t){e=t.value?{id:t.value.id,codeReference:t.value.codeReference,type:t.value.type,source:t.value.source,loading:t.value.loading,data:t.value.data}:null}),!e||t.changes.empty)return e;var n=e.codeReference.range.indexFrom>t.newDoc.length?t.newDoc.length:t.changes.mapPos(e.codeReference.range.indexFrom),o=e.codeReference.range.indexTo>t.newDoc.length?t.newDoc.length:t.changes.mapPos(e.codeReference.range.indexTo);return n>=o?null:e=(0,i._)((0,r._)({},e),{codeReference:(0,i._)((0,r._)({},e.codeReference),{range:{indexFrom:n,indexTo:o,lineFrom:t.newDoc.lineAt(n).number,lineTo:t.newDoc.lineAt(o).number}})})},provide:function(e){return[o.Wl.highest(a.$f.of([{key:"Escape",run:d}])),c.gb.from(e,function(e){var t;return null!==(t=(null==e?void 0:e.loading)&&e.codeReference.range.indexFrom===e.codeReference.range.indexTo)&&void 0!==t?t:null})]}}),h=o.QQ.define({create:function(){return null},update:function(e,t){if(!t.state.field(f))return null;var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var c=o.value;c.is(l.Q)&&(e=null),c.is(l.h)&&(e=c.value)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}})},33566:function(e,t,n){n.d(t,{I:function(){return r}});function r(e){var t=[],n=[],r=!1,i=!0,o=!1,a=void 0;try{for(var l,c=e.selection.ranges[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.empty||(t.push(e.sliceDoc(s.from,s.to)),n.push(s))}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}if(!t.length){var u=-1,d=!0,f=!1,h=void 0;try{for(var p,m=e.selection.ranges[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v=p.value.from,g=e.doc.lineAt(v);g.number>u&&(t.push(g.text),n.push({from:g.from,to:Math.min(e.doc.length,g.to+1)})),u=g.number}}catch(e){f=!0,h=e}finally{try{d||null==m.return||m.return()}finally{if(f)throw h}}r=!0}return{text:t.join(e.lineBreak),ranges:n,linewise:r}}},19127:function(e,t,n){n.d(t,{BB:function(){return C},AU:function(){return b},qU:function(){return x}});var r=n(27387),i=n(12285),o=n(96583),a=n(80403),l=n(3030),c=n(22648),s=n(32472),u=n(81202),d=n.n(u),f=n(39171),h=n(15323),p=n(118),m=n(73393),v=n(34635);function g(e){var t,n;return null!==(n=null===(t=e.facet(c.N))||void 0===t?void 0:t.isDocumentSymbolSupported)&&void 0!==n&&n}var y=a.Py.define(),b=a.QQ.define({create:function(){return null},update:function(e,t){var n=e;return(0,s.j)(t,y,function(e){n=e.value}),n}});function w(){return(w=(0,r._)(function(e,t,n){var r,i,a,l,c,s,u,d,f;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,e.request.documentSymbol(t,{signal:n})];case 1:if(!(r=o.sent())||r.cancelled||!(i="result"in r&&!r.cancelled?r.result:null))return[2,null];a=[],l=!0,c=!1,s=void 0;try{for(u=i[Symbol.iterator]();!(l=(d=u.next()).done);l=!0)(f=d.value)&&"range"in f&&a.push(f)}catch(e){c=!0,s=e}finally{try{l||null==u.return||u.return()}finally{if(c)throw s}}return[2,a.length?a:null]}})})).apply(this,arguments)}function Z(e){if("Debounced function cancelled"!==e.message)throw e}var x=a.QQ.define({create:function(){return[]},update:function(e,t){if(!(0,m.aU)(t,b,"selection"))return e;var n=t.state.field(b);return n?function e(t,n,r){var i=r.find(function(e){var r=e.range;return(0,p.RL)(t,r.end)>=n&&(0,p.RL)(t,r.start)<=n});return null==i?[]:i.children?[i].concat(e(t,n,i.children)):[i]}(t.state.doc,t.state.selection.main.head,n):[]},compare:d()});function C(e){return[b,x,l.lg.fromClass(function(){"use strict";function t(n){(0,i._)(this,t),this.abortControllers=[];var a=this;this.getSymbolMap=(0,f.Z)((0,r._)(function(){var t,r,i;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(!(t=n.state.facet(h.Yp)))return[2];return a.abortControllers=[],[4,Promise.all(e.map(function(e){if(!(0,v.Z)(e).isDocumentSymbolSupported)return null;var n=new AbortController;return a.abortControllers.push(n),function(e,t,n){return w.apply(this,arguments)}(e,t,n.signal)}))];case 1:return r=o.sent(),n.dispatch({effects:y.of(null!==(i=r.find(Boolean))&&void 0!==i?i:null)}),[2]}})}),{wait:200}),g(n.state)&&this.getSymbolMap().catch(Z)}var n=t.prototype;return n.update=function(e){(0,m.aU)(e,"doc",c.N)&&g(e.state)&&(this.abortControllers.forEach(function(e){return e.abort()}),this.getSymbolMap().catch(Z))},n.destroy=function(){this.abortControllers.forEach(function(e){return e.abort()}),this.getSymbolMap.isScheduled()&&this.getSymbolMap.cancel()},t}())]}},42433:function(e,t,n){n.d(t,{Z:function(){return O},f:function(){return M}});var r=n(27387),i=n(41733),o=n(30509),a=n(96583),l=n(80403),c=n(3030),s=n(15323),u=n(92370),d=n(22648),f=n(4216),h=n(19653),p=n(29609),m=n(15235),v=n(85763),g=n(82230),y=n(94778),b=n(49224),w=n(59947),Z=n(64318),x=n(72093),C=n(48311),_=n(50959),S=n(35043),k=(0,b.X)({styles0:[x.l0.p(4),x.l0.pl(8)],styles1:[x.l0.maxWidth(100),x.l0.overflow("hidden"),{whiteSpace:"nowrap",textOverflow:"ellipsis"}],styles2:[x.l0.position.absolute,x.l0.top(4),x.l0.right(4)],styles3:[x.l0.flex.rowReverse,x.l0.p(8),x.l0.pt(0)]}),E=(0,b.X)({headerContainer:[x.l0.flex.row,x.l0.align.center,x.l0.pr(4)],bodyContainer:[x.l0.justify.center,x.l0.align.center,x.l0.p(8),x.l0.pt(4)],input:[x.l0.p(4),x.l0.borderRadius(4)],wrapper:[x.l0.flex.column,x.l0.justify.center,x.l0.borderRadius(4),x.l0.shadow(2),x.l0.width(200)]});function T(e){var t=(0,h.Z)(e.onClose,[e.onClose]),n=(0,_.useRef)(null),r=(0,p.Y)(e.currentValue,function(t){return t?t===e.currentValue?{message:"Must pick a new name"}:void 0:{message:"New name can't be empty"}});return(0,f.tZ)(S.ZP,{children:(0,f.tZ)(y.G,{"data-testid":"RenameInput",innerRef:t,css:E.wrapper,onKeyDown:function(t){"Escape"===t.key&&e.onClose(),t.stopPropagation()},children:(0,f.BX)("form",{onSubmit:function(t){t.preventDefault(),r.error||e.onRename(r.value)},children:[(0,f.BX)(y.G,{css:E.headerContainer,children:[(0,f.tZ)(g.h4,{level:2,variant:"subheadDefault",css:k.styles0,children:"Rename"}),(0,f.tZ)(g.h4,{level:2,variant:"subheadDefault",color:"dimmer",css:k.styles1,children:e.currentValue}),(0,f.tZ)(v.hU,{alt:"Close rename input",tooltipBehavior:"hidden",onClick:e.onClose,css:k.styles2,children:(0,f.tZ)(Z.Z,{})})]}),(0,f.tZ)(y.G,{css:E.bodyContainer,children:(0,f.tZ)(C.ZP,{css:E.input,name:"rename",ref:n,onBlur:r.handleBlur,onChange:function(e){r.setValue(e.target.value)},value:r.value,placeholder:"New name",autoFocus:!0,autoCorrect:"off",autoCapitalize:"off",autoComplete:"off",validationResults:r.error?[{message:r.error.message,state:"error"}]:void 0})}),(0,f.tZ)(y.G,{css:k.styles3,children:(0,f.tZ)(m.zx,{type:"submit",text:"Rename",colorway:"primary",iconLeft:(0,f.tZ)(w.Z,{}),disabled:!!r.error||!r.value})})]})})})}var R=n(86486),D=n(12674),I=n(32472),B=n(118),G=n(48594),A=n(34635),P=l.Py.define(),L=l.Py.define();function N(e){var t,n;return null!==(n=null===(t=e.facet(d.N))||void 0===t?void 0:t.isRenameSupported)&&void 0!==n&&n}var O=function(e){if(!N(e.state))return!1;var t=e.state.selection.main.head;return e.state.wordAt(t)?(e.dispatch({effects:P.of(t)}),!0):((0,R.J)(e,{message:"You cannot rename this element",offset:t}),!1)},U=l.QQ.define({create:function(){return null},update:function(e,t){return(null!==e&&(e=t.changes.mapPos(e,-1,l.gc.TrackDel)),(0,I.j)(t,P,function(t){e=t.value}),e&&(e>t.state.doc.length||!t.state.wordAt(e)||!N(t.state)))?null:e},provide:function(e){var t=new D.J(T),n=function(t){var n=t.field(e);if(null==n)throw Error("Expected non-null offset");var r=t.wordAt(n);if(!r)throw Error("Expected non-null range");return t.sliceDoc(r.from,r.to)},r=function(r){var a=r.state.field(e);if(null==a)throw Error("Expected non-null offset");if(!r.state.wordAt(a))throw Error("Expected non-null range");var l=t.create({currentValue:n(r.state),onClose:function(){r.dispatch({effects:P.of(null)}),r.focus()},onRename:function(e){r.dispatch({effects:L.of(e)})}});return l.classList.add("replit-tooltip"),l.style.padding="0",{dom:l,update:function(e){t.update(l,function(t){var r=n(e.state);return r!==t.currentValue?(0,o._)((0,i._)({},t),{currentValue:r}):t})}}};return c.hJ.from(e,function(e){return null===e?null:{pos:e,create:r}})}});function M(e,t){return[U,c.lg.define(function(n){var i=null;return{onRename:function(t,o){return(0,r._)(function(){var r,l,c,d;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(!N(n.state))return[2,this.cancelInflightRequest()];if(this.cancelInflightRequest(),!(r=n.state.facet(s.Yp)))throw Error("Expected non-null file path");if(!(l=n.state.field(U)))return[2];return i={clientId:t.clientId,requestId:t.generateId()},[4,t.request.rename(r,(0,B.sg)(n.state.doc,l),o,{id:i.requestId,tap:function(e){return(0,u.SC)(n,e)}})];case 1:if((c=a.sent()).cancelled)return[2];if("error"in c)throw Error("Something went wrong renaming ".concat(c.error.message));if(!(d=c.result))return[2];return(0,G.w)({edit:d,fs:e,client:t}),n.dispatch({effects:P.of(null)}),[2]}})}).apply(this)},cancelInflightRequest:function(){if(i){var e=!0,n=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var l=o.value;if(l.clientId===i.clientId){l.notify.cancelRequest(i.requestId);break}}}catch(e){n=!0,r=e}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}i=null}},update:function(e){var n=!0,r=!1,i=void 0;try{for(var o,a=e.transactions[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=!0,s=!1,u=void 0;try{for(var d,f=l.effects[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var h=d.value;if(h.is(L)){var p=!0,m=!1,v=void 0;try{for(var g,y=t[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var b=g.value;if((0,A.Z)(b).isRenameSupported){this.onRename(b,h.value);return}}}catch(e){m=!0,v=e}finally{try{p||null==y.return||y.return()}finally{if(m)throw v}}}}}catch(e){s=!0,u=e}finally{try{c||null==f.return||f.return()}finally{if(s)throw u}}}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}},destroy:function(){this.cancelInflightRequest()}}})]}},48126:function(e,t,n){n.d(t,{hx:function(){return h},l:function(){return d},sy:function(){return f}});var r=n(80403),i=n(3030),o=n(15323),a=n(60941),l=n(27025),c=n(36559),s=n(32508),u=n.n(s);function d(e){var t=e.view,n=e.event,i=e.clipboardText,o=e.filePath,a=t.state.selection;if(!o||!(0,c.gK)(o)||a.ranges.length>1||a.main.from===a.main.to||!i||!u()(i)){!function(){if(!n){var e=i||"";if(a.main.empty){var o=a.main.from+e.length;t.dispatch({changes:[{from:a.main.from,insert:e}],selection:r.jT.range(o,o)})}else t.dispatch(t.state.replaceSelection(e))}}();return}n&&n.preventDefault();var l=t.state.sliceDoc(a.main.from,a.main.to),s="[".concat(l,"](").concat(i,")"),d=a.main.from+s.length;t.dispatch({changes:{from:a.main.from,to:a.main.to,insert:s},selection:r.jT.range(d,d)})}var f=i.tk.domEventHandlers({paste:function(e,t){var n;d({filePath:t.state.facet(o.Yp),view:t,event:e,clipboardText:null===(n=e.clipboardData)||void 0===n?void 0:n.getData("Text")})}}),h=new a.j(function(e){return i.tk.domEventHandlers({paste:function(t,n){var r=n.state.facet(o.Yp),i=null==t?void 0:null===(f=t.clipboardData)||void 0===f?void 0:f.files,a=function(e){var t=n.state.selection.main.head;n.dispatch({changes:{from:t,insert:e},selection:{anchor:t,head:t+e.length}})};if(i){var s=!0,u=!1,d=void 0;try{for(var f,h,p=i[Symbol.iterator]();!(s=(h=p.next()).done);s=!0){var m=h.value;r&&(0,c.gK)(r)&&(0,l.r)(m,e,r).then(a)}}catch(e){u=!0,d=e}finally{try{s||null==p.return||p.return()}finally{if(u)throw d}}}}})})},32682:function(e,t,n){n.d(t,{ZB:function(){return w},qs:function(){return x},Lo:function(){return b},xv:function(){return R},xg:function(){return D},uh:function(){return y},Do:function(){return T},$X:function(){return I},Yt:function(){return Z},Gv:function(){return B},Pz:function(){return C}});var r=n(12285),i=n(4955),o=n(41733),a=n(30509),l=n(9670),c=n(80403),s=n(3030),u=n(8117),d=n(60305),f=n(66626),h={"AWS API Key":/AKIA[0-9A-Z]{16}/g,"AWS AppSync GraphQL Key":/da2-[a-z0-9]{26}/g,"AWS MWS ID":/mzn\.mws\.[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/g,"AWS client ID":/(A3T[A-Z0-9]|AKIA|AGPA|AIDA|AROA|AIPA|ANPA|ANVA|ASIA)[A-Z0-9]{16}/g,"Discord Bot Token":/(?:N|M|O)[a-zA-Z0-9]{23}\\.[a-zA-Z0-9-_]{6}\\.[a-zA-Z0-9-_]{27}/g,"Discord Webhook Url":/https?:\/\/(?:ptb\.|canary\.)?discord\.com\/api(?:\/v\d{1,2})?\/webhooks\/(\d{17,19})\/([\w-]{68})/gi,"Dynatrace Token":/dt0[a-zA-Z]{1}[0-9]{2}\\.[A-Z0-9]{24}\\.[A-Z0-9]{64}/gi,"Facebook Access Token":/EAACEdEose0cBA[0-9A-Za-z]+/g,"Facebook OAuth":/[fF][aA][cC][eE][bB][oO][oO][kK].*['|"][0-9a-f]{32}['|"]/g,"Github Personal Access Token":/ghp_[0-9a-zA-Z]{36}/g,"Github OAuth Access Token":/gho_[0-9a-zA-Z]{36}/g,"Github App Installation Access Token":/(ghu|ghs)_[0-9a-zA-Z]{36}/g,"Github App Refresh Token":/ghr_[0-9a-zA-Z]{76}/g,"Generic API Key":/[aA][pP][iI]_?[kK][eE][yY].*['|"][0-9a-zA-Z]{32,45}['|"]/g,"Generic Secret":/[sS][eE][cC][rR][eE][tT].*['|"][0-9a-zA-Z]{32,45}['|"]/g,"Google API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Google Gmail API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Google OAuth Access Token":/ya29\\.[0-9A-Za-z\\-_]+/g,"Google YouTube API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Heroku API Key":/[hH][eE][rR][oO][kK][uU].*[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}/g,"MailChimp API Key":/[0-9a-f]{32}-us[0-9]{1,2}/g,"Mailgun API Key":/key-[0-9a-zA-Z]{32}/g,"Mapbox, Public Key":/([s,p]k.eyJ1Ijoi[\w.-]+)/g,"Mapbox, Secret Key":/([s,p]k.eyJ1Ijoi[\w.-]+)/g,"npm Access Token":/npm_[0-9a-zA-Z]{36}/g,"NuGet API Key":/oy2[a-z0-9]{43}/g,"OpenAI API Key":/sk-[a-zA-Z0-9]{48}/g,"PGP private key block":/-----BEGIN PGP PRIVATE KEY BLOCK-----/g,"Picatic API Key":/sk_live_[0-9a-z]{32}/g,"PyPI API Token":/pypi-AgEIcHlwaS5vcmc[A-Za-z0-9-_]{50,1000}/g,"SSH (DSA) private key":/-----BEGIN DSA PRIVATE KEY-----/g,"SSH (EC) private key":/-----BEGIN EC PRIVATE KEY-----/g,"SSH (RSA) private key":/-----BEGIN RSA PRIVATE KEY-----/g,"SendGrid API Key":/SG\\.[0-9A-Za-z\\-_]{22}\\.[0-9A-Za-z-_]{43}/g,"Shopify Access Token":/shpat_[a-fA-F0-9]{32}/g,"Shopify App Shared Secret":/shpss_[a-fA-F0-9]{32}/g,"Shopify Custom App Access Token":/shpca_[a-fA-F0-9]{32}/g,"Shopify Private App Password":/shppa_[a-fA-F0-9]{32}/g,"Slack Token":/(xox[pborsa]-[0-9]{12}-[0-9]{12}-[0-9]{12}-[a-z0-9]{32})/g,"Slack API Token":/xox[baprs]-([0-9a-zA-Z]{10,48})?/g,"Slack Live API Key":/(?:r|s)k_live_[0-9a-zA-Z]{24}/g,"Slack Test API Key":/(?:r|s)k_test_[0-9a-zA-Z]{24}/g,"Slack, OAuth v2 Bot Access Token":/xoxb-[0-9]{11}-[0-9]{11}-[0-9a-zA-Z]{24}/g,"Slack, OAuth v2 Configuration Token":/xoxe.xoxp-1-[0-9a-zA-Z]{166}/g,"Slack, OAuth v2 Refresh Token":/xoxe-1-[0-9a-zA-Z]{147}/g,"Slack, OAuth v2 User Access Token":/xoxp-[0-9]{11}-[0-9]{11}-[0-9a-zA-Z]{24}/g,"Slack Webhook":/https:\/\/hooks.slack.com\/services\/T[a-zA-Z0-9_]{10}\/B[a-zA-Z0-9_]{10}\/[a-zA-Z0-9_]{24}/g,"Square Access Token":/sq0atp-[0-9A-Za-z\\-_]{22}/g,"Square OAuth Secret":/sq0csp-[0-9A-Za-z\\-_]{43}/g,"Stripe API Key":/sk_live_[0-9a-zA-Z]{24}/g,"Stripe Restricted API Key":/rk_live_[0-9a-zA-Z]{24}/g,"Twilio API Key":/SK[0-9a-fA-F]{32}/g,"Twitter Access Token":/[tT][wW][iI][tT][tT][eE][rR].*[1-9][0-9]+-[0-9a-zA-Z]{40}/g,"Twitter OAuth":/[tT][wW][iI][tT][tT][eE][rR].*['|"][0-9a-zA-Z]{35,44}['|"]/g,"Vault Token":/([sb]\.[a-zA-Z0-9]{24})/g},p={"Instagram oauth":/[0-9a-fA-F]{7}\.[0-9a-fA-F]{32}/g},m=function(e){"use strict";(0,i._)(n,e);var t=(0,l._)(n);function n(e,i){var o;return(0,r._)(this,n),(o=t.call(this)).id=e,o.result=i,o}return n.range=function(e,t,n){return new this(e,n).range(t.from,t.to)},n.generateId=function(){return this.secretId++},n}(c.uU);m.secretId=0;var v=function(e){"use strict";(0,i._)(n,e);var t=(0,l._)(n);function n(e){var i;return(0,r._)(this,n),(i=t.call(this)).key=e,i}return n.from=function(e){return new this(e)},n}(c.uU),g=c.Py.define({map:function(e,t){var n=c.Xs.of(e).map(t).iter(),r=n.from,i=n.to;return m.range(e.value.id,c.jT.cursor(r,i),e.value.result)}}),y=c.Py.define(),b=c.Py.define(),w=c.Py.define(),Z=c.Py.define(),x=c.Py.define(),C=function(e){var t=e.state.field(D);if(!t.size)return!1;for(var n=t.iter(),r=[];n.value;){var i=n.from,o=n.to,a=n.value;r.push({from:i,to:o,value:a}),n.next()}var l=e.state.doc.length,s=c.as.empty(l),u=[],f=[],h=!0,p=!1,m=void 0;try{for(var v,g=r[Symbol.iterator]();!(h=(v=g.next()).done);h=!0)!function(){var e=v.value,t=e.from,n=e.to,r=e.value,i=r.result.secret,o=c.as.of({from:t,to:n,insert:i},l).map(s,!0);u=u.map(function(e){return e.map(o)});var a=(s=s.compose(o)).mapPos(t)+i.length;u.push(c.jT.cursor(a)),f.push(y.of(r.id)),(0,d.j)(d.U3.PASTE_SCANNER_USED,{action:"original_accepted",provider:r.result.provider})}()}catch(e){p=!0,m=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw m}}return e.dispatch({changes:s,effects:f,selection:c.jT.create(u)}),!0},_=function(e){return!!e.state.facet(I)&&!!e.state.field(D).size&&(e.dispatch({effects:e.state.selection.ranges.map(function(e){return b.of(e)})}),!0)},S=function(e){return!e.state.facet(I)&&k(e)},k=function(e){return!!e.state.field(D).size&&(e.dispatch({effects:e.state.selection.ranges.map(function(e){return y.of(e)})}),!0)};function E(e,t){var n,r=null===(n=e.clipboardData)||void 0===n?void 0:n.getData("text/plain");if(!r)return!1;var i=function(e){if(e.length>2e3)return!1;var t=!0,n=!1,r=void 0;try{for(var i,o=[h,p][Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=!0,c=!1,s=void 0;try{for(var u,d=Object.entries(a)[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var m=(0,f._)(u.value,2),v=m[0],g=m[1],y=e.search(g);if(!(y<0)){var b=e.match(g);if(b){var w=y+b[0].length;return{start:y,end:w,secret:e.slice(y,w),provider:v}}}}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return!1}(r);if(!i)return!1;e.preventDefault(),e.stopPropagation();var l=r.slice(0,i.start)+r.slice(i.end),s=m.generateId();return t.dispatch((0,a._)((0,o._)({},t.state.changeByRange(function(e){var t=e.from,n=e.to,r=c.jT.cursor(t+i.start);return{range:r,changes:{from:t,to:n,insert:l},effects:g.of(m.range(s,r,i))}})),{scrollIntoView:!0})),(0,d.j)(d.U3.PASTE_SCANNER_USED,{action:"secret_detected",provider:i.provider}),!0}var T=c.QQ.define({create:function(){return c.Xs.empty},update:function(e,t){e=e.map(t.changes);var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(Z)){var s=l.value,u=s.from,d=s.to,f=s.secret;e=e.update({add:[v.from(f).range(u,d)],filter:function(){return!1}})}l.is(x)&&(e=c.Xs.empty)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}}),R=c.QQ.define({create:function(){return null},update:function(e,t){var n=t.state.field(D,!1),r=!0,i=!1,o=void 0;try{for(var a,l=t.effects[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;n&&s.is(b)&&(s.value instanceof c.xm?n.between(s.value.from,s.value.to,function(t,n,r){e=r}):e=s.value),s.is(w)&&(e=null)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return e}}),D=c.QQ.define({create:function(){return c.Xs.empty},update:function(e,t){e=e.map(t.changes);var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)!function(){var t=o.value;t.is(g)&&(e=e.update({add:[t.value],sort:!0})),t.is(y)&&(e=t.value instanceof c.xm?e.update({filter:function(){return!1},filterFrom:t.value.from,filterTo:t.value.to}):e.update({filter:function(e,n,r){return r.id!==t.value}}))}()}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e},provide:function(){return[s.tk.domEventHandlers({paste:E}),c.Wl.highest(s.$f.of([{key:"Mod-z",run:k},{key:"Enter",run:C},{key:"Tab",run:_,stopPropagation:!0},{key:"Escape",run:S}]))]}}),I=c.r$.define({combine:function(e){return e.some(Boolean)}}),B=u.RR.of(function(e){var t=e.state.field(D,!1);if(!t||!t.size)return!1;var n=!1;return t.between(e.newSelection.main.from,e.newSelection.main.to,function(){return n=!0,!1}),n})},38e3:function(e,t,n){n.d(t,{F:function(){return v}});var r=n(4216),i=n(3030),o=n(77450),a=n(62942),l=n(87502),c=n(60941),s=n(72093),u=n(50959),d=n(118),f=(0,o.iv)({scrollbarWidth:"thin",outline:"none",overflow:"auto",".cm-content":{paddingBottom:0},"::-webkit-scrollbar":{width:4},".cm-gutters":{minWidth:"unset"}}),h=(0,o.iv)({overflow:"hidden",".cm-scroller":{overflow:"hidden"}}),p={root:s.l0.backgroundColor.backgroundRoot,higher:s.l0.backgroundColor.backgroundHigher,highest:s.l0.backgroundColor.backgroundHighest,default:s.l0.backgroundColor.backgroundDefault},m=new c.j(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(0,i.Eu)({formatNumber:function(t,n){for(var r=String(n.doc.lines).length,i=String(t+e-1);r>i.length;)i="\xa0"+i;return i}})});function v(e){var t=e.path,n=e.initialDoc,i=e.maxHeight,c=e.minHeight,s=e.extensions,v=e.allowScroll,g=e.fontSize,y=e.hideGutter,b=e.startLineNumber,w=e.style,Z=e.elevation,x=e.onNavigateToCode,C=(0,l.Z)(),_=C.ref,S=C.view,k=(0,u.useMemo)(function(){var e;return e=p[null!=Z?Z:"default"],(0,o.iv)({".cm-editor":e,".cm-gutters":e})},[Z]),E=m.use(b);return(0,r.tZ)("div",{style:w,children:(0,r.tZ)(a.ZP,{ref:_,initialDoc:n,css:[f,k,void 0===v||v?null:h],extensions:[E,void 0===s?[]:s],style:{minHeight:c,maxHeight:null!=i?i:"10em"},hideGutter:y,filePath:t,fontSize:g,readOnly:!0,onClick:function(e){if(x&&S){var t=e.clientX,n=e.clientY,r=S.posAtCoords({x:t,y:n});x(null!==r?(0,d.sg)(S.state.doc,r):null)}}})})}},90413:function(e,t,n){n.d(t,{d:function(){return d},z:function(){return u}});var r=n(12285),i=n(66626),o=n(50959),a=n(75958),l=n(86763),c=n.n(l),s=n(46870),u=function(){"use strict";function e(t){var n=this;if((0,r._)(this,e),this.saveToLocalStorage=c()(function(){a.Z.set("stateCache",{version:2,entries:Array.from(n.map.entries())})},500,{leading:!1,trailing:!0,maxWait:1e3}),this.map=new s.L(20),t){if("object"!=typeof t||null===t||!Object.prototype.hasOwnProperty.call(t,"version")||!Object.prototype.hasOwnProperty.call(t,"entries")||"number"!=typeof t.version||2!==t.version)return;var o=t.entries,l=!0,u=!1,d=void 0;try{for(var f,h=o[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var p=(0,i._)(f.value,2),m=p[0],v=p[1];this.map.set(m,v)}}catch(e){u=!0,d=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw d}}}}var t=e.prototype;return t.set=function(e,t){this.map.set(e,t),this.saveToLocalStorage()},t.get=function(e){return this.map.get(e)},e}(),d=(0,o.createContext)(null)},4495:function(e,t,n){n.d(t,{B:function(){return o}});var r=n(80403),i=n(32472);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=r.Py.define(),o=r.QQ.define({create:function(){return t},update:function(t,r){return(0,i.j)(r,n,function(n){t=e(n.value,t)}),t}});return{effect:n,state:o}}},71462:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(4216),i=n(98001),o=n(50959);function a(e){var t=e.json,n=(0,o.useMemo)(function(){return JSON.stringify(t,null,2)},[t]);return(0,r.tZ)(i.Z,{language:"json",code:n})}},42701:function(e,t,n){n.d(t,{c:function(){return r}});var r="Tools"},12517:function(e,t,n){n.d(t,{X:function(){return w}});var r=n(31417),i=n(27387),o=n(66626),a=n(96583),l=n(4216),c=n(60305),s=n(15235),u=n(45271),d=n(82230),f=n(94778),h=n(59947),p=n(72093),m=n(50959),v=n(49224),g=n(59786),y=n(53594),b=(0,v.X)({modal:[p.l0.colWithGap(16)],buttons:[p.l0.justify.end,p.l0.rowWithGap(16)]});function w(e){var t,n=e.openDeploymentPane,p=(0,o._)((0,m.useState)(null),2),v=p[0],w=p[1],Z=(0,g.P5)({controlName:"flag-porygon-button",logFlagToAnalytics:!1});return(0,y.C)((t=(0,i._)(function(e,t){var n,i,l,c,s,u,d,f,h,p,m,v;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(n=t.addCleanup,!Z)return[2];return[4,e.agentToolDeploy.workspace.stream({})];case 1:l=(i=o._.apply(void 0,[a.sent(),3]))[0],c=i[1],s=i[2],n(s),u=!1,d=!1,a.label=2;case 2:a.trys.push([2,7,8,13]),h=(0,r._)(c),a.label=3;case 3:return[4,h.next()];case 4:if(!(u=!(p=a.sent()).done))return[3,6];if(!(m=p.value).ok)return[3,5];"confirmDeploy"===m.payload.$kind&&w(function(){return function(e){if(!e){w(null),l.push({$kind:"deployCanceled"});return}l.push({$kind:"deployConfirmed"}),w(null)}}),a.label=5;case 5:return u=!1,[3,3];case 6:return[3,13];case 7:return v=a.sent(),d=!0,f=v,[3,13];case 8:if(a.trys.push([8,,11,12]),!(u&&null!=h.return))return[3,10];return[4,h.return()];case 9:a.sent(),a.label=10;case 10:return[3,12];case 11:if(d)throw f;return[7];case 12:return[7];case 13:return[2]}})}),function(e,n){return t.apply(this,arguments)}),[Z]),(0,l.tZ)(u.u,{isOpen:"function"==typeof v,onRequestClose:function(){null==v||v(!1),(0,c.j)(c.U3.AGENT_DEPLOY_MODAL_USED,{response:"close"})},children:(0,l.BX)(f.G,{css:b.modal,children:[(0,l.tZ)(d.h4,{variant:"headerDefault",level:3,children:"Time to deploy"}),(0,l.tZ)(d.xv,{children:"Your AI agent would like you to Deploy."}),(0,l.BX)(f.G,{css:b.buttons,children:[(0,l.tZ)(s.zx,{onClick:function(){null==v||v(!1),(0,c.j)(c.U3.AGENT_DEPLOY_MODAL_USED,{response:"cancel"})},text:"Cancel"}),(0,l.tZ)(s.zx,{onClick:function(){null==v||v(!0),(0,c.j)(c.U3.AGENT_DEPLOY_MODAL_USED,{response:"okay"}),n()},iconLeft:(0,l.tZ)(h.Z,{}),text:"Okay",colorway:"primary"})]})]})})}},63908:function(e,t,n){n.d(t,{E:function(){return R}});var r=n(31417),i=n(27387),o=n(66626),a=n(96583),l=n(4216),c=n(60305),s=n(15235),u=n(45271),d=n(82230),f=n(94778),h=n(59947),p=n(72093),m=n(81199),v=n(50959),g=n(49224),y=n(59786),b=n(53594),w=n(41733),Z=n(21262),x=n(71440),C=n(58995);function _(){var e=(0,Z._)(["\n  query CurrentUserGithubToken {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n    }\n  }\n"]);return _=function(){return e},e}var S={},k=(0,x.Ps)(_()),E=n(29871),T=(0,g.X)({styles0:[p.l0.colWithGap(16)],styles1:[p.l0.justify.end,p.l0.rowWithGap(16)]});function R(){var e,t,n=(0,m.Z)().replspaceApi,p=(0,o._)((0,v.useState)(null),2),g=p[0],Z=p[1],x=(0,o._)((0,v.useState)(!1),2),_=x[0],R=x[1],D=(e=(0,w._)({},S,void 0),C.a(k,e)).data,I=(null==D?void 0:D.currentUser)||void 0,B=(0,E.iM)(),G=(0,y.P5)({controlName:"flag-pid2-shell",logFlagToAnalytics:!1}),A=B&&G;return(0,v.useEffect)(function(){return n.onConfirmSendToken(function(e){e&&(0,c.j)(c.U3.MODAL_VIEWED,{modalName:"git_token_modal"}),Z(function(){return e})})},[n]),(0,b.C)((t=(0,i._)(function(e,t){var n,i,l,s,u,d,f,h,p,m,v,g,y;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(n=t.session,i=t.addCleanup,!A)return[2];return[4,e.replspaceApi.init.stream({session:n.from})];case 1:s=(l=o._.apply(void 0,[a.sent(),3]))[0],u=l[1],d=l[2],i(d),f=!1,h=!1,a.label=2;case 2:a.trys.push([2,7,8,13]),m=function(){var e=g.value;if(e.ok&&"getGithubToken"===e.payload.$kind){var t,n,r=e.payload.nonce,i=null!==(n=null==I?void 0:null===(t=I.gitHubInfo)||void 0===t?void 0:t.accessToken)&&void 0!==n?n:void 0;if(!i)return s.push({$kind:"githubToken",nonce:r}),"continue";if(_)return s.push({$kind:"githubToken",token:i,nonce:r}),"continue";(0,c.j)(c.U3.MODAL_VIEWED,{modalName:"git_token_modal"}),Z(function(){return function(e){if(!e){Z(null),s.push({$kind:"githubToken",nonce:r});return}s.push({$kind:"githubToken",token:i,nonce:r}),Z(null),R(!0)}})}},v=(0,r._)(u),a.label=3;case 3:return[4,v.next()];case 4:if(!(f=!(g=a.sent()).done))return[3,6];m(),a.label=5;case 5:return f=!1,[3,3];case 6:return[3,13];case 7:return y=a.sent(),h=!0,p=y,[3,13];case 8:if(a.trys.push([8,,11,12]),!(f&&null!=v.return))return[3,10];return[4,v.return()];case 9:a.sent(),a.label=10;case 10:return[3,12];case 11:if(h)throw p;return[7];case 12:return[7];case 13:return[2]}})}),function(e,n){return t.apply(this,arguments)}),[I,_,A]),(0,l.tZ)(u.u,{isOpen:"function"==typeof g,onRequestClose:function(){null==g||g(!1),(0,c.j)(c.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"close"}),Z(null)},children:(0,l.BX)(f.G,{css:T.styles0,children:[(0,l.tZ)(d.h4,{variant:"headerDefault",level:3,children:"Pass GitHub Credentials"}),(0,l.tZ)(d.xv,{children:"It looks like you're trying to connect to your GitHub repository through the shell. Pass your token to the shell?"}),(0,l.tZ)(d.xv,{children:"If you did not initiate a git command, you should deny this."}),(0,l.BX)(f.G,{css:T.styles1,children:[(0,l.tZ)(s.zx,{onClick:function(){null==g||g(!1),(0,c.j)(c.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"deny"}),Z(null)},text:"Deny"}),(0,l.tZ)(s.zx,{onClick:function(){null==g||g(!0),(0,c.j)(c.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"confirm"}),Z(null)},iconLeft:(0,l.tZ)(h.Z,{}),text:"Confirm for this session",colorway:"primary"})]})]})})}},41876:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(4216),i=n(15579),o=n(17971),a=n(82230),l=n(94778),c=n(72093),s=n(49224),u=n(35043),d=(0,s.X)({overlay:[c.l0.position.fixed,c.l0.flex.row,c.l0.align.center,c.l0.justify.center,c.l0.backgroundColor.backgroundOverlay,{top:0,bottom:0,left:0,right:0,zIndex:c.n0+1,cursor:"not-allowed"}],animationWrapper:[c.l0.center,c.l0.minWidth(225),c.l0.height(225),c.l0.p(16),c.l0.color.foregroundDefault,c.l0.borderRadius(8),c.l0.backgroundColor.backgroundOverlay,c.l0.zIndex(c.n0+1),{cursor:"not-allowed"}],lockText:c.l0.mt(32)});function f(e){var t=e.reason;return(0,r.tZ)(o.h,{children:(0,r.tZ)(l.G,{css:d.overlay,children:(0,r.tZ)(u.ZP,{children:(0,r.BX)(l.G,{css:d.animationWrapper,tabIndex:-1,children:[(0,r.tZ)(i.Z,{height:80}),(0,r.tZ)(a.xv,{multiline:!1,variant:"subheadBig",css:d.lockText,dataCy:"lock-screen",children:t})]})})})})}},68568:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(66626),i=n(4216),o=n(15235),a=n(18060),l=n(82230),c=n(94778),s=n(72093),u=n(50959),d=(0,n(49224).X)({styles0:[s.l0.colWithGap(24)],styles1:[s.l0.color.accentNegativeStronger],styles2:[s.l0.rowWithGap(12),s.l0.justify.end]});function f(e){var t=e.prompt,n=e.desc,s=e.type,f=e.placeholder,h=e.confirmText,p=e.loading,m=e.errorMessage,v=e.onCancel,g=e.onConfirm,y=e.isDanger,b=e.buttonIcon,w=(0,r._)((0,u.useState)(),2),Z=w[0],x=w[1];return(0,i.BX)(c.G,{css:d.styles0,children:[(0,i.tZ)(l.h4,{variant:"headerDefault",level:2,children:t}),(0,i.tZ)(l.xv,{children:n}),(0,i.tZ)(a.II,{type:s,value:Z,placeholder:f,autoFocus:!0,onChange:function(e){return x(e.target.value)}}),m?(0,i.tZ)(l.xv,{css:d.styles1,multiline:!1,children:m}):null,(0,i.BX)(c.G,{css:d.styles2,children:[(0,i.tZ)(o.zx,{disabled:p,onClick:v,text:"Cancel"}),(0,i.tZ)(o.zx,{colorway:y?"negative":"primary",disabled:p,onClick:function(){return Z&&g(Z)},text:h||"Ok",iconLeft:b,dataCy:"prompt-confirm-button"})]})]})}},48342:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(4216),i=n(75993),o=n(15235),a=n(85638),l=n(85763),c=n(90029),s=n(82230),u=n(64432),d=n(94778),f=n(1383),h=n(20795),p=n(41733),m=n(30509),v=n(66548),g=function(e){return(0,r.tZ)(v.ZP,(0,m._)((0,p._)({viewBox:"0 0 800.5 907.77"},e),{children:(0,r.tZ)("path",{d:"M303.36,238.61c31.36-21.37,71.76-12.97,65-6.53c-12.89,12.28,4.26,8.65,6.11,31.31 c1.36,16.69-4.09,25.88-8.78,31.11c-9.79,1.28-21.69,3.67-36.02,8.33c-8.48,2.76-15.85,5.82-22.31,8.9 c-1.7-1.11-3.55-2.47-5.74-4.36C279.5,288.19,280.24,254.37,303.36,238.61 M490.68,370.72c5.69-4.41,31.55-12.72,55.49-15.55 c12.57-1.48,30.49-2.34,34.31-0.2c7.59,4.19,7.59,17.16,2.39,29.14c-7.57,17.4-18.27,36.63-30.39,38.21 c-19.77,2.61-38.46-8.09-59.8-24.03C485.06,392.56,480.38,378.68,490.68,370.72 M526.75,201.27c29.19,13.58,25.37,39.42,26.18,54.6 c0.22,4.36,0.15,7.3-0.22,9.32c-4.04-2.19-10.43-3.8-20.56-3.35c-2.96,0.12-5.84,0.47-8.63,0.91c-10.77-5.77-17.21-17.06-23.1-29.06 c-0.54-1.11-0.96-2.1-1.36-3.06c-0.17-0.44-0.35-0.91-0.52-1.31c-0.07-0.22-0.12-0.39-0.2-0.59c-3.23-10.25-1.06-12.3,0.3-15.46 c1.41-3.23,6.68-5.89-1.11-8.58c-0.67-0.25-1.5-0.39-2.44-0.57C500.25,197.72,515.7,196.17,526.75,201.27 M367.62,510.22 c-31.45-20.19-63.99-49.15-78.22-65.18c-2.39-1.8-2-9.79-2-9.79c12.84,9.98,66.11,48.04,122.44,65.42 c19.87,6.14,50.36,8.46,76.81-6.53c20.21-11.46,44.54-31.43,59.06-52.01l2.66,4.61c-0.1,3.06-6.78,17.97-10.18,23.96 c6.14,3.53,10.72,4.49,17.55,6.36l46.64-7.27c16.74-27.04,28.74-70.65,15.95-112.16c-7.3-23.81-45.36-71.22-48.09-73.83 c-9.56-9.19,1.6-44.69-17.35-83.42C532.86,159.41,480.67,116.69,458,98.1c6.68,4.88,47.82,21.47,67,44.62 c1.8-2.39,2.54-14.82,4.19-17.97c-16.47-21.57-17.75-59.95-17.75-70.21c0-18.81-9.56-40.13-9.56-40.13s16.47,13.04,20.73,35.5 c5.03,26.6,15.75,47.55,29.93,65.28c26.84,33.43,51.08,50.58,63.33,38.23C630.53,138.58,601,72.2,563.28,35.15 C519.25-8.09,507.74-2.52,481.91,6.7c-20.61,7.35-31.75,65.87-85.47,64.71c-9.1-1.06-32.54-1.63-44.13-1.53 c6.04-8.43,11.22-14.94,11.22-14.94s-18.02,7.25-33.38,16.44l-1.18-1.77c5.18-10.92,10.75-17.82,10.75-17.82s-14.4,8.65-27.54,19.01 c2.39-13.02,11.44-21.27,11.44-21.27s-18.19,3.28-41.36,28.77c-26.33,7.2-32.66,11.93-53.64,21.22 c-34.12-7.44-50.21-19.45-65.55-41.56c-11.68-16.89-32.47-19.45-53.71-10.72c-30.97,12.8-70.14,30.33-70.14,30.33 s12.77-0.52,26.08,0.05c-18.22,6.9-35.72,16.39-35.72,16.39s8.53-0.3,19.06-0.12c-7.27,6.04-11.29,8.92-18.22,13.51 c-16.66,12.1-30.17,26.08-30.17,26.08s11.31-5.15,21.47-8.04c-7.1,16.27-21.18,28.25-18.59,48.17 c2.49,18.19,24.82,55.66,53.64,78.66c2.49,2,41.86,38.43,71.56,23.47c29.68-14.94,41.39-28.25,46.27-48.66 c5.74-23.44,2.47-41.17-9.79-92.05c-4.04-16.79-14.57-51.37-19.65-67.91l1.13-0.81c9.71,20.49,34.56,74.5,44.57,110.78 c15.63,56.57,10.75,85.27,3.6,95.79c-21.57,31.73-76.84,35.92-101.98,18.34c-3.85,60.91,9.76,87.73,14.37,101.24 c-2.29,15.53,7.77,44.37,7.77,44.37s1.13-13.11,5.74-20.02c1.23,15.41,9,33.72,9,33.72s-0.47-11.31,3.06-21.08 c4.98,8.43,8.63,10.43,13.34,16.76c4.71,16.47,14.15,28.5,14.15,28.5s-1.53-8.83-0.69-18.02c23.05,22.14,27.02,54.45,29.31,79.28 c6.46,68.26-107.63,122.54-129.74,165.24c-16.76,25.29-26.8,65.3,1.58,88.89c68.6,56.97,42.25,72.65,76.59,97.69 c47.11,34.34,106.05,18.96,126.11-8.97c27.93-38.92,20.76-75.63,10.38-109.97c-8.11-26.85-30.15-71.46-57.41-88.72 c-27.86-17.65-54.95-20.95-77.9-18.59l2.12-2.44c33.01-6.56,67.52-2.96,92.49,13.14c28.35,18.22,54.28,49.47,67.84,97.37 c15.38-2.19,17.55-3.18,31.63-5.18l-31.7-246.76L367.62,510.22z M385.94,819.52l-3.65-34.22l71.29-108.74l80.93,23.64l69.59-116.23 L687.52,639l63.38-132.92l22.53,242.07L385.94,819.52z M774.27,456.51l-254.72,46.17c-6.31,8.13-21.91,22.41-29.41,26.13 c-32.17,16.2-53.91,11.51-72.7,6.63c-12.08-3.06-19.08-4.78-29.11-9.29l-62.17,8.53l37.74,314.87l436.35-78.66L774.27,456.51z"})}))},y=n(11721),b=n(72093),w=n(55460),Z=(0,n(49224).X)({styles0:[b.l0.rowWithGap(2),{alignItems:"center"}],styles1:[b.l0.align.center]});function x(e){var t=e.replId,n=e.showFlag,p=e.buttonsOnly,m=(0,w.F)().isDarkColorScheme;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.Z,{href:"https://app.datadoghq.com/logs?"+new URLSearchParams({query:"@replid:".concat(t)}).toString(),iconLeft:(0,r.tZ)(g,{color:m?"#FFFFFF":"#632CA6"}),iconRight:(0,r.tZ)(f.Z,{}),target:"_blank",text:"View Datadog Logs by Repl ID"}),(0,r.tZ)(a.Z,{href:"https://app.datadoghq.com/logs?"+new URLSearchParams({query:"@replid:".concat(t),agg_q:"@containerid",agg_q_source:"base",cols:"host,service",messageDisplay:"inline",stream_sort:"desc",top_n:"30",top_o:"top",viz:"transaction",x_missing:"true",live:"true"}).toString(),iconLeft:(0,r.tZ)(g,{color:m?"#FFFFFF":"#632CA6"}),iconRight:(0,r.tZ)(f.Z,{}),target:"_blank",text:"View Datadog Logs by Container ID"}),void 0!==p&&p?(0,r.tZ)(u.u,{maxWidth:300,tooltip:(0,r.tZ)(s.xv,{multiline:!1,children:t}),children:(0,r.tZ)(o.zx,{iconLeft:(0,r.tZ)(h.Z,{}),text:"Copy Repl ID",onClick:function(){return(0,i.Z)(t)}})}):(0,r.BX)(d.G,{css:Z.styles0,children:[void 0!==n&&n?(0,r.BX)(u.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:[(0,r.tZ)(y.Z,{})," "]}):null,(0,r.BX)(s.xv,{css:Z.styles1,multiline:!1,children:["Repl ID: ",(0,r.tZ)(c.Z,{children:t})]}),(0,r.tZ)(l.hU,{alt:"Copy to clipboard",onClick:function(){return(0,i.Z)(t)},children:(0,r.tZ)(h.Z,{})})]})]})}},87409:function(e,t,n){n.d(t,{$s:function(){return s},G$:function(){return i},fZ:function(){return o},p6:function(){return c}});var r=n(96955),i=.01,o=function(e,t){var n=t.resourceUsageType,r=t.forceGib,i=t.precision,o=t.skipUnits,a=t.additional,c=t.minimumValue,s=t.truncateToMillions,u=t.gibsDisplayAsBytes,d=l({input:e,resourceUsageType:n,forceGib:void 0!==r&&r,precision:void 0===i?4:i,minimumValue:void 0===c?null:c,truncateToMillions:void 0!==s&&s,gibsDisplayAsBytes:void 0!==u&&u});return void 0!==o&&o?d.formattedValue:void 0!==a&&a?[d.formattedValue,"additional",d.units].join(" "):[d.formattedValue,d.units].join(" ")};function a(e,t){var n=t.precision,r=t.minimumValue,i=t.forceGib,o=r&&0!==e;return e>=1073741824*(null!=r?r:1)||i?o&&e<1073741824*r?{formattedValue:"<".concat(r.toLocaleString(void 0,{minimumFractionDigits:n})),units:"GiB"}:{formattedValue:s(e).toFixed(n),units:"GiB"}:o&&e<1048576*r?{formattedValue:"<".concat(r.toLocaleString(void 0,{minimumFractionDigits:n})),units:"MiB"}:{formattedValue:c(e).toFixed(n),units:"MiB"}}var l=function(e){var t=e.input,n=e.resourceUsageType,i=e.forceGib,o=e.precision,l=e.minimumValue,c=e.truncateToMillions,s=e.gibsDisplayAsBytes,u=l&&0!==t&&t<l;switch(n){case"Bytes":return a(t,{precision:o,minimumValue:l,forceGib:i});case"GiB":if(0===t)return{formattedValue:t.toFixed(o),units:"GiB"};if(s)return a(1073741824*t,{precision:o,minimumValue:l,forceGib:!1});if(u)return{formattedValue:"<".concat(l.toLocaleString(void 0,{minimumFractionDigits:o})),units:"GiB"};return{formattedValue:t.toFixed(o),units:"GiB"};case"GiB-months":if(0===t)return{formattedValue:t.toFixed(o),units:"GiB-months"};if(u)return{formattedValue:"<".concat(l.toLocaleString(void 0,{minimumFractionDigits:o})),units:"GiB-months"};return{formattedValue:t.toFixed(o),units:"GiB-months"};case"ComputeUnits":if(t>=1e6&&c)return{formattedValue:(t/1e6).toLocaleString(void 0,{maximumFractionDigits:t>=1e6&&c?2:0})+" million",units:"compute units"};return{formattedValue:t.toLocaleString(void 0,{maximumFractionDigits:0}),units:"compute units"};case"ComputeHours":return{formattedValue:t.toLocaleString(void 0,{maximumFractionDigits:0}),units:"compute hours"};case"Requests":if(t>=1e6&&c)return{formattedValue:(t/1e6).toLocaleString(void 0,{maximumFractionDigits:t>=1e6&&c?2:0})+" million",units:"requests"};return{formattedValue:t.toLocaleString(void 0,{maximumFractionDigits:0}),units:"requests"};case"Site":return{formattedValue:t.toLocaleString(void 0,{maximumFractionDigits:0}),units:"site"};case"Hours":return{formattedValue:t.toLocaleString(void 0,{maximumFractionDigits:2}),units:"hours"};case"ScheduledDays":return{formattedValue:t.toLocaleString(void 0,{maximumFractionDigits:2}),units:"days"};case"Tokens":return{formattedValue:t.toLocaleString(void 0,{maximumFractionDigits:0}),units:"tokens"};default:(0,r.Z)(n)}},c=function(e){return e/1048576},s=function(e){return e/1073741824}},4318:function(e,t,n){n.d(t,{u:function(){return o}});var r=n(21262);function i(){var e=(0,r._)(["\n  fragment BuildStatusBadgeHostingDeployment on HostingDeployment {\n    id\n    currentBuild {\n      id\n      status\n      timeCreated\n      user {\n        id\n        displayName\n      }\n    }\n  }\n"]);return i=function(){return e},e}var o=(0,n(71440).Ps)(i())},23129:function(e,t,n){n.d(t,{e:function(){return p}});var r=n(4216),i=n(50372),o=n(82230),a=n(64432),l=n(94778),c=n(49224),s=n(77361),u=n(72093),d=n(17202),f=n(85438),h=(0,c.X)({root:[u.l0.py(4),u.l0.rowWithGap(4),u.l0.align.center]});function p(e){var t=e.deployment,n=e.small,c=t.currentBuild,u=i.V[c.status],p=u.title,m=u.color,v=(0,d.Z)(new Date(c.timeCreated),Date.now(),{addSuffix:!0}),g="Deployed ".concat(v," by ").concat(c.user.displayName),y=c.status===f.Fe.Success?"Deployed":p;return(0,r.tZ)(a.u,{tooltip:g,children:(0,r.BX)(l.G,{css:h.root,children:[(0,r.tZ)(s.Z,{size:n?12:16,color:m}),(0,r.tZ)(o.xv,{variant:n?"small":void 0,color:"dimmest",multiline:!1,children:y})]})})}},98986:function(e,t,n){n.d(t,{$:function(){return s}});var r=n(66626),i=n(4216),o=n(50959),a=n(40635),l=n(15063),c=n(45375);function s(e){var t=(0,r._)((0,o.useState)(function(){var t,n,r,i,o,c,s;return n=(t={fs:e.fs,container:e.container,dotReplit:e.dotReplit,ports:e.ports,secrets:e.secrets}).container,r=t.fs,i=t.dotReplit,o=t.ports,c=t.secrets,(s=(0,a.MT)()).set(l.CK,n),s.set(l.bA,r),s.set(l.My,i),s.set(l.l,o),s.set(l.fN,c),s}),1)[0];return(0,i.BX)(c.aT.Provider,{value:t,children:[e.children,(0,i.tZ)(l.jd,{replId:e.replId})]})}},15063:function(e,t,n){n.d(t,{jd:function(){return eM},CK:function(){return en},My:function(){return eo},bA:function(){return er},l:function(){return ea},fN:function(){return ei},_U:function(){return eL},rm:function(){return eJ},XA:function(){return eV},$y:function(){return eS},BU:function(){return ex},ev:function(){return eR},hn:function(){return eg},pn:function(){return eE},kW:function(){return em},Eb:function(){return eh},v5:function(){return es},XZ:function(){return el},MV:function(){return ew},l9:function(){return eC},U:function(){return eN},t7:function(){return eu},m8:function(){return eX},Qk:function(){return ec},mF:function(){return ej}});var r,i,o,a=n(27387),l=n(41733),c=n(30509),s=n(66626),u=n(96583),d=n(85733),f=n(39271),h=n(82419),p=n(85438),m=n(41974),v=n(40635),g=n(50959),y=n(96955),b=n(63548),w=n(9851),Z=n(33318),x=n(13464),C=n(27197),_=n(21262),S=n(71440),k=n(15432),E=n(58995),T=n(78711),R=n(293),D=n(99165);function I(){var e=(0,_._)(["\n  fragment DeploymentSessionCurrentUser on CurrentUser {\n    id\n    isCore: subscriptionIsType(subscriptionType: HACKER_PRO)\n  }\n"]);return I=function(){return e},e}function B(){var e=(0,_._)(["\n  fragment DeploymentSessionHostingDeployment on HostingDeployment {\n    ...TargetHostingDeployment\n    currentBuild {\n      ...CurrentBuild2\n    }\n    inProgressBuild {\n      ...CurrentBuild2\n    }\n  }\n  ","\n  ","\n"]);return B=function(){return e},e}function G(){var e=(0,_._)(["\n  fragment DeploymentAuthorizations on Repl {\n    id\n    authorizations {\n      createAutoscaleDeployment: createDeployment(provider: cloud_run) {\n        isAuthorized\n        code\n        message\n      }\n      createRvmDeployment: createDeployment(provider: gce) {\n        isAuthorized\n        code\n        message\n      }\n      createScheduledDeployment: createDeployment(provider: cron) {\n        isAuthorized\n        code\n        message\n      }\n      createStaticDeployment: createDeployment(provider: static) {\n        isAuthorized\n        code\n        message\n      }\n      redeployAutoscaleDeployment: redeployDeployment(provider: cloud_run) {\n        isAuthorized\n        code\n        message\n      }\n      redeployRvmDeployment: redeployDeployment(provider: gce) {\n        isAuthorized\n        code\n        message\n      }\n      redeployScheduledDeployment: redeployDeployment(provider: cron) {\n        isAuthorized\n        code\n        message\n      }\n      redeployStaticDeployment: redeployDeployment(provider: static) {\n        isAuthorized\n        code\n        message\n      }\n    }\n  }\n"]);return G=function(){return e},e}function A(){var e=(0,_._)(["\n  fragment DeploymentSessionRepl on Repl {\n    id\n    __typename\n    slug\n    config {\n      isVnc\n    }\n    source {\n      release {\n        repl {\n          title\n        }\n      }\n    }\n    owner {\n      __typename\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        ...DeploymentSessionHostingDeployment\n      }\n      ... on Error {\n        message\n      }\n    }\n    ...DeploymentAuthorizations\n  }\n  ","\n  ","\n"]);return A=function(){return e},e}function P(){var e=(0,_._)(["\n  query DeploymentSession($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentSessionRepl\n      }\n    }\n    currentUser {\n      ...DeploymentSessionCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return P=function(){return e},e}function L(){var e=(0,_._)(["\n  subscription DeploymentSessionBuildDeployActionUpdates(\n    $input: HostingBuildDeployActionUpdatesInput!\n  ) {\n    hostingBuildDeployActionUpdates(input: $input) {\n      ... on HostingBuildDeployLogAction {\n        log\n      }\n      ... on HostingBuildDeployStatusAction {\n        status\n        message\n        debugSummary {\n          ...BuildDebugSummary\n        }\n      }\n    }\n  }\n  ","\n"]);return L=function(){return e},e}function N(){var e=(0,_._)(["\n  mutation DeploymentSessionDeployBuild($input: DeployHostingBuild2Input!) {\n    deployHostingBuild2(input: $input) {\n      ... on DeployHostingBuild2Result {\n        build {\n          ...CurrentBuild2\n        }\n        targetDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return N=function(){return e},e}function O(){var e=(0,_._)(["\n  mutation DeploymentSessionSendDeploymentLifecycleCommand(\n    $input: SendDeploymentLifecycleCommandInput!\n  ) {\n    sendDeploymentLifecycleCommand(input: $input) {\n      ... on SendDeploymentLifecycleCommandResult {\n        repl {\n          id\n          hostingDeployment {\n            ... on HostingDeployment {\n              ...DeploymentSessionHostingDeployment\n            }\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return O=function(){return e},e}function U(){var e=(0,_._)(["\n  mutation DeploymentSessionCancelInProgressDeploymentsBuild(\n    $input: FailHostingBuildInput!\n  ) {\n    failHostingBuild(input: $input) {\n      ... on FailHostingBuildResult {\n        build {\n          ...CurrentBuild2\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return U=function(){return e},e}var M={},X=(0,S.Ps)(I()),F=(0,S.Ps)(B(),k.uC,k.MX),W=(0,S.Ps)(G()),H=(0,S.Ps)(A(),F,W),V=(0,S.Ps)(P(),H,X);function z(e){var t=(0,l._)({},M,e);return T.t(V,t)}var j=(0,S.Ps)(L(),k.Si),q=(0,S.Ps)(N(),k.MX,k.uC),J=(0,S.Ps)(O(),F),Y=(0,S.Ps)(U(),k.MX);function $(){return($=(0,a._)(function(e){var t,n,r,i,o,a,l,c,s,d,f;return(0,u.Jh)(this,function(u){switch(u.label){case 0:if(t=e.command,n=e.replId,r=e.buildId,i=e.machineConfigurationId,o=e.maxMachineInstances,!C.l)throw Error("expected apolloClient to be initialized");return[4,C.l.mutate({mutation:J,variables:{input:{command:t,replId:n,buildId:r,machineConfigurationId:i,maxMachineInstances:o}}})];case 1:if(null===(a=(s=u.sent()).errors)||void 0===a?void 0:a.length)throw Error(s.errors.map(function(e){return e.message}).join(", "));if((null===(c=s.data)||void 0===c?void 0:null===(l=c.sendDeploymentLifecycleCommand)||void 0===l?void 0:l.__typename)!=="SendDeploymentLifecycleCommandResult")throw Error((null===(f=s.data)||void 0===f?void 0:null===(d=f.sendDeploymentLifecycleCommand)||void 0===d?void 0:d.message)||"An unexpected error occurred while sending command. Please try again or contact support.");return[2]}})})).apply(this,arguments)}function K(){return(K=(0,a._)(function(e){var t,n,r,i,o,a,l,c;return(0,u.Jh)(this,function(s){switch(s.label){case 0:if(t=e.buildId,n=e.targetDeploymentId,!C.l)throw Error("expected apolloClient to be initialized");return[4,C.l.mutate({mutation:Y,variables:{input:{buildId:t,targetDeploymentId:n}}})];case 1:if(null===(r=(a=s.sent()).errors)||void 0===r?void 0:r.length)throw Error(a.errors.map(function(e){return e.message}).join(", "));if((null===(o=a.data)||void 0===o?void 0:null===(i=o.failHostingBuild)||void 0===i?void 0:i.__typename)!=="FailHostingBuildResult")throw Error((null===(c=a.data)||void 0===c?void 0:null===(l=c.failHostingBuild)||void 0===l?void 0:l.message)||"An unexpected error occurred while trying to cancel. Please try again or contact support.");return[2]}})})).apply(this,arguments)}var Q=n(45375),ee=n(89885),et=n(88736),en=(0,v.cn)({}),er=(0,v.cn)({}),ei=(0,v.cn)({}),eo=(0,v.cn)({}),ea=(0,v.cn)({});function el(){return(0,Q.Hg)(er)}function ec(){return(0,Q.Hg)(ei)}function es(){return(0,Q.Hg)(eo)}function eu(){return(0,Q.Hg)(ea)}var ed=(0,v.cn)(void 0),ef=(0,v.cn)(void 0);function eh(){return(0,Q.Hg)(ef)}var ep=(0,v.cn)(ee.z.Loading);function em(){return(0,Q.Hg)(ep)}var ev=(0,v.cn)(void 0);function eg(){return(0,Q.Hg)(ev)}var ey=(0,v.cn)(void 0),eb=(0,v.cn)(void 0);function ew(){return(0,Q.Hg)(eb)}var eZ=(0,v.cn)(void 0);function ex(){var e=(0,Q.Hg)(ed),t=(0,Q.Hg)(eZ),n=(0,Q.Hg)(e_),r=(0,Q.$X)(eI),i=(0,Q.$X)(eF),o=(0,s._)(z({fetchPolicy:"no-cache",onCompleted:r,onError:function(e){i(e.message)}}),1)[0],a=function(n){if(!n||!t)return{deploy:{__typename:"ReplAuthorization",isAuthorized:!1,code:p.RO.InsufficientPermissions,message:"Loading"},redeploy:{__typename:"ReplAuthorization",isAuthorized:!1,code:p.RO.InsufficientPermissions,message:"Loading"},isIncludedInSubscription:!1};var r=t.createAutoscaleDeployment,i=t.createRvmDeployment,o=t.createScheduledDeployment,a=t.createStaticDeployment,l=t.redeployAutoscaleDeployment,c=t.redeployRvmDeployment,s=t.redeployScheduledDeployment,u=t.redeployStaticDeployment;switch(n){case p.r4.Static:return{deploy:a,redeploy:u,isIncludedInSubscription:!1};case p.r4.Cron:return{deploy:o,redeploy:s,isIncludedInSubscription:!1};case p.r4.CloudRun:return{deploy:r,redeploy:l,isIncludedInSubscription:!1};case p.r4.Gce:var d,f=i.isAuthorized,h=(null==e?void 0:e.__typename)==="Repl"&&(null===(d=e.owner)||void 0===d?void 0:d.__typename)==="Team";return{deploy:i,redeploy:c,isIncludedInSubscription:f&&h};case p.r4.Extension:case p.r4.Goval:throw Error("Found unexpected provider");default:(0,y.Z)(n)}};return{deployability:a(null==n?void 0:n.provider),getDeployabilityByProvider:a,refetch:function(){if(e)return o({variables:{replId:e.id}})}}}function eC(e){var t,n,r,i,o,a;return!!(i=(t=(0,l._)({},M,{variables:{replId:e}}),r=E.a(V,t)).data,o=r.refetch,{isTeamRepl:(null==(a=(null==i?void 0:i.repl.__typename)==="Repl"?i.repl:null)?void 0:null===(n=a.owner)||void 0===n?void 0:n.__typename)==="Team",refetch:o}).isTeamRepl}var e_=(0,v.cn)(void 0);function eS(){return(0,Q.Hg)(e_)}var ek=(0,v.cn)(void 0);function eE(){return(0,Q.Hg)(ek)}var eT=(0,v.cn)(void 0);function eR(){return(0,Q.Hg)(eT)}var eD=(0,v.cn)(null,function(e,t){t(ev,void 0),t(ey,void 0),t(e_,void 0),t(ek,void 0),t(ep,ee.z.Ready)}),eI=(0,v.cn)(null,function(e,t,n){var r,i="Repl"===n.repl.__typename?n.repl:null,o=(null===(r=n.currentUser)||void 0===r?void 0:r.__typename)==="CurrentUser"?n.currentUser:null;i&&o&&t(eZ,i.authorizations)}),eB=(0,v.cn)(null,function(e,t,n){var r,i,o,a="Repl"===n.repl.__typename?n.repl:null,l=(null===(r=n.currentUser)||void 0===r?void 0:r.__typename)==="CurrentUser"?n.currentUser:null;if(a&&l){t(ed,a),t(ef,l),t(eI,n),t(eb,!!a.config.isVnc);var c=a.hostingDeployment;if(c){if("HostingDeployment"!==c.__typename)return t(eT,"Unexpected hosting deployment typename: ".concat(c.__typename));if(t(ev,c.id),t(e_,c.currentBuild),t(ey,c.replitAppSubdomain||(0,w.Jw)({replSlug:a.slug,username:null===(o=a.owner)||void 0===o?void 0:o.username})),c.inProgressBuild){t(ek,c.inProgressBuild),t(ep,ee.z.Deploying);return}return void t(ep,(0,et.Zx)(c.currentBuild.status))}t(ey,(0,w.Jw)({replSlug:a.slug,username:null===(i=a.owner)||void 0===i?void 0:i.username})),t(ep,ee.z.Ready)}});function eG(){var e=(0,Q.$X)(eB),t=(0,Q.$X)(eF);return(0,s._)(z({fetchPolicy:"no-cache",onCompleted:e,onError:function(e){t(e.message)}}),1)[0]}var eA=(0,v.cn)(null,function(e,t,n){if("HostingBuildDeployStatusAction"===n.__typename){var r=e(ep),i=e(ek),o=e(e_),a=n.status;if(r===ee.z.Deploying){if(!i){t(eF,"No deployment in progress found");return}t(ek,(0,m.Uy)(i,function(e){e.status=a})),a!==p.Fe.Success&&a!==p.Fe.Failed||(t(ek,void 0),a!==p.Fe.Success&&o||t(e_,(0,m.Uy)(i,function(e){e.status=a,e.hasImageTag=i.provider!==p.r4.Static&&a===p.Fe.Success})))}else if(r===ee.z.ProcessingLifecycleCommand){if(!o){t(eF,"No current build found");return}t(e_,(0,m.Uy)(o,function(e){e.status=a}))}t(ep,(0,et.Zx)(a)),n.message&&a===p.Fe.Failed&&t(eF,n.message)}}),eP=(0,v.cn)(null);function eL(){return(0,Q.Hg)(eP)}function eN(e){var t=(0,Q.yL)(eP),n=(0,d.Z)(e);(0,g.useEffect)(function(){return t.subscribe(function(e){e&&n.current(e)})},[t,n])}var eO=(0,v.cn)(function(e){var t,n;switch(e(ep)){case ee.z.Deploying:return null===(t=e(ek))||void 0===t?void 0:t.id;case ee.z.ProcessingLifecycleCommand:return null===(n=e(e_))||void 0===n?void 0:n.id;default:return}}),eU=(0,v.cn)(null,(r=(0,a._)(function(e,t,n){var r;return(0,u.Jh)(this,function(e){return(r=n.data.data)&&(t(eA,r.hostingBuildDeployActionUpdates),t(eP,r.hostingBuildDeployActionUpdates)),[2]})}),function(e,t,n){return r.apply(this,arguments)}));function eM(e){var t,n,r,i,o,a,c;return t=e.replId,n=eG(),r=(0,Q.$X)(eU),i=(0,Q.$X)(eF),(0,g.useEffect)(function(){n({variables:{replId:t}})},[n,t]),a={variables:{input:{buildId:null!=(o=(0,Q.Hg)(eO))?o:""}},skip:!o,onData:r,onError:function(e){i(e.message)}},c=(0,l._)({},M,a),R.m(j,c),null}function eX(){var e=(0,f.Z)(),t=eG(),n=(0,Q.$X)(ep);return(0,g.useCallback)(function(){return n(ee.z.Loading),t({variables:{replId:e}})},[t,n,e])}var eF=(0,v.cn)(null,function(e,t,n){t(eT,n)}),eW=(0,v.cn)(null,function(e,t,n){var r,i=n.deployHostingBuild2;if(i){if("DeployHostingBuild2Result"!==i.__typename){t(eF,i.message);return}t(ek,i.build),t(ev,i.targetDeployment.id),t(ey,null!==(r=i.targetDeployment.replitAppSubdomain)&&void 0!==r?r:void 0),t(ep,ee.z.Deploying)}});function eH(e){var t=e.provider,n=e.ignorePorts;switch(t){case p.r4.Static:return p.Vp.Static;case p.r4.CloudRun:return p.Vp.CloudRun;case p.r4.Cron:return p.Vp.Cron;default:return n?p.Vp.Worker:p.Vp.Server}}function eV(){var e,t,n=(0,f.Z)(),r=eg(),i=es(),o=(0,Q.Hg)(en),c=el(),d=(0,s._)((e=(0,l._)({},M,void 0),D.D(q,e)),1)[0],m=(0,Q.$X)(eW),v=(0,Q.$X)(eF),C=(0,Q.$X)(ep),_=(0,Q.XD)(ek),S=eS();return{deployBuild:(0,g.useCallback)((t=(0,a._)(function(e){var t,a,l,s,f,g,k,E,T,R,D,I,B,G;return(0,u.Jh)(this,function(u){switch(u.label){case 0:if(t=e.envVars,a=e.subdomain,l=e.machineConfigurationId,s=e.maxMachineInstances,f=e.config,g=e.machineJob,_())return v("Deployment already in progress"),[2];u.label=1;case 1:if(u.trys.push([1,5,,6]),k=f.buildCommand,E=f.runCommand,T=f.publicDir,R=f.ignorePorts,!(D=S?eH({provider:null==S?void 0:S.provider,ignorePorts:!!R}):f.appType))throw new x.P3;if(!a)throw new x.Q5;switch(D){case p.Vp.Static:if(!(0,w.Ar)(T))throw new x.SF;break;case p.Vp.Worker:case p.Vp.Server:case p.Vp.CloudRun:case p.Vp.Cron:if(!(0,w.Ar)(E))throw new x.ZG;if(D===p.Vp.Cron){if(!(null==g?void 0:g.crontab)||""===g.crontab)throw new x.Bz("Schedule cannot be empty.");if(!(0,h.isValidCron)(g.crontab))throw new x.Bz("Invalid schedule. Must be a valid cron expression.");if(!(null==g?void 0:g.timezone)||""===g.timezone)throw new x.Iy("Timezone cannot be empty.");if(!(0,b.lb)(g.timezone))throw new x.Iy("Invalid timezone. Must be valid a timezone abbreviation.")}break;default:(0,y.Z)(D)}return C(ee.z.Preparing),[4,(0,Z.$f)(i)];case 2:return I=u.sent(),[4,(0,Z.OD)({buildCommand:k,runCommand:E,appType:D,publicDir:T,ignorePorts:R},I,{dotReplit:i,fs:c,container:o})];case 3:return u.sent(),B=(0,et.oU)(D),[4,d({variables:{input:{replId:n,targetDeploymentId:r,targetMachineConfigurationId:l,maxMachineInstances:s,commands:{build:k,run:E||""},envVars:t,subdomain:a,provider:B,appType:D,context:"workspace",machineJob:g}},onCompleted:m})];case 4:return u.sent(),[3,6];case 5:throw G=u.sent(),C(ee.z.Ready),G;case 6:return[2]}})}),function(e){return t.apply(this,arguments)}),[d,m,v,C,_,r,n,o,c,i,S]),redeployWithNoNewOptions:(0,g.useCallback)((0,a._)(function(){var e,t,o,a,l,c,s;return(0,u.Jh)(this,function(u){switch(u.label){case 0:if(_())return v("Deployment already in progress"),[2];u.label=1;case 1:return u.trys.push([1,4,,5]),C(ee.z.Preparing),[4,(0,Z.$f)(i)];case 2:if(t=(e=u.sent()).buildCommand,o=e.runCommand,a=e.publicDir,l=e.ignorePorts,!r)throw new x.wQ;if(!S)throw new x.ZH;if(!(c=eH({provider:S.provider,ignorePorts:!!l})))throw new x.P3;switch(c){case p.Vp.Static:if(!(0,w.Ar)(a))throw new x.SF;break;case p.Vp.Worker:case p.Vp.Server:case p.Vp.CloudRun:case p.Vp.Cron:if(!(0,w.Ar)(o))throw new x.ZG;break;default:(0,y.Z)(c)}return[4,d({variables:{input:{replId:n,targetDeploymentId:r,commands:{build:t,run:o||""},provider:(0,et.oU)(c),appType:c,context:"workspace"}},onCompleted:m})];case 3:return u.sent(),[3,5];case 4:throw s=u.sent(),C(ee.z.Ready),s;case 5:return[2]}})}),[d,m,v,C,_,r,n,i,S])}}var ez=(0,v.cn)(null,(i=(0,a._)(function(e,t,n){var r,i,o,a,s,d,f,h;return(0,u.Jh)(this,function(u){switch(u.label){case 0:if(r=n.args,i=n.replId,o=void 0,(a=r.command)===p.Qc.UpdateMachineConfiguration){if(!(s=e(e_)))return t(eF,"No current build found"),[2];if(!r.machineConfigurationId)return t(eF,"No machine configuration found"),[2];(d=(0,et.Ti)(a))&&(t(e_,(0,m.Uy)(s,function(e){e.status=d})),t(ep,(0,et.Zx)(d)))}if(a===p.Qc.Resume||a===p.Qc.Suspend){if(!(f=e(e_)))return t(eF,"No current build found"),[2];o=f.id,(h=(0,et.Ti)(a))&&(t(e_,(0,m.Uy)(f,function(e){e.status=h})),t(ep,(0,et.Zx)(h)))}u.label=1;case 1:return u.trys.push([1,3,,4]),[4,function(e){return $.apply(this,arguments)}((0,c._)((0,l._)({},r),{buildId:o,replId:i}))];case 2:return u.sent(),a===p.Qc.Destroy&&t(eD),[3,4];case 3:return t(eF,u.sent().message),[3,4];case 4:return[2]}})}),function(e,t,n){return i.apply(this,arguments)}));function ej(){var e,t=(0,f.Z)(),n=(0,Q.$X)(ez);return(0,g.useCallback)((e=(0,a._)(function(e){return(0,u.Jh)(this,function(r){switch(r.label){case 0:return[4,n({replId:t,args:e})];case 1:return r.sent(),[2]}})}),function(t){return e.apply(this,arguments)}),[n,t])}var eq=(0,v.cn)(null,(o=(0,a._)(function(e,t){var n,r,i;return(0,u.Jh)(this,function(o){switch(o.label){case 0:if(!(n=e(ev)))return t(eF,"No deployment found"),[2];if(!(r=e(ek)))return t(eF,"No deployment in progress found"),[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,function(e){return K.apply(this,arguments)}({buildId:r.id,targetDeploymentId:n})];case 2:return o.sent(),[3,4];case 3:return t(eF,o.sent().message),[2];case 4:if(t(ek,void 0),t(ep,ee.z.Ready),(i=e(e_))&&(i.status===p.Fe.Success||i.status===p.Fe.Failed))return[2];return t(e_,(0,m.Uy)(r,function(e){e.status=p.Fe.Failed})),[2]}})}),function(e,t){return o.apply(this,arguments)}));function eJ(){return(0,Q.$X)(eq)}},45375:function(e,t,n){n.d(t,{$X:function(){return d},Hg:function(){return s},XD:function(){return f},aT:function(){return l},yL:function(){return u}});var r=n(30660),i=n(22750),o=n(79122),a=n(50959),l=(0,a.createContext)(null);function c(){var e=(0,a.useContext)(l);if(!e)throw Error("Expected store in context");return e}function s(e){return(0,i.Dv)(e,{store:c()})}function u(e){return(0,r.b)(e,c())}var d=function(e){return(0,i.b9)(e,{store:c()})};function f(e){return(0,o.lV)((0,a.useCallback)(function(t){return t(e)},[e]),{store:c()})}},24336:function(e,t,n){n.d(t,{Qm:function(){return s},fG:function(){return u},G8:function(){return p},lV:function(){return h},KU:function(){return m},Lv:function(){return d},lt:function(){return f}});var r=n(4216),i=n(77450),o=n(94778),a=n(59797),l=n(72093),c=(0,i.iv)({filter:"drop-shadow(0px 2px 6px rgba(0, 0, 0, 0.15))"});function s(e){var t=e.height,n=void 0===t?44:t;return(0,r.BX)("svg",{width:56*n/44,height:n,viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:c,children:[(0,r.tZ)("path",{d:"M7 42.2858L8 32.6684H14L15 42.2858H24L26 27.1837H32L34 42.2858H43L45 21.699H52L55 3.71436H56V43.0001H1V42.2858H7Z",fill:"url(#paint0_linear_3629_241)"}),(0,r.tZ)("path",{d:"M55 3.71436L52 21.699H45L43 42.2858H34L32 27.1837H26L24 42.2858H15L14 32.6684H8L7 42.2858H1",stroke:"#57ABFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("defs",{children:(0,r.BX)("linearGradient",{id:"paint0_linear_3629_241",x1:"28.5",y1:"3.71436",x2:"28.5",y2:"43.0001",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{stopColor:"#0079F2"}),(0,r.tZ)("stop",{offset:"0.395833",stopColor:"#0079F2"}),(0,r.tZ)("stop",{offset:"0.958333",stopColor:"#0079F2",stopOpacity:"0"})]})})]})}function u(){return(0,r.BX)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:c,children:[(0,r.BX)("g",{clipPath:"url(#clip0_3629_246)",children:[(0,r.tZ)("rect",{x:"0.5",y:"9.5",width:"55",height:"19",rx:"5.5",fill:"#2B3245"}),(0,r.tZ)("g",{filter:"url(#filter0_dii_3629_246)",children:(0,r.tZ)("path",{d:"M3 15C3 13.3431 4.34315 12 6 12H20C20.5523 12 21 12.4477 21 13V25C21 25.5523 20.5523 26 20 26H6C4.34315 26 3 24.6569 3 23V15Z",fill:"#0079F2"})}),(0,r.tZ)("g",{filter:"url(#filter1_dii_3629_246)",children:(0,r.tZ)("rect",{x:"23",y:"12",width:"12",height:"14",rx:"1",fill:"#0079F2"})}),(0,r.tZ)("g",{filter:"url(#filter2_dii_3629_246)",children:(0,r.tZ)("rect",{x:"37",y:"12",width:"8",height:"14",rx:"1",fill:"#0079F2"})}),(0,r.tZ)("rect",{x:"0.5",y:"9.5",width:"55",height:"19",rx:"5.5",stroke:"#3C445C"})]}),(0,r.BX)("defs",{children:[(0,r.BX)("filter",{id:"filter0_dii_3629_246",x:"-3",y:"6",width:"30",height:"26",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"3"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.341176 0 0 0 0 0.670588 0 0 0 0 1 0 0 0 0.5 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_246"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_246",result:"shape"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect2_innerShadow_3629_246"}),(0,r.tZ)("feOffset",{dy:"-2"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_3629_246"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect3_innerShadow_3629_246"}),(0,r.tZ)("feOffset",{dy:"2"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"effect2_innerShadow_3629_246",result:"effect3_innerShadow_3629_246"})]}),(0,r.BX)("filter",{id:"filter1_dii_3629_246",x:"17",y:"6",width:"24",height:"26",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"3"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.341176 0 0 0 0 0.670588 0 0 0 0 1 0 0 0 0.5 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_246"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_246",result:"shape"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect2_innerShadow_3629_246"}),(0,r.tZ)("feOffset",{dy:"-2"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_3629_246"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect3_innerShadow_3629_246"}),(0,r.tZ)("feOffset",{dy:"2"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"effect2_innerShadow_3629_246",result:"effect3_innerShadow_3629_246"})]}),(0,r.BX)("filter",{id:"filter2_dii_3629_246",x:"31",y:"6",width:"20",height:"26",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"3"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.341176 0 0 0 0 0.670588 0 0 0 0 1 0 0 0 0.5 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_246"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_246",result:"shape"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect2_innerShadow_3629_246"}),(0,r.tZ)("feOffset",{dy:"-2"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_3629_246"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect3_innerShadow_3629_246"}),(0,r.tZ)("feOffset",{dy:"2"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"effect2_innerShadow_3629_246",result:"effect3_innerShadow_3629_246"})]}),(0,r.tZ)("clipPath",{id:"clip0_3629_246",children:(0,r.tZ)("rect",{width:"56",height:"44",fill:"white"})})]})]})}function d(e){var t=e.height,n=void 0===t?44:t;return(0,r.BX)("svg",{width:56*n/44,height:n,viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:c,children:[(0,r.tZ)("path",{d:"M1 42H55",stroke:"#57ABFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("g",{filter:"url(#filter0_d_3629_304)",children:(0,r.tZ)("path",{d:"M21 11L35 25M38 18C38 23.5228 33.5228 28 28 28C22.4772 28 18 23.5228 18 18C18 12.4772 22.4772 8 28 8C33.5228 8 38 12.4772 38 18Z",stroke:"#0053A6",strokeWidth:"2"})}),(0,r.tZ)("defs",{children:(0,r.BX)("filter",{id:"filter0_d_3629_304",x:"9",y:"3",width:"38",height:"38",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{dy:"4"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"4"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0.32549 0 0 0 0 0.65098 0 0 0 0.5 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_304"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_304",result:"shape"})]})})]})}function f(){return(0,r.BX)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:c,children:[(0,r.tZ)("circle",{cx:"28",cy:"22",r:"13",fill:"#0053A6"}),(0,r.tZ)("path",{d:"M28 9C30.2851 9 32.5297 9.6023 34.5079 10.7462L28 22L28 9Z",fill:"#0079F2"}),(0,r.tZ)("circle",{cx:"28",cy:"22",r:"10.5",stroke:"#57ABFF",strokeDasharray:"1 4"}),(0,r.tZ)("g",{filter:"url(#filter0_d_3629_309)",children:(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M28 36.3334C35.9161 36.3334 42.3333 29.9162 42.3333 22.0001C42.3333 15.1129 37.4759 9.36028 31 7.98119V6C31 5 30 4 29 4H27C26 4 25 5 25 6V7.9812C18.5241 9.36029 13.6667 15.1129 13.6667 22.0001C13.6667 29.9162 20.0839 36.3334 28 36.3334ZM15.6667 22.0001C15.6667 15.1886 21.1885 9.66675 28 9.66675C34.8115 9.66675 40.3333 15.1886 40.3333 22.0001C40.3333 28.8116 34.8115 34.3334 28 34.3334C21.1885 34.3334 15.6667 28.8116 15.6667 22.0001Z",fill:"#0079F2"})}),(0,r.tZ)("g",{filter:"url(#filter1_d_3629_309)",children:(0,r.tZ)("path",{d:"M28 12V22L33 13.3",stroke:"#B2D9FF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,r.BX)("defs",{children:[(0,r.BX)("filter",{id:"filter0_d_3629_309",x:"11.6667",y:"3",width:"32.6667",height:"36.3335",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{dy:"1"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_309"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_309",result:"shape"})]}),(0,r.BX)("filter",{id:"filter1_d_3629_309",x:"25.25",y:"10.25",width:"10.5001",height:"15.5",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{dy:"1"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_309"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_309",result:"shape"})]})]})]})}function h(e){var t=e.height,n=void 0===t?44:t;return(0,r.BX)("svg",{width:56*n/44,height:n,viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:c,children:[(0,r.tZ)("path",{d:"M0 37V6H14.5L16 9L17.5 6H37.5L39 8L40.5 6H56V37H0Z",fill:"url(#paint0_linear_3629_271)"}),(0,r.tZ)("path",{d:"M1 6H14.5L16 9L17.5 6H37.5L39 8L40.5 6H55",stroke:"#57ABFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("defs",{children:(0,r.BX)("linearGradient",{id:"paint0_linear_3629_271",x1:"28",y1:"6",x2:"28",y2:"37",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{stopColor:"#0079F2",stopOpacity:"0.7"}),(0,r.tZ)("stop",{offset:"0.958333",stopColor:"#0079F2",stopOpacity:"0"})]})})]})}function p(){return(0,r.BX)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:c,children:[(0,r.tZ)("path",{d:"M16 8C16 6.89543 16.8954 6 18 6H37C38.1046 6 39 6.89543 39 8V13H16V8Z",fill:"#0053A6"}),(0,r.tZ)("path",{d:"M16 14H39V27C39 28.1046 38.1046 29 37 29H18C16.8954 29 16 28.1046 16 27V14Z",fill:"#0053A6"}),(0,r.tZ)("g",{filter:"url(#filter0_d_3629_276)",children:(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.1667 1.6665C22.719 1.6665 23.1667 2.11422 23.1667 2.6665V4.33317H31.8333V2.6665C31.8333 2.11422 32.281 1.6665 32.8333 1.6665C33.3856 1.6665 33.8333 2.11422 33.8333 2.6665V4.33317H36.8333C38.8584 4.33317 40.5 5.97479 40.5 7.99984V26.6665C40.5 28.6915 38.8584 30.3332 36.8333 30.3332H18.1667C16.1416 30.3332 14.5 28.6915 14.5 26.6665V7.99984C14.5 5.97479 16.1416 4.33317 18.1667 4.33317H21.1667V2.6665C21.1667 2.11422 21.6144 1.6665 22.1667 1.6665ZM21.1667 6.33317H18.1667C17.2462 6.33317 16.5 7.07936 16.5 7.99984V12.3332H38.5V7.99984C38.5 7.07936 37.7538 6.33317 36.8333 6.33317H33.8333V7.99984C33.8333 8.55212 33.3856 8.99984 32.8333 8.99984C32.281 8.99984 31.8333 8.55212 31.8333 7.99984V6.33317H23.1667V7.99984C23.1667 8.55212 22.719 8.99984 22.1667 8.99984C21.6144 8.99984 21.1667 8.55212 21.1667 7.99984V6.33317ZM38.5 14.3332H16.5V26.6665C16.5 27.587 17.2462 28.3332 18.1667 28.3332H36.8333C37.7538 28.3332 38.5 27.587 38.5 26.6665V14.3332Z",fill:"#57ABFF"})}),(0,r.BX)("g",{filter:"url(#filter1_d_3629_276)",children:[(0,r.tZ)("path",{d:"M43.0779 26.019C42.2616 23.6789 40.0353 22 37.4169 22C35.7617 22 34.2632 22.6709 33.1785 23.7556L30.2721 26.662M30.2721 26.662V22.666M30.2721 26.662H34.2667",stroke:"#B2D9FF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M31.7706 29.9688C32.5869 32.3089 34.8132 33.9878 37.4316 33.9878C39.0868 33.9878 40.5853 33.3169 41.67 32.2322L44.5764 29.3258M44.5764 29.3258L44.5764 33.3218M44.5764 29.3258L40.5818 29.3258",stroke:"#B2D9FF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,r.BX)("defs",{children:[(0,r.BX)("filter",{id:"filter0_d_3629_276",x:"12.5",y:"0.666504",width:"30",height:"32.6665",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{dy:"1"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_276"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_276",result:"shape"})]}),(0,r.BX)("filter",{id:"filter1_d_3629_276",x:"27.5221",y:"20.25",width:"19.8043",height:"17.4878",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{dy:"1"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_276"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_276",result:"shape"})]})]})]})}function m(){return(0,r.tZ)(o.G,{css:[l.l0.py(6),l.l0.px(12),l.l0.color.accentPrimaryStronger],children:(0,r.tZ)(a.Z,{size:32})})}},41365:function(e,t,n){n.d(t,{Gs:function(){return f},Qw:function(){return d},ZP:function(){return p},un:function(){return h}});var r=n(41733),i=n(66626),o=n(4216),a=n(77450),l=n(94778),c=n(49224),s=n(50959),u=n(36855),d=(0,c.X)({maxWidth:{width:"100%",maxWidth:600,marginLeft:"auto",marginRight:"auto"}}),f=function(e,t){return(0,a.F4)("\n  0% {\n    opacity: 0;\n    height: ".concat((null==t?void 0:t.from)?t.from:0,"px;\n  }\n  99% {\n    opacity: 1;\n    height: ").concat(e,"px;\n  }\n  ").concat((null==t?void 0:t.noAuto)?"100% {\n        opacity: 1;\n        height: ".concat(e,"px;\n      }"):"100% {\n    height: auto;\n  }","\n"))};function h(e){var t=e.children,n=e.render,i=e.timeout,a=void 0===i?300:i,c=e.initialHeight,d=(0,s.useRef)(null),f=(0,s.useRef)(null),h=p(f),m=h>0?h:c,v={transition:a+"ms ease-out",transitionProperty:"height, opacity",opacity:0,height:0,visibility:"hidden"},g={entering:{opacity:1,height:m},entered:{transitionProperty:"opacity",opacity:1,height:m,visibility:"visible"},exiting:{opacity:0,height:0,visibility:"visible"},exited:{opacity:0,height:0,visibility:"hidden"}};return(0,o.tZ)(u.ZP,{nodeRef:d,timeout:a,in:n,children:function(e){return(0,o.tZ)(l.G,{innerRef:d,style:(0,r._)({},v,g[e]),children:(0,o.tZ)(l.G,{innerRef:f,children:t})})}})}function p(e){var t=(0,i._)((0,s.useState)(0),2),n=t[0],r=t[1];return(0,s.useEffect)(function(){if(e.current){var t=new ResizeObserver(function(e){var t=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value.borderBoxSize[0].blockSize;r(l)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}});return t.observe(e.current),function(){return t.disconnect()}}},[n,e]),n}},94932:function(e,t,n){var r,i,o,a;n.d(t,{a:function(){return i},k:function(){return r}}),(o=r||(r={})).Intro="intro",o.Deployment="deployment",o.DeploymentInProgress="deployment_in_progress",o.Analytics="analytics",o.Logs="logs",o.Settings="settings",o.Schedule="schedule",o.ResourceMonitoring="resource_monitoring",o.ReservedVMTierSelection="reserved_vm_tier_selection",o.AutoscaleMachineConfiguration="autoscale_machine_configuration",(a=i||(i={})).SendDeploymentLifecycleCommand="send_deployment_lifecycle_command",a.ChangeView="change_view",a.OpenPane="open_pane"},50372:function(e,t,n){n.d(t,{B:function(){return f},V:function(){return d}});var r,i=n(42516),o=n(4216),a=n(92804),l=n(72883),c=n(87128),s=n(72093),u=n(85438),d=(r={},(0,i._)(r,u.Fe.Suspended,{title:"Paused",color:s.TV.greyDefault,colorway:"grey",icon:(0,o.tZ)(a.Z,{})}),(0,i._)(r,u.Fe.UpdatingTier,{title:"Updating tier",color:s.TV.orangeStronger,colorway:"orange",icon:(0,o.tZ)(l.Z,{})}),(0,i._)(r,u.Fe.Suspending,{title:"Pausing",color:s.TV.orangeStronger,colorway:"orange",icon:(0,o.tZ)(l.Z,{})}),(0,i._)(r,u.Fe.Resuming,{title:"Resuming",color:s.TV.orangeStronger,colorway:"orange",icon:(0,o.tZ)(l.Z,{})}),(0,i._)(r,u.Fe.Pending,{title:"Provisioning",color:s.TV.orangeStronger,colorway:"orange",icon:(0,o.tZ)(l.Z,{})}),(0,i._)(r,u.Fe.Building,{title:"Building",color:s.TV.orangeStronger,colorway:"orange",icon:(0,o.tZ)(l.Z,{})}),(0,i._)(r,u.Fe.Running,{title:"Bundling",color:s.TV.orangeStronger,colorway:"orange",icon:(0,o.tZ)(l.Z,{})}),(0,i._)(r,u.Fe.Promoting,{title:"Promoting",color:s.TV.orangeStronger,colorway:"orange",icon:(0,o.tZ)(l.Z,{})}),(0,i._)(r,u.Fe.Failed,{title:"Failed",color:s.TV.accentNegativeDefault,colorway:"negative",icon:(0,o.tZ)(c.Z,{})}),(0,i._)(r,u.Fe.Success,{title:"Deployed",color:s.TV.accentPositiveDefault,colorway:"positive"}),r);function f(e){switch(e){case u.Fe.Building:case u.Fe.Promoting:case u.Fe.Running:case u.Fe.Pending:return"is deploying";case u.Fe.Resuming:return"is resuming";case u.Fe.Suspending:return"is pausing";case u.Fe.Failed:return"failed to deploy";case u.Fe.Success:return"deployed";case u.Fe.Suspended:return"paused";case u.Fe.UpdatingTier:return"is updating tier"}}},15432:function(e,t,n){n.d(t,{Si:function(){return v},MX:function(){return Z},r5:function(){return C},bN:function(){return w},uC:function(){return b}});var r=n(21262),i=n(71440),o=n(23409);function a(){var e=(0,r._)(["\n  fragment DeploymentLink on HostingDeployment {\n    id\n    replitAppSubdomain\n    domains {\n      id\n      domain\n      state\n    }\n  }\n"]);return a=function(){return e},e}var l=(0,i.Ps)(a());function c(){var e=(0,r._)(["\n  fragment BuildDebugSummary on HostingDebugSummary {\n    id\n    sessionId\n    eventId\n  }\n"]);return c=function(){return e},e}function s(){var e=(0,r._)(["\n  fragment ReplDomain2 on Domain {\n    hosting_deployment_id\n    domain\n    state\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,r._)(["\n  fragment CustomDomain on Domain {\n    ...ReplDomain2\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,r._)(["\n  fragment TargetHostingDeployment on HostingDeployment {\n    id\n    replitAppSubdomain\n  }\n"]);return d=function(){return e},e}function f(){var e=(0,r._)(["\n  fragment MachineConfiguration on HostingMachineConfiguration {\n    id\n    label\n    vcpu\n    memory\n    slug\n  }\n"]);return f=function(){return e},e}function h(){var e=(0,r._)(["\n  fragment CurrentBuild2 on HostingBuild {\n    id\n    description\n    status\n    hasDeployLogs\n    timeCreated\n    hasImageTag\n    envVars {\n      name\n      value\n    }\n    debugSummary {\n      ...BuildDebugSummary\n    }\n    repl {\n      id\n      slug\n      apexProxy\n      domains {\n        ... on Domain {\n          ...CustomDomain\n        }\n      }\n      owner {\n        ... on Team {\n          id\n          username\n        }\n        ... on User {\n          id\n          username\n        }\n      }\n      hostingDeployment {\n        ... on HostingDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n    }\n    provider\n    machineConfiguration {\n      ...MachineConfiguration\n    }\n    maxMachineInstances\n    machineJob {\n      timezone\n      crontab\n    }\n    user {\n      id\n      displayName\n      username\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return h=function(){return e},e}function p(){var e=(0,r._)(["\n  fragment DeploymentStatus on HostingDeployment {\n    id\n    currentBuild {\n      id\n      status\n      timeCreated\n      user {\n        id\n        displayName\n      }\n      provider\n    }\n    inProgressBuild {\n      id\n    }\n    latestBuildStatus\n  }\n"]);return p=function(){return e},e}function m(){var e=(0,r._)(["\n  fragment DeploymentItem on HostingDeployment {\n    id\n    replitAppSubdomain\n    domains {\n      id\n      domain\n      state\n    }\n    repl {\n      id\n      title\n      iconUrl\n      ...ReplLinkRepl\n    }\n    ...DeploymentLink\n    ...DeploymentStatus\n  }\n  ","\n  ","\n  ","\n"]);return m=function(){return e},e}var v=(0,i.Ps)(c()),g=(0,i.Ps)(s()),y=(0,i.Ps)(u(),g),b=(0,i.Ps)(d()),w=(0,i.Ps)(f()),Z=(0,i.Ps)(h(),v,y,b,w),x=(0,i.Ps)(p()),C=(0,i.Ps)(m(),o.Y,l,x)},8260:function(e,t,n){n.d(t,{E:function(){return r},c:function(){return i}});var r="Procfile";function i(e){var t={};return e.split("\n").forEach(function(e){if(""!==e){var n=e.match(/^([A-Za-z0-9_]+):\s*(.+)$/);if(n){var r=n[2].trim().split(" ");t[n[1]]={command:r[0],options:r.slice(1)}}}}),t}},39064:function(e,t,n){n.d(t,{EC:function(){return v},U4:function(){return f}});var r=n(41733),i=n(21262),o=n(71440),a=n(99165);function l(){var e=(0,i._)(["\n  fragment MultiplayerUser on User {\n    id\n    image\n    username\n    url\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i._)(["\n  fragment MultiplayerRepl on Repl {\n    id\n    collaborators {\n      user {\n        ...MultiplayerUser\n      }\n    }\n    multiplayerInvites {\n      email\n      type\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function s(){var e=(0,i._)(["\n  fragment MultiplayerReplInvite on MultiplayerInvite {\n    email\n    repl {\n      ...MultiplayerRepl\n    }\n    invitePermissionType: type\n  }\n  ","\n"]);return s=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation AddOrInviteReplMultiplayer(\n    $input: AddOrInviteReplMultiplayerInput!\n  ) {\n    addOrInviteReplMultiplayer(input: $input) {\n      __typename\n      ... on AddOrInviteReplMultiplayerOuput {\n        result {\n          ... on MultiplayerInvite {\n            ...MultiplayerReplInvite\n          }\n          ... on ReplPermission {\n            id\n            repl {\n              ...MultiplayerRepl\n            }\n            user {\n              ...MultiplayerUser\n            }\n            replPermissionType: type\n          }\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return u=function(){return e},e}var d={},f=(0,o.Ps)(l()),h=(0,o.Ps)(c(),f),p=(0,o.Ps)(s(),h),m=(0,o.Ps)(u(),p,h,f);function v(e){var t=(0,r._)({},d,e);return a.D(m,t)}},37053:function(e,t,n){var r=n(66626),i=n(43182),o=n(39064),a=n(69170),l=n(60305),c=n(85438),s=n(25150);t.Z=function(e){var t=e.isMobileApp,n=e.isTeam,u=e.handleUpgradeTriggered,d=e.replId,f=(0,a.Z)(),h=f.showConfirm,p=f.showError,m=function(e,t){i.n_({message:t}),i.Tb(Error(e.message)),p("Something unexpected happened, please try again.")},v=(0,r._)((0,o.EC)({onError:function(e){return m(e,"useAddOrInviteReplMultiplayerMutation")},onCompleted:function(e){var r,i,o,a=e.addOrInviteReplMultiplayer;switch(a.__typename){case"NotFoundError":case"UnauthorizedError":p(a.message);return;case"UserError":if(a.message.includes("reached the limit")){if(t&&!n){p("You have reached the invite limit for a free account. Please upgrade to add more collaborators.");return}if(!t&&u){u(!0);return}}p(a.message);return;case"AddOrInviteReplMultiplayerOuput":"MultiplayerInvite"===a.result.__typename?(r=c.ml.Email,i=a.result.email):(r=c.ml.Username,i=(null===(o=a.result.user)||void 0===o?void 0:o.username)?"@".concat(a.result.user.username):"user")}(0,l.j)(s.U3.MULTIPLAYER_INVITED,{replId:d,inviteMethod:r}),h("Added ".concat(i))}}),2);return{addOrInviteReplMultiplayer:v[0],loadingAddMutation:v[1].loading}}},28606:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(31417),i=n(27387),o=n(66626),a=n(96583),l=n(53594),c=n(59786),s=n(81199),u=n(45929);function d(){var e,t=(0,s.Z)().runner,n=(0,c.P5)({controlName:"flag-porygon-button",logFlagToAnalytics:!1});(0,l.C)((e=(0,i._)(function(e,i){var l,c,s,d,f,h,p,m,v,g,y,b;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(l=i.addCleanup,!n)return[2];return[4,e.agentToolRun.workspace.stream({})];case 1:s=(c=o._.apply(void 0,[a.sent(),3]))[0],d=c[1],f=c[2],l(f),h=!1,p=!1,a.label=2;case 2:a.trys.push([2,8,9,14]),v=(0,r._)(d),a.label=3;case 3:return[4,v.next()];case 4:if(!(h=!(g=a.sent()).done))return[3,7];if(!(y=g.value).ok||"run"!==y.payload.$kind)return[3,6];return t.getRunState()===u.Ah.RUNNING&&t.stopRun(),[4,t.run()];case 5:a.sent(),s.push({$kind:"ok"}),a.label=6;case 6:return h=!1,[3,3];case 7:return[3,14];case 8:return b=a.sent(),p=!0,m=b,[3,14];case 9:if(a.trys.push([9,,12,13]),!(h&&null!=v.return))return[3,11];return[4,v.return()];case 10:a.sent(),a.label=11;case 11:return[3,13];case 12:if(p)throw m;return[7];case 13:return[7];case 14:return[2]}})}),function(t,n){return e.apply(this,arguments)}),[n,t])}},55055:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(50959);function i(){return(0,r.useMemo)(function(){return function(){if("undefined"==typeof document)return!1;var e=document.createElement("input");return"webkitdirectory"in e||"mozdirectory"in e||"msdirectory"in e||"odirectory"in e||"directory"in e}()},[])}},12945:function(e,t,n){var r=n(50959);t.Z=function(e,t,n){(0,r.useEffect)(function(){var t=setTimeout(e,n);return function(){clearTimeout(t)}},t)}},9413:function(e,t,n){n.d(t,{v:function(){return d}});var r=n(41733),i=n(21262),o=n(71440),a=n(58995);function l(){var e=(0,i._)(["\n  query ReplTeamOrgSettings($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          __typename\n          ... on Team {\n            id\n            organization {\n              id\n              isAiEnabled\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},s=(0,o.Ps)(l()),u=n(39271);function d(){var e,t,n,i,o=(n={variables:{replId:(0,u.Z)()}},i=(0,r._)({},c,n),a.a(s,i)).data;return{isTeamWithAiDisabled:(null==o?void 0:o.repl.__typename)==="Repl"&&(null===(e=o.repl.owner)||void 0===e?void 0:e.__typename)==="Team"&&(null===(t=o.repl.owner.organization)||void 0===t?void 0:t.isAiEnabled)===!1}}},92468:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(66626),i=n(75958),o=n(50959);function a(e,t){var n=(0,r._)((0,o.useState)(function(){var n;return null!==(n=i.Z.get(e))&&void 0!==n?n:t}),2),a=n[0],l=n[1];return(0,o.useEffect)(function(){i.Z.set(e,a)},[e,a]),[a,l]}},12789:function(e,t,n){n.d(t,{_:function(){return c}});var r=n(27387),i=n(96583),o=n(36556),a=n(81199),l=n(46298);function c(){var e=(0,a.Z)().toolchain;function t(){return(t=(0,r._)(function(t){return(0,i.Jh)(this,function(n){return[2,e.setModuleConfig(t)]})})).apply(this,arguments)}function n(){return(n=(0,r._)(function(t){return(0,i.Jh)(this,function(n){switch(n.label){case 0:return[4,e.addModule(t).catch(function(e){o.kg.error("Toolchain: failed to add Nix module: "+e.message)})];case 1:return n.sent(),[2]}})})).apply(this,arguments)}function c(){return(c=(0,r._)(function(t){return(0,i.Jh)(this,function(n){switch(n.label){case 0:return[4,e.removeModule(t).catch(function(e){o.kg.error("Toolchain: failed to remove Nix module: "+e.message)})];case 1:return n.sent(),[2]}})})).apply(this,arguments)}function s(){return(s=(0,r._)(function(t,n){return(0,i.Jh)(this,function(r){switch(r.label){case 0:return[4,e.upgradeModule(t,n).catch(function(e){o.kg.error("Toolchain: failed to upgrade Nix module: "+e.message)})];case 1:return r.sent(),[2]}})})).apply(this,arguments)}return{modules:(0,l.Z)(e.modules),configs:(0,l.Z)(e.configs),moduleConfig:(0,l.Z)(e.moduleConfig),setModuleConfig:function(e){return t.apply(this,arguments)},addModule:function(e){return n.apply(this,arguments)},removeModule:function(e){return c.apply(this,arguments)},upgradeModule:function(e,t){return s.apply(this,arguments)}}}},99036:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(66626),i=n(84806),o=n(81199),a=n(50959),l=n(39171),c=n(41733),s=n(21262),u=n(71440),d=n(99165);function f(){var e=(0,s._)(["\n  mutation ReplFsUpdated($replId: String!) {\n    updateReplTimeUpdated(id: $replId) {\n      ... on Repl {\n        id\n        timeUpdated\n      }\n    }\n  }\n"]);return f=function(){return e},e}var h={},p=(0,u.Ps)(f());function m(){var e,t=(0,r._)((e=(0,c._)({},h,void 0),d.D(p,e)),1)[0],n=(0,o.Z)().fs,s=(0,i.Z)(),u=null==s?void 0:s.authorizations.editFileContents.isAuthorized,f=null==s?void 0:s.id;(0,a.useEffect)(function(){if(u&&f){var e=(0,l.Z)(function(){return t({variables:{replId:f}})},{wait:6e4,maxWait:6e5}),r=n.onStatusChange(function(){e()});return function(){e.isScheduled()&&e.flush(),r()}}},[n,f,u,t])}},91175:function(e,t,n){n.d(t,{T:function(){return o}});var r=n(69407),i=n(50959);function o(){var e=(0,i.useContext)(r.Z);if(!e)throw Error("Expected Repl info to be in context");return"html"===e.language}},43816:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(66626),i=n(63257),o=n(14872),a=n(50959),l=n(41733),c=n(30509),s=function(e){return/\s/.test(e)};function u(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=(0,r._)((0,a.useState)(null),2),o=i[0],u=i[1],d=(0,a.useCallback)(u,[u]),f=(0,a.useRef)(t);(0,a.useEffect)(function(){f.current=t},[t]);var h=(0,r._)((0,a.useState)(null),2),p=h[0],m=h[1];return(0,a.useEffect)(function(){if(o){var e=function(){var e=o.value,t=o.selectionStart;if(!t){m(null);return}var n=1===t||s(e[t-2]||""),r=e.length?e[t-1]:null;m(function(i){if(i&&(t<i.index||0===t))return null;if(!r||!i&&!n)return i;var o=f.current.includes(r);return i||o?i?s(r)?null:(0,c._)((0,l._)({},i),{text:e.slice(i.index,t)}):{index:t,text:"",match:r}:i})},t=function(){m(null)};return o.addEventListener("focus",e),o.addEventListener("keyup",e),o.addEventListener("blur",t),function(){m(null),o.removeEventListener("focus",e),o.removeEventListener("keyup",e),o.removeEventListener("blur",t)}}},[o,m]),[p,d]}function d(e){var t=(0,a.useRef)(e);(0,a.useEffect)(function(){t.current=e},[e]);var n=(0,r._)((0,a.useState)(!1),2),l=n[0],c=n[1],s=(0,r._)((0,a.useState)(null),2),d=s[0],f=s[1],h=(0,r._)(u.apply(void 0,(0,i._)(Object.keys(e))),2),p=h[0],m=h[1],v=(0,a.useRef)(p);(0,a.useEffect)(function(){v.current=p},[p]);var g=(0,o.Z)(p,100);return(0,a.useEffect)(function(){if(!g){f(null);return}var e=g.match,n=g.text,r=t.current[e]?t.current[e]:null;if(!r){f(null);return}var i=!1;return c(!0),r(n).then(function(e){i||v.current!==g||(c(!1),f({textTrigger:g,results:e,applySuggestion:function(e){var t=e.targetValue,n=e.suggestionValue,r=t.slice(0,g.index),i=n,o=t.slice(g.index+g.text.length);o&&o.startsWith(" ")||(i+=" ");var a=r+i+o;return{cursorIndex:(r+i).length+(o&&o.startsWith(" ")?1:0),fullValue:a}}}))}),function(){i=!0}},[g,f]),[{isLoading:l,suggestions:d},m]}},42385:function(e,t,n){n.d(t,{T:function(){return o}});var r=n(81199),i=n(46298);function o(){var e=(0,r.Z)().toolchain;return(0,i.Z)(e.configs)}},63891:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(66626),i=n(38753),o=n(68883),a=n(50959);function l(){var e=(0,a.useRef)(0),t=(0,r._)((0,a.useState)(!1),2),n=t[0],l=t[1],c=(0,i.T3)(),s=(0,i.sG)(),u=(0,o.u)();return(0,a.useEffect)(function(){var t,n=window.visualViewport;if(n){if(s){l(null!==(t=null==u?void 0:u.isShown)&&void 0!==t&&t);return}if(c){var r=function(){l(n.height<.8*e.current)};return e.current=n.height,n.addEventListener("resize",r),function(){n.removeEventListener("resize",r)}}}},[c,s,null==u?void 0:u.isShown]),n}},18063:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(66626),i=n(70617),o=n(81199),a=n(50959),l=n(36556);function c(e,t){var n,c,s,u,d=(n=(0,o.Z)().container,s=(c=(0,r._)((0,a.useState)(null),2))[0],u=c[1],(0,a.useEffect)(function(){if(n)return n.onConnectionStateChanged(function(){u(n.getConnectionMetadata())})},[n]),(0,a.useMemo)(function(){return s?(0,i.he)(s.token):null},[s]));(0,a.useEffect)(function(){if(e&&t){var n,r,i,o=(null===(n=e.origin)||void 0===n?void 0:n.__typename)==="Repl"?e.origin.id:null,a={id:e.id,slug:e.slug,originId:o,roles:t.roles&&t.roles.map(function(e){return e.name}),rootOriginReplUrl:e.rootOriginReplUrl,rootOriginReplReleaseId:null===(i=e.source)||void 0===i?void 0:null===(r=i.release)||void 0===r?void 0:r.id,tokenCluster:null==d?void 0:d.cluster};return(0,l.Fy)(a),function(){(0,l.dv)()}}},[e,t,d])}},70159:function(e,t,n){n.d(t,{Y:function(){return l}}),n(27387),n(96583);var r=n(29871),i=n(81199),o=n(5172),a=n(50959),l=(n(52399),n(57253),n(73372),n(49500),function(){var e,t=(0,r.iM)(),n=((0,a.useRef)(!1),(0,i.Z)()),o=n.fs,l=n.container,c=null===(e=l.getContext())||void 0===e?void 0:e.repl;return(0,a.useEffect)(function(){},[o,t,l,c]),null})},31764:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(27387),i=n(96583),o=n(36559),a=/\(copy\)( \d+)?$/,l=/\d+$/,c=n(73372);function s(e,t){return u.apply(this,arguments)}function u(){return(u=(0,r._)(function(e,t){var n,r,s,u,d,f;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return n=(0,o.Il)(e),[4,t.readDir(0===n.length?c.Ql:n)];case 1:if((r=i.sent()).error)throw r.error;return s=new Set(r.children.map(function(e){return e.filename})),u=function(e,t){var n=(0,o.r6)(e),r=(0,o.eb)(e);if(!r&&e.startsWith(".")){var i=e.lastIndexOf(".");r=i>0?e.slice(0,i):e}for(var c=a.test(r)?e:"".concat(r," (copy)").concat(n.length>0?".".concat(n):""),s=1;s<=t.size&&t.has(c);s++){var u=(0,o.eb)(c),d=u.split(" ");l.test(u)&&d.pop(),c="".concat(d.join(" ")," ").concat(s),n.length>0&&(c+=".".concat(n))}return c}((0,o.UO)(e),s),d=n?"".concat(n,"/").concat(u):u,[4,t.copyFile(e,d)];case 2:if((f=i.sent()).error)throw f.error;return[2,d]}})})).apply(this,arguments)}},73117:function(e,t){t.Z={sandbox:"allow-same-origin allow-forms allow-popups allow-popups-to-escape-sandbox allow-modals allow-downloads allow-downloads-without-user-activation allow-presentation allow-orientation-lock allow-scripts",allow:"accelerometer; ambient-light-sensor; autoplay; battery; camera; display-capture; encrypted-media; execution-while-not-rendered; execution-while-out-of-viewport; fullscreen; gamepad; geolocation; gyroscope; layout-animations; legacy-image-formats; magnetometer; microphone; midi; navigation-override; oversized-images; payment; picture-in-picture; publickey-credentials; speaker-selection; sync-xhr; unoptimized-images; unsized-media; usb; screen-wake-lock; web-share; xr-spatial-tracking; clipboard-read; clipboard-write",allowFullScreen:!0,allowtransparency:"true",allowpaymentrequest:"true",allowpopups:"true"}},28488:function(e,t,n){n.d(t,{Y:function(){return _},K:function(){return S}});var r,i=n(4216),o=n(63952),a=n(59786),l=n(27387),c=n(12285),s=n(96583),u=n(61374),d=n(36556),f=new(function(){"use strict";function e(){(0,c._)(this,e)}var t=e.prototype;return t.export=function(e,t){var n=new Map,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c,s=a.value,f=s.spanContext(),h={name:s.name,service:"repl.it-web",trace_id:f.traceId,span_id:f.spanId,start:s.startTime,end:s.endTime,parent_id:s.parentSpanId,attributes:s.attributes};n.has(f.traceId)||n.set(f.traceId,[]),null===(c=n.get(f.traceId))||void 0===c||c.push(h)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var p=Array.from(n.values());if(0===p.length){t({code:u.I.SUCCESS});return}var m=(0,d.Q0)();fetch("/datadog/traces",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-Requested-With":"fetch"},body:JSON.stringify({repl:{id:null==m?void 0:m.id,rootOriginReplUrl:null==m?void 0:m.rootOriginReplUrl},traces:p})}).then(function(){t({code:u.I.SUCCESS})}).catch(function(e){d.kg.error("Failed to send traces to Datadog: ".concat(e.message)),t({code:u.I.FAILED,error:e.message})})},t.shutdown=function(){return(0,l._)(function(){return(0,s.Jh)(this,function(e){return[2]})})()},t.forceFlush=function(){return(0,l._)(function(){return(0,s.Jh)(this,function(e){return[2]})})()},e}()),h=n(83176),p=n(25490),m=n(4955),v=n(9670),g=n(51305),y=n(2854),b=n(96125),w=function(e){"use strict";(0,m._)(n,e);var t=(0,v._)(n);function n(){var e;return(0,c._)(this,n),e=t.apply(this,arguments),e.spanSet=new Map,e}var r=n.prototype;return r.startSpan=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g.D.active(),i=(0,h._)((0,p._)(n.prototype),"startSpan",this).call(this,e,t,r);return this.spanSet.set(i.spanContext().spanId,i),i},r.pruneSpans=function(){this.spanSet.forEach(function(e){e.isRecording()&&e.setAttribute("pruned",!0)}),this.spanSet=new Map},n}(y.k),Z=function(e){"use strict";(0,m._)(n,e);var t=(0,v._)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c._)(this,n),(e=t.call(this,r))._wsTracers=new Map,e._wsConfig=r,e}var r=n.prototype;return r.getTracer=function(e,t,n){var r="".concat(e,"@").concat(t||"",":").concat((null==n?void 0:n.schemaUrl)||"");return this._wsTracers.has(r)||this._wsTracers.set(r,new w({name:e,version:t,schemaUrl:null==n?void 0:n.schemaUrl},this._wsConfig,this)),this._wsTracers.get(r)},r.pruneSpansForTracer=function(e,t,n){var r,i="".concat(e,"@").concat(t||"",":").concat((null==n?void 0:n.schemaUrl)||"");this._wsTracers.has(i)&&(null===(r=this._wsTracers.get(i))||void 0===r||r.pruneSpans())},n}(b.m),x=n(50959),C=n(18293);function _(){var e=(0,a.P5)({controlName:"flag-open-telemetry-tracing",forceCheckLiveClient:!0});return(0,x.useEffect)(function(){e&&((r=new Z).addSpanProcessor(new o.p(f)),r.register({propagator:new C.jf}))},[e]),(0,i.tZ)(i.HY,{})}function S(e){r.pruneSpansForTracer(e)}},34186:function(e,t,n){n.d(t,{Z:function(){return i},c:function(){return r}});var r="https://twitter.com/intent/tweet";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text,n=e.url,i=e.hashtags,o=e.via,a=new URLSearchParams;t&&a.append("text",t),n&&a.append("url",n),i&&a.append("hashtags",i.join(",")),o&&a.append("via",o);var l=a.toString();return l.length>0?"".concat(r,"?").concat(l):r}},7714:function(e,t,n){n.d(t,{Z:function(){return P}});var r=n(66626),i=n(4216),o=n(69170),a=n(75993),l=n(60305),c=n(18060),s=n(18471),u=n(64479),d=n(78803),f=n(82230),h=n(94778),p=n(49224),m=n(17519),v=n(66958),g=n(29318),y=n(87128),b=n(72093),w=n(41733),Z=n(21262),x=n(71440),C=n(58995),_=n(99165);function S(){var e=(0,Z._)(["\n  query MultiplayerInviteUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            capabilities {\n              isBusinessPlan\n              hasValidSubscription\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return S=function(){return e},e}function k(){var e=(0,Z._)(["\n  mutation MultiplayerRefreshInviteUrl($replId: String!) {\n    refreshMultiplayerInviteLink(replId: $replId) {\n      id\n      ... on Repl {\n        id\n        inviteUrl\n      }\n    }\n  }\n"]);return k=function(){return e},e}function E(){var e=(0,Z._)(["\n  mutation DeleteMultiplayerInviteUrl($replId: String!) {\n    deleteMultiplayerInviteLink(replId: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return E=function(){return e},e}var T={},R=(0,x.Ps)(S()),D=(0,x.Ps)(k()),I=(0,x.Ps)(E()),B=n(12202),G=(0,p.X)({container:[b.l0.colWithGap(12),b.l0.px(16),b.l0.pt(12),{borderTop:"solid 1px ".concat(b.TV.outlineDimmest)}],header:[b.l0.flex.row,b.l0.justify.spaceBetween],globeIconContainer:[b.l0.width(40),b.l0.height(40),b.l0.backgroundColor.accentPrimaryDimmer,b.l0.borderRadius("full"),b.l0.align.center,b.l0.justify.center],title:[b.l0.fontWeight.medium],loading:[b.l0.rowWithGap(4),b.l0.align.center],inviteUrlContainer:[b.l0.borderRadius(8),b.l0.flex.row],input:[b.l0.borderRadius(8,0,0,8),b.l0.color.foregroundDimmer],copyToClipboard:[b.l0.borderRadius(0,8,8,0)],titleGroup:[b.l0.rowWithGap(12)]}),A=function(){return(0,i.BX)(h.G,{css:G.titleGroup,children:[(0,i.tZ)(h.G,{css:G.globeIconContainer,children:(0,i.tZ)(m.Z,{color:b.TV.accentPrimaryStrongest,size:20})}),(0,i.BX)(h.G,{children:[(0,i.tZ)(f.xv,{css:G.title,id:"link-switch-label",multiline:!1,children:"Private join link"}),(0,i.tZ)(f.xv,{variant:"small",color:"dimmest",multiline:!1,children:"Anyone with this link can edit files"})]})]})};function P(e){var t,n,p,m,Z,x,S,k,E,P,L,N=e.replId,O=(0,o.Z)(),U=O.showConfirm,M=O.showError,X=(t=(0,w._)({},T,{variables:{replId:N}}),C.a(R,t)),F=X.data,W=X.loading,H=X.error,V=X.refetch,z=(0,r._)((n=(0,w._)({},T,{variables:{replId:N},onError:function(e){return M(e.message)},onCompleted:function(){return U("Join link created")}}),_.D(D,n)),2),j=z[0],q=z[1],J=(0,r._)((p=(0,w._)({},T,{variables:{replId:N},onError:function(e){return M(e.message)},onCompleted:function(e){if("UserError"===e.deleteMultiplayerInviteLink.__typename){M(e.deleteMultiplayerInviteLink.message);return}"Repl"===e.deleteMultiplayerInviteLink.__typename&&U("Join link deleted")}}),_.D(I,p)),2),Y=J[0],$=J[1],K=(null==F?void 0:null===(m=F.repl)||void 0===m?void 0:m.__typename)==="Repl"?F.repl:null,Q=q.loading||$.loading,ee=(null==F?void 0:null===(Z=F.repl)||void 0===Z?void 0:Z.__typename)==="Repl"&&(null==K?void 0:null===(x=K.owner)||void 0===x?void 0:x.__typename)==="Team",et=(null==F?void 0:null===(S=F.repl)||void 0===S?void 0:S.__typename)==="Repl"&&(null==K?void 0:null===(k=K.owner)||void 0===k?void 0:k.__typename)==="Team"&&(null==K?void 0:null===(E=K.owner.capabilities)||void 0===E?void 0:E.isBusinessPlan)&&(null==K?void 0:null===(P=K.owner.capabilities)||void 0===P?void 0:P.hasValidSubscription),en=(null==F?void 0:null===(L=F.repl)||void 0===L?void 0:L.__typename)==="Repl"&&(null==K?void 0:K.inviteUrl)?window.location.origin+(null==K?void 0:K.inviteUrl):null;return W||ee&&!et?null:H?(0,i.BX)(h.G,{css:G.container,children:[(0,i.BX)(h.G,{css:G.header,children:[(0,i.tZ)(A,{}),(0,i.tZ)(d.r,{isSelected:!1,isDisabled:!0,"aria-labelledby":"link-switch-label"})]}),(0,i.tZ)(s.u,{css:[b.l0.textAlign.left],iconLeft:(0,i.tZ)(y.Z,{color:b.TV.accentNegativeStrongest}),colorway:"negative",text:"Error loading join link. Click here to try again, or contact support.",onClick:function(){return V({replId:N})}})]}):(0,i.BX)(h.G,{css:G.container,children:[(0,i.BX)(h.G,{css:G.header,children:[(0,i.tZ)(A,{}),W?(0,i.BX)(h.G,{css:G.loading,children:[(0,i.tZ)(g.Z,{color:b.TV.foregroundDimmer}),(0,i.tZ)(f.xv,{color:"dimmer",multiline:!1,children:"Loading..."})]}):(0,i.tZ)(d.r,{isSelected:!!en,isDisabled:Q,onChange:function(e){Q||(e?j():Y())},"aria-labelledby":"link-switch-label"})]}),!W&&en?(0,i.BX)(i.HY,{children:[(0,i.BX)(u.Tg,{css:G.inviteUrlContainer,children:[(0,i.tZ)(c.II,{type:"url",readOnly:!0,disabled:!0,value:Q?"Loading...":en,css:G.input}),(0,i.tZ)(B.q,{textToCopy:en,onClick:function(){en?((0,a.Z)(en),(0,l.j)(l.U3.JOIN_LINK_COPIED,{replId:null==K?void 0:K.id,isTeamRepl:ee,source:"replEnvironment"}),U("Link copied")):M("Could not copy link")},tooltipSuccessText:"Copied to clipboard",text:"Copy join link",iconLeft:(0,i.tZ)(v.Z,{}),css:G.copyToClipboard,colorway:"primary",disabled:Q})]}),(0,i.tZ)(h.G,{children:(0,i.BX)(f.xv,{color:"dimmer",variant:"small",multiline:!1,children:["Want to revoke access to this link?"," ",(0,i.tZ)("a",{css:b.l0.linkStyle,role:"button",tabIndex:0,onKeyDown:function(e){"Enter"!==e.key||(e.preventDefault(),Q||j())},onClick:function(e){e.preventDefault(),Q||j()},children:"Generate a new link"})]})})]}):null]})}},66415:function(e,t,n){n.d(t,{_U:function(){return A},ln:function(){return P},ZP:function(){return L}});var r=n(63257),i=n(4216),o=n(37053),a=n(38753),l=n(15605),c=n(64479),s=n(82230),u=n(64432),d=n(94778),f=n(98640),h=n(73789),p=n(29318),m=n(72093),v=n(42182),g=n(66048),y=n(85438),b=n(85421),w=n(51585),Z=n(14709),x=n.n(Z),C=n(41733),_=n(21262),S=n(71440),k=n(39064),E=n(58995);function T(){var e=(0,_._)(["\n  query MultiplayerManager($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        collaborators {\n          user {\n            ...MultiplayerUser\n          }\n        }\n        authorizations {\n          editPermissions {\n            isAuthorized\n          }\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n    currentUser {\n      id\n      isSubscribed\n    }\n  }\n  ","\n"]);return T=function(){return e},e}var R={},D=(0,S.Ps)(T(),k.U4),I=n(36522),B=n(2619);function G(e,t){return t.some(function(t){return t.id===e})}var A={root:[m.l0.color.foregroundDefault,m.l0.flex.column,m.l0.colWithGap(12),m.l0.align.stretch,m.l0.flex.growAndShrink(1)],header:[m.l0.flex.row,m.l0.justify.spaceBetween,m.l0.align.center,m.l0.px(16)],header_mobile:[m.l0.px(0)],titleContainer:[m.l0.flex.row,m.l0.rowWithGap(4),m.l0.align.center],limitsContainer:[m.l0.align.center,m.l0.rowWithGap(8)],loading:[m.l0.rowWithGap(4),m.l0.align.center,m.l0.flex.grow(1),m.l0.justify.center],measureBar:[m.l0.height(8),m.l0.width(60)],searchContainer:[m.l0.px(16),m.l0.position.relative,m.l0.maxHeight(32)],userList:[m.l0.flex.column,m.l0.colWithGap(16),m.l0.scrollbar.thin,m.l0.position.relative,m.l0.overflowY("auto"),m.l0.flex.growAndShrink(1),m.l0.pb(8),{maxHeight:300,"::-webkit-scrollbar-thumb":[m.l0.backgroundColor.backgroundHighest,m.l0.borderRadius(4)],scrollbarColor:"".concat(m.TV.backgroundDefault," ").concat(m.TV.backgroundHighest)}],userGroup:{root:[m.l0.colWithGap(8)],titleContainer:[m.l0.rowWithGap(4),m.l0.align.center,m.l0.px(16)],title:[m.l0.fontWeight.medium]},emptyContainer:[m.l0.position.relative,m.l0.colWithGap(16),m.l0.py(16),m.l0.justify.start,m.l0.px(16),{maxHeight:220}]},P=function(e){var t=e.title,n=e.count,r=e.color,o=e.tooltip;return(0,i.BX)(d.G,{css:A.userGroup.titleContainer,children:[(0,i.tZ)(f.Z,{color:r,size:6}),(0,i.tZ)(s.xv,{variant:"small",css:A.userGroup.title,multiline:!1,children:t}),(0,i.tZ)(s.xv,{multiline:!1,variant:"small",color:"dimmest",css:A.userGroup.title,children:n}),o?(0,i.tZ)(u.u,{tooltip:o,children:(0,i.tZ)(h.Z,{})}):null]})},L=function(e){var t,n,u=e.replId,f=e.handleUpgradeTriggered,h=(0,b.useRouter)(),Z=(0,a.Gv)(h),_=(0,o.Z)({isMobileApp:Z,isTeam:!1,handleUpgradeTriggered:f,replId:u}),S=_.addOrInviteReplMultiplayer,k=_.loadingAddMutation,T=(0,g.aG)(),L=(t=(0,C._)({},R,{variables:{replId:u},pollInterval:8e3}),E.a(D,t)),N=L.data,O=L.loading,U=(null==N?void 0:N.repl.__typename)==="Repl"?N.repl:null,M=null==N?void 0:N.currentUser,X=(null!==(n=null==U?void 0:U.collaborators)&&void 0!==n?n:[]).reduce(function(e,t){var n=t.user;return(0,r._)(e).concat([n.username])},[]),F=(null==U?void 0:U.authorizations.editPermissions.isAuthorized)||!1,W=!!(U&&!X.length&&!U.multiplayerInvites.length),H=null==U?void 0:U.collaborators.map(function(e){return e.user}).filter(function(e){return e.id!==(null==M?void 0:M.id)}),V=null==H?void 0:H.filter(function(e){return e&&G(e.id,T)}),z=null==H?void 0:H.filter(function(e){return e&&!G(e.id,T)}),j=H?H.length:null;return(0,i.BX)(c.Tg,{background:"default",css:A.root,children:[(0,i.BX)(d.G,{css:[A.header,Z&&A.header_mobile],children:[(0,i.tZ)(d.G,{css:A.titleContainer,children:(0,i.tZ)(s.xv,{variant:"subheadDefault",multiline:!1,children:"Multiplayers"})}),(0,i.BX)(d.G,{css:A.limitsContainer,children:[O?(0,i.BX)(d.G,{css:A.loading,children:[(0,i.tZ)(p.Z,{color:m.TV.foregroundDimmer}),(0,i.tZ)(s.xv,{color:"dimmer",multiline:!1,children:"Loading..."})]}):null,null===j||(null==M?void 0:M.isSubscribed)?null:(0,i.BX)(i.HY,{children:[(0,i.BX)(s.xv,{variant:"small",color:"dimmest","aria-hidden":!0,multiline:!1,children:[j," / ",w.z]}),(0,i.tZ)(l.J,{css:A.measureBar,total:w.z,current:j,tooltip:"".concat(w.z-j," free editors remaining")})]}),O||(null==M?void 0:M.isSubscribed)||Z?null:(0,i.tZ)(v.Z,{size:"small",context:"workspace_multiplayer_header",onClickCallback:function(){f&&f(!0)},onCancel:function(){f&&f(!1)}})]})]}),F&&X&&U?(0,i.tZ)(d.G,{css:A.searchContainer,children:(0,i.tZ)(B.Z,{existingUsernames:X,onSubmit:function(e){(!O||(null==M?void 0:M.isSubscribed))&&(k||S({variables:{input:{replId:u,target:{method:x()(e)?y.ml.Email:y.ml.Username,value:e},level:y.gA.Rw}}}))}})}):null,W?(0,i.tZ)(d.G,{css:A.emptyContainer,children:(0,i.tZ)(d.G,{children:(0,i.tZ)(s.xv,{color:"dimmest",multiline:!1,children:"No one else is here"})})}):(0,i.BX)(c.Tg,{css:A.userList,children:[(null==V?void 0:V.length)?(0,i.BX)(d.G,{css:A.userGroup.root,children:[(0,i.tZ)(P,{title:"Online",count:V.length||0,color:m.TV.greenStrongest}),V.map(function(e){return e?(0,i.tZ)(I.Z,{isPendingInvitation:!1,replId:u,canEditMultiplayers:F,user:e},e.id):null})]}):null,(null==z?void 0:z.length)?(0,i.BX)(d.G,{css:A.userGroup.root,children:[(0,i.tZ)(P,{title:"Offline",count:z.length||0,color:m.TV.outlineStrongest}),null==z?void 0:z.map(function(e){return e?(0,i.tZ)(I.Z,{canEditMultiplayers:F,isPendingInvitation:!1,user:e,replId:u},e.id):null})]}):null,(null==U?void 0:U.multiplayerInvites.length)?(0,i.BX)(d.G,{css:A.userGroup.root,children:[(0,i.tZ)(P,{title:"Pending Invitations",count:(null==U?void 0:U.multiplayerInvites.length)||0,color:m.TV.outlineStrongest}),U.multiplayerInvites.map(function(e){return(0,i.tZ)(I.Z,{canEditMultiplayers:F,replId:u,isPendingInvitation:!0,email:e.email},e.email)})]}):null]})]})}},36522:function(e,t,n){n.d(t,{Z:function(){return I}});var r=n(4216),i=n(38672),o=n(66626),a=n(43182),l=n(69170),c=n(41733),s=n(21262),u=n(71440),d=n(39064),f=n(99165);function h(){var e=(0,s._)(["\n  mutation RemoveMultiplayerUser($replId: String!, $username: String!) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerUser\n      }\n      repl {\n        id\n        collaborators {\n          user {\n            ...MultiplayerUser\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function p(){var e=(0,s._)(["\n  mutation DeleteMultiplayerInvite($replId: String!, $email: String!) {\n    deleteMultiplayerInvite(replId: $replId, email: $email) {\n      ... on MultiplayerInvite {\n        email\n        type\n        repl {\n          id\n          collaborators {\n            user {\n              ...MultiplayerUser\n            }\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var m={},v=(0,u.Ps)(h(),d.U4),g=(0,u.Ps)(p(),d.U4),y=function(){var e,t,n=(0,l.Z)(),r=n.showConfirm,i=n.showError,s=function(e,t){a.n_({message:t}),a.Tb(Error(e.message)),i("Something unexpected happened, please try again.")},u=(0,o._)((e=(0,c._)({},m,{onError:function(e){return s(e,"useRemoveMultiplayerUser")},onCompleted:function(e){var t,n=null===(t=e.removeMultiplayerUser.user)||void 0===t?void 0:t.username;n?r("@".concat(n," removed")):r("User removed")}}),f.D(v,e)),2),d=u[0],h=u[1].loading,p=(0,o._)((t=(0,c._)({},m,{onError:function(e){return s(e,"useDeleteMultiplayerInviteMutation")},onCompleted:function(e){if("UserError"===e.deleteMultiplayerInvite.__typename){i(e.deleteMultiplayerInvite.message);return}if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var t=e.deleteMultiplayerInvite.email;r("Invite canceled for ".concat(t))}}}),f.D(g,t)),2);return{removeMultiplayerUser:d,loadingRemoveUser:h,deleteMultiplayerInvite:p[0],loadingDeleteInvite:p[1].loading}},b=n(85763),w=n(82230),Z=n(4276),x=n(94778),C=n(49224),_=n(44610),S=n(64318),k=n(72093),E=n(51950),T=n(47336),R=n.n(T),D=(0,C.X)({root:[k.l0.px(16),k.l0.py(4),k.l0.flex.row,k.l0.rowWithGap(8),k.l0.align.center,k.l0.cursor.default,k.l0.justify.spaceBetween],userContainer:k.l0.color.foregroundDefault,userContainer_pending:[k.l0.flex.grow(1),k.l0.flex.row,k.l0.rowWithGap(8),k.l0.align.center,{fontStyle:"italic"}],permissionsContainer:[k.l0.flex.row,k.l0.rowWithGap(8),k.l0.align.center]}),I=function(e){var t,n=e.isPendingInvitation,o=e.canEditMultiplayers,a=e.replId,l=y(),c=l.removeMultiplayerUser,s=l.loadingRemoveUser,u=l.deleteMultiplayerInvite,d=l.loadingDeleteInvite,f=!n,h=f?(0,r.tZ)(i.Z,{size:"m",url:e.user.image,username:e.user.username,fullName:e.user.fullName}):(0,r.tZ)(_.Z,{color:k.TV.outlineDefault,size:32}),p=f?e.user.username:e.email;return(0,r.BX)(x.G,{css:D.root,children:[f?(0,r.tZ)(E.Z,{username:e.user.username,children:(0,r.tZ)(R(),{legacyBehavior:!0,href:"/@".concat(e.user.username),passHref:!0,children:(0,r.tZ)(x.G,{tag:"a",css:D.userContainer,children:(0,r.tZ)(Z.n,{username:e.user.username,src:null!==(t=e.user.image)&&void 0!==t?t:null})})})}):(0,r.BX)(x.G,{css:[D.userContainer_pending],children:[h,(0,r.tZ)(w.xv,{color:f?"default":"dimmest",multiline:!1,children:p})]}),(0,r.BX)(x.G,{css:D.permissionsContainer,children:[(0,r.tZ)(w.xv,{color:"dimmest",variant:"small",multiline:!1,children:e.isPendingInvitation?"Invited":"Can edit"}),o?(0,r.tZ)(b.hU,{alt:f?"Remove member":"Cancel invitation",onClick:function(){!o||s||d||(f?c({variables:{replId:a,username:e.user.username}}):u({variables:{replId:a,email:e.email}}))},children:(0,r.tZ)(S.Z,{size:12})}):null]})]})}},2619:function(e,t,n){n.d(t,{Z:function(){return k}});var r=n(41733),i=n(30509),o=n(66626),a=n(4216),l=n(38672),c=n(14872),s=n(69170),u=n(15235),d=n(18060),f=n(64479),h=n(82230),p=n(94778),m=n(49224),v=n(59947),g=n(29318),y=n(72093),b=n(72370),w=n(21371),Z=n(50959),x=n(14709),C=n.n(x),_=n(27405),S=(0,m.X)({form:[y.l0.align.start,y.l0.display.flex,y.l0.rowWithGap(8),y.l0.width("100%")],searchContainer:[y.l0.position.relative,y.l0.flex.growAndShrink(1)],dropdownMenu:[y.l0.borderRadius(8),y.l0.overflow("hidden"),y.l0.mt(2),y.l0.zIndex(2),y.l0.border({color:y.TV.outlineDimmer,width:1,style:"solid"}),y.l0.maxHeight(280),y.l0.overflowY("auto"),y.l0.scrollbar.thin,{scrollbarColor:y.TV.backgroundHigher+" "+y.TV.backgroundHighest,"&::-webkit-scrollbar-thumb":{backgroundColor:y.TV.backgroundHighest}}],result:[y.l0.p(8),y.l0.rowWithGap(8),y.l0.justify.spaceBetween,y.l0.align.center,y.l0.cursor.pointer],result_active:[y.l0.backgroundColor.accentPrimaryDimmer],userContainer:[y.l0.rowWithGap(8),y.l0.align.center],loadingContainer:[y.l0.align.center,y.l0.m(8),y.l0.rowWithGap(8),y.l0.align.center],emptyText:[y.l0.m(8)]});function k(e){var t=e.onSubmit,n=e.existingUsernames,m=e.isDisabled,x=e.onChange,k=e.placeholder,E=(0,o._)((0,Z.useState)(""),2),T=E[0],R=E[1],D=(0,b.U)(),I=(0,c.Z)(T.trim().replace(/^@/,""),250),B=(0,_.sk)({skip:!I||C()(T),variables:{query:I,limit:6}}),G=B.data,A=B.loading,P=B.error,L=(0,s.Z)().showError;(0,Z.useEffect)(function(){P&&L(P.message)},[P,L]);var N=null==G?void 0:G.usernameSearch,O=function(e){R(e.currentTarget.value),null==x||x(e.currentTarget.value)},U=function(e){"Enter"===e.key&&T.match(/.+@.+/)&&(t(T),R(""),e.currentTarget.blur())};return(0,a.BX)("form",{onSubmit:function(e){e.preventDefault(),t(T),R("")},css:S.form,children:[(0,a.tZ)(w.ZP,{onChange:function(e){e&&R(e.username)},itemToString:function(e){return(null==e?void 0:e.username)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var t=e.getInputProps,o=e.getItemProps,c=e.getMenuProps,s=e.isOpen,u=e.highlightedIndex,m=e.getRootProps;return(0,a.BX)(p.G,(0,i._)((0,r._)({css:S.searchContainer},m({refKey:"innerRef"})),{children:[(0,a.tZ)(d.II,(0,r._)({id:D("username-search")},t({ref:null,value:T,onChange:O,placeholder:null!=k?k:"Add people by username or email",autoComplete:"off",onKeyDown:U}))),s?(0,a.BX)(p.G,{children:[N&&N.length?(0,a.tZ)(f.Tg,(0,i._)((0,r._)({elevated:!0,css:S.dropdownMenu,tag:"ul"},c({refKey:"innerRef"})),{children:N.map(function(e,t){return(0,a.BX)(p.G,(0,i._)((0,r._)({tag:"li"},o({item:e,index:t})),{css:[S.result,t===u&&S.result_active],children:[(0,a.BX)(p.G,{css:S.userContainer,children:[(0,a.tZ)(l.Z,{size:"m",url:e.image,username:e.username,fullName:e.fullName}),(0,a.tZ)(h.xv,{multiline:!1,children:e.username})]}),n.includes(e.username)?(0,a.tZ)(p.G,{children:(0,a.tZ)(v.Z,{color:y.TV.accentPositiveStronger})}):null]}),t)})})):null,A?(0,a.tZ)(f.Tg,{elevated:!0,css:S.dropdownMenu,children:(0,a.BX)(p.G,{css:S.loadingContainer,children:[(0,a.tZ)(g.Z,{}),(0,a.tZ)(h.xv,{color:"dimmer",multiline:!1,children:"Loading…"})]})}):null,N&&0===N.length?(0,a.tZ)(f.Tg,{elevated:!0,css:S.dropdownMenu,children:(0,a.BX)(h.xv,{css:S.emptyText,color:"dimmer",multiline:!1,children:['No results found for "',T,'"']})}):null]}):null]}))}}),(0,a.tZ)(p.G,{children:(0,a.tZ)(u.zx,{colorway:"primary",type:"submit",disabled:m||!T,text:"Invite"})})]})}},13430:function(e,t,n){n.d(t,{m:function(){return Z}});var r=n(66626),i=n(39271),o=n(2993),a=n(33980),l=n(81199),c=n(41733),s=n(21262),u=n(71440),d=n(293),f=n(99165);function h(){var e=(0,s._)(["\n  subscription StartOrgReplPresenceSession(\n    $input: StartOrgReplPresenceSessionInput!\n  ) {\n    startOrgReplPresenceSession(input: $input)\n  }\n"]);return h=function(){return e},e}function p(){var e=(0,s._)(["\n  mutation PingOrgReplPresenceSession(\n    $input: PingOrgReplPresenceSessionInput!\n  ) {\n    pingOrgReplPresenceSession(input: $input)\n  }\n"]);return p=function(){return e},e}var m={},v=(0,u.Ps)(h()),g=(0,u.Ps)(p()),y=n(50959),b=n(85234),w=n.n(b);function Z(){var e,t,n,s=arguments.length>0&&void 0!==arguments[0]&&arguments[0],u=(0,i.Z)(),h=(0,y.useRef)(w()()),p=(0,l.Z)().container,b=(0,a.Z)(p),Z=(0,r._)((e=(0,c._)({},m,void 0),f.D(g,e)),1)[0],x=b!==o.em.CONNECTED||s;(0,y.useEffect)(function(){var e=!1;if(!x&&b===o.em.CONNECTED){var t=null;return function n(){Z({variables:{input:{sessionId:h.current}},onCompleted:function(){e||(t=setTimeout(n,1e4))}})}(),function(){e=!0,t&&clearTimeout(t)}}},[b,h,Z,x]),t={variables:{input:{replId:u,sessionId:h.current}},skip:x},n=(0,c._)({},m,t),d.m(v,n)}},65367:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(31417),i=n(27387),o=n(66626),a=n(96583),l=n(53594),c=n(49500);function s(){var e;return(0,l.C)((e=(0,i._)(function(e,t){var n,i,l,s,u,d,f,h,p,m,v;return(0,a.Jh)(this,function(e){switch(e.label){case 0:return n=t.addCleanup,[3,13];case 1:l=(i=o._.apply(void 0,[e.sent(),2]))[0],s=i[1],n(s),u=!1,d=!1,e.label=2;case 2:e.trys.push([2,7,8,13]),h=(0,r._)(l),e.label=3;case 3:return[4,h.next()];case 4:if(!(u=!(p=e.sent()).done))return[3,6];(m=p.value).ok&&c.log("[pid2]: ".concat(m.payload.message)),e.label=5;case 5:return u=!1,[3,3];case 6:return[3,13];case 7:return v=e.sent(),d=!0,f=v,[3,13];case 8:if(e.trys.push([8,,11,12]),!(u&&null!=h.return))return[3,10];return[4,h.return()];case 9:e.sent(),e.label=10;case 10:return[3,12];case 11:if(d)throw f;return[7];case 12:return[7];case 13:return[2]}})}),function(t,n){return e.apply(this,arguments)}),[]),null}},21482:function(e,t,n){n.d(t,{D:function(){return i},u:function(){return o}});var r=n(60305);function i(){(0,r.j)(r.U3.MODAL_VIEWED,{modalName:"projects_help_dialog"})}function o(e){(0,r.j)(r.U3.GIT_PROJECT_FEATURE_USED,e)}},71481:function(e,t,n){n.d(t,{e9:function(){return h},wd:function(){return d}});var r=n(41733),i=n(21262),o=n(71440),a=n(72175),l=n(58995);function c(){var e=(0,i._)(["\n  fragment PublishReleaseFormRepl on Repl {\n    id\n    title\n    description\n    slug\n    user {\n      username\n    }\n    ...PublishedReplShareInfoReplData\n    deployment {\n      id\n      activeRelease {\n        id\n      }\n    }\n    releases {\n      items {\n        id\n        timeCreated\n        description\n        initialLayoutState\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function s(){var e=(0,i._)(["\n  query PublishReleaseFormCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return s=function(){return e},e}var u={},d=(0,o.Ps)(c(),a.B),f=(0,o.Ps)(s());function h(e){var t=(0,r._)({},u,e);return l.a(f,t)}},80854:function(e,t,n){n.d(t,{O:function(){return _},Z:function(){return x}});var r=n(41733),i=n(30509),o=n(63257),a=n(4216),l=n(77450),c=n(61967),s=n(97617),u=n(53129),d=n(72333),f=n(94311),h=n(64479),p=n(82230),m=n(94778),v=n(26382),g=n(72093),y=n(47336),b=n.n(y),w=m.K.a,Z=(0,l.iv)({"::after":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",zIndex:1}});function x(e){var t=e.post,n=t.repl,o=t.user,l=n.isTemplate?"Template":"Repl";return(0,a.BX)(m.G,{css:g.l0.colWithGap(8),children:[(0,a.BX)(m.G,{css:[g.l0.flex.row,g.l0.align.center,g.l0.justify.spaceBetween],children:[(0,a.tZ)(m.G,{css:[g.l0.flex.row,g.l0.align.center],children:(0,a.BX)(m.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,a.tZ)(f.q,{size:24,username:o.username,src:o.image}),(0,a.BX)(m.G,{css:g.l0.rowWithGap(4),children:[(0,a.tZ)(p.xv,{multiline:!1,children:o.username}),(0,a.BX)(p.xv,{color:"dimmest",multiline:!1,children:[" ","published a ",l]})]})]})}),(0,a.tZ)(v.Z,{size:12})]}),(0,a.BX)(h.Tg,{css:[g.l0.borderRadius(8),g.l0.colWithGap(8),g.l0.p(8),g.l0.position.relative,{border:"1px solid "+g.TV.outlineDimmest}],children:[(0,a.tZ)(m.G,{css:[g.l0.colWithGap(16)],children:(0,a.tZ)(m.G,{css:[g.l0.rowWithGap(16),g.l0.justify.spaceBetween],children:(0,a.BX)(m.G,{css:[g.l0.rowWithGap(8),g.l0.align.start,g.l0.flex.growAndShrink(1)],children:[(0,a.tZ)(d.ZP,{iconUrl:n.iconUrl,alt:n.title,size:84,css:[g.l0.backgroundColor.backgroundHigher]}),(0,a.BX)(m.G,{css:[g.l0.flex.growAndShrink(1),g.l0.colWithGap(4)],children:[(0,a.BX)(m.G,{css:[g.l0.flex.row],children:[(0,a.tZ)(b(),(0,i._)((0,r._)({legacyBehavior:!0,passHref:!0},(0,c.j3)(n)),{children:(0,a.tZ)(w,{css:[{color:"inherit"},Z,g.l0.flex.growAndShrink(1),g.l0.minWidth(0)],onClick:function(e){return e.preventDefault()},children:(0,a.tZ)(p.xv,{variant:"subheadBig",multiline:!1,children:n.title})})})),n.isTemplate?(0,a.tZ)(C,{}):null]}),n.description?(0,a.tZ)(p.xv,{color:"dimmer",maxLines:2,multiline:!1,children:n.description}):null]})]})})}),(0,a.BX)(m.G,{css:[g.l0.rowWithGap(8),g.l0.justify.spaceBetween,g.l0.minHeight(24)],children:[(0,a.tZ)(u.Z,{repl:{id:n.id,publicForkCount:0,likeCount:0}}),(0,a.tZ)(m.G,{css:[g.l0.position.relative,{zIndex:1},g.l0.flex.shrink(1)],children:(0,a.tZ)(s.fv,{tags:n.tags})})]})]})]})}var C=function(){return(0,a.tZ)("span",{css:[g.l0.display.inlineFlex,g.l0.align.center,g.l0.height(24),g.l0.px(8),g.l0.borderRadius(16),g.l0.backgroundColor.yellowDimmest,g.l0.color.yellowStrongest,g.l0.justify.center,g.l0.ml(8),{fontSize:g.TV.fontSizeSmall,lineHeight:g.TV.fontSizeSmall}],children:"Template"})},_=function(){return(0,a.BX)(m.G,{css:[g.l0.colWithGap(8),{opacity:.5}],children:[(0,a.BX)(m.G,{css:[g.l0.flex.row,g.l0.align.center,g.l0.flex.grow(1),g.l0.justify.spaceBetween],children:[(0,a.BX)(m.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,a.tZ)("span",{css:[g.l0.backgroundColor.backgroundHigher,g.l0.width(24),g.l0.height(24),g.l0.borderRadius(16)]}),(0,a.tZ)("span",{css:[g.l0.backgroundColor.backgroundHigher,g.l0.width(126),g.l0.height(12),g.l0.borderRadius(4)]})]}),(0,a.tZ)("span",{css:[g.l0.backgroundColor.backgroundHigher,g.l0.width(12),g.l0.height(12),g.l0.borderRadius(8)]})]}),(0,a.BX)(m.G,{css:[g.l0.backgroundColor.backgroundDefault,g.l0.width("100%"),g.l0.height(132),g.l0.borderRadius(8),g.l0.colWithGap(8),g.l0.p(8)],children:[(0,a.BX)(m.G,{css:g.l0.rowWithGap(8),children:[(0,a.tZ)("span",{css:[g.l0.backgroundColor.backgroundHigher,g.l0.height(84),g.l0.width(84),g.l0.borderRadius(4)]}),(0,a.BX)(m.G,{css:[g.l0.colWithGap(12),g.l0.pt(4),g.l0.flex.grow(1)],children:[(0,a.tZ)("span",{css:[g.l0.backgroundColor.backgroundHigher,g.l0.width(80),g.l0.height(16),g.l0.borderRadius(4)]}),(0,a.BX)(m.G,{css:g.l0.colWithGap(8),children:[(0,a.tZ)("span",{css:[g.l0.backgroundColor.backgroundHigher,g.l0.width("100%"),g.l0.height(12),g.l0.borderRadius(4)]}),(0,a.tZ)("span",{css:[g.l0.backgroundColor.backgroundHigher,g.l0.width("80%"),g.l0.height(12),g.l0.borderRadius(4)]})]})]})]}),(0,a.BX)(m.G,{css:[g.l0.flex.row,g.l0.flex.grow(1),g.l0.align.center,g.l0.justify.spaceBetween],children:[(0,a.tZ)(m.G,{css:g.l0.rowWithGap(16),children:(0,o._)([,,,]).map(function(e,t){return(0,a.BX)(m.G,{css:[g.l0.rowWithGap(4),g.l0.align.center],children:[(0,a.tZ)("span",{css:[g.l0.backgroundColor.backgroundHigher,g.l0.width(12),g.l0.height(12),g.l0.borderRadius(8)]}),(0,a.tZ)("span",{css:[g.l0.backgroundColor.backgroundHigher,g.l0.width(16),g.l0.height(8),g.l0.borderRadius(2)]})]},t)})}),(0,a.tZ)(m.G,{css:g.l0.rowWithGap(4),children:(0,o._)([,,]).map(function(e,t){return(0,a.tZ)("span",{css:[g.l0.backgroundColor.backgroundHigher,g.l0.width(48),g.l0.height(24),g.l0.borderRadius(16)]},t)})})]})]})]})}},47745:function(e,t,n){n.d(t,{Z:function(){return d},_:function(){return p}});var r=n(66626),i=n(4216),o=n(27022),a=n(72093),l=n(30124),c=n(85447),s=n(24857),u=n(50959);function d(e){var t=(0,r._)((0,u.useState)(!1),2),n=t[0],o=t[1],a=[],d=[];if(e.variables.length>0){var f=e.variables[0].parentVariableReference,h=!0,m=!1,v=void 0;try{for(var g,y=e.variables[Symbol.iterator]();!(h=(g=y.next()).done);h=!0){var b=g.value;b.parentVariableReference===f?a.push(b):d.push(b)}}catch(e){m=!0,v=e}finally{try{h||null==y.return||y.return()}finally{if(m)throw v}}}return(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.Z,{truncate:!0,level:5,children:"Variables"}),(0,i.BX)(s.gC,{align:"stretch",constrainWidth:!0,children:[a.map(function(t){return(0,i.tZ)(p,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)}),d.length>0&&(0,i.BX)(i.HY,{children:[(0,i.BX)(l.Z,{filled:!1,border:!1,onClick:function(){return o(function(e){return!e})},children:["See ",n?"Less":"More"]}),n&&d.map(function(t){return(0,i.tZ)(p,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)})]})]})]})}function f(e){var t=e.variable,n=e.expanded;return t.variablesReference>0?(0,i.tZ)("div",{css:[a.l0.transition.snappy,{transform:"rotate(".concat(n?0:-90,"deg)")}],children:(0,i.tZ)(o.Z,{})}):null}function h(e){var t=e.expanded,n=e.depth,r=e.variable;return 0!==n||"parentVariableReference"in r?(0,i.tZ)("div",{css:[a.l0.flex.grow(0),a.l0.flex.shrink(0),a.l0.width(a.TV.space16),a.l0.display.flex,a.l0.align.center,a.l0.justify.end],children:(0,i.tZ)(f,{expanded:t,variable:r})}):(0,i.tZ)(f,{expanded:t,variable:r})}function p(e){var t=e.depth,n=e.variable,o=e.client,a=(0,r._)((0,u.useState)(!1),2),l=a[0],c=a[1],d=(0,r._)((0,u.useState)([]),2),f=d[0],m=d[1];return(0,u.useEffect)(function(){l&&o.fetchVariables(n.variablesReference).then(function(e){return m(e)},function(){return c(!1)})},[l,o,n.variablesReference]),(0,i.BX)(i.HY,{children:[(0,i.BX)("div",{className:"variable",onClick:function(){n.variablesReference>0&&c(function(e){return!e})},css:{"&":{display:"flex",alignItems:"center",maxWidth:"100%",height:"var(--space-32)",minHeight:"var(--space-32)",cursor:"pointer",color:"var(--foreground-dimmer)",borderRadius:"var(--border-radius-4)",fontSize:"var(--font-size-default)",paddingLeft:"calc(".concat(t," * var(--space-16))"),fontFamily:"var(--font-family-code)"},"&:hover":{backgroundColor:"var(--background-higher)",color:"var(--foreground-default)"},".label":{fontSize:"var(--font-size-default)",paddingLeft:"var(--space-8)",paddingRight:"var(--space-8)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:"1 0 auto"},".type":{opacity:"0.5"},".value":{textAlign:"right",flexShrink:1}},children:[(0,i.tZ)(h,{expanded:l,variable:n,depth:t}),(0,i.BX)("div",{className:"label",children:[n.name,n.type?(0,i.BX)("span",{className:"type",children:[" ",n.type]}):null,""!==n.value&&": "]}),(0,i.tZ)("div",{className:"label value",children:(0,i.tZ)("pre",{children:n.value})})]}),l?(0,i.tZ)(s.gC,{align:"stretch",constrainWidth:!0,children:f.map(function(e){return(0,i.tZ)(p,{depth:t+1,variable:e,client:o},"parentVariableReference"in e?e.parentVariableReference+"/"+e.name:e.name)})}):null]})}},93100:function(e,t,n){n.d(t,{M:function(){return i}});var r=n(32317),i={overlay:r.Is+20,gutterActive:r.Is+19,maximizedTooltip:r.Is+18,maximizedPane:r.Is+17,maximizedHeader:r.Is+16,filetreeDragLayer:17,detachPreview:16,draggingPane:15,draggingHeader:14,floatingPaneActive:11,floatingHeaderActive:10,floatingPane:9,floatingHeader:8,dropPreview:7,gutterHovered:6,tiledPaneActive:5,tiledHeaderActive:4,tiledPane:3,tiledHeader:2,gutter:1}},13621:function(e,t,n){var r,i;n.d(t,{y:function(){return r}}),(i=r||(r={})).Welcome="Welcome",i.Editor="Editor",i.Examples="Examples",i.Run="Run",i.Output="Output",i.Sidepane="Sidepane",i.Share="Share"},97617:function(e,t,n){n.d(t,{ZP:function(){return S},fv:function(){return C},p0:function(){return _}});var r=n(41733),i=n(30509),o=n(4216),a=n(77450),l=n(61967),c=n(53129),s=n(42074),u=n(72333),d=n(94311),f=n(19068),h=n(64479),p=n(82230),m=n(94778),v=n(72093),g=n(51950),y=n(641),b=n(47336),w=n.n(b);n(50959);var Z=m.K.a,x=(0,a.iv)([v.l0.focusRingOnAfter,{"::after":{borderRadius:v.TV.space8,content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",zIndex:1}}]);function C(e){var t=e.tags,n=e.maxVisible,r=t.slice(0,void 0===n?3:n),i=t.length-r.length;return(0,o.BX)(m.G,{css:[v.l0.rowWithGap(4),v.l0.align.center],children:[r.map(function(e){return(0,o.tZ)(s.c,{small:!0,tag:e},e.id)}),i>0?(0,o.BX)(p.xv,{variant:"small",color:"dimmest",multiline:!1,children:["+",i]}):null]})}function _(e){var t=e.repl,n=e.showOwner,a=e.maxVisibleTags,s=e.smallerTitle,f=e.onReplClick,h=e.onUserClick,b=t.owner;return(0,o.BX)(m.G,{css:[v.l0.colWithGap(16),v.l0.justify.spaceBetween,v.l0.height("100%")],children:[(0,o.BX)(m.G,{css:[v.l0.rowWithGap(8),v.l0.align.start,v.l0.flex.growAndShrink(1)],children:[(0,o.tZ)(u.ZP,{size:84,iconUrl:t.iconUrl,alt:t.title}),(0,o.BX)(m.G,{css:[v.l0.flex.growAndShrink(1),v.l0.colWithGap(4)],children:[(0,o.tZ)(w(),(0,i._)((0,r._)({legacyBehavior:!0,passHref:!0},(0,l.j3)(t)),{children:(0,o.tZ)(Z,{css:[{color:"inherit"},x],onClick:f,children:(0,o.tZ)(p.xv,{variant:s?"subheadDefault":"subheadBig",multiline:!1,children:t.title})})})),n&&b?(0,o.tZ)(m.G,{css:[{maxWidth:"fit-content",zIndex:1}],children:(0,o.tZ)(g.Z,{username:b.username,children:(0,o.tZ)(y.ZP,{user:b,children:(0,o.BX)(Z,{css:[{color:"inherit"},v.l0.rowWithGap(4),v.l0.align.center,v.l0.focusRing,{"&:focus":{outlineOffset:2}},v.l0.borderRadius(8)],onClick:h,children:[(0,o.tZ)(d.q,{src:b.image,username:b.username,size:16,layout:"intrinsic"}),(0,o.tZ)(p.xv,{multiline:!1,children:b.username})]})})})}):null,t.description?(0,o.tZ)(p.xv,{color:"dimmer",maxLines:2,css:[v.l0.maxWidth(450)],multiline:!1,children:t.description}):null]})]}),(0,o.BX)(m.G,{css:[v.l0.rowWithGap(8),v.l0.justify.spaceBetween,v.l0.flex.wrap],children:[(0,o.tZ)(c.Z,{css:[v.l0.pb(2)],repl:t}),a?(0,o.tZ)(m.G,{css:[v.l0.position.relative,v.l0.pt(2),{zIndex:1}],children:(0,o.tZ)(C,{tags:t.tags,maxVisible:a})}):null]})]})}function S(e){var t=e.repl,n=e.showOwner,r=e.maxVisibleTags,i=e.smallerTitle,a=e.onReplClick,l=e.onUserClick,c=e.dataCy;return(0,o.tZ)(h.Tg,{css:[v.l0.borderRadius(8),v.l0.p(8),v.l0.position.relative,f.gU.filledAndOutlined,{border:"1px solid "+v.TV.outlineDimmest}],dataCy:c,children:(0,o.tZ)(_,{repl:t,showOwner:n,maxVisibleTags:r,smallerTitle:i,onReplClick:a,onUserClick:l})})}},53129:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(4216),i=n(32622),o=n(50511),a=n(82230),l=n(94778),c=n(66548),s=n(72093);function u(e){var t=e.count,n=e.children,i=e.tooltip,u=e.small,d=(0,o.d)(t);return(0,r.BX)(l.G,{"aria-label":i,"data-microtip-position":"left",role:"tooltip",css:[s.l0.rowWithGap(4),s.l0.align.center,s.l0.color.foregroundDimmer,{userSelect:"none",lineHeight:1}],children:[(0,r.tZ)(c.jS,{size:u?12:void 0,children:n}),(0,r.tZ)(a.xv,{variant:u?"small":void 0,color:"dimmer",multiline:!1,children:d})]})}n(50959);var d=n(31892),f=n(26382);function h(e){var t=e.repl;return(0,r.BX)(l.G,{css:[s.l0.rowWithGap(16),s.l0.align.center],children:[(0,r.tZ)(u,{small:!0,count:t.publicForkCount,tooltip:(0,i.Z)("fork",t.publicForkCount),children:(0,r.tZ)(d.Z,{})}),(0,r.tZ)(u,{small:!0,count:t.likeCount,tooltip:(0,i.Z)("like",t.likeCount),children:(0,r.tZ)(f.Z,{})})]})}},42074:function(e,t,n){n.d(t,{c:function(){return m},g:function(){return g}});var r=n(4216),i=n(77450),o=n(19068),a=n(64479),l=n(82230),c=n(94778),s=n(64318),u=n(72093),d=n(21063);n(50959);var f=(0,i.iv)({border:"1px solid "+u.TV.accentPrimaryDefault,backgroundColor:"transparent"}),h=function(e){var t=e.isActive,n=e.small;return(0,i.iv)([u.l0.p(n?4:8),u.l0.align.center,u.l0.rowWithGap(4),u.l0.fontSize(12),t?f:o.gU.outlined,u.l0.borderRadius(16),{color:"inherit","&:active":f,height:n?"auto":u.TV.space32}])};function p(e){var t=e.tag,n=e.isActive,i=e.isRemovable,o=e.small,f=o?"small":"text";return(0,r.tZ)(a.Tg,{elevated:!0,css:[u.l0.borderRadius(16)],children:(0,r.BX)(a.Tg,{elevated:n,css:[h({isActive:n,small:o})],children:[(0,r.BX)(c.G,{css:[u.l0.flex.row,u.l0.align.center,u.l0.flex.shrink(1)],children:[(0,r.tZ)(l.xv,{variant:f,color:"dimmest",multiline:!1,children:"#"}),(0,r.tZ)(l.xv,{color:"dimmer",variant:f,css:[u.l0.flex.shrink(1)],multiline:!1,children:t.id})]}),t.isOfficial&&!o?(0,r.tZ)(d.Z,{}):null,i?(0,r.tZ)(s.Z,{size:o?12:16}):null]})})}function m(e){var t=e.tag,n=e.isActive,i=e.small;return(0,r.tZ)(p,{tag:t,isActive:n,small:i,isRemovable:n})}var v=c.K.button;function g(e){var t=e.tag,n=e.onClick,i=e.isActive,o=e.small;return(0,r.tZ)(v,{css:[u.l0.reset.button],onClick:n,children:(0,r.tZ)(p,{tag:t,isActive:i,small:o,isRemovable:!0})})}},92031:function(e,t,n){n.d(t,{W:function(){return g},Z:function(){return y}});var r=n(41733),i=n(30509),o=n(66626),a=n(4216),l=n(71730),c=n(73064),s=n(72333),u=n(64479),d=n(94778),f=n(76575),h=n(29318),p=n(76171),m=n(72093),v=n(50959);function g(e){var t=(0,o._)((0,v.useState)(null),2),n=t[0],a=t[1],c=(0,o._)((0,v.useState)(null),2),s=c[0],u=c[1],d=(0,l.Z)({onUpload:function(t){var n=t.url;a(null),e(n)},onUploadPreview:function(e){var t=e.dataUrl;u(null),a(t)},onError:function(e){a(null),u(e.message)}}),f=(0,v.useCallback)(function(){return u(null)},[]);return(0,i._)((0,r._)({},d),{error:s,clearError:f,previewUrl:n})}function y(e){var t=(0,v.useRef)(null),n=e.size||48;return(0,a.BX)(d.G,{css:[m.l0.position.relative,{cursor:"pointer","&:hover .surface":{opacity:.8},"&:hover .icon":{opacity:1}}],onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},"aria-label":e.value?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",children:[e.value?(0,a.BX)(a.HY,{children:[(0,a.tZ)(s.ZP,{iconUrl:e.value,size:e.size,alt:"icon"}),(0,a.tZ)(u.Tg,{className:"surface",elevated:!0,css:[m.l0.borderRadius(8),m.l0.coverContainer,{opacity:e.isUploading?.8:0}]}),(0,a.tZ)(d.G,{className:"icon",css:[m.l0.coverContainer,m.l0.center,m.l0.color.accentPrimaryDefault,{overflow:"hidden",opacity:e.isUploading?1:0}],children:e.isUploading?(0,a.tZ)(h.Z,{}):(0,a.tZ)(f.Z,{})})]}):(0,a.tZ)(d.G,{css:[m.l0.center,m.l0.width(n),m.l0.height(n),m.l0.borderRadius(8),m.l0.color.foregroundDimmer,{border:"1px dashed "+m.TV.outlineDefault,"&:hover":{color:m.TV.accentPrimaryDefault,borderColor:m.TV.accentPrimaryDefault}}],children:(0,a.tZ)(p.Z,{})}),(0,a.tZ)("input",{css:[[m.l0.coverContainer,{opacity:0,zIndex:-1}]],ref:t,accept:c.W9.join(","),type:"file",onChange:function(t){var n=t.target,r=n.validity,i=n.files;if(r.valid){var o=i?i[0]:null;o&&e.onUpload(o)}}})]})}},57100:function(e,t,n){n.d(t,{d:function(){return l}});var r=n(21262),i=n(71440),o=n(4318);function a(){var e=(0,r._)(["\n  fragment BulkDeleteConfirmationModalRepl on Repl {\n    id\n    iconUrl\n    title\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        replitAppSubdomain\n        ...BuildStatusBadgeHostingDeployment\n      }\n    }\n  }\n  ","\n"]);return a=function(){return e},e}var l=(0,i.Ps)(a(),o.u)},33146:function(e,t,n){var r=n(66626),i=n(4216),o=n(23129),a=n(32622),l=n(72333),c=n(15235),s=n(18060),u=n(45271),d=n(99236),f=n(82230),h=n(94778),p=n(49224),m=n(55821),v=n(87128),g=n(72093),y=n(50959),b=(0,p.X)({wrapper:[g.l0.colWithGap(16)],repls:[g.l0.maxHeight("60vh"),g.l0.overflow("auto"),{"& > div":[g.l0.py(8),{borderTop:"1px solid "+g.TV.outlineDimmest}],"& > div:last-of-type":{borderBottom:"1px solid "+g.TV.outlineDimmest}}],row:[g.l0.colWithGap(8)],replRow:[g.l0.rowWithGap(8),g.l0.align.center],additionalReplsCount:[g.l0.pl(12),g.l0.pt(8)],buttons:[g.l0.rowWithGap(12),g.l0.justify.end]}),w=function(e){var t,n=e.repl,a=e.onConfirmedChange,c=(0,r._)((0,y.useState)(""),2),u=c[0],p=c[1],m=(null===(t=n.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"?n.hostingDeployment:null,g=(0,y.useRef)(!1),w=(null==m?void 0:m.replitAppSubdomain)?m.replitAppSubdomain:n.title;return(0,i.BX)(h.G,{css:b.row,children:[(0,i.BX)(h.G,{css:b.replRow,children:[(0,i.tZ)(l.ZP,{size:24,iconUrl:n.iconUrl,alt:""}),(0,i.tZ)(f.xv,{height:"singleLine",multiline:!1,children:n.title}),m?(0,i.tZ)(o.e,{deployment:m}):null]},n.id),m?(0,i.BX)(i.HY,{children:[(0,i.tZ)(d.E,{icon:(0,i.tZ)(v.Z,{}),colorway:"red",text:"This repl has been deployed. If you delete this Repl, the associated\nproduction deployment will also be shut down and deleted. To\nproceed, please type: ".concat(w)}),(0,i.tZ)(s.II,{placeholder:"Type here",value:u,onChange:function(e){var t=e.currentTarget.value;p(t);var n=t.trim()===w;n!==g.current&&a(n),g.current=n}})]}):null]})};t.Z=function(e){var t=e.selectedRepls,n=e.isOpen,o=e.onClose,l=e.onDelete,s=e.deleting,d=t.length,p=(0,a.Z)("Repl",d),v=t.filter(function(e){var t;return(null===(t=e.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"}).length,g=(0,a.Z)("Deployment",v),Z=v>0?" & ".concat(v>1?v+" ":""," ").concat(g):"",x=(0,r._)((0,y.useState)(0),2),C=x[0],_=x[1];return(0,y.useEffect)(function(){n||_(0)},[n]),(0,i.tZ)(u.u,{isOpen:n,onRequestClose:o,children:(0,i.BX)(h.G,{css:b.wrapper,children:[(0,i.BX)(f.h4,{variant:"subheadBig",level:2,children:["Delete ",p,v>0?" & ".concat(g):"","?"]}),(0,i.tZ)(f.xv,{color:"dimmer",children:"Are you sure? This cannot be undone. Some Repls may take a few minutes to finish deleting."}),(0,i.tZ)(h.G,{css:b.repls,children:t.map(function(e){return(0,i.tZ)(w,{css:b.row,repl:e,onConfirmedChange:function(e){return _(function(t){return t+(e?1:-1)})}},e.id)})}),(0,i.BX)(h.G,{css:b.buttons,children:[(0,i.tZ)(c.zx,{text:"Cancel",onClick:o,disabled:s}),(0,i.tZ)(c.zx,{iconLeft:(0,i.tZ)(m.Z,{}),onClick:l,disabled:s||C<v,text:"Yes, delete ".concat(d>1?d+" ":""," ").concat(p).concat(Z),colorway:"negative"})]})]})})}},98706:function(e,t,n){n.d(t,{I:function(){return b}});var r=n(42516),i=n(41733),o=n(30509),a=n(98924),l=n(4216),c=n(93507),s=n(38172),u=n(85763),d=n(64432),f=n(94778),h=n(47336),p=n.n(h),m=n(50959),v=n(66548),g=f.K.a,y=m.forwardRef(function(e,t){var n,s=e.alt,d=e.children,f=e.colorway,h=e.disabled,m=e.size,y=void 0===m?u.Pl:m,b=e.triggerProps,w=e.as,Z=e.href,x=e.prefetch,C=e.replace,_=e.scroll,S=e.shallow,k=e.className,E=(0,a._)(e,["alt","children","colorway","disabled","size","triggerProps","as","href","prefetch","replace","scroll","shallow","className"]),T=(0,i._)({disabled:h,style:(n={},(0,r._)(n,u.Xm.height,y+"px"),(0,r._)(n,u.Xm.width,y+"px"),n),css:f?u.t1.get(f):u.uW,ref:t},(0,c.d)(E,b)),R=(0,l.tZ)(v.jS,{alt:s,size:u.cy[y],children:d});return h?(0,l.tZ)(g,(0,o._)((0,i._)({"aria-disabled":h,className:k,role:"link"},T),{children:R})):(0,l.tZ)(p(),(0,o._)((0,i._)({legacyBehavior:!0,passHref:!0},{as:w,href:Z,prefetch:x,replace:C,scroll:_,shallow:S}),{children:(0,l.tZ)(g,(0,o._)((0,i._)({className:k,role:"link"},T),{children:R}))}))}),b=m.forwardRef(function(e,t){var n=e.alt,r=e.tooltipDelay,o=e.tooltipBehavior,c=e.tooltipPlacement,u=e.tooltipContents,f=(0,a._)(e,["alt","tooltipDelay","tooltipBehavior","tooltipPlacement","tooltipContents"]);return(0,l.tZ)(d.u,{delay:r,isDisabled:"hidden"===o,tooltip:null!=u?u:n,placement:c,children:function(e,r){return(0,l.tZ)(y,(0,i._)({alt:n,ref:(0,s.l)(t,r),triggerProps:e},f))}})});b.displayName="IconButtonLink"},90029:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(4216);n(50959);var i=n(72093),o=n(64479);function a(e){var t=e.className,n=e.children;return(0,r.tZ)(o.Tg,{elevated:!0,tag:"span",css:[{display:"inline",lineHeight:1},i.l0.fontSize(i.TV.fontSizeSmall),i.l0.borderRadius(4),i.l0.px(4),i.l0.font.code,t],children:n})}},35021:function(e,t,n){n.d(t,{Z0:function(){return S},ZE:function(){return D},sN:function(){return R}});var r=n(41733),i=n(30509),o=n(98924),a=n(4216),l=n(93507),c=n(15235),s=n(19068),u=n(30874),d=n(53928),f=n(82230),h=n(94778),p=n(49224),m=n(43449),v=n(66548),g=n(72093),y=n(50959),b=n(22857),w=n(71921),Z=n(66964),x=n(63911),C=n(42914),_=(0,p.X)({menu:[g.l0.viewStyle,g.l0.maxHeight("inherit"),g.l0.overflowY("auto")],item:[g.l0.display.flex,g.l0.borderRadius(),g.l0.px(8),g.l0.py(6),g.l0.align.center,g.l0.rowWithGap(8),g.l0.color.foregroundDefault,g.l0.cursor.pointer,{transitionProperty:"background-color, box-shadow",backgroundColor:"transparent",borderWidth:1,borderStyle:"solid",borderColor:"transparent",outline:"2px solid ".concat(g.TV.accentPrimaryDefault),outlineOffset:"-2px",outlineColor:"transparent"},{"&[data-hovered],&[data-focused]":{backgroundColor:s.vb.interactiveBackground},"&[data-selected]":{backgroundColor:s.vb.interactiveBackgroundActive},"&[aria-disabled]":{color:g.TV.foregroundDimmest,cursor:"not-allowed"}}],itemInner:[g.l0.colWithGap(4)],popover:[g.l0.p(4),{minWidth:"var(--trigger-width)"}],separator:[g.l0.mx(4),g.l0.my(2),g.l0.height(1),g.l0.backgroundColor.backgroundHighest]}),S=y.forwardRef(function(e,t){return(0,a.tZ)(b.Z,(0,i._)((0,r._)({},e),{css:_.separator,ref:t}))}),k=y.forwardRef(function(e,t){var n=e.dataCy,i=(0,o._)(e,["dataCy"]);return(0,a.tZ)(w.v2,(0,r._)({ref:t,css:_.menu,"data-cy":n},i))}),E=y.forwardRef(function(e,t){var n=e.multiline,c=e.height,s=(0,o._)(e,["multiline","height"]),u=(0,Z.jn)(x.j,"label");return(0,a.tZ)(f.xv,(0,i._)((0,r._)({},(0,l.d)(u,{multiline:void 0!==n&&n,height:void 0===c?"singleLine":c},s)),{ref:t}))}),T=y.forwardRef(function(e,t){var n=e.multiline,c=e.height,s=e.variant,u=(0,o._)(e,["multiline","height","variant"]),d=(0,Z.jn)(x.j,"description");return(0,a.tZ)(f.xv,(0,i._)((0,r._)({},(0,l.d)(d,{multiline:void 0!==n&&n,height:void 0===c?"singleLine":c,variant:void 0===s?"small":s},u)),{ref:t}))}),R=y.forwardRef(function(e,t){var n=e.dataCy,l=e.label,c=e.description,s=e.icon,d=e.href,f=e.as,p=e.shallow,m=e.scroll,y=e.isDestructive,b=e.isDisabled,Z=(0,o._)(e,["dataCy","label","description","icon","href","as","shallow","scroll","isDestructive","isDisabled"]);return(0,a.tZ)(w.sN,(0,i._)((0,r._)((0,i._)((0,r._)({},Z),{css:_.item,ref:t,isDisabled:b,style:y?{color:g.TV.accentNegativeStronger}:void 0,"data-cy":n,textValue:l}),(0,u.N)({href:d,as:f,shallow:p,scroll:m})),{children:(0,a.BX)(a.HY,{children:[(0,a.tZ)(v.jS,{size:16,children:s}),(0,a.BX)(h.G,{css:_.itemInner,children:[(0,a.tZ)(E,{children:l}),c?(0,a.tZ)(T,{children:c}):null]})]})}))}),D=y.forwardRef(function(e,t){var n=e.children,l=e.label,s=e.trigger,u=e.defaultOpen,f=e.isOpen,h=e.onOpenChange,p=e.dataCy,v=e.elevated,g=e.background,y=e.placement,b=(0,o._)(e,["children","label","trigger","defaultOpen","isOpen","onOpenChange","dataCy","elevated","background","placement"]),Z=s||(0,a.tZ)(c.zx,{iconLeft:(0,a.tZ)(m.Z,{}),text:null!=l?l:"",disabled:b.isDisabled});return(0,a.BX)(w.bF,(0,i._)((0,r._)({},{defaultOpen:u,isOpen:f,onOpenChange:h}),{children:[(0,a.tZ)(C.b.Provider,{value:{"data-cy":p},children:Z}),(0,a.tZ)(d.Bf,(0,i._)((0,r._)({},{elevated:void 0===v||v,background:g,placement:y}),{css:_.popover,noArrow:!0,children:(0,a.tZ)(k,(0,i._)((0,r._)({ref:t},b),{children:n}))}))]}))})},15758:function(e,t,n){n.d(t,{T:function(){return u}});var r=n(41733),i=n(30509),o=n(98924),a=n(4216);n(50959);var l=n(94778),c=n(8261),s=l.K.button;function u(e){var t=e.iconLeft,n=e.iconRight,l=e.text,u=e.innerRef,d=e.colorway,f=(0,o._)(e,["iconLeft","iconRight","text","innerRef","colorway"]);return(0,a.BX)(s,(0,i._)((0,r._)({ref:u},f),{css:[(0,c.E)({colorway:d,clickable:!0,variant:"filled",iconLeft:!!t,iconRight:!!n}),{color:"inherit"}],children:[t,(0,a.tZ)("span",{children:l}),n]}))}},83138:function(e,t,n){n.d(t,{M:function(){return f}});var r=n(41733),i=n(30509),o=n(98924),a=n(4216),l=n(50959),c=n(82230),s=n(49224),u=n(72093),d=(0,s.X)({prose:[{"& ul, & ol":{marginLeft:16,paddingBlock:4},"& ul":{listStyle:"initial"},"& a":u.l0.linkStyle,"& h1, & h2, & h3":{display:"block",marginBottom:8},"& * + h1, & * + h2, & * + h3":{marginTop:8}}]}),f=function(e){var t=e.children,n=(0,o._)(e,["children"]);return(0,a.tZ)(c.xv,(0,i._)((0,r._)({multiline:!0,css:d.prose},n),{children:l.Children.map(t,function(e){return"string"==typeof e?(0,a.tZ)("span",{children:e}):e})}))}},23987:function(e,t,n){n.d(t,{O:function(){return p}});var r=n(4216),i=n(60199),o=n(70501),a=n(64318),l=n(27649),c=n(15235),s=n(80012),u=n(85763),d=n(82230),f=n(94778),h=n(72093);function p(e){var t=e.title,n=e.content,l=e.colorway,p=void 0===l?"primary":l,v=e.totalSteps,g=void 0===v?1:v,y=e.currentStepIndex,b=void 0===y?0:y,w=e.onDismiss,Z=e.onCurrentStepChange,x=e.cypressCloseData;return(0,r.BX)(f.G,{css:[h.l0.p(8),{paddingBottom:12,paddingRight:t?void 0:32,backgroundColor:s.Br[p].dimmest,border:"1px solid "+s.Br[p].dimmer,position:"relative"},h.l0.borderRadius(8),h.l0.shadow(2),h.l0.colWithGap(8)],children:[(0,r.tZ)(u.hU,{alt:"Close",colorway:p,css:{position:"absolute",top:h.TV.space8,right:h.TV.space8},onClick:w,dataCy:x,children:(0,r.tZ)(a.Z,{})}),t?(0,r.tZ)(d.xv,{variant:"subheadBig",multiline:!1,children:t}):null,"function"==typeof n?(0,r.tZ)(n,{}):(0,r.tZ)(d.xv,{children:n}),g>1&&Z?(0,r.BX)(f.G,{css:[h.l0.flex.row,h.l0.align.center,h.l0.justify.spaceBetween],children:[(0,r.tZ)(c.zx,{css:{visibility:b<=0?"hidden":void 0},colorway:p,text:"Back",iconLeft:(0,r.tZ)(i.Z,{}),onClick:function(){return Z(b-1)}}),(0,r.tZ)(m,{colorway:p,total:g,current:b}),(0,r.tZ)(c.zx,{"data-autofocus":!0,colorway:p,text:b>=g-1?"Done":"Next",iconLeft:(0,r.tZ)(o.Z,{}),onClick:function(){return b>=g-1?w():Z(b+1)}})]}):null]})}function m(e){var t=e.total,n=e.current,i=e.colorway;return(0,r.BX)(f.G,{children:[(0,r.tZ)(l.T,{children:(0,r.tZ)("progress",{value:n+1,max:t,"aria-label":"Step"})}),(0,r.tZ)(f.G,{"aria-hidden":!0,css:h.l0.rowWithGap(8),children:Array(t).fill(0).map(function(e,t){return(0,r.tZ)(f.G,{css:[h.l0.borderRadius("full"),{width:h.TV.space8,height:h.TV.space8,backgroundColor:t===n?s.Br[i].stronger:s.Br[i].dimmer}]},t)})})]})}},54314:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(66626),i=n(50959),o={isConnecting:!0,channel:null,context:null};function a(e){var t=e.container,n=e.service,a=e.name,l=e.skip,c=void 0!==l&&l,s=(0,r._)((0,i.useState)(o),2),u=s[0],d=s[1];return(0,i.useEffect)(function(){d(o);var e=!1,r=t.openChannel({service:n,name:a,skip:function(){return c}},function(t){if(!e)return d({context:t.context,channel:t.channel,isConnecting:!1}),function(t){e||d({isConnecting:t.willReconnect,channel:null,context:null})}});return function(){e=!0,r()}},[t,n,a,c]),u}},33980:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(66626),i=n(50959);function o(e){var t=(0,r._)((0,i.useState)(e.getConnectionState()),2),n=t[0],o=t[1];return(0,i.useEffect)(function(){return e.onConnectionStateChanged(o)},[e]),n}},21625:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(66626),i=n(33980),o=n(50959),a=n(2993),l=n(30095),c=n(59786);function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fallbackToReplCo:!0},n=(0,i.Z)(e),s=(0,r._)((0,o.useState)(null),2),u=s[0],d=s[1],f=(0,c.P5)({controlName:"flag-webview-fallback-url"});return(0,o.useEffect)(function(){if(e.getConnectionState()===a.em.CONNECTED){var n=e.getDotdevUrl();if(n){if(!f||!t.fallbackToReplCo||(0,l.A_)()){d(n);return}d(n.replace(/.replit.dev$/,".repl.co"))}}},[e,n,f,t]),u}},10118:function(e,t,n){n.d(t,{J_:function(){return d},O2:function(){return s},hw:function(){return u}});var r=n(57967),i=n(91175),o=n(21625),a=n(48058),l=n(81199),c=n(94563);function s(e){return 80===e||443===e}function u(e,t){var n=new URL(e);return!t||s(t)?n.port&&(n.port=""):n.port=t.toString(),n}function d(e){var t,n,s,d=(0,r.Z)(),f=!(n=(0,a.bg)()).length||n.some(function(e){return 80===e.configuration.externalPort})?80:null!==(t=n[0].configuration.externalPort)&&void 0!==t?t:80,h=(0,l.Z)().container,p=(0,o.Z)(h),m=(0,c.I5)({variables:{id:e}}).data,v=(0,i.T)();if(!f&&!v||!((null==m?void 0:m.repl.__typename)==="Repl"?m.repl:null)||!p)return null;var g=u(p,f).toString(),y=u(p+"/__replco/devtools_wrapper.html",f).toString();return{iframeSrc:d?(s=new URL(g)).hostname.endsWith(".localhost")?g:(s.protocol="https:",s.toString()):y,presentationUrl:g}}},5142:function(e,t,n){n.d(t,{H:function(){return eJ}});var r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y,b,w=n(27387),Z=n(41733),x=n(30509),C=n(66626),_=n(96583),S=n(51305),k=n(60305),E=n(70316),T=n(50959),R=n(25150),D=n(367),I=n(36632),B=n(61762),G=n(43182),A=n(12663),P=n(38117);function L(e){return N.apply(this,arguments)}function N(){return(N=(0,w._)(function(e){var t,n;return(0,_.Jh)(this,function(r){return t=e.container,n=e.service,[2,new Promise(function(e){var r=t.openChannel({service:n},function(t){return e([t.channel,r]),r})})]})})).apply(this,arguments)}(r=d||(d={})).OUTPUT="OUTPUT",r.ERROR="ERROR",r.STATE_CHANGED="STATE_CHANGED",r.CHANNEL_OPENED="CHANNEL_OPENED";var O=n(35377);(f||(f={})).MESSAGE_RECEIVED="MESSAGE_RECEIVED";var U=n(2993),M=n(48376),X=n(63257),F=n(75706),W=n(12285),H=n(36556),V=n(91620).lW,z=new TextEncoder,j=new TextDecoder,q=(i=/[a-z\d_-]+: [a-z\d_ :;.,/"'?!(){}[\]@<>=+*#$&`|~^%-]+/.source,RegExp("(".concat(i,"\\r\\n)*(").concat(i,")$"),"i")),J=function(){"use strict";function e(t){(0,W._)(this,e),this.onMessage=t,this.buffer=new Uint8Array,this.read=this.read.bind(this)}var t=e.prototype;return t.consumeHeaders=function(){var e=function(e){var t=e.findIndex(function(t,n){return 13===t&&10===e[n+1]&&13===e[n+2]&&10===e[n+3]});if(-1!==t){var n=j.decode(e.slice(0,t)),r=n.match(q);if(!r)throw H.kg.error("Failed to parse LSP header, no matches",{fragment:n}),Error("Unable to match header, text: ".concat(n));var i=Object.create(null),o=r[0].split("\r\n"),a=!0,l=!1,c=void 0;try{for(var s,u=o[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value,f=d.indexOf(":");if(-1===f)throw H.kg.error("Failed to parse LSP header, missing colon",{fragment:n}),Error('Message header must separate key and value using ":"');var h=d.substr(0,f),p=d.substr(f+1).trim();if("Content-Length"===h){var m=parseInt(p,10);if(isNaN(m))throw H.kg.error("Failed to parse LSP header, NaN content length",{fragment:n}),Error("Content-Length value must be a number.");i[h]=parseInt(p,10)}else i[h]=p}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}if(null==i["Content-Length"])throw H.kg.error("Failed to parse LSP header, no Content-Length",{fragment:n}),Error("Header must provide a Content-Length property.");return{headerLength:t,value:i}}}(this.buffer);if(e)return this.buffer=this.buffer.slice(e.headerLength+4),e},t.read=function(e){for(this.buffer=(t=this.buffer,n=z.encode(e),(r=new Uint8Array(t.length+n.length)).set(t),r.set(n,t.length),r);null!==(i=this.headers)&&void 0!==i?i:this.headers=this.consumeHeaders();){var t,n,r,i,o=this.headers.value["Content-Length"];if(this.buffer.length<o)return;var a=function(e,t,n){var r=j.decode(e.slice(0,t));try{return{json:JSON.parse(r),buffer:e.slice(t)}}catch(c){var i=V.from(e).toString();if(c instanceof SyntaxError&&"Unexpected end of JSON input"===c.message){H.kg.info("Failed to parse LSP message, falling back to json parsing",{buffer:i,length:t,rpcContent:r,attempt:"original-length",headers:JSON.stringify(n)});var o=function(e,t){for(var n=0,r=0,i=!1,o=t;o<e.length+1;o++){if(o!==t&&!n&&!r&&!i)return o;var a=e[o];switch(a){case 92:o++;continue;case 34:i=!i;continue}if(!i)switch(a){case 123:n++;break;case 125:n--;break;case 91:r++;break;case 93:r--}}return -1}(e,0);if(-1!==o){var a=e.slice(0,o),l=j.decode(a);try{return{json:JSON.parse(l),buffer:e.slice(o)}}catch(e){H.kg.error("Failed to parse LSP message",{givenError:e,buffer:i,length:t,rpcContent:r,attempt:"recomputed-length"})}}}else H.kg.error("Failed to parse LSP message",{givenError:c,buffer:i,length:t,rpcContent:r,attempt:"content-length"});return{json:void 0,buffer:e.slice(t)}}}(this.buffer,o,this.headers),l=a.json,c=a.buffer;if(this.headers=void 0,this.buffer=c,void 0!==l)try{this.onMessage(l)}catch(e){G.Tb(e)}}},e}(),Y=n(91620).lW,$=n(39126),K=n(52423),Q=n(54863),ee=n(47527),et=n(29339),en=n.n(et),er=n(54960),ei=n(3341),eo=n.n(ei),ea=n(48594),el=n(98924),ec=n(81202),es=n.n(ec),eu=n(35554),ed=n.n(eu),ef=n(24598),eh=n(84570),ep=n(22712),em=function(e){var t=e.configurationSupport;return{textDocument:{synchronization:{dynamicRegistration:!0,didSave:!0},signatureHelp:{dynamicRegistration:!0,signatureInformation:{documentationFormat:["markdown","plaintext"]}},publishDiagnostics:{relatedInformation:!0,tagSupport:{valueSet:[1,2]}},formatting:{dynamicRegistration:!0},documentSymbol:{dynamicRegistration:!0,hierarchicalDocumentSymbolSupport:!0,symbolKind:{valueSet:eh.Z}},semanticTokens:{dynamicRegistration:!0,requests:{range:!0,full:{delta:!0}},tokenTypes:ep.rN,tokenModifiers:ep.ho,formats:[ef.TokenFormat.Relative],overlappingTokenSupport:!0,multilineTokenSupport:!0,serverCancelSupport:!0,augmentsSyntaxTokens:!0},definition:{dynamicRegistration:!0,linkSupport:!0},typeDefinition:{dynamicRegistration:!0},implementation:{dynamicRegistration:!0},references:{dynamicRegistration:!0},rename:{dynamicRegistration:!0,prepareSupport:!0},completion:{dynamicRegistration:!0,contextSupport:!0,completionItem:{commitCharactersSupport:!0,documentationFormat:["markdown","plaintext"],labelDetailsSupport:!0,resolveSupport:{properties:["detail","documentation"]},snippetSupport:!0},completionList:{itemDefaults:["commitCharacters"]}},codeAction:{resolveSupport:{properties:["edit"]},dataSupport:!0,dynamicRegistration:!0,isPreferredSupport:!0,codeActionLiteralSupport:{codeActionKind:{valueSet:Object.values(ef.CodeActionKind)}}},hover:{dynamicRegistration:!0,contentFormat:["markdown","plaintext"]}},workspace:{applyEdit:!0,didChangeConfiguration:t.clientToServer||t.serverToClient?{dynamicRegistration:!0}:void 0,configuration:t.serverToClient,semanticTokens:{refreshSupport:!0},executeCommand:{dynamicRegistration:!0},workspaceEdit:{documentChanges:!0,resourceOperations:[ef.ResourceOperationKind.Create,ef.ResourceOperationKind.Delete,ef.ResourceOperationKind.Rename]}}}},ev=n(47703),eg=n(53557),ey=function(){"use strict";function e(){(0,W._)(this,e)}var t=e.prototype;return t.supports=function(e){return e.includes("css-language-server")},t.onResponse=function(e,t){return"textDocument/hover"===e?this.onHover(t):t},t.onHover=function(e){if("error"in e)return e;var t=e.result;return"cancelled"in e&&!1!==e.cancelled||!t?e:(Array.isArray(t.contents)&&(t.contents={kind:"markdown",value:["```html",t.contents[0],"```",t.contents[1],""].join("\n")}),(0,x._)((0,Z._)({},e),{result:t}))},e}(),eb=[new(function(){"use strict";function e(){(0,W._)(this,e)}var t=e.prototype;return t.supports=function(e){return e.includes("typescript-language-server")},t.onResponse=function(e,t){return"textDocument/completion"===e?this.onCompletion(t):t},t.onCompletion=function(e){if("error"in e||"cancelled"in e&&!1!==e.cancelled)return e;var t=e.result;if(!t)return e;Array.isArray(t)&&(t={isIncomplete:!1,items:t});for(var n=0;n<t.items.length;n++){var r=t.items[n];r.sortText&&r.sortText.startsWith("￿")&&(r.sortText=r.sortText.replace("￿",""))}return(0,x._)((0,Z._)({},e),{result:t})},e}()),new ey],ew=function(){"use strict";function e(){(0,W._)(this,e)}var t=e.prototype;return t.supports=function(){return!0},t.onResponse=function(e,t){return t},e}(),eZ=n(23689),ex=n(118),eC=n(91620).lW;function e_(e,t){var n,r;return null!==(r=null===(n=eg.$R.from(e))||void 0===n?void 0:n.id)&&void 0!==r?r:t}function eS(){return Math.floor(2147483647*Math.random())}function ek(e){var t=JSON.stringify((0,x._)((0,Z._)({},e),{jsonrpc:"2.0"})),n=eC.byteLength(t,"utf8");return"Content-Length: ".concat(n,"\r\n\r\n").concat(t)}function eE(e,t){var n,r,i,o,a,l;return t&&t?!!(eo()(null==e?void 0:e.fileTypeAttrs,t.fileTypeAttrs)&&eo()(null==e?void 0:null===(n=e.config)||void 0===n?void 0:n.startCommand,null===(r=t.config)||void 0===r?void 0:r.startCommand)&&eo()(null==e?void 0:null===(i=e.config)||void 0===i?void 0:i.initializationOptionsJson,null===(o=t.config)||void 0===o?void 0:o.initializationOptionsJson)&&eo()(null==e?void 0:null===(a=e.config)||void 0===a?void 0:a.configurationJson,null===(l=t.config)||void 0===l?void 0:l.configurationJson)):!!t==!!t}function eT(e,t){return eR.apply(this,arguments)}function eR(){return(eR=(0,w._)(function(e,t){var n;return(0,_.Jh)(this,function(r){switch(r.label){case 0:return[4,e.exec("pwd")];case 1:if(null!==(n=r.sent()).error){if(!t())return[2,{error:Error("LSPNix: Could not get working directory "+n.error),workingDirectory:null}];return[2,eT(e,t)]}return[2,{error:null,workingDirectory:n.output.replace("\n","")}]}})})).apply(this,arguments)}(o=h||(h={})).INITIALIZED="INITIALIZED",o.READY="READY",o.DIAGNOSTICS="DIAGNOSTICS",o.SERVER_STATE_CHANGE="SERVER_STATE_CHANGE",o.SERVER_HEALTH_CHANGE="SERVER_HEALTH_CHANGE",o.SERVER_CAPABILITIES_CHANGE="SERVER_CAPABILITIES_CHANGE",o.REQUEST="REQUEST",o.RESPONSE="RESPONSE",o.CANCEL_REQUEST="CANCEL_REQUEST",o.SEND_NOTIFICATION="SEND_NOTIFICATION",o.RECEIVE_NOTIFICATION="RECEIVE_NOTIFICATION",o.SEMANTIC_TOKENS_REFRESH="SEMANTIC_TOKENS_REFRESH",(a=p||(p={})).OUTPUT="OUTPUT",a.ERROR="ERROR",a.STATE_CHANGED="STATE_CHANGED",a.CHANNEL_OPENED="CHANNEL_OPENED";var eD=n(36559),eI=n(40824);(l=m||(m={})).USER_JOIN="USER_JOIN",l.USER_LEAVE="USER_LEAVE",l.USERS_UPDATE="USERS_UPDATE",l.USER_OPENED_FILE="USER_OPENED_FILE",l.FOLLOWED_USER_CHANGED="FOLLOWED_USER_CHANGED",l.FOLLOWING_USERS_CHANGED="FOLLOWING_USERS_CHANGED";var eB=n(32902),eG=n(19327),eA=n(37711),eP=n(45929),eL=n(78986);function eN(e){var t,n,r;return(null===(t=e.runner.id)||void 0===t?void 0:t.startsWith(".replit/"))?0:(null===(n=e.runner.id)||void 0===n?void 0:n.startsWith("module:"))?1:(null===(r=e.runner.id)||void 0===r?void 0:r.startsWith("language:"))?2:3}var eO=n(41974),eU=n(92674),eM=n.n(eU);(v||(v={})).MESSAGE="MESSAGE";var eX=function(){"use strict";function e(t){(0,W._)(this,e),this.buffer=Array(t).fill(null),this.start=0,this.end=0,this.isFull=!1}var t=e.prototype;return t.write=function(e){this.buffer[this.end]=e,this.end=(this.end+1)%this.buffer.length,this.isFull&&(this.start=(this.start+1)%this.buffer.length),this.end===this.start&&(this.isFull=!0)},t.readAll=function(){return this.start!==this.end||this.isFull?this.start<this.end?this.buffer.slice(this.start,this.end).join(""):this.buffer.slice(this.start).concat(this.buffer.slice(0,this.end)).join(""):""},e}();function eF(e){var t=new eX(e.maxHistorySize),n=(0,A.ZP)();return{emitMessage:function(e){t.write(e),n.emit("MESSAGE",e)},onMessage:function(e){return n.on("MESSAGE",e),Promise.resolve().then(function(){return e(t.readAll())}),function(){return n.removeListener("MESSAGE",e)}}}}function eW(e){return 1e3*e.seconds+e.nanos/1e6}var eH=n(25114).F,eV=" \x1b[?25l";(c=g||(g={})).BEFORE_RUN="BEFORE_RUN",c.SERVER="SERVER",c.NONE="NONE",c.STOPPING="STOPPING";var ez=n(81031);(s=y||(y={})).DEEPLINK_CHANGED="DEEPLINK_CHANGED",s.SESSION_STATE_CHANGED="SESSION_STATE_CHANGED";var ej=n(42516),eq=n(45077);function eJ(e){var t=(0,C._)((0,T.useState)(null),2),n=t[0],r=t[1];return(0,T.useEffect)(function(){var t,n,i,o,a,l,c,s,u,h,v,g,T,N,W,V,z,j,q,et,ei,eo,ec,eu,ef,eh,ep,ey,eC,eR,eU,eX,eJ,eY,e$,eK,eQ,e0,e1,e2,e4,e3,e8,e6,e5,e7,e9,te,tt,tn,tr,ti,to,ta,tl,tc=function(e){var t=S.D.active();if(e.openTelemetryTracing)return(0,D.eh)(t,"workspace.useCreateServices")}(e),ts=(eo=void 0===(ei=(t=(0,x._)((0,Z._)({},e),{ctx:null==tc?void 0:tc.childCtx})).runnerMode)?"outputs":ei,ec=t.onUnrecoverableError,eu=t.openFile,ef=t.openMultipleFiles,eh=t.openMultipleURLs,ep=t.onFirewallDenied,ey=t.enableUserEvents,eC=t.enableMultipleLSPClientsPerFile,eR=t.enableReplspaceSshTokenPassthrough,eU=t.onPresenceCommand,eX=t.getColorForUser,eJ=t.openTelemetryTracing,eY=t.ctx,e$=t.shouldAutoFlushRef,eQ=function(e){var t=e.container,n=e.enabled,r=e.onEventSent,i=(0,A.ZP)();r&&i.on(b.EVENT_SENT,r);var o=null;function a(e,t){return l.apply(this,arguments)}function l(){return(l=(0,w._)(function(e,r){var o,a,l,s,u,d,f,h;return(0,_.Jh)(this,function(p){switch(p.label){case 0:if(!n)return[2];return[4,function(){return c.apply(this,arguments)}()];case 1:if(l=p.sent(),u=null==(s=t.getContext())?void 0:null===(o=s.currentUser)||void 0===o?void 0:o.id,d=null==s?void 0:null===(a=s.repl)||void 0===a?void 0:a.id,f=window.location.href,h={userEvent:{eventName:e,eventData:function e(t){if(!("object"==typeof t&&null!==t&&null!==Object.getPrototypeOf(t)))throw Error("encodeBareStruct must be called with a plain object");return{fields:Object.entries(t).reduce(function(t,n){var r=(0,C._)(n,2),i=r[0],o=r[1];return void 0===o||"object"==typeof o&&o&&0===Object.keys(o).length?t:(0,x._)((0,Z._)({},t),(0,ej._)({},i,function t(n){switch(void 0===n?"undefined":(0,eq._)(n)){case"string":return{kind:"stringValue",stringValue:n};case"number":return{kind:"numberValue",numberValue:n};case"boolean":return{kind:"boolValue",boolValue:n};case"object":if(null===n)return{kind:"nullValue",nullValue:null};if(Array.isArray(n))return{kind:"listValue",listValue:{values:n.map(t)}};return{kind:"structValue",structValue:e(n)};default:throw Error("Unexpected value: ".concat(n))}}(o)))},{})}}((0,Z._)({userId:u,replId:d,url:f},r))}},"open"!==l.status)return G.$e(function(e){e.setTag("service","user-events"),e.setExtra("command",h),e.setExtra("userId",u),e.setExtra("replId",d),e.setExtra("url",f),e.setExtra("channelId",l.id),G.Tb(Error("UserEvents channel is not open: ".concat(l.status)))}),[2];return i.emit(b.EVENT_SENT,e,r),l.send(h),[2]}})})).apply(this,arguments)}function c(){return(c=(0,w._)(function(){return(0,_.Jh)(this,function(e){return o?[2,o]:[2,new Promise(function(e){i.once(b.CHANNEL_OPENED,function(t){e(t)})})]})})).apply(this,arguments)}return a("meta:start",{}),t.openChannel({service:"null",skip:function(){return!n}},function(e){var t=e.channel;return a("meta:ready",{}),o=t,i.emit(b.CHANNEL_OPENED,t),function(){o=null}}),{emit:a}}({container:eK=(0,U.ZP)({onUnrecoverableError:ec,onFirewallDenied:ep,ctx:eY}),enabled:!!(void 0!==ey&&ey)}),e0=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,A.ZP)();t.setMaxListeners(1e3);var n=null,r={openFiles:[],activeTab:0};function i(e){es()(r,e)||(r=e,t.emit(y.SESSION_STATE_CHANGED,r))}return{onSessionStateChanged:function(e){return t.on(y.SESSION_STATE_CHANGED,e),function(){t.removeListener(y.SESSION_STATE_CHANGED,e)}},onDeeplinkUpdated:function(e){return t.on(y.DEEPLINK_CHANGED,e),n&&(e(n),n=null),function(){t.removeListener(y.DEEPLINK_CHANGED,e)}},openFile:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.openFile){e.openFile({path:t,newTab:n.newTab,newPane:n.newPane,newPaneEdge:n.newPaneEdge,col:n.col,line:n.line});return}var o=n.tabIndex,a=n.newTab;if(void 0!==o){!function(e,t){var n=t||r.openFiles.length;if(e<0||e>=n||!Number.isInteger(e))throw Error("Invalid index: ".concat(e,". Index must be an integer between 0 and ").concat(n))}(o,r.openFiles.length+1);var l=r.openFiles.slice(),c=r.openFiles.indexOf(t);if(-1===c){l.splice(o,1,t),i({openFiles:l,activeTab:l.indexOf(t)});return}if(c===o){i((0,x._)((0,Z._)({},r),{activeTab:l.indexOf(t)}));return}l.splice(c,1),l.splice(o,0,t);var s=l.indexOf(t);i({openFiles:l,activeTab:s});return}if(r.openFiles.includes(t)){i((0,x._)((0,Z._)({},r),{activeTab:r.openFiles.indexOf(t)}));return}var u=r.openFiles.slice();if(a){var d=0===u.length?0:r.activeTab+1;u.splice(d,0,t),i({openFiles:u,activeTab:d});return}var f=r.activeTab;u.splice(f,1,t),i({openFiles:u,activeTab:f})},updateDeeplink:function(e){t.emit(y.DEEPLINK_CHANGED,e),n=e},getActiveFile:function(){var e=r.openFiles,t=r.activeTab;if(0!==e.length)return e[t]},getState:function(){return r}}}({openFile:eu}),e1=(0,$.Z)({container:eK}),e2=function(e){var t=e.container,n=e.onCommand,r=e.getColorForUser,i=(0,A.ZP)();i.setMaxListeners(1/0);var o=[],a=null,l=[],c={},s=null;function u(){return d.apply(this,arguments)}function d(){return(d=(0,w._)(function(){return(0,_.Jh)(this,function(e){return s?[2,s]:[2,new Promise(function(e){i.once(m.USERS_UPDATE,function(){if(!s)throw Error("Expected presenceChannel to be set");e(s)})})]})})).apply(this,arguments)}function f(e){es()(a,e)||(a=e,i.emit(m.FOLLOWED_USER_CHANGED,e))}function h(){return(h=(0,w._)(function(e){var t,n;return(0,_.Jh)(this,function(r){switch(r.label){case 0:if((null==a?void 0:a.username)===e)throw Error("Already following user with username ".concat(e));if(!a)return[3,2];return[4,p()];case 1:r.sent(),r.label=2;case 2:return[4,u()];case 3:if(t=r.sent(),!(n=o.find(function(t){return t.username===e})))return[2];return f(n),n.sessions.forEach(function(e){t.send({followUser:{session:e.id}})}),[2]}})})).apply(this,arguments)}function p(){return v.apply(this,arguments)}function v(){return(v=(0,w._)(function(){var e,t;return(0,_.Jh)(this,function(n){switch(n.label){case 0:if(!a)throw Error("No user to unfollow");return e=a,f(null),[4,u()];case 1:return t=n.sent(),e.sessions.forEach(function(e){t.send({unfollowUser:{session:e.id}})}),[2]}})})).apply(this,arguments)}return t.openChannel({service:"presence",name:"presencer"},function(e){var t=e.channel;return t.onCommand(function(e){null==n||n(e);var t={cmd:e,emitter:i,activeUsers:o,userIdToFile:c,followedUser:a,setFollowedUser:f,followingUsers:l,getColorForUser:r};switch(e.body){case"roster":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=e.followedUser,a=e.followingUsers,l=e.setFollowedUser,c=e.getColorForUser,s=t.roster;if(s){var u=s.user,d=s.files;if(u&&d){var f=new Set;if(r.splice(0,r.length),u.forEach(function(e){if(!(!e.id||!e.name||!e.roles||f.has(e.id))){var t=d.filter(function(t){return t.userId===e.id}).map(function(e){if(!e.session||!e.timestamp)throw Error("Expected session and associated with user");return{id:e.session,activeFile:e.file||null,timestamp:(0,eI.gs)(e.timestamp)}}),n=null==c?void 0:c({userId:e.id});r.push({id:e.id,username:e.name,roles:e.roles,color:null!=n?n:(0,eI.i7)(r),sessions:t}),f.add(e.id)}}),r.forEach(function(e){i[e.id]=(0,eI.f0)(e)}),n.emit(m.USERS_UPDATE,(0,X._)(r)),a.filter(function(e){return!r.some(function(t){return t.id===e.id})}).forEach(function(e){var t=a.indexOf(e);-1!==t&&(a.splice(t,1),n.emit(m.FOLLOWING_USERS_CHANGED,{followingUsers:(0,X._)(a),user:e,type:"unfollow"}))}),o){if(!r.some(function(e){return e.id===o.id})){l(null);return}var h=i[o.id];n.emit(m.USER_OPENED_FILE,{user:o,file:h})}}}}(t);break;case"join":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=e.getColorForUser,a=t.join;if(a.id&&a.name&&a.roles&&a.session){var l=r.find(function(e){return e.id===a.id}),c=Math.floor(Date.now()/1e3),s=B.google.protobuf.Timestamp.create({seconds:c}),u=(0,eI.gs)(s);if(l)l.sessions.push({id:a.session,activeFile:null,timestamp:u});else{var d=null==o?void 0:o({userId:a.id}),f={id:a.id,username:a.name,roles:a.roles,color:null!=d?d:(0,eI.i7)(r),sessions:[{id:a.session,activeFile:null,timestamp:u}]};i[a.id]=null,r.push(f),n.emit(m.USER_JOIN,f),n.emit(m.USERS_UPDATE,(0,X._)(r))}}}(t);break;case"part":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=e.followedUser,a=e.followingUsers,l=e.setFollowedUser;if(t.part&&t.part.id&&t.part.session){var c=t.part,s=c.id,u=c.session,d=r.findIndex(function(e){return e.id===s}),f=r[d];if(1===f.sessions.length){r.splice(d,1),delete i[f.id],n.emit(m.USER_LEAVE,f),n.emit(m.USERS_UPDATE,(0,X._)(r)),o&&l(null);var h=a.findIndex(function(e){return e.id===f.id});-1!==h&&(a.splice(h,1),n.emit(m.FOLLOWING_USERS_CHANGED,{followingUsers:(0,X._)(a),user:f,type:"unfollow"}))}else{f.sessions=f.sessions.filter(function(e){return e.id!==u});var p=(0,eI.f0)(f);i[f.id]!==p&&(i[f.id]=p,n.emit(m.USER_OPENED_FILE,{user:f,file:p}))}}}(t);break;case"fileOpened":!function(e){var t=e.emitter,n=e.cmd,r=e.activeUsers,i=e.userIdToFile;if(n.fileOpened){var o=n.fileOpened,a=o.userId,l=o.file,c=o.timestamp,s=o.session,u=l||null;if(!a||!c)throw Error("Expected userId and timestamp associated with file opened command");var d=r.find(function(e){return e.id===a});if(!d)throw Error("Expected user with ID ".concat(a));var f=d.sessions.find(function(e){return e.id===s});if(!f)throw Error("Expected session with ID ".concat(f));f.activeFile=u,f.timestamp=(0,eI.gs)(c),i[a]=u,t.emit(m.USER_OPENED_FILE,{user:d,file:u})}}(t);break;case"followUser":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.followingUsers,o=t.followUser;if(!o.session)throw Error("Expected session associated with follow user");var a=o.session,l=(0,eI.N5)(a,r);i.some(function(e){return e.id===l.id})||(i.push(l),n.emit(m.FOLLOWING_USERS_CHANGED,{followingUsers:(0,X._)(i),user:l,type:"follow"}))}(t);break;case"unfollowUser":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.followingUsers,o=t.unfollowUser;if(!o.session)throw Error("Expected session associated with follow user");var a=o.session,l=(0,eI.N5)(a,r),c=i.findIndex(function(e){return e.id===l.id});-1!==c&&(i.splice(c,1),n.emit(m.FOLLOWING_USERS_CHANGED,{followingUsers:(0,X._)(i),user:l,type:"unfollow"}))}(t);break;case"sessionTimestampUpdated":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=t.sessionTimestampUpdated;if(!o.session||!o.timestamp)throw Error("Expected session and tiemstamp associated with update");var a=o.session,l=(0,eI.N5)(a,r),c=i[l.id],s=l.sessions.find(function(e){return e.id===a});if(!s)throw Error("Expected user ".concat(l.id," to have a session with ID ").concat(a));s.timestamp=(0,eI.gs)(o.timestamp);var u=s.activeFile;u!==c&&(i[l.id]=u,n.emit(m.USER_OPENED_FILE,{user:l,file:u}))}(t)}}),s=t,function(){s=null}}),{onUserLeave:function(e){return i.on(m.USER_LEAVE,e),function(){i.removeListener(m.USER_LEAVE,e)}},onUserJoin:function(e){return i.on(m.USER_JOIN,e),function(){i.removeListener(m.USER_LEAVE,e)}},onActiveUsersChange:function(e){return i.on(m.USERS_UPDATE,e),function(){i.removeListener(m.USERS_UPDATE,e)}},onUserOpenedFile:function(e){return i.on(m.USER_OPENED_FILE,e),function(){i.removeListener(m.USER_OPENED_FILE,e)}},onFollowedUserChanged:function(e){return i.on(m.FOLLOWED_USER_CHANGED,e),function(){i.removeListener(m.FOLLOWED_USER_CHANGED,e)}},onFollowingUsersChanged:function(e){return i.on(m.FOLLOWING_USERS_CHANGED,e),function(){i.removeListener(m.FOLLOWING_USERS_CHANGED,e)}},getActiveFileForUser:function(e){var t=c[e];if(void 0===t)throw Error("Expected file for user with ID ".concat(e," to be defined"));return t},updateOpenFile:function(e){return(0,w._)(function(){return(0,_.Jh)(this,function(t){switch(t.label){case 0:return[4,u()];case 1:return t.sent().send({openFile:{file:e}}),[2]}})})()},updateSessionTimestamp:function(){return(0,w._)(function(){return(0,_.Jh)(this,function(e){switch(e.label){case 0:return[4,u()];case 1:return e.sent().send({updateSessionTimestamp:{}}),[2]}})})()},followUser:function(e){return h.apply(this,arguments)},unfollowUser:p,getActiveUsers:function(){return o},getFollowedUser:function(){return a},getFollowingUsers:function(){return l},getUserIdToFile:function(){return c},getPathToUserIds:function(){var e=new Map;return o.forEach(function(t){var n=t.id,r=c[n];r&&function t(n,r){if(""!==n){e.has(n)||e.set(n,[]);var i,o=e.get(n);if(!o)throw Error("Expected user Ids");o.some(function(e){return e===r})||(null===(i=e.get(n))||void 0===i||i.push(r),t((0,eD.Il)(n),r))}}(r,n)}),e}}}({container:eK,onCommand:eU,getColorForUser:eX}),e4=(0,I.Z)({container:eK,fs:e1,ctx:eY}),e3=function(e){var t,n,r,i=e.container,o=(0,A.ZP)(),a=null;function l(){return c.apply(this,arguments)}function c(){return(c=(0,w._)(function(){return(0,_.Jh)(this,function(e){return a&&"open"===a.status?[2,a]:[2,new Promise(function(e){o.once(p.CHANNEL_OPENED,function(t){e(t)})})]})})).apply(this,arguments)}function s(){return u.apply(this,arguments)}function u(){return(u=(0,w._)(function(){return(0,_.Jh)(this,function(e){return[2,L({container:i,service:"nix"})]})})).apply(this,arguments)}return i.openChannel({service:"nix"},function(e){var t=e.channel;return a=t,o.emit(p.CHANNEL_OPENED,t),function(){a=null}}),{searchPackages:(t=(0,w._)(function(e){var t,n,r,i,o,a=arguments;return(0,_.Jh)(this,function(l){switch(l.label){case 0:return t=a.length>1&&void 0!==a[1]?a[1]:{},[4,s()];case 1:return r=(n=C._.apply(void 0,[l.sent(),2]))[0],i=n[1],[4,r.request({nixPackageSearchRequest:(0,Z._)({query:e},t)})];case 2:if((o=l.sent()).channelClosed)return[2,{error:"Channel closed",packages:null}];if(i(),o.error)return[2,{error:o.error,packages:null}];if(!o.nixPackageSearchResponse)return[2,{error:"Response expected but none received",packages:null}];return[2,{packages:o.nixPackageSearchResponse.packages,error:null}]}})}),function(e){return t.apply(this,arguments)}),listPackages:(0,w._)(function(){var e,t,n,r;return(0,_.Jh)(this,function(i){switch(i.label){case 0:return[4,s()];case 1:return t=(e=C._.apply(void 0,[i.sent(),2]))[0],n=e[1],[4,t.request({nixPackageListRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",packages:null}];if(n(),r.error)return[2,{error:r.error,packages:null}];if(!r.nixPackageListResponse)return[2,{error:"Response expected but none received",packages:null}];return[2,{packages:r.nixPackageListResponse.packages,error:null}]}})}),getChannels:(0,w._)(function(){var e,t,n,r;return(0,_.Jh)(this,function(i){switch(i.label){case 0:return[4,s()];case 1:return t=(e=C._.apply(void 0,[i.sent(),2]))[0],n=e[1],[4,t.request({nixChannelsRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",channels:null}];if(n(),r.error)return[2,{error:r.error,channels:null}];if(!r.nixChannelsResponse)return[2,{error:"Response expected but none received",channels:null}];return[2,{channels:r.nixChannelsResponse.channels,error:null}]}})}),getLatestStableChannel:(0,w._)(function(){var e,t,n,r;return(0,_.Jh)(this,function(i){switch(i.label){case 0:return[4,s()];case 1:return t=(e=C._.apply(void 0,[i.sent(),2]))[0],n=e[1],[4,t.request({nixChannelLatestStableRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",channel:null}];if(n(),r.error)return[2,{error:r.error,channel:null}];if(!r.nixChannelLatestStableResponse)return[2,{error:"Response expected but none received",channel:null}];return[2,{channel:r.nixChannelLatestStableResponse.channel,error:null}]}})}),addPackages:(n=(0,w._)(function(e){var t;return(0,_.Jh)(this,function(n){switch(n.label){case 0:return[4,l()];case 1:return[4,n.sent().request({nixPackageAddRequest:{packages:e}})];case 2:if((t=n.sent()).channelClosed)return[2,"channel closed"];if(t.error)return[2,t.error];if(!t.nixPackageAddResponse)return[2,"response expected but non received"];return[2,null]}})}),function(e){return n.apply(this,arguments)}),removePackages:(r=(0,w._)(function(e){var t;return(0,_.Jh)(this,function(n){switch(n.label){case 0:return[4,l()];case 1:return[4,n.sent().request({nixPackageRemoveRequest:{packages:e}})];case 2:if((t=n.sent()).channelClosed)return[2,"channel closed"];if(t.error)return[2,t.error];if(!t.nixPackageRemoveResponse)return[2,"response expected but non received"];return[2,null]}})}),function(e){return r.apply(this,arguments)}),packageInfo:function(e){return(0,w._)(function(){var t;return(0,_.Jh)(this,function(n){switch(n.label){case 0:return[4,l()];case 1:return[4,n.sent().request({nixPackageInfoRequest:{name:e}})];case 2:if((t=n.sent()).channelClosed)return[2,{package:null,error:"channel closed"}];if(t.error)return[2,{package:null,error:t.error}];if(!t.nixPackageInfoResponse)return[2,{package:null,error:"response expected but non received"}];if(!t.nixPackageInfoResponse.package)return[2,{package:null,error:"package not found"}];return[2,{package:t.nixPackageInfoResponse.package,error:null}]}})})()}}}({container:eK}),e8=(0,O.Z)({container:eK,dotReplit:e4}),e6=function(e){var t=e.container,n=e.forceTrace,r=e.track,i=(0,A.ZP)(),o=new Map;function a(e){var t=o.get(e);return t||(t={packagerChannel:null,didCallOpenChannel:!1,closeChannel:null},o.set(e,t)),t}function l(e){return c.apply(this,arguments)}function c(){return(c=(0,w._)(function(e){var n,r,i,o,a=arguments;return(0,_.Jh)(this,function(c){switch(c.label){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:0,[4,L({container:t,service:"packager3"})];case 1:if(i=(r=C._.apply(void 0,[c.sent(),2]))[0],o=r[1],!e)return[3,3];return[4,i.request({packageSetPackagerRequest:{packagerId:e}})];case 2:c.sent(),c.label=3;case 3:if("open"!==i.status){if(n>5)throw Error("Failed to getAnonymousPackagerChannel");return[2,l(e,n+1)]}return[2,[i,o]]}})})).apply(this,arguments)}function s(e){return u.apply(this,arguments)}function u(){return(u=(0,w._)(function(e){var n;return(0,_.Jh)(this,function(r){return((n=a(e)).didCallOpenChannel||function(e){var n=a(e);if(n.didCallOpenChannel)throw Error("Already called open channel");n.didCallOpenChannel=!0,n.closeChannel=t.openChannel({service:"packager3",name:e||"packager",action:B.api.OpenChannel.Action.ATTACH_OR_CREATE},function(t){var r=t.channel;return r.onCommand(function(t){if(null!=t.state){var n=t.state===B.api.State.Running;i.emit(d.STATE_CHANGED,n,e)}else null!=t.output?i.emit(d.OUTPUT,t.output,e):null!=t.error&&i.emit(d.ERROR,t.error,e)}),e?r.request({packageSetPackagerRequest:{packagerId:e}}).then(function(){n.packagerChannel=r,i.emit(d.CHANNEL_OPENED,r,e)}):(n.packagerChannel=r,i.emit(d.CHANNEL_OPENED,r,e)),function(){n.packagerChannel=null}})}(e),n.packagerChannel&&"open"===n.packagerChannel.status)?[2,n.packagerChannel]:[2,new Promise(function(t){i.once(d.CHANNEL_OPENED,function(n,r){r===e&&t(n)})})]})})).apply(this,arguments)}return{addPackages:function(e,t){return(0,w._)(function(){var n,i,o,a;return(0,_.Jh)(this,function(l){switch(l.label){case 0:return[4,s(t)];case 1:if("open"!==(i=l.sent()).status)return[2,!1];return o=e.map(function(e){return{name:e.name,spec:e.version}}),[4,i.request({packageAdd:{pkgs:o,useNewResponse:!0}})];case 2:if((a=l.sent()).channelClosed||a.error)return[2,!1];return(null===(n=a.packageAddResponse)||void 0===n?void 0:n.installedSystemDependencies)&&r&&r(R.U3.PACKAGER_INSTALLED_SYSTEM_DEPENDENCIES,{packagerId:t}),[2,!0]}})})()},removePackages:function(e,t){return(0,w._)(function(){var n,r,i;return(0,_.Jh)(this,function(o){switch(o.label){case 0:return[4,s(t)];case 1:if("open"!==(n=o.sent()).status)return[2,!1];return r=e.map(function(e){return{name:e}}),[4,n.request({packageRemove:{pkgs:r}})];case 2:if((i=o.sent()).channelClosed)return[2,!1];return[2,!!i.ok]}})})()},searchPackages:function(e,t){return(0,w._)(function(){var n,r,i,o;return(0,_.Jh)(this,function(a){switch(a.label){case 0:return[4,l(t)];case 1:return r=(n=C._.apply(void 0,[a.sent(),2]))[0],i=n[1],[4,r.request({packageSearch:{query:e}})];case 2:if((o=a.sent()).channelClosed)return[2,[]];if(i(),"packageSearchResp"===o.body&&o.packageSearchResp)return[2,o.packageSearchResp.results||[]];return G.Tb(Error("Unknown packager3 command ".concat(o.body,". ")+"Expected packageSearchResp. Received error: ".concat(o.error))),[2,[]]}})})()},fetchPackageInfo:function(e,t){return(0,w._)(function(){var n,r,i,o;return(0,_.Jh)(this,function(a){switch(a.label){case 0:return[4,l(t)];case 1:return r=(n=C._.apply(void 0,[a.sent(),2]))[0],i=n[1],[4,r.request({packageInfo:{pkg:{name:e}}})];case 2:if((o=a.sent()).channelClosed)return[2,void 0];if(i(),"packageInfoResp"===o.body&&o.packageInfoResp)return[2,o.packageInfoResp.pkg||void 0];return G.Tb(Error("Unknown packager3 command ".concat(o.body,". ")+"Expected packageInfoResp. Received error: ".concat(o.error))),[2,void 0]}})})()},installPackages:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,w._)(function(){return(0,_.Jh)(this,function(o){var a;return[2,(0,D.nO)(e,"packager.installPackages",(a=(0,w._)(function(e){var o,a,l;return(0,_.Jh)(this,function(c){switch(c.label){case 0:return[4,s(t)];case 1:if("open"!==(o=c.sent()).status)return[2,(0,P.UG)("ChannelClosed")];return[4,o.request({packageInstall:{useNewResponse:!0,disableGuess:i},traceInfo:(0,D.Rg)(e),forceTrace:n})];case 2:if((a=c.sent()).error)return[2,(0,P.UG)(a.error)];if(a.channelClosed)return[2,(0,P.UG)("ChannelClosed")];if(!(l=a.packageInstallResponse))return[2,(0,P.UG)("No package install response found")];return l.installedSystemDependencies&&r&&r(R.U3.PACKAGER_INSTALLED_SYSTEM_DEPENDENCIES,{packagerId:t}),[2,(0,P.Ok)(l)]}})}),function(e){return a.apply(this,arguments)}))]})})()},listSpecfile:function(e){return(0,w._)(function(){var t,n,r,i,o,a,c;return(0,_.Jh)(this,function(s){switch(s.label){case 0:return[4,l(e)];case 1:return n=(t=C._.apply(void 0,[s.sent(),2]))[0],r=t[1],[4,n.request({packageListSpecfile:{}})];case 2:if((i=s.sent()).channelClosed)return[2,{packages:null,error:"channel closed"}];switch(r(),i.body){case"error":return[2,{packages:null,error:"list specfile failed: ".concat(i.error)}];case"packageListSpecfileResp":if(!(a=null===(o=i.packageListSpecfileResp)||void 0===o?void 0:o.pkgs))return[2,{packages:null,error:"list specfile returned an empty response"}];return[2,{packages:a,error:null}];default:return c="Unknown packager3 listSpecFile command ".concat(i.body,". ")+"Expected error or packageListSpecfileResp",G.Tb(Error(c)),[2,{packages:null,error:c}]}return[2]}})})()},getPackagerIds:function(){return Array.from(o.keys())},clearPackager:function(e){var t=o.get(e);(null==t?void 0:t.closeChannel)&&t.closeChannel(),o.delete(e)},onOutput:function(e){return i.on(d.OUTPUT,e),function(){i.removeListener(d.OUTPUT,e)}},onError:function(e){return i.on(d.ERROR,e),function(){i.removeListener(d.ERROR,e)}},onStateChanged:function(e){return i.on(d.STATE_CHANGED,e),function(){i.removeListener(d.STATE_CHANGED,e)}}}}({container:eK,forceTrace:eJ,track:k.j}),e5=(0,eA.ZP)({container:eK,fs:e1,openMultipleFiles:ef,openMultipleURLs:eh,enableReplspaceSshTokenPassthrough:eR}),e9=(o=(i={container:eK,beforeRun:e7=(n=(0,w._)(function(e,t){var n;return(0,_.Jh)(this,function(r){var i;return n=(null==t?void 0:t.ctx)||S.D.active(),[2,(0,D.nO)(n,"beforeRun",(i=(0,w._)(function(n){var r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y;return(0,_.Jh)(this,function(b){switch(b.label){case 0:return[4,(0,D.nO)(n,"toolchain.getConfigs",function(){return e8.getConfigs()})];case 1:if((r=b.sent()).disableInstallBeforeRun)return[2];return i=(0,Z._)({},t),delete i.ctx,eQ.emit("user:run:prerun",(0,Z._)({runnerMode:eo},i)),[4,(0,D.nO)(n,"fs.flush",(0,w._)(function(){return(0,_.Jh)(this,function(e){switch(e.label){case 0:if(!(void 0===e$||e$.current))return[3,2];return[4,e1.flush()];case 1:e.sent(),e.label=2;case 2:return[2]}})}))];case 2:if(b.sent(),e&&e("prerun flush finished"),!(null==r?void 0:r.packagers))return[3,10];o=!0,a=!1,l=void 0,b.label=3;case 3:b.trys.push([3,8,9,10]),c=r.packagers[Symbol.iterator](),b.label=4;case 4:if(o=(s=c.next()).done)return[3,7];if(!(u=s.value).guessImports)return[3,6];return d=performance.now(),f=r.disableGuessImports,[4,e6.installPackages(n,u.id,f)];case 5:h=b.sent(),p=performance.now()-d,e&&(h.error?e("prerun packager install finished",{packagerId:u.id,language:u.language,errorMessage:h.error,success:!1}):(g=(v=(null==(m=h.value)?void 0:m.guessedPkgs)||[]).length,e("prerun packager install finished",{packagerId:u.id,language:u.language,guessedPkgs:v,guessedPkgsCount:g,guessedAnyPkgs:g>0,upmGuessDurationMs:null==m?void 0:m.upmGuessDurationMs,upmAddDurationMs:null==m?void 0:m.upmAddDurationMs,upmLockDurationMs:null==m?void 0:m.upmLockDurationMs,backendTotalDurationMs:null==m?void 0:m.totalDurationMs,frontendTotalDurationMs:p,success:!0}),g>0&&(0,k.j)(R.U3.PACKAGER_PACKAGES_GUESSED,{packages:v}))),b.label=6;case 6:return o=!0,[3,4];case 7:return[3,10];case 8:return y=b.sent(),a=!0,l=y,[3,10];case 9:try{o||null==c.return||c.return()}finally{if(a)throw l}return[7];case 10:return eQ.emit("user:run:initiate",{}),[2]}})}),function(e){return i.apply(this,arguments)}))]})}),function(e,t){return n.apply(this,arguments)})}).container,a=i.beforeRun,{mainClient:l=(0,M.u)(null),connect:function(){return new Promise(function(e){l.current||o.openChannel({service:"debugger"},function(t){return l.current=function(e){var t,n=e.channel,r=e.beforeRun,i=(0,M.u)("terminated"),o=(0,M.u)([]),a=(0,M.u)([]),l=(0,M.u)(new Map),c=(0,M.u)(null),s=(0,A.ZP)(),u=function(e,t){var n=new Map,r=new Map,i=new Map;function o(){return(o=(0,w._)(function(t){var o,a,l,c,s,u,d;return(0,_.Jh)(this,function(f){switch(f.label){case 0:o=!0,a=!1,l=void 0,f.label=1;case 1:f.trys.push([1,6,7,8]),c=function(){var n,o,a,l,c,s,d,f,h,p,m,v,g,y,b,w,x,S,k,E,T,R,D,I,B,G,A,P,L,N,O,U,M,X,F;return(0,_.Jh)(this,function(W){switch(W.label){case 0:if(o=(n=(0,C._)(u.value,2))[0],a=n[1],void 0!==t&&t!==o)return[2,"continue"];return[4,e({command:"setBreakpoints",arguments:{source:{name:o,path:o},breakpoints:a.map(function(e){return{line:e.line,logMessage:e.logMessage||void 0}})}})];case 1:if(!(l=W.sent()).success)return[2,"continue"];c=!0,s=!1,d=void 0;try{for(f=r[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){m=(p=(0,C._)(h.value,2))[0],v=p[1],(null===(g=v.source)||void 0===g?void 0:g.name)===o&&r.delete(m),y=!0,b=!1,w=void 0;try{for(x=i[Symbol.iterator]();!(y=(S=x.next()).done);y=!0)E=(k=(0,C._)(S.value,2))[0],k[1]===m&&i.delete(E)}catch(e){b=!0,w=e}finally{try{y||null==x.return||x.return()}finally{if(b)throw w}}}}catch(e){s=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(s)throw d}}T=l,R=!0,D=!1,I=void 0;try{for(B=T.body.breakpoints[Symbol.iterator]();!(R=(G=B.next()).done);R=!0)A=G.value,null!=A.id&&r.set(A.id,(0,Z._)({source:{name:o,path:o}},A))}catch(e){D=!0,I=e}finally{try{R||null==B.return||B.return()}finally{if(D)throw I}}P=!0,L=!1,N=void 0;try{for(O=(function(e,t){var n;return(0,_.Jh)(this,function(r){switch(r.label){case 0:if(e.length!==t.length)return[2];n=0,r.label=1;case 1:if(!(n<e.length))return[3,4];return[4,[e[n],t[n]]];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}})})(a,T.body.breakpoints)[Symbol.iterator]();!(P=(U=O.next()).done);P=!0)X=(M=(0,C._)(U.value,2))[0],F=M[1],X.breakpointId&&null!=F.id&&i.set(X.breakpointId,F.id)}catch(e){L=!0,N=e}finally{try{P||null==O.return||O.return()}finally{if(L)throw N}}return[2]}})},s=n.entries()[Symbol.iterator](),f.label=2;case 2:if(o=(u=s.next()).done)return[3,5];return[5,(0,_.XA)(c())];case 3:f.sent(),f.label=4;case 4:return o=!0,[3,2];case 5:return[3,8];case 6:return d=f.sent(),a=!0,l=d,[3,8];case 7:try{o||null==s.return||s.return()}finally{if(a)throw l}return[7];case 8:return[2]}})})).apply(this,arguments)}function a(){var e=new Map,t=new Set,o=!0,a=!1,l=void 0;try{for(var c,s=n.entries()[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=(0,C._)(c.value,2),d=u[0],f=u[1];if(0!==f.length){var h=[],p=!0,m=!1,v=void 0;try{for(var g,y=f[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var b=g.value;if(b.breakpointId&&b.line){var w=i.get(b.breakpointId),Z=void 0===w?void 0:r.get(w);Z&&t.add(w),h.push({dapId:w,pid1Id:b.breakpointId,line:Z&&Z.line||b.line,verified:!!(null==Z?void 0:Z.verified),logMessage:b.logMessage||void 0})}}}catch(e){m=!0,v=e}finally{try{p||null==y.return||y.return()}finally{if(m)throw v}}e.set(d,h)}}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}var x=!0,_=!1,S=void 0;try{for(var k,E=r.entries()[Symbol.iterator]();!(x=(k=E.next()).done);x=!0){var T=(0,C._)(k.value,2),R=T[0],D=T[1];if(!t.has(R)){var I=(0,F.IT)((null===(O=D.source)||void 0===O?void 0:O.path)||(null===(U=D.source)||void 0===U?void 0:U.name)||""),B=D.line;if(I&&B){var G=e.get(I);G||(G=[],e.set(I,G));var A=!1,P=!0,L=!1,N=void 0;try{for(var O,U,M,X=G[Symbol.iterator]();!(P=(M=X.next()).done);P=!0){var W=M.value;if(W.line===D.line){W.dapId=R,W.verified=D.verified,A=!0;break}}}catch(e){L=!0,N=e}finally{try{P||null==X.return||X.return()}finally{if(L)throw N}}A||G.push({dapId:R,line:B,verified:D.verified})}}}}catch(e){_=!0,S=e}finally{try{x||null==E.return||E.return()}finally{if(_)throw S}}return e}return{findPathByBreakpointId:function(e){var t=!0,r=!1,i=void 0;try{for(var o,a=n.entries()[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=(0,C._)(o.value,2),c=l[0];if(l[1].some(function(t){return t.breakpointId===e}))return c}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return null},getBreakpoints:a,flush:function(e){return o.apply(this,arguments)},handleDAPBreakpointEvent:function(e){var n=e.body,i=n.reason,o=n.breakpoint,l=o.id;if(null!=l){switch(i){case"changed":case"new":r.set(l,(0,Z._)({},r.get(l),o));break;case"removed":r.delete(l);break;default:return}t(a())}},handlePID1BreakpointEvent:function(e){var r=e.absolutePath?(0,F.IT)(e.absolutePath):null;r&&(n.set(r,e.breakpoints||[]),t(a()))},handleDebugSessionEnded:function(){r.clear(),i.clear();var e=!0,o=!1,l=void 0;try{for(var c,s=n.entries()[Symbol.iterator]();!(e=(c=s.next()).done);e=!0){var u=(0,C._)(c.value,2),d=u[0],f=u[1];0===f.length&&n.delete(d)}}catch(e){o=!0,l=e}finally{try{e||null==s.return||s.return()}finally{if(o)throw l}}t(a())}}}(y,function(e){l.current=e}),d=(0,M.u)(!1),f=[],h=new J(function(e){if(f.push({time:Date.now(),direction:"in",data:e}),"event"===e.type)switch(e.event){case"continued":i.current="running";break;case"stopped":var t;i.current="paused",c.current=null!==(t=e.body.threadId)&&void 0!==t?t:null,s.emit("paused",e.body.reason),function(){E.apply(this,arguments)}();break;case"breakpoint":u.handleDAPBreakpointEvent(e)}else if("response"===e.type){var n=p.get(e.request_seq);n&&(p.delete(e.request_seq),n(e))}}),p=new Map,m=100;function v(){i.current="terminated",o.current=[],a.current=[],c.current=null,u.handleDebugSessionEnded(),d.current=!1}var g=!1;function y(e){return b.apply(this,arguments)}function b(){return(b=(0,w._)(function(e){return(0,_.Jh)(this,function(t){return[2,new Promise(function(t){var r,i=m++;p.set(i,t);var o=(0,x._)((0,Z._)({},e),{type:"request",seq:i});f.push({time:Date.now(),direction:"out",data:o});var a={debugInput:{session:"main",adapterInput:(r=JSON.stringify(o),"Content-Length: ".concat(Y.byteLength(r),"\r\n\r\n").concat(r))}};f.push({time:Date.now(),direction:"out",data:a}),n.send(a)})]})})).apply(this,arguments)}function S(e){return k.apply(this,arguments)}function k(){return(k=(0,w._)(function(e){var t;return(0,_.Jh)(this,function(r){switch(r.label){case 0:return f.push({time:Date.now(),direction:"out",data:e}),[4,n.request(e)];case 1:if(t=r.sent(),f.push({time:Date.now(),direction:"in",data:t}),t.error)throw t.error;return[2,t]}})})).apply(this,arguments)}function E(){return(E=(0,w._)(function(){var e,t,n;return(0,_.Jh)(this,function(r){switch(r.label){case 0:return o.current=[],a.current=[],[4,y({command:"stackTrace",arguments:{threadId:c.current}})];case 1:if(!(e=r.sent()).success||(o.current=e.body.stackFrames,0===o.current.length))return[2];return[4,y({command:"scopes",arguments:{frameId:o.current[0].id}})];case 2:if(!(t=r.sent()).success)return[2];return[4,Promise.all(t.body.scopes.map(function(e){return y({command:"variables",arguments:{variablesReference:e.variablesReference}}).then(function(t){return{response:t,parentVariableReference:e.variablesReference}})}))];case 3:return n=r.sent(),a.current=n.filter(function(e){return e.response.success}).reduce(function(e,t){var n=t.response,r=t.parentVariableReference;return e.concat(n.body.variables.map(function(e){return(0,x._)((0,Z._)({},e),{parentVariableReference:r})}))},[]),[2]}})})).apply(this,arguments)}function T(e){return R.apply(this,arguments)}function R(){return(R=(0,w._)(function(e){var t,a,l,c,h,p,m;return(0,_.Jh)(this,function(v){switch(v.label){case 0:if("terminated"!==i.current)throw Error("Cant start while debugger is already running");return i.current="preinitializing",o.current=[],[4,r()];case 1:if(v.sent(),"stopping"===i.current)return i.current="terminated",[2];return g=!0,i.current="initializing",l={session:"main",readOnly:!1},e&&(l.debuggerId=e.debuggerOption.id,e.filePath&&(l.filePath=e.filePath)),c={debugMain:l},f.push({time:Date.now(),direction:"out",data:c}),[4,n.request(c)];case 2:if(h=v.sent(),f.push({time:Date.now(),direction:"in",data:h}),h.error)return s.emit("output",h.error),i.current="terminated",[2];return[4,y({command:"initialize",arguments:{clientID:"replit",clientName:"replit.com",adapterID:"cppdbg",pathFormat:"path",linesStartAt1:!0,columnsStartAt1:!0,supportsEvaluateForHovers:!0,supportsVariableType:!0,supportsVariablePaging:!0,supportsRunInTerminalRequest:!1,locale:"en-us",supportsProgressReporting:!0,supportsInvalidatedEvent:!0}})];case 3:if(!(p=v.sent()).success)return i.current="terminated",[2];return d.current=!!(null===(t=p.body)||void 0===t?void 0:t.supportsStepBack),m=!(null===(a=p.body)||void 0===a?void 0:a.supportsConfigurationDoneRequest),[4,u.flush()];case 4:if(v.sent(),m)return[3,6];return[4,y({command:"configurationDone"})];case 5:v.sent(),v.label=6;case 6:return"initializing"===i.current&&(i.current="running"),s.emit("started",m),[2]}})})).apply(this,arguments)}function D(e,t){return I.apply(this,arguments)}function I(){return(I=(0,w._)(function(e,t){var n,r,o,a;return(0,_.Jh)(this,function(l){switch(l.label){case 0:return n=t.line,r=t.otIndex,o=t.otVersion,a=t.logMessage,[4,S({debugAddBreakpointRequest:{path:(0,F.om)(e)||e,line:n,otIndex:r,otVersion:o,logMessage:a}})];case 1:if(l.sent(),!("terminated"!==i.current))return[3,3];return[4,u.flush(e)];case 2:l.sent(),l.label=3;case 3:return s.emit("breakpoint","added"),[2]}})})).apply(this,arguments)}function G(e){return P.apply(this,arguments)}function P(){return(P=(0,w._)(function(e){var t;return(0,_.Jh)(this,function(n){switch(n.label){case 0:return t=u.findPathByBreakpointId(e),[4,S({debugRemoveBreakpointRequest:{breakpointId:e}})];case 1:if(n.sent(),!("terminated"!==i.current&&t))return[3,3];return[4,u.flush(t)];case 2:n.sent(),n.label=3;case 3:return s.emit("breakpoint","removed"),[2]}})})).apply(this,arguments)}function L(){return(L=(0,w._)(function(e,t){var n;return(0,_.Jh)(this,function(r){switch(r.label){case 0:if(!(n=u.findPathByBreakpointId(e)))return[2];return[4,S({debugUpdateBreakpointRequest:{breakpointId:e,logMessage:t.logMessage}})];case 1:if(r.sent(),!("terminated"!==i.current))return[3,3];return[4,u.flush(n)];case 2:r.sent(),r.label=3;case 3:return s.emit("breakpoint","updated"),[2]}})})).apply(this,arguments)}function N(){return(N=(0,w._)(function(e,t){var n,r,i;return(0,_.Jh)(this,function(o){switch(o.label){case 0:if(!(i=null===(r=l.current.get(e))||void 0===r?void 0:null===(n=r.find(function(e){return e.line===t.line&&void 0!==e.pid1Id}))||void 0===n?void 0:n.pid1Id))return[3,2];return[4,G(i)];case 1:return o.sent(),[3,4];case 2:return[4,D(e,t)];case 3:o.sent(),o.label=4;case 4:return[2]}})})).apply(this,arguments)}function O(e){return s.on("started",e),function(){s.removeListener("started",e)}}return n.onCommand(function(e){f.push({time:Date.now(),direction:"in",data:e});var t,n,r=e.debugOutput,o=e.debugState,a=e.debugBreakpointEvent,l=e.debugSessions;if(r){if("main"!==r.session)return;r.adapterOutput&&h.read(r.adapterOutput),r.output&&s.emit("output",r.output)}if(a&&u.handlePID1BreakpointEvent(a),o&&o.state===B.api.State.Stopped&&v(),((null==l?void 0:null===(t=l.sessions)||void 0===t?void 0:t.main)===B.api.State.Running||(null==o?void 0:o.state)===B.api.State.Running)&&"terminated"===i.current&&T(),(null==l?void 0:null===(n=l.sessions)||void 0===n?void 0:n.main)===B.api.State.Stopped||(null==o?void 0:o.state)===B.api.State.Stopped){if(g){g=!1;return}v()}}),{state:i,stackFrames:o,variables:a,breakpoints:l,supportsStepBack:d,onOutput:function(e){return s.on("output",e),function(){s.removeListener("output",e)}},onStarted:O,onPaused:function(e){return s.on("paused",e),function(){s.removeListener("paused",e)}},onBreakpoint:function(e){return s.on("breakpoint",e),function(){s.removeListener("breakpoint",e)}},sendInput:function(e){return(0,w._)(function(){var t,r;return(0,_.Jh)(this,function(i){switch(i.label){case 0:return t={debugInput:{session:"main",input:e}},f.push({time:Date.now(),direction:"out",data:t}),[4,n.request(t)];case 1:if(r=i.sent(),f.push({time:Date.now(),direction:"in",data:r}),r.error)throw r.error;return[2]}})})()},fetchVariables:function(e){return(0,w._)(function(){var t;return(0,_.Jh)(this,function(n){switch(n.label){case 0:return[4,y({command:"variables",arguments:{variablesReference:e}})];case 1:if((t=n.sent()).success)return[2,t.body.variables.map(function(t){return(0,x._)((0,Z._)({},t),{parentVariableReference:e})})];throw Error(t.message)}})})()},evaluate:function(e){var n=e.frameId,r=void 0===n?null===(t=o.current[0])||void 0===t?void 0:t.id:n,i=e.expression,a=e.context;return(0,w._)(function(){return(0,_.Jh)(this,function(e){switch(e.label){case 0:return[4,y({command:"evaluate",arguments:{frameId:r,expression:i,context:a}})];case 1:return[2,e.sent()]}})})()},addBreakpoint:D,removeBreakpoint:G,updateBreakpoint:function(e,t){return L.apply(this,arguments)},toggleBreakpoint:function(e,t){return N.apply(this,arguments)},start:T,continue:function(){return(0,w._)(function(){return(0,_.Jh)(this,function(e){switch(e.label){case 0:return o.current=[],i.current="running",[4,y({command:"continue",arguments:{threadId:c.current}})];case 1:return e.sent(),[2]}})})()},reverseContinue:function(){return(0,w._)(function(){return(0,_.Jh)(this,function(e){switch(e.label){case 0:return o.current=[],i.current="running",[4,y({command:"reverseContinue",arguments:{threadId:c.current}})];case 1:return e.sent(),[2]}})})()},back:function(){return(0,w._)(function(){return(0,_.Jh)(this,function(e){switch(e.label){case 0:return i.current="running",[4,y({command:"stepBack",arguments:{threadId:c.current}})];case 1:return e.sent(),[2]}})})()},next:function(){return(0,w._)(function(){return(0,_.Jh)(this,function(e){switch(e.label){case 0:return i.current="running",[4,y({command:"stepIn",arguments:{threadId:c.current}})];case 1:return e.sent(),[2]}})})()},skip:function(){return(0,w._)(function(){return(0,_.Jh)(this,function(e){switch(e.label){case 0:return i.current="running",[4,y({command:"next",arguments:{threadId:c.current,granularity:"line"}})];case 1:return e.sent(),[2]}})})()},stepOut:function(){return(0,w._)(function(){return(0,_.Jh)(this,function(e){switch(e.label){case 0:return i.current="running",[4,y({command:"stepOut",arguments:{threadId:c.current}})];case 1:return e.sent(),[2]}})})()},stop:function(){return(0,w._)(function(){var e,t,r,o;return(0,_.Jh)(this,function(a){switch(a.label){case 0:if("terminated"===i.current)throw Error("Debugger already terminated");if(e=i.current,i.current="stopping","preinitializing"===e)return[2];if("initializing"!==e)return[3,2];return t=[],[4,Promise.race([new Promise(function(e){t.push(i.subscribe(function(){return e()}))}),new Promise(function(e){t.push(O(function(){return e()}))})])];case 1:if(a.sent(),t.forEach(function(e){return e()}),"terminated"===i.current)return[2];a.label=2;case 2:return r={debugStop:{session:"main"}},f.push({time:Date.now(),direction:"out",data:r}),[4,n.request(r)];case 3:if(o=a.sent(),f.push({time:Date.now(),direction:"in",data:o}),o.error)throw Error("Failed to stop debugger "+o.error);return[2]}})})()},getSource:function(e){return(0,w._)(function(){var t;return(0,_.Jh)(this,function(n){switch(n.label){case 0:return[4,y({command:"source",arguments:{source:{path:e}}})];case 1:if(!(t=n.sent()).success)throw Error(t.message);return[2,t.body.content]}})})()},getDebugLogs:function(){return Object.entries({state:i,stackFrames:o,variables:a,breakpoints:l,threadId:c}).map(function(e){var t=(0,C._)(e,2),n=t[0],r=t[1];return"".concat(n," = ").concat(JSON.stringify(r.current instanceof Map?(0,X._)(r.current):r.current,void 0,2))}).join("\n")+"\n\n"+f.map(function(e){return[new Date(e.time).toLocaleString(),"in"===e.direction?"->":"<-",JSON.stringify(e.data)].join(" ")}).join("\n")}}}({channel:t.channel,beforeRun:a}),e(null),function(){l.current=null}})})}}),te=(0,E.TE)({container:eK,dotReplit:e4}),tt=function(e){var t;if("outputs"===e.mode?t=function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y=e.container,b=e.toolchain,x=e.beforeRun,C=e.packager,S=e.debuggest,E=(0,A.ZP)(),T=null,R={runId:eM()(),runState:eP.Ah.OFFLINE,runningStage:"NONE",outputBlocks:[]};function I(e){R=(0,eO.Uy)(R,e)}function G(e){var t=R.outputBlocks.find(function(t){return t.id===e});if(!t)throw Error("can't find block for id: ".concat(e));E.emit(eP.zW.BLOCK_CHANGED,t)}function P(){E.emit(eP.zW.ALL_BLOCKS_CHANGED,R.outputBlocks)}function L(e){R.runState!==e&&(I(function(t){t.runState=e}),E.emit(eP.zW.STATE_CHANGE,e))}function N(){if(!T){L(eP.Ah.OFFLINE);return}if("BEFORE_RUN"===R.runningStage){L(eP.Ah.BEFORE_RUN);return}if("STOPPING"===R.runningStage){L(eP.Ah.STOPPING);return}if("NONE"!==R.runningStage){L(eP.Ah.RUNNING);return}L(eP.Ah.IDLE)}function O(e,t){var n=(null!=t?t:R).outputBlocks.filter(function(t){return t.type===e}),r=n[n.length-1];if(r)return r}function U(e,t){var n;I(function(r){var i=O(e,r);i&&(n=i.id,t(i))}),n&&G(n)}function M(){return(M=(0,w._)(function(e){return(0,_.Jh)(this,function(t){var n;return[2,(0,D.GK)("outputs.run",(n=(0,w._)(function(t){var n,r,i,o,a,l,c,s,u,d;return(0,_.Jh)(this,function(f){switch(f.label){case 0:if(R.runState!==eP.Ah.IDLE&&R.runState!==eP.Ah.STOPPING)throw Error("Cannot run while state is not IDLE or STOPPING, got state: "+R.runState);return i=R.outputBlocks.length>1&&R.outputBlocks[R.outputBlocks.length-1],(0,k.j)(k.U3.WS_CONSOLE_OUTPUT_STARTED,{replId:null===(n=y.getContext())||void 0===n?void 0:n.repl.id,runId:R.runId,lastBlock:i?(0,Z._)({type:i.type,isDone:i.isDone,endTime:i.endTime,startTime:i.startTime},i.type===eP.kH.EXECUTION?{executionMode:i.data.executionMode,exitCode:i.data.exitCode,stderr:i.data.stderr}:{},i.type===eP.kH.DEBUGGER?{debugState:i.data.debugState}:{}):void 0,previousBlockNumber:R.outputBlocks.length,previousBlocksAvgTimeMs:R.outputBlocks.length>1?Math.floor(R.outputBlocks.reduce(function(e,t){return t.endTime&&t.startTime?e+(t.endTime-t.startTime):e},0)):void 0}),o=eM()(),I(function(e){e.runId=o,e.runningStage="BEFORE_RUN"}),E.emit(eP.zW.LOCAL_RUN),N(),!e&&(l=function(e,t,n,r){if(!(null==e?void 0:e.runs))return[];var i=[];if(t=t.slice(),n){var o=t.indexOf(n);-1!==o&&(t.splice(o,1),t.splice(0,0,n))}if(r){var a=t.indexOf(r);-1!==a&&t.splice(a,1),t.splice(0,0,r)}var l=!0,c=!1,s=void 0;try{for(var u,d=t[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value;if(f.match(/(\.[a-z0-9]+)$/)){var h=!0,p=!1,m=void 0;try{for(var v,g=e.runs[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var y=v.value;if(y.fileParam||y.optionalFileParam){var b=(0,eg.rF)(y.fileTypeAttrs);null===b&&y.language&&(b=eg.$R.from(y.language)),b&&(0,eL.JW)(f,b)&&i.push({runner:y,filePath:f})}}}catch(e){p=!0,m=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw m}}}}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}var w=!0,Z=!1,x=void 0;try{for(var C,_=e.runs[Symbol.iterator]();!(w=(C=_.next()).done);w=!0){var S=C.value;S.fileParam||i.push({runner:S})}}catch(e){Z=!0,x=e}finally{try{w||null==_.return||_.return()}finally{if(Z)throw x}}return function(e){e.sort(function(e,t){var n=eN(e),r=eN(t);return n!==r?n-r:e.runner.interpreter===t.runner.interpreter?0:e.runner.interpreter?-1:1})}(i),i}(b.configs.current,[],null,(null===(a=b.configs.current)||void 0===a?void 0:a.entrypoint)||null)).length>0&&(e=l[0]),[4,x(c=H.kg.timeStart({runnerId:null==e?void 0:e.runner.id,filePath:null==e?void 0:e.filePath,isInterpreter:null==e?void 0:e.runner.interpreter,replLanguage:null===(r=y.getContext())||void 0===r?void 0:r.repl.language}),{runId:o,channelId:null==T?void 0:T.id,type:"outputs",runConfig:e,ctx:t})];case 1:if(f.sent(),R.runId!==o||"NONE"===R.runningStage||"SERVER"===R.runningStage)return[2];if(!T)throw Error("State is RUNNING but outputs is null?");if("open"!==T.status)return[2];return(s=X()).isStopped||s.stop(),u={},e&&(u.runnerId=e.runner.id,u.filePath=e.filePath),d=T,[4,(0,D.nO)(t,"timeToRunning",(0,w._)(function(){var e,t;return(0,_.Jh)(this,function(n){switch(n.label){case 0:return e=performance.now(),d.send({runMain:u}),[4,new Promise(function(e){var t=d.onCommand(function(n){"state"===n.body&&(t(),e())})})];case 1:return n.sent(),t=performance.now()-e,c("run finished",{timeToRunningMs:t}),[2]}})}))];case 2:return f.sent(),[2]}})}),function(e){return n.apply(this,arguments)}))]})})).apply(this,arguments)}function X(){var e=S.mainClient.current,t=null==e?void 0:e.state.current;return{client:e,state:t,sendInput:function(t){return null==e?void 0:e.sendInput(t)},stop:function(){return null==e?void 0:e.stop()},isRunning:"running"===t,isStopped:null==t||"terminated"===t}}function F(){return(F=(0,w._)(function(e){var t,n;return(0,_.Jh)(this,function(r){if(R.runState===eP.Ah.OFFLINE)return[2];if(t=X(),n=R.outputBlocks[R.outputBlocks.length-1].type===eP.kH.DEBUGGER,t.isRunning&&n&&t.sendInput(e),R.runState!==eP.Ah.IDLE&&R.runState!==eP.Ah.RUNNING)throw Error("Can only send input when running or idle");if(!T)throw Error("State is not OFFLINE but outputs is null?");return"open"!==T.status||T.send({input:e}),[2]})})).apply(this,arguments)}return n=(t={packager:C,updateState:I,getRunningBlockOfType:O,updateRunningBlockOfType:U,emitBlockUpdate:G}).packager,r=t.updateState,i=t.getRunningBlockOfType,o=t.updateRunningBlockOfType,a=t.emitBlockUpdate,(l=[]).push(n.onOutput(function(e){var t=i(eP.kH.PACKAGER);null==t||t.data.emitMessage(e.replace(/\n/g,"\n\r"))})),l.push(n.onError(function(e){o(eP.kH.PACKAGER,function(t){t.error?t.error+="\n"+e:t.error=e})})),l.push(n.onStateChanged(function(e){if(e){var t=eM()();r(function(e){e.outputBlocks.push({id:t,localStartTime:Date.now(),isDone:!1,visualState:eP.MZ.EXPANDED,type:eP.kH.PACKAGER,data:(0,Z._)({},eF({maxHistorySize:eH}))}),e.outputBlocks.length>20&&e.outputBlocks.shift()}),a(t)}else o(eP.kH.PACKAGER,function(e){e.data.emitMessage(eV),e.localEndTime=Date.now(),e.isDone=!0})})),d=(c={debuggest:S,updateState:I,updateRunningBlockOfType:U,getRunningBlockOfType:O,emitRunState:L,emitBlockUpdate:G,stopCurrentRun:function(){I(function(e){e.runningStage="BEFORE_RUN"}),null==T||T.send({clear:{}})}}).debuggest,f=c.updateState,h=c.updateRunningBlockOfType,p=c.getRunningBlockOfType,m=c.emitBlockUpdate,v=c.emitRunState,g=c.stopCurrentRun,d.mainClient.subscribe(function(e){e&&(null==u||u(),null==s||s(),u=e.state.subscribe(function(e){if("initializing"===e){g();var t=eM()();f(function(e){e.outputBlocks.push({id:t,localStartTime:Date.now(),isDone:!1,type:eP.kH.DEBUGGER,visualState:eP.MZ.EXPANDED,data:(0,Z._)({debugState:"paused"},eF({maxHistorySize:eH}))})}),m(t),v(eP.Ah.RUNNING)}"paused"===e&&h(eP.kH.DEBUGGER,function(e){e.data.debugState="paused"}),"running"===e&&h(eP.kH.DEBUGGER,function(e){e.data.debugState="running"}),"stopping"===e&&v(eP.Ah.STOPPING),"terminated"===e&&(h(eP.kH.DEBUGGER,function(e){e.localEndTime=Date.now(),e.data.emitMessage(eV),e.isDone=!0}),v(eP.Ah.IDLE))}),s=e.onOutput(function(e){var t=p(eP.kH.DEBUGGER);null==t||t.data.emitMessage(e)}))}),y.openChannel({name:"output",service:"output"},function(e){var t=e.channel;return T=t,N(),t.onCommand(function(e){if(null!=e.state){var t=e.state===B.api.State.Stopped;"STOPPING"===R.runningStage&&t&&I(function(e){e.runningStage="NONE"}),t?"SERVER"===R.runningStage&&I(function(e){e.runningStage="NONE"}):I(function(e){e.runningStage="SERVER"}),N();return}if(null!=e.outputBlockStartEvent&&null!=e.outputBlockStartEvent.measureStartTime){if(void 0!==R.outputBlocks.find(function(e){return e.type===eP.kH.EXECUTION&&!e.isDone}))return;var n=e.outputBlockStartEvent,r=n.cgroup,i=n.executionMode,o=eW(n.measureStartTime),a=eM()();I(function(e){e.outputBlocks.push({id:a,localStartTime:Date.now(),startTime:o,isDone:!1,type:eP.kH.EXECUTION,visualState:eP.MZ.EXPANDED,data:(0,Z._)({cgroup:r,executionMode:i===B.api.OutputBlockStartEvent.ExecutionMode.Run?"run":"interpret"},eF({maxHistorySize:eH}))}),e.outputBlocks.length>20&&e.outputBlocks.shift()}),G(a)}if(null!=e.output){var l=O(eP.kH.EXECUTION);null==l||l.data.emitMessage(e.output)}if(null!=e.hint){var c=O(eP.kH.EXECUTION);null==c||c.data.emitMessage("\r\n\x1b[0m\x1b[33m".concat(e.hint.text,"\x1b[0m\r\n"))}if(null!=e.stderr&&U(eP.kH.EXECUTION,function(t){t.data.stderr=(t.data.stderr||"")+e.stderr}),null!=e.error){var s=e.error;U(eP.kH.EXECUTION,function(e){e.error?e.error+="\n"+s:e.error=s})}if(null!=e.outputBlockEndEvent&&null!=e.outputBlockEndEvent.measureEndTime){var u,d=e.outputBlockEndEvent.exitCode;(0,k.j)(k.U3.WS_CONSOLE_OUTPUT_RAN,{exitCode:d,replId:null===(u=y.getContext())||void 0===u?void 0:u.repl.id,runId:R.runId});var f=eW(e.outputBlockEndEvent.measureEndTime);U(eP.kH.EXECUTION,function(e){e.data.emitMessage(eV),e.data.exitCode=d,e.localEndTime=Date.now(),e.endTime=f,e.isDone=!0})}}),function(){T=null,I(function(e){e.runId=eM()(),e.runState=eP.Ah.OFFLINE,e.runningStage="NONE",e.outputBlocks.forEach(function(e){if(!e.isDone){e.data.emitMessage(eV),e.localEndTime=Date.now(),e.isDone=!0;var t="Connection was lost";e.error?e.error+="\n"+t:e.error=t}})}),N(),P()}}),{mode:"outputs",run:function(e){return M.apply(this,arguments)},stopRun:function(){if(R.runState===eP.Ah.RUNNING){var e=X();if(!e.isStopped){e.stop(),I(function(e){e.runningStage="STOPPING"}),N();return}if("BEFORE_RUN"===R.runningStage){I(function(e){e.runningStage="NONE"}),N();return}I(function(e){e.runningStage="STOPPING"}),N(),null==T||T.send({clear:{}})}},sendInput:function(e){return F.apply(this,arguments)},onLocalRun:function(e){return E.on(eP.zW.LOCAL_RUN,e),function(){E.removeListener(eP.zW.LOCAL_RUN,e)}},onStateChanged:function(e){return E.on(eP.zW.STATE_CHANGE,e),function(){return E.removeListener(eP.zW.STATE_CHANGE,e)}},getRunState:function(){return R.runState},getOutputBlocks:function(){return R.outputBlocks},clearBlockHistory:function(){I(function(e){e.outputBlocks=e.outputBlocks.filter(function(e){return!e.isDone})}),P()},onBlockChanged:function(e){return E.on(eP.zW.BLOCK_CHANGED,e),function(){return E.removeListener(eP.zW.BLOCK_CHANGED,e)}},onAllBlocksChanged:function(e){return E.on(eP.zW.ALL_BLOCKS_CHANGED,e),function(){return E.removeListener(eP.zW.ALL_BLOCKS_CHANGED,e)}},resizeTerminalForBlock:function(e,t){if(T&&"open"===T.status){var n=R.outputBlocks.find(function(t){return t.id===e});if(!n)throw Error("tried to resize terminal of non-existing block");n.isDone||T.send({resizeTerm:t})}},startBlock:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eP.MZ.EXPANDED,n=eM()();return I(function(r){r.outputBlocks.push({id:n,localStartTime:Date.now(),isDone:!1,visualState:t,type:e,data:(0,Z._)({},eF({maxHistorySize:eH}))})}),G(n),{id:n}},endBlock:function(e){I(function(t){var n=t.outputBlocks.find(function(t){return t.id===e});if(!n)throw Error("couldn't find a block");n.data.emitMessage(eV),n.localEndTime=Date.now(),n.isDone=!0}),G(e)},writeOutputToBlock:function(e,t){var n=R.outputBlocks.find(function(t){return t.id===e});n&&n.data.emitMessage(t)},writeErrorToBlock:function(e,t){I(function(n){var r=n.outputBlocks.find(function(t){return t.id===e});if(!r)throw Error("couldn't find a block");r.error?r.error+="\n"+t:r.error=t}),G(e)},setBlockVisualState:function(e,t){I(function(n){var r=n.outputBlocks.find(function(t){return t.id===e});if(!r)throw Error("couldn't find a block");r.visualState=t}),G(e)}}}({container:e.container,toolchain:e.toolchain,beforeRun:e.beforeRun,packager:e.packager,debuggest:e.debuggest}):"html"===e.mode&&(t=function(e){var t=e.beforeRun,n=e.container,r=(0,A.ZP)(),i=eP.Ah.OFFLINE,o="none",a=Math.random();function l(){var e=function(e){i!==e&&(i=e,r.emit(eP.zW.STATE_CHANGE,i))};if("none"!==o){e(eP.Ah.RUNNING);return}e(eP.Ah.IDLE)}function c(){return(c=(0,w._)(function(){var e;return(0,_.Jh)(this,function(n){switch(n.label){case 0:if(i!==eP.Ah.IDLE&&i!==eP.Ah.STOPPING)throw Error("Cannot run while state is not IDLE or STOPPING, got state: "+i);return a=e=Math.random(),r.emit(eP.zW.LOCAL_RUN),o="before-run",l(),[4,t(H.kg.timeStart({replLanguage:"html"}),{runId:e.toString(),type:"html"})];case 1:if(n.sent(),a!==e||"none"===o)return[2];return o="running",l(),o="none",l(),[2]}})})).apply(this,arguments)}return n.onConnectionStateChanged(function(e){e===U.em.CONNECTED&&(o="none",l())}),{mode:"html",run:function(){return c.apply(this,arguments)},stopRun:function(){if(i!==eP.Ah.RUNNING)throw Error("stopRun must be called when running but got ".concat(i));o="none",l()},onStateChanged:function(e){return r.on(eP.zW.STATE_CHANGE,e),function(){r.removeListener(eP.zW.STATE_CHANGE,e)}},onLocalRun:function(e){return r.on(eP.zW.LOCAL_RUN,e),function(){r.removeListener(eP.zW.LOCAL_RUN,e)}},getRunState:function(){return i}}}({beforeRun:e.beforeRun,container:e.container})),!t)throw Error("mode not supported: "+e.mode);return t}({mode:eo,container:eK,toolchain:e8,beforeRun:e7,packager:e6,debuggest:e9}),tn=(s=(0,A.ZP)(),u=new Promise(function(e){return c=e}),h=null,v=new Map,eK.openChannel({service:"chat",name:"broadcaster"},function(e){var t=e.channel,n=e.context;return n.currentUser&&(h=n.currentUser.username),t.onCommand(function(e){if("chatMessage"===e.body){var t=e.chatMessage;if(!t||!t.username||!t.text)throw Error("unexpected broadcast without a message");s.emit(f.MESSAGE_RECEIVED,{text:t.text,username:t.username})}}),c(t),function(){u=new Promise(function(e){return c=e})}}),{broadcastMessage:function(e,t){var n=t.text;return(0,w._)(function(){var t,r,i,o,a,l,c,s,d,f;return(0,_.Jh)(this,function(p){switch(p.label){case 0:return[4,u];case 1:if(t=p.sent(),!h)throw Error("Cannot broadcast without as username. Is currentUser in context?");r={text:n,username:h},i=!0,o=!1,a=void 0;try{for(l=v[Symbol.iterator]();!(i=(c=l.next()).done);i=!0)d=(s=(0,C._)(c.value,2))[0],f=s[1],d!==e&&f(r)}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return t.send({chatMessage:r}),[2]}})})()},onBroadcastReceived:function(e,t){return v.set(e,t),s.on(f.MESSAGE_RECEIVED,t),function(){s.removeListener(f.MESSAGE_RECEIVED,t),v.delete(e)}}}),tr=function(e){var t=e.container,n=e.toolchain,r=e.fs,i=e.enableMultipleLSPClientsPerFile,o=void 0!==i&&i,a=new Map,l=new Map,c={},s=!0;function u(e){var t=c[e];if(!t)throw Error("LSPNix: removeLanguage called with lspId never configured");var n=t.client;if(n){t.client=null,n.destroy();var r=!0,i=!1,o=void 0;try{for(var s,u=a[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var d=(0,C._)(s.value,2),f=d[0],h=d[1],p=l.get(f);if(p){p.delete(n),l.set(f,p);var m=!0,v=!1,g=void 0;try{for(var y,b=h[Symbol.iterator]();!(m=(y=b.next()).done);m=!0)(0,y.value)(Array.from(p))}catch(e){v=!0,g=e}finally{try{m||null==b.return||b.return()}finally{if(v)throw g}}}}}catch(e){i=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}}t.closeChannel(),delete c[e]}function d(e,t){if(c[e])throw Error("LSPNix: addLanguage called with lspId already configured");c[e]={client:null,option:t,closeChannel:function(){}},s&&m(e)}var f=new Map;function h(e){if(!s)return!1;var t=c[e];return!!t&&!t.client}function p(e,t,n){new Date().getTime()-n.getTime()<5e3?t<3?setTimeout(function(){h(e)&&m(e,t+1)},1e3*Math.pow(2,t)):H.kg.error("LSP server is crash-looping. Giving up.",{lspId:e,appService:"lspnix"}):setTimeout(function(){h(e)&&m(e)})}function m(e){return v.apply(this,arguments)}function v(){return(v=(0,w._)(function(e){var n,i,u,d,h,m,v,g,y=arguments;return(0,_.Jh)(this,function(b){switch(b.label){case 0:if(n=y.length>1&&void 0!==y[1]?y[1]:0,!s)throw Error("LSPNix: Called startClient while not enabled");if(!c[e])throw Error("LSPNix: No config found for lspId: ".concat(e));if(!f.get(e))return[3,2];return[4,f.get(e)];case 1:if(b.sent())return[2];b.label=2;case 2:if(u=(i=c[e]).client,i.closeChannel,d=i.option,u)throw Error("LSPNix: A previous client is already set for language: ".concat(e));return h=function(){},m=new Promise(function(e){h=e}),f.set(e,m),v=[],g=t.openChannel({service:"lsp2",skip:function(e){var t=e.repl.language,n=t.startsWith("nix")||t.startsWith("html");return n||(H.kg.error("Skipped opening lsp channel for non-nix repl",{language:t,appService:"lspnix"}),h(null)),!n}},function(i){var u=i.channel,m=null,y=!1,b=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!y){y=!0,t||(h(null),f.delete(e)),v.forEach(function(e){return e()}),null==m||m.destroy(),(null===(o=c[e])||void 0===o?void 0:o.client)===m&&(c[e].client=null),t&&s||g();var n=!0,r=!1,i=void 0;try{for(var o,u,d=a[Symbol.iterator]();!(n=(u=d.next()).done);n=!0){var p=(0,C._)(u.value,2),b=p[0],w=p[1],Z=l.get(b);if(Z&&m&&Z.has(m)){Z.delete(m),Z.size?l.set(b,Z):l.delete(b);var x=!0,_=!1,S=void 0;try{for(var k,E=w[Symbol.iterator]();!(x=(k=E.next()).done);x=!0)(0,k.value)(Array.from(Z))}catch(e){_=!0,S=e}finally{try{x||null==E.return||E.return()}finally{if(_)throw S}}}}}catch(e){r=!0,i=e}finally{try{n||null==d.return||d.return()}finally{if(r)throw i}}}};if("open"!==u.status){H.kg.error("LSPNix got a channel that wasn't open. This is expected to be impossible.",{lspId:e,appService:"lspnix"});return}var S=new Date;return u.request({startLSP:{languageServerId:e}}).then(function(i){if(!i.ok){H.kg.error("LSP server failed to start",{lspId:e,appService:"lspnix",serverError:i.error});return}if(s&&c[e]){v.push(u.onCommand(function(t){t.state===B.api.State.Stopped&&(H.kg.error("LSP server unexpectedly disconnected",{lspId:e,appService:"lspnix"}),b(),s&&p(e,n,S))}));var g=0;eT(t,function(){return g++<5&&s&&eE(c[e].option,d)&&"open"===u.status}).then(function(t){if(!c[e]){H.kg.info("LSPNix: lsp map changed while getting working directory",{lspId:e,appService:"lspnix"});return}if(!eE(c[e].option,d)){H.kg.info("LSPNix: configuration changed while getting working directory",{lspId:e,appService:"lspnix"});return}if("open"!==u.status){H.kg.error("LSPNix: channel wasn't open after getting working directory",{lspId:e,appService:"lspnix"});return}if(t.error){H.kg.error("LSPNix: failed to get working directory",{lspId:e,appService:"lspnix",originalError:null===(k=t.error)||void 0===k?void 0:k.message});return}if(m=function(e){var t,n=e.connection,r=e.isSupportedFile,i=e.clientId,o=e.clientName,a=e.getWorkspaceConfiguration,l=e.onWorkspaceConfigurationChange,c=e.applyWorkspaceEdit,s=(0,A.ZP)();s.setMaxListeners(1/0);var u=null,d=ev.a.OFFLINE,f=ev.N.NOT_READY,h=null,p=!1,m=new Map,v=new Map,g=null;function y(e){if(!u)throw Error("Expected rootUri");var t=e.slice(u.length+1);try{return decodeURIComponent(t)}catch(e){throw G.$e(function(n){n.setExtra("fragment_to_decode",t),G.Tb(e)}),e}}function b(e){if(!u)throw Error("Expected rootUri");if(e.startsWith("/"))throw Error("Path must be relative. Got: ".concat(e));return u+"/"+e}function C(e){d!==e&&(d!==ev.a.INITIALIZED&&S(ev.N.NOT_READY),d=e,s.emit("SERVER_STATE_CHANGE",d))}function S(e){f!==e&&(f=e,s.emit("SERVER_HEALTH_CHANGE",f))}function k(e){s.emit("SEND_NOTIFICATION",e),n.write(ek(e))}function E(e){return T.apply(this,arguments)}function T(){return(T=(0,w._)(function(e){var t,r,o,a,l,c,u,f;return(0,_.Jh)(this,function(h){if(a=void 0===(o=(r=void 0===(t=e.options)?{}:t).id)?eS():o,l=r.signal,c=r.tap,u=(0,el._)(e,["options"]),!Number.isInteger(a))throw Error("Request ID must be an integer");return n.didClose()?[2,Promise.resolve({result:null,cancelled:!0})]:(s.emit("REQUEST",{id:a,data:u}),null==l||l.addEventListener("abort",function(){D(a)},{once:!0}),n.write(ek((0,x._)((0,Z._)({},u),{id:a}))),null===g&&(g=setTimeout(function(){S(ev.N.STALLED)},3e4)),f=new Promise(function(e){v.set(a,e)}),c&&c(f),[2,f.then(function(e){return null!==g&&(clearTimeout(g),g=null),d!==ev.a.INITIALIZED||e.cancelled||S(ev.N.READY),(function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=eb[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(a.supports(e))return a}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return new ew})(i).onResponse(u.method,e)})])})})).apply(this,arguments)}function R(e,t){n.write(ek((0,x._)((0,Z._)({},t),{id:e})))}function D(e){var t=v.get(e);t&&(s.emit("CANCEL_REQUEST",e),t({result:null,cancelled:!0}),v.delete(e),k({method:"$/cancelRequest",params:{id:e}}))}var I=0,B=new J(function(e){var t=v.get(e.id);if(e.id&&t){v.delete(e.id);var n=e.result,r=e.error;if((void 0!==n||r)&&s.emit("RESPONSE",e),void 0!==n){I=0,t({result:n,cancelled:!1});return}if(r){I++;var o=r.code,l=r.message,u=r.data;H.kg.error("LSP request failed",{code:o,lspId:i,errorMessage:l,data:JSON.stringify(u)}),t({error:r}),I>20&&(H.kg.error("LSP experienced 20 consecutive errors. Setting server health to 'BROKEN",{lspId:i}),S(ev.N.BROKEN),I=0);return}throw H.kg.error("LSP response message contained neither error nor result"),new eZ.Z("Expected either message or error in LSP response").setExtra("message",JSON.stringify(e))}var d=e.method;if("client/registerCapability"===d){var f=e.params.registrations;if(!f||!Array.isArray(f))throw Error("Expected registrations array");f.forEach(function(e){var t=e.method;if(!t)throw Error("Expected registration method");if(!h)throw Error("Expected server capabilities");var n=e.registerOptions||!0;switch(t){case"textDocument/definition":h.definitionProvider=!0;break;case"textDocument/typeDefinition":h.typeDefinitionProvider=!0;break;case"textDocument/implementation":h.implementationProvider=!0;break;case"textDocument/references":h.referencesProvider=!0;break;case"textDocument/hover":h.hoverProvider=!0;break;case"textDocument/semanticTokens":h.semanticTokensProvider=n;break;case"textDocument/completion":h.completionProvider=n;break;case"textDocument/formatting":h.documentFormattingProvider=n;break;case"textDocument/rename":h.renameProvider=n;break;case"textDocument/codeAction":h.codeActionProvider=n;break;case"textDocument/signatureHelp":h.signatureHelpProvider=n;break;case"textDocument/didSave":if("number"==typeof h.textDocumentSync)break;h.textDocumentSync=(0,x._)((0,Z._)({},h.textDocumentSync||{}),{save:n});break;case"textDocument/willSaveWaitUntil":if("number"==typeof h.textDocumentSync)break;h.textDocumentSync=(0,x._)((0,Z._)({},h.textDocumentSync||{}),{willSave:!0});break;case"textDocument/didChange":if("number"==typeof h.textDocumentSync)break;h.textDocumentSync=(0,x._)((0,Z._)({},h.textDocumentSync||{}),{change:n});break;case"textDocument/didOpen":case"textDocument/didClose":if("number"==typeof h.textDocumentSync)break;h.textDocumentSync=(0,x._)((0,Z._)({},h.textDocumentSync||{}),{openClose:!0});break;case"workspace/executeCommand":h.executeCommandProvider=n;break;default:H.kg.info("Unexpected dynamically registered capability in LSP client",{method:t})}s.emit("SERVER_CAPABILITIES_CHANGE",h)}),R(e.id,{result:null,cancelled:!1});return}if("workspace/applyEdit"===d){c(e.params).then(function(t){R(e.id,{result:t,cancelled:!1})});return}if("textDocument/publishDiagnostics"===d){var p=y(e.params.uri),g=m.get(p);if(!g)return;var b=e.params.diagnostics;if(es()(g.diagnostics,b))return;g.diagnostics=b,s.emit("DIAGNOSTICS",{path:p,diagnostics:b});return}if("workspace/configuration"===d){var w,C=e.params,_=Array(C.items.length).fill(null),k=null!==(w=null==a?void 0:a())&&void 0!==w?w:null;k&&(_=C.items.map(function(e){return e.section?ed()(k,e.section):k})),R(e.id,{result:_,cancelled:!1})}("window/logMessage"===d||"telemetry/event"===d)&&s.emit("RECEIVE_NOTIFICATION",e),"workspace/semanticTokens/refresh"===d&&s.emit("SEMANTIC_TOKENS_REFRESH")});function P(e){if(!h)throw Error("Expected client to be initialized");if(!h[e])throw Error("LSP Server does not support ".concat(e.replace(/Provider$/,"")));return h[e]}function L(e){return u&&e?e.filter(function(e){return"uri"in e?e.uri.startsWith(u):e.targetUri.startsWith(u)}):e}n.read(B.read);var N=function(){};return{initialize:function(e){var n=e.pwd,r=e.initializationOptions;return(0,w._)(function(){var e,i;return(0,_.Jh)(this,function(o){switch(o.label){case 0:return C(ev.a.INITIALIZING),u="file://".concat(n),[4,E({method:"initialize",params:{initializationOptions:r,capabilities:em({configurationSupport:{serverToClient:!!a,clientToServer:!!l}}),processId:null,rootUri:u,workspaceFolders:[{name:u,uri:u}]}})];case 1:if("error"in(e=o.sent()))throw Error("Something went wrong initializing the LSP client: ".concat(e.error.message));if(e.cancelled)throw Error("Initialize request cancelled");if(!e.result)throw Error("Expected result in initialize request");return k({method:"initialized",params:{}}),h=e.result.capabilities,t=e.result.serverInfo,s.emit("SERVER_CAPABILITIES_CHANGE",h),C(ev.a.INITIALIZED),l&&(N=l(function(e){k({method:"workspace/didChangeConfiguration",params:{settings:e}})})),a&&(i=a())&&k({method:"workspace/didChangeConfiguration",params:{settings:i}}),[2]}})})()},generateId:eS,notify:{didOpen:function(e,t){if(!r(e))throw Error("Path not supported");var n,o=m.get(e);if(o&&0!==o.buffers){o.buffers++,m.set(e,o);return}var a=null!==(n=null==o?void 0:o.version)&&void 0!==n?n:0;m.set(e,{version:a,buffers:1,diagnostics:[]}),k({method:"textDocument/didOpen",params:{textDocument:{uri:b(e),languageId:e_(e,i),text:t,version:a}}})},didChange:function(e,t){var n=m.get(e);if(!n)throw Error('Document for "'.concat(e,'" is not open'));n.version++,k({method:"textDocument/didChange",params:{textDocument:{uri:b(e),version:n.version},contentChanges:t}})},didSave:function(e){if(!m.get(e))throw Error('Document for "'.concat(e,'" is not open'));P("textDocumentSync"),k({method:"textDocument/didSave",params:{textDocument:{uri:b(e)}}})},didClose:function(e){var t=m.get(e);if(!t)throw Error('Document for "'.concat(e,'" is not open'));t.buffers--,t.buffers>0||(k({method:"textDocument/didClose",params:{textDocument:{uri:b(e)}}}),m.delete(e))},cancelRequest:function(e){D(e)}},request:{completion:function(e,t,n,r){return P("completionProvider"),E({options:r,method:"textDocument/completion",params:{textDocument:{uri:b(e)},position:t,context:n}})},resolveCompletionItem:function(e){if(!P("completionProvider").resolveProvider)throw Error("LSP Server does not support resolving completion items");return E({method:"completionItem/resolve",params:e})},signatureHelp:function(e,t,n){return E({options:n,method:"textDocument/signatureHelp",params:{textDocument:{uri:b(e)},position:t}})},hover:function(e,t,n){return E({options:n,method:"textDocument/hover",params:{textDocument:{uri:b(e)},position:t}})},codeActions:function(e,t,n,r){var i=m.get(e);if(!i)throw Error("Document for path ".concat(e," is not open."));var o=i.diagnostics.filter(function(e){return(0,ex.dI)(e.range,t)});return E({method:"textDocument/codeAction",params:{textDocument:{uri:b(e)},range:t,context:(0,x._)((0,Z._)({},r),{diagnostics:o})},options:n})},resolveCodeAction:function(e){return E({method:"codeAction/resolve",params:e})},executeCommand:function(e,t){return E({method:"workspace/executeCommand",params:{command:e,arguments:t}})},format:function(e,t){return P("documentFormattingProvider"),E({method:"textDocument/formatting",params:{textDocument:{uri:b(e)},options:t}})},formatRange:function(e,t,n){return P("documentRangeFormattingProvider"),E({method:"textDocument/rangeFormatting",params:{textDocument:{uri:b(e)},range:t,options:n}})},findDefinitions:function(e,t,n){var r=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,w._)(function(){var i,o;return(0,_.Jh)(this,function(a){switch(a.label){case 0:return P("definitionProvider"),[4,E({options:n,method:"textDocument/definition",params:{textDocument:{uri:b(e)},position:t}})];case 1:if(!1!==(i=a.sent()).cancelled)return[2,i];return(o=i.result)&&r&&(o=L(Array.isArray(o)?o:[o])),[2,(0,x._)((0,Z._)({},i),{result:o})]}})})()},findTypeDefinitions:function(e,t,n){var r=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,w._)(function(){var i,o;return(0,_.Jh)(this,function(a){switch(a.label){case 0:return P("typeDefinitionProvider"),[4,E({options:n,method:"textDocument/typeDefinition",params:{textDocument:{uri:b(e)},position:t}})];case 1:if(!1!==(i=a.sent()).cancelled)return[2,i];return(o=i.result)&&r&&(o=L(Array.isArray(o)?o:[o])),[2,(0,x._)((0,Z._)({},i),{result:o})]}})})()},findImplementations:function(e,t,n){var r=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,w._)(function(){var i,o;return(0,_.Jh)(this,function(a){switch(a.label){case 0:return P("implementationProvider"),[4,E({options:n,method:"textDocument/implementation",params:{textDocument:{uri:b(e)},position:t}})];case 1:if(!1!==(i=a.sent()).cancelled)return[2,i];return(o=i.result)&&r&&(o=L(Array.isArray(o)?o:[o])),[2,(0,x._)((0,Z._)({},i),{result:o})]}})})()},findReferences:function(e,t,n){return P("referencesProvider"),E({method:"textDocument/references",params:{textDocument:{uri:b(e)},position:t,context:n}})},rename:function(e,t,n,r){return P("renameProvider"),E({options:r,method:"textDocument/rename",params:{textDocument:{uri:b(e)},position:t,newName:n}})},prepareRename:function(e,t){var n=P("renameProvider");if("boolean"==typeof n||!n.prepareProvider)throw Error("LSP server does not support prepare rename");return E({method:"textDocument/prepareRename",params:{textDocument:{uri:b(e)},position:t}})},documentHighlights:function(e,t,n){return(0,w._)(function(){return(0,_.Jh)(this,function(r){switch(r.label){case 0:return[4,E({options:n,method:"textDocument/documentHighlight",params:{position:t,textDocument:{uri:b(e)}}})];case 1:return[2,r.sent()]}})})()},documentSymbol:function(e,t){return(0,w._)(function(){var n;return(0,_.Jh)(this,function(r){switch(r.label){case 0:return[4,E({options:t,method:"textDocument/documentSymbol",params:{textDocument:{uri:b(e)}}})];case 1:if(!("result"in(n=r.sent())))return[2,n];if(n.result)return[2,{result:n.result,cancelled:!1}];return[2]}})})()}},semanticTokensFull:function(e,t){if(!P("semanticTokensProvider").full)throw Error("LSP server does not support full semantic tokens");return E({options:t,method:"textDocument/semanticTokens/full",params:{textDocument:{uri:b(e)}}})},semanticTokensDelta:function(e,t,n){var r=P("semanticTokensProvider");if(!(null==r?void 0:r.full)||"object"!=typeof r.full||!r.full.delta)throw Error("LSP server does not support delta semantic tokens");return E({options:n,method:"textDocument/semanticTokens/full/delta",params:{textDocument:{uri:b(e)},previousResultId:t}})},semanticTokensRange:function(e,t,n){if(!P("semanticTokensProvider").range)throw Error("LSP server does not support range semantic tokens");return E({options:n,method:"textDocument/semanticTokens/range",params:{textDocument:{uri:b(e)},range:t}})},onDiagnostics:(0,A.JV)(s,"DIAGNOSTICS"),onServerStateChange:(0,A.JV)(s,"SERVER_STATE_CHANGE"),onServerHealthChange:(0,A.JV)(s,"SERVER_HEALTH_CHANGE"),onServerCapabilitiesChange:(0,A.JV)(s,"SERVER_CAPABILITIES_CHANGE"),onRequest:(0,A.JV)(s,"REQUEST"),onResponse:(0,A.JV)(s,"RESPONSE"),onCancelRequest:(0,A.JV)(s,"CANCEL_REQUEST"),onSendNotification:(0,A.JV)(s,"SEND_NOTIFICATION"),onReceiveNotification:(0,A.JV)(s,"RECEIVE_NOTIFICATION"),onSemanticTokensRefresh:(0,A.JV)(s,"SEMANTIC_TOKENS_REFRESH"),shutdown:function(){for(var e in C(ev.a.EXITING),m.clear(),v)D(Number(e));N(),E({method:"shutdown"}).then(function(){k({method:"exit"}),C(ev.a.EXITED),s.removeAllListeners()})},isDestroyed:function(){return p},destroy:function(){for(var e in p=!0,m.clear(),v)D(Number(e));N(),C(ev.a.EXITED),s.removeAllListeners()},getServerState:function(){return d},getServerHealth:function(){return f},getServerCapabilities:function(){return h},getServerInfo:function(){return t},getDiagnostics:function(e){var t=m.get(e);if(!t)throw Error("File with path ".concat(e," is not open."));return t.diagnostics},isOpen:function(e){return m.has(e)},documentUriToPath:y,pathToDocumentURI:b,isSupportedFile:r,getLanguageId:function(e){return e_(e,i)},clientId:i,clientName:o}}({connection:{read:function(e){"open"===u.status&&u.onCommand(function(t){t.output&&e(t.output)})},write:function(e){if("open"!==u.status){(null==m?void 0:m.isDestroyed())&&H.kg.error("LSPNix: tried to write to channel but the lsp client is already destroyed");return}u.send({input:e})},didClose:function(){return"open"!==u.status}},clientId:e,clientName:c[e].option.name,isSupportedFile:function(e){return(0,er.F)(e,d)},applyWorkspaceEdit:(g=(0,w._)(function(e){var t;return(0,_.Jh)(this,function(n){return(t=e.edit,m)?[2,(0,ea.w)({edit:t,fs:r,client:m})]:[2,{applied:!1}]})}),function(e){return g.apply(this,arguments)}),getWorkspaceConfiguration:function(){if(!(null===(e=d.config)||void 0===e?void 0:e.configurationJson))return null;var e,t=null;try{t=JSON.parse(d.config.configurationJson)}catch(e){H.kg.error("Failed to parse LSP workspace configuration",{configurationJson:d.config.configurationJson})}return t}}),null===(y=d.config)||void 0===y?void 0:y.initializationOptionsJson)try{E=JSON.parse(d.config.initializationOptionsJson)}catch(e){H.kg.error("Failed to parse LSP initializationOptions",{initializationOptionsJson:d.config.initializationOptionsJson})}var i,g,y,k,E,T=m.initialize({pwd:t.workingDirectory,initializationOptions:E}).catch(function(t){if((null==t?void 0:t.message)!=="Initialize request cancelled")throw H.kg.error("LSPNix: failed to initialize client",{lspId:e,appService:"lspnix",originalError:null==t?void 0:t.message}),t});v.push(m.onServerHealthChange(function(t){if(t===ev.N.BROKEN&&(H.kg.info("LSP: Server health broken",{lspId:e}),b(),s)){H.kg.info("LSP: retrying after server health broken",{lspId:e}),p(e,n,S);return}}),m.onServerStateChange((i=(0,w._)(function(t){var n,r,i,s,p,v,g,y,w,Z,x,S,k,E,R;return(0,_.Jh)(this,function(_){switch(_.label){case 0:if("open"!==u.status)return H.kg.info("LSPNix: channel wasn't open on state change",{lspId:e,appService:"lspnix",state:t}),b(),[2];if(!m)return H.kg.info("LSPNix: client was null on state change. This should never happen",{lspId:e,appService:"lspnix",state:t}),b(),[2];if(!eE(c[e].option,d))return H.kg.info("LSPNix: configuration changed and received state change",{lspId:e,appService:"lspnix",state:t}),b(),[2];if(t===ev.a.EXITED)return H.kg.info("LSP server exited via 'exit' notification",{lspId:e,appService:"lspnix"}),b(),[2];if(t!==ev.a.INITIALIZED)return[2];return[4,T];case 1:if(_.sent(),"open"!==u.status)return H.kg.info("LSPNix: channel wasn't open after initialization",{lspId:e,appService:"lspnix"}),b(),[2];h(m),f.delete(e),c[e].client=m,n=!0,r=!1,i=void 0;try{for(s=a[Symbol.iterator]();!(n=(p=s.next()).done);n=!0)if(g=(v=(0,C._)(p.value,2))[0],y=v[1],(0,er.F)(g,d)&&(w=l.get(g),o||!w||!w.size)){Z=w?w.add(m):new Set([m]),l.set(g,Z),x=!0,S=!1,k=void 0;try{for(E=y[Symbol.iterator]();!(x=(R=E.next()).done);x=!0)(0,R.value)(Array.from(Z))}catch(e){S=!0,k=e}finally{try{x||null==E.return||E.return()}finally{if(S)throw k}}}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return[2]}})}),function(e){return i.apply(this,arguments)})))})}}),function(e){b(e.willReconnect)}}),c[e].closeChannel=g,[2]}})})).apply(this,arguments)}function g(e){var t=null==e?void 0:e.languageServers;if(!t||0===t.length){var n=!0,r=!1,i=void 0;try{for(var o,a=Object.keys(c)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;u(l)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return}var s={},f=!0,h=!1,p=void 0;try{for(var m,v=t[Symbol.iterator]();!(f=(m=v.next()).done);f=!0){var g=m.value;s[g.id]=g}}catch(e){h=!0,p=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}var y=!0,b=!1,w=void 0;try{for(var Z,x=Object.keys(c)[Symbol.iterator]();!(y=(Z=x.next()).done);y=!0){var C=Z.value;s[C]||u(C)}}catch(e){b=!0,w=e}finally{try{y||null==x.return||x.return()}finally{if(b)throw w}}var _=!0,S=!1,k=void 0;try{for(var E,T=Object.keys(s)[Symbol.iterator]();!(_=(E=T.next()).done);_=!0){var R=E.value,D=c[R],I=s[R];if(!D){d(R,I);continue}eE(D.option,I)||(u(R),d(R,I))}}catch(e){S=!0,k=e}finally{try{_||null==T.return||T.return()}finally{if(S)throw k}}}function y(){return(y=(0,w._)(function(){var e;return(0,_.Jh)(this,function(t){try{e=n.configs.current,g(e),n.configs.subscribe(g)}catch(e){H.kg.error("LSP initialization failed: "+e.message)}return[2]})})).apply(this,arguments)}return function(){y.apply(this,arguments)}(),{disable:function(){if(s){s=!1;var e=!0,t=!1,n=void 0;try{for(var r,i=Object.values(c)[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;o.closeChannel(),null===(h=o.client)||void 0===h||h.destroy(),o.client=null;var u=!0,d=!1,f=void 0;try{for(var h,p,m=a[Symbol.iterator]();!(u=(p=m.next()).done);u=!0){var v=(0,C._)(p.value,2),g=v[0],y=v[1];if(l.has(g)){l.delete(g);var b=!0,w=!1,Z=void 0;try{for(var x,_=y[Symbol.iterator]();!(b=(x=_.next()).done);b=!0)(0,x.value)([])}catch(e){w=!0,Z=e}finally{try{b||null==_.return||_.return()}finally{if(w)throw Z}}}}}catch(e){d=!0,f=e}finally{try{u||null==m.return||m.return()}finally{if(d)throw f}}}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},enable:function(){if(!s){s=!0;var e=!0,t=!1,n=void 0;try{for(var r,i=Object.keys(c)[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;m(o)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},onClient:function(e,t){a.has(e)||a.set(e,[]),null===(d=a.get(e))||void 0===d||d.push(t);var n=l.get(e);if(n&&n.size)t(Array.from(n));else{var r=[],i=!0,s=!1,u=void 0;try{for(var d,f,h=Object.values(c)[Symbol.iterator]();!(i=(f=h.next()).done);i=!0){var p=f.value;if((0,er.F)(e,p.option)&&p.client&&(r.push(p.client),!o))break}}catch(e){s=!0,u=e}finally{try{i||null==h.return||h.return()}finally{if(s)throw u}}r.length&&t(r)}return function(){var n,r=null!==(n=a.get(e))&&void 0!==n?n:[];a.set(e,r.filter(function(e){return e!==t}))}}}}({container:eK,toolchain:e8,fs:e1,enableMultipleLSPClientsPerFile:void 0!==eC&&eC}),ti=(T=(g={container:eK,beforeRun:e7}).container,N=g.beforeRun,W=(0,A.ZP)(),V=ee.Z.Idle,z=new Date(0),j=!1,W.on(ee.z.TEST_RESULT,function(e){j=j&&"passed"===e.body}),q=function(e){W.emit(ee.z.STATE_CHANGED,e),V=e},et=(0,w._)(function(e,t){var n,r,i,o,a,l,c,s,u,d,f;return(0,_.Jh)(this,function(h){switch(h.label){case 0:if(n=Q.api.Payload.fromObject(t),r=Q.api.Payload.verify(n))throw r;return i=new(en())(function(e){var t=Q.api.Response.fromObject(e),r=Q.api.Response.verify(t);if(r){G.Tb(TypeError("invalid payload received"),function(i){return i.setExtras({validationError:r,payload:n,message:e,response:t})});return}switch(t.body){case"error":return W.emit(ee.z.ERROR,t.error);case"instructionResult":return W.emit(ee.z.INSTRUCTION_RESULT,t.instructionResult);case"testResult":return W.emit(ee.z.TEST_RESULT,t.testResult);case"status":switch(t.status){case Q.api.Status.Ready:return q(ee.Z.Ready);case Q.api.Status.Building:return q(ee.Z.Building);case Q.api.Status.Running:return q(ee.Z.Running)}}}),o=e.onCommand(function(e){if(e.output)try{i.submit(e.output)}catch(t){G.Tb(SyntaxError("invalid response received from i/o testing binary"),function(r){return r.setExtras({err:t,payload:n,cmd:e})})}}),a=e.request({exec:{args:["io-tester"],splitStderr:!0,lifecycle:B.api.Exec.Lifecycle.STDIN,splitLogs:!0}}),[4,new Promise(function(e,t){var n,r=function(){n(),e()};W.once(ee.z.STATE_CHANGED,r);var i=setTimeout(function(){n(),t(Error("timeout while waiting for iotester to start"))},2e4);n=function(){clearTimeout(i),W.off(ee.z.STATE_CHANGED,r)}})];case 1:return h.sent(),[4,e.request({input:JSON.stringify(n)+"\n"})];case 2:if(!(l=h.sent()).ok)throw s=Error(null!==(c=l.error)&&void 0!==c?c:"unexpected error occurred while sending input to i/o testing binary"),G.Tb(s,function(e){return e.setExtra("status",l)}),s;return[4,a];case 3:return(u=h.sent()).ok||(f=Error(null!==(d=u.error)&&void 0!==d?d:"unexpected error occurred while executing i/o testing binary"),G.Tb(f,function(e){return e.setExtra("result",u)})),o(),[2]}})}),{run:function(e){if(V!==ee.Z.Idle)throw Error("iotester already running");return q(ee.Z.Starting),z=new Date,j=!0,N().then(function(){return new Promise(function(t){var n=T.openChannel({service:"exec"},function(r){var i="",o="",a=r.channel.onCommand(function(e){e.log?i+=e.log:e.stderr&&(o+=e.stderr)});return t((function(e,t){return et.apply(this,arguments)})(r.channel,e).finally(function(){a(),n(),(o||i)&&G.Tb(Error("logs received from IOTester"),function(t){return t.setExtras({logs:i,stderr:o,payload:e})})})),n})})}).catch(function(e){return j=!1,Promise.reject(e)}).finally(function(){return q(ee.Z.Idle)})},get lastRunAt(){return z},get state(){return V},get lastRunDidPass(){return j},onInstructionResult:function(e){return W.on(ee.z.INSTRUCTION_RESULT,e),function(){W.off(ee.z.INSTRUCTION_RESULT,e)}},onStateChanged:function(e){return W.on(ee.z.STATE_CHANGED,e),function(){W.off(ee.z.STATE_CHANGED,e)}},onTestResult:function(e){return W.on(ee.z.TEST_RESULT,e),function(){W.off(ee.z.TEST_RESULT,e)}},onError:function(e){return W.on(ee.z.ERROR,e),function(){W.off(ee.z.ERROR,e)}}}),to=(0,K.Z)({container:eK,fs:e1}),ta=function(e){var t,n,r=e.container,i=e.nixService;function o(e){return a.apply(this,arguments)}function a(){return(a=(0,w._)(function(e){return(0,_.Jh)(this,function(t){switch(t.label){case 0:if(e&&(n=void 0),!n){var r;n=new Promise((r=(0,w._)(function(e){var t,n;return(0,_.Jh)(this,function(r){switch(r.label){case 0:return[4,i.listPackages()];case 1:if(null==(n=r.sent())?void 0:null===(t=n.packages)||void 0===t?void 0:t.some(function(e){return"pkgs.postgresql"===e.name}))return[3,3];return[4,i.addPackages(["pkgs.postgresql"])];case 2:return r.sent(),e(),[3,4];case 3:e(),r.label=4;case 4:return[2]}})}),function(e){return r.apply(this,arguments)}))}return[4,n];case 1:return t.sent(),[2]}})})).apply(this,arguments)}return{ensureNixPsqlPackageInstalled:o,run:(t=(0,w._)(function(e){var t,n,i,a,l,c,s,u,d,f,h,p,m;return(0,_.Jh)(this,function(v){switch(v.label){case 0:return t=e.query,n=e.connectionString,[4,o()];case 1:v.sent(),i=(0,eG.Z)({container:r}),a=[],l=null,c=new eB.t(function(e){return a.push(e)}),s=null,u=!1,d=new Promise(function(e){var t=i.onStateChanged(function(n){var r=n.state,i=n.stderrBuffer;if(r===B.api.State.Running){u=!0;return}u&&(s=i,t(),e())})}),i.onOutput(function(e){try{c.process(e)}catch(t){l||(l=t,G.Tb(t,function(t){return t.setExtra("chunk",e)}))}}),v.label=2;case 2:return v.trys.push([2,,5,6]),[4,i.request({args:["psql",n,"--csv","--command",t],splitStderr:!0})];case 3:return f=v.sent(),[4,d];case 4:return v.sent(),f.error&&!s&&(s=f.error),c.flush(),[3,6];case 5:return i.dispose(),[7];case 6:if(s)return[2,{columns:c.headers(),rows:a,error:s}];if(l)return h=l.message,[2,{columns:null!==(p=c.headers())&&void 0!==p?p:[],rows:a,error:h}];return[2,{columns:null!==(m=c.headers())&&void 0!==m?m:[],rows:a,error:null}]}})}),function(e){return t.apply(this,arguments)})}}({container:eK,nixService:e3}),tl=(0,ez.Z)({container:eK}),{session:e0,presence:e2,packager:e6,container:eK,fs:e1,runner:tt,debuggest:e9,broadcast:tn,dotReplit:e4,nixService:e3,lspnix:tr,iotester:ti,git:to,psql:ta,userEvents:eQ,replspaceApi:e5,toolchain:e8,ports:te,secrets:tl});return null==tc||tc.span.end(),r(ts),function(){r(null),setTimeout(function(){ts.container.destroy()},500)}},[e]),n}(u=b||(b={})).CHANNEL_OPENED="CHANNEL_OPENED",u.EVENT_SENT="EVENT_SENT"},94694:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(66626),i=n(50959);function o(e,t){var n=(0,r._)((0,i.useState)(null),2),o=n[0],a=n[1];return(0,i.useEffect)(function(){var n=!1;return e.readFile(t).then(function(e){n||a(e)}),function(){n=!0}},[e,t]),o}},72658:function(e,t,n){n.d(t,{ZP:function(){return f},y5:function(){return a},yG:function(){return o}});var r,i,o,a,l=n(27387),c=n(96583),s=n(19871);function u(e,t){return"{ ".concat(e,"; } > /dev/null 2>&1 && echo -n '").concat(t,"' && exit 0")}(r=o||(o={})).NOT_INITIALIZED="NOT_INITIALIZED",r.ON_UNBORN_BRANCH="ON_UNBORN_BRANCH",r.MERGING="MERGING",r.REBASING="REBASING",r.REVERTING="REVERTING",r.CHERRY_PICKING="CHERRY_PICKING",r.APPLYING_MAILBOX="APPLYING_MAILBOX",r.BISECTING="BISECTING",r.DIRTY_WORKTREE="DIRTY_WORKTREE",r.DIRTY_INDEX="DIRTY_INDEX",r.CLEAN="CLEAN",r.DETACHED_HEAD="DETACHED_HEAD",(i=a||(a={})).INITIALIZING="INITIALIZING",i.INTERMEDIATE="INTERMEDIATE",i.NORMAL="NORMAL",i.DETACHED_HEAD="DETACHED_HEAD";var d=[u("! git rev-parse --is-inside-work-tree","NOT_INITIALIZED"),u('[ "$(! git rev-parse HEAD -- 2>&1)" = "fatal: bad revision \'HEAD\'" ]',"ON_UNBORN_BRANCH"),u("git rev-parse -q --verify MERGE_HEAD","MERGING"),u("[ -d '.git/rebase-apply' ] && [ -f '.git/rebase-apply/applying' ]","APPLYING_MAILBOX"),u("[ -d '.git/rebase-apply' ] || [ -d '.git/rebase-merge' ]","REBASING"),u("git rev-parse -q --verify REVERT_HEAD","REVERTING"),u("git rev-parse -q --verify CHERRY_PICK_HEAD","CHERRY_PICKING"),u("[ -f '.git/BISECT_LOG' ]","BISECTING"),u("! git symbolic-ref -q HEAD","DETACHED_HEAD"),"git update-index -q --refresh > /dev/null || exit $?",u('{ ! git diff-files --quiet; } || [ -n "$(git ls-files --others --exclude-standard)" ]',"DIRTY_WORKTREE"),u("! git diff-index --cached --quiet HEAD --","DIRTY_INDEX"),'echo -n "CLEAN"'].join(";");function f(e){return h.apply(this,arguments)}function h(){return(h=(0,l._)(function(e){var t,n,r;return(0,c.Jh)(this,function(i){switch(i.label){case 0:return[4,e(d,{serviceMethod:"git-get-repository-state"})];case 1:if((t=i.sent()).error)return[2,t];if(!(t.output in o))return[2,{error:s.aq.UNKNOWN}];return r=function(e){switch(e){case"NOT_INITIALIZED":case"ON_UNBORN_BRANCH":return"INITIALIZING";case"MERGING":case"REBASING":case"REVERTING":case"CHERRY_PICKING":case"APPLYING_MAILBOX":case"BISECTING":return"INTERMEDIATE";case"DIRTY_WORKTREE":case"DIRTY_INDEX":case"CLEAN":return"NORMAL";case"DETACHED_HEAD":return"DETACHED_HEAD"}}(n=t.output),[2,{state:n,type:r,error:null}]}})})).apply(this,arguments)}},15026:function(e,t,n){n.d(t,{Bi:function(){return m},ZP:function(){return y},qE:function(){return p},yH:function(){return a}});var r,i,o,a,l=n(27387),c=n(66626),s=n(63257),u=n(96583);function d(e){switch(e){case"A":return"ADDED";case"C":return"COPIED";case"D":return"DELETED";case"M":return"MODIFIED";case"R":return"RENAMED";case"T":return"TYPE_CHANGED";case"X":default:return"UNKNOWN";case"B":return"BROKEN"}}(r=a||(a={})).ADDED="ADDED",r.COPIED="COPIED",r.DELETED="DELETED",r.MODIFIED="MODIFIED",r.RENAMED="RENAMED",r.TYPE_CHANGED="TYPE_CHANGED",r.UNKNOWN="UNKNOWN",r.BROKEN="BROKEN";var f=(i=(0,l._)(function(e,t){var n;return(0,u.Jh)(this,function(r){switch(r.label){case 0:return[4,e("git log -1 --pretty=%P ".concat(t))];case 1:if((n=r.sent()).error)return[2,!1];return[2,n.output.trim().length>0]}})}),function(e,t){return i.apply(this,arguments)}),h=(o=(0,l._)(function(e,t){var n,r,i,o,a,l,c,s,d;return(0,u.Jh)(this,function(u){switch(u.label){case 0:return[4,e("git ls-tree --name-only -r ".concat(t),{serviceMethod:"git-get-files-for-commit"})];case 1:if((n=u.sent()).error)return[2,n];r=[],i=n.output.split("\n").filter(Boolean),o=!0,a=!1,l=void 0;try{for(c=i[Symbol.iterator]();!(o=(s=c.next()).done);o=!0)d=s.value,r.push({path:d,type:"ADDED"})}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return[2,{files:r,error:null}]}})}),function(e,t){return o.apply(this,arguments)});function p(e){return Array.from(e.matchAll(g)).map(function(e){var t=(0,c._)(e,4),n=t[1],r=t[2];return{path:t[3],originalPath:r,type:d(n)}})}function m(e){return Array.from(e.matchAll(v)).map(function(e){var t=(0,c._)(e,3),n=t[1];return{path:t[2],type:d(n)}})}var v=/([ADMUXBT])\0([^\0]+)/g,g=/([RC])\d*\0([^\0]+)\0([^\0]+)/g;function y(e,t){return b.apply(this,arguments)}function b(){return(b=(0,l._)(function(e,t){var n,r,i;return(0,u.Jh)(this,function(o){switch(o.label){case 0:return[4,f(e,t)];case 1:if(!o.sent())return[2,h(e,t)];return[4,e("git diff-tree --no-commit-id --name-status -z -r -C --find-copies-harder -M ".concat(t),{serviceMethod:"git-get-files-for-commit"})];case 2:if((n=o.sent()).error)return[2,n];return r=p(n.output),i=m(n.output),[2,{files:(0,s._)(r).concat((0,s._)(i)),error:null}]}})})).apply(this,arguments)}},97658:function(e,t,n){n.d(t,{CH:function(){return v},Dc:function(){return d},GE:function(){return f},LY:function(){return h},Pi:function(){return g},Qj:function(){return m},bF:function(){return p},dC:function(){return u}});var r=n(66626),i=n(1675),o=n(70886),a=n(52621),l=/[~^:?*[\\\0-\x20\x7F]/,c=/^(([A-Za-z0-9]+@|http(|s):\/\/)|(http(|s):\/\/[A-Za-z0-9]+@))([A-Za-z0-9.]+(:\d+)?)(?::|\/)([\d/\w.-]+?)$/,s=new RegExp([l,/^$/,/^\//,/\/$/,/\.lock$/,/\/{2,}/,/^\./,/\.$/,/\/\./,/\.\./,/@\{/,/^@$/,/^-/].map(function(e){return"(?:".concat(e.source,")")}).join("|"));function u(e){return 0===e.length||!l.test(e)}function d(e){return!s.test(e)}function f(e){return!s.test(e)}function h(e){return c.test(e)}function p(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"string"==typeof e?(0,i.C)(e):"commit"in e?e.type===a.HO.LOCAL||t&&e.type===a.HO.TRACKED?e.name:"".concat(e.remote,"/").concat(e.name):e.name}function m(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"==typeof e)return e;if("commit"in e)return e.type===a.HO.LOCAL||t&&e.type===a.HO.TRACKED?"refs/heads/".concat(e.name):"refs/remotes/".concat(e.remote,"/").concat(e.name);if(e.type===o.l.BRANCH)return"refs/heads/".concat(e.name);if(e.type===o.l.REMOTE_BRANCH)return"refs/remotes/".concat(e.remote,"/").concat(e.branch);throw Error("Unknown branch object")}function v(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"==typeof e)return t&&!e.startsWith("refs/remotes/")?null:(0,r._)((0,i.Tg)(e),1)[0];if("commit"in e)return t&&e.type!==a.HO.REMOTE?null:e.remote;if(e.type===o.l.BRANCH)return null;if(e.type===o.l.REMOTE_BRANCH)return e.remote;throw Error("Unknown branch object")}function g(e,t){return e===t||null!==e&&null!==t&&m(e)===m(t)}},70886:function(e,t,n){n.d(t,{L:function(){return function e(t){var n;switch("HEAD"===(n=t)||"refs/HEAD"===n||n.startsWith(l)?"HEAD":n.startsWith(c)?"BRANCH":n.startsWith(s)?f.test(n)?"REMOTE_HEAD":"REMOTE_BRANCH":n.startsWith(d)||n.startsWith(u)?"TAG":"BRANCH"){case"HEAD":if(t.startsWith(l)){if(t.endsWith("(detached)"))return{type:"HEAD",name:"HEAD",detached:!0,ref:null};return{type:"HEAD",name:"HEAD",detached:!1,ref:e(t.slice(l.length))}}return{type:"HEAD",name:"HEAD",detached:!1,ref:null};case"REMOTE_HEAD":var r=t.slice(s.length);return{type:"REMOTE_HEAD",name:"HEAD",remote:(0,o._)(r.split("/"),1)[0]};case"BRANCH":return{type:"BRANCH",name:t.startsWith(c)?t.slice(c.length):t};case"REMOTE_BRANCH":var i=t.slice(s.length),h=(0,a._)(i.split("/"));return{type:"REMOTE_BRANCH",name:i,remote:h[0],branch:h.slice(1).join("/")};case"TAG":return t.startsWith(u)&&(t=t.slice(u.length)),t.startsWith(d)&&(t=t.slice(d.length)),{type:"TAG",name:t}}}},l:function(){return i}});var r,i,o=n(66626),a=n(78950),l="HEAD -> ",c="refs/heads/",s="refs/remotes/",u="tag: ",d="refs/tags/",f=/^refs\/remotes\/([^/]+)\/HEAD$/;(r=i||(i={})).HEAD="HEAD",r.REMOTE_HEAD="REMOTE_HEAD",r.BRANCH="BRANCH",r.REMOTE_BRANCH="REMOTE_BRANCH",r.TAG="TAG"},52621:function(e,t,n){n.d(t,{HO:function(){return i},ZP:function(){return h},p3:function(){return d}});var r,i,o=n(27387),a=n(66626),l=n(63257),c=n(96583),s=n(1675),u=n(70886);function d(e,t){return!!e&&!!t&&(e===t||e.name===t.name&&e.remote===t.remote)}function f(e){var t=(0,a._)(e.split("	"),6),n=t[0],r=t[1],i=t[2],o=t[3],l=t[4],c=t[5],d=(0,u.L)(n),f={hash:i,author:{name:o,email:(0,s.tc)(l),date:1e3*parseInt(c,10)}};if(d.type===u.l.BRANCH){var h=r?(0,u.L)(r):null,p=h&&(h.type===u.l.REMOTE_BRANCH||h.type===u.l.BRANCH)?h:null;return{type:"LOCAL",name:d.name,push:p,remote:null,tracking:null,commit:f}}return d.type===u.l.REMOTE_BRANCH?{type:"REMOTE",name:d.branch,remote:d.remote,push:null,tracking:null,commit:f}:null}function h(e){return p.apply(this,arguments)}function p(){return(p=(0,o._)(function(e){var t,n,r=arguments;return(0,c.Jh)(this,function(i){switch(i.label){case 0:return[4,e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!1===e.local&&!1===e.remote)throw Error("Cannot specify both local and remote as false");var t=[];if(t.push('--format="%(refname)%09%(push)%09%(objectname)%09%(authorname)%09%(authoremail)%09%(authordate:unix)"'),e.max&&t.push("--count=".concat(e.max)),e.pattern){if("string"==typeof e.pattern)t.push((0,s.Gw)(e.pattern));else{var n,r,i=e.pattern.map(function(e){return(0,s.Gw)(e)});t.push.apply(t,(0,l._)(i))}}else(null===(n=e.local)||void 0===n||n)&&t.push("refs/heads"),(null===(r=e.remote)||void 0===r||r)&&t.push("refs/remotes");return"git for-each-ref ".concat(t.join(" "))}(r.length>1&&void 0!==r[1]?r[1]:{}),{serviceMethod:"git-list-branches"})];case 1:if((t=i.sent()).error)return[2,t];return(n=function(e){var t=[],n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var s=a.value;"LOCAL"===s.type?t.push(s):"REMOTE"===s.type&&n.push(s)}}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}var d=new Set,f=[],h=!0,p=!1,m=void 0;try{for(var v,g=n[Symbol.iterator]();!(h=(v=g.next()).done);h=!0)!function(){var e=v.value,n=t.find(function(t){return t.push&&t.push.type===u.l.REMOTE_BRANCH&&t.push.remote===e.remote&&t.push.branch===e.name&&t.name===e.name});n&&(d.add(e),d.add(n),f.push({type:"TRACKED",name:n.name,remote:e.remote,push:n.push,tracking:e,commit:n.commit}))}()}catch(e){p=!0,m=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw m}}var y=e.filter(function(e){return!d.has(e)});return(0,l._)(y).concat((0,l._)(f))}((0,s.so)(t.output,"\n").map(f).filter(function(e){return null!==e}))).sort(function(e,t){return t.commit.author.date-e.commit.author.date}),[2,{branches:n,error:null}]}})})).apply(this,arguments)}(r=i||(i={})).LOCAL="LOCAL",r.REMOTE="REMOTE",r.TRACKED="TRACKED"},97975:function(e,t,n){n.d(t,{T:function(){return i},Z:function(){return d}});var r,i,o=n(27387),a=n(66626),l=n(96583),c=n(19871),s=n(1675),u=n(44906);function d(e){return f.apply(this,arguments)}function f(){return(f=(0,o._)(function(e){var t,n,r,i,o,d,f,h,p,m=arguments;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return t=m.length>1&&void 0!==m[1]?m[1]:{},[4,(0,u.Z)(e)];case 1:if((n=l.sent()).error)return[2,n];if(!n.branch)return[2,{error:c.aq.HEAD_DETACHED}];if(!n.upstream&&!t.experimental_override_remote||(i=(r=(0,a._)(t.experimental_override_remote?[t.experimental_override_remote.name,t.experimental_override_remote.branch]:(0,s.Tg)(n.upstream.branch),2))[0],o=r[1],!i||!o))return[2,{error:c.aq.UPSTREAM_NOT_SET}];if(n.changes.length>0)return[2,{error:c.aq.DIRTY_WORKTREE}];if("FF_ONLY"===(f=null!==(d=t.mode)&&void 0!==d?d:"FF_ONLY")&&n.upstream&&n.upstream.ahead>0)return[2,{error:c.aq.MERGE_CONFLICT}];switch("FF_ONLY"!==f&&n.upstream&&0===n.upstream.ahead&&(f="FF_ONLY"),h=["--quiet","--no-edit"],f){case"FF_ONLY":h.push("--no-rebase","--ff-only");break;case"MERGE":h.push("--no-rebase","--ff");break;case"REBASE":h.push("--rebase")}return h.push((0,s.Gw)(i),(0,s.Gw)(o)),[4,e("git pull ".concat(h.join(" ")),{serviceMethod:"git-pull"})];case 2:if((p=l.sent()).error!==c.aq.MERGE_CONFLICT)return[3,8];if(t.allowConflicts)return[2,{hasConflicts:!0,error:null}];switch(f){case"MERGE":return[3,3];case"REBASE":return[3,5]}return[3,7];case 3:return[4,e("git merge --abort",{serviceMethod:"git-pull"})];case 4:case 6:return l.sent(),[3,7];case 5:return[4,e("git rebase --abort",{serviceMethod:"git-pull"})];case 7:return[2,p];case 8:if(p.error)return[2,p];return[2,{hasConflicts:!1,error:null}]}})})).apply(this,arguments)}(r=i||(i={})).FF_ONLY="FF_ONLY",r.MERGE="MERGE",r.REBASE="REBASE"},50508:function(e,t,n){n.d(t,{J:function(){return r},O:function(){return i}});var r="users.noreply.replit.com",i="users.noreply.github.com"},15229:function(e,t,n){n.d(t,{J:function(){return i},e:function(){return r}});var r=(0,n(48376).u)(null);function i(e,t,n){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Date.now();Array.isArray(e)||(e=[e]);var a=null!==(i=t.output)&&void 0!==i?i:"",l=t.error,c=n?o:Date.now(),s="".concat(o,"-").concat(Math.random());r.set({input:e,output:a,error:l,start:o,end:c,cached:n,key:s})}},52423:function(e,t,n){n.d(t,{Z:function(){return e4}});var r=n(27387),i=n(66626),o=n(63257),a=n(96583),l=n(1675);function c(e,t){return s.apply(this,arguments)}function s(){return(s=(0,r._)(function(e,t){var n,r,i,o;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return n=t.upstream,r=t.branchName,i=["--set-upstream-to",n],r&&i.push((0,l.Gw)(r)),[4,e("git branch ".concat(i.join(" ")),{serviceMethod:"git-set-branch-upstream"})];case 1:if((o=a.sent()).error)return[2,o];return[2,{error:null}]}})})).apply(this,arguments)}var u=["git diff -z --name-only --diff-filter=U","echo -n ".concat("\x1f"),"{ git grep -z -l -E '<{7,}|={7,}|>{7,}' || exit $(( $? == 1 ? 0 : $? )); }"].join(" && ");function d(e){return f.apply(this,arguments)}function f(){return(f=(0,r._)(function(e){var t,n,r,o,c,s,d,f,h,p,m;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,e(u,{serviceMethod:"git-get-conflicting-files"})];case 1:if((t=a.sent()).error)return[2,t];if(r=(n=(0,i._)(t.output.split("\x1f").map(function(e){return(0,l.so)(e,"\x00")}),2))[0],o=n[1],!r.length)return[2,{files:new Map,error:null}];c=new Map,s=!0,d=!1,f=void 0;try{for(h=r[Symbol.iterator]();!(s=(p=h.next()).done);s=!0)m=p.value,c.set(m,!o.includes(m))}catch(e){d=!0,f=e}finally{try{s||null==h.return||h.return()}finally{if(d)throw f}}return[2,{files:c,error:null}]}})})).apply(this,arguments)}var h=n(72658),p=n(19871);function m(e){return v.apply(this,arguments)}function v(){return(v=(0,r._)(function(e){var t,n,r,i,o,c;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,(0,h.ZP)(e)];case 1:if((t=a.sent()).error)return[2,t];if(t.state!==h.yG.MERGING)return[2,{error:p.aq.INVALID_STATE}];return[4,e("cat '.git/MERGE_HEAD'",{serviceMethod:"git-get-merging-refs"})];case 2:if((n=a.sent()).error)return[2,n];if(!(r=(0,l.so)(n.output,"\n")).length)return[2,{commits:[],branches:[],error:null}];return i="{ grep -F '".concat(r.join("\n"),"' || exit 0; }"),[4,e("".concat('git for-each-ref --format="%(objectname)	%(refname)" refs/heads/ refs/remotes/'," | ").concat(i),{serviceMethod:"git-get-merging-refs"})];case 3:if((o=a.sent()).error)return[2,o];if(!o.output)return[2,{commits:r,branches:[],error:null}];return c=(0,l.so)(o.output,"\n").map(function(e){return e.split("	")[1]}).map(l.C),[2,{commits:r,branches:c,error:null}]}})})).apply(this,arguments)}var g=n(15026);function y(e){return b.apply(this,arguments)}function b(){return(b=(0,r._)(function(e){var t,n;return(0,a.Jh)(this,function(r){switch(r.label){case 0:return[4,e("if [ -f '.git/FETCH_HEAD' ]; then stat -c %Y '.git/FETCH_HEAD'; fi",{serviceMethod:"git-last-fetched"})];case 1:if((t=r.sent()).error)return[2,t];if(!t.output||isNaN(n=parseInt(t.output,10)))return[2,{lastFetched:null,error:null}];return[2,{lastFetched:new Date(n*=1e3),error:null}]}})})).apply(this,arguments)}var w=n(97658),Z=n(70886);function x(e,t){return C.apply(this,arguments)}function C(){return(C=(0,r._)(function(e,t){var n,r,i,o,l,c;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(n=(t=(0,w.Qj)(t)).startsWith("refs/heads/"),r=t.startsWith("refs/remotes/"),n)return[3,2];return i=r?t:"refs/remotes/".concat(t),[4,e("git show-ref --verify ".concat(i),{serviceMethod:"git-branch-exists"})];case 1:if(!(o=a.sent()).error)return[2,{exists:!0,ref:(0,Z.L)(i),error:null}];if(o.error!==p.aq.INVALID_REFERENCE)return[2,o];a.label=2;case 2:if(r)return[3,4];return l=n?t:"refs/heads/".concat(t),[4,e("git show-ref --verify ".concat(l),{serviceMethod:"git-branch-exists"})];case 3:if(!(c=a.sent()).error)return[2,{exists:!0,ref:(0,Z.L)(l),error:null}];if(c.error!==p.aq.INVALID_REFERENCE)return[2,c];a.label=4;case 4:return[2,{exists:!1,ref:null,error:null}]}})})).apply(this,arguments)}function _(e,t,n){return S.apply(this,arguments)}function S(){return(S=(0,r._)(function(e,t,n){var r,i,o;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if((0,w.Pi)(t,n)){if(t=(0,w.bF)(t,!0),n=(0,w.bF)(n),t===n)return[2,{canMerge:!0,error:null}]}else t=(0,w.bF)(t),n=(0,w.bF)(n);return t=(0,l.Gw)(t),n=(0,l.Gw)(n),r="git merge-base ".concat(t," ").concat(n),i='git merge-tree "$('.concat(r,')" ').concat(t," ").concat(n),[4,e("set -eo pipefail; (".concat(i," | ").concat("( (grep -q -e '^+<* \\.our$' && echo '1') || echo '0')",") || test $? -eq 141"),{serviceMethod:"git-can-merge-branches"})];case 1:if((o=a.sent()).error)return[2,o];return[2,{canMerge:"0"===o.output,error:null}]}})})).apply(this,arguments)}function k(e,t){return E.apply(this,arguments)}function E(){return(E=(0,r._)(function(e,t){var n,r,i,o,c,s,u,d,f;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return n=t.branch,r=t.message,o=void 0!==(i=t.allowConflicts)&&i,[4,(0,h.ZP)(e)];case 1:if((c=a.sent()).error)return[2,c];if(s=c.state,c.type!==h.y5.NORMAL||s===h.yG.DIRTY_WORKTREE||s===h.yG.DIRTY_INDEX)return[2,{error:p.aq.INVALID_STATE}];return[4,x(e,n)];case 2:if((u=a.sent()).error)return[2,u];if(!u.exists)return[2,{error:p.aq.INVALID_REFERENCE}];if(o)return[3,4];return[4,_(e,n,"HEAD")];case 3:if((d=a.sent()).error)return[2,d];if(!d.canMerge)return[2,{error:p.aq.MERGE_CONFLICT}];a.label=4;case 4:var m,v,g,y;return v=(m={branch:n,message:r}).branch,g=m.message,v=(0,w.Qj)(v),y=["--quiet","--no-edit","--no-ff","--overwrite-ignore","--commit"],g&&y.push("-m",(0,l.Gw)(g)),y.push((0,l.Gw)(v)),[4,e("git merge ".concat(y.join(" ")),{serviceMethod:"git-merge"})];case 5:if((f=a.sent()).error!==p.aq.MERGE_CONFLICT)return[3,8];if(o)return[3,7];return[4,e("git merge --abort")];case 6:return a.sent(),[2,f];case 7:return[2,{hasConflicts:!0,error:null}];case 8:if(f.error)return[2,f];return[2,{hasConflicts:!1,error:null}]}})})).apply(this,arguments)}function T(e){return R.apply(this,arguments)}function R(){return(R=(0,r._)(function(e){var t;return(0,a.Jh)(this,function(n){switch(n.label){case 0:return[4,e("git merge --abort",{serviceMethod:"git-merge-abort"})];case 1:if((t=n.sent()).error)return[2,t];return[2,{error:null}]}})})).apply(this,arguments)}function D(e){return I.apply(this,arguments)}function I(){return(I=(0,r._)(function(e){var t;return(0,a.Jh)(this,function(n){switch(n.label){case 0:return[4,e("GIT_EDITOR=/bin/true git merge --continue",{serviceMethod:"git-merge-continue"})];case 1:if((t=n.sent()).error)return[2,t];return[2,{error:null}]}})})).apply(this,arguments)}var B=n(44906);function G(e,t,n){return A.apply(this,arguments)}function A(){return(A=(0,r._)(function(e,t,n){var r,i,o,c,s,u,d,f,h,p,m,v,g,y,b;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if("string"==typeof t){if(""===t)return[2,{error:null}];t=[t]}if(!0!==t&&0===t.length)return[2,{error:null}];if(!(void 0!==n))return[3,2];return r=["--quiet","--no-overlay","--worktree","--source=".concat(n),!0===t?".":"-- ".concat(t.join(" "))],[4,e("git --literal-pathspecs restore ".concat(r.join(" ")),{serviceMethod:"git-restore-files"})];case 1:if((i=a.sent()).error)return[2,i];return[2,{error:null}];case 2:return[4,(0,B.Z)(e)];case 3:if((o=a.sent()).error)return[2,o];c=[],s=[],u=!0,d=!1,f=void 0;try{for(h=o.changes[Symbol.iterator]();!(u=(p=h.next()).done);u=!0)if(m=p.value,!0===t||t.includes(m.path))switch(m.type.worktree){case B.h.UNMODIFIED:continue;case B.h.UNTRACKED:c.push((0,l.Gw)(m.path));break;default:s.push((0,l.Gw)(m.path))}}catch(e){d=!0,f=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw f}}if(0===c.length&&0===s.length&&void 0===n)return[2,{error:null}];return v=[],c.length&&(g=["--quiet","--force","--",c.join(" ")],v.push("git --literal-pathspecs clean ".concat(g.join(" ")))),s.length&&(y=["--quiet","--no-overlay","--worktree","-- ".concat(s.join(" "))],v.push("git --literal-pathspecs restore ".concat(y.join(" ")))),[4,e(v,{serviceMethod:"git-restore-files"})];case 4:if((b=a.sent()).error)return[2,b];return[2,{error:null}]}})})).apply(this,arguments)}var P=n(12285),L=n(41733),N=n(43182),O=n(36556),U=function(){"use strict";function e(t,n){(0,P._)(this,e),this.cache=new Map,this.lastInvalidation=0,this.ttl=t,this.debounceTime=n}var t=e.prototype;return t.has=function(e){return this.cache.has(e)},t.get=function(e){var t=this.cache.get(e);if(!t)throw Error("No value found for key: ".concat(e));return t.result},t.set=function(e,t){var n=this,r=this.cache.get(e);r&&(clearTimeout(r.timeout),this.cache.delete(e));var i={result:t,timeout:setTimeout(function(){return n.cache.delete(e)},this.ttl),pending:!0};t.finally(function(){return i.pending=!1}),this.cache.set(e,i)},t.invalidate=function(){if(!(Date.now()-this.lastInvalidation<this.debounceTime)){var e=new Map,t=!0,n=!1,r=void 0;try{for(var o,a=this.cache[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=(0,i._)(o.value,2),c=l[0],s=l[1];s.pending?e.set(c,s):clearTimeout(s.timeout)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}this.cache=e,this.lastInvalidation=Date.now()}},t.clear=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.cache.values()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;clearTimeout(o.timeout)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.cache.clear(),this.lastInvalidation=0},e}(),M=n(15229),X=/^(fatal: |error: |remote: error: |CONFLICT \([^)]+\): )/im,F=/^cat: .*: No such file or directory$/im;function W(e){return RegExp("^fatal: ".concat(e.source),"im")}function H(e){return RegExp("^error: ".concat(e.source),"im")}var V=[{error:p.aq.NOT_INITIALIZED,match:[W(/not a git repository/)]},{error:p.aq.UNAUTHENTICATED,match:[W(/Authentication failed/),W(/unable to access/),W(/repository \S+ not found/),W(/could not read Username/),W(/could not read Password/),W(/Could not read from remote/)]},{error:p.aq.INDEX_FILE_CORRUPT,match:[W(/index file corrupt/),W(/index file smaller than expected/),H(/index file .*?\.idx is too small/)]},{error:p.aq.UNKNOWN_REMOTE,match:[W(/No such remote/),H(/No such remote/)]},{error:p.aq.INDEX_LOCKED,match:[W(/Unable to create .*?\.git\/index\.lock/),H(/Unable to create .*?\.git\/index\.lock/)]},{error:p.aq.NO_COMMITS,match:[W(/your current branch '.*?' does not have any commits yet/)]},{error:p.aq.PATH_MATCHED_NO_FILES,match:[W(/pathspec '.*?' did not match any files/),W(/pathspec '.*?' did not match any file\(s\) known to git/),W(/path '.*?' does not exist/),W(/path '.*?' exists on disk, but not in/)]},{error:p.aq.USER_NOT_CONFIGURED,match:[W(/unable to auto-detect email address/),W(/unable to auto-detect name/),W(/empty ident name \(for <.*?>\) not allowed/)]},{error:p.aq.INVALID_REFERENCE,match:[W(/invalid reference: .*?$/),W(/'.*?' - not a valid ref/)]},{error:p.aq.BRANCH_ALREADY_EXISTS,match:[W(/A branch named '.*?' already exists/)]},{error:p.aq.MERGE_CONFLICT,match:[W(/Not possible to fast-forward, aborting/),W(/refusing to merge unrelated histories/),W(/Exiting because of an unresolved conflict/),W(/Exiting because of unfinished merge/),H(/Failed to merge in the changes/),RegExp("^CONFLICT \\([^\\)]+\\): ".concat(/Merge conflict in/.source),"im")]},{error:p.aq.UPSTREAM_NOT_SET,match:[W(/The current branch \S+ has no upstream branch/),W(/No configured push destination/)]},{error:p.aq.HEAD_DETACHED,match:[W(/HEAD does not point to a branch/),W(/ref HEAD is not a symbolic ref/)]},{error:p.aq.DIRTY_WORKTREE,match:[H(/Your local changes to the following files would be overwritten/),H(/The following untracked working tree files would be overwritten/),H(/\S+ is not possible because you have unmerged files/),H(/cannot rebase: You have unstaged changes/)]},{error:p.aq.PROTECTED_BRANCH,match:[RegExp("^remote: error: ".concat(/.*? Protected branch update failed/.source),"im")]},{error:p.aq.PUSH_REJECTED,match:[H(/failed to push some refs to/)]},{error:p.aq.REMOTE_ALREADY_EXISTS,match:[W(/remote .*? already exists/),H(/remote .*? already exists/)]},{error:p.aq.INVALID_STATE,match:[W(/There is no merge in progress/),W(/There is no merge to abort/),W(/No rebase in progress/)]}],z=n(56391),j=n(48376);function q(){return(q=(0,r._)(function(e,t,n,r){var i,o,l,c,s,u,d;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if("open"!==e.status)return[2,{output:"JS Error\nchannel closed before command was run",error:p.aq.CHANNEL_CLOSED}];a.label=1;case 1:return a.trys.push([1,3,,4]),i="",o=e.onCommand(function(e){null!==e.output&&void 0!==e.output&&(i+=e.output)}),l=void 0,(c=Promise.race([new Promise(function(e){return l=setTimeout(e,9e4)}),e.request({exec:{env:n,args:t,noUserEnv:!0}})])).finally(function(){o(),clearTimeout(l)}),[4,c];case 2:if(void 0===(s=a.sent()))return O.kg.error("Git request timed out.",(0,L._)({appService:"git",command:t,gitEnv:JSON.stringify(n),TIMEOUT:9e4},r)),[2,{output:i,error:p.aq.TIMEOUT}];if(!s.ok&&s.channelClosed)return[2,{output:"JS Error\nchannel closed during command execution",error:p.aq.CHANNEL_CLOSED}];if(s.error||!s.ok)return[2,{output:u="".concat(s.error,"\n").concat(i),error:function(e){if(X.test(e)){for(var t=0;t<V.length;t++)for(var n=0;n<V[t].match.length;n++)if(V[t].match[n].test(e))return V[t].error;return p.aq.UNKNOWN}return F.test(e)?p.aq.PATH_MATCHED_NO_FILES:p.aq.UNKNOWN_NOT_GIT}(u)}];return[2,{output:i,error:null}];case 3:return d=a.sent(),N.$e(function(e){e.setTag("service","git"),e.setExtra("command",t),e.setExtra("env",n),r&&e.setExtra("options",r),N.Tb(d)}),[2,{output:"JS Error\n".concat(String(d)),error:p.aq.UNKNOWN_NOT_GIT}];case 4:return[2]}})})).apply(this,arguments)}var J=function(){"use strict";function e(t){var n=t.container,i=t.getEnv,o=t.awaitPromise,l=this;(0,P._)(this,e),this.cache=new U(3e4,2e3),this.running=(0,j.u)(!1),this.queue=[],n.openChannel({service:"exec"},function(e){var t,n,c=e.channel,s=(t=(0,r._)(function(e,t){var n,r;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(0===e.length)throw Error("Expected at least one command");if(!o)return[3,2];return[4,o];case 1:a.sent(),a.label=2;case 2:return n=Date.now(),[4,function(e,t,n,r){return q.apply(this,arguments)}(c,["bash","-c",Array.isArray(e)?e.join(" && "):e],i(),t)];case 3:if(r=a.sent(),(0,M.J)(e,r,!1,n),r.error)return[2,r];return[2,{output:(null==t?void 0:t.verbatim)?r.output:r.output.trim(),error:null}]}})}),function(e,n){return t.apply(this,arguments)}),u=function(e,t){if(0===e.length)throw Error("Expected at least one command");var n=Array.isArray(e)?e.join(" && "):e;if(l.cache.has(n)){var r=l.cache.get(n);return r.then(function(t){(0,M.J)(e,t,!0)}),r}var i=s(n,t);return l.cache.set(n,i),i},d=function(e,t){return l.cache.clear(),s(e,t)},f=(n=(0,r._)(function(){var e;return(0,a.Jh)(this,function(t){switch(t.label){case 0:if(!(l.queue.length>0)||"open"!==c.status)return[3,7];if(!(e=l.queue.shift()))return[3,6];if("read"!==e.type)return[3,2];return[4,e.fn(u)];case 1:case 3:return t.sent(),[3,6];case 2:if("write"!==e.type)return[3,4];return[4,e.fn(d)];case 4:return[4,e.fn(s)];case 5:t.sent(),t.label=6;case 6:return[3,0];case 7:return 0===l.queue.length&&l.running.set(!1),[2]}})}),function(){return n.apply(this,arguments)});return l.running.current&&f(),l.running.subscribe(function(e){e&&f()})})}var t=e.prototype;return t.add=function(e,t){var n,i=(0,z.Z)();return this.queue.push({type:t,fn:(n=(0,r._)(function(t){var n;return(0,a.Jh)(this,function(r){switch(r.label){case 0:return[4,e(t)];case 1:return n=r.sent(),i.resolve(n),[2]}})}),function(e){return n.apply(this,arguments)})}),this.running.current||this.running.set(!0),i.promise},t.wrap=function(e,t){var n=this;if("function"!=typeof e)throw Error("Expected a function");return function(){for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n.add(function(t){return e.apply(void 0,[t].concat((0,o._)(i)))},t)}},e}(),Y=n(86763),$=n.n(Y),K=n(12663);function Q(e,t){return ee.apply(this,arguments)}function ee(){return(ee=(0,r._)(function(e,t){var n,r,i,c,s;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(n=t.name,r=t.url,c=void 0!==(i=t.fetch)&&i,n=(0,l.ss)(n),!(0,w.GE)(n))return[2,{error:p.aq.INVALID_REFERENCE}];return n=(0,l.Gw)(n),r=(0,l.Gw)(r),[4,e(["git remote add"].concat((0,o._)(c?["-f"]:[]),[n,r]).join(" "),{serviceMethod:"git-add-remote"})];case 1:if((s=a.sent()).error)return[2,s];return[2,{didFetch:s.output.includes("Updating"),error:null}]}})})).apply(this,arguments)}function et(e,t){return en.apply(this,arguments)}function en(){return(en=(0,r._)(function(e,t){var n;return(0,a.Jh)(this,function(r){switch(r.label){case 0:var i,a,c,s;return[4,e((i=t.message,a=t.files,c=t.allowEmpty,s=["--allow-empty-message","--cleanup=whitespace","--no-edit","--quiet","-m ".concat((0,l.Gw)(i))],(void 0===c||c)&&s.push("--allow-empty"),a&&s.push.apply(s,["--only","--"].concat((0,o._)(a.map(l.Gw)))),"git --literal-pathspecs commit ".concat(s.join(" "))),{serviceMethod:"git-commit"})];case 1:if((n=r.sent()).error)return[2,n];return[2,{error:null}]}})})).apply(this,arguments)}function er(e,t){return ei.apply(this,arguments)}function ei(){return(ei=(0,r._)(function(e,t){var n,r,i,o,c,s;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,x(e,t=(0,w.Qj)(t,!0))];case 1:if((n=a.sent()).error)return[2,n];if(!n.exists)return[2,{error:p.aq.INVALID_REFERENCE}];if(r=["--quiet","--no-guess"],n.ref.type!==Z.l.REMOTE_BRANCH)return[3,3];return i=n.ref.branch,o=n.ref.name,[4,x(e,"refs/heads/".concat(i))];case 2:if((c=a.sent()).error)return[2,c];return c.exists?r.push((0,l.Gw)(i),"--"):r.push("-t","-b",(0,l.Gw)(i),(0,l.Gw)(o),"--"),[3,4];case 3:r.push((0,l.Gw)(n.ref.name),"--"),a.label=4;case 4:return[4,e("git checkout ".concat(r.join(" ")),{serviceMethod:"git-switch-branch"})];case 5:if((s=a.sent()).error)return[2,s];return[2,{error:null}]}})})).apply(this,arguments)}function eo(e,t){return ea.apply(this,arguments)}function ea(){return(ea=(0,r._)(function(e,t){var n,r,i,o,c,s,u,d,f,h,m;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return n=t.name,i=void 0===(r=t.startPoint)?"HEAD":r,o=t.track,s=void 0!==(c=t.checkout)&&c,[4,x(e,n=(0,l.C)(n))];case 1:if((u=a.sent()).error)return[2,u];if(u.exists)return[2,{error:p.aq.BRANCH_ALREADY_EXISTS}];if("HEAD"===i){if(!0===o)return[2,{error:p.aq.INVALID_REFERENCE}];o=!1}if(!(!1!==o))return[3,3];return[4,x(e,i)];case 2:if((d=a.sent()).error)return[2,d];if(!d.exists&&!0===o)return[2,{error:p.aq.INVALID_REFERENCE}];d.exists&&d.ref.type===Z.l.REMOTE_BRANCH&&void 0===o&&(o=!0),a.label=3;case 3:return f=["--quiet",o?"--track":"--no-track",(0,l.Gw)(n),(0,l.Gw)(i)],[4,e("git branch ".concat(f.join(" ")),{serviceMethod:"git-create-branch"})];case 4:if((h=a.sent()).error)return[2,h];if(!s)return[3,6];return[4,er(e,n)];case 5:if((m=a.sent()).error)return[2,m];a.label=6;case 6:return[2,{error:null}]}})})).apply(this,arguments)}function el(e){return ec.apply(this,arguments)}function ec(){return(ec=(0,r._)(function(e){var t,n,r,i,o=arguments;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:{},n=["--quiet"],t.depth&&(r=t.deepen?"--deepen":"--depth",n.push("".concat(r,"=").concat(t.depth))),t.remote?n.push((0,l.Gw)(t.remote)):n.push("--all"),[4,e("git fetch ".concat(n.join(" ")),{serviceMethod:"git-fetch"})];case 1:if((i=a.sent()).error)return[2,i];return[2,{error:null}]}})})).apply(this,arguments)}var es=["main","master","trunk","dev","develop","development","staging","prod","production"].map(function(e){return'if [ $(git rev-parse --verify --quiet "heads/'.concat(e,'") ]; then\n      echo "refs/heads/').concat(e,'"\n    fi')}).join("\n"),eu='\ngit remote | while IFS= read -r remote; do\n  if [ -z "$remote" ]; then continue; fi\n  branch="$('.concat('\nif [ -f ".git/refs/remotes/$remote/HEAD" ]; then\n  echo "$(sed -e "s/^ref: refs\\/remotes\\/$remote\\///" < .git/refs/remotes/$remote/HEAD)"\nelse\n  remote_result="$(git ls-remote --symref "$remote" HEAD)"\n  if [ -z "$remote_result" ]; then\n    echo ""\n  else\n    branch_name="$(\n      echo "$remote_result" | \\\n      head -1 | \\\n      awk \'{print $2}\' | \\\n      sed -e "s/^refs\\/heads\\///"\n    )"\n    git remote set-head "$remote" "$branch_name" >&2\n    echo "$branch_name"\n  fi\nfi\n'.trim(),')"\n  if [ -z "$branch" ]; then continue; fi\n  echo "refs/remotes/$remote/$branch"\n  if [ $(git rev-parse --verify --quiet "heads/$branch") ]; then\n    echo "refs/heads/$branch"\n  fi\ndone\n').concat(es,"\n").trim();function ed(e){return ef.apply(this,arguments)}function ef(){return(ef=(0,r._)(function(e){var t;return(0,a.Jh)(this,function(n){switch(n.label){case 0:return[4,e(eu,{serviceMethod:"git-find-default-branches"})];case 1:if((t=n.sent()).error)return[2,t];return[2,{refs:(0,o._)(new Set((0,l.so)(t.output,"\n"))).map(function(e){return(0,Z.L)(e)}),error:null}]}})})).apply(this,arguments)}var eh=n(52621);function ep(e,t){return em.apply(this,arguments)}function em(){return(em=(0,r._)(function(e,t){var n,r,o,c,s,u,d,f,h,m,v,g;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(t=(0,w.bF)(t,!0),!(0,w.Dc)(t))return[2,{error:p.aq.INVALID_REFERENCE}];return n=(0,l.C)(t),o=(r=(0,i._)((0,l.Tg)(t),2))[0],c=r[1],s=["refs/heads/".concat(n),"refs/remotes/*/".concat(n)],o&&c&&(s.push("refs/heads/".concat(c)),s.push("refs/remotes/".concat(o,"/").concat(c))),[4,(0,eh.ZP)(e,{pattern:s})];case 1:if((u=a.sent()).error)return[2,u];if(0===u.branches.length)return[2,{error:p.aq.INVALID_REFERENCE}];d=!0,f=!1,h=void 0;try{for(m=u.branches[Symbol.iterator]();!(d=(v=m.next()).done);d=!0)if((g=v.value).type!==eh.HO.REMOTE&&g.name===n||o&&c&&g.type!==eh.HO.LOCAL&&g.remote===o&&g.name===c)return[2,{branch:g,error:null}]}catch(e){f=!0,h=e}finally{try{d||null==m.return||m.return()}finally{if(f)throw h}}return[2,{error:p.aq.INVALID_REFERENCE}]}})})).apply(this,arguments)}var ev=n(36559);function eg(e,t){return ey.apply(this,arguments)}function ey(){return(ey=(0,r._)(function(e,t){var n,r,i,o,c;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(n=t.path,i=void 0===(r=t.revision)?"HEAD":r,""===n)return[2,{content:null,error:null}];return o=(0,l.Gw)("".concat(i,":").concat(n)),[4,e((0,ev.T3)(n)?"git --no-pager show ".concat(o," | base64"):"git --no-pager show ".concat(o),{verbatim:!0,serviceMethod:"git-get-file-contents"})];case 1:if((c=a.sent()).error){if(c.error===p.aq.PATH_MATCHED_NO_FILES)return[2,{content:null,error:null}];return[2,c]}return[2,{content:c.output,error:null}]}})})).apply(this,arguments)}function eb(e){return ew.apply(this,arguments)}function ew(){return(ew=(0,r._)(function(e){var t,n,r,o,c,s,u,d,f,h,p,m,v,g;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,e("git remote -v",{serviceMethod:"git-get-remotes"})];case 1:if((t=a.sent()).error)return[2,t];if(""===t.output)return[2,{remotes:new Map,error:null}];n=new Map,r=!0,o=!1,c=void 0;try{for(s=(0,l.so)(t.output,"\n")[Symbol.iterator]();!(r=(u=s.next()).done);r=!0)d=u.value,h=(f=(0,i._)(d.split(/\s+/),3))[0],p=f[1],m=f[2],h&&p&&m&&(g=null!==(v=n.get(h))&&void 0!==v?v:{name:h,fetch:"",push:""},"(fetch)"===m?(g.fetch=p,""===g.push&&(g.push=p),n.set(h,g)):"(push)"===m&&(g.push=p,""===g.fetch&&(g.fetch=p),n.set(h,g)))}catch(e){o=!0,c=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw c}}return[2,{remotes:n,error:null}]}})})).apply(this,arguments)}var eZ='git commit --allow-empty --no-edit --quiet -m "Initial commit"',ex='git add -A && git commit --allow-empty --no-edit --quiet -m "Initial commit"';function eC(e){return e_.apply(this,arguments)}function e_(){return(e_=(0,r._)(function(e){var t,n,r,i,o,l,c,s,u,d=arguments;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return r=void 0===(n=(t=d.length>1&&void 0!==d[1]?d[1]:{}).initialCommit)||n,o=void 0===(i=t.includeAllInitialFiles)||i,[4,(0,h.ZP)(e)];case 1:if((l=a.sent()).error)return[2,l];if(l.type!==h.y5.INITIALIZING)return[2,{error:p.aq.ALREADY_INITIALIZED}];if(l.state!==h.yG.ON_UNBORN_BRANCH)return[3,4];if(!r)return[3,3];return[4,e(o?ex:eZ,{serviceMethod:"git-init"})];case 2:if((c=a.sent()).error)return[2,c];a.label=3;case 3:return[2,{error:null}];case 4:return[4,e(["git init","git checkout -b main"],{serviceMethod:"git-init"})];case 5:if((s=a.sent()).error)return[2,s];if(!r)return[3,7];return[4,e(o?ex:eZ,{serviceMethod:"git-init"})];case 6:if((u=a.sent()).error)return[2,u];a.label=7;case 7:return[2,{error:null}]}})})).apply(this,arguments)}function eS(e){return ek.apply(this,arguments)}function ek(){return(ek=(0,r._)(function(e){var t;return(0,a.Jh)(this,function(n){switch(n.label){case 0:return[4,e("git rev-parse --is-inside-work-tree",{serviceMethod:"git-is-initialized"})];case 1:if((t=n.sent()).error){if(t.error===p.aq.NOT_INITIALIZED)return[2,{initialized:!1,error:null}];return[2,t]}return[2,{initialized:"true"===t.output,error:null}]}})})).apply(this,arguments)}function eE(e){var t=(0,i._)(e.trimStart().split("\x1f"),11),n=t[0],r=t[1],o=t[2],a=t[3],c=t[4],s=t[5],u=t[6],d=t[7],f=t[8],h=t[9],p=t[10],m=[],v=o?o.split(" "):null,g=!1,y=!0,b=!1,w=void 0;try{for(var x,C=(0,l.so)(n,",")[Symbol.iterator]();!(y=(x=C.next()).done);y=!0){var _=x.value;if("grafted"===_){g=!0;continue}m.push((0,Z.L)(_))}}catch(e){b=!0,w=e}finally{try{y||null==C.return||C.return()}finally{if(b)throw w}}return{refs:m,hash:r,parents:v,grafted:g,author:{name:a,email:c,date:1e3*parseInt(s,10)},committer:{name:u,email:d,date:1e3*parseInt(f,10)},subject:h?h.trim():"",body:p?p.trim():""}}function eT(e){return eR.apply(this,arguments)}function eR(){return(eR=(0,r._)(function(e){var t,n=arguments;return(0,a.Jh)(this,function(r){switch(r.label){case 0:var i,o,a,c,s,u,d;return[4,e((a=void 0===(o=(i=n.length>1&&void 0!==n[1]?n[1]:{}).max)?25:o,c=i.skip,s=i.revRange,u=i.path,d=["-z","--decorate=full","--full-history",'--format="format:%D%x1f%H%x1f%P%x1f%an%x1f%ae%x1f%at%x1f%cn%x1f%ce%x1f%ct%x1f%s%x1f%b"'],a=Math.max(1,Math.min(a,200)),d.push("-n ".concat(a)),c&&d.push("--skip ".concat(c)),s&&d.push(s),d.push("--"),u&&d.push(u),"git log ".concat(d.join(" "))),{serviceMethod:"git-log"})];case 1:if((t=r.sent()).error){if(t.error===p.aq.NO_COMMITS)return[2,{commits:[],error:null}];return[2,t]}return[2,{commits:(0,l.so)(t.output,"\x00").map(eE),error:null}]}})})).apply(this,arguments)}function eD(e){return eI.apply(this,arguments)}function eI(){return(eI=(0,r._)(function(e){var t,n=arguments;return(0,a.Jh)(this,function(r){switch(r.label){case 0:return[4,e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];return e.cached&&t.push("--cached"),e.deleted&&t.push("--deleted"),e.modified&&t.push("--modified"),e.others&&t.push("--others"),e.ignored&&t.push("--ignored"),e.directory&&t.push("--directory"),e.noEmptyDirectory&&t.push("--no-empty-directory"),"git ls-files ".concat(t.join(" "))}(n.length>1&&void 0!==n[1]?n[1]:{}),{serviceMethod:"git-ls-files"})];case 1:if((t=r.sent()).error)return[2,t];return[2,{files:t.output.split("\n").filter(function(e){return e.length>0}),error:null}]}})})).apply(this,arguments)}var eB=n(97975);function eG(e){return eA.apply(this,arguments)}function eA(){return(eA=(0,r._)(function(e){var t,n,r,o,c,s,u,d,f,h,m,v=arguments;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return t=v.length>1&&void 0!==v[1]?v[1]:{},[4,(0,B.Z)(e)];case 1:if((n=a.sent()).error)return[2,n];if(!n.branch)return[2,{error:p.aq.HEAD_DETACHED}];if(r=null,o=null,t.publish){if(n.upstream)return[2,{error:p.aq.BRANCH_ALREADY_EXISTS}];r=t.publish.remote,o=null!==(c=t.publish.name)&&void 0!==c?c:n.branch,r=(0,l.C)(r),o=(0,l.C)(o)}else{if(!n.upstream)return[2,{error:p.aq.UPSTREAM_NOT_SET}];if(!t.force&&n.upstream.behind>0)return[2,{error:p.aq.PUSH_REJECTED}];r=(s=(0,i._)((0,l.Tg)(n.upstream.branch),2))[0],o=s[1]}if(!r||!o)return[2,{error:p.aq.UPSTREAM_NOT_SET}];if(t.force)return[3,3];return[4,el(e,{remote:r})];case 2:if((u=a.sent()).error)return[2,u];a.label=3;case 3:if(!t.publish)return[3,5];return[4,x(e,"refs/remotes/".concat(r,"/").concat(o))];case 4:if((d=a.sent()).error)return[2,d];if(d.exists&&d.ref.type===Z.l.REMOTE_BRANCH)return[2,{error:p.aq.BRANCH_ALREADY_EXISTS}];a.label=5;case 5:return f=["--quiet"],t.force&&!t.publish&&f.push("--force-with-lease"),t.publish&&f.push("--set-upstream"),h="refs/heads/".concat(n.branch,":refs/heads/").concat(o),f.push((0,l.Gw)(r),(0,l.Gw)(h)),[4,e("git push ".concat(f.join(" ")),{serviceMethod:"git-push"})];case 6:if((m=a.sent()).error)return[2,m];return[2,{error:null}]}})})).apply(this,arguments)}function eP(e,t){return eL.apply(this,arguments)}function eL(){return(eL=(0,r._)(function(e,t){var n;return(0,a.Jh)(this,function(r){switch(r.label){case 0:if(t=(0,l.ss)(t),!(0,w.GE)(t))return[2,{error:p.aq.INVALID_REFERENCE}];return[4,e("git remote rm ".concat((0,l.Gw)(t)),{serviceMethod:"git-remove-remote"})];case 1:if((n=r.sent()).error)return[2,n];return[2,{error:null}]}})})).apply(this,arguments)}function eN(e,t){return eO.apply(this,arguments)}function eO(){return(eO=(0,r._)(function(e,t){var n,r,i;return(0,a.Jh)(this,function(o){switch(o.label){case 0:if(n=t.remote,r=t.url,n=(0,l.ss)(n),!(0,w.GE)(n)||!(0,w.LY)(r))return[2,{error:p.aq.INVALID_REFERENCE}];return n=(0,l.Gw)(n),r=(0,l.Gw)(r),[4,e("git remote set-url ".concat(n," ").concat(r),{serviceMethod:"git-set-remote-url"})];case 1:if((i=o.sent()).error)return[2,i];return[2,{error:null}]}})})).apply(this,arguments)}function eU(e,t){return eM.apply(this,arguments)}function eM(){return(eM=(0,r._)(function(e,t){var n,r;return(0,a.Jh)(this,function(i){switch(i.label){case 0:if(!(n=function(e){if("all"in e)return e.all?["git add -A"]:["git reset -q -- ."];var t=e.add,n=e.reset;if(!(null==t?void 0:t.length)&&!(null==n?void 0:n.length))return null;var r=[];if(t){var i=t.map(l.Gw).join(" ");r.push("git --literal-pathspecs add -- ".concat(i))}if(n){var o=n.map(l.Gw).join(" ");r.push("git --literal-pathspecs reset -q -- ".concat(o))}return r}(t)))return[2,{error:null}];return[4,e(n,{serviceMethod:"git-stage-files"})];case 1:if((r=i.sent()).error)return[2,r];return[2,{error:null}]}})})).apply(this,arguments)}var eX=n(27197),eF=n(50508),eW=n(21262),eH=n(71440);function eV(){var e=(0,eW._)(["\n  fragment GitServiceGitHubUser on CurrentUser {\n    image\n    username\n    email\n    firstName\n    lastName\n    gitHubInfo {\n      isAppCurrentlyInstalled\n      accessToken\n      userInfo {\n        name\n        username\n        email\n        avatarUrl\n      }\n    }\n  }\n"]);return eV=function(){return e},e}function ez(){var e=(0,eW._)(["\n  query GitServiceCurrentUser {\n    currentUser {\n      id\n      ...GitServiceGitHubUser\n    }\n  }\n  ","\n"]);return ez=function(){return e},e}var ej=(0,eH.Ps)(eV()),eq=(0,eH.Ps)(ez(),ej);function eJ(e){return eY.apply(this,arguments)}function eY(){return(eY=(0,r._)(function(e){var t,n,r,i,o,l,c,s,u,d,f,h,m,v,g,y,b,w,Z,x,C,_;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return t=e.defaultUsername,n=e.defaultUserId,r=e.onProfiles,l=new Map,[4,null===eX.l||void 0===eX.l?void 0:eX.l.query({query:eq,fetchPolicy:"network-only",context:{noBatch:!0}})];case 1:var S,k;return f=(d=null!==(u=null==(s=(null!==(c=a.sent())&&void 0!==c?c:{data:null}).data)?void 0:s.currentUser)&&void 0!==u?u:{username:t,id:n,firstName:null,lastName:null}).id,h=d.firstName,m=d.lastName,v=d.username,f&&v&&(y=v,h&&(y=h),m&&(y=m),h&&m&&(y=h+" "+m),w={provider:p.rG.REPLIT_DEFAULT,email:"".concat(f,"-").concat(v,"@").concat(eF.J),name:y,username:v,avatar:null!==(b=null==s?void 0:null===(g=s.currentUser)||void 0===g?void 0:g.image)&&void 0!==b?b:null},l.set(w.provider,w)),(Z=null==s?void 0:null===(o=s.currentUser)||void 0===o?void 0:null===(i=o.gitHubInfo)||void 0===i?void 0:i.userInfo)&&Z.email&&Z.username&&(null==s?void 0:null===(k=s.currentUser)||void 0===k?void 0:null===(S=k.gitHubInfo)||void 0===S?void 0:S.isAppCurrentlyInstalled)&&(_={provider:p.rG.GITHUB,email:Z.email,name:null!==(x=Z.name)&&void 0!==x?x:Z.username,username:Z.username,avatar:null!==(C=Z.avatarUrl)&&void 0!==C?C:null},l.set(_.provider,_)),r(l),[2]}})})).apply(this,arguments)}function e$(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.author,n=e.committer,r={GIT_AUTHOR_NAME:"",GIT_AUTHOR_EMAIL:"",GIT_COMMITTER_NAME:"",GIT_COMMITTER_EMAIL:"",GIT_ASKPASS:"replit-git-askpass",GIT_PAGER:"",GIT_EDITOR:"",PAGER:"",EDITOR:""};if(t){r.GIT_AUTHOR_NAME=t.username,r.GIT_COMMITTER_NAME=t.username;var i=eK(t);r.GIT_AUTHOR_EMAIL=i,r.GIT_COMMITTER_EMAIL=i,n&&(r.GIT_COMMITTER_NAME=n.username,r.GIT_COMMITTER_EMAIL=eK(n))}return r}function eK(e){if("id"in e)return"".concat(e.id,"-").concat(e.username,"@users.noreply.replit.com");if("email"in e)return e.email;throw Error("Invalid user")}var eQ=n(73372),e0=n(57253),e1=".git",e2=n(2993);function e4(e){var t,n=e.container,l=e.fs,s=e.provideProfiles,u=void 0===s?eJ:s,f=(0,K.ZP)();f.setMaxListeners(1/0);var v=e$(),b=!1,w=new Map,Z=null,C=n.getContext(),S=(t=(0,r._)(function(e){var t,n;return(0,a.Jh)(this,function(r){switch(r.label){case 0:return[4,u({defaultUsername:null==C?void 0:null===(t=C.currentUser)||void 0===t?void 0:t.username,defaultUserId:null==C?void 0:null===(n=C.currentUser)||void 0===n?void 0:n.id,onProfiles:function(t){var n=!0,r=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=(0,i._)(a.value,2),s=c[0],u=c[1];w.set(s,u),f.emit(p.dq.NEW_PROFILE)}}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}t.has(p.rG.GITHUB)||w.delete(p.rG.GITHUB);var d=w.get(p.rG.REPLIT_DEFAULT),h=w.get(p.rG.GITHUB);if(Z&&!e&&(e=Z.provider),e===p.rG.GITHUB&&h)Z=h;else{if(!d)return;Z=d}f.emit(p.dq.CHANGED_PROFILE)}})];case 1:return[2,r.sent()]}})}),function(e){return t.apply(this,arguments)}),E=new J({container:n,getEnv:function(){return v},awaitPromise:S(p.rG.GITHUB)});f.on(p.dq.FS_CHANGE,function(){return E.cache.invalidate()}),f.on(p.dq.FORCED_REFRESH,function(){return E.cache.invalidate()}),f.on(p.dq.NEW_PROFILE,function(){return E.cache.invalidate()}),f.on(p.dq.CHANGED_PROFILE,function(){return E.cache.invalidate()});var R=function(){var e,t=n.getContext(),r=null==t?void 0:null===(e=t.currentUser)||void 0===e?void 0:e.id;if(null!=r){var i="[init]\ndefaultBranch = main\n[user]\n";""!==v.GIT_AUTHOR_EMAIL&&(i+="email = ".concat(v.GIT_AUTHOR_EMAIL.replace(/'/g,"'\"'\"'"),"\n")),""!==v.GIT_AUTHOR_NAME&&(i+="name = ".concat(v.GIT_AUTHOR_NAME.replace(/'/g,"'\"'\"'"),"\n"));var o="/run/replit/user/".concat(r,"/.config/git");null!=r&&n.exec("bash","-c","tmpf=$(mktemp); mkdir -p ".concat(o," && echo '").concat(i,'\' > "$tmpf" && mv "$tmpf" ').concat("".concat(o,"/config")))}};return n.onConnectionStateChanged(function(e){e===e2.em.CONNECTED&&R()}),f.on(p.dq.CHANGED_PROFILE,function(){null!=Z&&(v=e$({author:{username:Z.name,email:Z.email}}),R())}),{getEnv:function(){return v},getProfiles:function(){return Array.from(w.values())},hasProfile:function(e){return w.has(e)},getProfile:function(e){var t=w.get(e);if(!t)throw Error("Fetched a profile that has not been setup!");return t},addProfile:function(e){w.set(e.provider,e),f.emit(p.dq.NEW_PROFILE)},getCurrentProfile:function(){return Z},setCurrentProfile:function(e){var t=w.get(e);if(!t)throw Error("Can't set a non-existent profile!");Z=t,v=e$({author:{username:t.name,email:t.email}}),f.emit(p.dq.CHANGED_PROFILE)},onProfileAdded:function(e){var t=function(){e(Array.from(w.values()))};return f.on(p.dq.NEW_PROFILE,t),function(){f.off(p.dq.NEW_PROFILE,t)}},onCurrentProfileChanged:function(e){var t=function(){e(Z)};return f.on(p.dq.CHANGED_PROFILE,t),function(){f.off(p.dq.CHANGED_PROFILE,t)}},refreshProfiles:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).preferredProvider;return S(e)},onRefresh:function(e){b||(function(e,t,n){var i,l,c,s,u,d,f,h,m,v,g=!1,y=!1,b=(i=function(){return n.emit(p.dq.FS_CHANGE)},s=(l={wait:1e3,cooldown:5e3,maxWait:5e3}).wait,u=l.cooldown,d=l.maxWait,f=null,h=!1,m=$()(function(e){return f=setTimeout(function(){return f=null},u),h=!1,c=i.apply(void 0,(0,o._)(e))},s,{maxWait:d}),(v=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return null!==f?c:(h||(h=!0),m(t))}).cancel=function(){null!==f?(clearTimeout(f),f=null):(m.cancel(),h=!1)},v.flush=function(){return null!==f?(clearTimeout(f),f=null,c):m.flush()},v.isPending=function(){return h},v.isInCooldown=function(){return null!==f},v);function w(){return(w=(0,r._)(function(){var n;return(0,a.Jh)(this,function(r){return n=!0,t.watchDir(eQ.Ql,{onChange:function(r){!g&&r.find(function(e){return e.filename===e1&&e.type===e0.Tv.Directory})&&(function(){if(!g){g=!0;var n=!0;t.watchDir(e1,{onChange:function(){n?n=!1:b()},onMoveOrDelete:function(){g=!1,b()},onError:function(t,n){g=!1,RegExp(".+permission denied","im").test(t.message)||e.unrecoverableError(t,n)}})}}(),n||b()),n&&(n=!1)},onError:function(t,n){return e.unrecoverableError(t,n)}}),[2]})})).apply(this,arguments)}(function(){w.apply(this,arguments)})(),t.onStatusChange(function(e){g&&(e===e0.kO.Syncing&&b.isInCooldown()?y=!0:e===e0.kO.Clean&&(y||b(),y=!1))})}(n,l,f),b=!0);var t=function(){return e(p.dq.FS_CHANGE)},i=function(){return e(p.dq.FORCED_REFRESH)},c=function(){return e(p.dq.NEW_PROFILE)},s=function(){return e(p.dq.CHANGED_PROFILE)};return f.on(p.dq.FS_CHANGE,t),f.on(p.dq.FORCED_REFRESH,i),f.on(p.dq.NEW_PROFILE,c),f.on(p.dq.CHANGED_PROFILE,s),function(){f.off(p.dq.FS_CHANGE,t),f.off(p.dq.FORCED_REFRESH,i),f.off(p.dq.NEW_PROFILE,c),f.off(p.dq.CHANGED_PROFILE,s)}},forceRefresh:function(){f.emit(p.dq.FORCED_REFRESH)},isBusy:function(){return E.running.current},onBusyChange:function(e){var t=!1,n=$()(e,200);return E.running.subscribe(function(e){t&&!e?(n(!1),t=!1):!t&&e&&(n(!0),t=!0)})},init:E.wrap(eC,"write"),isInitialized:E.wrap(eS,"read"),lsFiles:E.wrap(eD,"read"),status:E.wrap(B.Z,"read"),log:E.wrap(eT,"read"),findDefaultBranches:E.wrap(ed,"read"),listBranches:E.wrap(eh.ZP,"read"),setBranchUpstream:E.wrap(c,"write"),stageFiles:E.wrap(eU,"write"),commit:E.wrap(et,"write"),switchBranch:E.wrap(er,"write"),branchExists:E.wrap(x,"read"),createBranch:E.wrap(eo,"write"),getRemotes:E.wrap(eb,"read"),fetch:E.wrap(el,"write"),canMergeBranches:E.wrap(_,"read"),pull:E.wrap(eB.Z,"write"),push:E.wrap(eG,"write"),getRepositoryState:E.wrap(h.ZP,"read"),getFileContents:E.wrap(eg,"read"),addRemote:E.wrap(Q,"write"),removeRemote:E.wrap(eP,"write"),setRemoteURL:E.wrap(eN,"write"),getBranch:E.wrap(ep,"read"),restoreFiles:E.wrap(G,"write"),lastFetched:E.wrap(y,"read"),merge:E.wrap(k,"write"),mergeContinue:E.wrap(D,"write"),mergeAbort:E.wrap(T,"write"),getConflictingFiles:E.wrap(d,"read"),getMergingRefs:E.wrap(m,"read"),getFilesForCommit:E.wrap(g.ZP,"read"),escapeHatchGitExecRead:E.wrap(function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,(0,o._)(n))},"read"),escapeHatchGitExecWrite:E.wrap(function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,(0,o._)(n))},"write")}}},19871:function(e,t,n){var r,i,o,a,l,c;n.d(t,{aq:function(){return r},dq:function(){return i},rG:function(){return o}}),(a=r||(r={})).UNKNOWN_NOT_GIT="UNKNOWN_NOT_GIT",a.UNKNOWN="UNKNOWN",a.TIMEOUT="TIMEOUT",a.CHANNEL_CLOSED="CHANNEL_CLOSED",a.NOT_INITIALIZED="NOT_INITIALIZED",a.UNAUTHENTICATED="UNAUTHENTICATED",a.INDEX_FILE_CORRUPT="INDEX_FILE_CORRUPT",a.UNKNOWN_REMOTE="UNKNOWN_REMOTE",a.INDEX_LOCKED="INDEX_LOCKED",a.NO_COMMITS="NO_COMMITS",a.PATH_MATCHED_NO_FILES="PATH_MATCHED_NO_FILES",a.USER_NOT_CONFIGURED="USER_NOT_CONFIGURED",a.INVALID_REFERENCE="INVALID_REFERENCE",a.BRANCH_ALREADY_EXISTS="BRANCH_ALREADY_EXISTS",a.MERGE_CONFLICT="MERGE_CONFLICT",a.UPSTREAM_NOT_SET="UPSTREAM_NOT_SET",a.HEAD_DETACHED="HEAD_DETACHED",a.DIRTY_WORKTREE="DIRTY_WORKTREE",a.PUSH_REJECTED="PUSH_REJECTED",a.REMOTE_ALREADY_EXISTS="REMOTE_ALREADY_EXISTS",a.ALREADY_INITIALIZED="ALREADY_INITIALIZED",a.INVALID_STATE="INVALID_STATE",a.PROTECTED_BRANCH="PROTECTED_BRANCH",(l=i||(i={})).FS_CHANGE="FS_CHANGE",l.FORCED_REFRESH="FORCED_REFRESH",l.NEW_PROFILE="NEW_PROFILE",l.CHANGED_PROFILE="CHANGED_PROFILE",(c=o||(o={})).REPLIT_DEFAULT="REPLIT_DEFAULT",c.GITHUB="GITHUB"},69880:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(66626),i=n(63257),o=n(85733),a=n(36647),l=n(19871),c=n(81199),s=n(3341),u=n.n(s),d=n(50959);function f(e){var t,n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},h=(0,r._)((0,d.useState)(null),2),p=h[0],m=h[1],v=(0,o.Z)(p),g=null===(n=null!==(t=f.keepStaleResult)&&void 0!==t?t:f.refresh)||void 0===n||n,y=(0,d.useCallback)(function(e){u()(e,v.current)||m(e)},[v]),b=(0,a.Z)(function(){return e},(0,i._)(s)),w=(0,c.Z)().git,Z=(0,d.useRef)(null),x=(0,d.useCallback)(function(){Z.current?Z.current():g||y(null);var e=!1;b(w).then(function(t){e||(y(t),Z.current=null)}).catch(function(){e||(y({error:l.aq.UNKNOWN}),Z.current=null)}),Z.current=function(){e=!0,Z.current=null,g||y(null)}},[y,b,w,g]);return(0,d.useEffect)(function(){return x()},[x]),(0,d.useEffect)(function(){var e;if(null===(e=f.refresh)||void 0===e||e)return w.onRefresh(x)},[w,x,f.refresh]),p}},47527:function(e,t,n){var r,i,o,a;n.d(t,{Z:function(){return i},z:function(){return r}}),(o=r||(r={})).INSTRUCTION_RESULT="INSTRUCTION_RESULT",o.TEST_RESULT="TEST_RESULT",o.ERROR="ERROR",o.STATE_CHANGED="STATE_CHANGED",(a=i||(i={}))[a.Idle=0]="Idle",a[a.Starting=1]="Starting",a[a.Ready=2]="Ready",a[a.Building=3]="Building",a[a.Running=4]="Running"},22712:function(e,t,n){n.d(t,{ho:function(){return o},ib:function(){return l},rN:function(){return i},uH:function(){return a}});var r=n(7225),i=[r.SemanticTokenTypes.namespace,r.SemanticTokenTypes.type,r.SemanticTokenTypes.class,r.SemanticTokenTypes.enum,r.SemanticTokenTypes.interface,r.SemanticTokenTypes.struct,r.SemanticTokenTypes.typeParameter,r.SemanticTokenTypes.parameter,r.SemanticTokenTypes.variable,r.SemanticTokenTypes.property,r.SemanticTokenTypes.enumMember,r.SemanticTokenTypes.event,r.SemanticTokenTypes.function,r.SemanticTokenTypes.method,r.SemanticTokenTypes.macro,r.SemanticTokenTypes.keyword,r.SemanticTokenTypes.modifier,r.SemanticTokenTypes.comment,r.SemanticTokenTypes.string,r.SemanticTokenTypes.number,r.SemanticTokenTypes.regexp,r.SemanticTokenTypes.operator,r.SemanticTokenTypes.decorator,"angle","arithmetic","attribute","attributeBracket","bitwise","boolean","brace","bracket","builtinAttribute","builtinType","character","colon","comma","comparison","constParameter","derive","deriveHelper","dot","escapeSequence","invalidEscapeSequence","formatSpecifier","generic","label","lifetime","logical","macroBang","parenthesis","punctuation","selfKeyword","selfTypeKeyword","semicolon","typeAlias","toolModule","union","unresolvedReference","tomlArrayKey","tomlTableKey"],o=[r.SemanticTokenModifiers.declaration,r.SemanticTokenModifiers.definition,r.SemanticTokenModifiers.readonly,r.SemanticTokenModifiers.static,r.SemanticTokenModifiers.deprecated,r.SemanticTokenModifiers.abstract,r.SemanticTokenModifiers.async,r.SemanticTokenModifiers.modification,r.SemanticTokenModifiers.documentation,r.SemanticTokenModifiers.defaultLibrary,"attribute","callable","constant","consuming","controlFlow","crateRoot","injected","intraDocLink","library","macro","mutable","public","reference","trait","unsafe"];function a(e,t){var n=e.tokenTypes[t];return n&&i.includes(n)?n:null}function l(e,t){for(var n=[],r=0;r<e.tokenModifiers.length;r++)if(t&1<<r){var i=e.tokenModifiers[r];i&&o.includes(i)&&n.push(i)}return n}},84570:function(e,t,n){var r=n(7225);t.Z=[r.SymbolKind.Array,r.SymbolKind.Boolean,r.SymbolKind.Class,r.SymbolKind.Constant,r.SymbolKind.Constructor,r.SymbolKind.Enum,r.SymbolKind.EnumMember,r.SymbolKind.Event,r.SymbolKind.Field,r.SymbolKind.File,r.SymbolKind.Function,r.SymbolKind.Interface,r.SymbolKind.Key,r.SymbolKind.Method,r.SymbolKind.Module,r.SymbolKind.Namespace,r.SymbolKind.Object,r.SymbolKind.Operator,r.SymbolKind.Package,r.SymbolKind.Property,r.SymbolKind.String,r.SymbolKind.Struct,r.SymbolKind.TypeParameter,r.SymbolKind.Variable]},47703:function(e,t,n){var r,i,o,a;n.d(t,{N:function(){return r},a:function(){return i}}),(o=r||(r={})).NOT_READY="NOT_READY",o.READY="READY",o.STALLED="STALLED",o.BROKEN="BROKEN",(a=i||(i={})).OFFLINE="OFFLINE",a.INITIALIZING="INITIALIZING",a.INITIALIZED="INITIALIZED",a.EXITING="EXITING",a.EXITED="EXITED"},33530:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(66626),i=n(39271),o=n(81199),a=n(50959),l=n(41733),c=n(30509),s=n(36556),u=n(16783),d=n.n(u),f=n(8252),h=n(47703);function p(e){return Math.floor(performance.now()-e.startTime)}var m=new WeakSet,v=n(40750);function g(e){var t=(0,i.Z)(),n=(0,o.Z)().lspnix,u=(0,r._)((0,a.useState)([]),2),g=u[0],y=u[1],b=(0,v.k)();return(0,a.useEffect)(function(){if(e){var t=n.onClient(e,y);return function(){t(),y([])}}},[n,e]),(0,a.useEffect)(function(){return(0,f.uf)(g.map(function(n){return function(e){var t=e.client,n=e.replId,r=e.language,i=e.debug;if(!m.has(t)){m.add(t);var o=new Map,a=function(e){var i,o=t.getServerState(),a=null!==(i=t.getServerInfo())&&void 0!==i?i:{name:"unknown",version:"none"},l=o===h.a.INITIALIZED?"".concat(null==a?void 0:a.name,"@").concat(null==a?void 0:a.version):"not_ready: server is ".concat(o);return{method:e.method,replid:n,language:r,startTime:Math.floor(e.startTime),languageServerInfo:l,lspId:t.clientId}},u=d()(function(e,t){var n=p(t);n>1e4&&s.kg.time("LSP unresponsive request",n,a(t))}),v=setInterval(function(){o.forEach(function(e){u(e.id,e)})},2e3);return(0,f.uf)([t.onRequest(function(e){var t=e.id,n=e.data;(i||.01>Math.random())&&o.set(t,{id:t,method:n.method,startTime:performance.now()})}),t.onResponse(function(e){var t=e.id,n=e.error,r=o.get(t);null!=r&&(o.delete(t),s.kg.time("LSP request",p(r),(0,c._)((0,l._)({},a(r)),{result:null==n?"ok":"error"})))}),t.onCancelRequest(function(e){var t=o.get(e);null!=t&&(o.delete(e),s.kg.time("LSP request",p(t),(0,c._)((0,l._)({},a(t)),{result:"cancelled"})))}),function(){return clearInterval(v)},function(){return m.delete(t)}])}}({client:n,replId:t,language:n.getLanguageId(e),debug:b})}))},[g,t,e,b]),g}},29121:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(66626),i=n(50959),o=n(34635),a=n(8252);function l(e){var t=(0,r._)((0,i.useState)(null),2),n=t[0],l=t[1];return(0,i.useEffect)(function(){var t=function(){l((0,o.H)(e.map(function(e){return(0,o.Z)(e)})))};return t(),(0,a.uf)(e.map(function(e){return e.onServerCapabilitiesChange(function(){return t()})}))},[e]),n}},70316:function(e,t,n){n.d(t,{DL:function(){return i},OD:function(){return Z},TE:function(){return E},UK:function(){return b},VZ:function(){return x}});var r,i,o=n(27387),a=n(41733),l=n(30509),c=n(63257),s=n(96583),u=n(43182),d=n(41974),f=n(86763),h=n.n(f),p=n(96955),m=n(48376),v=n(66810),g=n(3341),y=n.n(g),b=new Set([3e3,3001,3002,3003,4200,5e3,5173,6e3,6800,80,8e3,8008,8080,8081,8099,9e3]);function w(e,t){return new Set(Array.from(e).filter(function(e){return!t.has(e)}))}function Z(e){var t=e.type;switch(t){case"FORWARDED":case"MISCONFIGURED":return e.externalPort;case"INTERNAL_ONLY":case"NO_MORE_EXTERNAL_PORTS_AVAILABLE":case"CONFIG_MISSING":return;default:(0,p.Z)(t)}}function x(e){var t;return null!==(t=e.isLocalhost)&&void 0!==t&&t}function C(e){return e===v.Y8}function _(e){return C(e.localPort)}function S(e){return e?w(b,new Set(e.map(function(e){return Z(e.configuration)}))):b}function k(e){var t=e.localPort,n=S(e.portsState.current);if(0!==n.size){var r=n.has(80),i=n.has(t);return r?80:i?t:Array.from(n).sort()[0]}}function E(e){var t=e.container,n=e.dotReplit,r=(0,m.u)(null),i=(0,m.u)(!1),f=(0,m.u)("only-global"),v=h()((0,o._)(function(){var e;return(0,s.Jh)(this,function(t){switch(t.label){case 0:if(!r.current)return[2];return e=r.current.filter(function(e){return!e.isTemporary}).map(function(e){var t=e.configuration.type;switch(t){case"FORWARDED":case"MISCONFIGURED":return(0,a._)({localPort:e.configuration.localPort,externalPort:e.configuration.externalPort},x(e.configuration)?{exposeLocalhost:!0}:void 0);case"INTERNAL_ONLY":return{localPort:e.configuration.localPort};case"NO_MORE_EXTERNAL_PORTS_AVAILABLE":case"CONFIG_MISSING":return!1;default:(0,p.Z)(t)}}).filter(Boolean).sort(function(e,t){return e.localPort-t.localPort}),[4,n.updateDotReplit([{op:"add",path:"ports",value:JSON.stringify(e)}])];case 1:return t.sent(),[2]}})}),1e3,{leading:!1,trailing:!0});function g(){i.set(!0),v()}return!function(e){var t=e.container,n=e.dotReplit,r=e.portsState,i=e.writeDotReplitPortsConfig,o=e.isThisServiceUpdatingDotReplit,s=e.forwardPortsAutomatically;function f(e){return e.sort(function(e,t){var n,r;return(null!==(n=e.configuration.localPort)&&void 0!==n?n:0)-(null!==(r=t.configuration.localPort)&&void 0!==r?r:0)})}var h=[];function p(e){try{var t=function(e){var t=e.portsState,n=e.portInfo,r=e.forwardPortsAutomatically;if(null===t.current)throw Error("processOpenedPort can only assign ports if dotReplit config was read");var i={pid:n.pid,cgroup:n.cgroup,address:n.address,cmdline:n.cmdline},o="127.0.0.1"===i.address,c=n.isVnc,s=t.current.find(function(e){return e.configuration.localPort===n.port});if(void 0!==s)return{isOpen:!0,isTemporary:!!c||s.isTemporary,processInfo:i,configuration:(0,l._)((0,a._)({},s.configuration),{isLocalhost:o})};if("none"===r.current||"only-global"===r.current&&o||c)return{isOpen:!0,isTemporary:!0,processInfo:i,configuration:{type:"INTERNAL_ONLY",localPort:n.port,isLocalhost:o,isVnc:c}};var u=k({localPort:n.port,portsState:t});return void 0===u?{isOpen:!0,isTemporary:!1,processInfo:i,configuration:{type:"NO_MORE_EXTERNAL_PORTS_AVAILABLE",localPort:n.port,isLocalhost:o,isVnc:c}}:{isOpen:!0,isTemporary:!1,processInfo:i,configuration:{type:"FORWARDED",localPort:n.port,externalPort:u,isLocalhost:o,isVnc:c}}}({portsState:r,portInfo:e,forwardPortsAutomatically:s}),n=!1;r.update(function(r){if(!r)throw Error("processOpenedPort can only execute if we red .replit first");return(0,d.Uy)(r,function(i){var o=i.findIndex(function(t){return t.configuration.localPort===e.port});return -1===o?(o=r.length,n=!0):y()(r[o].configuration,t.configuration)||(n=!0),i[o]=t,f(i)})}),n&&i()}catch(e){throw u.$e(function(t){t.setTag("service","ports"),u.Tb(e)}),e}}function m(e){try{var t=!1;r.update(function(n){if(!n)throw Error("onPortClosed can only execute if we red .replit first");return(0,d.Uy)(n,function(n){var r,i=n.findIndex(function(t){return t.configuration.localPort===e.port});if(-1!==i){var o=n[i];o.isTemporary||(r=o.configuration.localPort,32768<=r&&r<=60999)?(n.splice(i,1),t=!0):o.isOpen=!1}})}),t&&i()}catch(e){throw u.$e(function(t){t.setTag("service","ports"),u.Tb(e)}),e}}t.onPortOpened(function(e){null===r.current?h.push({type:"portOpen",portInfo:e}):p(e)}),t.onPortClosed(function(e){null===r.current?h.push({type:"portClose",portInfo:e}):m(e)}),n.watch(function(e){var t,n=e.config,i=null!==(t=null==n?void 0:n.ports)&&void 0!==t?t:[];if(!0===o.current){var s=r.current;if(!s||i.length!==s.length)return;i.every(function(e,t){var n,r=s[t];return e.localPort===r.configuration.localPort&&e.externalPort===(null!==(n=Z(r.configuration))&&void 0!==n?n:0)})&&o.set(!1);return}r.update(function(e){e||(e=[]);var t=new Set(i.map(function(e){return e.localPort}).filter(function(e){return null!=e})),n=new Set(e.map(function(e){return e.configuration.localPort})),r=new Set(e.filter(function(e){return e.isOpen}).map(function(e){return e.configuration.localPort})),o=w(t,n),s=(m=new Set((0,c._)(Array.from(t)).concat((0,c._)(Array.from(r)))),new Set(Array.from(n).filter(function(e){return m.has(e)}))),u=[],d=!0,h=!1,p=void 0;try{for(var m,v,g=s[Symbol.iterator]();!(d=(v=g.next()).done);d=!0)!function(){var t=v.value,n=e.find(function(e){return e.configuration.localPort===t}),r=i.find(function(e){return e.localPort===t});if(!n)throw Error("couldn't find match for local port: ".concat(t));if(!r)return u.push((0,l._)((0,a._)({},n),{configuration:{type:"CONFIG_MISSING",localPort:n.configuration.localPort,isLocalhost:x(n.configuration),isVnc:_(n.configuration)}}));var o=n.configuration;o=null!=r.externalPort&&0!==r.externalPort?{type:S(u).has(r.externalPort)?"FORWARDED":"MISCONFIGURED",localPort:n.configuration.localPort,externalPort:r.externalPort,isLocalhost:x(n.configuration),isVnc:_(n.configuration)}:{type:"INTERNAL_ONLY",localPort:n.configuration.localPort,isLocalhost:x(n.configuration),isVnc:_(n.configuration)},u.push((0,l._)((0,a._)({},n),{configuration:o}))}()}catch(e){h=!0,p=e}finally{try{d||null==g.return||g.return()}finally{if(h)throw p}}var y=!0,b=!1,Z=void 0;try{for(var k,E=o[Symbol.iterator]();!(y=(k=E.next()).done);y=!0)!function(){var e,t=k.value,n=i.find(function(e){return e.localPort===t});if(!n)throw Error("couldn't find match for local port: ".concat(t));var r=null!=n.externalPort&&0!==n.externalPort?n.externalPort:void 0;if(void 0!==r){var o,a=S(u).has(r);u.push({isOpen:!1,isTemporary:!1,configuration:{type:a?"FORWARDED":"MISCONFIGURED",localPort:t,externalPort:r,isLocalhost:null!==(o=n.exposeLocalhost)&&void 0!==o&&o,isVnc:C(t)}})}else u.push({isOpen:!1,isTemporary:!1,configuration:{type:"INTERNAL_ONLY",localPort:t,isLocalhost:null!==(e=n.exposeLocalhost)&&void 0!==e&&e,isVnc:C(t)}})}()}catch(e){b=!0,Z=e}finally{try{y||null==E.return||E.return()}finally{if(b)throw Z}}return f(u)}),h.length>0&&(h.forEach(function(e){var t=e.type,n=e.portInfo;"portOpen"===t?p(n):"portClose"===t&&m(n)}),h=[])})}({container:t,dotReplit:n,portsState:r,writeDotReplitPortsConfig:g,isThisServiceUpdatingDotReplit:i,forwardPortsAutomatically:f}),{tryExposingPortAutomatically:function(e){var t=k({localPort:e,portsState:r});void 0!==t&&(r.update((0,d.Uy)(function(n){if(n){var r=n.find(function(t){return t.configuration.localPort===e});r&&(r.isTemporary=!1,r.configuration={type:"FORWARDED",localPort:e,externalPort:t,isLocalhost:r.configuration.isLocalhost,isVnc:C(e)})}})),g())},updateDotReplitPortsMapping:function(e,t,n){r.update((0,d.Uy)(function(r){var i,o=null==r?void 0:r.find(function(t){return t.configuration.localPort===e}),a=n;void 0===a&&(a=null!==(i=null==o?void 0:o.configuration.isLocalhost)&&void 0!==i&&i);var l=void 0!==t?{type:"FORWARDED",localPort:e,externalPort:t,isLocalhost:a,isVnc:C(e)}:{type:"INTERNAL_ONLY",localPort:e,isLocalhost:a,isVnc:C(e)};o?(o.isTemporary=!1,o.configuration=l):(r||(r=[]),r.push({isOpen:!1,isTemporary:!1,configuration:l}))})),g()},removeDotReplitPortsMapping:function(e,t){r.update((0,d.Uy)(function(n){var r;void 0!==(r=void 0!==t?null==n?void 0:n.findIndex(function(n){return n.configuration.localPort===e&&("FORWARDED"===n.configuration.type||"MISCONFIGURED"===n.configuration.type)&&n.configuration.externalPort===t}):null==n?void 0:n.findIndex(function(t){return t.configuration.localPort===e}))&&(null==n||n.splice(r,1))})),g()},portsState:r,setForwardPortsAutomatically:function(e){f.set(e)}}}(r=i||(i={})).FORWARDED="FORWARDED",r.INTERNAL_ONLY="INTERNAL_ONLY",r.NO_MORE_EXTERNAL_PORTS_AVAILABLE="NO_MORE_EXTERNAL_PORTS_AVAILABLE",r.MISCONFIGURED="MISCONFIGURED",r.CONFIG_MISSING="CONFIG_MISSING"},48058:function(e,t,n){n.d(t,{bg:function(){return l},dF:function(){return s},r4:function(){return u},vU:function(){return c}});var r=n(46298),i=n(81199),o=n(50959),a=n(70316);function l(){var e=(0,i.Z)().ports,t=(0,r.Z)(e.portsState);return(0,o.useMemo)(function(){return t?t.filter(function(e){return e.isOpen&&e.configuration.type===a.DL.FORWARDED}):[]},[t])}function c(e){var t=(0,i.Z)().ports,n=(0,r.Z)(t.portsState);return(0,o.useMemo)(function(){if(n)return n.find(function(t){return t.configuration.type===a.DL.FORWARDED&&t.configuration.externalPort===e})},[n,e])}function s(e){return u((0,i.Z)().ports,e)}function u(e,t){var n=(0,r.Z)(e.portsState);return(0,o.useMemo)(function(){return t&&n?n.filter(function(e){var n;return null!==(n=e.isOpen&&(null==t?void 0:t.endsWith(e.processInfo.cgroup)))&&void 0!==n&&n}):[]},[n,t])}},46051:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(66626),i=n(81199),o=n(50959);function a(){var e=(0,i.Z)().presence,t=(0,r._)((0,o.useState)(e.getFollowedUser()),2),n=t[0],a=t[1];return(0,o.useEffect)(function(){return a(e.getFollowedUser()),e.onFollowedUserChanged(a)},[e]),n}},37711:function(e,t,n){n.d(t,{ZP:function(){return w}});var r=n(27387),i=n(96583),o=n(36556),a=n(27197),l=n(60305),c=n(21262);function s(){var e=(0,c._)(["\n  query GitHubAuth {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n    }\n  }\n"]);return s=function(){return e},e}var u=(0,n(71440).Ps)(s()),d=n(12618),f=n(38117),h=n(74044),p=h.Dy.Object({id:h.Dy.String(),user_id:h.Dy.Number(),ssh_hostname:h.Dy.String(),token:h.Dy.String()}),m=n(99149),v=["http:","https:","vscode:"];function g(){return(g=(0,r._)(function(e){var t,n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return t=e.replId,[4,(0,f.Zc)(function(){return(0,d.uz)("/data/repls/".concat(t,"/get_ssh_token"))})];case 1:if((n=r.sent()).error)return[2,{type:"error",message:n.error.toString()}];if(!m.B4.Check(p,n.value))return[2,{type:"error",message:"Invalid JSON"}];return[2,{type:"success",data:n.value}]}})})).apply(this,arguments)}function y(){return(y=(0,r._)(function(){var e;return(0,i.Jh)(this,function(t){switch(t.label){case 0:if(!a.l)throw Error("Expected apollo");return[4,a.l.query({query:u})];case 1:if(!(null==(e=t.sent().data)?void 0:e.currentUser))throw Error("Expected current user");return[2,e.currentUser]}})})).apply(this,arguments)}function b(){document.activeElement instanceof HTMLElement&&document.activeElement.blur()}function w(e){var t=e.container,n=e.fs,a=e.openMultipleFiles,c=e.openMultipleURLs,s=e.enableReplspaceSshTokenPassthrough,u=new Set,d=!1,f=null;return t.openChannel({service:"open",name:"open"},function(e){e.channel.onCommand(function(e){if("replspaceApiOpenMultipleFiles"===e.body){if(!e.replspaceApiOpenMultipleFiles)throw Error("Expected replspaceApiOpenMultipleFiles");var t=e.replspaceApiOpenMultipleFiles,n=t.files,r=t.urls.flatMap(function(e){var t;try{t=new URL(e)}catch(e){return[]}return v.includes(t.protocol)?[t]:[]});a&&n.length>0&&(b(),a({paths:n})),c&&r.length>0&&(b(),c({urls:r.map(function(e){return e.toString()})}))}})}),t.openChannel({service:"git",name:"git"},function(e){var t,l=e.channel;return l.onCommand((t=(0,r._)(function(e){var t,r,c,s,h,p,m,v,g,w,Z,x,C,_,S,k;return(0,i.Jh)(this,function(i){switch(i.label){case 0:switch(e.body){case"replspaceApiOpenFile":return[3,1];case"replspaceApiGetGitHubToken":return[3,7]}return[3,9];case 1:if(!e.replspaceApiOpenFile)throw Error("Expected replspaceApiOpenFile");if(r=(t=e.replspaceApiOpenFile).file,c=t.waitForClose,s=t.nonce,a)return[3,3];if(!r.endsWith(".git/COMMIT_EDITMSG"))return c&&l.send({replspaceApiCloseFile:{file:r,nonce:s}}),window.alert("tried to open ".concat(r," but failed")),[2];return h=window.prompt("Enter a commit message"),[4,n.writeFile(r,null!=h?h:"")];case 2:if(i.sent(),!c)return[2];return[3,5];case 3:if(b(),a({paths:[r]}),!c||!f)return[2];return[4,f(r)];case 4:i.sent(),i.label=5;case 5:return[4,n.flush()];case 6:if(i.sent(),"open"!==l.status)return[2];return l.send({replspaceApiCloseFile:{file:r,nonce:s}}),[2];case 7:if(!e.replspaceApiGetGitHubToken)throw Error("Expected replspaceApiGetGitHubToken");return p=function(){var t;"open"===l.status&&l.send({replspaceApiGitHubToken:{token:"",nonce:null===(t=e.replspaceApiGetGitHubToken)||void 0===t?void 0:t.nonce}})},[4,function(){return y.apply(this,arguments)}()];case 8:if(null==(m=i.sent()).gitHubInfo)return p(),[2];if(!u.size)return p(),o.kg.error("Got a replspaceApiGetGitHubToken command but no confirm listener is set up"),[2];if(v=function(){var t,n;"open"===l.status&&l.send({replspaceApiGitHubToken:{token:null===(t=m.gitHubInfo)||void 0===t?void 0:t.accessToken,nonce:null===(n=e.replspaceApiGetGitHubToken)||void 0===n?void 0:n.nonce}})},d)return v(),[2];g=!1,w=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=u[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)(0,r.value)(null)}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},Z=!0,x=!1,C=void 0;try{for(_=u[Symbol.iterator]();!(Z=(S=_.next()).done)&&(k=S.value,!g);Z=!0)k(function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!g){if(g=!0,!e){p(),w();return}t&&(d=e),v(),w()}})}catch(e){x=!0,C=e}finally{try{Z||null==_.return||_.return()}finally{if(x)throw C}}i.label=9;case 9:return[2]}})}),function(e){return t.apply(this,arguments)})),function(){}}),t.openChannel({service:"shelltracker",name:"shelltracker"},function(e){e.channel.onCommand(function(e){if(null!=e.replspaceApiShellTracker){var n,r;(0,l.j)(l.U3.SHELL_COMMAND_EVALED,{context:e.replspaceApiShellTracker.cmd,replId:null===(r=t.getContext())||void 0===r?void 0:null===(n=r.repl)||void 0===n?void 0:n.id,api:"replspace",pwd:e.replspaceApiShellTracker.pwd})}})}),void 0!==s&&s&&t.openChannel({service:"sshtoken",name:"sshtoken"},function(e){var t,n=e.channel;n.onCommand((t=(0,r._)(function(e){var t,r,a,l,c,s;return(0,i.Jh)(this,function(i){switch(i.label){case 0:if(!e.replspaceApiSSHTokenGetRequest)throw Error("Expected replspaceApiSSHTokenGetRequest");return r=(t=e.replspaceApiSSHTokenGetRequest).nonce,a=t.replid,l=function(e){"open"===n.status&&n.send({replspaceApiSSHTokenGetResponse:e})},c=function(){l({token:"",nonce:r})},[4,function(e){return g.apply(this,arguments)}({replId:a})];case 1:if(s=i.sent(),"open"!==n.status)return[2];if("error"===s.type)return c(),o.kg.error(s.message),[2];return l({token:s.data.token,nonce:r,sshHostname:s.data.ssh_hostname}),[2]}})}),function(e){return t.apply(this,arguments)}))}),{onConfirmSendToken:function(e){var t=function(t){return e(t)};return u.add(t),function(){u.delete(t)}},setWaitForFileClose:function(e){f=e}}}},54960:function(e,t,n){n.d(t,{F:function(){return o}});var r=n(53557),i=n(78986);function o(e,t){var n=(0,r.rF)(t.fileTypeAttrs);return!n&&(null==t?void 0:t.language)&&(n=r.$R.from(t.language)),!!(n&&(0,i.JW)(e,n))}},83238:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(66626),i=n(38931),o=n(50959),a=n(81199);function l(){var e=(0,a.Z)().toolchain,t=(0,r._)((0,o.useState)(null),2),n=t[0],l=t[1];return(0,o.useEffect)(function(){var t=!1;return e.getRegistry().then(function(e){t||l(e)}).catch(function(e){i.kg.error("Toolchain: failed to get module registry: ".concat(e.message))}),function(){t=!0}},[e]),n}},36136:function(e,t,n){n.d(t,{K:function(){return l}});var r=n(41733),i=n(59786),o=n(50959),a=n(81199);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.Z)().userEvents,n=(0,i.P5)({controlName:"flag-null-diagnostics",logFlagToAnalytics:!1});return(0,o.useCallback)(function(i,o){n&&t.emit(i,(0,r._)({},e,o))},[t,e,n])}},25165:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(4216),i=n(73789),o=n(59947),a=n(99236),l=n(64479),c=n(82230),s=n(94778),u=n(15235),d=n(25360),f=n(49224),h=n(72093),p=n(77847),m=(0,f.X)({connectHeader:[h.l0.colWithGap(4)],connectButtonRow:[h.l0.flex.rowReverse],sshConfigDialog:[h.l0.colWithGap(12)]});function v(e){var t=e.onConfirm,n=(0,p.Z)(),f="Host *.replit.dev\n  Port 22\n  IdentityFile ".concat(n,"/.ssh/replit");return(0,r.BX)(l.Tg,{css:m.sshConfigDialog,children:[(0,r.BX)(s.G,{css:m.connectHeader,children:[(0,r.tZ)(c.h4,{level:1,variant:"subheadBig",children:"Update your SSH configuration"}),(0,r.BX)(c.xv,{color:"dimmer",children:["Before connecting over SSH, you need to update your local SSH configuration file, which is usually located at ",n,"/.ssh/config"]})]}),(0,r.tZ)(d.Z,{code:f,header:".ssh/config",multiline:!0}),(0,r.tZ)(a.E,{text:"You can find this information later in the SSH docs",icon:(0,r.tZ)(i.Z,{})}),(0,r.tZ)(s.G,{css:m.connectButtonRow,children:(0,r.tZ)(u.zx,{text:"I updated my config",iconLeft:(0,r.tZ)(o.Z,{}),onClick:t,colorway:"primary",stretch:!1})})]})}},79125:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(66626),i=n(98250),o=n(50959),a=n(81199),l=n(84522);function c(){var e=(0,r._)((0,o.useState)(!1),2),t=e[0],n=e[1],c=function(){var e,t,n,i,c=(0,l.Z)(),s=(e=(0,a.Z)().container,n=(t=(0,r._)((0,o.useState)("/home/runner"),2))[0],i=t[1],(0,o.useEffect)(function(){e.exec("pwd").then(function(e){var t;e.output&&i((null===(t=e.output)||void 0===t?void 0:t.replace("\n",""))||"")})},[e]),n);if(!c)return"vscode://vscode-remote/ssh-remote";var u=c.sshUser,d=c.sshHostname,f=c.sshPort,h="vscode://vscode-remote/ssh-remote+".concat(u,"@").concat(d,":").concat(f).concat(s);try{return window.encodeURI(h)}catch(e){return h}}(),s=(0,i.Z)("ssh","workspace-ssh-connect-to-vscode-config-tour"),u=s.register;return(0,o.useEffect)(function(){u()},[u]),{openInVSCode:(0,o.useCallback)(function(){if(s.shouldDisplay){n(!0);return}window.location.href=c},[s.shouldDisplay,c]),onConfirmConfig:(0,o.useCallback)(function(){n(!1),s.dismiss(),window.location.href=c},[s,c]),isConfigModalOpen:t,closeConfigModal:(0,o.useCallback)(function(){n(!1)},[])}}},84522:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(39271),i=n(21625),o=n(81199);function a(){var e=(0,o.Z)().container,t=(0,r.Z)(),n=(0,i.Z)(e,{fallbackToReplCo:!1});if(!n)return null;var a=new URL(n).host,l=a.indexOf(":"),c="22";return -1!==l&&(a=a.substring(0,l),c="2022"),{sshUser:t,sshHostname:a,sshPort:c}}},65243:function(e,t,n){n.d(t,{g:function(){return o}});var r=n(4216),i=n(77450);function o(){return(0,r.tZ)(i.xB,{styles:[{body:{overflow:"hidden"}}]})}},96225:function(e,t,n){n.d(t,{w:function(){return h}});var r=n(41733),i=n(66626),o=n(4216),a=n(77450),l=n(55927),c=n(72093),s=n(30826),u=n.n(s),d=n(50959),f=n(10422);function h(e){var t=e.targetElement,n=(0,i._)((0,d.useState)(null),2),s=n[0],h=n[1],m=(0,l.Z)(function(){t&&h({rect:t.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})},{type:"throttle",wait:100});if((0,d.useEffect)(function(){t&&m(t)},[t,m]),(0,d.useEffect)(function(){if(t){var e=u()(function(){h({rect:t.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})},100);return window.addEventListener("resize",e),window.addEventListener("scroll",e),function(){window.removeEventListener("resize",e),window.removeEventListener("scroll",e)}}},[t]),!s||!t)return null;var v=(0,a.iv)({backgroundColor:c.TV.backgroundOverlay,zIndex:c.n0+1,position:"fixed",transition:"all 0.5s ease-out"});return(0,f.createPortal)((0,o.BX)(o.HY,{children:[(0,o.tZ)("div",{id:"wat",css:[p((0,r._)({side:"left-top"},s)),v]}),(0,o.tZ)("div",{css:[p((0,r._)({side:"top-right"},s)),v]}),(0,o.tZ)("div",{css:[p((0,r._)({side:"right-bottom"},s)),v]}),(0,o.tZ)("div",{css:[p((0,r._)({side:"bottom-left"},s)),v]})]}),document.body)}function p(e){var t=e.side,n=e.rect,r=e.docWidth,i=e.docHeight;switch(t){case"left-top":return(0,a.iv)({top:0,left:0,width:Math.max(0,n.left),height:Math.max(0,n.bottom)});case"top-right":return(0,a.iv)({top:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,n.left),"px)"),height:Math.max(0,n.top)});case"right-bottom":return(0,a.iv)({bottom:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,n.right),"px)"),height:"calc(".concat(i,"px - ").concat(Math.max(0,n.top),"px)")});case"bottom-left":return(0,a.iv)({bottom:0,left:0,width:Math.max(0,n.right),height:"calc(".concat(i,"px - ").concat(Math.max(0,n.bottom),"px)")})}}},2401:function(e,t,n){n.d(t,{k:function(){return v}});var r=n(41733),i=n(30509),o=n(66626),a=n(4216),l=n(19653),c=n(55927),s=n(80012),u=n(64432),d=n(23987),f=n(72093),h=n(50959),p=n(10422),m=n(34335);function v(e){var t=e.targetElement,n=e.activeStep,v=e.goto,g=e.currentStepIndex,y=e.totalSteps,b=e.done,w=e.disableAnimation,Z=e.placement,x=e.cypressCloseData,C=e.onClickOutside,_=e.innerRef,S=e.width,k=(0,o._)((0,h.useState)(null),2),E=k[0],T=k[1],R=(0,o._)((0,h.useState)(null),2),D=R[0],I=R[1],B=(0,m.D)(t,E,{placement:void 0===Z?"right":Z,modifiers:[{name:"arrow",options:{element:D,padding:8}},{name:"offset",options:{offset:[0,16]}},{name:"preventOverflow",options:{padding:8}},{name:"flip",options:{fallbackPlacements:["top","bottom","left","right"]}},{name:"computeStyles",options:{adaptive:!1}}]}),G=(0,c.Z)(function(){var e;null===(e=B.update)||void 0===e||e.call(B)},{type:"throttle",wait:100});(0,h.useEffect)(function(){G(t)},[t,G]),(0,h.useImperativeHandle)(_,function(){return{updateTooltip:function(){var e;null===(e=B.update)||void 0===e||e.call(B)}}});var A=(0,l.Z)(function(){C&&C()},[C]);return(0,p.createPortal)((0,a.BX)("div",(0,i._)((0,r._)({ref:function(e){A.current=e,T(e)},style:B.styles.popper,css:{transition:w?"all":"all 0.5s ease-out",zIndex:f.n0+2,width:null!=S?S:320}},B.attributes.popper),{children:[(0,a.tZ)(d.O,{title:n.title,content:n.content,onDismiss:function(){b()},currentStepIndex:g,onCurrentStepChange:v,totalSteps:y,cypressCloseData:void 0===x?"tour-tooltip-close-button":x}),(0,a.tZ)("span",{style:B.styles.arrow,css:[u.wk,{"&::after":{backgroundColor:s.Br.primary.dimmest,border:"1px solid "+s.Br.primary.dimmer}}],ref:I})]})),document.body)}},85777:function(e,t,n){n.d(t,{Do:function(){return L},Sr:function(){return N},e$:function(){return P},rk:function(){return O}});var r=n(66626),i=n(4216),o=n(50959),a=n(40635),l=n(22750),c=n(48553),s=n(85733),u=n(96225),d=n(2401),f=n(45271),h=n(23987),p=n(49500),m=(0,o.createContext)(void 0),v=m.Provider,g=(0,a.cn)(null),y=(0,a.cn)(new Map),b=(0,a.cn)(function(e){return!e(D)&&!e(T)}),w=(0,a.cn)(function(e){var t,n,r=e(R);return r&&null!==(n=null===(t=e(g))||void 0===t?void 0:t.steps.find(function(e){return e.id===r}))&&void 0!==n?n:null}),Z=(0,a.cn)(function(e){var t=e(w);return(null==t?void 0:t.isModal)?t:null}),x=(0,a.cn)(function(e){var t,n=e(R);if(!n)return -1;var r=e(g);return null!==(t=null==r?void 0:r.steps.findIndex(function(e){return n===e.id}))&&void 0!==t?t:-1}),C=(0,a.cn)(function(e){var t=e(R);return t?e(y).get(t):null}),_=(0,a.cn)(function(e){var t=e(g),n=e(y);return null==t?void 0:t.steps.filter(function(e){return!e.autoSkipIfNoTarget||!!n.get(e.id)})}),S=(0,a.cn)(function(e){var t,n=e(R);if(!n)return -1;var r=e(_);return null!==(t=null==r?void 0:r.findIndex(function(e){return n===e.id}))&&void 0!==t?t:-1}),k=(0,a.cn)(function(e){var t,n;return null!==(n=null===(t=e(_))||void 0===t?void 0:t.length)&&void 0!==n?n:0}),E=(0,a.cn)(null,function(e,t,n,r){t(y,function(e){var t=new Map(e);return r?t.set(n,r):t.delete(n),t})}),T=(0,a.cn)(!1),R=(0,a.cn)(null),D=(0,a.cn)(!1),I=(0,a.cn)(function(e){return e(g)&&!e(T)&&!e(D)}),B=(0,a.cn)(null,function(e,t,n){var r,i=e(g);if(!(!i||(r="number"==typeof n?n:i.steps.findIndex(function(e){return n===e.id}))<0||r>=i.steps.length)){for(var o=e(x),a=e(y),l=i.steps[r],c=r<o;!a.get(l.id)&&l.autoSkipIfNoTarget;){if((r=c?r-1:r+1)<0||r>=i.steps.length)return;l=i.steps[r]}t(R,l.id)}}),G=(0,a.cn)(null,function(e,t){var n=e(g);if(n){var r=e(x),i=e(y),o=n.steps[r+1];if(o&&o.autoSkipIfNoTarget)for(var a=r+1;o&&o.autoSkipIfNoTarget&&!i.get(o.id);)a++,o=n.steps[a];if(!o){t(D,!0);return}t(R,o.id)}}),A=(0,a.cn)(null,function(e,t){t(B,0),t(D,!1)});function P(e){var t=(0,o.useContext)(m),n=(0,o.useMemo)(function(){return(0,a.cn)(function(t){return!(t(T)||t(D))&&e===t(R)})},[e]),r=(0,l.b9)(G,{store:t}),i=(0,l.b9)(B,{store:t}),c=L(e),s=(0,l.Dv)(n,{store:t});return t&&c?{isActive:s,delegateTooltip:c,next:r,goto:i}:null}function L(e){var t=(0,o.useContext)(m),n=(0,l.b9)(E,{store:t}),r=(0,o.useCallback)(function(t){n(e,t)},[n,e]);return t?r:void 0}function N(){var e=(0,o.useContext)(m),t=(0,l.Dv)(I,{store:e});return e&&t}function O(e){var t,n=e.children,f=e.tour,h=e.onStep,m=e.onDone,y=(0,r._)((0,o.useState)(function(){var e;return(e=(0,a.MT)()).set(g,f),e.set(R,f.steps[0].id),e}),1)[0],Z=(0,l.Dv)(w,{store:y}),_=(0,l.Dv)(x,{store:y});if(-1===_)throw Error("Current tour step is not in tour steps");var E=(0,r._)((0,c.oe)({variables:{name:f.id},optimisticResponse:{__typename:"RootMutationType",markTourAsSeen2:{__typename:"TourSeen",id:f.id,seen:!0}}}),1)[0],I=(0,l.b9)(D,{store:y}),G=(0,o.useRef)();(0,o.useEffect)(function(){G.current=Z},[Z]);var P=(0,l.b9)(B,{store:y}),L=(0,l.Dv)(C,{store:y}),N=(0,l.Dv)(b,{store:y}),O=(0,l.b9)(A,{store:y});window.startTour=function(){p.log("starting tour:",f.id,"from",f.steps[0].id),O()};var M=(0,l.Dv)(S,{store:y}),X=(0,l.Dv)(k,{store:y}),F=(0,s.Z)(h),W=(0,s.Z)(m);(0,o.useEffect)(function(){return y.sub(R,function(){var e,t,n=y.get(R),r=y.get(D);n&&(r?null===(e=W.current)||void 0===e||e.call(W,n):null===(t=F.current)||void 0===t||t.call(F,n))})},[y,F,W]),(0,o.useEffect)(function(){return y.sub(D,function(){y.get(D)&&E()})},[y,E]);var H=(0,c.Pp)({variables:{tours:f.id},onCompleted:function(e){var t;y.set(D,!!(null==e?void 0:null===(t=e.currentUser)||void 0===t?void 0:t.toursSeen[0].seen))}}).loading,V=(0,l.b9)(T,{store:y});return(0,o.useEffect)(function(){V(H)},[V,H]),(0,i.BX)(v,{value:y,children:[N&&(null==Z?void 0:Z.isModal)?(0,i.tZ)(U,{}):null,N&&L&&Z?(0,i.BX)(i.HY,{children:[(0,i.tZ)(u.w,{targetElement:L}),(0,i.tZ)(d.k,{targetElement:L,activeStep:Z,currentStepIndex:M,done:function(){return I(!0)},goto:function(e){P(e+_-M)},totalSteps:X,disableAnimation:0===_||!!(null===(t=G.current)||void 0===t?void 0:t.isModal)})]}):null,n]})}function U(){var e,t,n,r,a,c,s,u=(e=(0,o.useContext)(m),t=(0,l.Dv)(Z,{store:e}),n=(0,l.b9)(B,{store:e}),r=(0,l.Dv)(x,{store:e}),a=(0,l.Dv)(k,{store:e}),c=(0,l.b9)(D,{store:e}),s=(0,o.useCallback)(function(){return c(!0)},[c]),e&&t?{activeStep:t,totalSteps:a,goto:n,currentStepIndex:r,done:s}:null);if(!u)return null;var d=u.activeStep,p=u.goto,v=u.totalSteps,g=u.currentStepIndex,y=u.done;return(0,i.tZ)(f.u,{preventClose:!0,isOpen:!0,onRequestClose:function(){},centered:!0,maxWidth:"fit-content",noPadding:!0,children:(0,i.tZ)(h.O,{title:d.title,content:d.content,onDismiss:function(){y()},currentStepIndex:g,onCurrentStepChange:p,totalSteps:v,cypressCloseData:"tour-tooltip-close-button"})})}},19805:function(e,t,n){var r,i;n.d(t,{z:function(){return r}}),(i=r||(r={})).FileNode="FILE_NODE",i.FileHeaderTab="FILE_HEADER_TAB",i.Code="CODE",i.Pane="PANE",i.NewPane="NEW_PANE"},85447:function(e,t,n){var r=n(42516),i=n(41733),o=n(30509),a=n(98924),l=n(4216),c=n(28266),s=n.n(c),u=n(97754),d=n.n(u),f=n(72602);n(50959),t.Z=function(e){var t,n=e.level,c=e.fontFamily,u=void 0===c?"sans-serif":c,h=e.fontWeight,p=void 0===h?"medium":h,m=e.foreground,v=void 0===m?1:m,g=e.align,y=void 0===g?"left":g,b=e.truncate,w=e.className,Z=void 0===w?"":w,x=e.children,C=(0,a._)(e,["level","fontFamily","fontWeight","foreground","align","truncate","className","children"]);return(0,l.BX)("h".concat(n),(0,o._)((0,i._)({},C),{className:s().dynamic([["e5be6eb40aa527b5",[f.Z.levels[n],f.Z.fontFamily[u],f.Z.fontWeight[p],f.Z.foreground[v],y]]])+" "+(d()("heading",(t={},(0,r._)(t,Z,!!Z),(0,r._)(t,"truncate",void 0!==b&&b),t))||""),children:[x,(0,l.tZ)(s(),{id:"e5be6eb40aa527b5",dynamic:[f.Z.levels[n],f.Z.fontFamily[u],f.Z.fontWeight[p],f.Z.foreground[v],y],children:".heading.__jsx-style-dynamic-selector{font-size:".concat(f.Z.levels[n],";font-family:").concat(f.Z.fontFamily[u],";font-weight:").concat(f.Z.fontWeight[p],";color:").concat(f.Z.foreground[v],";text-align:").concat(y,"}.truncate.__jsx-style-dynamic-selector{overflow:hidden;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis;max-width:100%}")})]}))}},40332:function(e,t,n){var r=n(4216),i=n(28266),o=n.n(i),a=n(97754),l=n.n(a),c=n(72370);n(50959),t.Z=function(e){var t=e.name,n=void 0===t?"toggle":t,i=e.id,a=e.elevation,s=void 0===a?"higher":a,u=e.isOn,d=e.onIcon,f=e.offIcon,h=e.onChange,p=e.dataCy,m=(0,c.U)(),v=null!=i?i:m(n);return(0,r.BX)("label",{"data-cy":p,htmlFor:v,className:o().dynamic([["8d56ad7b5afff72c",[s]]])+" "+(l()("toggle-label",{isOn:u})||""),children:[(0,r.tZ)("input",{name:n,checked:u,onChange:h,id:v,type:"checkbox",className:o().dynamic([["8d56ad7b5afff72c",[s]]])+" toggle-checkbox"}),(0,r.tZ)("span",{className:o().dynamic([["8d56ad7b5afff72c",[s]]])+" toggle-button",children:u&&d?d:f||null}),(0,r.tZ)(o(),{id:"8d56ad7b5afff72c",dynamic:[s],children:".toggle-checkbox.__jsx-style-dynamic-selector{height:0;width:0;visibility:hidden}.toggle-label.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;cursor:pointer;width:38px;height:24px;background:var(--background-".concat(s,');border:.5px solid var(--outline-dimmest);-webkit-border-radius:100px;-moz-border-radius:100px;border-radius:100px;position:relative;-webkit-transition:background-color.2s;-moz-transition:background-color.2s;-o-transition:background-color.2s;transition:background-color.2s}.toggle-button.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;content:"";position:absolute;left:1px;width:20px;height:20px;-webkit-border-radius:45px;-moz-border-radius:45px;border-radius:45px;-webkit-transition:.2s;-moz-transition:.2s;-o-transition:.2s;transition:.2s;background:var(--white);-webkit-box-shadow:var(--shadow-1);-moz-box-shadow:var(--shadow-1);box-shadow:var(--shadow-1);color:var(--foreground-dimmer)}.toggle-label.isOn.__jsx-style-dynamic-selector{background-color:var(--accent-primary-default);border-color:var(--accent-primary-default)}.toggle-checkbox.__jsx-style-dynamic-selector:checked+.toggle-button.__jsx-style-dynamic-selector{-webkit-transform:translatex(-webkit-calc(100% - 6px));-moz-transform:translatex(-moz-calc(100% - 6px));-ms-transform:translatex(calc(100% - 6px));-o-transform:translatex(calc(100% - 6px));transform:translatex(-webkit-calc(100% - 6px));transform:translatex(-moz-calc(100% - 6px));transform:translatex(calc(100% - 6px));color:var(--accent-primary-default)}.toggle-label.__jsx-style-dynamic-selector:active .toggle-button.__jsx-style-dynamic-selector{-webkit-box-shadow:var(--shadow-2);-moz-box-shadow:var(--shadow-2);box-shadow:var(--shadow-2)}')})]})}},44355:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(38753),i=n(99189),o=n(18317),a=n(85421),l=n(50959),c=n(96955);function s(e){var t=e.sendInput,n=e.paste,s=(0,a.useRouter)(),u=(0,r.Gv)(s);(0,l.useEffect)(function(){if(u){var e=function(e,n){t(n)?(0,i.gU)(e):(0,i.pl)(e)},r=function(e){"unknown"===e||(0,c.Z)(e)},a=function(t){(0,i.gN)(t,function(t){var a=t.type;switch(a){case o.cF.SHELL_INSERT_INPUT:e(t.id,t.input);break;case o.cF.SHELL_COMMAND:r(t.command);break;case o.cF.SHELL_PASTE_TEXT:n(t.text)?(0,i.gU)(t.id):(0,i.pl)(t.id);break;default:(0,c.Z)(a)}})};return window.addEventListener("message",a),function(){window.removeEventListener("message",a)}}},[u,t,n])}},70379:function(e,t,n){n.d(t,{H$:function(){return c},Q1:function(){return l}});var r=n(99189),i=n(18317),o=n(85234),a=n.n(o);function l(e){var t=e.isDrawerOpen,n=e.isShowingAllPanes,r=e.isSaving,o=e.isOffline,a=e.runState,l=e.activePaneType,c=e.activePaneFilePath;return{messageType:i.cF.WORKSPACE_STATE,isDrawerOpen:t,isShowingAllPanes:n,isSaving:r,isOffline:o,runState:a,activePaneType:l,activePaneFilePath:c}}function c(e){var t=e.payload,n=a()();(0,r.bG)(t,n)}},38414:function(e,t,n){n.d(t,{Z:function(){return G}});var r=n(27387),i=n(66626),o=n(78950),a=n(63257),l=n(96583),c=n(4216),s=n(94311),u=n(45271),d=n(72093),f=n(30124),h=n(85447),p=n(24857),m=n(72121),v=n(50959),g=n(41733),y=n(21262),b=n(71440),w=n(58995);function Z(){var e=(0,y._)(["\n  query BSODComponent {\n    currentUser {\n      id\n      username\n      image\n      isStaff: hasRole(role: REPLIT_STAFF)\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return Z=function(){return e},e}var x={},C=(0,b.Ps)(Z()),_=n(1813),S=n(77450),k=n(49224),E=(0,S.iv)({".sentry-error-embed-wrapper":{zIndex:"".concat(d.n0," !important")}}),T=(0,k.X)({errorStack:[d.l0.p(16),d.l0.width("100%"),d.l0.backgroundColor.backgroundHigher,d.l0.borderRadius(8),d.l0.overflowY("hidden"),{whiteSpace:"pre"}],errorStackContent:[d.l0.font.code,d.l0.fontSize(12)],error:[d.l0.font.code]}),R=/at (.+) \((https:\/\/.+\.js):(\d+):(\d+)\)/,D=/at (https:\/\/.+\.js):(\d+):(\d+)/;function I(){return(I=(0,r._)(function(e){var t,c,s,u,d,f,h,p;function m(){return(m=(0,r._)(function(e){var n,r,i;return(0,l.Jh)(this,function(o){switch(o.label){case 0:if(n=t.get(e))return[2,n];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(e).then(function(e){return e.json()})];case 2:return r=o.sent(),i=new c.SourceMapConsumer(r),t.set(e,i),[2,i];case 3:return o.sent(),[2,null];case 4:return[2]}})})).apply(this,arguments)}return(0,l.Jh)(this,function(v){switch(v.label){case 0:t=new Map,v.label=1;case 1:return v.trys.push([1,3,,4]),[4,n.e(4552).then(n.t.bind(n,94552,19))];case 2:return c=v.sent(),[3,4];case 3:throw v.sent(),Error("source-map not available");case 4:var g;if(!(s=e.stack))throw Error("expected error.stack to be defined");return u=s.split("\n").map(function(e){return e.trim()}).filter(function(e){return!!e}),f=(d=(0,o._)(u))[0],[4,Promise.all(d.slice(1).map((g=(0,r._)(function(e){var t,n,r,o,a,c,s,u,d,f;return(0,l.Jh)(this,function(l){switch(l.label){case 0:if(R.test(e)){if(!(a=R.exec(e)))throw Error("expected result");n=(c=(0,i._)(a.slice(2),3))[0],r=c[1],o=c[2]}else{if(!D.test(e))return[2,e];if(!(s=D.exec(e)))throw Error("expected result");n=(u=(0,i._)(s.slice(1),3))[0],r=u[1],o=u[2]}return[4,function(e){return m.apply(this,arguments)}("".concat(n,".map"))];case 1:if(!(d=l.sent()))return[2,"    ".concat(e)];if(f=d.originalPositionFor({line:Number(r),column:Number(o)}),t)return[2,"    at ".concat(f.name," (").concat(f.source,":").concat(f.line,":").concat(f.column,")")];return[2,"    at ".concat(f.source,":").concat(f.line,":").concat(f.column)]}})}),function(e){return g.apply(this,arguments)})))];case 5:return h=v.sent(),Object.assign(p=Error(),{name:e.name,stack:[f].concat((0,a._)(h)).join("\n"),message:e.message},e),[2,p]}})})).apply(this,arguments)}var B=function(e){var t=e.bsod,n=(0,i._)((0,v.useState)(null),2),o=n[0],a=n[1];(0,v.useEffect)(function(){(0,r._)(function(){return(0,l.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,function(e){return I.apply(this,arguments)}(t.error)];case 1:return a(e.sent()),[3,3];case 2:return e.sent(),[2];case 3:return[2]}})})()},[t.error]);var s=(0,v.useMemo)(function(){var e,n,r,i;return o?null!==(r=null===(n=o.stack)||void 0===n?void 0:n.split("\n"))&&void 0!==r?r:[]:null!==(i=null===(e=t.error.stack)||void 0===e?void 0:e.split("\n"))&&void 0!==i?i:[]},[o,t.error.stack]);return(0,c.tZ)("div",{css:T.errorStack,children:(0,c.tZ)(p.gC,{spacing:1,children:(0,c.BX)("div",{css:T.errorStackContent,children:[(0,c.BX)("div",{children:["Origin: ",t.origin]}),null==s?void 0:s.map(function(e,t){var n=e.replace("webpack-internal:///./",""),r=n.includes("node_modules");return(0,c.tZ)("div",{css:r&&d.l0.color.foregroundDimmest,children:n},t)})]})})})},G=function(){var e,t,n,r=(0,i._)((0,_.qg)(),1)[0],o=(e=(0,g._)({},x,{skip:!r}),w.a(C,e)),a=o.data,l=o.loading;if((0,_.ic)(),!r)return null;var v=(null==a?void 0:null===(t=a.currentUser)||void 0===t?void 0:t.isStaff)||(null==a?void 0:null===(n=a.currentUser)||void 0===n?void 0:n.isAdmin);return(0,c.BX)(u.u,{isOpen:!0,preventClose:!0,onRequestClose:function(){},maxWidth:872,children:[(0,c.BX)(p.gC,{spacing:2,align:"center",children:[(0,c.tZ)(h.Z,{level:2,children:" Your Repl is having a bit of trouble."}),(0,c.tZ)("div",{className:"spacer"}),(0,c.tZ)(m.Z,{size:"large",children:"The issue has been logged and the Replit team will look into it. Try reloading the page to get back to coding."}),(0,c.tZ)("div",{css:[d.l0.p(16),d.l0.width("100%"),d.l0.backgroundColor.backgroundHigher,d.l0.borderRadius(8)],children:(0,c.BX)(p.gC,{spacing:1,children:[!l&&(null==a?void 0:a.currentUser)?(0,c.BX)(p.Ug,{spacing:2,align:"center",children:[(0,c.tZ)(s.q,{src:a.currentUser.image,username:a.currentUser.username,size:48}),(0,c.tZ)(m.Z,{size:"medium",children:a.currentUser.username})]}):null,(0,c.BX)("div",{css:T.error,children:["Error: ",r.eventId]})]})}),v?(0,c.tZ)(B,{bsod:r}):null,(0,c.tZ)("div",{className:"spacer"}),(0,c.tZ)(f.Z,{onClick:function(){return window.location.reload()},color:"primary",filled:!0,fullWidth:!0,children:"reload"}),!1]}),(0,c.tZ)(S.xB,{styles:[E]})]})}},7198:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(12285),i=n(4955),o=n(41733),a=n(30509),l=n(9670),c=n(4216),s=n(43182),u=n(94778),d=n(72093),f=n(50959),h=n(1813),p=n(49500),m=function(e){"use strict";(0,i._)(n,e);var t=(0,l._)(n);function n(){var e;return(0,r._)(this,n),e=t.apply(this,arguments),e.state={hasErrored:!1,error:null,errorInfo:null},e}var o=n.prototype;return o.componentDidCatch=function(e,t){this.setState({hasErrored:!0,error:e,errorInfo:t}),this.props.handleError(e,t),p.error(e)},o.render=function(){if(this.state.hasErrored){var e,t,n;return(0,c.tZ)(u.G,{css:[d.l0.font.code,d.l0.p(16),{whiteSpace:"pre",overflow:"hidden",color:"white"},d.l0.backgroundColor.blurpleDefault,d.l0.height("100%")],children:(0,c.tZ)(u.G,{children:null!==(n=null===(t=this.state)||void 0===t?void 0:null===(e=t.error)||void 0===e?void 0:e.stack)&&void 0!==n?n:"An unknown error occurred."})})}return this.props.children},n}(f.Component);function v(e){var t=e.bsod,n=void 0!==t&&t,r=e.sentry,i=void 0===r||r,l=e.handleError,u=e.children,d=e.origin,f=void 0===d?"ErrorBoundary: (no origin provided)":d,p=e.tags,v=void 0===p?{}:p,g=e.extras,y=void 0===g?{}:g,b=(0,h.uV)();return(0,c.tZ)(m,{handleError:function(e,t){n?b({error:e,extras:(0,a._)((0,o._)({},y),{errorInfo:t}),tags:(0,a._)((0,o._)({},v),{errorBoundary:!0}),origin:f}):i&&s.$e(function(n){n.setTag("errorBoundary",!0),n.setTags(v),n.setExtra("errorInfo",t),n.setExtras(y),s.Tb(e)}),l&&l(e,t)},children:u})}},90079:function(e,t,n){n.d(t,{YX:function(){return w},ho:function(){return Z}});var r=n(12285),i=n(41733),o=n(30509),a=n(66626),l=n(4216),c=n(46298),s=n(82230),u=n(94778),d=n(59947),f=n(80186),h=n(29318),p=n(72093),m=n(57117),v=n(54443),g=n(50959),y=n(48376),b=n(59452),w=new(function(){"use strict";function e(){var t=this;(0,r._)(this,e),this.counter=0,this.enabled=!1,this.maxEntries=10,this.logs=(0,y.u)([]),this.clear=function(){t.logs.current=[]}}var t=e.prototype;return t.toggle=function(e){this.enabled=e},t.add=function(e){var t=this,n=this.counter++;if(!this.enabled)return{id:n};var r={id:n,request:e,requestTime:Date.now()};return this.logs.update(function(e){return[r].concat(e).slice(0,t.maxEntries)}),{id:n}},t.update=function(e,t){this.enabled&&this.logs.update(function(n){var r=n.findIndex(function(t){return t.id===e.id});if(-1===r)return n;var i=n.slice();return i[r]=t(i[r]),i})},t.complete=function(e,t){this.update(e,function(e){return(0,o._)((0,i._)({},e),{response:t,responseTime:Date.now()})})},t.abort=function(e){this.logs.update(function(t){return t.filter(function(t){return t.id!==e.id||null!=t.responseTime})})},e}()),Z=function(e){var t=e.isHidden,n=(0,c.Z)(w.logs);return t?null:(0,l.BX)(u.G,{css:[p.l0.flex.column],children:[(0,l.BX)(u.G,{css:[p.l0.flex.row,p.l0.align.center,p.l0.m(4),p.l0.position.sticky,p.l0.top(0),p.l0.backgroundColor.backgroundDefault,p.l0.zIndex(1)],children:[(0,l.tZ)(s.xv,{css:p.l0.flex.grow(1),multiline:!1,children:"Requests"}),(0,l.tZ)(v.Z,{onClick:w.clear})]}),(0,l.BX)(u.G,{css:[p.l0.flex.grow(1),p.l0.flex.column,p.l0.overflow("auto")],children:[n.map(function(e){var t;return(0,l.tZ)(x,{log:e},null!==(t=e.id)&&void 0!==t?t:e.requestTime.valueOf())}),!n.length&&(0,l.tZ)(u.G,{css:p.l0.m(4),children:"\uD83D\uDE14 No logs yet..."})]})]})},x=(0,g.memo)(function(e){var t,n=e.log,r=n.requestTime,i=n.responseTime,o=n.request,c=n.response,v=(0,a._)((0,m.Z)(!0),2),g=v[0],y=v[1],w=o.prefix.length>20?"...".concat(o.prefix.slice(-20)):o.prefix;return(0,l.BX)(u.G,{css:[p.l0.my(4),p.l0.mx(4)],children:[(0,l.BX)(u.G,{role:"button",onClick:y,onKeyDown:y,tabIndex:0,css:[p.l0.flex.row,p.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],children:[(0,l.BX)(u.G,{css:[p.l0.flex.grow(1),p.l0.rowWithGap(2)],children:[(0,l.tZ)(s.xv,{multiline:!1,children:(t=n.response)?"CompleteCodeResult"===t.__typename?(0,l.tZ)(d.Z,{}):(0,l.tZ)(f.Z,{}):(0,l.tZ)(h.Z,{})}),(0,l.tZ)(s.xv,{multiline:!1,children:(0,l.tZ)("code",{children:w})})]}),(0,l.tZ)(u.G,{css:{opacity:.5},children:null!=i&&(0,l.BX)(s.xv,{css:p.l0.fontSize(13),multiline:!1,children:[i.valueOf()-r.valueOf(),"ms"]})})]}),!g&&(0,l.BX)(l.HY,{children:[void 0!==o&&(0,l.tZ)(b.g,{name:"request",src:o}),void 0!==c&&("CompleteCodeResult"===c.__typename?(0,l.BX)("details",{children:[(0,l.tZ)("summary",{children:"Response"}),(0,l.tZ)("pre",{css:[p.l0.overflow("scroll"),p.l0.borderRadius(4),p.l0.p(4),{border:"1px solid ".concat(p.TV.outlineDimmest)}],children:c.code})]}):(0,l.tZ)(b.g,{name:"response",src:c}))]})]})})},20025:function(e,t,n){n.d(t,{$G:function(){return Z},Ay:function(){return g},Ys:function(){return w},_k:function(){return d},_t:function(){return h},cF:function(){return a},gd:function(){return s},mN:function(){return m},qc:function(){return b}});var r=n(40635),i=n(22750),o=n(50959),a=function(e,t){var n=e.dir,r=e.channel,i=e.stringifiedCmd,o=e.cmd;return(!t.direction||n===t.direction)&&(!t.channels.length||!!t.channels.includes(o.channel))&&(!!(!t.regexp||!t.regexp.test||r.name&&t.regexp.test(r.name)||r.service&&t.regexp.test(r.service))||t.regexp.test(i))},l=(0,r.cn)([]),c=(0,r.cn)([]);function s(){return(0,o.useDeferredValue)((0,i.Dv)(c))}var u=(0,r.cn)(null,function(e,t,n){a(n,e(p))&&t(c,function(e){return e.concat(n)}),t(l,function(e){return e.concat(n)})});function d(){return(0,i.b9)(u)}var f=(0,r.cn)(null,function(e,t){t(l,[]),t(c,[])});function h(){return(0,i.b9)(f)}var p=(0,r.cn)({regexp:null,direction:"",highlightOnly:!1,channels:[]});function m(){return(0,i.Dv)(p)}var v=(0,r.cn)(null,function(e,t,n){var r;t(p,n),t(c,(r=e(l),(n.regexp||n.direction||n.channels.length)&&!n.highlightOnly?r.filter(function(e){return a(e,n)}):r))});function g(){return(0,i.b9)(v)}var y=(0,r.cn)(!1);function b(){return(0,i.Dv)(y)}function w(){return(0,i.b9)((0,o.useMemo)(function(){return(0,r.cn)(null,function(e,t,n){return t(y,n)})},[]))}function Z(){return(0,i.b9)((0,o.useMemo)(function(){return(0,r.cn)(null,function(e,t){return t(y,function(e){return!e})})},[]))}},17031:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(81199),i=n(20025),o=n(85421),a=n(50959),l=n(92674),c=n.n(l);function s(){var e=(0,o.useRouter)(),t=(0,r.Z)().container,n=(0,i.qc)(),l=(0,i.Ys)(),s=(0,i._k)();(0,a.useEffect)(function(){e.query.debug&&"undefined"!==e.query.debug&&l(!0)},[l,e.query.debug]),(0,a.useEffect)(function(){if(n)return t.client().onDebugLog(function(e){if("log"===e.type){var n={name:e.log.channel.name,service:null};if("string"==typeof e.log.channel.service)n.service=e.log.channel.service;else if(e.log.channel.service){var r=t.getContext();r&&(n.service=e.log.channel.service(r))}s({id:c()(),channel:n,dir:e.log.direction,cmd:e.log.cmd,stringifiedCmd:JSON.stringify(e.log.cmd),timestamp:window.performance.now()})}})},[n,t,s])}},59452:function(e,t,n){n.d(t,{L:function(){return A},g:function(){return L}});var r=n(42516),i=n(41733),o=n(30509),a=n(66626),l=n(63257),c=n(4216),s=n(72370),u=n(50959),d=n(71462),f=n(71089),h=n(85763),p=n(18060),m=n(82230),v=n(94778),g=n(54501),y=n(59947),b=n(64318),w=n(11716),Z=n(72452),x=n(55964),C=n(57120),_=n(73789),S=n(29318),k=n(72093),E=n(33530),T=n(40332),R=n(57117),D=n(54443),I=n(66048),B=n(8252),G=n(54590),A=function(e){var t,n,d,g,y,b,w=e.isHidden,C=(n=(t=(0,a._)((0,u.useState)(null),2))[0],d=t[1],g=(0,I.R3)(),(0,u.useEffect)(function(){g!==n&&null!=g&&d(g)},[g,n]),n),_=(0,E.Z)(C||""),S=(0,a._)((0,u.useState)(null===(y=_[0])||void 0===y?void 0:y.clientId),2),A=S[0],L=S[1];A&&!_.find(function(e){return A===e.clientId})&&L(null===(b=_[0])||void 0===b?void 0:b.clientId),!A&&_.length&&L(_[0].clientId);var O=(0,s.U)(),U=(0,a._)((0,R.Z)(!0),2),M=U[0],X=U[1],F=(0,a._)((0,u.useState)(""),2),W=F[0],H=F[1],V=(0,a._)((0,u.useState)(function(){return{}}),2),z=V[0],j=V[1],q=(0,a._)((0,R.Z)(!0),2),J=q[0],Y=q[1],$=(0,a._)((0,R.Z)(!0),2),K=$[0],Q=$[1],ee=(0,u.useCallback)(function(e,t){j(function(n){var a;return(0,o._)((0,i._)({},n),(0,r._)({},e,[t].concat((0,l._)(null!==(a=n[e])&&void 0!==a?a:[])).slice(0,100)))})},[]),et=(0,u.useCallback)(function(e,t,n){j(function(r){if(r[e]){for(var o=0;o<r[e].length;o++)if(r[e][o].id===t){r[e][o]=n(r[e][o]);break}r[e]=r[e].slice(0,100)}return(0,i._)({},r)})},[]),en=(0,u.useCallback)(function(){A&&j(function(e){return(0,o._)((0,i._)({},e),(0,r._)({},A,[]))})},[A]),er=(0,u.useMemo)(function(){return _.find(function(e){return e.clientId===A})},[_,A]),ei=null==er?void 0:er.isOpen(C||""),eo=(0,u.useCallback)(function(){var e=null==er?void 0:er.clientId;e&&ee(e,{canceled:!1,notification:{method:"probe",params:{filePath:C,state:null==er?void 0:er.getServerState(),capabilities:null==er?void 0:er.getServerCapabilities(),diagnostics:ei?null==er?void 0:er.getDiagnostics(C||""):[],isOpen:ei,isSupportedFile:null==er?void 0:er.isSupportedFile(C||"")}},requestTime:new Date,type:"probe"})},[ee,C,er,ei]),ea=(0,u.useMemo)(function(){if(!A)return[];var e,t,n=W.split(",").map(function(e){return e.trim()}).filter(Boolean);if(!n.length)return null!==(e=z[A])&&void 0!==e?e:[];var r=null!==(t=z[A])&&void 0!==t?t:[];return J||(r=r.filter(function(e){return null==e.notification})),K||(r=r.filter(function(e){return null==e.request})),W&&(r=r.filter(function(e){return n.some(function(t){var n;return null===(n=e.request||e.notification)||void 0===n?void 0:n.method.toLowerCase().includes(t.toLowerCase())})})),r},[W,z,A,J,K]);return((0,u.useEffect)(function(){return(0,B.uf)(_.flatMap(function(e){return[e.onRequest(function(t){M&&ee(e.clientId,{id:t.id,canceled:!1,request:t.data,requestTime:new Date})}),e.onResponse(function(t){M&&et(e.clientId,t.id,function(e){return(0,i._)((0,o._)((0,i._)({},e),{responseTime:new Date}),void 0!==t.result?{response:t.result}:{error:t.error})})}),e.onCancelRequest(function(t){M&&et(e.clientId,t,function(e){return(0,o._)((0,i._)({},e),{canceled:!0})})}),e.onDiagnostics(function(t){var n=t.path,r=t.diagnostics;M&&ee(e.clientId,{canceled:!1,notification:{method:"textDocument/publishDiagnostics for "+n,params:r},requestTime:new Date,type:"diagnostics"})}),e.onServerStateChange(function(t){M&&ee(e.clientId,{canceled:!1,notification:{method:"state",params:{serverState:t}},requestTime:new Date,type:"state"})}),e.onServerCapabilitiesChange(function(t){M&&ee(e.clientId,{canceled:!1,notification:{method:"capabilities",params:{serverCapabilities:t}},requestTime:new Date,type:"capabilities"})}),e.onSendNotification(function(t){M&&ee(e.clientId,{canceled:!1,notification:t,requestTime:new Date})}),e.onReceiveNotification(function(t){M&&ee(e.clientId,{canceled:!1,notification:t,requestTime:new Date})})]}))},[ee,et,M,_]),w)?null:(0,c.BX)(v.G,{css:[k.l0.flex.column],children:[(0,c.BX)(v.G,{css:[k.l0.flex.row,k.l0.align.center,k.l0.m(4),k.l0.position.sticky,k.l0.top(0),k.l0.backgroundColor.backgroundDefault,k.l0.zIndex(1)],children:[(0,c.tZ)(m.xv,{multiline:!1,children:A?(0,c.BX)(c.HY,{children:[(0,c.tZ)(N,{})," logs for ",(0,c.tZ)("code",{children:C})]}):"No LSP client available"}),(0,c.tZ)(h.hU,{alt:"Probe LSP",onClick:eo,children:(0,c.tZ)(Z.Z,{})}),(0,c.tZ)(v.G,{css:k.l0.flex.grow(1)}),(0,c.tZ)(T.Z,{id:"toggleIsLogging",isOn:M,onChange:X})]}),(0,c.tZ)(v.G,{children:(0,c.tZ)(G.hE,{name:"Visible LSP Client",value:A,onChange:L,row:!0,children:_.map(function(e){return(0,c.tZ)(G.rK,{id:e.clientId,text:e.clientName,value:e.clientId},e.clientId)})})}),(0,c.BX)(v.G,{css:[k.l0.rowWithGap(8),k.l0.m(4),k.l0.mb(8)],children:[(0,c.BX)(v.G,{css:k.l0.rowWithGap(4),children:[(0,c.tZ)(x.Z,{}),(0,c.tZ)(m.xv,{multiline:!1,children:"Show"})]}),(0,c.BX)(v.G,{css:k.l0.rowWithGap(4),children:[(0,c.tZ)(f.X,{name:"showNotifications",id:O("showNotifications"),checked:J,onChange:Y}),(0,c.tZ)("label",{htmlFor:O("showNotifications"),children:" Notifications"})]}),(0,c.BX)(v.G,{css:k.l0.rowWithGap(4),children:[(0,c.tZ)(f.X,{name:"showRequests",id:O("showRequests"),checked:K,onChange:Q}),(0,c.tZ)("label",{htmlFor:O("showRequests"),children:" Requests"})]}),(0,c.tZ)(v.G,{css:k.l0.flex.growAndShrink(1)}),(0,c.tZ)(v.G,{css:k.l0.rowWithGap(4),children:(0,c.tZ)(D.Z,{onClick:en})})]}),(0,c.tZ)(v.G,{css:k.l0.rowWithGap(4),children:(0,c.tZ)(p.II,{id:O("filterLsp"),placeholder:"Filter by method (Separate by ,)",onChange:function(e){return H(e.target.value)},value:W})}),(0,c.BX)(v.G,{css:[k.l0.flex.grow(1),k.l0.flex.column,k.l0.overflow("auto")],children:[ea.map(function(e,t){var n;return(0,c.tZ)(P,{log:e},null!==(n=e.id)&&void 0!==n?n:e.requestTime.valueOf()+""+t)}),!ea.length&&(0,c.tZ)(v.G,{css:k.l0.m(4),children:"\uD83D\uDE14 No logs yet..."})]})]})},P=u.memo(function(e){var t,n,r,i,o,l=e.log,s=l.requestTime,u=l.responseTime,d=l.request,f=l.response,h=l.notification,p=l.id,x=(0,a._)((0,R.Z)(!0),2),E=x[0],T=x[1];return(0,c.BX)(v.G,{css:[k.l0.my(4),k.l0.mx(4)],children:[(0,c.BX)(v.G,{role:"button",onClick:T,onKeyDown:T,tabIndex:0,css:[k.l0.flex.row,k.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],children:[(0,c.BX)(v.G,{css:[k.l0.flex.grow(1),k.l0.rowWithGap(2)],children:[(0,c.tZ)(m.xv,{className:"lspLog-emoji",multiline:!1,children:(t=l.type,n=l.canceled,r=l.response,i=l.notification,"state"===t?(0,c.tZ)(w.Z,{}):"diagnostics"===t?(0,c.tZ)(g.Z,{}):"capabilities"===t?(0,c.tZ)(C.Z,{}):"probe"===t?(0,c.tZ)(Z.Z,{}):n?(0,c.tZ)(b.Z,{}):i?(0,c.tZ)(_.Z,{}):void 0!==r?(0,c.tZ)(y.Z,{}):(0,c.tZ)(S.Z,{}))}),(0,c.BX)(m.xv,{className:"lspLog-requestMethod",multiline:!1,children:[(0,c.tZ)("code",{children:null===(o=d||h)||void 0===o?void 0:o.method}),null!=p&&(0,c.BX)("code",{className:"lspLog-logId",css:{opacity:.5},children:["#",p]})]})]}),(0,c.tZ)(v.G,{css:{opacity:.5},children:null!=u&&(0,c.BX)(m.xv,{css:k.l0.fontSize(13),multiline:!1,children:[u.valueOf()-s.valueOf(),"ms"]})})]}),!E&&(0,c.BX)(c.HY,{children:[void 0!==d&&(0,c.tZ)(L,{name:"request.params",src:d.params}),void 0!==h&&(0,c.tZ)(L,{name:"notification.params",src:h.params}),void 0!==f&&(0,c.tZ)(L,{name:"response",src:f})]})]})}),L=(0,u.memo)(function(e){var t=e.name,n=e.src;return(0,c.tZ)(v.G,{css:{marginTop:5,".node-ellipsis":{letterSpacing:-2},".object-key span":{letterSpacing:0},".object-key-val":{paddingBottom:"0 !important"},'.object-key + span[style*="margin"], .array-key + span[style*="margin"]':{marginLeft:"0 !important"},".variable-row, .pushed-content .object-key-val":{paddingLeft:"10px !important",paddingBottom:"0 !important"}},children:(0,c.tZ)(d.Z,{json:(0,r._)({},t,n)})})}),N=function(){return(0,c.tZ)(m.xv,{multiline:!1,css:{display:"inline",fontStyle:"italic",fontWeight:600,textShadow:"".concat(k.TV.redDimmer," 2px 2px")},children:"LSP"})}},57117:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(66626),i=n(50959);function o(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,r._)((0,i.useState)(e),2),n=t[0],o=t[1];return[n,(0,i.useCallback)(function(){return o(function(e){return!e})},[])]}},10692:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(66626),i=n(4216),o=n(95563),a=n(94778),l=n(49224),c=n(72093),s=n(50959),u=n(94250),d=(0,l.X)({container:[c.l0.p(8)],innerContainer:[c.l0.py(16),c.l0.px(8),c.l0.colWithGap(12),c.l0.align.center,c.l0.justify.center,c.l0.border({color:c.TV.outlineDimmest}),c.l0.borderRadius(),c.l0.container()]});function f(e){var t=(0,r._)((0,s.useState)(!1),2),n=t[0];t[1];var l=(0,s.useCallback)(function(e){if(e&&"agentPlanEventContents"===e.contents.contents.$kind)return e.contents.contents.agentPlanEventContents},[]),c=(0,o.Ru)()||"",f=(0,o.Mi)(c,l);return(0,i.tZ)(a.G,{css:d.container,children:(0,i.tZ)(a.G,{css:d.innerContainer,children:(0,i.tZ)(u.Z,{data:f,editable:n})})})}},38101:function(e,t,n){n.d(t,{r:function(){return c}});var r=n(4216),i=n(12933),o=n(82230),a=n(94778),l=n(72093);function c(e){var t=e.textVariant;return(0,r.BX)(o.xv,{variant:t,children:["AI Chat is currently unavailable. For more information, visit"," ",(0,r.tZ)("a",{href:"https://status.replit.com",target:"_blank",children:"our status page."})]})}t.Z=function(e){var t=e.textVariant,n=e.showImage;return(0,r.BX)(a.G,{css:[l.l0.center,l.l0.textAlign.center,l.l0.px(16),l.l0.colWithGap(8),l.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(c,{textVariant:t}),n?(0,r.tZ)(i.Z,{src:"/public/images/ghostwriter/orb.png",css:[{userSelect:"none",mixBlendMode:"screen",filter:"brightness(110%) saturate(1.2)",maskImage:"linear-gradient(".concat(l.TV.backgroundRoot,", transparent)")}],width:200,height:200,objectFit:"contain","aria-hidden":"true",alt:"",draggable:!1}):null]})}},74004:function(e,t,n){n.d(t,{AA:function(){return _},CH:function(){return y},Gg:function(){return v},Ne:function(){return k},pV:function(){return x},vk:function(){return w}});var r=n(41733),i=n(21262),o=n(71440),a=n(72604),l=n(58995),c=n(99165);function s(){var e=(0,i._)(["\n  fragment AutograderTest on ReplTemplateTest {\n    id\n    name\n    input\n    output\n    name\n    type\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,i._)(["\n  query Autograder($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          writeTests {\n            isAuthorized\n          }\n        }\n        template {\n          id\n        }\n        ioTests {\n          id\n          ...AutograderTest\n        }\n        unitTests {\n          meta {\n            id\n            ...UnitTestsReplUnitTestMeta\n          }\n          tests {\n            id\n            ...UnitTestsReplUnitTest\n            lastRun(replId: $replId) {\n              ... on ReplUnitTestLastRun {\n                status\n              }\n              ... on UserError {\n                message\n              }\n            }\n          }\n        }\n        isProject\n        isProjectFork\n        owner {\n          ... on Team {\n            id\n            isAdmin\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  mutation SaveIOTestResults(\n    $teamId: Int!\n    $replId: String!\n    $results: [IOTestResultInput!]!\n  ) {\n    saveIOTestResults(teamId: $teamId, replId: $replId, results: $results) {\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return d=function(){return e},e}function f(){var e=(0,i._)(["\n  mutation CreateAutograderTest($input: CreateTemplateTestInput!) {\n    createTemplateTest(input: $input) {\n      ... on ReplTemplateTest {\n        id\n        ...AutograderTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  mutation UpdateAutograderTest($input: UpdateTemplateTestInput!) {\n    updateTemplateTest(input: $input) {\n      ... on ReplTemplateTest {\n        id\n        ...AutograderTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function p(){var e=(0,i._)(["\n  mutation DeleteAutograderTest($testId: Int!) {\n    deleteTemplateTest(testId: $testId) {\n      ... on ReplTemplate {\n        id\n        tests {\n          id\n          ...AutograderTest\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var m={},v=(0,o.Ps)(s()),g=(0,o.Ps)(u(),v,a.aA,a.Rb);function y(e){var t=(0,r._)({},m,e);return l.a(g,t)}var b=(0,o.Ps)(d());function w(e){var t=(0,r._)({},m,e);return c.D(b,t)}var Z=(0,o.Ps)(f(),v);function x(e){var t=(0,r._)({},m,e);return c.D(Z,t)}var C=(0,o.Ps)(h(),v);function _(e){var t=(0,r._)({},m,e);return c.D(C,t)}var S=(0,o.Ps)(p(),v);function k(e){var t=(0,r._)({},m,e);return c.D(S,t)}},30364:function(e,t,n){n.d(t,{$:function(){return ek},u:function(){return eB}});var r=n(41733),i=n(30509),o=n(98924),a=n(4216),l=n(24655),c=n(80403),s=n(19127),u=n(6922),d=n(118),f=n(31070),h=n(66626),p=n(89284),m=n(93496),v=n(74983),g=n(41198),y=n(26576),b=n(75334),w=n(35509),Z=n(24250),x=n(99609),C=n(1187),_=n(27901),S=n(86596),k=n(72883),E=n(82347),T=n(7466),R=n(72093),D=n(84570),I=n(7225),B=function(e){var t=new Set(D.Z),n=new Map,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=(0,h._)(a.value,3),s=c[0],u=c[1],d=c[2];if(!t.has(s))throw Error("Symbol not supported by LSP client. Please add to the supported symbol icons array");n.set(s,[u,null!=d?d:R.TV.foregroundDefault])}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n}([[I.SymbolKind.Array,_.Z],[I.SymbolKind.Boolean,T.Z],[I.SymbolKind.Class,m.Z,R.TV.yellowDefault],[I.SymbolKind.Constant,v.Z,R.TV.blueStronger],[I.SymbolKind.Constructor,w.Z,R.TV.blurpleDefault],[I.SymbolKind.Enum,y.Z,R.TV.orangeDefault],[I.SymbolKind.EnumMember,E.Z,R.TV.blueStronger],[I.SymbolKind.Event,p.Z],[I.SymbolKind.Field,k.Z],[I.SymbolKind.File,b.Z],[I.SymbolKind.Function,w.Z,R.TV.blurpleStronger],[I.SymbolKind.Interface,Z.Z,R.TV.blueStronger],[I.SymbolKind.Key,x.Z],[I.SymbolKind.Method,w.Z,R.TV.blurpleDefault],[I.SymbolKind.Module,S.Z,R.TV.purpleDefault],[I.SymbolKind.Namespace,g.Z],[I.SymbolKind.Object,T.Z,R.TV.blueDimmer],[I.SymbolKind.Operator,T.Z],[I.SymbolKind.Package,S.Z,R.TV.purpleDefault],[I.SymbolKind.Property,k.Z],[I.SymbolKind.String,C.Z],[I.SymbolKind.Struct,g.Z],[I.SymbolKind.TypeParameter,E.Z],[I.SymbolKind.Variable,E.Z,R.TV.blueStronger]]);function G(e){var t,n=e.kind,r=(0,h._)(null!==(t=B.get(n))&&void 0!==t?t:[T.Z,R.TV.foregroundDefault],2),i=r[0],o=r[1];return(0,a.tZ)(i,{color:o,size:16})}var A=n(60305),P=n(13033),L=n(70501),N=n(77450),O=n(19068),U=n(94778),M=n(50959),X=n(74774),F=n(9155),W=n(93507),H=(0,N.iv)([O.gU.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}]),V={button:(0,N.iv)([R.l0.reset.button,R.l0.p(2),R.l0.rowWithGap(4),R.l0.align.center,H]),text:(0,N.iv)({fontSize:R.TV.fontSizeSmall})},z={opacity:1};function j(e){var t=e.icon,n=e.text,o=e.innerRef,l=e.ariaProps,c=e.active,s=(0,X.U)(l,o).buttonProps,u=(0,F.X)({}),d=u.hoverProps,f=u.isHovered;return(0,a.BX)(U.G,(0,i._)((0,r._)({tag:"button",css:V.button,style:f||c?z:void 0,innerRef:o},(0,W.d)(s,d)),{children:[t?(0,M.cloneElement)(t,{size:16}):null,(0,a.tZ)(U.G,{css:V.text,children:n})]}))}var q={root:(0,N.iv)([R.l0.p(4),R.l0.rowWithGap(4),R.l0.align.center]),text:(0,N.iv)([R.l0.truncate,R.l0.flex.growAndShrink(1),{fontSize:R.TV.fontSizeDefault}])};function J(e){return(0,a.BX)(U.G,{css:[q.root],children:[e.icon?(0,M.cloneElement)(e.icon,{size:16}):null,(0,a.tZ)(U.G,{css:q.text,children:e.text})]})}var Y=n(63257),$=n(44840),K=n(32843),Q=n(58739),ee=(0,N.iv)([R.l0.p(4)]);function et(e){var t=e.items,n=e.children,o=e.menuProps,l=e.selectedKeys,c=e.onAction,s=(0,$.D)({items:t,children:n,selectedKeys:l,selectionMode:"single"}),u=(0,M.useRef)(null),d=(0,K.H)((0,r._)({items:t,onAction:c},o),s,u);return(0,a.tZ)(U.G,(0,i._)((0,r._)({},d.menuProps),{innerRef:u,css:ee,children:(0,Y._)(s.collection).map(function(e){return(0,a.tZ)(ei,{item:e,state:s},e.key)})}))}var en={root:(0,N.iv)([R.l0.flex.row,R.l0.align.center,R.l0.position.relative,H]),selected:(0,N.iv)([{opacity:1,backgroundColor:O.vb.interactiveBackground}])},er={opacity:1};function ei(e){var t=e.item,n=e.state,o=(0,M.useRef)(null),l=(0,Q.i)({key:t.key},n,o),c=l.menuItemProps,s=l.isSelected,u=(0,F.X)({}),d=u.hoverProps,f=u.isHovered;return(0,a.tZ)(U.G,(0,i._)((0,r._)({innerRef:o,css:[en.root,s&&en.selected],style:f||s?er:void 0},(0,W.d)(c,d)),{children:t.rendered}))}var eo=n(97133),ea=n(64479),el=n(78090),ec=n(29524),es=n(78834),eu={underlay:(0,N.iv)([R.l0.coverContainer,R.l0.position.fixed]),surface:(0,N.iv)([R.l0.borderRadius(8),{boxShadow:R.TV.shadow2,border:"1px solid",borderColor:R.TV.backgroundHighest}])};function ed(e){var t=e.state,n=e.triggerRef,o=e.placement,l=e.children,c=(0,h._)((0,eo.Z)(),2),s=c[0],u=c[1],d=(0,el.S)({placement:o,triggerRef:n,popoverRef:s,offset:8},t),f=d.popoverProps,p=d.underlayProps;return(0,a.BX)(ec.aV,{children:[(0,a.tZ)(U.G,(0,i._)((0,r._)({},p),{css:eu.underlay})),(0,a.BX)(ea.Tg,(0,i._)((0,r._)({elevated:!0,css:eu.surface,innerRef:u},f),{children:[(0,a.tZ)(es.U,{onDismiss:t.close}),l,(0,a.tZ)(es.U,{onDismiss:t.close})]}))]})}var ef=n(19308);function eh(e){return CSS.escape(e.name)}function ep(e){var t=e.selectedSymbol,n=e.symbols,r=e.moveCursor,i=e.icon,o=e.text,l=(0,f.W)({onOpenChange:function(e){e&&(0,A.j)(A.U3.CODE_NAVIGATION_USED,{action:"opened"})}}),c=(0,M.useRef)(null),s=(0,ef.u)({},l,c),u=s.menuTriggerProps,d=s.menuProps,h=t?new Set([t.name]):void 0;return(0,a.BX)(a.HY,{children:[(0,a.tZ)(j,{text:o,icon:i,innerRef:c,ariaProps:u,active:l.isOpen}),l.isOpen?(0,a.tZ)(ed,{triggerRef:c,state:l,placement:"bottom left",children:(0,a.tZ)(et,{menuProps:d,items:n,selectedKeys:h,onAction:function(e){var t=n.find(function(t){return eh(t)===e});t&&(r(t.selectionRange.start),(0,A.j)(A.U3.CODE_NAVIGATION_USED,{action:"jumped"}))},children:function(e){return(0,a.tZ)(P.ck,{children:(0,a.tZ)(J,{icon:(0,a.tZ)(G,{kind:e.kind}),text:e.name})},eh(e))}})}):null]})}var em=M.memo(function(e){var t=e.symbols,n=e.symbolsPath,r=e.moveCursor,i=n.length?n[n.length-1]:null,o=i?i.children:t;return(0,a.BX)(a.HY,{children:[n.map(function(e,i){var o=0===i?t:n[i-1].children;return o?(0,a.BX)(M.Fragment,{children:[(0,a.tZ)(L.Z,{size:12}),(0,a.tZ)(ep,{symbols:o,icon:(0,a.tZ)(G,{kind:e.kind}),text:e.name,selectedSymbol:e,moveCursor:r})]},eh(e)):null}),(null==o?void 0:o.length)?(0,a.BX)(a.HY,{children:[(0,a.tZ)(L.Z,{size:12}),(0,a.tZ)(ep,{symbols:o,text:"...",moveCursor:r})]}):null]})}),ev=(0,M.memo)(function(e){var t,n=e.view,r=(0,M.useCallback)(function(e){null==n||n.dispatch({scrollIntoView:!0,selection:c.jT.cursor((0,d.RL)(n.state.doc,e))}),null==n||n.focus()},[n]),i=(0,M.useDeferredValue)({symbols:(0,u.IK)(n,s.AU),symbolsPath:(0,u.IK)(n,s.qU)});return(null===(t=i.symbols)||void 0===t?void 0:t.length)?(0,a.tZ)(em,{symbols:i.symbols,symbolsPath:i.symbolsPath||[],moveCursor:r}):null}),eg=n(49224),ey=n(72452),eb=n(65059),ew=n(66548),eZ=n(29318),ex=n(63416),eC=n(36559),e_=n(33675),eS=n(37833),ek=(0,M.memo)(function(e){var t=e.path,n=e.performPaneOperation,r=(0,e_.uN)(),i=(0,M.useCallback)(function(e){n({operation:"open",pane:(0,ex.$E)(e)})},[n]);return(0,a.BX)(ex.h4,{children:[(0,a.tZ)(ex.Qc,{children:(0,a.tZ)(eS.tr,{path:t,onFileClick:i,children:(0,a.tZ)(ev,{view:r})})}),(0,a.tZ)(ex.LI,{children:(0,a.tZ)(eT,{path:t,performPaneOperation:n})})]})}),eE=(0,eg.X)({button:[R.l0.reset.button,R.l0.p(2),R.l0.height(22),R.l0.rowWithGap(4),R.l0.align.center,O.gU.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}],text:[{fontSize:R.TV.fontSizeSmall}]});function eT(e){return(0,a.BX)(a.HY,{children:[(0,a.tZ)(eR,(0,r._)({},e)),(0,a.tZ)(eD,(0,r._)({},e)),(0,a.tZ)(eI,(0,r._)({},e))]})}function eR(e){var t=e.path,n=(0,e_.uN)(),r=(0,u.IK)(n,l.Gz);return(0,u.IK)(n,l.SD)&&n?(0,a.tZ)(eB,{dataCy:"ws-format-btn",altText:"Format "+(0,eC.UO)(t),buttonText:"Format",disabled:null!=r?r:void 0,"aria-disabled":!!r||void 0,icon:r?(0,a.tZ)(eZ.Z,{}):(0,a.tZ)(eb.Z,{}),onClick:function(){r||(0,l.z1)(n)}}):null}function eD(e){var t=e.path,n=e.performPaneOperation;return(0,eC.gK)(t)?(0,a.tZ)(eB,{altText:"Preview "+(0,eC.UO)(t),buttonText:"Preview",icon:(0,a.tZ)(ey.Z,{}),onClick:function(){n({operation:"replace",pane:{type:"markdown",data:{path:t}}})}}):null}function eI(e){var t=e.path,n=e.performPaneOperation;return(0,eC.B4)(t)?(0,a.tZ)(eB,{altText:"Preview "+(0,eC.UO)(t),buttonText:"Preview",icon:(0,a.tZ)(ey.Z,{}),onClick:function(){n({operation:"replace",pane:{type:"media",data:{path:t}}})}}):null}function eB(e){var t=e.altText,n=e.buttonText,l=e.icon,c=(0,o._)(e,["altText","buttonText","icon"]);return(0,a.BX)(U.G,(0,i._)((0,r._)({},c),{alt:t,tag:"button",css:eE.button,children:[(0,a.tZ)(ew.Pd.Provider,{value:{size:12},children:l}),(0,a.tZ)(U.G,{css:eE.text,children:n})]}))}},40042:function(e,t,n){n.d(t,{pZ:function(){return eA},aT:function(){return eG},jg:function(){return eT},fD:function(){return eR},Ls:function(){return eE}});var r=n(27387),i=n(63257),o=n(96583),a=n(4216),l=n(80403),c=n(3030),s=n(7849),u=n(24655),d=n(32471),f=n(5283),h=n(33566);function p(e){var t=e.selection,n=e.doc,r=t.ranges.map(function(e){return e.extend(n.lineAt(e.from).from,n.lineAt(e.to).to)});return l.jT.create(r)}var m=n(92370),v=n(32661),g=n(23508),y=n(34780),b=n(42433),w=n(86486),Z=n(48126),x=n(60941),C=n(118),_=n(59786),S=n(85733),k=n(75993),E=n(36556),T=n(60305),R=n(49224),D=n(80274),I=n(16165),B=n(54501),G=n(55524),A=n(59947),P=n(20795),L=n(16469),N=n(84126),O=n(29911),U=n(76575),M=n(59249),X=n(75334),F=n(65059),W=n(72164),H=n(16764),V=n(56679),z=n(82314),j=n(17867),q=n(66958),J=n(6981),Y=n(90493),$=n(9975),K=n(4461),Q=n(72093),ee=n(48594),et=n(33530),en=n(29121),er=n(81199),ei=n(4590),eo=n(71358),ea=n(12904),el=n(47664),ec=n(37058),es=n(11407),eu=n(50745),ed=n(50959),ef=n(36559),eh=n(89748),ep=n(73590),em=n(34635),ev=n(7225),eg=n(36101),ey=n(95563),eb=n(27894),ew=n(85234),eZ=n.n(ew),ex=n(30341);function eC(e,t,n){var r=e.selection.main,i=e.sliceDoc(r.from,r.to),o=(0,ef.r6)(t);return{code:i,filePath:t,fileVersion:n,fileContent:e.doc.toString(),range:{indexFrom:r.from,indexTo:r.to,lineFrom:e.doc.lineAt(r.from).number,lineTo:e.doc.lineAt(r.to).number},language:o,referenceType:ey.MD.INLINE}}var e_=(0,R.X)({ghostwriterIcon:[Q.l0.color.blurpleStronger]});function eS(e){var t=e.label,n=e.icon,r=e.run,i=e.keyboardShortcut,o=e.dataCy;return{match:eh.pl,data:{type:"action",label:t,icon:n,run:r,keyboardShortcut:i,dataCy:o}}}function ek(e){var t=e.view,n=e.mainSelection,r=e.codeReference;t.dispatch({selection:{anchor:n.to},effects:[f.Q.of({id:eZ()(),codeReference:r,type:"ghostwriterKillswitch"}),c.tk.scrollIntoView(n.to,{y:"center"})]})}function eE(e){var t=e.path,n=(0,er.Z)().fs,r=(0,_.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,ed.useCallback)(function(e,i){var o=e.state,a=o.doc,s=o.selection,u=o.lineBreak,d=a.lineAt(s.main.head);d.length&&e.dispatch({changes:{from:d.to,insert:u},selection:l.jT.cursor(d.to+1)});var h=n.getOTVersion(t),p=eC(e.state,t,h);if((0,T.j)(T.U3.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"generate",source:i}),r){ek({view:e,mainSelection:e.state.selection.main,codeReference:p});return}var m=e.state.selection.main.to;e.dispatch({selection:{anchor:m},effects:[f.Q.of({id:eZ()(),codeReference:p,type:"generateCode",source:i}),c.tk.scrollIntoView(m,{y:"center"})]})},[t,n,r])}function eT(e){var t=e.path,n=(0,er.Z)().fs,r=(0,_.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,ed.useCallback)(function(e,i){e.dispatch({selection:p(e.state)});var o=n.getOTVersion(t),a=eC(e.state,t,o);if(r){ek({view:e,mainSelection:e.state.selection.main,codeReference:a});return}(0,T.j)(T.U3.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"modify",source:i});var l=e.state.selection.main.to;e.dispatch({selection:{anchor:l},effects:[f.Q.of({id:eZ()(),type:"transformCode",codeReference:a,source:i}),c.tk.scrollIntoView(l,{y:"center"})]})},[t,n,r])}function eR(e){var t=e.path,n=(0,er.Z)().fs,r=(0,_.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,ed.useCallback)(function(e,i){e.dispatch({selection:p(e.state)});var o=n.getOTVersion(t),a=eC(e.state,t,o);if((0,T.j)(T.U3.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"explain",source:i}),r){ek({view:e,mainSelection:e.state.selection.main,codeReference:a});return}var l=e.state.selection.main.to;e.dispatch({selection:{anchor:l},effects:[f.Q.of({id:eZ()(),codeReference:a,type:"explainCode",source:i}),c.tk.scrollIntoView(l,{y:"center"})]})},[n,t,r])}var eD=new x.j(function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)!function(){var e=a.value,r=e.data;if(("context"===r.type||"action"===r.type)&&r.keyboardShortcut){var i=Array.isArray(r.keyboardShortcut)?r.keyboardShortcut.join(" "):r.keyboardShortcut;n.push({run:function(n){if("action"===r.type)return r.run(null),!0;var i=n.state.selection.main.head;return"context"!==r.type||r.label!==eI||n.state.wordAt(i)?t(e):(0,w.J)(n,{message:"You cannot rename this element",offset:i}),!0},key:i,preventDefault:!0})}}()}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return c.$f.of(n)}),eI="Rename all occurrences",eB=function(){var e=(0,ec.gf)("editor.action.saveFile");return(0,ed.useCallback)(function(t){var n=[];return n.push(eS({label:"Save file",icon:(0,a.tZ)(K.Z,{}),keyboardShortcut:e,run:function(){(0,eb.Q)(t)}})),n},[e])};function eG(e){var t,n,l,c,f,p,w,x,T,R,K,Q,ef,eg,ey,eb,ew,eZ,eC=e.path,ek=e.view,eG=e.onCommand,eA=(t=eE({path:eC}),n=eT({path:eC}),l=eR({path:eC}),c=(0,ec.gf)(ep.x.id),(0,ed.useCallback)(function(e){var r=[],i=!e.state.selection.main.empty;return t&&!i&&r.push(eS({label:"Generate with AI",icon:(0,a.tZ)(V.Z,{css:e_.ghostwriterIcon}),keyboardShortcut:c,run:function(){t(e,"action_menu")},dataCy:"context-menu-GenerateCode"})),i&&(r.push(eS({label:"Explain with AI",icon:(0,a.tZ)(H.Z,{css:e_.ghostwriterIcon}),dataCy:"context-menu-ExplainCode",run:function(){l(e,"action_menu")}})),r.push(eS({label:"Modify with AI",icon:(0,a.tZ)(z.Z,{css:e_.ghostwriterIcon}),keyboardShortcut:c,dataCy:"context-menu-TransformCode",run:function(){n(e,"action_menu")}}))),r},[t,n,l,c])),eP=(f=(0,ec.gf)("editor.action.startThread"),(0,ed.useCallback)(function(e){var t=[];return t.push(eS({label:"Start thread",icon:(0,a.tZ)(G.Z,{}),keyboardShortcut:f,run:function(){(0,ei.h$)(e)}})),t},[f])),eL=(0,ed.useCallback)(function(e){var t=[eS({label:"Copy link to position",icon:(0,a.tZ)(q.Z,{}),run:function(){var t=(0,C.sg)(e.state.doc,e.state.selection.main.head),n=t.line,r=t.character,i=(0,eu.dr)({path:eC,line:n+1,col:r});(0,k.Z)(i)}}),eS({label:"Copy",icon:(0,a.tZ)(N.Z,{}),keyboardShortcut:(0,es.l2)({cmdOrCtrl:!0,key:"c"}),run:function(){var t=(0,h.I)(e.state).text;(0,k.Z)(t)}}),eS({label:"Cut",icon:(0,a.tZ)(O.Z,{}),keyboardShortcut:(0,es.l2)({cmdOrCtrl:!0,key:"x"}),run:function(){var t=(0,h.I)(e.state),n=t.text,r=t.ranges;(0,k.Z)(n),e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})}})];return window.navigator.clipboard&&"readText"in window.navigator.clipboard&&t.push(eS({label:"Paste",icon:(0,a.tZ)(P.Z,{}),keyboardShortcut:(0,es.l2)({cmdOrCtrl:!0,key:"v"}),run:function(){return(0,r._)(function(){var t,n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:t="",r.label=1;case 1:return r.trys.push([1,3,,4]),[4,window.navigator.clipboard.readText()];case 2:return t=r.sent(),[3,4];case 3:return n=r.sent(),E.kg.error("CodeMirror context menu paste failed",{message:n.message}),[2];case 4:return(0,Z.l)({filePath:eC,view:e,clipboardText:t}),[2]}})})()}})),t},[eC]),eN=(p=(0,et.Z)(eC),w=(0,en.Z)(p),x=(0,ed.useRef)(null),T=(0,er.Z)().fs,R=(0,_.P5)({controlName:"flag-clui-ctx-menu-rename-all",logFlagToAnalytics:!1}),K=(0,ec.gf)("editor.action.goToDefinition"),Q=(0,ec.gf)("editor.action.goToTypeDefinition"),ef=(0,ec.gf)("editor.action.goToImplementation"),eg=(0,ec.gf)("editor.action.goToReferences"),ey=(0,ec.gf)("editor.selection.allOccurrences"),eb=(0,ec.gf)("editor.action.formatDocument"),ew=(0,ec.gf)("editor.action.codeActions"),(0,ed.useCallback)(function(e){var t=[],n=w&&p.length;n&&w.isFindDefinitionSupported&&t.push(eS({label:"Go to definition",icon:(0,a.tZ)(M.Z,{}),dataCy:"context-menu-JumpToDefinition",run:function(t){(0,g.wK)(e,t)},keyboardShortcut:K})),n&&w.isFindTypeDefinitionSupported&&t.push(eS({label:"Go to type definition",icon:(0,a.tZ)(D.Z,{}),run:function(){(0,g.OM)(e)},keyboardShortcut:Q})),n&&w.isFindImplementationSupported&&t.push(eS({label:"Go to implementation",icon:(0,a.tZ)($.Z,{}),run:function(){(0,g.Zc)(e)},keyboardShortcut:ef})),n&&(w.isFindDefinitionSupported||w.isFindReferencesSupported)&&t.push(eS({label:"Show references",icon:(0,a.tZ)(I.Z,{}),keyboardShortcut:eg,run:function(){(0,y.Z)(e)}})),t.push(eS({label:"Find in Repl",icon:(0,a.tZ)(Y.Z,{}),run:function(){var t=(0,h.I)(e.state).text;(0,ex.ZM)(e.state,{pane:{type:"searchReplace",data:{initialQuery:t}}})}})),n&&w.isRenameSupported&&(R?t.push(eS({label:eI,icon:(0,a.tZ)(U.Z,{}),keyboardShortcut:"F2",run:function(){(0,b.Z)(e)}})):t.push({match:eh.pl,data:{type:"context",label:eI,icon:(0,a.tZ)(U.Z,{}),keyboardShortcut:"F2"},commands:function(t){var n=t.active,i=t.search;return n&&i?[{match:function(){return{score:1}},data:{type:"action",label:"Rename",icon:(0,a.tZ)(A.Z,{}),keyboardShortcut:"Enter",run:function(){return(0,r._)(function(){var t,n,r,a;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(!(t=p.find(function(e){return(0,em.Z)(e).isRenameSupported})))return[2,{type:"error",message:"Rename is not supported"}];if(n=e.state.selection.main.head,!e.state.wordAt(n))return[2,{type:"error",message:"You cannot rename this element"}];return x.current&&t.notify.cancelRequest(x.current),x.current=t.generateId(),[4,t.request.rename(eC,(0,C.sg)(e.state.doc,n),i,{id:x.current,tap:function(t){return(0,m.SC)(e,t)}})];case 1:if((r=o.sent()).cancelled)return[2];if("error"in r)return[2,{type:"error",message:"Something went wrong renaming ".concat(r.error.message)}];if(!(a=r.result))return[2];return(0,ee.w)({edit:a,fs:T,client:t}),[2]}})})()}}}]:[]}})),e.state.facet(u.SD)&&t.push(eS({label:"Format document",icon:(0,a.tZ)(F.Z,{}),keyboardShortcut:eb,run:function(){(0,u.z1)(e)}})),!e.state.selection.main.empty&&e.state.facet(d.R2)&&t.push(eS({label:"Format selection",icon:(0,a.tZ)(F.Z,{}),run:function(){(0,u.uy)(e)}})),t.push(eS({label:"Select all occurrences",icon:(0,a.tZ)(L.Z,{}),keyboardShortcut:ey,run:function(){(0,ei.SK)(e)}}));var i=void 0!==e.state.field(s.K0,!1);return n&&i&&t.push(eS({label:"Toggle breakpoint",icon:(0,a.tZ)(B.Z,{}),run:function(){(0,ei.QF)(e)}})),n&&w.isCodeActionsSupported&&(w.isSourceActionsSupported&&t.push(eS({label:"Source actions",icon:(0,a.tZ)(X.Z,{}),run:function(){(0,v.b7)(e,{force:!0,only:[ev.CodeActionKind.Source]})}})),t.push(eS({label:"More actions",icon:(0,a.tZ)(j.Z,{}),keyboardShortcut:ew,run:function(){(0,v.b7)(e,{force:!0})}}))),t},[w,p,ey,K,Q,ef,eg,R,eC,T,eb,ew])),eO=(eZ=(0,ea.s6)(el.Y.EditorContextMenu),(0,ed.useCallback)(function(e){var t=[];return t.push({data:{type:"group",key:"extensions"},commands:(0,r._)(function(){var t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:var i;return t=[{data:{filePath:e.filePath,selection:e.view.state.selection.toJSON()}}],[4,Promise.all(eZ.map((i=(0,r._)(function(e){var n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,e.create({path:t})];case 1:if(!(n=r.sent()))return[2,null];return[2,(0,eo.C)(n,{path:t})]}})}),function(e){return i.apply(this,arguments)})))];case 1:return[2,n.sent().filter(Boolean)]}})})}),t},[eZ])),eU=eB(),eM=(0,_.P5)({controlName:"flag-draft-buffers"}),eX=(0,ed.useMemo)(function(){return ek?eN(ek):[]},[ek,eN]),eF=(0,S.Z)(eG),eW=(0,ed.useCallback)(function(e){eF.current(e)},[eF]),eH=eD.use(eX,eW);return[(0,ed.useCallback)(function(){var e=ek?[{data:{type:"context",label:"AI",icon:(0,a.tZ)(W.Z,{})},commands:function(){return eA(ek)}},{data:{type:"context",label:"Code actions",icon:(0,a.tZ)(j.Z,{})},commands:function(){return eN(ek)}}].concat((0,i._)(eM?[{data:{type:"context",label:"File actions",icon:(0,a.tZ)(X.Z,{})},commands:function(){return eU(ek)}}]:[]),[{data:{type:"context",label:"Social",icon:(0,a.tZ)(G.Z,{})},commands:function(){return eP(ek)}},{data:{type:"context",label:"Clipboard",icon:(0,a.tZ)(P.Z,{})},commands:function(){return eL(ek)}},{data:{type:"context",label:"Extensions",icon:(0,a.tZ)(J.Z,{})},commands:function(){return eO({view:ek,filePath:eC})}}]):[];return{data:{type:"context",label:"Search actions",icon:(0,a.tZ)(Y.Z,{})},commands:function(){return e}}},[ek,eA,eN,eP,eL,eU,eC,eO,eM]),eH]}var eA=new x.j(function(e,t,n){return e?null:[(0,eg.a)(t),c.tk.domEventHandlers({contextmenu:function(e,t){var r=e.clientX,i=e.clientY,o=t.state.selection.main,a=t.posAtCoords({x:r,y:i}),c=t.state.doc.length,s=null===a?c:a;if(s<o.from||s>o.to){var u=l.jT.cursor(s);t.dispatch({selection:u})}return n(e),!0}})]})},32774:function(e,t,n){n.d(t,{u:function(){return ex}});var r,i=n(66626),o=n(4216),a=n(12285),l=n(42516),c=n(80403),s=n(3030),u=n(32682),d=n(60941),f=n(49224),h=n(82230),p=n(72093),m=n(94778),v=n(37058),g=n(81202),y=n.n(g),b=n(49532),w=n(12674),Z=n(73393),x=n(36054),C=(0,f.X)({root:[p.l0.p(16),p.l0.align.center,p.l0.colWithGap(8),{marginTop:"10%",pointerEvents:"none","*":{pointerEvents:"all"}}],button:[p.l0.reset.button,p.l0.rowWithGap(6),p.l0.align.center,p.l0.color.foregroundDimmest,p.l0.cursor.pointer,{fontFamily:p.TV.fontFamilyDefault,"*":{borderColor:p.TV.foregroundDimmest,color:p.TV.foregroundDimmest},":hover *":{borderColor:p.TV.foregroundDefault,color:p.TV.foregroundDefault}}],iconText:[p.l0.rowWithGap(4)]}),_={layer:"cm-empty-state-layer",dom:"cm-empty-state-dom"},S=s.tk.theme((r={},(0,l._)(r,".".concat(_.layer),{width:"100%",height:"100%",pointerEvents:"none",zIndex:"201 !important"}),(0,l._)(r,".".concat(_.dom),{position:"absolute",width:"100%",pointerEvents:"none",display:"flex",justifyContent:"center"}),r)),k=function(){"use strict";function e(t){(0,a._)(this,e),this.options=t}var t=e.prototype;return t.draw=function(){var e=this.options,t=e.ctas,n=e.view,r=e.width,i=(0,w.V)((0,o.tZ)(m.G,{css:C.root,children:t.map(function(e){return(0,o.BX)(m.G,{css:C.button,onClick:function(){return e.onClick(n)},children:[(0,o.BX)(m.G,{css:C.iconText,children:[e.icon,(0,o.tZ)(h.xv,{variant:"small",children:e.text})]}),e.shortcut?(0,o.tZ)(v.bM,{keyCombo:e.shortcut,fontSize:12}):null]},e.text)})}));return i.className=_.dom,i.style.width=r+"px",i.style.visibility=r>240?"visibile":"hidden",i.style.left="0px",i},t.eq=function(e){return y()(e.options,this.options)},e}(),E=new d.j(function(e){var t=function(e){var t;return!(e.doc.length>0||e.field(b.$)||(null===(t=e.field(u.xg,!1))||void 0===t?void 0:t.size)||e.field(x.PQ,!1))},n=c.QQ.define({create:t,update:function(e,n){return t(n.state)}}),r=(0,s.EY)({above:!0,class:_.layer,update:function(e){return(0,Z.aU)(e,n)},markers:function(t){if(!t.state.field(n,!1))return[];var r=t.dom.getBoundingClientRect();return[new k({ctas:e,width:Math.round(t.contentDOM.getBoundingClientRect().right-r.left),view:t})]}});return[S,n,r]}),T=n(60994),R=n(32472),D=n(53557),I=n(38753),B=n(60305),G=n(45271),A=n(56679),P=n(86596),L=n(9975),N=n(77450),O=n(98001),U=n(19068),M=n(60772),X=n(29318),F=n(50959),W=n(41733),H=n(21262),V=n(71440),z=n(58995);function j(){var e=(0,H._)(["\n  query ReplCodeExamples($language: String!) {\n    languageExamples(language: $language) {\n      ... on LanguageExamples {\n        examples {\n          ... on LanguageExample {\n            mainFile\n            name\n            code\n          }\n        }\n      }\n    }\n  }\n"]);return j=function(){return e},e}var q={},J=(0,V.Ps)(j());function Y(e){var t=(0,W._)({},q,e);return z.a(J,t)}var $=m.K.button;function K(e){var t=e.name,n=e.children,r=e.onClick;return(0,o.BX)($,{onClick:function(){return r()},css:[U.gU.nofill,p.l0.p(8),p.l0.focusRing,p.l0.textAlign.left],children:[(0,o.tZ)(h.xv,{variant:"subheadDefault",css:p.l0.pb(16),multiline:!1,children:t}),(0,o.tZ)(m.G,{css:[p.l0.backgroundColor.backgroundDefault,p.l0.p(8),p.l0.borderRadius(8)],children:n})]})}var Q="@media (min-width: ".concat(M.j.tabletMax,"px)"),ee=(0,N.iv)([p.l0.colWithGap(16),(0,l._)({},Q,{width:"calc(50%  - 8px)",flex:"0 0 auto",gap:"16px"})]);function et(e){var t=e.children;return(0,o.tZ)(m.G,{css:[(0,l._)({},Q,[p.l0.rowWithGap(16)])],children:t})}function en(e){var t=e.mainFile,n=e.examples,r=e.onSelect;return(0,o.BX)(m.G,{css:[p.l0.colWithGap(24)],children:[(0,o.tZ)(h.h4,{level:1,variant:"headerDefault",children:"Code examples"}),(0,o.tZ)(h.xv,{children:"Get started with some program examples."}),(0,o.BX)(et,{css:[p.l0.colWithGap(16)],children:[(0,o.tZ)(m.G,{css:ee,children:n.slice(0,(n.length+1)/2).map(function(e){return(0,o.tZ)(K,{name:e.name,onClick:function(){return r(e)},children:(0,o.tZ)(O.Z,{code:e.code,filePath:t,fontSize:12,disableCursorStyling:!0})},e.name)})}),(0,o.tZ)(m.G,{css:ee,children:n.slice((n.length+1)/2).map(function(e){return(0,o.tZ)(K,{name:e.name,onClick:function(){return r(e)},children:(0,o.tZ)(O.Z,{code:e.code,filePath:t,fontSize:12,disableCursorStyling:!0})},e.name)})})]})]})}function er(e){var t=e.filePath,n=e.language,r=e.onSelect,i=Y({variables:{language:n}}),a=i.data,l=i.loading,c=i.error;if(l)return(0,o.tZ)(m.G,{css:[p.l0.colWithGap(0),p.l0.justify.center,p.l0.align.center,p.l0.pt(32),p.l0.pb(32)],children:(0,o.tZ)(X.Z,{})});if(c)return(0,o.tZ)(m.G,{css:[p.l0.colWithGap(0),p.l0.justify.center,p.l0.align.center,p.l0.pt(32),p.l0.pb(32)],children:c.message});var s=(null==a?void 0:a.languageExamples.__typename)==="LanguageExamples"?a.languageExamples.examples:null;return(null==s?void 0:s.length)?(null==s?void 0:s.length)?(0,o.tZ)(en,{mainFile:t,examples:s,onSelect:r}):(0,o.tZ)(m.G,{css:[p.l0.colWithGap(0),p.l0.justify.center,p.l0.align.center,p.l0.pt(32),p.l0.pb(32)],children:(0,o.BX)(h.xv,{children:["Sorry, this language doesn’t have any examples. Want to add some? Contact us at ",(0,o.tZ)("a",{href:"mailto:support@replit.com",children:"support@replit.com"}),"!"]})}):null}var ei=n(73590),eo=n(64546),ea={python:'from replit.ai.modelfarm import ChatExample, ChatMessage, ChatModel, ChatSession\n\nmodel = ChatModel("chat-bison")\nresponse = model.chat([\n  ChatSession(\n    context="You are philosophy bot.",\n    examples=[\n      ChatExample(\n        input=ChatMessage(content="1 + 1"),\n        output=ChatMessage(content="2")\n      )\n    ],\n    messages=[\n      ChatMessage(author="USER", content="How much wood can a woodchuck chuck?"),\n    ],\n  )\n], temperature=0.2)\n\nprint(response.responses[0].candidates[0].message.content)',typescript:"import * as replitai from '@replit/ai-modelfarm';\n\nconst result = await replitai.chat({\n  model: 'chat-bison',\n  temperature: 0.5,\n  messages: [{ author: 'user', content: 'how are you?' }],\n});\n\nconsole.log(result);"},el=n(85438),ec=n(3112);function es(){var e=(0,H._)(["\n  query EditorEmptyStateCurrentUser {\n    currentUser {\n      id\n      userSubscriptionType\n    }\n  }\n"]);return es=function(){return e},e}var eu={},ed=(0,V.Ps)(es()),ef=n(13621),eh=n(85777),ep=n(36559),em=n(9413),ev=n(30341);function eg(e){var t=e.cta,n=e.version;(0,B.j)(B.U3.EDITOR_EMPTY_STATE_CLICKED,{cta:t,version:n})}var ey=c.Py.define(),eb=c.QQ.define({create:function(){return null},update:function(e,t){var n=e;return(0,R.j)(t,ey,function(e){n=e.value}),n}}),ew=T.t.from(eb,function(e){if(!e)return null;var t=e.language,n=e.filePath;return{key:"examplesModal",node:function(e){var r=function(){e.dispatch({effects:ey.of(null)})};return(0,o.tZ)(G.u,{maxWidth:872,isOpen:!0,onRequestClose:r,children:(0,o.tZ)(eC,{onRequestClose:r,language:t,filePath:n})})}}}),eZ=[eb,ew];function ex(e){var t,n,r,i,a,l,c,s,u,d,f,h,p,m,g,y,b=e.isMobile,w=e.filePath,Z=e.generateCode,x=(0,v.gf)(ei.x.id),C=null!==(g=null===(h=D.$R.from(w))||void 0===h?void 0:h.id)&&void 0!==g?g:null,_=(0,em.v)().isTeamWithAiDisabled,S=Y({variables:{language:C},skip:!C}).data,k=(a=(t={filePath:w,language:C}).filePath,l=t.language,c=(0,I.T3)(),u=((null==(s=(n=(0,W._)({},eu,void 0),z.a(ed,n)).data)?void 0:null===(r=s.currentUser)||void 0===r?void 0:r.userSubscriptionType)===el.HP.Hacker||(null==s?void 0:null===(i=s.currentUser)||void 0===i?void 0:i.userSubscriptionType)===el.HP.HackerPro)&&l&&["python","javascript","typescript","javascriptreact","typescriptreact"].includes(l),d=(0,eo.Z)(a),f=(0,F.useCallback)(function(e){if(l){var t="python"===l?"python":"typescript";(0,B.j)(B.U3.GHOSTWRITER_CHAT_MODELFARM_PLACEHOLDER_CLICKED,{language:t}),(0,ev.ZM)(e.state,{pane:{type:"docs",data:{url:(0,ec.u)(t)}}}),d&&d({code:ea[t],insertAt:0})}},[d,l]),c?null:u?f:null),T=(null!==(y=null==S?void 0:null===(m=S.languageExamples)||void 0===m?void 0:null===(p=m.examples)||void 0===p?void 0:p.length)&&void 0!==y?y:0)>=1,R=(0,F.useMemo)(function(){var e=[];return(0,ep.gK)(w)||_||e.push({icon:(0,o.tZ)(A.Z,{}),text:"Generate Code with AI",shortcut:b?void 0:x,onClick:function(e){eg({cta:"generate",version:"new"}),Z(e,"shortcut")}}),k&&e.push({icon:(0,o.tZ)(P.Z,{}),text:"Build an AI app for free with ModelFarm",onClick:function(e){eg({cta:"modelFarm",version:"new"}),k(e)}}),C&&T&&e.push({icon:(0,o.tZ)(L.Z,{}),text:"Start with a code example",onClick:function(e){eg({cta:"examples",version:"new"}),e.dispatch({effects:ey.of({language:C,filePath:w})})}}),e},[b,x,k,C,T,Z,w,_]);return[E.use(R),eZ]}function eC(e){var t=e.onRequestClose,n=e.language,r=e.filePath,a=(0,eh.e$)(ef.y.Examples),l=(0,eh.e$)(ef.y.Editor),c=(0,i._)((0,F.useState)(!1),2),s=c[0],u=c[1],d=(0,eo.Z)(r),f=(0,F.useRef)(null==a?void 0:a.isActive),h=(0,F.useRef)();h.current=null==a?void 0:a.isActive;var p=(0,F.useRef)(null==a?void 0:a.goto);return(p.current=null==a?void 0:a.goto,(0,F.useEffect)(function(){return function(){var e;h.current&&(null===(e=p.current)||void 0===e||e.call(p,ef.y.Editor))}},[]),(0,F.useEffect)(function(){if((null==l?void 0:l.isActive)&&!f.current){if(!s){u(!0);return}l.goto(ef.y.Examples)}},[l,t,s]),(0,F.useEffect)(function(){if(null==a?void 0:a.isActive){f.current=!0;return}f.current&&t(null)},[t,null==a?void 0:a.isActive]),d)?(0,o.tZ)("div",{ref:null==a?void 0:a.delegateTooltip,children:(0,o.tZ)(er,{filePath:r,language:n,onSelect:function(e){d({code:e.code,insertAt:0}),t({exampleName:e.name})}})}):(0,o.tZ)("div",{children:"Please make sure you have a file open"})}},73590:function(e,t,n){n.d(t,{x:function(){return K},W:function(){return Q}});var r,i=n(4216),o=n(3030),a=n(12285),l=n(42516),c=n(41733),s=n(30509),u=n(80403),d=n(60941),f=n(33298),h=n(77862),p=n(19068),m=n(64479),v=n(82230),g=n(64432),y=n(94778),b=n(49224),w=n(49580),Z=n(72093),x=n(37058),C=n(67883),_=n(81202),S=n.n(_),k=n(50959),E=n(49532),T=n(12674),R=n(32472),D=n(73393),I=n(95571),B=(0,f.$)(["opacity","transform"]),G=B.cssVars,A=B.styleTokens,P=[Z.l0.display.flex,Z.l0.reset.button,Z.l0.cursor.pointer,Z.l0.center,p.gU.nofill,Z.l0.height("100%"),Z.l0.borderRadius(0)],L=[P,Z.l0.width(28),{"& svg":Z.l0.display.block}],N=(0,b.X)({root:[Z.l0.align.stretch,Z.l0.flex.row,Z.l0.borderRadius(6),Z.l0.border({color:Z.TV.outlineDefault}),Z.l0.position.relative,Z.l0.height(30),{opacity:A.opacity,transform:A.transform,transition:"opacity 120ms, transform 120ms","button:first-of-type":{borderTopLeftRadius:6,borderBottomLeftRadius:6},"button:last-of-type":{borderTopRightRadius:6,borderBottomRightRadius:6}}],moreButton:L,button:[P,Z.l0.rowWithGap(4),Z.l0.align.center,Z.l0.pl(4),Z.l0.pr(6),Z.l0.flex.growAndShrink(1),Z.l0.border({direction:"right",color:Z.TV.outlineDefault}),{fontFamily:Z.TV.fontFamilyDefault,"*":{color:Z.TV.foregroundDimmer},":hover *":{color:Z.TV.foregroundDefault},".shortcut":{color:Z.TV.foregroundDimmest},":hover .shortcut":{color:Z.TV.foregroundDimmer}}],iconButton:[L,Z.l0.border({direction:"right",color:Z.TV.outlineDefault})],tooltip:[Z.l0.rowWithGap(2),Z.l0.align.center]}),O=new T.J(function(e){var t,n=e.controls,r=e.verticalPlacement,o=e.onMoreClick,a=(0,k.useRef)(null),u=(0,I.NJ)(),d=(0,C.xx)();(0,k.useEffect)(function(){var e;d(),(0,h.A)(a,(e={},(0,l._)(e,G.opacity,"1"),(0,l._)(e,G.transform,"translateY(calc(".concat("top"===r?1:-1," * ").concat(Z.TV.space4,"))")),e))},[r,d]);var f=(0,k.useRef)((0,C.qm)());return(0,i.BX)(m.Tg,{innerRef:a,elevated:!0,css:N.root,style:(t={},(0,l._)(t,G.opacity,"0"),(0,l._)(t,G.transform,"translateY(calc(".concat("top"===r?1:-1," * ").concat(Z.TV.space16,"))")),t),children:[n.map(function(e){if(f.current){var t=(0,i.BX)(y.G,{css:N.tooltip,children:[(0,i.tZ)(v.xv,{variant:"small",multiline:!1,children:e.text}),e.shortcut?(0,i.tZ)(v.xv,{variant:"small",className:"shortcut",color:"dimmest",children:(0,x.Ih)(e.shortcut,u)}):null]});return(0,i.tZ)(g.u,{tooltip:t,children:function(t,n){return(0,i.tZ)(y.G,(0,s._)((0,c._)({},t),{innerRef:n,css:N.iconButton,onClick:e.onClick,tag:"button",children:e.icon}))}},e.text)}return(0,i.BX)(y.G,{css:N.button,onClick:e.onClick,tag:"button",children:[e.icon,(0,i.tZ)(v.xv,{variant:"small",multiline:!1,children:e.text}),e.shortcut?(0,i.BX)(v.xv,{variant:"small",className:"shortcut",children:["(",(0,x.Ih)(e.shortcut,u),")"]}):null]},e.text)}),o?(0,i.tZ)(y.G,{"aria-label":"More",css:N.moreButton,onClick:function(e){var t=(a.current||e.currentTarget).getBoundingClientRect();o({top:t.top,right:t.right})},tag:"button",children:(0,i.tZ)(w.Z,{size:16})}):null]})}),U={layer:"cm-selection-controls-layer",dom:"cm-selection-controls-dom"},M=o.tk.theme((r={},(0,l._)(r,".".concat(U.layer),{width:"100%"}),(0,l._)(r,".".concat(U.dom),{position:"absolute"}),r)),X=function(){"use strict";function e(t){(0,a._)(this,e),this.options=t}var t=e.prototype;return t.draw=function(){var e=this.options,t=e.controls,n=e.onMoreClick,r=e.top,i=e.align,o=e.verticalPlacement,a=O.create({controls:t,onMoreClick:n,verticalPlacement:o});return a.className=U.dom,a.style.top=r+"px","left"===i.side?(a.style.left=i.value+"px",a.style.right=""):(a.style.right=i.value+"px",a.style.left=""),a.style.pointerEvents="none",setTimeout(function(){a.style.pointerEvents="auto"},200),a},t.eq=function(e){return S()(e.options,this.options)},e}(),F=u.Py.define(),W=u.QQ.define({create:function(){return null},update:function(e,t){var n;return!t.state.selection||(null===(n=t.state.selection)||void 0===n?void 0:n.main.empty)?null:((0,R.j)(t,F,function(t){e=t.value}),e)}}),H=u.QQ.define({create:function(e){return!e.selection.main.empty},update:function(e,t){return!t.state.selection.main.empty}}),V=o.lg.define(function(e){var t=function(){var t=e.state.selection.main;e.dispatch({effects:F.of(t.empty?null:Date.now())})},n=function(e){"Shift"===e.key&&t()},r=function(){document.addEventListener("mouseup",t),document.addEventListener("keyup",n)},i=function(){document.removeEventListener("mouseup",t),document.removeEventListener("keyup",n)};return{update:function(e){(0,D.aU)(e,H)&&(e.state.field(H)?r():i())},destroy:i}}),z=new d.j(function(e){return[M,(0,o.EY)({above:!0,class:U.layer,update:function(e){return(0,D.aU)(e,E.$,W)},markers:function(t){if(!t.hasFocus)return[];var n=t.state.field(W)?t.state.selection.main:null;if(!n||t.state.field(E.$,!1))return[];var r=function(e,t){for(var n=Math.min(t.from,t.to),r=Math.max(t.from,t.to),i=null;n<=r;){var o=e.lineAt(n);n=o.to+1,null!==i&&o.length<i.length||(i=o)}return i}(t.state.doc,n);if(!r)return[];var i=t.coordsAtPos(r.to);if(!i)return[];var o=t.lineBlockAt(Math.min(n.anchor,n.head)),a=t.dom.getBoundingClientRect(),l=t.contentDOM.getBoundingClientRect(),c=o.top+t.documentPadding.top-30,s=l.right-i.left<200?{side:"right",value:a.right-l.right+16}:{side:"left",value:i.left-a.left},u="top";if(c<t.scrollDOM.scrollTop){var d=t.lineBlockAt(n.to);c=d.top+d.height,u="bottom"}return[new X({top:c,align:s,controls:e.controls(t),onMoreClick:e.onMoreClick,verticalPlacement:u})]}}),H,W,V]}),j=n(9413),q=n(16764),J=n(82314),Y=n(11407),$=n(24605),K={id:"editor.generateOrModifyWithAI",name:"AI",description:"Generate or modify selection with AI",default:(0,Y.l2)({cmdOrCtrl:!0,key:"i"})};function Q(e){var t=e.editCode,n=e.explainCode,r=e.generateCode,a=e.onMoreClick,l=(0,j.v)().isTeamWithAiDisabled,c=(0,x.gf)(K.id),s=(0,k.useMemo)(function(){if(!c)return[];var e=Array.isArray(c)?c.join(" "):c;return o.$f.of([{key:e,scope:"editor",run:function(e){return e.state.selection.main.empty?r(e,"shortcut"):t(e,"shortcut"),!0}}])},[c,r,t]),u=(0,k.useMemo)(function(){return{controls:function(e){return l?[]:[{text:"Modify with AI",icon:(0,i.tZ)(J.Z,{size:16,color:$.TV.blurpleStronger}),onClick:function(){return t(e,"highlight")},shortcut:c},{text:"Explain with AI",icon:(0,i.tZ)(q.Z,{size:16,color:$.TV.blurpleStronger}),onClick:function(){return n(e,"highlight")}}]},onMoreClick:a}},[t,n,a,c,l]),d=z.use(u);return(0,k.useMemo)(function(){return[d,s]},[d,s])}},27025:function(e,t,n){n.d(t,{r:function(){return f}});var r,i=n(27387),o=n(96583),a=n(91664),l=n(36559),c=n(73372),s=RegExp("_(?<num>\\d+)$");function u(){return(u=(0,i._)(function(e,t){var n,r,i,a;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return n=(0,l.Il)(t),[4,e.readDir(n||c.Ql)];case 1:if((r=o.sent()).error)return[2,t];return a=(i=function(e){if(r.children.find(function(t){return"FILE"===t.type&&t.filename===e})){var t,n=(0,l.eb)(e),o=(0,l.r6)(e),a=n.match(s);if(null==a?void 0:null===(t=a.groups)||void 0===t?void 0:t.num){var c=Number(a.groups.num);return i("".concat(n.replace(s,""),"_").concat(c+1,".").concat(o))}return i("".concat(n,"_2.").concat(o))}return e})((0,l.UO)(t)),[2,n?n+"/"+a:a]}})})).apply(this,arguments)}var d=n(52399),f=(r=(0,i._)(function(e,t,n){var r,i,c,s,f,h;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return r=encodeURI(e.name),[4,function(e,t){return u.apply(this,arguments)}(t,(i=(0,l.Il)(n))?i+"/"+r:r)];case 1:return c=o.sent(),[4,(0,a.pV)(e)];case 2:return s=o.sent(),[4,t.writeFile(c,d.Z.from(s))];case 3:return o.sent(),f=(0,l.eb)(e.name),h=(0,l.UO)(c),[2,"![".concat(f,"](").concat(h,")")]}})}),function(e,t,n){return r.apply(this,arguments)})},44707:function(e,t,n){n.d(t,{Mp:function(){return l},ac:function(){return a},ev:function(){return o}});var r=n(77450),i=n(72093),o=(0,r.iv)({position:"relative",overflowY:"auto",width:"100%",height:"100%",zIndex:3}),a=(0,r.iv)({position:"relative",overflowY:"auto",width:"100%",height:"100%",fontSize:"14px",backgroundColor:i.TV.backgroundDefault}),l=(0,r.iv)({display:"flex",alignItems:"stretch",width:"100%",height:"100%","& > .cm-editor":{flex:"1 1 auto",width:"100%"}})},7360:function(e,t,n){n.d(t,{i:function(){return x},w:function(){return b}});var r=n(27387),i=n(66626),o=n(63257),a=n(96583),l=n(4216),c=n(43182),s=n(16923),u=n(82230),d=n(94778),f=n(75334),h=n(87128),p=n(72093),m=n(89748),v=n(52399),g=n(5357),y=n(74524);function b(e){return w.apply(this,arguments)}function w(){return(w=(0,r._)(function(e){var t,n,r,i;return(0,a.Jh)(this,function(o){switch(o.label){case 0:if(t=e.search,n=e.paths,r=e.run,i=e.description,!t)return[2,n.map(function(e){return{data:{type:"action",label:e,icon:(0,l.tZ)(s.Z,{path:e}),description:i,run:function(){return r(e)}},match:function(){return{score:1,render:(0,g.xy)({path:e,description:i})}}}})];return[4,(0,g.Rz)(t,n)];case 1:return[2,o.sent().map(function(e){var t=e.path,n=e.score,o=e.ranges;return{data:{type:"action",label:t,icon:(0,l.tZ)(s.Z,{path:t}),run:function(){return r(t)}},match:function(){return{score:n,render:(0,g.xy)({path:t,ranges:o,description:i})}}}})]}})})).apply(this,arguments)}function Z(){return(0,l.BX)(d.G,{css:[p.l0.rowWithGap(8)],children:[(0,l.tZ)(h.Z,{}),(0,l.tZ)(u.xv,{color:"dimmest",multiline:!1,children:"Something went wrong searching your Repl's files. Please try again."})]})}function x(e){var t;return(0,m.fA)({type:"context",label:"Files",description:"Find a file",icon:(0,l.tZ)(f.Z,{}),keyboardShortcut:e.keyboardShortcut?e.keyboardShortcut:void 0},{match:(0,m.r0)({defaultScore:y.L.findOrCreateFile}),commands:(t=(0,r._)(function(t){var n,u,d,f,p,m,g,y,w,x,C,_,S,k,E,T,R,D,I,B;return(0,a.Jh)(this,function(G){switch(G.label){case 0:if(n=e.fs,u=e.shouldHideFile,!t.search&&(!t.active||e.lazyLoad))return[2,[]];return[4,Promise.resolve(e.getRecentFiles())];case 1:if(d=G.sent(),f=[],!(t.search||t.active))return[3,3];return[4,n.listFiles()];case 2:if((p=G.sent()).error)return c.Tb(Error("Find or create file returned an error"),{extra:{message:p.error}}),[2,[{data:{type:"error",label:p.error,icon:(0,l.tZ)(h.Z,{})},match:function(){return{score:1,render:{content:(0,l.tZ)(Z,{})}}}}]];if(!p.files)throw Error("Expected files");m=!0,g=!1,y=void 0;try{for(w=p.files[Symbol.iterator]();!(m=(x=w.next()).done);m=!0)C=x.value,u(C)||d.includes(C)||f.push(C)}catch(e){g=!0,y=e}finally{try{m||null==w.return||w.return()}finally{if(g)throw y}}G.label=3;case 3:return _=[],[4,Promise.all([b({search:t.search,paths:d,description:"Recently opened",run:function(t){e.openFile({path:t})}}),b({search:t.search,paths:f,run:function(t){e.openFile({path:t})}})])];case 4:if(k=(S=i._.apply(void 0,[G.sent(),2]))[0],E=S[1],!e.getCurrentlyOpenFilePanesCommands)return[3,6];return[4,e.getCurrentlyOpenFilePanesCommands({search:t.search})];case 5:R=G.sent(),(T=_).push.apply(T,(0,o._)(R)),G.label=6;case 6:return k.length&&(D=_).push.apply(D,(0,o._)(k)),E.length&&(I=_).push.apply(I,(0,o._)(E)),0===E.length&&0===k.length&&t.active&&(B=t.search,_.push({data:{label:B,description:"Create a new file",icon:(0,l.tZ)(s.Z,{path:B}),type:"action",run:(0,r._)(function(){return(0,a.Jh)(this,function(t){switch(t.label){case 0:return[4,n.writeFile(B,v.Z.from(""))];case 1:if(t.sent().error)return[2,{type:"error",message:'Could not create "'+B+'"'}];return e.openFile({path:B}),[2]}})})},match:function(){return{score:1}}})),[2,_]}})}),function(e){return t.apply(this,arguments)})})}},23197:function(e,t,n){n.d(t,{F:function(){return E},q:function(){return k}});var r=n(27387),i=n(66626),o=n(96583),a=n(4216),l=n(43182),c=n(3440),s=n(16923),u=n(82230),d=n(94778),f=n(49224),h=n(90493),p=n(87128),m=n(72093),v=n(89748),g=n(11407),y=n(68302),b=n(74524),w=n(4683),Z=(0,f.X)({root:[m.l0.colWithGap(4),m.l0.align.start,m.l0.flex.growAndShrink(1),m.l0.p(8)],header:[m.l0.rowWithGap(4),m.l0.align.center],singleLine:[{whiteSpace:"nowrap",fontFamily:m.TV.fontFamilyCode},m.l0.truncate,m.l0.color.foregroundDimmest]});function x(e){var t=e.path,n=e.line;return(0,a.BX)(d.G,{css:Z.root,children:[(0,a.BX)(d.G,{css:Z.header,children:[(0,a.tZ)(s.Z,{path:t,size:12}),(0,a.BX)(u.xv,{variant:"small",color:"dimmest",multiline:!1,children:[t.replace(/^\.\//,""),":",n.lineNumber]})]}),(0,a.tZ)(d.G,{css:Z.singleLine,children:(0,a.tZ)(c.xK,{source:n.content,matches:n.matches})})]})}function C(){return(0,a.BX)(d.G,{css:[m.l0.px(8),m.l0.rowWithGap(8),m.l0.align.center],children:[(0,a.tZ)(p.Z,{}),(0,a.tZ)(u.xv,{color:"dimmest",multiline:!1,children:"Something went wrong searching your Repl's contents. Please try again."})]})}function _(){return(0,a.BX)(d.G,{css:[m.l0.rowWithGap(8),m.l0.p(8),m.l0.align.center],children:[(0,a.tZ)(p.Z,{}),(0,a.tZ)(u.xv,{color:"dimmest",multiline:!1,children:"Displaying only part of the results, try being more specific with your search."})]})}function S(){return(0,a.tZ)(d.G,{css:[m.l0.rowWithGap(8),m.l0.p(8),m.l0.align.center],children:(0,a.tZ)(u.xv,{color:"dimmest",multiline:!1,children:"Nothing came up searching your Repl's content."})})}var k=(0,g.l2)({cmdOrCtrl:!0,shift:!0,key:"f"});function E(e){var t,n,c=(0,y.e)({container:e.container});return(0,v.fA)({type:"context",description:"Search through your files",label:"Search",icon:(0,a.tZ)(h.Z,{}),keyboardShortcut:e.keyboardShortcut?k:void 0},{match:(0,v.r0)({defaultScore:b.L.searchFileContents}),commands:(t=(0,r._)(function(t){var r,u,f,h,m,v,g,y,Z,k,E,T;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(!t.search||!t.active&&e.activeOnly)return[2,[]];return n=r=Math.random(),[4,c({query:t.search})];case 1:if(f=(u=o.sent()).results,h=u.error,m=u.isPartialResult,r!==n)return[2,[]];if(null!==h){if(!t.active)return[2,[]];return l.Tb(Error("Search file contents returned an error"),{extra:{message:h}}),[2,[{data:{type:"error",label:"error",icon:(0,a.tZ)(p.Z,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(C,{})}}}}]]}v=[],g=!0,y=!1,Z=void 0;try{for(k=function(){var n=(0,i._)(T.value,2),r=n[0];n[1].forEach(function(n){var i=n.matches[0].column;v.push({match:function(){var e=(0,w.jy)(t.search,n.content,{filterLowMatchScores:!0});return{score:Math.floor(((null==e?void 0:e.score)||1)*b.r.fileContentsSearch),render:{height:60,content:(0,a.tZ)(x,{path:r,line:n})}}},data:{type:"action",label:r,icon:(0,a.tZ)(s.Z,{path:r}),key:[r,n.lineNumber,i].join(":"),run:function(){e.openFile({path:r,line:n.lineNumber,col:i})}}})})},E=Object.entries(f)[Symbol.iterator]();!(g=(T=E.next()).done);g=!0)k()}catch(e){y=!0,Z=e}finally{try{g||null==E.return||E.return()}finally{if(y)throw Z}}if(0===v.length&&t.active)return[2,[{data:{type:"output",label:"",icon:(0,a.tZ)(d.G,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(S,{})}}}}]];if(t.active){if(0===v.length)return[2,[{data:{type:"output",label:"",icon:(0,a.tZ)(d.G,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(S,{})}}}}]];m&&v.push({data:{type:"error",label:"error",icon:(0,a.tZ)(p.Z,{})},match:function(){return{score:1/0,render:{content:(0,a.tZ)(_,{})}}}})}return[2,v]}})}),function(e){return t.apply(this,arguments)})})}},17074:function(e,t,n){n.d(t,{Z:function(){return el}});var r,i,o=n(27387),a=n(41733),l=n(66626),c=n(96583),s=n(4216),u=n(50959),d=n(29609),f=n(15235),h=n(18060),p=n(19068),m=n(82230),v=n(94778),g=n(87128),y=n(72093),b=n(36559);(r=i||(i={})).Unknown="UNKNOWN",r.Npm="NPM",r.Django="DJANGO",r.Flask="FLASK",r.FastAPI="FASTAPI",r.Pyramid="PYRAMID",r.Starlette="STARLETTE",r.Streamlit="STREAMLIT",r.Rails="RAILS",r.DotNet="DOTNET",r.Cargo="CARGO",r.Make="MAKE",r.RegularRun="REGULAR_RUN";var w="package.json",Z="requirements.txt",x=RegExp("((index)|(main)|(app)|(run)|(start)|(server))\\..+","i"),C=RegExp("((node_modules)|(venv)|(bower_components)|(vendor)|(build)|(dist)|(target)|(\\.git)|(\\.vscode)|(\\.idea)).+$","i");function _(){return(_=(0,o._)(function(e,t){var n,r,i,o,a,l;return(0,c.Jh)(this,function(c){switch(c.label){case 0:if(n=e.initRunCommand,r=e.isCompiled,i=e.allFiles,!((o=new Set(i)).has("Makefile")||o.has("makefile")))return[3,1];return[2,"MAKE"];case 1:if(!o.has(w))return[3,2];return[2,"NPM"];case 2:if(!o.has("Cargo.toml"))return[3,3];return[2,"CARGO"];case 3:if(!r)return[3,4];return[2,"UNKNOWN"];case 4:if(!o.has("config/application.rb"))return[3,5];return[2,"RAILS"];case 5:if(!i.some(function(e){return"csproj"===(0,b.r6)(e)}))return[3,6];return[2,"DOTNET"];case 6:if(!o.has(Z))return[3,8];return[4,t.readFile(Z)];case 7:if(!(a=c.sent()).error){if((l=a.content.toString()).includes("django"))return[2,"DJANGO"];if(l.includes("flask"))return[2,"FLASK"];if(l.includes("fastapi"))return[2,"FASTAPI"];if(l.includes("pyramid"))return[2,"PYRAMID"];else if(l.includes("starlette"))return[2,"STARLETTE"];else if(l.includes("streamlit"))return[2,"STREAMLIT"]}return[3,9];case 8:if(x.test(n))return[2,"REGULAR_RUN"];c.label=9;case 9:return[2,"UNKNOWN"]}})})).apply(this,arguments)}function S(){return(S=(0,o._)(function(e){var t,n,r,i;return(0,c.Jh)(this,function(o){switch(o.label){case 0:return[4,e.readFile(w)];case 1:t=o.sent();try{if(!t.error&&(r=null==(n=JSON.parse(t.content.toString()))?void 0:n.scripts,i=["dev","serve","watch","start:dev","start"].find(function(e){return null==r?void 0:r[e]})))return[2,"npm run ".concat(i)]}catch(e){}return[2,"node index.js"]}})})).apply(this,arguments)}function k(){return(k=(0,o._)(function(e,t,n){var r,i,o,a;return(0,c.Jh)(this,function(l){switch(r=t.initRunCommand,o=(i=t.allFiles).find(function(e){return["main.py","app.py"].includes(e)}),e){case"NPM":return[2,function(e){return S.apply(this,arguments)}(n)];case"REGULAR_RUN":var c;if(null==(a=null!==(c=i.filter(function(e){return!C.test(e)}).find(function(e){return x.test(e)}))&&void 0!==c?c:null))return[2,null];return[2,r.replace(x,a)];case"DJANGO":return[2,"python3 manage.py runserver 0.0.0.0:3000"];case"FLASK":return[2,"python ".concat(o)];case"FASTAPI":case"STARLETTE":return[2,"uvicorn ".concat(null==o?void 0:o.replace(".py",""),":app --host 0.0.0.0 --port 3000")];case"PYRAMID":return[2,"pserve development.ini"];case"STREAMLIT":return[2,"streamlit run ".concat(o)];case"RAILS":return[2,"bundle exec rails server --binding=0.0.0.0"];case"DOTNET":return[2,"dotnet run"];case"CARGO":return[2,"cargo run"];default:return[2,null]}return[2]})})).apply(this,arguments)}function E(){return(E=(0,o._)(function(e,t,n,r){var i,o,a;return(0,c.Jh)(this,function(l){switch(l.label){case 0:if(0===n.length)return[2,{projType:"UNKNOWN",runCommand:null,compileCommand:null}];return[4,function(e,t){return _.apply(this,arguments)}(i={initRunCommand:e,isCompiled:t,allFiles:n},r)];case 1:return a={projType:o=l.sent()},[4,function(e,t,n){return k.apply(this,arguments)}(o,i,r)];case 2:return[2,(a.runCommand=l.sent(),a.compileCommand=function(e){switch(e){case"MAKE":return"make";case"CARGO":case"DOTNET":case"NPM":return"";default:return null}}(o),a)]}})})).apply(this,arguments)}var T=n(59786),R=n(49224),D=n(65326),I=n(12789),B=n(29318),G=n(83238),A=n(86471),P=n(54742),L=n(83138),N=v.K.a,O=(0,R.X)({root:[y.l0.maxWidth(420),y.l0.display.flex,y.l0.gap(12),y.l0.py(4),{margin:"0 auto"}],section:[y.l0.display.flex,y.l0.p(12),y.l0.gap(12)],sectionHeader:[y.l0.flex.row,y.l0.justify.spaceBetween],loading:[y.l0.center,y.l0.flex.growAndShrink(1)],multiParagraph:[y.l0.flex.column,y.l0.gap(8)]}),U=function(e){var t,n,r=(0,I._)(),a=r.modules,p=r.configs,b=(0,G.Z)(),w=(0,l._)((0,u.useState)({view:A.z.Overview}),2),Z=w[0],x=w[1],C=(0,u.useMemo)(function(){return null==a?void 0:a.filter(function(e){return"replit"!==e.id})},[a]),_=e.initialRun,S=null!==(n=e.initialBuild)&&void 0!==n?n:"",k=!!e.projType&&e.projType===i.Rails,E=e.isApplyingConfig,T=(0,d.Y)(e.initialRun,function(e){if(!e)return{message:"Add a run command"}}),R=(0,l._)((0,u.useState)(e.initialBuild),2),U=R[0],M=R[1];if((0,u.useEffect)(function(){T.setValue(_)},[_]),(0,u.useEffect)(function(){M(null!=S?S:"")},[S]),!a||!C||!p||!b)return(0,s.tZ)(v.G,{css:O.loading,children:(0,s.tZ)(B.Z,{})});switch(Z.view){case A.z.ModuleSearch:return(0,s.tZ)(P.M,{setViewState:x,registry:b,modules:a});case A.z.Overview:return(0,s.BX)(v.G,{css:O.root,children:[(0,s.BX)(v.G,{css:O.section,children:[(0,s.tZ)(m.h4,{variant:"headerDefault",level:1,children:"Configure your Repl"}),(0,s.BX)(L.M,{color:"dimmer",css:O.multiParagraph,children:[(0,s.BX)("p",{children:["Your code was successfully imported from GitHub. We've created a"," ",(0,s.tZ)("a",{href:"",onClick:function(t){t.preventDefault(),e.openDotReplit()},children:".replit file"}),", which configures your Repl's behavior."," ",(0,s.tZ)("a",{href:"https://docs.replit.com/replit-workspace/configuring-repl#replit-configuration-file",target:"_blank",rel:"noopener noreferrer",children:"Learn more about .replit files."})]}),(0,s.tZ)("p",{children:"To get started, verify our recommended platform dependencies and commands."})]})]}),(0,s.BX)(v.G,{css:O.section,children:[(0,s.tZ)(m.h4,{variant:"subheadDefault",level:2,children:"Modules"}),(0,s.tZ)(m.xv,{color:"dimmer",children:"Modules combine support for programming languages, formatters, and packagers."}),(0,s.tZ)(D.Z,{modules:C}),(0,s.tZ)(f.zx,{stretch:!0,colorway:"primary",variant:"outlined",type:"submit",text:"Add more modules",onClick:function(){x({view:A.z.ModuleSearch})},dataCy:"import-config-done"})]}),(0,s.BX)(v.G,{css:O.section,children:[(0,s.tZ)(v.G,{css:O.sectionHeader,children:(0,s.tZ)(m.h4,{variant:"subheadDefault",level:2,children:"Commands"})}),(0,s.tZ)(m.xv,{color:"dimmer",children:"Define how your Repl should interact with your codebase."}),(0,s.tZ)("form",{onSubmit:(t=(0,o._)(function(t){var n;return(0,c.Jh)(this,function(r){switch(r.label){case 0:if(t.preventDefault(),e.setIsApplyingConfig(!0),!T.value)return T.validate(),[2];return[4,e.applyConfig({run:T.value,compile:null!=U?U:"",runChanged:T.value!==_,compileChanged:U!==S,projType:e.projType})];case 1:return r.sent(),e.closeConfigPane(),e.setIsApplyingConfig(!1),null===(n=e.openSidebar)||void 0===n||n.call(e),[2]}})}),function(e){return t.apply(this,arguments)}),css:[{width:"100%"}],children:(0,s.tZ)(v.G,{css:[y.l0.colWithGap(8)],children:(0,s.BX)(v.G,{css:[y.l0.colWithGap(8)],children:[(0,s.BX)(v.G,{css:[y.l0.colWithGap(8)],children:[e.initialBuild?(0,s.BX)(v.G,{css:[y.l0.colWithGap(4)],children:[(0,s.tZ)("label",{htmlFor:"compile-sel",children:"Compile command"}),(0,s.tZ)(m.xv,{variant:"small",color:"dimmest",children:"This is optional, and is executed before your run command."}),(0,s.tZ)(h.II,{disabled:E,id:"compile-sel",type:"text",value:U,placeholder:"Enter a command to compile the program",onChange:function(e){M(e.currentTarget.value)},css:{"&:disabled":{color:y.TV.foregroundDimmer}}})]}):null,(0,s.tZ)("label",{htmlFor:"run-sel",css:[y.l0.mt(4)],"data-cy":"import-config-run-command",children:"Run command"}),(0,s.tZ)(h.II,{disabled:E,id:"run-sel",dataCy:"import-config-run-command-input",type:"text",value:T.value,placeholder:"Enter a command to run the program",onChange:function(e){T.setValue(e.currentTarget.value)},css:[{"&:disabled":{color:y.TV.foregroundDimmer,cursor:"auto"},cursor:"text"}]}),T.error||!T.value?(0,s.BX)(v.G,{css:[y.l0.color.accentNegativeDefault,y.l0.rowWithGap(4),y.l0.align.center],children:[(0,s.tZ)(g.Z,{size:12}),(0,s.tZ)(v.G,{children:T.error?T.error.message:"Add a run command"})]}):null]}),(0,s.BX)(m.xv,{color:"dimmer",variant:"small",children:["Use either a dev server or start command.",(0,s.tZ)(N,{css:[y.l0.color.accentPrimaryStronger],target:"_blank",href:"https://docs.replit.com/replit-workspace/configuring-repl#run-command",rel:"noopener noreferrer",children:"Not sure what to use?"})]}),k?(0,s.tZ)(v.G,{children:(0,s.BX)(m.xv,{variant:"small",color:"dimmest",children:["We detected this is a Rails project. You will need",(0,s.BX)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.replit.com/additional-resources/rails-on-replit",children:[" ","additional changes"," "]}),"to your config files to use all of Replit’s features."]})}):null,(0,s.tZ)(v.G,{css:[y.l0.flex.column,y.l0.pt(16)],children:(0,s.tZ)(f.zx,{stretch:!0,colorway:"primary",type:"submit",text:E?"Saving...":"Confirm and close",loading:E,disabled:E||!!T.error||!T.value,dataCy:"import-config-done"})})]})})})]})]})}throw Error("Unknown view state")},M=n(64479),X=n(39713),F=n(59735),W=n(30509),H=(0,n(77450).F4)({"0%":{opacity:.1},"50%":{opacity:1},"100%":{opacity:.1}}),V=(0,R.X)({one:{opacity:.1,animation:"".concat(H," 1.5s ease-in-out infinite"),animationDelay:"0s"},two:{opacity:.1,animation:"".concat(H," 1.5s ease-in-out infinite"),animationDelay:"0.1s"},three:{opacity:"0.1",animation:"".concat(H," 1.5s ease-in-out infinite"),animationDelay:"0.2s"}}),z=function(e){var t=(0,X._)({},(0,F._)(e));return(0,s.BX)(s.HY,{children:[(0,s.tZ)("span",(0,W._)((0,a._)({},t),{css:V.one,children:"."})),(0,s.tZ)("span",(0,W._)((0,a._)({},t),{css:V.two,children:"."})),(0,s.tZ)("span",(0,W._)((0,a._)({},t),{css:V.three,children:"."}))]})},j=n(39271),q=n(81199),J=n(61832),Y=n(60305),$=n(43985),K=n(53157);function Q(e,t){var n=[];return n.push((0,K.xz)("interpreter")),n.push((0,K.xz)("entrypoint")),e&&(n.push((0,K.KQ)(e)),n.push((0,K.X6)(e))),t?(n.push((0,K.D3)(t)),n.push((0,K.pi)(t))):(n.push((0,K.xz)("compile")),n.push((0,K.xz)("deployment/build"))),n}var ee=n(8260),et=n(36556),en=n(99450);function er(e){var t=e.children,n=(0,T.P5)({controlName:"flag-github-import-nix-modules"});return(0,s.BX)(M.Tg,{background:"default",css:[y.l0.borderRadius(8),{width:"100%",height:"calc(100% - var(--space-2))",backgroundColor:"var(--background-default)",overflowY:"auto",marginTop:"0px"}],children:[!n&&(0,s.tZ)(v.G,{children:(0,s.tZ)(m.xv,{multiline:!1,variant:"subheadDefault",css:[y.l0.color.foregroundDimmest,y.l0.pl(16),y.l0.pt(16)],children:".replit"})}),(0,s.tZ)(v.G,{css:[y.l0.p(16),y.l0.justify.center,y.l0.align.center,{flex:"1 1 auto"}],children:t})]})}function ei(){return(0,s.tZ)(er,{children:(0,s.BX)(v.G,{children:[(0,s.tZ)(v.G,{children:"We couldn't read your .replit file"}),(0,s.tZ)("a",{css:[y.l0.pt(8),{fontSize:y.TV.fontSizeSmall}],target:"_blank",href:"https://docs.replit.com/replit-workspace/configuring-repl",children:"View docs"})]})})}function eo(){return(0,s.tZ)(er,{children:(0,s.tZ)(v.G,{children:(0,s.BX)("p",{children:["Importing from GitHub",(0,s.tZ)(z,{style:{color:"var(--foreground-default)"}})]})})})}function ea(e){var t,n,r=e.initialRun,a=null!==(n=e.initialBuild)&&void 0!==n?n:"",b=!!e.projType&&e.projType===i.Rails,w=e.isApplyingConfig,Z=(0,d.Y)(e.initialRun,function(e){if(!e)return{message:"Add a run command"}}),x=(0,l._)((0,u.useState)(e.initialBuild),2),C=x[0],_=x[1];(0,u.useEffect)(function(){Z.setValue(r)},[r]),(0,u.useEffect)(function(){_(null!=a?a:"")},[a]);var S=v.K.a;return(0,s.tZ)(er,{children:(0,s.tZ)("form",{onSubmit:(t=(0,o._)(function(t){return(0,c.Jh)(this,function(n){switch(n.label){case 0:if(t.preventDefault(),e.setIsApplyingConfig(!0),!Z.value)return Z.validate(),[2];return[4,e.applyConfig({run:Z.value,compile:null!=C?C:"",runChanged:Z.value!==r,compileChanged:C!==a,projType:e.projType})];case 1:return n.sent(),e.setIsApplyingConfig(!0),e.closeConfigPane(),[2]}})}),function(e){return t.apply(this,arguments)}),css:[y.l0.maxWidth(400),{width:"100%"}],children:(0,s.tZ)(v.G,{css:[y.l0.colWithGap(8)],children:(0,s.BX)(v.G,{css:[y.l0.height(e.initialBuild?210:170),y.l0.colWithGap(8)],children:[(0,s.BX)(v.G,{css:[y.l0.maxWidth(400),y.l0.colWithGap(8)],children:[e.initialBuild?(0,s.BX)(v.G,{css:[y.l0.colWithGap(4)],children:[(0,s.tZ)("label",{htmlFor:"compile-sel",children:"Configure the Compile Command"}),(0,s.tZ)(m.xv,{variant:"small",color:"dimmest",children:"This is optional, and is executed before your run command."}),(0,s.tZ)(h.II,{disabled:w,id:"compile-sel",type:"text",value:C,placeholder:"Enter a command to compile the program",onChange:function(e){_(e.currentTarget.value)},css:{"&:disabled":{color:y.TV.foregroundDimmer}}})]}):null,(0,s.tZ)("label",{htmlFor:"run-sel",css:[y.l0.mt(4)],"data-cy":"import-config-run-command",children:"Configure the Run Command"}),(0,s.tZ)(h.II,{disabled:w,id:"run-sel",dataCy:"import-config-run-command-input",type:"text",value:Z.value,placeholder:"Enter a command to run the program",onChange:function(e){Z.setValue(e.currentTarget.value)},css:[{"&:disabled":{color:y.TV.foregroundDimmer,cursor:"auto"},cursor:"text"}]}),b?(0,s.tZ)(m.xv,{variant:"small",color:"dimmest",children:"This is optional, and is executed before your run command."}):null,Z.error||!Z.value?(0,s.BX)(v.G,{css:[y.l0.color.accentNegativeDefault,y.l0.rowWithGap(4),y.l0.align.center],children:[(0,s.tZ)(g.Z,{size:12}),(0,s.tZ)(v.G,{children:Z.error?Z.error.message:"Add a run command"})]}):null]}),(0,s.tZ)(S,{css:[y.l0.color.accentPrimaryStronger,{fontWeight:y.TV.fontWeightMedium}],target:"_blank",href:"https://docs.replit.com/replit-workspace/using-git-on-replit/running-github-repositories-replit",rel:"noopener noreferrer",children:"Not sure what to do?"}),(0,s.tZ)(v.G,{css:[y.l0.flex.row,y.l0.pt(16)],children:(0,s.tZ)(f.zx,{colorway:"primary",type:"submit",text:w?"Saving...":"Confirm and close",disabled:w||!!Z.error||!Z.value,css:[p.gU.filledAndOutlined,{fontWeight:y.TV.fontWeightMedium,color:y.TV.accentPrimaryStronger}],dataCy:"import-config-done"})})]})})})})}var el=function(e){var t,n,r,d,f,h,p,m,v,g,y,b,w,Z,x,C,_,S,k,R,D,I,B,G,A,P,L,N,O,M,X,F,W,H,V,z,K=(0,T.P5)({controlName:"flag-github-import-nix-modules"}),er=(t=e.closeConfigPane,n=e.openSidebar,r=e.onNewPaneSelected,d=(0,en.Wd)("gitImport","boolean"),f=(0,T.P5)({controlName:"flag-github-import-nix-modules"}),h=(0,j.Z)(),m=(p=(0,q.Z)()).fs,v=p.dotReplit,y=(g=(0,l._)((0,u.useState)(null),2))[0],b=g[1],Z=(w=(0,l._)((0,u.useState)(null),2))[0],x=w[1],C=(0,u.useCallback)(function(){r({type:"codeEditor",data:{path:".replit"}})},[r]),(0,u.useEffect)(function(){if(!y)return v.watch(function(e){b(e.config),"NOT_FOUND"!==e.error&&x(e.error)})},[v,y]),S=(_=(0,l._)((0,u.useState)(!1),2))[0],k=_[1],D=(R=(0,l._)((0,u.useState)(""),2))[0],I=R[1],G=(B=(0,l._)((0,u.useState)(""),2))[0],A=B[1],L=(P=(0,l._)((0,u.useState)(!1),2))[0],N=P[1],M=(O=(0,l._)((0,u.useState)(i.Unknown),2))[0],X=O[1],W=(F=(0,l._)((0,u.useState)(!1),2))[0],H=F[1],(0,u.useEffect)(function(){if(!W)return m.watchDir(".git",{onChange:function(e){H(e.length>0)},onMoveOrDelete:function(){H(!0)},onError:function(){H(!1)}})}),(0,u.useEffect)(function(){W&&function(){e.apply(this,arguments)}();function e(){return(e=(0,o._)(function(){var e,t,n,r,o,a,l,s,u,h,p,g,b,w,Z,x,C;return(0,c.Jh)(this,function(c){switch(c.label){case 0:if(!y)return[2];return t=(0,J.Cq)(null!==(e=y.run)&&void 0!==e?e:void 0),r=(0,J.Cq)(null!==(n=y.compile)&&void 0!==n?n:void 0),o=!!y.compile,[4,m.listFiles()];case 1:return a=c.sent(),[4,m.readDir(".git")];case 2:if(l=c.sent(),a.error||null==a.files||l.error)return[2];return s=a.files,[4,function(e,t,n,r){return E.apply(this,arguments)}(t,o,s,m)];case 3:if(h=(u=c.sent()).projType,p=u.runCommand,g=u.compileCommand,b=s.includes(ee.E),w=function(e,t){return e||t},Z=b?w(t,p):w(p,t),x=g||r,I(Z||""),A(x),N(h!==i.Unknown&&h!==i.RegularRun),X(h),!(d&&f))return[3,6];return Z||et.kg.warn("Failed to autosuggest run command"),h===i.Unknown&&et.kg.warn("Failed to detect project type"),C=Q(Z||"",x),[4,v.updateDotReplit(C)];case 4:return c.sent(),[4,m.flush()];case 5:c.sent(),m.persist({skipDebounce:!0}),c.label=6;case 6:return[2]}})})).apply(this,arguments)}},[v,y,m,W,d,f]),z=(0,u.useCallback)((V=(0,o._)(function(e){var t,n,r,i,o,a;return(0,c.Jh)(this,function(l){switch(l.label){case 0:return t=e.run,n=e.compile,r=e.runChanged,i=e.compileChanged,o=e.projType,(0,Y.j)(Y.U3.NIX_GH_IMPORT_USED,{action:$.D.ConfigDone,isCompiled:""!==n,runChanged:r,compileChanged:i,projType:o,replId:h,nixModuleFlow:f}),a=Q(t,n),[4,v.updateDotReplit(a)];case 1:return l.sent(),m.flush().then(function(){m.persist({skipDebounce:!0})}),[2]}})}),function(e){return V.apply(this,arguments)}),[v,m,f,h]),{fs:m,applyConfig:z,closeConfigPane:t,dotReplitConfig:y,dotReplitError:Z,isApplyingConfig:S,setIsApplyingConfig:k,initialBuild:G,initialRun:D,isFrameworkRecommended:L,projType:M,openDotReplit:C,openSidebar:n}),el=er.dotReplitConfig;return er.dotReplitError?(0,s.tZ)(ei,{}):el?"githubImport"===e.flow&&K?(0,s.tZ)(U,(0,a._)({},er)):(e.flow,(0,s.tZ)(ea,(0,a._)({},er))):(0,s.tZ)(eo,{})}},98927:function(e,t,n){n.d(t,{Z:function(){return er}});var r=n(66626),i=n(63257),o=n(4216),a=n(94778),l=n(82230),c=n(49224),s=n(72093),u=n(64479),d=n(54738),f=n(85763),h=n(55821),p=n(67242),m=n(12789),v=n(50959),g=n(38057),y=n(64432),b=n(73789),w=n(61762),Z=n(41198),x=n(65059),C=n(86596),_=n(23742),S=n(59022),k=n(93132),E=n(10239),T=n(2785),R=n(96963),D=n(52888),I=n(39186),B=n(99892),G=n(35564),A=n(81408),P=n(53821),L=n(8688),N=n(49812),O=n(12559),U=n(96512),M=n(88117),X=n(11057),F=n(54212),W=n(320),H=n(74542),V=n(29316),z=n(18469),j=n(23569),q=n(66171),J=n(84840),Y=n(31916);function $(e){var t=e.module,n=t.name.toLowerCase(),r=n.split(" ");return n.includes("node")?(0,o.tZ)(U.Z,{}):n.includes("typescript")?(0,o.tZ)(J.Z,{}):n.includes("python")||n.includes("pyright")?(0,o.tZ)(W.Z,{}):n.includes("c++")||n.includes("cpp")||n.includes("clang")||n.includes("ccls")?(0,o.tZ)(T.Z,{}):n.includes("java")||n.includes("maven")?(0,o.tZ)(L.Z,{}):n.includes("rust")||n.includes("cargo")?(0,o.tZ)(z.Z,{}):r.includes("go")||n.includes("gopls")?(0,o.tZ)(G.Z,{}):n.includes("ruby")?(0,o.tZ)(V.Z,{}):n.includes("elixir")?(0,o.tZ)(B.Z,{}):n.includes("bash")?(0,o.tZ)(k.Z,{}):n.includes("clojure")?(0,o.tZ)(R.Z,{}):n.includes("php")?(0,o.tZ)(X.Z,{}):n.includes("swift")?(0,o.tZ)(q.Z,{}):n.includes("haskell")?(0,o.tZ)(A.Z,{}):n.includes("lua")?(0,o.tZ)(N.Z,{}):n.includes("dart")?(0,o.tZ)(I.Z,{}):n.includes("css")?(0,o.tZ)(D.Z,{}):n.includes("html")?(0,o.tZ)(P.Z,{}):r.includes("r")?(0,o.tZ)(H.Z,{}):n.includes("nix")?(0,o.tZ)(O.Z,{}):n.includes("npm")?(0,o.tZ)(M.Z,{}):"bun"===n?(0,o.tZ)(E.Z,{}):n.includes("prettier")?(0,o.tZ)(F.Z,{}):n.includes("vue")?(0,o.tZ)(Y.Z,{}):n.includes("svelte")?(0,o.tZ)(j.Z,{}):n.includes(".replit")?(0,o.tZ)(_.Z,{}):t instanceof w.api.PackagerOption?(0,o.tZ)(C.Z,{}):t instanceof w.api.LanguageServerOption?(0,o.tZ)(Z.Z,{}):t instanceof w.api.FormatterOption?(0,o.tZ)(x.Z,{}):t instanceof w.api.RunOption?(0,o.tZ)(S.Z,{}):(0,o.tZ)(C.Z,{})}var K=n(29318),Q=n(60305),ee=(0,c.X)({module:[s.l0.borderRadius(4),s.l0.width("100%"),s.l0.overflow("hidden")],submodule:[s.l0.flex.row,s.l0.align.center,s.l0.p(4)],submoduleName:[s.l0.truncate,s.l0.mx(8),s.l0.flex.growAndShrink(1)],moduleHeader:[s.l0.flex.row,s.l0.justify.spaceBetween,s.l0.flex.growAndShrink(1)],moduleActions:[s.l0.rowWithGap(4),s.l0.center],moduleHeaderMetadata:[s.l0.rowWithGap(12)],divider:[s.l0.backgroundColor.outlineDimmer]});function et(e){var t=e.isModifying,n=e.isInstalled,r=e.onInstallClick,i=e.onRemoveClick,a=e.module;if(t)return(0,o.tZ)(f.hU,{alt:"Updating module",tooltipBehavior:"hidden",children:(0,o.tZ)(K.Z,{})});if(n){var l="replit"===a.id;return(0,o.tZ)(f.hU,{alt:l?"The base module can't be removed":"Remove module",disabled:l,onClick:i,children:(0,o.tZ)(h.Z,{})})}return(0,o.tZ)(f.hU,{alt:"Add module",onClick:r,children:(0,o.tZ)(g.Z,{})})}function en(e){var t=e.module,n=e.isInstalled,i=(0,m._)(),c=i.addModule,s=i.removeModule,u=(0,r._)((0,v.useState)(!1),2),d=u[0],f=u[1];return(0,v.useEffect)(function(){f(!1)},[n]),(0,o.BX)(a.G,{css:ee.moduleHeader,children:[(0,o.BX)(a.G,{css:ee.moduleHeaderMetadata,children:[(0,o.tZ)(l.xv,{children:t.name}),t.displayVersion?(0,o.tZ)(l.xv,{color:"dimmer",children:t.displayVersion}):null]}),(0,o.BX)(a.G,{css:ee.moduleActions,children:[t.description?(0,o.tZ)(y.u,{tooltip:t.description,children:(0,o.tZ)(b.Z,{})}):null,(0,o.tZ)(et,{module:t,isInstalled:n,isModifying:d,onInstallClick:function(){f(!0),c(t.id),(0,Q.j)(Q.U3.NIX_MODULE_ADDED,{moduleId:t.id})},onRemoveClick:function(){f(!0),s(t.id),(0,Q.j)(Q.U3.NIX_MODULE_REMOVED,{moduleId:t.id})}})]})]})}function er(e){var t=e.module,n=e.defaultExpanded,r=e.isInstalled,c=(0,i._)(t.runners).concat((0,i._)(t.packagers),(0,i._)(t.formatters),(0,i._)(t.languageServers));return(0,o.tZ)(u.Tg,{elevated:!0,css:ee.module,children:(0,o.BX)(d.Q,{round:!1,defaultExpanded:n,headerContent:(0,o.tZ)(en,{module:t,isInstalled:r}),children:[c.length>0?(0,o.tZ)(p.R,{css:ee.divider}):null,c.map(function(e){return(0,o.BX)(a.G,{css:ee.submodule,children:[(0,o.tZ)($,{module:e}),(0,o.tZ)(l.xv,{css:ee.submoduleName,children:e.name}),e.displayVersion?(0,o.tZ)(l.xv,{color:"dimmer",children:e.displayVersion}):null]},e.id)})]})})}},65326:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(4216),i=n(94778),o=n(49224),a=n(72093),l=n(98927),c=n(50959),s=(0,o.X)({modules:[a.l0.colWithGap(8)]});function u(e){var t=e.modules,n=(0,c.useMemo)(function(){return t.filter(function(e){return"replit"!==e.id})},[t]);return(0,r.tZ)(i.G,{css:s.modules,children:n.map(function(e){return(0,r.tZ)(l.Z,{module:e,defaultExpanded:!0,isInstalled:!0},e.id)})})}},54742:function(e,t,n){n.d(t,{E:function(){return P},M:function(){return L}});var r=n(27387),i=n(66626),o=n(96583),a=n(4216),l=n(85045),c=n(95088),s=n.n(c),u=n(54082),d=n.n(u),f=n(94778),h=n(12945),p=n(15661),m=n(86471),v=n(85763),g=n(2511),y=n(50959),b=n(39667),w=n(90188),Z=n(69764),x=n(93939),C=n(49224),_=n(72093),S=n(99007),k=n(35970),E=n(98927),T=n(25150),R=n(60305),D=n(50405),I=(0,C.X)({root:[_.l0.flex.column,_.l0.flex.shrink(1)],resultsContainer:[_.l0.flex.growAndShrink(1),_.l0.overflow("auto")],results:[_.l0.width("100%"),_.l0.maxWidth(600),_.l0.colWithGap(8),_.l0.p(8),_.l0.overflowY("auto"),{margin:"0 auto"}],result:[_.l0.flex.row,_.l0.align.center,_.l0.justify.spaceBetween],resultMetadata:[_.l0.rowWithGap(8)],header:[_.l0.rowWithGap(8),_.l0.p(8),_.l0.align.center,_.l0.border({color:_.TV.outlineDimmest,width:1,direction:"bottom"})],searchInput:[_.l0.flex.grow(1)],select:[_.l0.minWidth(160)]});function B(e){var t=e.query,n=(0,i._)((0,y.useState)([]),2),l=n[0],c=n[1],s=(0,y.useRef)(0),u=(0,p.Z)();return(0,h.Z)(function(){if(""===t.trim()){c([]);return}var e,n=++s.current;(e=(0,r._)(function(){var e;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,u(t)];case 1:if(e=r.sent(),n!==s.current)return[2];return c(e),[2]}})}),function(){return e.apply(this,arguments)})()},[t],500),(0,a.tZ)(f.G,{css:I.results,children:l.map(function(e){return(0,a.tZ)(x.Z,{pkg:e,openConsole:function(){}},e.name)})})}function G(e){return e.length>0&&d()(e)}function A(e){var t,n,r,i=e.query,o=e.registry,c=e.modules,u=(0,y.useMemo)(function(){return new Set(c.map(function(e){return e.id}))},[c]),d=(n=(t={modules:o.fullModules,query:i}).modules,(r=t.query)?new l.Av(n,{selector:function(e){return e.name},tiebreakers:[function(e,t){var n=2===e.item.displayVersion.split(".").length?"".concat(e.item.displayVersion,".0"):e.item.displayVersion,r=2===t.item.displayVersion.split(".").length?"".concat(t.item.displayVersion,".0"):t.item.displayVersion;return G(n)||G(r)?!G(r)&&G(n)?1:!G(n)&&G(r)||s()(n,r)?-1:s()(r,n)?1:0:0}]}).find(r).map(function(e){return e.item}):n);return(0,a.tZ)(f.G,{css:I.results,children:d?d.map(function(e){var t="".concat(e.id,"-").concat(e.resolutionPath,"-").concat(e.version),n=u.has(e.id);return(0,a.tZ)(f.G,{css:I.result,children:(0,a.tZ)(E.Z,{module:e,isInstalled:n,defaultExpanded:!1})},t)}):null})}function P(e){var t=e.setViewState,n=e.packagerConfig,r=(0,i._)((0,y.useState)(""),2),o=r[0],l=r[1],c=(0,y.useDeferredValue)(o),s=(0,i._)((0,y.useState)(n),2),u=s[0],d=s[1],h=(0,w.I)().configs;return(0,a.BX)(f.G,{css:I.root,children:[(0,a.BX)(f.G,{css:I.header,children:[(0,a.tZ)(v.hU,{alt:"Back",onClick:function(){t({view:m.z.Overview})},children:(0,a.tZ)(g.Z,{})}),(0,a.tZ)(S.P,{items:h,css:I.select,"aria-label":"Change search context",defaultSelectedKey:n.id,onSelectionChange:function(e){var t=h.find(function(t){return t.id===e});if(!t)throw Error("Expected config");d(t),l("")},children:function(e){return(0,a.tZ)(k.m9,{id:e.id,label:e.name})}}),(0,a.tZ)(f.G,{css:I.searchInput,children:(0,a.tZ)(b.E,{value:o,onChange:function(e){l(e.target.value)},placeholder:"Search packages",autoFocus:!0})})]}),(0,a.tZ)(f.G,{css:I.resultsContainer,children:(0,a.tZ)(Z.Z,{config:u,children:(0,a.tZ)(B,{query:c})})})]})}function L(e){var t=e.setViewState,n=e.modules,r=e.registry,o=(0,i._)((0,y.useState)(""),2),l=o[0],c=o[1],s=(0,y.useDeferredValue)(l);(0,D.D)(T.U3.NIX_MODULE_SEARCH_VIEWED);var u=(0,y.useRef)(!1);return(0,y.useEffect)(function(){s&&!u.current&&((0,R.j)(T.U3.NIX_MODULE_SEARCH_USED,{query:s}),u.current=!0)},[s]),(0,a.BX)(f.G,{css:I.root,children:[(0,a.BX)(f.G,{css:I.header,children:[(0,a.tZ)(v.hU,{alt:"Back",onClick:function(){t({view:m.z.Overview})},children:(0,a.tZ)(g.Z,{})}),(0,a.tZ)(f.G,{css:I.searchInput,children:(0,a.tZ)(b.E,{value:l,onChange:function(e){c(e.target.value)},placeholder:"Search modules",autoFocus:!0})})]}),(0,a.tZ)(f.G,{css:I.resultsContainer,children:(0,a.tZ)(A,{query:s,modules:n,registry:r})})]})}},86471:function(e,t,n){var r,i;n.d(t,{z:function(){return r}}),(i=r||(r={})).Overview="Overview",i.FormatterInfo="FormatterInfo",i.LanguageServerInfo="LanguageServerInfo",i.ModuleSearch="ModuleSearch",i.PackageSearch="PackageSearch"},85021:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(4216),i=n(99450),o=n(45271),a=n(82230),l=n(94778),c=n(72093),s=n(47336),u=n.n(s),d=n(85421);function f(){var e=(0,d.useRouter)(),t=(0,i.Wd)("didMigrateToNix","boolean");return(0,r.tZ)(o.u,{isOpen:t,onRequestClose:function(){(0,i.pg)({router:e,params:[{mode:"delete",key:"didMigrateToNix"}]})},centered:!0,children:(0,r.BX)(l.G,{css:[c.l0.colWithGap(16)],children:[(0,r.tZ)(a.h4,{level:1,variant:"headerDefault",children:"We've upgraded your project!"}),(0,r.BX)(a.xv,{children:["Your project is now using"," ",(0,r.tZ)(u(),{legacyBehavior:!0,href:"https://blog.replit.com/nix",children:"the latest infrastructure"})," ","which unlocks powerful new features."]}),(0,r.BX)(l.K.ul,{css:c.l0.colWithGap(4),children:[(0,r.tZ)(l.K.li,{children:(0,r.BX)(a.xv,{children:["•"," ",(0,r.tZ)(u(),{legacyBehavior:!0,href:"https://docs.replit.com/replit-workspace/add-system-dependencies",children:"Use 80,000+ system dependencies"})," ","(linux packages) out of the box."]})}),(0,r.tZ)(l.K.li,{children:(0,r.BX)(a.xv,{children:["•"," ",(0,r.tZ)(u(),{legacyBehavior:!0,href:"https://docs.replit.com/replit-workspace/configuring-repl",children:"Configure your Repl"})," ","with more capabilities."]})}),(0,r.tZ)(l.K.li,{children:(0,r.BX)(a.xv,{children:["•"," ",(0,r.tZ)(u(),{legacyBehavior:!0,href:"https://docs.replit.com/replit-workspace/add-system-dependencies",children:"Check out this doc"})," ","for a deep dive."]})})]}),(0,r.BX)(a.xv,{variant:"small",css:{fontStyle:"italic"},children:["Any overwritten files have been backed up to the same file name with a .backup suffix. If you have any questions, please use"," ",(0,r.tZ)(u(),{legacyBehavior:!0,href:"https://ask.replit.com",children:"ask.replit.com"})," ","to get help."]}),(0,r.tZ)(a.xv,{multiline:!1,children:"Thank you for your patience"})]})})}},27526:function(e,t,n){n.d(t,{v:function(){return y}});var r=n(66626),i=n(4216),o=n(50959),a=n(15235),l=n(49224),c=n(45271),s=n(82230),u=n(72093),d=n(94778),f=n(33980),h=n(25172),p=n(37533),m=n(81199),v=(0,l.X)({container:[u.l0.colWithGap(8)],splitContainer:[u.l0.rowWithGap(8),u.l0.justify.spaceBetween,u.l0.mt(8)],group:[u.l0.rowWithGap(8)],text:[u.l0.mt(8)]}),g=function(){var e=(0,r._)((0,o.useState)(navigator.onLine),2),t=e[0],n=e[1];return(0,o.useEffect)(function(){var e=function(){n(navigator.onLine)};return window.addEventListener("online",e),window.addEventListener("offline",e),function(){window.removeEventListener("online",e),window.removeEventListener("offline",e)}},[]),t},y=function(){var e=(0,m.Z)().container,t=(0,r._)((0,o.useState)(!1),2),n=t[0],l=t[1],u=(0,o.useRef)(!1),y=(0,f.Z)(e),b=(0,o.useMemo)(function(){return y===p.em.CONNECTED},[y]),w=(0,h.d)(),Z=g(),x=(0,o.useCallback)(function(){l(!1)},[]),C=(0,o.useCallback)(function(){location.reload()},[]);return(0,o.useEffect)(function(){if(!u.current&&!b&&w&&Z){var e=setTimeout(function(){l(!0),u.current=!0},6e4);return function(){return clearTimeout(e)}}},[b,w,Z]),(0,i.tZ)(c.u,{isOpen:n,onRequestClose:x,maxWidth:360,centered:!0,children:(0,i.BX)(d.G,{css:v.container,children:[(0,i.tZ)(s.h4,{level:2,variant:"subheadBig",children:"You are disconnected"}),(0,i.tZ)(s.xv,{css:v.text,children:"Your connection to the server has been lost and reconnection attempts have failed. Please refresh the page to continue."}),(0,i.BX)(d.G,{css:v.splitContainer,children:[(0,i.tZ)(a.zx,{text:"Cancel",onClick:x}),(0,i.tZ)(d.G,{css:v.group,children:(0,i.tZ)(a.zx,{text:"Refresh",onClick:C,colorway:"blue"})})]})]})})}},82891:function(e,t,n){n.d(t,{Z:function(){return v},e:function(){return y}});var r=n(41733),i=n(98924),o=n(4216),a=n(15235),l=n(64479),c=n(82230),s=n(94778),u=n(49224),d=n(70501),f=n(72093),h=n(36559),p=n(12202),m=(0,u.X)({code:[f.l0.font.code,f.l0.flex.grow(1)],surface:[f.l0.borderRadius(8),f.l0.p(8),f.l0.flex.row,f.l0.rowWithGap(8),f.l0.align.center]});function v(e){var t=y(e.filePath,e.keyName);if(!t)return null;var n=t.import,i=t.access;return(0,o.BX)(s.G,{css:f.l0.colWithGap(8),children:[n?(0,o.tZ)(g,(0,r._)({code:n},e)):null,(0,o.tZ)(g,(0,r._)({code:i},e))]})}function g(e){var t=e.code,n=e.onInsert,r=(0,i._)(e,["code","onInsert"]);return(0,o.BX)(l.Tg,{elevated:r.elevated,css:m.surface,children:[(0,o.tZ)(p.m,{textToCopy:t}),(0,o.tZ)(c.xv,{variant:"small",css:m.code,multiline:!1,children:t}),n?(0,o.tZ)(a.zx,{variant:"outlined",size:"small",onClick:function(){return n(t)},text:"Insert",iconRight:(0,o.tZ)(d.Z,{})}):null]})}function y(e,t){if(!e)return null;switch((0,h.r6)(e)){case"js":case"ts":case"jsx":case"tsx":return{import:null,access:"const mySecret = process.env['".concat(t,"']")};case"py":return{import:"import os",access:"my_secret = os.environ['".concat(t,"']")};case"go":return{import:'import "os"',access:'mySecret := os.Getenv("'.concat(t,'")')};case"java":case"scala":return{import:null,access:'System.getenv("'.concat(t,'")')};case"rb":return{import:null,access:'ENV["'.concat(t,'"]')};case"c":case"cpp":return{import:"#include <stdlib.h>",access:'char* mySecret = getenv("'.concat(t,'")')};case"cs":return{import:"using System;",access:'string mySecret = System.Environment.GetEnvironmentVariable("'.concat(t,'");')};case"sh":return{import:null,access:'"$'.concat(t,'"')};default:return null}}},32903:function(e,t,n){n.d(t,{$M:function(){return ey},u_:function(){return ex},BH:function(){return eC},ZP:function(){return eT}});var r=n(27387),i=n(41733),o=n(30509),a=n(66626),l=n(96583),c=n(4216),s=n(77450),u=n(43182),d=n(38953),f=n(69170),h=n(91175),p=n(36647),m=n(75958),v=n(60305),g=n(15235),y=n(85638),b=n(12202),w=n(67242),Z=n(85763),x=n(18060),C=n(45271),_=n(64479),S=n(82230),k=n(64432),E=n(94778),T=n(49224),R=n(80274),D=n(76575),I=n(72452),B=n(44049),G=n(29318),A=n(29252),P=n(55821),L=n(72093),N=n(84806),O=n(45929),U=n(11894),M=n(28508),X=n(47336),F=n.n(X),W=(0,T.X)({container:[L.l0.height("100%"),L.l0.p(16),L.l0.colWithGap(16),L.l0.center],imageContainer:[L.l0.colWithGap(16),L.l0.center,L.l0.flex.shrink(1)],descriptionText:[L.l0.textAlign.center]});function H(){return(0,c.tZ)(S.h4,{level:1,variant:"subheadDefault",children:"Store sensitive information securely using Secrets."})}function V(){return(0,c.BX)(E.G,{css:W.container,children:[(0,c.BX)(E.G,{css:W.imageContainer,children:[(0,c.tZ)(M.Z,{art:"Lock"}),(0,c.tZ)(H,{})]}),(0,c.tZ)(E.G,{children:(0,c.BX)(S.xv,{css:W.descriptionText,children:[(0,c.tZ)("code",{children:"HTML/CSS/JS"})," Repls don't support secrets since they are statically hosted.",(0,c.tZ)("br",{}),(0,c.tZ)(F(),{href:"https://docs.replit.com/replit-workspace/workspace-features/secrets",target:"_blank",rel:"noopener",children:"Visit the secrets documentation to learn more."})]})})]})}function z(){return(0,c.BX)(E.G,{css:W.container,children:[(0,c.BX)(E.G,{css:W.imageContainer,children:[(0,c.tZ)(M.Z,{art:"Lock"}),(0,c.tZ)(H,{})]}),(0,c.tZ)(E.G,{children:(0,c.tZ)(S.xv,{css:W.descriptionText,children:(0,c.tZ)(F(),{href:"https://docs.replit.com/replit-workspace/workspace-features/secrets#handling-secrets-in-a-collaborative-environment",target:"_blank",rel:"noopener",children:"How does Replit keep my Secrets safe?"})})})]})}var j=n(82891),q=n(64546),J=n(66048),Y=n(50959),$=n(32822),K=n(92191),Q=n(3030),ee=n(62942),et=n(87502),en=n(99236),er=n(59947),ei=n(41198),eo=n(15561),ea=n(11407),el=v.U3.ENV_EDITOR_USED;function ec(e){var t,n=e.secrets,i=e.update,o=(0,a._)((0,Y.useState)(!1),2),s=o[0],d=o[1],f=(0,a._)((0,Y.useState)(!1),2),h=f[0],p=f[1],m=(0,a._)((0,Y.useState)(!1),2),y=m[0],b=m[1],w=(0,a._)((0,Y.useState)(0),2),Z=w[0],x=w[1],k=0===Z,T=(0,Y.useRef)();T.current||(T.current=(0,K.ir)(function(e){var t=es(e.state.doc.toString());return x(t),0!==t?(0,v.j)(el,{action:"rawEditorUpdatedError"}):(0,v.j)(el,{action:"rawEditorUpdated"}),[]}));var R=(0,et.Z)(),D=R.ref,I=R.view,B=function(){h||d(!1)},G=function(){b(!1),d(!0),(0,v.j)(el,{action:"rawEditorOpened"})},A=function(){if(!I)return!1;var e=es(I.state.doc.toString());return x(e),0===e},P=(t=(0,r._)(function(){var e;return(0,l.Jh)(this,function(t){switch(t.label){case 0:if(!I||!A())return[2];p(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,i(JSON.parse(I.state.doc.toString()))];case 2:return t.sent(),p(!1),b(!0),setTimeout(function(){B(),setTimeout(function(){b(!1)},500)},500),[3,4];case 3:return e=t.sent(),u.Tb(e),(0,v.j)(el,{action:"rawEditorUpdatedError"}),x(3),p(!1),[3,4];case 4:return[2]}})}),function(){return t.apply(this,arguments)});return(0,Y.useEffect)(function(){if(I){var e=JSON.stringify(n,null,2);"{}"===e&&(e="{\n  \n}"),I.dispatch({changes:{from:0,to:I.state.doc.length,insert:e}}),I.dispatch({selection:{anchor:I.state.doc.length-2}}),I.focus()}},[I,n]),(0,c.BX)(c.HY,{children:[(0,c.tZ)(g.zx,{onClick:function(){return G()},text:"Edit as JSON",iconLeft:(0,c.tZ)(ei.Z,{}),size:"small"}),(0,c.tZ)(C.u,{isOpen:s,onRequestClose:function(){return B()},children:(0,c.BX)(E.G,{css:[L.l0.colWithGap(24)],children:[(0,c.tZ)(S.h4,{level:1,variant:"headerDefault",children:"Raw Secrets Editor"}),(0,c.tZ)(S.xv,{children:"Secrets are specified in JSON. Values must be strings."}),(0,c.tZ)(_.Tg,{css:[L.l0.borderRadius(8),L.l0.transition.snappy,L.l0.p(4),{border:"1px solid var(--outline-dimmer)",":hover":{borderColor:"var(--outline-stronger)"}}],elevated:!0,children:(0,c.tZ)(ee.ZP,{ref:D,readOnly:h||y,extensions:[T.current,Q.$f.of([{key:(0,ea.l2)({cmdOrCtrl:!0,key:"Enter"}),run:function(){return P(),!0},preventDefault:!0,stopPropagation:!0}])],language:"json",hideGutter:!0})}),(0,c.BX)(E.G,{css:[L.l0.rowWithGap(4),L.l0.justify.end],children:[!k&&(0,c.tZ)(en.E,{icon:(0,c.tZ)(eo.Z,{}),colorway:"negative",text:function(e){switch(e){case 1:return"Make sure the data is valid JSON.";case 2:return"Make sure that all values are strings.";case 3:return"There was an error saving the secrets.";default:return""}}(Z)}),(0,c.BX)(E.G,{css:[L.l0.rowWithGap(12)],children:[(0,c.tZ)(g.zx,{onClick:B,text:"Cancel"}),(0,c.tZ)(g.zx,{iconLeft:(0,c.tZ)(er.Z,{}),stretch:!0,colorway:y?"positive":"primary",text:y?"Saved!":"Save",disabled:!k||h||y,onClick:function(){return P()}})]})]})]})})]})}function es(e){try{var t=JSON.parse(e);for(var n in t)if("string"!=typeof n||"string"!=typeof t[n])return 2;return 0}catch(e){return 1}}var eu=n(73789),ed=(0,s.iv)([L.l0.center,L.l0.coverContainer]),ef=(0,T.X)({root:[L.l0.flex.column,L.l0.flex.grow(1)],header:[L.l0.flex.row,L.l0.rowWithGap(8),L.l0.align.center,L.l0.p(8)],headerTitle:[L.l0.flex.growAndShrink(1)],addSecretContainer:[L.l0.flex.column,L.l0.colWithGap(8),L.l0.py(8)],secretItemEdit:[L.l0.colWithGap(8)],secretItemEditInputs:[L.l0.rowWithGap(8)],secretItem:[L.l0.flex.row,L.l0.rowWithGap(8),L.l0.align.center],accessSecrect:[L.l0.px(8),L.l0.py(16),L.l0.colWithGap(8)],accessSecrectHeader:[L.l0.rowWithGap(8),L.l0.align.center],dividerContainer:[L.l0.px(8)],titleContainer:[L.l0.colWithGap(4),L.l0.width("40%")],titleWithIcon:[L.l0.flex.row,L.l0.rowWithGap(4),L.l0.align.center]}),eh={fontFamily:"text-security-disc"},ep=["SLACK_API_KEY","GOOGLE_API_KEY","MONGO_API_KEY","FIREBASE_API_KEY"];function em(e){var t=e.onClose,n=e.onAdd,r=e.otherKeys,l=(0,a._)((0,Y.useState)(!0),2),s=l[0],u=l[1],d=(0,a._)((0,Y.useState)({key:"",value:""}),2),f=d[0],h=d[1],p=(0,a._)((0,Y.useState)(function(){var e=Math.floor(Math.random()*ep.length);return ep[e]}),1)[0],m=f.key.length>0&&!r.includes(f.key);return(0,c.tZ)(c.HY,{children:(0,c.BX)(E.G,{css:ef.addSecretContainer,children:[(0,c.BX)(E.G,{css:L.l0.rowWithGap(8),children:[(0,c.BX)(E.G,{css:ef.titleContainer,children:[(0,c.BX)(E.G,{css:ef.titleWithIcon,children:[(0,c.tZ)(S.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Key"}),(0,c.tZ)(k.u,{tooltip:"Use a descriptive, unique name for your secret key.",delay:"default",children:(0,c.tZ)(eu.Z,{})})]}),(0,c.tZ)(x.II,{value:f.key,onChange:function(e){return h((0,o._)((0,i._)({},f),{key:e.target.value}))},autoFocus:!0,placeholder:p,autoComplete:"off"}),r.includes(f.key)?(0,c.BX)(S.xv,{multiline:!1,variant:"small",css:{color:L.TV.accentNegativeDefault},children:['Secret "',f.key,'" already exists']}):null]}),(0,c.BX)(E.G,{css:[L.l0.colWithGap(4),L.l0.flex.growAndShrink(1)],children:[(0,c.BX)(E.G,{css:[L.l0.flex.row,L.l0.rowWithGap(4),L.l0.align.center],children:[(0,c.tZ)(S.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Value"}),(0,c.tZ)(Z.hU,{alt:"Toggle Visibility",tooltipBehavior:"hidden",onClick:function(){return u(!s)},children:s?(0,c.tZ)(I.Z,{}):(0,c.tZ)(B.Z,{})})]}),(0,c.tZ)(x.II,{value:f.value,onChange:function(e){return h((0,o._)((0,i._)({},f),{value:e.target.value}))},style:s?eh:void 0,autoComplete:"off",placeholder:"Value"})]})]}),(0,c.BX)(E.G,{css:[L.l0.rowWithGap(8),L.l0.justify.end],children:[(0,c.tZ)(g.zx,{size:"small",text:"Cancel",onClick:function(){return t()}}),(0,c.tZ)(g.zx,{size:"small",text:"Add Secret",colorway:"primary",disabled:!m,onClick:function(){n({key:f.key.trim(),value:f.value}),h({key:"",value:""})}})]})]})})}var ev=[L.l0.flex.row,L.l0.rowWithGap(8),L.l0.align.center],eg=(0,T.X)({root:[L.l0.height("100%"),L.l0.borderRadius(8),{'& [aria-haspopup="listbox"]':[L.l0.height(32)]}],item:ev,itemDanger:[ev,{color:L.TV.accentNegativeStronger}]});function ey(e){var t=e.onEdit,n=e.onDelete;return(0,c.tZ)(_.Tg,{elevated:!0,css:eg.root,children:(0,c.tZ)(d.Z,{label:"Options",items:[{label:(0,c.BX)(E.G,{css:eg.item,children:[(0,c.tZ)(D.Z,{}),(0,c.tZ)(S.xv,{multiline:!1,children:"Edit"})]}),onClick:t},{label:(0,c.BX)(E.G,{css:eg.itemDanger,children:[(0,c.tZ)(P.Z,{}),(0,c.tZ)(S.xv,{multiline:!1,children:"Delete"})]}),isDescructive:!0,onClick:n}],onItemClick:function(e){var t;return null===(t=e.onClick)||void 0===t?void 0:t.call(e)}})})}var eb=[L.l0.p(4),L.l0.rowWithGap(4),L.l0.borderRadius(8)],ew=(0,T.X)({root:[eb,L.l0.width("40%"),L.l0.display.flex,L.l0.overflowX("hidden")],text:[L.l0.flex.growAndShrink(1)]}),eZ=(0,T.X)({root:[eb,L.l0.flex.growAndShrink(1)],text:[L.l0.flex.growAndShrink(1),L.l0.truncate,{fontFamily:L.TV.fontFamilyCode}]});function ex(e){var t=e.value;return(0,c.BX)(_.Tg,{elevated:!0,css:ew.root,children:[(0,c.tZ)(b.m,{tooltipText:"Copy secret",textToCopy:t}),(0,c.tZ)(k.u,{tooltip:(0,c.tZ)(S.xv,{children:t}),children:function(e,n){return(0,c.tZ)(S.xv,(0,o._)((0,i._)({ref:n},e),{multiline:!1,css:ew.text,children:t}))}})]})}function eC(e){var t=e.value,n=(0,a._)((0,Y.useState)(!1),2),r=n[0],i=n[1];return(0,c.BX)(_.Tg,{elevated:!0,css:eZ.root,children:[(0,c.tZ)(b.m,{tooltipText:"Copy secret",textToCopy:t}),(0,c.tZ)(S.xv,{multiline:!1,css:eZ.text,children:r?t:"•".repeat(t.length)}),(0,c.tZ)(Z.hU,{alt:"Toggle Secret",tooltipBehavior:"hidden",onClick:function(){return i(!r)},children:r?(0,c.tZ)(B.Z,{}):(0,c.tZ)(I.Z,{})})]})}function e_(e){var t=(0,a._)((0,Y.useState)(""===e.secret.value?{key:e.secret.key,value:""}:null),2),n=t[0],r=t[1],l=(0,a._)((0,Y.useState)(!1),2),s=l[0],u=l[1],d=(0,a._)((0,Y.useState)(!0),2),f=d[0],h=d[1],p=e.secret;if(n&&!e.readOnly){var m,v=e.onDeleteSecret,y=e.onUpdateSecret;return(0,c.BX)(c.HY,{children:[(0,c.BX)(E.G,{css:ef.secretItemEdit,children:[(0,c.BX)(E.G,{css:ef.secretItemEditInputs,children:[(0,c.BX)(E.G,{css:[L.l0.colWithGap(2),L.l0.width("40%")],children:[(0,c.tZ)(S.xv,{multiline:!1,css:[L.l0.pt(2),L.l0.pb(4)],variant:"small",color:"dimmer",children:"Key"}),(0,c.tZ)(E.G,{children:(0,c.tZ)(x.II,{value:null!==(m=null==n?void 0:n.key)&&void 0!==m?m:"",onChange:function(e){return r(function(t){return t?(0,o._)((0,i._)({},t),{key:e.target.value}):t})},placeholder:"SECRET_KEY",autoComplete:"off"})})]}),(0,c.BX)(E.G,{css:[L.l0.flex.growAndShrink(1),L.l0.colWithGap(2)],children:[(0,c.BX)(E.G,{css:[L.l0.flex.row,L.l0.rowWithGap(4),L.l0.align.center],children:[(0,c.tZ)(S.xv,{multiline:!1,css:[L.l0.pt(2),L.l0.pb(4)],variant:"small",color:"dimmer",children:"Value"}),(0,c.tZ)(Z.hU,{alt:"Toggle Visibility",tooltipBehavior:"hidden",onClick:function(){return h(!f)},children:f?(0,c.tZ)(I.Z,{}):(0,c.tZ)(B.Z,{})})]}),(0,c.tZ)(E.G,{children:(0,c.tZ)(x.II,{value:n.value,style:f?eh:void 0,onChange:function(e){return r(function(t){return t?(0,o._)((0,i._)({},t),{value:e.target.value}):t})}})})]})]}),(0,c.BX)(E.G,{css:[L.l0.flex.row,L.l0.rowWithGap(8)],children:[(0,c.tZ)(g.zx,{size:"small",text:"Delete",colorway:"negative",onClick:function(){return u(!0)}}),(0,c.tZ)(E.G,{css:L.l0.flex.grow(1)}),(0,c.tZ)(g.zx,{size:"small",text:"Cancel",onClick:function(){return r(null)}}),(0,c.tZ)(g.zx,{size:"small",colorway:"primary",text:""===e.secret.value?"Add Secret":"Update Secret",disabled:!(null==n?void 0:n.key.length),onClick:function(){n&&(y(p.key,{key:n.key.trim(),value:n.value}),r(null))}})]})]}),(0,c.tZ)(C.u,{isOpen:s,onRequestClose:function(){return u(!1)},children:(0,c.BX)(E.G,{children:[(0,c.BX)(S.xv,{variant:"subheadDefault",multiline:!1,children:["Delete ",p.key,"?"]}),(0,c.tZ)(S.xv,{color:"dimmer",multiline:!1,children:"Are you sure you would like to delete this secret? This cannot be undone."}),(0,c.BX)(E.G,{css:[L.l0.justify.end,L.l0.flex.row,L.l0.rowWithGap(8)],children:[(0,c.tZ)(g.zx,{text:"Cancel",onClick:function(){return u(!1)}}),(0,c.tZ)(g.zx,{text:"Delete",colorway:"negative",onClick:function(){return v(p.key)}})]})]})})]})}return(0,c.BX)(E.G,{css:ef.secretItem,children:[(0,c.tZ)(ex,{value:p.key}),(0,c.tZ)(eC,{value:p.value}),e.readOnly?null:(0,c.BX)(c.HY,{children:[(0,c.tZ)(E.G,{children:(0,c.tZ)(ey,{onEdit:function(){return r(p)},onDelete:function(){return u(!0)}})}),(0,c.tZ)(C.u,{isOpen:s,onRequestClose:function(){return u(!1)},children:(0,c.BX)(E.G,{css:[L.l0.colWithGap(24)],children:[(0,c.BX)(S.xv,{multiline:!1,variant:"headerDefault",children:["Delete ",p.key,"?"]}),(0,c.tZ)(S.xv,{color:"dimmer",multiline:!1,children:"Are you sure you would like to delete this secret? This cannot be undone."}),(0,c.BX)(E.G,{css:[L.l0.justify.end,L.l0.flex.row,L.l0.rowWithGap(12)],children:[(0,c.tZ)(g.zx,{text:"Cancel",onClick:function(){return u(!1)}}),(0,c.tZ)(g.zx,{iconLeft:(0,c.tZ)(P.Z,{}),text:"Yes, delete secret",colorway:"negative",onClick:function(){return e.onDeleteSecret(p.key)}})]})]})})]})]})}function eS(e){var t=e.secrets,n=e.onUpdateSecret,r=e.onDeleteSecret,i=e.onAddSecret,o=e.showAddSecret,l=e.onClose,s=Object.entries(t).filter(function(e){var t=(0,a._)(e,2);return""===(t[0],t[1])}),u=Object.entries(t).filter(function(e){var t=(0,a._)(e,2);return""!==(t[0],t[1])});return(0,c.BX)(E.G,{css:[L.l0.colWithGap(8),L.l0.px(8),L.l0.py(8)],children:[0!==s.length&&(0,c.BX)(c.HY,{children:[(0,c.BX)(E.G,{css:[L.l0.colWithGap(8)],children:[(0,c.tZ)(S.xv,{variant:"subheadDefault",multiline:!1,children:"Configure missing Secret values"}),(0,c.tZ)(S.xv,{variant:"small",children:"This Repl contains Secrets that might be required. Add values to ensure the code runs as expected."}),(0,c.tZ)(E.G,{css:[L.l0.colWithGap(8)],children:s.map(function(e){var t=(0,a._)(e,2),i=t[0],o=t[1];return(0,c.tZ)(e_,{secret:{key:i,value:o},onUpdateSecret:n,onDeleteSecret:r},i)})})]}),(0,c.tZ)(w.R,{})]}),(0,c.BX)(E.G,{css:[L.l0.colWithGap(8)],children:[o?(0,c.tZ)(em,{onClose:l,onAdd:i,otherKeys:Object.keys(t)}):null,u.map(function(e){var t=(0,a._)(e,2),i=t[0],o=t[1];return(0,c.tZ)(e_,{secret:{key:i,value:o},onUpdateSecret:n,onDeleteSecret:r},i)})]})]})}function ek(e){var t=e.secrets,n=e.activeFile,r=(0,a._)((0,Y.useState)(Object.keys(t)[0]),2),i=r[0],o=r[1];return(0,q.Z)(n)&&(0,j.e)(n,i)&&0!==Object.keys(t).length?(0,c.BX)(E.G,{css:ef.accessSecrect,children:[(0,c.BX)(E.G,{css:ef.accessSecrectHeader,children:[(0,c.tZ)(S.xv,{multiline:!1,children:"Access secret"}),(0,c.tZ)(U.P,{css:L.l0.minWidth(48),items:Object.keys(t).map(function(e){return{title:e}}),selectedItem:{title:i},onChange:function(e){return o(e.title)}})]}),(0,c.tZ)(j.Z,{elevated:!0,keyName:i,filePath:n})]}):null}function eE(e,t){var n=(0,i._)({},e);return"add"===t.type?n[t.key]=t.value:"update"===t.type?(delete n[t.oldKey],n[t.key]=t.value):delete n[t.key],n}function eT(e){var t,n,o,s,d,b=e.readRawEnv,Z=e.writeRawEnv,x=e.getRunState,C=(0,h.T)(),_=(0,J.R3)(),k=(0,a._)((0,Y.useState)(null),2),T=k[0],D=k[1],I=(0,a._)((0,Y.useState)(!1),2),B=I[0],P=I[1],L=function(){P(!1)},U=(0,N.Z)();(0,Y.useEffect)(function(){(0,v.Cn)(v.U3.ENV_EDITOR_USED,{action:"opened"}),m.Z.set("enveditortour",!0)},[]),(0,Y.useEffect)(function(){function e(){return(e=(0,r._)(function(){var e;return(0,l.Jh)(this,function(t){switch(t.label){case 0:return[4,b()];case 1:return e=t.sent(),D($.Z.parse(e.toString())),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[b,D]);var M=(0,Y.useRef)(null),X=(0,Y.useRef)([]),F=(t=(0,r._)(function(e){var t,n,r,i,o,a;return(0,l.Jh)(this,function(a){switch(a.label){case 0:if(!T)throw Error("trying to write secrets before loading");D(t=eE(T,e)),X.current.push(e),n=Math.random(),M.current=n,i=null,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,b()];case 2:return i=a.sent(),[3,4];case 3:return o=a.sent(),u.Tb(Error("Error reading secrets: "+(null==o?void 0:o.message))),[3,4];case 4:if(M.current!==n)return[2];return i?(r=$.Z.parse(i),X.current.forEach(function(e){r=eE(r,e)}),D(r)):r=t,X.current=[],[4,Z($.Z.serialize(r))];case 5:return a.sent(),[2]}})}),function(e){return t.apply(this,arguments)}),W=(0,f.Z)().showConfirm,H=(n=(0,r._)(function(e){return(0,l.Jh)(this,function(t){return(0,v.j)(v.U3.ENV_EDITOR_USED,{action:"created",multiline:e.value.includes("\n")}),F((0,i._)({type:"add"},e)),x()===O.Ah.RUNNING&&W("Re-run your Repl to use this secret"),L(),[2]})}),function(e){return n.apply(this,arguments)}),j=(o=(0,r._)(function(e,t){return(0,l.Jh)(this,function(n){return(0,v.j)(v.U3.ENV_EDITOR_USED,{action:"updated",multiline:t.value.includes("\n")}),F((0,i._)({type:"update",oldKey:e},t)),[2]})}),function(e,t){return o.apply(this,arguments)}),q=(s=(0,r._)(function(e){return(0,l.Jh)(this,function(t){return(0,v.j)(v.U3.ENV_EDITOR_USED,{action:"deleted"}),F({type:"delete",key:e}),[2]})}),function(e){return s.apply(this,arguments)}),K=(0,p.Z)(function(){return T&&Object.keys(T).length>0},[T]);return C?(0,c.tZ)(V,{}):T&&U?(0,c.BX)(E.G,{css:ef.root,children:[(0,c.BX)(E.G,{css:ef.header,children:[(0,c.tZ)(S.xv,{css:ef.headerTitle,variant:"subheadDefault",multiline:!1,children:"Secrets"}),(0,c.tZ)(ec,{secrets:T,update:(d=(0,r._)(function(e){return(0,l.Jh)(this,function(t){switch(t.label){case 0:return D(e),[4,Z($.Z.serialize(e))];case 1:return t.sent(),[2]}})}),function(e){return d.apply(this,arguments)})}),(0,c.tZ)(y.Z,{iconLeft:(0,c.tZ)(R.Z,{}),href:"https://docs.replit.com/replit-workspace/workspace-features/secrets",size:"small",text:"Docs",target:"_blank"}),(0,c.tZ)(g.zx,{iconLeft:(0,c.tZ)(A.Z,{}),text:"New Secret",colorway:"primary",size:"small",onClick:function(){return P(!0)}})]}),(0,c.tZ)(E.G,{css:ef.dividerContainer,children:(0,c.tZ)(w.R,{})}),K||!1!==B?null:(0,c.tZ)(z,{}),(0,c.tZ)(eS,{secrets:T,onUpdateSecret:j,onDeleteSecret:q,onAddSecret:H,showAddSecret:B,onClose:L}),_&&K?(0,c.tZ)(ek,{secrets:T,activeFile:_}):null]}):(0,c.tZ)(E.G,{css:ed,children:(0,c.tZ)(G.Z,{size:24})})}},38563:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(27387),i=n(66626),o=n(96583),a=n(81199),l=n(50959);function c(){var e=(0,a.Z)().secrets,t=(0,i._)((0,l.useState)(!1),2),n=t[0],c=t[1];return(0,l.useEffect)(function(){var t=!1;function n(){return(n=(0,r._)(function(){var n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,e.readSecrets()];case 1:if(n=r.sent(),t)return[2];return c(n.some(function(e){return""===e.value})),[2]}})})).apply(this,arguments)}return function(){n.apply(this,arguments)}(),function(){t=!0}},[e]),n}},63416:function(e,t,n){n.d(t,{VY:function(){return U},HK:function(){return X},h4:function(){return B},Qc:function(){return A},LI:function(){return N},H4:function(){return F},$E:function(){return M},Mp:function(){return W}});var r=n(27387),i=n(96583),o=n(4216),a=n(77450),l=n(36647),c=n(75993),s=n(36559);function u(){return(u=(0,r._)(function(e,t){var n,r,o,a,l;return(0,i.Jh)(this,function(i){return n=(0,s.yC)(e),r=(0,s.UO)(e),o=new Blob([t.toBuffer()],{type:n}),(a=document.createElement("a")).download=r,l=window.URL.createObjectURL(o),a.href=l,a.style.display="none",document.body.appendChild(a),a.click(),setTimeout(function(){document.body.removeChild(a),URL.revokeObjectURL(l)},1e4),[2]})})).apply(this,arguments)}var d=n(31764),f=n(94778),h=n(4461),p=n(20795),m=n(84126),v=n(38057),g=n(66958),y=n(55821),b=n(72093),w=n(81199),Z=n(85421),x=n.n(Z),C=n(50959),_=n(50745),S=n(58045),k=n(66048),E=n(89748),T=n(37833),R=n(59786),D=n(57253),I=(0,a.iv)([b.l0.height(28),b.l0.flex.row,b.l0.align.center,{borderBottom:"1px solid ".concat(b.TV.backgroundHigher),opacity:.8,":hover":{opacity:1}}]);function B(e){return"/replEnvironmentDesktop"!==x().pathname?null:(0,o.tZ)(f.G,{css:I,children:e.children})}var G=(0,a.iv)([b.l0.flex.row,b.l0.align.center,b.l0.flex.growAndShrink(1),b.l0.overflowX("auto"),b.l0.height("100%"),{"&::-webkit-scrollbar":{height:0},scrollbarWidth:"none"}]);function A(e){return(0,o.tZ)(f.G,{css:G,children:e.children})}var P=(0,a.iv)([b.l0.flex.row,b.l0.align.center,b.l0.height("100%")]),L=(0,a.iv)([b.l0.flex.row,b.l0.align.center,b.l0.height("100%"),b.l0.px(2)]);function N(e){return(0,o.tZ)(f.G,{css:P,children:(0,o.tZ)(f.G,{css:L,children:e.children})})}var O=(0,a.iv)([b.l0.flex.growAndShrink(1),b.l0.position.relative,b.l0.overflow("hidden"),b.l0.borderRadius(0,0,8,8)]);function U(e){return(0,o.tZ)(f.G,{css:[O,e.children&&b.l0.center],children:e.children})}function M(e){return{type:(0,S.Dp)({path:e}),data:{path:e}}}function X(e){var t=e.path,n=e.performPaneOperation,r=e.children,i=(0,C.useCallback)(function(e){n({operation:"replace",pane:M(e)})},[n]);return(0,o.BX)(B,{children:[(0,o.tZ)(A,{children:(0,o.tZ)(T.tr,{path:t,onFileClick:i})}),r?(0,o.tZ)(N,{children:r}):null]})}function F(e,t){return{match:E.pl,data:{label:"Download",icon:(0,o.tZ)(v.Z,{}),type:"action",run:function(){return(0,r._)(function(){var n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return[4,t.readFile(e)];case 1:if((n=r.sent()).error)return[2,{type:"error",message:"Error downloading file"}];return[4,function(e,t){return u.apply(this,arguments)}(e,n.content)];case 2:return r.sent(),[2]}})})()}}}}function W(e){var t=e.path,n=e.performPaneOperation,a=(0,w.Z)(),s=(0,k._o)(),u=(0,R.P5)({controlName:"flag-draft-buffers"});return(0,l.Z)(function(){if(!t)return null;var e,l,f,v=[{match:E.pl,data:{label:"Copy file path",icon:(0,o.tZ)(p.Z,{}),type:"action",run:function(){(0,c.Z)(t)}}},{match:E.pl,data:{label:"Copy link",icon:(0,o.tZ)(g.Z,{}),type:"action",run:function(){var e=(0,_.dr)({path:t});(0,c.Z)(e)}}},(e=a.fs,l=function(e){n({operation:"replace",pane:{type:(0,S.Dp)({path:e}),data:{path:e}}})},{match:E.pl,data:{label:"Duplicate file",icon:(0,o.tZ)(m.Z,{}),type:"action",run:function(){return(0,r._)(function(){var n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,d.Z)(t,e)];case 1:return n=r.sent(),[3,3];case 2:return r.sent(),[2,{type:"error",message:"Error duplicating file"}];case 3:return l(n),[2]}})})()}}}),F(t,a.fs),{match:E.pl,data:{label:"Delete",icon:(0,o.tZ)(y.Z,{color:b.TV.redDefault}),type:"action",run:function(){s(t)}}}];return u&&v.unshift((f=a.fs,{match:E.pl,data:{label:"Save file",icon:(0,o.tZ)(h.Z,{}),type:"action",run:function(){return(0,r._)(function(){return(0,i.Jh)(this,function(e){switch(e.label){case 0:return[4,f.flush(new Set([t]),D.WL.MANUAL_SAVE)];case 1:return e.sent(),[2]}})})()}}})),v},[t,a.fs,n,s,u])}},55236:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(4216),i=n(77450),o=n(11715),a=n(36556),l=n(94778),c=n(72093),s=n(50959),u=n(73372),d=n(24605),f=(0,i.iv)([c.l0.justify.center,c.l0.pl(8),{overflow:"hidden",height:"100%",width:"100%","> svg":{opacity:.5,width:250,display:"flex"}}]);function h(e){var t=e.index,n=32*t+8;return(0,r.BX)(r.HY,{children:[(0,r.tZ)("rect",{x:0,y:n,rx:"3",ry:"3",width:16,height:16}),(0,r.tZ)("rect",{x:28,y:n,rx:"3",ry:"3",width:"".concat(100+(t%2!=0?-10*t:10*t)),height:16})]})}function p(e){var t=e.path,n=t===u.Ql,i=n?5:1;(0,s.useEffect)(function(){var e=a.kg.timeStart({isRootPath:n});return function(){e("time to load filetree folder")}},[n,t]);var c="fileTreeLoader-"+Math.random().toString();return(0,r.tZ)(l.G,{css:f,children:(0,r.tZ)(o.Z,{speed:2,backgroundColor:d.TV.backgroundHighest,foregroundColor:d.TV.backgroundHigher,height:32*i,width:250,viewBox:"0 0 250 ".concat(32*i),uniqueKey:c,children:Array(i).fill(null).map(function(e,t){return(0,r.tZ)(h,{index:t},t)})})})}},10378:function(e,t,n){n.d(t,{st:function(){return y}});var r,i,o=n(41733),a=n(30509),l=n(4216),c=n(64586),s=n(59786),u=n(19068),d=n(64479),f=n(82230),h=n(94778),p=n(49580),m=n(72093),v=n(21371),g=n(50959);(r=i||(i={})).AddFile="AddFile",r.AddFolder="AddFolder",r.UploadFile="UploadFile",r.UploadFolder="UploadFolder",r.DownloadZip="DownloadZip",r.Duplicate="Duplicate",r.ShowHiddenFiles="ShowHiddenFiles",r.HideHiddenFiles="HideHiddenFiles",r.OpenTab="OpenTab",r.OpenPane="OpenPane",r.CopyLink="CopyLink",r.CopyFilePath="CopyFilePath",r.CopyFolderPath="CopyFolderPath",r.OpenShellHere="OpenShellHere",r.Rename="Rename",r.Download="Download",r.Delete="Delete",r.OpenWith="OpenWith";var y={AddFile:{type:"AddFile",text:"Add file"},AddFolder:{type:"AddFolder",text:"Add folder"},UploadFile:{type:"UploadFile",text:"Upload file"},UploadFolder:{type:"UploadFolder",text:"Upload folder"},DownloadZip:{type:"DownloadZip",text:"Download as zip"},Duplicate:{type:"Duplicate",text:"Duplicate file"},ShowHiddenFiles:{type:"ShowHiddenFiles",text:"Show hidden files"},HideHiddenFiles:{type:"HideHiddenFiles",text:"Hide hidden files"},OpenTab:{type:"OpenTab",text:"Open tab"},OpenPane:{type:"OpenPane",text:"Open pane"},CopyFilePath:{type:"CopyFilePath",text:"Copy file path"},CopyFolderPath:{type:"CopyFolderPath",text:"Copy folder path"},CopyLink:{type:"CopyLink",text:"Copy link"},OpenShellHere:{type:"OpenShellHere",text:"Open shell here"},Rename:{type:"Rename",text:"Rename"},Download:{type:"Download",text:"Download"},Delete:{type:"Delete",text:"Delete"}},b={self:[m.l0.position.relative,m.l0.width(20),m.l0.height("100%"),m.l0.justify.center,{"& span":{height:"100%"}}],self2:[m.l0.position.relative,m.l0.width(16),m.l0.height("100%"),m.l0.justify.center,m.l0.pr(1)],button:[m.l0.display.flex,m.l0.align.center,m.l0.justify.center,m.l0.py(2),m.l0.top(0),m.l0.width("100%"),m.l0.border({width:0,color:"none"}),m.l0.cursor.pointer,m.l0.color.foregroundDimmest,m.l0.borderRadius(4),u.gU.filled,m.l0.position.relative,{top:-1,right:-1,height:"calc(100% + 2px)",backgroundColor:"transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}],button2:[m.l0.display.flex,m.l0.align.center,m.l0.py(2),m.l0.width("100%"),m.l0.height("100%"),m.l0.cursor.pointer,m.l0.color.foregroundDimmest,m.l0.focusRing,m.l0.borderRadius(4),{backgroundColor:"transparent",":hover":{color:m.TV.foregroundDefault}}],list:[m.l0.flex.column,m.l0.justify.center,m.l0.borderRadius(8),m.l0.zIndex(1),m.l0.backgroundColor.backgroundDefault,{listStyle:"none"},{":focus":{outline:"none"}}],option:function(e,t){return[m.l0.color.foregroundDefault,m.l0.p(8),m.l0.fontWeight.normal,m.l0.cursor.pointer,{whiteSpace:"nowrap"},t&&[m.l0.backgroundColor.backgroundHigher],e&&[{":hover":{backgroundColor:m.TV.accentNegativeDefault},":hover .option-label":{color:m.TV.white}}]]},optionLabel:function(e){return e?[m.l0.color.accentNegativeStronger]:[]}};function w(e){var t=e.isNegative,n=e.isHighlighted,r=e.children;return(0,l.tZ)(h.G,{css:b.option(t,n),children:(0,l.tZ)(f.xv,{className:"option-label",css:b.optionLabel(t),multiline:!1,children:r})})}var Z=h.K.ul,x=h.K.li,C=h.K.button,_=h.K.div;g.forwardRef(function(e,t){var n=e.isActive,r=e.actions,i=e.onAction,u=e.onOpenChange,S=(0,g.useRef)(!1),k=(0,v.L7)({items:r,onSelectedItemChange:function(e){var t=e.selectedItem;t&&(S.current||i(t),G())}}),E=k.isOpen,T=k.getToggleButtonProps,R=k.getMenuProps,D=k.highlightedIndex,I=k.getItemProps,B=k.openMenu,G=k.reset;(0,g.useImperativeHandle)(t,function(){return{open:B}}),(0,g.useEffect)(function(){u&&u(E)},[E,u]);var A=T(),P=(0,s.P5)({controlName:"flag-ws-density-filetree",logFlagToAnalytics:!1});return(0,l.tZ)(h.G,{css:P?b.self2:b.self,children:(0,l.BX)(c.Z,{elevated:!0,showArrow:!0,isOpen:E,placement:"right-start",padding:0,onClickOutside:G,children:[(0,l.tZ)(d.Tg,{background:n?"default":"root",css:[m.l0.height("100%"),{background:n?m.TV.backgroundHigher:"transparent",borderTopRightRadius:8,borderBottomRightRadius:8}],children:(0,l.tZ)(C,(0,a._)((0,o._)({},A),{css:P?b.button2:b.button,size:20,onClick:function(e){e.stopPropagation(),A.onClick(e)},children:(0,l.tZ)(p.Z,{})}))}),(0,l.tZ)(_,(0,a._)((0,o._)({},R({},{suppressRefError:!0})),{children:E?(0,l.tZ)(Z,{css:b.list,children:r.map(function(e,t){return(0,l.tZ)(x,(0,a._)((0,o._)({"data-cy":"filetree-node-action-".concat(e.type)},I({item:e,index:t,onClick:function(t){S.current=!0,setTimeout(function(){S.current=!1}),i(e),t.stopPropagation()}})),{children:(0,l.tZ)(w,{isHighlighted:D===t,isNegative:e.type===y.Delete.type,children:(0,l.BX)(h.G,{css:[m.l0.rowWithGap(8),m.l0.align.center],children:[(0,l.tZ)(f.xv,{multiline:!1,children:e.text}),"icon"in e?e.icon:null]})})}),e.text)})}):null}))]})})}).displayName="NodeActionsMenu"},4502:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(4216),i=n(15235),o=n(82230),a=n(94778),l=n(77794),c=n(72093),s=n(36559);function u(e){var t,n=e.paths,u=e.onCancel,d=e.onConfirm;return(0,r.BX)(a.G,{css:[c.l0.colWithGap(24)],children:[(0,r.tZ)(o.h4,{level:1,variant:"headerDefault",children:n.length>1?"Overwrite files?":"Overwrite file?"}),(0,r.BX)(o.xv,{children:[(t=(t=n).map(s.UO)).length<2?t[0]:"".concat(t.slice(0,-1).join(", ")," and ").concat(t.slice(-1))," already"," ",n.length>1?"exist":"exists"," in the destination, are you sure you want to overwrite ",n.length>1?"them":"it","? This cannot be undone."]}),(0,r.BX)(a.G,{css:[c.l0.rowWithGap(12),c.l0.justify.end],children:[(0,r.tZ)(i.zx,{onClick:function(){return u()},text:"Cancel"}),(0,r.tZ)(i.zx,{colorway:"negative",onClick:function(){return d()},text:"Yes, overwrite ".concat(n.length>1?"these files":"this file"),iconLeft:(0,r.tZ)(l.Z,{})})]})]})}},43208:function(e,t,n){n.d(t,{CN:function(){return o},CT:function(){return i},bO:function(){return a}});var r=n(11407),i="git",o={gitCommit:{id:"git.commit",name:"Git: Commit",scope:i,default:(0,r.l2)({cmdOrCtrl:!0,key:"Enter"})}},a=Object.values(o)},33651:function(e,t,n){n.d(t,{J:function(){return a}});var r=n(41733),i=n(60305),o=n(25150);function a(e,t){(0,i.j)(o.U3.GIT_FEATURE_USED,(0,r._)({action:e,source:"git-pane"},t))}},31534:function(e,t,n){n.d(t,{$8:function(){return m},Lr:function(){return w},ST:function(){return p},Zr:function(){return g},kb:function(){return v},po:function(){return h},uJ:function(){return y},yx:function(){return Z}});var r=n(4216),i=n(77865),o=n(82230),a=n(64432),l=n(94778),c=n(49224),s=n(46577),u=n(72093),d=n(36559),f=(0,c.X)({revertText:[u.l0.color.orangeStronger,u.l0.fontWeight.medium],mergeText:[u.l0.color.purpleStronger,u.l0.fontWeight.medium],pullRequestId:[u.l0.fontWeight.medium],hash:[u.l0.fontWeight.medium],filePathPrefix:[u.l0.color.foregroundDimmest],commitBody:[u.l0.font.code,{whiteSpace:"pre-wrap"},{fontSize:u.TV.fontSizeSmall}],clickableName:[u.l0.cursor.pointer,{"&:hover":{textDecoration:"underline"}}],tooltip:[u.l0.display.inlineFlex,u.l0.rowWithGap(4),u.l0.align.center],path:[{fontSize:u.TV.fontSizeSmall},u.l0.font.code],currentBranchIndicator:[u.l0.height(16),u.l0.width(16),u.l0.align.center],currentBranchDot:[u.l0.height(6),u.l0.width(6),u.l0.backgroundColor.accentPrimaryStronger,u.l0.borderRadius("full")],branchNameWrapper:[u.l0.flex.row,u.l0.align.center],fixTooltipDisplay:{"& > span":{display:"inline-block"}},headingWrapper:[u.l0.display.inlineFlex,u.l0.rowWithGap(4),u.l0.align.center,u.l0.flex.shrink(1),u.l0.overflow("hidden")],headingRemote:[{verticalAlign:"text-bottom"},u.l0.mr(4)],headingCurrent:[u.l0.px(4)],current:[u.l0.position.relative,u.l0.top("-1px"),u.l0.display.inlineFlex,u.l0.pl(2),u.l0.pr(8)],icon:[{verticalAlign:"baseline !important"},u.l0.mr(4)],bodyContainer:[u.l0.border({color:u.TV.outlineDimmest,direction:"full"}),u.l0.borderRadius(8),u.l0.p(16)]});function h(e){var t=e.text,n=e.className;return(0,r.tZ)("span",{className:n,css:f.revertText,children:t})}function p(e){var t=e.text,n=e.className;return(0,r.tZ)("span",{className:n,css:f.mergeText,children:t})}function m(e){var t,n=e.id,i=e.hash,o=e.className;return t=void 0===i||i?"string"==typeof n&&n.startsWith("#")?n:"#".concat(n):"string"==typeof n&&n.startsWith("#")?n.slice(1):"".concat(n),(0,r.tZ)("span",{className:o,css:f.pullRequestId,children:t})}function v(e){var t=e.hash,n=e.length,i=e.className;return(0,r.tZ)("span",{className:i,css:f.hash,children:t.slice(0,(void 0===n?8:n)+1)})}function g(e){var t=e.subject,n=e.remoteName,o=e.quoted,a=void 0!==o&&o,l=e.className;return n?(0,r.tZ)(i.ZP,{className:l,background:!1,lineBreaks:!0,themed:!0,useRemarkGfm:!0,remarkGitHubOptions:{repository:n},children:a?'"'.concat(t,'"'):t}):(0,r.tZ)("span",{className:l,children:a?'"'.concat(t,'"'):t})}function y(e){var t=e.body,n=e.view,o=e.className;return"Source"===(void 0===n?"Source":n)?(0,r.tZ)(l.G,{css:f.bodyContainer,children:(0,r.tZ)("pre",{className:o,css:f.commitBody,children:t})}):(0,r.tZ)(l.G,{css:f.bodyContainer,children:(0,r.tZ)(i.ZP,{className:o,background:!1,mentionsLink:!0,lineBreaks:!0,themed:!0,useRemarkGfm:!0,children:t})})}function b(){return(0,r.tZ)("span",{css:f.fixTooltipDisplay,children:(0,r.tZ)(a.u,{tooltip:"This is your current branch",children:(0,r.tZ)(l.G,{css:f.currentBranchIndicator,children:(0,r.tZ)(l.G,{css:f.currentBranchDot})})})})}function w(e){var t=e.name,n=e.remote,i=e.current,a=void 0!==i&&i,l=e.heading,c=void 0!==l&&l,u=e.icon,d=void 0!==u&&u,h=e.onClick,p=e.className,m=null;return(!0===d?m=c?(0,r.tZ)(s.Z,{size:16}):(0,r.tZ)(s.Z,{css:f.icon,size:12}):d&&(m=d),c)?(0,r.BX)("div",{css:f.headingWrapper,children:[m,(0,r.BX)(o.xv,{variant:"subheadDefault",multiline:!1,children:[n?(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{css:f.headingRemote,children:n}),(0,r.tZ)("span",{css:f.headingRemote,children:"/"})]}):null,h?(0,r.tZ)(C,{label:"View branch",onClick:h,children:t}):(0,r.tZ)("span",{children:t})]}),a?(0,r.tZ)("span",{css:c?f.headingCurrent:f.current,children:(0,r.tZ)(b,{})}):null]}):(0,r.BX)("span",{className:p,css:f.branchNameWrapper,children:[m,n?(0,r.BX)("span",{children:[n,"/"]}):null,h?(0,r.tZ)(C,{label:"View branch",onClick:h,children:t}):(0,r.tZ)("span",{children:t}),a?(0,r.tZ)(b,{}):null]})}function Z(e){var t=e.path,n=e.prefix,i=e.onClick,o=e.className,l=(0,d.UO)(t),c=!i&&(l===t||null!==n&&n+l===t);return(0,r.tZ)("span",{css:f.fixTooltipDisplay,children:(0,r.tZ)(a.u,{maxWidth:"auto",tooltip:(0,r.tZ)(x,{path:t,openable:!!i}),isDisabled:c,children:i?(0,r.BX)(C,{label:"Open ".concat(l),onClick:i,className:o,children:[n?(0,r.tZ)("span",{css:f.filePathPrefix,children:n}):null,(0,r.tZ)("span",{children:l})]}):(0,r.BX)("span",{className:o,children:[n?(0,r.tZ)("span",{css:f.filePathPrefix,children:n}):null,(0,r.tZ)("span",{children:l})]})})})}function x(e){var t=e.path,n=e.openable;return(0,r.BX)("span",{css:f.tooltip,children:[void 0===n||n?(0,r.tZ)("span",{children:"Open"}):null,(0,r.tZ)("span",{css:f.path,children:t})]})}function C(e){var t=e.label,n=e.onClick,i=e.className,o=e.children;return(0,r.tZ)("span",{className:i,css:f.clickableName,role:"button",tabIndex:-1,"aria-label":t,onClick:n,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(null==n||n())},children:o})}},69958:function(e,t,n){n.d(t,{FH:function(){return u},PZ:function(){return d},fF:function(){return s}});var r=n(21262),i=n(71440),o=n(23409);function a(){var e=(0,r._)(["\n  fragment HandleReplRedirectionReplRedirect on ReplRedirect {\n    replUrl\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  fragment HandleReplRedirectionSubscriptionExpired on SubscriptionExpiredError {\n    isOwner\n    replId\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,r._)(["\n  fragment HandleReplRedirectionRepl on Repl {\n    id\n    language\n    ...ReplLinkRepl\n    authorizations {\n      editFileContents {\n        isAuthorized\n      }\n    }\n    org {\n      id\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var s=(0,i.Ps)(a()),u=(0,i.Ps)(l()),d=(0,i.Ps)(c(),o.Y)},29437:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(4216),i=n(41876),o=n(61967),a=n(99450),l=n(85421),c=n(50959),s=n(93680);function u(e,t){return!!e&&("ReplRedirect"===e.__typename||"SubscriptionExpiredError"===e.__typename||!e.authorizations.editFileContents.isAuthorized||!(0,a.FJ)(t.query.skipNixMigration,"boolean")&&(0,s.O)(e))}function d(e){var t=e.replResponse,n=e.replUrl,a=e.children,s=(0,l.useRouter)();if((0,c.useEffect)(function(){if(u(t,s)){if("SubscriptionExpiredError"===t.__typename){var e=t.replId,r=t.isOwner,i=n.split("/")[1].slice(1);s.replace({pathname:"/expiredPrivateRepl",query:{isOwner:r,ownerUsername:i,replId:e}},s.asPath);return}if("ReplRedirect"===t.__typename){window.location.href=t.replUrl;return}if(!t.authorizations.editFileContents.isAuthorized){var a=(0,o.j3)(t),l=a.href,c=a.as;s.replace(l,c);return}window.location.reload()}},[t,s,n]),u(t,s)){var d="";return"ReplRedirect"===t.__typename?d="Repl moved, redirecting":"SubscriptionExpiredError"===t.__typename?d="Subscription expired, redirecting":t.authorizations.editFileContents.isAuthorized&&(d="Your Repl requires an upgrade, please wait"),(0,r.tZ)(i.Z,{reason:d})}return(0,r.tZ)(r.HY,{children:a})}},96264:function(e,t,n){n.d(t,{Ai:function(){return g},BI:function(){return u},Jp:function(){return d},_H:function(){return f},_Z:function(){return v},bA:function(){return m},ox:function(){return y}});var r=n(41733),i=n(30509),o=n(36647),a=n(22750),l=n(40635),c=n(50959),s=n(48376),u=(0,s.u)(function(){return null}),d=(0,s.u)(function(){return null});function f(e){var t=d.current();(0,c.useEffect)(function(){e!==t&&d.set(function(){return e})},[e,t])}var h=(0,l.cn)(null),p=(0,l.cn)(null,function(e,t,n){var o,a,l=e(h),c=l?(0,r._)({},l,n):(0,r._)({},n),s=null==c?void 0:c.changes,d=null==c?void 0:c.filePath;if(!d||!s)throw Error('"filePath", "changes", "users" required when initializing history state');var f=(a=(o=(0,i._)((0,r._)({},c),{changes:s,filePath:d})).changes.length,(0,r._)({users:{},count:a,version:Math.max(0,a-1),playing:!1,comparing:!1},o));u.set(function(){return f});var p=f.changes.length;if(0===p){t(h,f);return}(null==l?void 0:l.changes)&&f.changes!==l.changes&&(f.count=p,f.version=Math.min(f.version,p-1),f.playing=!1,f.comparing=!1),f.version===p-1&&(f.playing=!1),t(h,f)});function m(){return(0,a.Dv)(h,{store:b()})}function v(){return(0,a.b9)(p,{store:b()})}function g(){return(0,a.b9)((0,o.Z)(function(){return(0,l.cn)(null,function(e,t){t(h,null)})},[]),{store:b()})}var y=(0,c.createContext)(null);function b(){var e=(0,c.useContext)(y);if(!e)throw Error("Expected store in context");return e}},76820:function(e,t,n){var r=n(4216),i=n(15235),o=n(45271),a=n(82230),l=n(94778),c=n(49224),s=n(90733),u=n(72093),d=n(85421),f=(0,c.X)({root:[u.l0.colWithGap(32)],header:[u.l0.rowWithGap(16),u.l0.align.center],icon:[u.l0.color.orangeStrongest],body:[u.l0.pr(32),u.l0.colWithGap(16)],list:[u.l0.colWithGap(16),u.l0.pl(16)],buttons:[u.l0.rowWithGap(16),u.l0.justify.end]});t.Z=function(e){var t=e.isOpen,n=(0,d.useRouter)();return(0,r.tZ)(o.u,{preventClose:!0,isOpen:t,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.BX)(l.G,{css:f.root,children:[(0,r.BX)(l.G,{css:f.header,children:[(0,r.tZ)(s.Z,{size:24,css:f.icon}),(0,r.tZ)(a.h4,{css:[{width:"fit-content"}],level:2,variant:"headerDefault",children:"You can’t join this Repl from Firewall Mode."})]}),(0,r.BX)(l.G,{css:f.body,children:[(0,r.tZ)(a.xv,{children:"This Repl was started by someone not in Firewall Mode. If you would like to join, please do one of the following:"}),(0,r.BX)(l.G,{css:f.list,children:[(0,r.tZ)(a.xv,{multiline:!1,children:"• Exit Firewall Mode."}),(0,r.tZ)(a.xv,{multiline:!1,children:"• Ask the creator to open this Repl in Firewall Mode."})]})]}),(0,r.BX)(l.G,{css:f.buttons,children:[(0,r.tZ)(i.zx,{text:"Exit Firewall Mode",onClick:function(){window.location.href="https://www.replit.com".concat(n.asPath)}}),(0,r.tZ)(i.zx,{text:"Leave",onClick:function(){n.push("/home","~/")}})]})]})})}},5010:function(e,t,n){n.d(t,{Z:function(){return _}});var r=n(4216),i=n(39271),o=n(15235),a=n(45271),l=n(82230),c=n(64432),s=n(94778),u=n(49224),d=n(11721),f=n(72093),h=n(47336),p=n.n(h),m=n(85421),v=n(41733),g=n(21262),y=n(71440),b=n(58995);function w(){var e=(0,g._)(["\n  query NotAllowedModal {\n    currentUser {\n      id\n      isStaff: hasRole(role: REPLIT_STAFF)\n    }\n  }\n"]);return w=function(){return e},e}var Z={},x=(0,y.Ps)(w()),C=(0,u.X)({root:[f.l0.colWithGap(32)],header:[f.l0.rowWithGap(16),f.l0.align.center],body:[f.l0.colWithGap(16)],staffHelpers:[f.l0.colWithGap(8),f.l0.border({color:"var(--accent-negative-default)",width:1,style:"solid"}),f.l0.overflow("hidden")],buttons:[f.l0.rowWithGap(16),f.l0.justify.end]}),_=function(e){var t,n,u=e.isOpen,h=(0,m.useRouter)(),g=(t=(0,v._)({},Z,{skip:!u}),b.a(x,t)).data,y=(0,i.Z)(),w=null==g?void 0:null===(n=g.currentUser)||void 0===n?void 0:n.isStaff;return(0,r.tZ)(a.u,{preventClose:!0,isOpen:u,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.BX)(s.G,{css:C.root,children:[(0,r.tZ)(s.G,{css:C.header,children:(0,r.tZ)(l.h4,{css:{width:"fit-content"},level:2,variant:"headerDefault",children:"You can’t run this Repl right now."})}),(0,r.BX)(s.G,{css:C.body,children:[(0,r.BX)(l.xv,{children:["It may be temporarily unavailable or it may have violated our"," ",(0,r.tZ)(p(),{legacyBehavior:!0,href:"/site/terms",children:"Terms of Service"}),"."]}),(0,r.tZ)(l.xv,{children:"If you are the owner of this Repl and believe you should be able to run it, you can try again later or contact support."}),w?(0,r.BX)(s.G,{css:C.staffHelpers,children:[(0,r.BX)(s.G,{css:f.l0.rowWithGap(8),children:[(0,r.tZ)(c.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,r.tZ)(d.Z,{})}),(0,r.tZ)(l.h4,{level:3,children:"Debug Info"})]}),(0,r.tZ)(s.G,{children:(0,r.BX)(l.xv,{children:["Repl ID ",y," is not allowed to run. This is most likely due to a policy takedown."]})}),(0,r.tZ)(s.G,{children:(0,r.BX)(l.xv,{multiline:!1,children:[(0,r.tZ)(p(),{legacyBehavior:!0,href:"https://app.datadoghq.com/logs?query=%40replid%3A".concat(y),children:"All datadog logs"})," ","•"," ",(0,r.tZ)(p(),{legacyBehavior:!0,href:"https://app.datadoghq.com/logs?query=%40replid%3A".concat(y,"+taking+down"),children:"Takedown-specific logs"})]})})]}):null]}),(0,r.BX)(s.G,{css:C.buttons,children:[(0,r.tZ)(o.zx,{text:"Reload",onClick:function(){window.location.reload()}}),(0,r.tZ)(o.zx,{text:"Leave",onClick:function(){h.push("/home","~/")}})]})]})})}},79556:function(e,t,n){n.d(t,{h:function(){return k},w:function(){return _}});var r=n(41733),i=n(30509),o=n(4216),a=n(36647),l=n(46026),c=n(18060),s=n(50959),u=n(41974),d=n(40635),f=n(66626),h=n(22750);function p(){return(0,f._)((0,s.useState)(function(){return(0,d.MT)()}),1)[0]}var m=(0,s.createContext)(null),v=function(e){return(0,h.b9)(e,{store:function(){var e=(0,s.useContext)(m);if(!e)throw Error("Expected store in context");return e}()})},g=(0,d.cn)(-1),y=(0,d.cn)([]),b=(0,d.cn)(void 0),w=(0,d.cn)(null,function(e,t,n){var r=e(b);switch(r&&(clearTimeout(r.id),r.cb()),n){case"forward":t(g,function(t){return Math.min(e(y).length,t+1)});break;case"backward":t(g,function(e){return Math.max(0,e-1)})}var i=e(y),o=e(g);return o>=i.length?"":i[o]}),Z=(0,d.cn)(null,function(e,t,n){clearTimeout(null===(r=e(b))||void 0===r?void 0:r.id);var r,i=function(){if(n.length>0){var r=!1;t(y,function(t){return(0,u.Uy)(t,function(t){if(n!==t[e(g)])for(r=!0,t.push(n);t.length>20;)t.shift()})}),r&&t(g,e(y).length-1)}t(b,void 0)};t(b,{id:setTimeout(i,2e3),cb:i})});function x(e){var t,n=v(Z),o=(t=v(w),{forward:(0,a.Z)(function(){return function(){return t("forward")}},[t]),backward:(0,a.Z)(function(){return function(){return t("backward")}},[t])}),c=o.forward,u=o.backward,d=(0,s.useRef)(e.value);return(0,s.useEffect)(function(){e.value!==(null==d?void 0:d.current)&&(e.value&&n(e.value),d.current=e.value)},[n,e.value]),(0,i._)((0,r._)({},e),{onKeyDown:(0,a.Z)(function(){return function(t){if(t.shiftKey||(0,l.jh)(t)){null===(r=e.onKeyDown)||void 0===r||r.call(e,t);return}var n,r,i=t.currentTarget,o=!!i.value.match(/\n/);if("ArrowUp"===t.key){if(o&&i.selectionStart&&i.selectionStart>0)return;e.onChange(u()),t.preventDefault(),t.stopPropagation();return}if("ArrowDown"===t.key){if(o&&i.selectionEnd&&i.selectionEnd<i.value.length)return;e.onChange(c()),t.preventDefault(),t.stopPropagation();return}null===(n=e.onKeyDown)||void 0===n||n.call(e,t)}},[u,c,e]),onChange:(0,a.Z)(function(){return function(t){e.onChange(t.target.value)}},[e])})}var C=s.forwardRef(function(e,t){var n=x(e);return(0,o.tZ)(c.B,(0,r._)({ref:t},n))}),_=s.forwardRef(function(e,t){var n=p();return(0,o.tZ)(m.Provider,{value:n,children:(0,o.tZ)(C,(0,r._)({ref:t},e))})}),S=s.forwardRef(function(e,t){var n=x(e);return(0,o.tZ)(c.II,(0,r._)({ref:t},e,n))}),k=s.forwardRef(function(e,t){var n=p();return(0,o.tZ)(m.Provider,{value:n,children:(0,o.tZ)(S,(0,r._)({ref:t},e))})})},60433:function(e,t,n){n.d(t,{m:function(){return v}});var r=n(4216),i=n(77450),o=n(64432),a=n(94778),l=n(49224),c=n(81727),s=n(81836),u=n(1947),d=n(72093),f=n(63466),h=(0,i.F4)("0%,100%{opacity:1;}50%{opacity:0.25;}"),p=(0,l.X)({root:[d.l0.height(20),d.l0.width(20),d.l0.center]}),m=(0,l.X)({root:[p.root],pulseRoot:[p.root,{animation:"".concat(h," 2s infinite")}]});function v(){var e=(0,f.Z)(),t=e.isSaving;return e.isOffline?(0,r.tZ)(o.u,{tooltip:"Reconnecting, changes will be synced when you’re online",placement:"right",children:(0,r.tZ)(a.G,{css:m.root,children:(0,r.tZ)(c.Z,{size:16,color:d.TV.redDefault})})}):t?(0,r.tZ)(o.u,{tooltip:"Saving",placement:"right",children:(0,r.tZ)(a.G,{css:m.pulseRoot,children:(0,r.tZ)(s.Z,{size:16,color:d.TV.foregroundDimmest})})}):(0,r.tZ)(o.u,{tooltip:"Saved",placement:"right",children:(0,r.tZ)(a.G,{css:m.root,children:(0,r.tZ)(u.Z,{size:16,color:d.TV.foregroundDimmest})})})}},93213:function(e,t,n){n.d(t,{X2:function(){return d},iA:function(){return h},sg:function(){return f}});var r=n(41733),i=n(30509),o=n(98924),a=n(4216),l=n(94778),c=n(49224),s=n(72093);n(50959);var u=(0,c.X)({table:{},tableRow:[s.l0.rowWithGap(12),s.l0.align.center,s.l0.border({direction:"bottom"}),{boxSizing:"border-box"}],wrapper:[s.l0.rowWithGap(0)],column:[s.l0.display.flex,s.l0.colWithGap(0),s.l0.justify.center,s.l0.border({direction:"right"}),{":last-child":{borderRight:0}}],cell:[s.l0.rowWithGap(0),s.l0.align.center,s.l0.color.foregroundDimmest,s.l0.justify.spaceBetween,s.l0.fontSize("small"),s.l0.mx(4),s.l0.py(2),{overflow:"hidden",whiteSpace:"nowrap"}],responsiveWrapper:[],responsiveColumn:[]}),d=function(e){var t=e.children,n=(0,o._)(e,["children"]);return(0,a.tZ)("tr",(0,i._)((0,r._)({css:u.tableRow},n),{children:(0,a.tZ)(l.G,{css:u.wrapper,children:t})}))},f=function(e){var t=e.header,n=e.width,r=e.last,i=e.children,o={};return(n&&(o.width=n),r&&(o.marginLeft="auto"),void 0!==t&&t)?(0,a.tZ)("th",{style:o,children:(0,a.tZ)(l.G,{css:u.cell,children:i})}):(0,a.tZ)("td",{css:u.column,style:o,children:(0,a.tZ)(l.G,{css:u.cell,children:i})})},h=function(e){var t=e.children;return(0,a.tZ)("table",{css:u.table,children:t})}},4911:function(e,t,n){n.d(t,{Z:function(){return G}});var r=n(66626),i=n(4216),o=n(15235),a=n(85763),l=n(99266),c=n(99236),s=n(64479),u=n(82230),d=n(94778),f=n(49224),h=n(70501),p=n(23936),m=n(87128),v=n(72093),g=n(50959),y=n(27482),b=n(36474),w=/(.+)(?:\S+)?<([^>,]+)[>,]/,Z=d.K.span;function x(e){var t=e.author,n=w.exec(t);if(n){var r=n[1],o=n[2];return(0,i.BX)(i.HY,{children:["By ",r,(0,i.BX)("a",{href:"mailto:".concat(o),children:["<",o,">"]})]})}return(0,i.BX)(Z,{children:["By ",t]})}var C=n(82400),_=n(38057),S=n(29318),k=n(55821);function E(e){var t=e.isInstalled,n=e.isInQueue;return e.isCurrentAction?(0,i.tZ)(S.Z,{}):n?(0,i.tZ)(C.Z,{}):t?(0,i.tZ)(k.Z,{}):(0,i.tZ)(_.Z,{})}var T=n(69750),R=d.K.span,D=(0,f.X)({metadata:[v.l0.colWithGap(2)],metadataSkeleton:[v.l0.colWithGap(8),v.l0.pt(4)],metadataSkeletonVersion:[l.p.foregroundPulse(),v.l0.height(16),v.l0.maxWidth(64),v.l0.borderRadius(4)],metadataSkeletonDescription:[l.p.foregroundPulse(),v.l0.height(16),v.l0.borderRadius(4),v.l0.maxWidth(425)],root:[v.l0.borderRadius(8),v.l0.p(8)],header:[v.l0.flex.row,v.l0.justify.spaceBetween],headerTitle:[v.l0.display.flex,v.l0.rowWithGap(8),v.l0.flex.growAndShrink(1)],headerTitleText:[v.l0.display.inline,v.l0.flex.growAndShrink(1),v.l0.overflow("hidden"),v.l0.truncate],headerTitlePills:[v.l0.display.inlineFlex,v.l0.rowWithGap(4),v.l0.flex.shrink(0)],headerButton:[],content:[v.l0.colWithGap(4)],error:[v.l0.mt(4)],actions:[v.l0.rowWithGap(8),v.l0.mt(8)],consoleButton:[v.l0.width("calc(50% - ".concat(v.TV.space8,")"))],cancelButton:[v.l0.width("calc(50% - ".concat(v.TV.space8,")"))],actionButton:[v.l0.flex.grow(1),v.l0.flex.shrink(0)]});function I(e){var t=e.title,n=e.content,r=e.isExpanded;return(0,i.BX)(d.G,{css:D.metadata,children:[t?(0,i.tZ)(u.xv,{color:"dimmer",children:t}):null,n?(0,i.tZ)(u.xv,{maxLines:r?void 0:1,children:n}):null]})}function B(e){var t=e.title,n=e.content;return(0,i.BX)(d.G,{css:D.metadataSkeleton,children:[void 0===t||t?(0,i.tZ)(d.G,{css:D.metadataSkeletonVersion}):null,void 0===n||n?(0,i.tZ)(d.G,{css:D.metadataSkeletonDescription}):null]})}function G(e){var t,n=e.name,l=e.pkg,f=e.isMetadataLoading,v=e.openConsole,w=e.pills,Z=(0,b.ZR)(),C=(0,y.te)(null==Z?void 0:Z.id),_=(0,y.pN)(null==Z?void 0:Z.id),S=(0,y.B2)(),k=(0,y.cW)(),G=(0,y.wY)(),A=(0,T.Z)(l.license),P=(0,g.useMemo)(function(){return!!(null!==S&&S.pkgs.find(function(e){return e.name===l.name}))},[S]),L=(0,g.useMemo)(function(){return k.find(function(e){return e.pkgs.find(function(e){return e.name===l.name})})},[k]),N=k.length>1&&!!L,O=(0,g.useMemo)(function(){return!!C.find(function(e){return e.name===l.name})},[C]),U=!!(l.homepageURL||l.license||l.author),M=(0,g.useMemo)(function(){return!!_.find(function(e){return e.name===l.name})},[_]),X=(0,r._)((0,g.useState)(!1),2),F=X[0],W=X[1],H=(0,y.jh)(),V=(0,y.Wx)(),z=(0,y.zi)();return(0,i.BX)(s.Tg,{css:D.root,elevated:!0,children:[(0,i.BX)(d.G,{css:D.header,children:[(0,i.BX)(u.h4,{css:D.headerTitle,level:2,variant:"subheadDefault",multiline:!1,children:[(0,i.BX)(R,{css:D.headerTitleText,children:[null!=n?n:l.name,l.version?(0,i.BX)(u.xv,{color:"dimmer",children:["@",l.version]}):null]}),w?(0,i.tZ)(d.G,{css:D.headerTitlePills,children:w}):null]}),U?(0,i.tZ)(a.hU,{css:D.headerButton,alt:"Show more info",tooltipBehavior:"hidden",onClick:function(){return W(function(e){return!e})},children:(0,i.tZ)(h.Z,{rotate:F?90:0})}):null]}),(0,i.tZ)(d.G,{css:D.content,children:void 0!==f&&f?(0,i.tZ)(B,{title:!1}):(0,i.BX)(i.HY,{children:[(0,i.tZ)(I,{content:null!==(t=l.description)&&void 0!==t?t:"This package has no description.",isExpanded:F}),l.homepageURL&&F?(0,i.tZ)(I,{content:(0,i.tZ)("a",{href:l.homepageURL,rel:"noreferrer noopener",target:"_blank",children:l.homepageURL}),isExpanded:F}):null,A&&F?(0,i.tZ)(I,{content:A,isExpanded:F}):null,l.author&&F?(0,i.tZ)(I,{content:(0,i.tZ)(x,{author:l.author}),isExpanded:F}):null]})}),M?(0,i.tZ)(c.E,{css:D.error,colorway:"negative",icon:(0,i.tZ)(m.Z,{}),text:"Couldn't ".concat(O?"uninstall":"install"," package. See Console for details, or try again.")}):null,(0,i.tZ)(d.G,{css:D.actions,children:M?(0,i.BX)(i.HY,{children:[(0,i.tZ)(o.zx,{css:D.consoleButton,text:"Console",onClick:function(){v()},disabled:P||N,colorway:"primary",iconLeft:(0,i.tZ)(p.Z,{})}),(0,i.tZ)(o.zx,{css:D.actionButton,text:"Try Again",onClick:function(){(null==Z?void 0:Z.id)&&(G(Z.id,[l]),O?V({id:Z.id,pkg:l}):H({id:Z.id,pkg:l}))},loading:P||N,colorway:O?"red":void 0,variant:O?"outlined":void 0,iconLeft:(0,i.tZ)(E,{isInstalled:O,isInQueue:N,isCurrentAction:P})})]}):(0,i.BX)(i.HY,{children:[(0,i.tZ)(o.zx,{css:D.actionButton,text:P?(null==S?void 0:S.kind)===y.TH.Install?"Installing":"Removing":N?(null==L?void 0:L.kind)===y.TH.Install?"Waiting to install":"Waiting to remove":O?"Remove":"Install",onClick:function(){(null==Z?void 0:Z.id)&&(O?V({id:Z.id,pkg:l}):H({id:Z.id,pkg:l}))},loading:P||N,colorway:O?"red":void 0,variant:O?"outlined":void 0,iconLeft:(0,i.tZ)(E,{isInstalled:O,isInQueue:N,isCurrentAction:P})}),N?(0,i.tZ)(o.zx,{css:D.cancelButton,text:"Cancel",onClick:function(){l.name&&z(l.name)},disabled:P,loading:P}):null]})})]})}},93939:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(4216),i=n(4911);function o(e){var t=e.pkg,n=e.openConsole;return(0,r.tZ)(i.Z,{pkg:t,openConsole:n})}},69750:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(50959),i=n(41331),o=n.n(i);function a(e){return(0,r.useMemo)(function(){return!e||e.length>40?"Unknown License":o()(e,{upgrade:!1})||"Unknown License"},[e])}},15661:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(41733),i=n(81199),o=n(50959),a=n(9142),l=n(36474);function c(){var e=(0,i.Z)(),t=(0,l.Bm)();return(0,o.useCallback)(function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t();return(null==o?void 0:o.id)?(0,a.C)(o.id).search((0,r._)({id:o.id,query:n,services:e},i)):[]},[])}},90188:function(e,t,n){n.d(t,{I:function(){return u}});var r=n(41733),i=n(30509),o=n(59786),a=n(91175),l=n(42385),c=n(50959),s={nodejs:["package.json","package-lock.json","yarn.lock","node_modules/"],python:["poetry.lock","pyproject.toml","requirements.txt",".venv/",".local"],ruby:["Gemfile","Gemfile.lock"],java:["pom.xml","target"]};function u(){var e=(0,l.T)(),t=(0,a.T)(),n=(0,o.P5)({controlName:"flag-system-dependencies-search"});return{configs:(0,c.useMemo)(function(){var o=(null==e?void 0:e.packagers)||[],a=(null==o?void 0:o.map(function(e){var t,n;return(0,i._)((0,r._)({},e),{title:e.language,packagerFiles:(null===(t=e.packagerFiles)||void 0===t?void 0:t.length)?e.packagerFiles:null!==(n=s[e.language])&&void 0!==n?n:[]})}))||[];return t&&a.push({id:"html",title:"html",name:"HTML Packager",language:"html",packageSearch:!0,guessImports:!1,packagerFiles:[]}),a.push({id:"nix",title:"system",name:"System Dependencies",language:"nix",packageSearch:n,guessImports:!1,packagerFiles:["replit.nix"]}),a},[e,t,n]),loading:!e}}},9142:function(e,t,n){n.d(t,{C:function(){return h}});var r,i,o=n(27387),a=n(42516),l=n(96583),c="index.html",s=/^\s*<script src="https:\/\/cdnjs\.cloudflare\.com\/ajax\/libs\/([^/]+)\/([^/]+)\/.+.js"><\/script>$/,u=(r={name:"html",getInstalledPackages:function(e){var t=e.services.fs;return(0,o._)(function(){return(0,l.Jh)(this,function(e){switch(e.label){case 0:return[4,t.stat(c)];case 1:var n;if(!e.sent().exists)return[2,[]];return[2,new Promise((n=(0,o._)(function(e){var n;return(0,l.Jh)(this,function(r){return n=t.watchTextFile(c,{onReady:function(t){var r=t.initialContent,i=[],o=!0,a=!1,l=void 0;try{for(var c,u=r.split("\n")[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value.match(s);d&&i.push({name:d[1],version:d[2]})}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}n(),e(i)},onError:function(){n(),e([])}}),[2]})}),function(e){return n.apply(this,arguments)}))]}})})()},getPackageInfo:function(e){var t=e.name;return(0,o._)(function(){var e,n;return(0,l.Jh)(this,function(r){switch(r.label){case 0:return[4,fetch("/data/cdnjs/info/".concat(encodeURIComponent(t)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:if(!(e=r.sent()).ok)return[2,void 0];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,e.json()];case 3:if(n=r.sent())return[2,{name:n.name,version:n.version,description:n.description,homepageURL:n.link,sourceCodeURL:n.include}];return[3,5];case 4:return r.sent(),[2,void 0];case 5:return[2]}})})()},search:function(e){var t=e.query;return(0,o._)(function(){var e;return(0,l.Jh)(this,function(n){switch(n.label){case 0:return[4,fetch("/data/cdnjs/search/".concat(encodeURIComponent(t)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:if(!(e=n.sent()).ok)return[2,[]];return[4,e.json()];case 2:return[2,n.sent().map(function(e){return{name:e.name,version:e.version,description:e.description,homepageURL:e.link,sourceCodeURL:e.include}})]}})})()}},(0,a._)(r,"install",function(e){var t=e.pkgs,n=e.services.fs;return(0,o._)(function(){var e,r,i,a,s,u,d;return(0,l.Jh)(this,function(f){switch(f.label){case 0:return[4,n.stat(c)];case 1:if(!f.sent().exists)return[2];e=!0,r=!1,i=void 0,f.label=2;case 2:f.trys.push([2,7,8,9]),a=function(){var e;return(0,l.Jh)(this,function(t){switch(t.label){case 0:var r;return e=u.value,[4,new Promise((r=(0,o._)(function(t){var r;return(0,l.Jh)(this,function(i){return r=n.watchTextFile(c,{onReady:function(i){var a=i.initialContent,c=i.writeChange;return(0,o._)(function(){var i,o;return(0,l.Jh)(this,function(l){switch(l.label){case 0:i='<script src="'.concat(e.sourceCodeURL,'"></script>\n'),-1===(o=a.indexOf("<script"))&&(o=a.indexOf("</body>")),-1===o&&(o=a.length),c({from:o,insert:i}),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,n.flush()];case 2:case 3:return l.sent(),[3,5];case 4:return r(),t(),[7];case 5:return[2]}})})()},onError:function(){r(),t()}}),[2]})}),function(e){return r.apply(this,arguments)}))];case 1:return t.sent(),[2]}})},s=t[Symbol.iterator](),f.label=3;case 3:if(e=(u=s.next()).done)return[3,6];return[5,(0,l.XA)(a())];case 4:f.sent(),f.label=5;case 5:return e=!0,[3,3];case 6:return[3,9];case 7:return d=f.sent(),r=!0,i=d,[3,9];case 8:try{e||null==s.return||s.return()}finally{if(r)throw i}return[7];case 9:return[2]}})})()}),(0,a._)(r,"uninstall",function(e){var t=e.pkgs,n=e.services.fs;return(0,o._)(function(){var e,r,i,a,u,d,f;return(0,l.Jh)(this,function(h){switch(h.label){case 0:return[4,n.stat(c)];case 1:if(!h.sent().exists)return[2];e=!0,r=!1,i=void 0,h.label=2;case 2:h.trys.push([2,7,8,9]),a=function(){var e;return(0,l.Jh)(this,function(t){switch(t.label){case 0:var r;return e=d.value,[4,new Promise((r=(0,o._)(function(t){var r;return(0,l.Jh)(this,function(i){return r=n.watchTextFile(c,{onReady:function(i){var a=i.initialContent,c=i.writeChange;return(0,o._)(function(){var i,o,u,d,f,h,p,m,v;return(0,l.Jh)(this,function(l){switch(l.label){case 0:i=0,o=!0,u=!1,d=void 0;try{for(f=a.split("\n")[Symbol.iterator]();!(o=(h=f.next()).done);o=!0)(m=(p=h.value).match(s))&&(v=m[1],e.name===v&&c({from:i,to:i+p.length+1})),i+=p.length+1}catch(e){u=!0,d=e}finally{try{o||null==f.return||f.return()}finally{if(u)throw d}}l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,n.flush()];case 2:case 3:return l.sent(),[3,5];case 4:return r(),t(),[7];case 5:return[2]}})})()},onError:function(){r(),t()}}),[2]})}),function(e){return r.apply(this,arguments)}))];case 1:return t.sent(),[2]}})},u=t[Symbol.iterator](),h.label=3;case 3:if(e=(d=u.next()).done)return[3,6];return[5,(0,l.XA)(a())];case 4:h.sent(),h.label=5;case 5:return e=!0,[3,3];case 6:return[3,9];case 7:return f=h.sent(),r=!0,i=f,[3,9];case 8:try{e||null==u.return||u.return()}finally{if(r)throw i}return[7];case 9:return[2]}})})()}),r),d=(i={name:"upm",getInstalledPackages:function(e){var t=e.id,n=e.services.packager;return(0,o._)(function(){var e;return(0,l.Jh)(this,function(r){switch(r.label){case 0:return[4,n.listSpecfile(t)];case 1:if((e=r.sent()).error||null===e.packages)return[2,[]];return[2,e.packages]}})})()}},(0,a._)(i,"getPackageInfo",function(e){var t=e.id,n=e.name,r=e.services.packager;return(0,o._)(function(){return(0,l.Jh)(this,function(e){return[2,r.fetchPackageInfo(n,t)]})})()}),(0,a._)(i,"search",function(e){var t=e.id,n=e.query,r=e.services.packager;return(0,o._)(function(){return(0,l.Jh)(this,function(e){return[2,r.searchPackages(n,t)]})})()}),(0,a._)(i,"install",function(e){var t=e.id,n=e.pkgs,r=e.services.packager;return(0,o._)(function(){return(0,l.Jh)(this,function(e){switch(e.label){case 0:return[4,r.addPackages(n,t)];case 1:if(!e.sent())throw Error("Package install failed");return[2]}})})()}),(0,a._)(i,"uninstall",function(e){var t=e.id,n=e.pkgs,r=e.services.packager;return(0,o._)(function(){var e;return(0,l.Jh)(this,function(i){switch(i.label){case 0:return e=n.filter(function(e){return e.name}).map(function(e){return e.name}),[4,r.removePackages(e,t)];case 1:if(!i.sent())throw Error("Package uninstall failed");return[2]}})})()}),i),f=n(15568);function h(e){switch(e){case"html":return u;case"nix":return f.Z;default:return d}}},15568:function(e,t,n){n.d(t,{C:function(){return l}});var r,i=n(27387),o=n(42516),a=n(96583);function l(e){return null==e?void 0:e.replace(/^pkgs\./,"")}var c=(r={name:"nix",getInstalledPackages:function(e){var t=e.services.nixService;return(0,i._)(function(){var e;return(0,a.Jh)(this,function(n){switch(n.label){case 0:return[4,t.listPackages()];case 1:if(null!==(e=n.sent()).error)return[2,[]];return[2,e.packages.filter(function(e){return!!e.name}).map(function(e){return{name:e.name,version:e.version}})]}})})()}},(0,o._)(r,"getPackageInfo",function(e){var t=e.name,n=e.services.nixService;return(0,i._)(function(){var e;return(0,a.Jh)(this,function(r){switch(r.label){case 0:return[4,n.packageInfo(t)];case 1:if(null!==(e=r.sent()).error)return[2,{}];return[2,e.package]}})})()}),(0,o._)(r,"search",function(e){var t=e.query,n=e.services.nixService,r=e.nixOpts;return(0,i._)(function(){var e;return(0,a.Jh)(this,function(i){switch(i.label){case 0:return[4,n.searchPackages(t,r)];case 1:if(null!==(e=i.sent()).error)throw Error("Could not search Nix packages");return[2,e.packages.map(function(e){var t,n;return{name:e.name,version:e.version,description:e.description,homepageURL:null!==(t=e.homepageURL[0])&&void 0!==t?t:null,license:null!==(n=e.licenses[0])&&void 0!==n?n:null}})]}})})()}),(0,o._)(r,"install",function(e){var t=e.pkgs,n=e.services.nixService;return(0,i._)(function(){var e;return(0,a.Jh)(this,function(r){switch(r.label){case 0:return e=t.filter(function(e){return null!=e.name}).map(function(e){return"pkgs.".concat(e.name)}),[4,n.addPackages(e)];case 1:return r.sent(),[2]}})})()}),(0,o._)(r,"uninstall",function(e){var t=e.pkgs,n=e.services.nixService;return(0,i._)(function(){var e;return(0,a.Jh)(this,function(r){switch(r.label){case 0:return e=t.filter(function(e){return null!=e.name}).map(function(e){return"pkgs.".concat(e.name)}),[4,n.removePackages(e)];case 1:return r.sent(),[2]}})})()}),r);t.Z=c},70884:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(27387),i=n(96583),o=n(4216),a=n(69170),l=n(60305),c=n(81199),s=n(86763),u=n.n(s),d=n(50959),f=n(90188),h=n(9142),p=n(27482);function m(){var e=(0,c.Z)(),t=(0,p.Hg)(p.NC),n=(0,p.Hg)(p.w$),o=(0,p.XD)(p.w$),s=(0,p.$X)(p.w$),m=(0,p.Hg)(p.vO),v=(0,p.Mi)(),g=(0,p.Zq)(),y=(0,p.OO)(),b=(0,p.np)(),w=(0,a.Z)(),Z=(0,f.I)().configs,x=(0,p.T9)();return(0,d.useEffect)(function(){if(0!==Z.length){var t=[],n=!1,r=!0,i=!1,a=void 0;try{for(var l,c=Z[Symbol.iterator]();!(r=(l=c.next()).done);r=!0)!function(){var r=l.value,i=Promise.resolve(),a=g(r.id),c=u()(function(){var t=g(r.id),a=o();if(t===p.C0.Idle||(null==a?void 0:a.id)!==r.id){var l=(0,h.C)(r.id);i=i.then(function(){if(!n)return l.getInstalledPackages({id:r.id,services:e}).then(function(e){n||(y(r.id,e),v(r.id,p.C0.Idle))})})}},500);if(r.packagerFiles.length>0){var s=!0,d=!1,f=void 0;try{for(var m,b=r.packagerFiles[Symbol.iterator]();!(s=(m=b.next()).done);s=!0)!function(){var n=m.value;if(!n.endsWith("/")){var r=null!==a&&a!==p.C0.Initializing&&a!==p.C0.Uninitialized,i=e.fs.watchFilePath(n,{onChange:function(){if(!r){r=!0;return}c()}});t.push(i)}}()}catch(e){d=!0,f=e}finally{try{s||null==b.return||b.return()}finally{if(d)throw f}}}}()}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return function(){n=!0;var e=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(e=(o=a.next()).done);e=!0)(0,o.value)()}catch(e){r=!0,i=e}finally{try{e||null==a.return||a.return()}finally{if(r)throw i}}}}},[Z,e.fs]),(0,d.useEffect)(function(){var t,n=!1;return(t=(0,r._)(function(){var t,r,o,a,l,c;return(0,i.Jh)(this,function(i){t=!0,r=!1,o=void 0;try{for(a=function(){var t=c.value,r=g(t.id);if(r&&r!==p.C0.Uninitialized&&r!==p.C0.Initializing)return"continue";v(t.id,p.C0.Initializing),(0,h.C)(t.id).getInstalledPackages({id:t.id,services:e}).then(function(e){n||(y(t.id,e),v(t.id,p.C0.Idle))})},l=Z[Symbol.iterator]();!(t=(c=l.next()).done);t=!0)a()}catch(e){r=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw o}}return[2]})}),function(){return t.apply(this,arguments)})(),function(){n=!0}},[Z]),(0,d.useEffect)(function(){if(null===n&&0!==t.length){var e=t[0];g(e.id)===p.C0.Idle&&b(e)}},[m,n,t]),(0,d.useEffect)(function(){if(null!==n){var t,o=!1;return(t=(0,r._)(function(){var t,r,a,c,u,d,f,m,g,b,Z,C,_,S,k,E,T,R;return(0,i.Jh)(this,function(i){switch(i.label){case 0:switch(t=(0,h.C)(n.id),n.kind){case p.TH.Install:return[3,1];case p.TH.Uninstall:return[3,6]}return[3,11];case 1:v(n.id,p.C0.Installing),r=!0,a=!1,c=void 0;try{for(u=n.pkgs[Symbol.iterator]();!(r=(d=u.next()).done);r=!0)f=d.value,(0,l.j)(l.U3.PACKAGE_MANAGER_USED,{action:"installed",packageId:f.name})}catch(e){a=!0,c=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw c}}i.label=2;case 2:return i.trys.push([2,4,,5]),[4,t.install({id:n.id,pkgs:n.pkgs,services:e})];case 3:return i.sent(),1===n.pkgs.length?w.showNotice("Installed ".concat(null!==(m=n.pkgs[0].name)&&void 0!==m?m:"package")):w.showNotice("Installed ".concat(n.pkgs.length," packages")),[3,5];case 4:return i.sent(),1===n.pkgs.length?w.showError("Failed to install ".concat(null!==(g=n.pkgs[0].name)&&void 0!==g?g:"package")):w.showError("Failed to install ".concat(n.pkgs.length," packages")),x(n.id,n.pkgs),[3,5];case 5:return[3,11];case 6:v(n.id,p.C0.Uninstalling),b=!0,Z=!1,C=void 0;try{for(_=n.pkgs[Symbol.iterator]();!(b=(S=_.next()).done);b=!0)k=S.value,(0,l.j)(l.U3.PACKAGE_MANAGER_USED,{action:"removed",packageId:k.name})}catch(e){Z=!0,C=e}finally{try{b||null==_.return||_.return()}finally{if(Z)throw C}}i.label=7;case 7:return i.trys.push([7,9,,10]),[4,t.uninstall({id:n.id,pkgs:n.pkgs,services:e})];case 8:return i.sent(),1===n.pkgs.length?w.showNotice("Removed ".concat(null!==(E=n.pkgs[0].name)&&void 0!==E?E:"package")):w.showNotice("Removed ".concat(n.pkgs.length," packages")),[3,10];case 9:return i.sent(),1===n.pkgs.length?w.showError("Failed to remove ".concat(null!==(T=n.pkgs[0].name)&&void 0!==T?T:"package")):w.showError("Failed to remove ".concat(n.pkgs.length," packages")),x(n.id,n.pkgs),[3,10];case 10:return[3,11];case 11:if(o)return[2];return[4,t.getInstalledPackages({id:n.id,services:e})];case 12:if(R=i.sent(),o)return[2];return y(n.id,R),v(n.id,p.C0.Idle),s(null),[2]}})}),function(){return t.apply(this,arguments)})(),function(){o=!0}}},[n]),null}function v(e){var t=e.children,n=(0,p.ns)();return(0,o.BX)(p.vN.Provider,{value:n,children:[(0,o.tZ)(m,{}),t]})}},69764:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(4216),i=n(50959),o=n(36474);function a(e){var t=e.children,n=e.config,a=(0,o.$X)(o.Uk);return(0,i.useEffect)(function(){(null==n?void 0:n.id)&&a(n)},[n]),(0,r.tZ)(r.HY,{children:t})}function l(e){var t=e.children,n=e.config,i=(0,o.ns)();return(0,r.tZ)(o.fj.Provider,{value:i,children:n?(0,r.tZ)(a,{config:n,children:t}):t})}},27482:function(e,t,n){n.d(t,{$X:function(){return Z},$z:function(){return R},B2:function(){return G},C0:function(){return o},Hg:function(){return C},Mi:function(){return I},NC:function(){return A},OO:function(){return U},T9:function(){return k},TH:function(){return a},Wx:function(){return W},XD:function(){return x},Zq:function(){return D},cW:function(){return P},jh:function(){return X},np:function(){return V},ns:function(){return y},pN:function(){return S},te:function(){return N},vN:function(){return b},vO:function(){return T},w$:function(){return B},wY:function(){return E},z9:function(){return O},zi:function(){return j}});var r,i,o,a,l=n(42516),c=n(41733),s=n(30509),u=n(66626),d=n(78950),f=n(41974),h=n(40635),p=n(22750),m=n(79122),v=n(50959),g=n(15568);function y(){return(0,u._)((0,v.useState)(function(){return(0,h.MT)()}),1)[0]}(0,h.cn)({replId:"",packageManagers:{}}),(r=o||(o={})).Uninitialized="Uninitialized",r.Initializing="Initializing",r.Installing="Installing",r.Uninstalling="Uninstalling",r.Idle="Idle",(i=a||(a={})).Install="Install",i.Uninstall="Uninstall";var b=(0,v.createContext)(null);function w(){var e=(0,v.useContext)(b);if(!e)throw Error("Expected store in context");return e}var Z=function(e){return(0,p.b9)(e,{store:w()})};function x(e){return(0,m.lV)((0,v.useCallback)(function(t){return t(e)},[e]),{store:w()})}function C(e){return(0,p.Dv)(e,{store:w()})}(0,h.cn)(null),(0,h.cn)(null);var _=(0,h.cn)({});function S(e){var t,n=C(_);return e&&null!==(t=n[e])&&void 0!==t?t:[]}function k(){var e=Z(_);return function(t,n){e(function(e){return(0,f.Uy)(e,function(e){var r=e[t];if(!r||0===r.length){e[t]=n;return}var i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)!function(){var e=l.value;r.find(function(t){return t.name===e.name})||r.push(e)}()}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}})})}}function E(){var e=Z(_);return function(t,n){e(function(e){return(0,f.Uy)(e,function(e){var r=e[t];if(r&&0!==r.length){var i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)!function(){var e=l.value,t=r.findIndex(function(t){return t.name===e.name});-1!==t&&r.splice(t,1)}()}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}})})}}var T=(0,h.cn)({});function R(e){var t,n=C(T);return e&&null!==(t=n[e])&&void 0!==t?t:null}function D(){var e=x(T);return function(t){var n;return null!==(n=e()[t])&&void 0!==n?n:null}}function I(){var e=Z(T);return function(t,n){e(function(e){return(0,s._)((0,c._)({},e),(0,l._)({},t,n))})}}var B=(0,h.cn)(null);function G(){return C(B)}var A=(0,h.cn)([]);function P(){return C(A)}var L=(0,h.cn)({});function N(e){var t,n=C(L);return e&&null!==(t=n[e])&&void 0!==t?t:[]}function O(){var e=x(L);return function(t){var n;return null!==(n=e()[t])&&void 0!==n?n:[]}}function U(){var e=Z(L);return function(t,n){e(function(e){return(0,s._)((0,c._)({},e),(0,l._)({},t,n.map(function(e){return"nix"===t?(0,s._)((0,c._)({},e),{name:(0,g.C)(e.name)}):e})))})}}var M=(0,h.cn)(null,function(e,t,n){var r=n.id,i=n.pkg;if(!i.name)throw Error("Package does not have a name.");t(A,function(e){return(0,f.Uy)(e,function(e){if(!e.find(function(e){return e.pkgs.find(function(t){return e.id===r&&t.name===i.name})})){var t=e.find(function(e){return"Install"===e.kind});t?t.pkgs.push(i):e.push({kind:"Install",id:r,pkgs:[i]})}})})});function X(){return Z(M)}var F=(0,h.cn)(null,function(e,t,n){var r=n.id,i=n.pkg;if(!i.name)throw Error("Package does not have a name.");t(A,function(e){return(0,f.Uy)(e,function(e){if(!e.find(function(e){return e.pkgs.find(function(t){return e.id===r&&t.name===i.name})})){var t=e.find(function(e){return"Uninstall"===e.kind});t?t.pkgs.push(i):e.push({kind:"Uninstall",id:r,pkgs:[i]})}})})});function W(){return Z(F)}(0,h.cn)(null);var H=(0,h.cn)(null,function(e,t,n){var r=(0,d._)(e(A)),i=r[0],o=r.slice(1);n===i&&(t(A,o),t(B,n))});function V(){return Z(H)}var z=(0,h.cn)(null,function(e,t,n){t(A,function(e){return(0,f.Uy)(e,function(e){var t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,c=l.pkgs.findIndex(function(e){return e.name===n});-1!==c&&l.pkgs.splice(c,1)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}})})});function j(){return Z(z)}},36474:function(e,t,n){n.d(t,{$X:function(){return m},Bm:function(){return y},Uk:function(){return v},ZR:function(){return g},fj:function(){return h},ns:function(){return f}});var r,i,o,a,l=n(66626),c=n(40635),s=n(22750),u=n(79122),d=n(50959);function f(){return(0,l._)((0,d.useState)(function(){return(0,c.MT)()}),1)[0]}(0,c.cn)({replId:"",packageManagers:{}}),(r=o||(o={})).Initializing="Initializing",r.Installing="Installing",r.Uninstalling="Uninstalling",r.Idle="Idle",(i=a||(a={})).Install="Install",i.Uninstall="Uninstall";var h=(0,d.createContext)(null);function p(){var e=(0,d.useContext)(h);if(!e)throw Error("Expected store in context");return e}var m=function(e){return(0,s.b9)(e,{store:p()})},v=(0,c.cn)(null);function g(){return(0,s.Dv)(v,{store:p()})}function y(){return(0,u.lV)((0,d.useCallback)(function(e){return e(v)},[v]),{store:p()})}(0,c.cn)(null)},54635:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(63257),i=n(4216),o=n(26087),a=n.n(o),l=n(39743);function c(e){var t=e.replTitle,n=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r._)(t.filter(Boolean)).concat(["Replit"]).join(" - ")}((0,l.ex)(),t);return(0,i.tZ)(a(),{children:(0,i.tZ)("title",{children:n},"title")})}},93720:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(4216),i=n(28508),o=n(82230),a=n(94778),l=n(49224),c=n(72093),s=(0,l.X)({container:[c.l0.height("100%"),c.l0.p(16),c.l0.colWithGap(16),c.l0.center],imageWithHeader:[c.l0.colWithGap(16),c.l0.center,c.l0.flex.shrink(1)],descriptionText:[c.l0.textAlign.center,c.l0.maxWidth(600)]});function u(e){var t=e.asciiArt,n=e.headerText,l=e.bodyText,c=e.action,u=e.icon;return(0,r.BX)(a.G,{css:s.container,children:[(0,r.BX)(a.G,{css:s.imageWithHeader,children:[void 0===t?u:(0,r.tZ)(i.Z,{art:t}),(0,r.tZ)(o.h4,{level:1,variant:"subheadDefault",multiline:!1,children:n})]}),void 0===l?void 0:(0,r.tZ)(a.G,{children:(0,r.tZ)(o.xv,{css:s.descriptionText,children:l})}),c]})}},4723:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(4216),i=n(94778),o=n(49224),a=n(29318),l=n(72093),c=(0,o.X)({root:[l.l0.coverContainer,l.l0.center]});function s(){return(0,r.tZ)(i.G,{css:c.root,children:(0,r.tZ)(a.Z,{size:32})})}},73210:function(e,t,n){n.d(t,{ms:function(){return D}});var r=n(66626),i=n(4216),o=n(32622),a=n(15235),l=n(85763),c=n(82230),s=n(94778),u=n(49224),d=n(64318),f=n(15434),h=n(72093),p=n(70316),m=n(39475),v=n(50959),g=n(96955),y=n(10118),b=n(80487),w=n(17519),Z=(0,u.X)({wrapper:[h.l0.py(6),h.l0.flex.row,h.l0.align.center,h.l0.backgroundColor.backgroundHigher],wrapperWarning:[h.l0.py(6),h.l0.flex.row,h.l0.align.center,h.l0.backgroundColor.orangeDimmest],body:[h.l0.flex.growAndShrink(1)],firstLine:[h.l0.px(6),h.l0.rowWithGap(2),h.l0.align.center,h.l0.flex.wrap,h.l0.maxWidth("100%"),h.l0.overflow("hidden")],secondLine:[h.l0.px(6),h.l0.rowWithGap(2),h.l0.align.center,h.l0.flex.wrap,h.l0.maxWidth("100%"),h.l0.overflow("hidden"),h.l0.color.foregroundDimmest],secondLineWarning:[h.l0.px(6),h.l0.rowWithGap(2),h.l0.align.center,h.l0.flex.wrap,h.l0.maxWidth("100%"),h.l0.overflow("hidden"),h.l0.color.orangeStrongest],buttons:[h.l0.flex.row,h.l0.pr(6)],verticalDivider:[h.l0.ml(6),h.l0.mr(6),h.l0.height("1em"),h.l0.width(1),h.l0.backgroundColor.foregroundDefault]});function x(e){var t=e.openNetworkingTool,n=e.onClose,r=e.onDontExposePort,o=e.onDoExposePort,a=e.firstLine,c=e.secondLine,u=e.renderSecondLine,h=e.renderDontExposeButton,p=e.renderDoExposeButton,m=e.isWarning,v=void 0!==m&&m;return(0,i.BX)(s.G,{css:v?Z.wrapperWarning:Z.wrapper,children:[(0,i.BX)(s.G,{css:Z.body,children:[(0,i.tZ)(s.G,{css:Z.firstLine,children:a}),u?(0,i.tZ)(s.G,{css:v?Z.secondLineWarning:Z.secondLine,children:c}):null]}),(0,i.BX)(s.G,{css:Z.buttons,children:[(0,i.tZ)(l.hU,{alt:"Networking tool",onClick:t,children:(0,i.tZ)(f.Z,{})}),void 0!==h&&h?(0,i.tZ)(l.hU,{alt:"Don't expose this port to the web",onClick:r,children:(0,i.tZ)(b.Z,{})}):null,void 0!==p&&p?(0,i.tZ)(l.hU,{alt:"Expose this port to the web",onClick:o,children:(0,i.tZ)(w.Z,{})}):null,(0,i.tZ)(l.hU,{alt:"Close",onClick:n,children:(0,i.tZ)(d.Z,{})})]})]})}function C(e){var t=e.configuration,n=e.openWebview,r=e.openNetworkingTool,o=e.onClose,l=e.onDontExposePort,s=e.renderSecondLine,u=(0,y.O2)(t.externalPort)?"{...}.replit.dev":"{...}.replit.dev:".concat(t.externalPort);return(0,i.tZ)(x,{openNetworkingTool:r,onClose:o,firstLine:(0,i.BX)(i.HY,{children:[(0,i.BX)(c.xv,{children:["Port :",t.localPort," opened on"]}),(0,i.tZ)(a.zx,{variant:"underlined",text:u,onClick:n})]}),secondLine:(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.xv,{children:"You can manage this config in the"}),(0,i.tZ)(a.zx,{variant:"underlined",text:"Networking tool",onClick:r})]}),renderSecondLine:s,renderDontExposeButton:!0,onDontExposePort:l})}function _(e){var t=e.configuration,n=e.openNetworkingTool,r=e.onClose,o=e.renderSecondLine,l=e.onDoExposePort;return(0,i.tZ)(x,{openNetworkingTool:n,onClose:r,firstLine:"Port :".concat(t.localPort," opened, but not exposed to the web."),secondLine:(0,i.tZ)(a.zx,{variant:"underlined",text:"Expose this port?",onClick:n}),renderSecondLine:o,renderDoExposeButton:!0,onDoExposePort:l})}function S(e){var t=e.openNetworkingTool,n=e.configuration,r=e.onClose,o=e.renderSecondLine;return(0,i.tZ)(x,{isWarning:!0,openNetworkingTool:t,onClose:r,firstLine:"Port :".concat(n.localPort," opened, but all available external ports are reserved."),secondLine:(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.xv,{children:"Remove an external port in"}),(0,i.tZ)(a.zx,{variant:"underlined",text:"port configuration",onClick:t}),(0,i.tZ)(c.xv,{children:"to open a new port."})]}),renderSecondLine:o})}function k(e){var t=e.openNetworkingTool,n=e.configuration,r=e.onClose,o=e.renderSecondLine;return(0,i.tZ)(x,{isWarning:!0,openNetworkingTool:t,onClose:r,firstLine:"Port :".concat(n.localPort," opened, but is not configured properly."),secondLine:(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.xv,{children:"You can fix this in the"}),(0,i.tZ)(a.zx,{variant:"underlined",text:"Networking tool",onClick:t})]}),renderSecondLine:o})}function E(e){var t=e.openNetworkingTool,n=e.configuration,r=e.onClose,o=e.renderSecondLine;return(0,i.tZ)(x,{isWarning:!0,openNetworkingTool:t,onClose:r,firstLine:"Port :".concat(n.localPort," opened, but has missing configuration."),secondLine:(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.xv,{children:"You can fix this in the"}),(0,i.tZ)(a.zx,{variant:"underlined",text:"Networking tool",onClick:t})]}),renderSecondLine:o})}function T(e){var t=e.configuration,n=e.openWebview,r=e.openNetworkingTool,o=e.onClose,a=e.onDontExposePort,l=e.onDoExposePort,c=e.renderSecondLine,s=t.type;switch(s){case p.DL.FORWARDED:return(0,i.tZ)(C,{configuration:t,openWebview:n,openNetworkingTool:r,onClose:o,renderSecondLine:c,onDontExposePort:a});case p.DL.INTERNAL_ONLY:return(0,i.tZ)(_,{configuration:t,openNetworkingTool:r,onClose:o,renderSecondLine:c,onDoExposePort:l});case p.DL.NO_MORE_EXTERNAL_PORTS_AVAILABLE:return(0,i.tZ)(S,{configuration:t,openNetworkingTool:r,onClose:o,renderSecondLine:c});case p.DL.MISCONFIGURED:return(0,i.tZ)(k,{configuration:t,openNetworkingTool:r,onClose:o,renderSecondLine:c});case p.DL.CONFIG_MISSING:return(0,i.tZ)(E,{configuration:t,openNetworkingTool:r,onClose:o,renderSecondLine:c});default:(0,g.Z)(s)}}function R(e){var t=e.configurations,n=e.openWebview,r=e.openNetworkingTool,l=e.onClose,u=e.renderSecondLine,d=t.filter(function(e){return e.type===p.DL.FORWARDED}),f=t.filter(function(e){return e.type!==p.DL.FORWARDED});return(0,i.tZ)(x,{isWarning:!1,openNetworkingTool:r,onClose:l,firstLine:(0,i.BX)(i.HY,{children:[d.length>0?(0,i.BX)(i.HY,{children:[(0,i.BX)(c.xv,{children:[d.length," ",(0,o.Z)("port",d.length)," ","opened on"]}),(0,i.tZ)(a.zx,{variant:"underlined",text:"{...}.replit.dev",onClick:n})]}):null,d.length>0&&f.length>0?(0,i.tZ)(s.G,{css:Z.verticalDivider}):null,f.length>0?(0,i.BX)(c.xv,{children:[f.length," ",(0,o.Z)("port",f.length)," ","did not open"]}):null]}),secondLine:(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.xv,{children:"You can manage this config in the"}),(0,i.tZ)(a.zx,{variant:"underlined",text:"Networking tool",onClick:r})]}),renderSecondLine:u})}function D(e){var t=e.configurations,n=e.openWebview,o=e.openNetworkingTool,a=e.onClose,l=e.onDontExposePort,c=e.onDoExposePort,s=(0,m.e)("port-nudges"),u=(0,r._)((0,v.useState)(!1),2),d=u[0],f=u[1],h=!s.isDone,p=(0,r._)((0,v.useState)(!0),2),g=p[0],y=p[1];function b(){y(!1),null==a||a()}return((0,v.useEffect)(function(){0===t.length&&y(!0)},[t]),(0,v.useEffect)(function(){if(!s.isDone){if(t.length>0&&!d){f(!0);return}0===t.length&&d&&s.setAsDone()}},[t,s,d]),g&&0!==t.length)?1===t.length?(0,i.tZ)(T,{configuration:t[0],openNetworkingTool:o,openWebview:n,renderSecondLine:h,onClose:b,onDontExposePort:l,onDoExposePort:c}):(0,i.tZ)(R,{configurations:t,openNetworkingTool:o,openWebview:n,renderSecondLine:h,onClose:b}):null}},252:function(e,t,n){n.d(t,{L:function(){return p}});var r=n(42516),i=n(4216),o=n(99007),a=n(78803),l=n(82230),c=n(46845),s=n(35970),u=n(49224),d=n(72093),f=n(94778),h=(0,u.X)({select:d.l0.minWidth(200),wrapper:[d.l0.rowWithGap(8),d.l0.align.center,{"@container (max-width: 400px)":[d.l0.flex.rowReverse]}],rightComponentWrapper:{"@container (max-width: 400px)":[d.l0.ml(8)]}});function p(e){var t,n=e.setting,u=e.currentValue,d=e.update,p=e.rightComponent,m=e.title,v=m;if(m||(v=n.description?(0,i.BX)(i.HY,{children:[(0,i.tZ)(l.xv,{multiline:!1,children:n.name}),(0,i.tZ)(l.xv,{variant:"small",color:"dimmest",children:n.description})]}):(0,i.tZ)(l.xv,{multiline:!1,children:n.name})),"select"===n.type)return(0,i.tZ)(c.$,{id:n.id,title:v,children:(0,i.BX)(f.G,{css:h.wrapper,children:[p?(0,i.tZ)(f.G,{css:h.rightComponentWrapper,children:p}):null,(0,i.tZ)(o.P,{"aria-label":n.name,style:{marginRight:0},items:n.options,defaultSelectedKey:null===(t=n.options.find(function(e){return u===e.editorPreferencesValue}))||void 0===t?void 0:t.id,onSelectionChange:function(e){var t;if("string"!=typeof n.editorPreferencesKey)throw Error("Setting does not have an editorPreferencesKey");d((0,r._)({},n.editorPreferencesKey,null===(t=n.options.find(function(t){return t.id===e}))||void 0===t?void 0:t.editorPreferencesValue))},css:h.select,dataCy:n.id,children:function(e){return(0,i.tZ)(s.m9,{id:e.id,label:e.title,dataCy:e.id},e.id)}})]})});if("boolean"===n.type)return(0,i.tZ)(c.$,{id:n.id,title:v,children:(0,i.BX)(i.HY,{children:[p,(0,i.tZ)(a.r,{"aria-label":n.name,isSelected:u,onChange:function(e){if("string"!=typeof n.editorPreferencesKey)throw Error("Setting does not have an editorPreferencesKey");d((0,r._)({},n.editorPreferencesKey,e))},dataCy:n.id})]})});throw Error("Unsupported setting type")}},74035:function(e,t,n){n.d(t,{Ly:function(){return m},ZP:function(){return g},qm:function(){return b}});var r=n(66626),i=n(4216),o=n(17198),a=n(2049),l=n(67242),c=n(18060),s=n(82230),u=n(49224),d=n(72093),f=n(252),h=n(46845),p=n(50959),m=[{value:"spaces",title:"spaces"},{value:"tabs",title:"tabs"}],v=(0,u.X)({sizeInput:[d.l0.py(6),d.l0.flex.growAndShrink(0),{border:"none"}]});function g(){var e=(0,o.Gn)("indentDetection","indentFormatPastes","indentIsSpaces","indentSize"),t=e.preferences,n=e.update;return(0,i.BX)(i.HY,{children:[(0,i.tZ)(f.L,{setting:a.z2.indentationDetection,currentValue:t.indentDetection,update:n}),(0,i.tZ)(l.R,{}),(0,i.tZ)(f.L,{setting:a.z2.indentFormatPastes,currentValue:t.indentFormatPastes,update:n}),(0,i.tZ)(l.R,{}),(0,i.tZ)(f.L,{setting:a.z2.indentIsSpaces,currentValue:t.indentIsSpaces,update:n}),(0,i.tZ)(l.R,{}),(0,i.tZ)(h.$,{id:"indentSize",title:(0,i.BX)(i.HY,{children:[(0,i.tZ)(s.xv,{multiline:!1,children:"Indentation Size"}),(0,i.tZ)(s.xv,{variant:"small",color:"dimmest",children:"The number of columns taken up by an indentation level."})]}),children:(0,i.tZ)(b,{css:v.sizeInput,size:t.indentSize,onChange:function(e){n({indentSize:e})}})})]})}function y(e){return null==e?2:("string"==typeof e&&(e=parseInt(e,10)),isNaN(e))?2:(Number.isInteger(e)||(e=Math.round(e)),e<1)?1:e>16?16:e}function b(e){var t=e.size,n=e.onChange,o=e.className,a=(0,r._)((0,p.useState)(null),2),l=a[0],s=a[1],u=null!==l?l:t.toString(),d=""===u?"6ch":u.length+5.5+"ch";return(0,i.tZ)(c.II,{type:"number",style:{width:d},className:o,min:1,max:16,value:u,onBlur:function(){return s(null)},onChange:function(e){var t=e.target.value.trim(),r=e.target.valueAsNumber;if(""===t||isNaN(r)){s(t);return}e.target.validity.valid?(s(null),n(y(r))):(s(t),""===t||isNaN(parseInt(t,10))||n(y(t)))}})}},46845:function(e,t,n){n.d(t,{$:function(){return d}});var r=n(4216),i=n(82230),o=n(94778),a=n(49224),l=n(72093),c=n(72370),s=n(50959),u=(0,a.X)({wrapper:[l.l0.rowWithGap(8),l.l0.justify.spaceBetween,l.l0.align.center,{"@container (max-width: 400px)":[l.l0.colWithGap(8),l.l0.align.start]}],inner:[l.l0.flex.growAndShrink(1)]});function d(e){var t=e.id,n=e.title,a=e.children,l=(0,c.U)()(t);return(0,r.BX)(o.G,{css:u.wrapper,children:[(0,r.tZ)(o.G,{css:u.inner,tag:"label",htmlFor:l,children:"string"==typeof n?(0,r.tZ)(i.xv,{multiline:!1,children:n}):n}),s.cloneElement(a,{id:l})]})}},66586:function(e,t,n){n.d(t,{Z:function(){return tS}});var r=n(4216),i=n(38753),o=n(37841),a=n(82230),l=n(94778),c=n(72093),s=n(49224),u=n(41733),d=n(30509),f=n(17198),h=n(59786),p=n(46026),m=n(60305),v=n(95571),g=n(67242),y=n(85763),b=n(99236),w=n(64479),Z=n(78803),x=n(29318),C=n(40509),_=n(98924),S=n(66626),k=n(69170),E=n(99266),T=n(78571),R=n(21262),D=n(71440),I=n(58995),B=n(78711);function G(){var e=(0,R._)(["\n  fragment ThemesSwitcherCustomTheme on CustomTheme {\n    id\n    title\n    isCurrentUserThemeAuthor\n    colorScheme\n  }\n"]);return G=function(){return e},e}function A(){var e=(0,R._)(["\n  query ThemesSwitcherCurrentUserAuthoredThemes(\n    $input: CurrentUserAuthoredThemesInput!\n  ) {\n    currentUser {\n      id\n      authoredThemes(input: $input) {\n        ... on CustomThemeConnection {\n          items {\n            id\n            ...ThemesSwitcherCustomTheme\n          }\n          pageInfo {\n            nextCursor\n            hasNextPage\n          }\n        }\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return A=function(){return e},e}function P(){var e=(0,R._)(["\n  query ThemesSwitcherCurrentUserInstalledThemes(\n    $input: CurrentUserInstalledThemesInput!\n  ) {\n    currentUser {\n      id\n      installedThemes(input: $input) {\n        ... on InstalledThemeConnection {\n          items {\n            id\n            themeVersion {\n              id\n            }\n            customTheme {\n              id\n              ...ThemesSwitcherCustomTheme\n            }\n          }\n          pageInfo {\n            nextCursor\n            hasNextPage\n          }\n        }\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return P=function(){return e},e}var L={},N=(0,D.Ps)(G()),O=(0,D.Ps)(A(),N),U=(0,D.Ps)(P(),N),M=n(17642),X=n(50959),F=n(63368),W=function(e){var t=(0,S._)((0,X.useState)(0),2),n=t[0],r=t[1];return(0,F.Z)(function(){null!==e.current&&r(e.current.getBoundingClientRect().height)},[e]),n},H=n(85733),V=n(71166),z=n(19068),j=n(27022),q=n(79050),J=n(21371),Y=n(27649),$=n(29252),K=n(44693),Q=n(47336),ee=n.n(Q),et=(0,s.X)({self:[{border:"1px solid",borderColor:c.TV.outlineDimmest},c.l0.zIndex(5),c.l0.maxHeight(300),c.l0.position.absolute,c.l0.overflowY("auto"),c.l0.width("100%"),c.l0.left(0),c.l0.borderRadius(8),c.l0.flex.column],apron:[c.l0.flex.grow(1),{borderTop:"1px solid",borderTopColor:c.TV.outlineDimmest}],menuItems:[c.l0.flex.growAndShrink(1),c.l0.overflowY("auto"),{listStyle:"none"}],menuApronItem:[c.l0.p(8),c.l0.rowWithGap(12),c.l0.justify.start,c.l0.align.center,z.gU.listItem],menuApronWrapper:[c.l0.flex.column]}),en=(0,K.oM)(),er=function(e){var t=e.children,n=e.className,i=e.bottomOffset;return(0,r.BX)(w.Tg,{className:n,tag:"ul",elevated:!0,css:et.self,style:{bottom:"calc(".concat(i,"px + ").concat(c.TV.space8,")")},children:[(0,r.tZ)(l.G,{css:et.menuItems,children:t}),(0,r.tZ)(w.Tg,{css:et.apron,children:(0,r.BX)(l.G,{css:et.menuApronWrapper,children:[(0,r.tZ)(ee(),{legacyBehavior:!0,href:en.href,as:en.as,children:(0,r.BX)(l.G,{css:et.menuApronItem,children:[(0,r.tZ)(q.Z,{}),(0,r.tZ)(a.xv,{multiline:!1,children:"Explore Themes"})]})}),(0,r.tZ)(ee(),{legacyBehavior:!0,href:K.ZS.href,as:K.ZS.as,children:(0,r.BX)(l.G,{css:et.menuApronItem,children:[(0,r.tZ)($.Z,{}),(0,r.tZ)(a.xv,{multiline:!1,children:"Create a Theme"})]})})]})})]})},ei=(0,s.X)({trigger:[z.gU.filled,c.l0.p(8),c.l0.color.foregroundDefault,c.l0.border({width:0})],triggerContent:[c.l0.align.center,c.l0.rowWithGap(8)],chevron:[c.l0.transition.snappy],selectLabel:[c.l0.flex.growAndShrink(1),{textAlign:"left",lineHeight:c.TV.lineHeightHeaderBig}],menuWrapper:[c.l0.position.relative],sectionHeadings:[c.l0.p(8),c.l0.fontWeight.bold,c.l0.fontSize(12),{borderTop:"1px solid ".concat(c.TV.outlineDimmer),textTransform:"uppercase"}],officialHeading:[c.l0.p(8),c.l0.fontWeight.bold,c.l0.fontSize(12),{textTransform:"uppercase"}],showMoreWrapper:[c.l0.align.center],spinnerWrapper:[c.l0.p(8),c.l0.align.center]}),eo=l.K.li;function ea(e){var t=e.id,n=e.sections,i=e.initialSelectedItem,o=e.selectedItem,c=e.onChange,s=e.placeholder,f=e.dataCy,h=e.paginationOptions,p=(0,_._)(e,["id","sections","initialSelectedItem","selectedItem","onChange","placeholder","dataCy","paginationOptions"]),m=(0,X.useId)(),v=(0,H.Z)(c),g=(0,X.useRef)(null),b=W(g),w=Object.values(n).flat(),Z=(0,J.L7)((0,d._)((0,u._)({items:w,initialSelectedItem:i,onSelectedItemChange:function(e){var t=e.selectedItem;t&&v.current(t)},stateReducer:function(e,t){var n=t.type,r=t.changes;switch(n){case J.L7.stateChangeTypes.MenuKeyDownEnter:case J.L7.stateChangeTypes.MenuKeyDownSpaceButton:case J.L7.stateChangeTypes.ItemClick:return(0,d._)((0,u._)({},r),{isOpen:!0});default:return r}}},void 0!==o&&{selectedItem:o}),{id:m})),C=(0,V.Z)({onLoadMore:h.loadMore,rootMargin:"0px 0px 300px 0px"}).targetRef,S=function(e){var t,n=e.item,i=e.index;return(0,r.tZ)(eo,(0,d._)((0,u._)({},Z.getItemProps({item:n,index:i})),{"data-cy":n.dataCy,children:(0,r.tZ)(M.Z,{highlighted:i===Z.highlightedIndex,selected:n.id===(null===(t=Z.selectedItem)||void 0===t?void 0:t.id),title:n.title})}))};return(0,r.BX)(l.G,{id:t,dataCy:f,children:[(0,r.tZ)(Y.T,{children:(0,r.tZ)("label",(0,d._)((0,u._)({},Z.getLabelProps()),{children:"select a theme"}))}),(0,r.tZ)("button",(0,d._)((0,u._)({type:"button",css:ei.trigger},p,Z.getToggleButtonProps({ref:g})),{children:(0,r.BX)(l.G,{css:ei.triggerContent,children:[(0,r.tZ)(q.Z,{size:16}),Z.selectedItem?(0,r.tZ)(a.xv,{css:ei.selectLabel,multiline:!1,children:Z.selectedItem.title}):(0,r.tZ)(a.xv,{color:"dimmer",css:ei.selectLabel,multiline:!1,children:s}),(0,r.tZ)(j.Z,{rotate:Z.isOpen?180:0,css:ei.chevron})]})})),(0,r.tZ)("div",(0,d._)((0,u._)({},Z.getMenuProps()),{css:ei.menuWrapper,children:Z.isOpen&&w.length>0?(0,r.BX)(er,{bottomOffset:b,children:[(0,r.tZ)(a.xv,{color:"dimmer",css:ei.officialHeading,multiline:!1,children:"Official Themes"}),n.official.map(function(e,t){return(0,r.tZ)(S,{item:e,index:t},"".concat(e.id))}),n.authored.length?(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{color:"dimmer",css:ei.sectionHeadings,multiline:!1,children:"Your Themes"}),n.authored.map(function(e,t){var i=n.official.length;return(0,r.tZ)(S,{item:e,index:i+t},"".concat(e.id))})]}):null,n.installed.length?(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{color:"dimmer",css:ei.sectionHeadings,multiline:!1,children:"Community Themes"}),n.installed.map(function(e,t){var i=n.official.length+n.authored.length;return(0,r.tZ)(S,{item:e,index:i+t},"".concat(e.id))})]}):null,h.authoredHasNextPage||h.installedHasNextPage?(0,r.tZ)(l.G,{css:ei.showMoreWrapper,children:h.loading?(0,r.tZ)(l.G,{css:ei.spinnerWrapper,children:(0,r.tZ)(x.Z,{size:12})}):(0,r.tZ)(y.hU,{tooltipBehavior:"hidden",alt:"Show more",onClick:h.loadMore,ref:C,children:(0,r.tZ)(j.Z,{})})}):null]}):null}))]})}var el=n(55460),ec=n(24605),es=n(90155),eu=n(32032),ed=n(63257),ef=function(e,t){var n,r,i=t.fetchMoreResult;if((null===(n=e.currentUser)||void 0===n?void 0:n.authoredThemes.__typename)==="CustomThemeConnection"&&(null===(r=i.currentUser)||void 0===r?void 0:r.authoredThemes.__typename)==="CustomThemeConnection"){var o=e.currentUser.authoredThemes.items,a=i.currentUser.authoredThemes.items;return(0,d._)((0,u._)({},i),{currentUser:(0,d._)((0,u._)({},i.currentUser),{authoredThemes:(0,d._)((0,u._)({},i.currentUser.authoredThemes),{items:(0,ed._)(o).concat((0,ed._)(a))})})})}return i},eh=function(e,t){var n,r,i=t.fetchMoreResult;if((null===(n=e.currentUser)||void 0===n?void 0:n.installedThemes.__typename)==="InstalledThemeConnection"&&(null===(r=i.currentUser)||void 0===r?void 0:r.installedThemes.__typename)==="InstalledThemeConnection"){var o=e.currentUser.installedThemes.items,a=i.currentUser.installedThemes.items;return(0,d._)((0,u._)({},i),{currentUser:(0,d._)((0,u._)({},i.currentUser),{installedThemes:(0,d._)((0,u._)({},i.currentUser.installedThemes),{items:(0,ed._)(o).concat((0,ed._)(a))})})})}return i},ep=function(e){var t=e.authoredThemesData,n=e.installedThemesData,r=e.fetchMoreAuthored,i=e.fetchMoreInstalled;return(0,X.useCallback)(function(){var e,o;(null==t?void 0:null===(e=t.currentUser)||void 0===e?void 0:e.authoredThemes.__typename)==="CustomThemeConnection"&&t.currentUser.authoredThemes.pageInfo.hasNextPage?r({variables:{input:{after:t.currentUser.authoredThemes.pageInfo.nextCursor,count:100}},updateQuery:ef}):(null==n?void 0:null===(o=n.currentUser)||void 0===o?void 0:o.installedThemes.__typename)==="InstalledThemeConnection"&&n.currentUser.installedThemes.pageInfo.hasNextPage&&i({variables:{input:{after:n.currentUser.installedThemes.pageInfo.nextCursor,count:100}},updateQuery:eh})},[t,n,r,i])},em=function(e){var t,n,i,o,a,s,d,f,h=e.context,p=(0,_._)(e,["context"]),m=(0,X.useId)(),v=(0,k.Z)().showError,g=(t=(0,u._)({},L,{variables:{input:{count:100}},fetchPolicy:"network-only",ssr:!1,notifyOnNetworkStatusChange:!0,onError:function(e){return v(e.message)},onCompleted:function(e){var t,n=null===(t=e.currentUser)||void 0===t?void 0:t.authoredThemes;((null==n?void 0:n.__typename)==="UnauthorizedError"||(null==n?void 0:n.__typename)==="UserError")&&v(n.message)}}),I.a(O,t)),y=g.data,w=g.loading,Z=g.error,x=g.fetchMore,C=(0,S._)((n=(0,u._)({},L,{variables:{input:{count:100}},fetchPolicy:"network-only",ssr:!1,notifyOnNetworkStatusChange:!0,onError:function(e){return v(e.message)},onCompleted:function(e){var t,n=null===(t=e.currentUser)||void 0===t?void 0:t.installedThemes;((null==n?void 0:n.__typename)==="UnauthorizedError"||(null==n?void 0:n.__typename)==="UserError")&&v(n.message)}}),B.t(U,n)),2),R=C[0],D=C[1],G=D.data,A=D.loading,P=D.error,N=D.fetchMore,M=(0,el.F)(),F=M.setActiveTheme,W=M.isSaving,H=M.error,V=M.theme;(0,X.useEffect)(function(){var e,t=null==y?void 0:null===(e=y.currentUser)||void 0===e?void 0:e.authoredThemes;(null==t?void 0:t.__typename)!=="CustomThemeConnection"||t.pageInfo.hasNextPage||R()},[y,R]);var z=((null==G?void 0:null===(o=G.currentUser)||void 0===o?void 0:null===(i=o.installedThemes)||void 0===i?void 0:i.__typename)==="InstalledThemeConnection"?G.currentUser.installedThemes.items:[]).map(function(e){return e.customTheme}),j=(null==y?void 0:null===(s=y.currentUser)||void 0===s?void 0:null===(a=s.authoredThemes)||void 0===a?void 0:a.__typename)==="CustomThemeConnection"?y.currentUser.authoredThemes.items:[];(0,X.useEffect)(function(){H&&v(H.message)},[H,v]);var q=ep({authoredThemesData:y,installedThemesData:G,fetchMoreAuthored:x,fetchMoreInstalled:N}),J=(null==y?void 0:null===(d=y.currentUser)||void 0===d?void 0:d.authoredThemes.__typename)==="CustomThemeConnection"&&y.currentUser.authoredThemes.pageInfo.hasNextPage,Y=(null==G?void 0:null===(f=G.currentUser)||void 0===f?void 0:f.installedThemes.__typename)==="InstalledThemeConnection"&&G.currentUser.installedThemes.pageInfo.hasNextPage;if(Z||P)return(0,r.tZ)(l.G,{children:(0,r.tZ)(b.E,{colorway:"negative",text:"Something went wrong loading your themes"})});var $={official:es.T,authored:j,installed:z};return(0,r.tZ)(l.G,{children:(0,r.tZ)(ea,(0,u._)({css:[[W?E.p.backgroundPulse(ec.TV.accentPrimaryDefault,ec.TV.accentPrimaryDimmest):{}],c.l0.backgroundColor.backgroundDefault,{":not([disabled]):hover":{background:ec.TV.backgroundHigher}}],id:m,dataCy:"preferences-theme-dropdown",sections:$,disabled:W,paginationOptions:{loadMore:q,authoredHasNextPage:J,installedHasNextPage:Y,loading:w||A},selectedItem:(0,T.iG)(V)?V.customTheme:es.T.find(function(e){return e.id===V.id}),onChange:function(e){F(e.id),"number"==typeof e.id&&(0,eu.B4)({themeId:e.id,colorScheme:e.colorScheme,isAlreadyInstalled:!0,isAuthor:e.isCurrentUserThemeAuthor,context:h})}},p))})},ev=n(74035),eg=n(15235),ey=n(18060),eb=n(59947),ew=n(79310),eZ=n(46845);function ex(e){return e.slice().sort(function(e,t){return e-t})}var eC=(0,s.X)({ruler:[c.l0.py(4),c.l0.px(8),c.l0.rowWithGap(4),c.l0.align.center,c.l0.borderRadius(8)],remove:[c.l0.borderRadius(4)],title:[c.l0.pr(8),c.l0.overflow("visible"),c.l0.flex.shrink(0)],body:[c.l0.flex.row,c.l0.flex.wrapReverse,c.l0.align.start,c.l0.justify.end,c.l0.flex.growAndShrink(1),{gap:c.TV.space4}],list:[c.l0.flex.row,c.l0.flex.wrap,c.l0.flex.growAndShrink(1),c.l0.align.end,c.l0.justify.end,{gap:c.TV.space4}],add:[c.l0.rowWithGap(4),c.l0.align.center]});function e_(e){var t=e.pos,n=e.onRemove;return(0,r.BX)(w.Tg,{css:eC.ruler,elevated:!0,children:[(0,r.tZ)(a.xv,{multiline:!1,children:t}),(0,r.tZ)(y.hU,{css:eC.remove,alt:"Remove ruler",onClick:n,children:(0,r.tZ)(ew.Z,{})})]})}function eS(){var e=(0,S._)((0,X.useState)(!1),2),t=e[0],n=e[1],i=(0,S._)((0,X.useState)(80),2),o=i[0],c=i[1],s=(0,X.useRef)(null),u=(0,X.useRef)(null),d=-1===o,h=o>=0&&o<=1e3,p=(0,f.Gn)("rulers"),m=p.preferences,v=p.update,g=ex(m.rulers);return(0,r.tZ)(eZ.$,{id:"rulers",title:(0,r.tZ)(a.xv,{css:eC.title,multiline:!1,children:"Rulers"}),children:(0,r.BX)(l.G,{css:eC.body,children:[(0,r.tZ)(l.G,{css:eC.list,children:g.map(function(e,t){return(0,r.tZ)(e_,{pos:e,onRemove:function(){v({rulers:g.filter(function(e,n){return n!==t})})}},t)})}),t?(0,r.BX)(l.G,{css:eC.add,children:[(0,r.tZ)(ey.II,{ref:s,type:"number",style:{width:d?"6ch":o.toString().length+5.5+"ch"},value:o>=0?o.toString():"",onChange:function(e){if(""===e.target.value)c(-1);else{var t=parseInt(e.target.value,10);isNaN(t)||c(t)}},onKeyDown:function(e){"Escape"===e.key?(c(80),n(!1)):"Enter"===e.key&&h&&(v({rulers:ex((0,ed._)(g).concat([o]))}),n(!1),c(80))},onBlur:function(e){e.relatedTarget!==u.current&&(n(!1),c(80))},onFocus:function(e){e.target.select()},autoFocus:!0}),(0,r.tZ)(eg.zx,{ref:u,text:"Accept",colorway:"primary",iconLeft:(0,r.tZ)(eb.Z,{}),disabled:!h,onClick:function(){h&&(v({rulers:ex((0,ed._)(g).concat([o]))}),n(!1),c(80))},onBlur:function(e){e.relatedTarget!==s.current&&(n(!1),c(80))}})]}):(0,r.tZ)(r.HY,{children:g.length>=10?null:(0,r.tZ)(eg.zx,{text:"Add Ruler",iconLeft:(0,r.tZ)($.Z,{}),onClick:function(){return n(!0)}})})]})})}var ek=(0,s.X)({container:[c.l0.flex.row,c.l0.justify.spaceBetween,c.l0.align.start,{"@container (max-width: 400px)":[c.l0.colWithGap(8)]}],title:[c.l0.flex.growAndShrink(1)],body:[c.l0.colWithGap(12)],switchWrapper:[c.l0.rowWithGap(8),c.l0.align.center,c.l0.justify.end,{"@container (max-width: 400px)":[c.l0.flex.rowReverse]}],switchLabel:[{"@container (max-width: 400px)":[c.l0.ml(8)]}]});function eE(){var e=(0,f.Gn)("showLeadingWhitespace","showTrailingWhitespace","showEnclosedWhitespace","showSelectedWhitespace"),t=e.preferences,n=e.update;return(0,r.BX)(l.G,{css:ek.container,children:[(0,r.BX)(l.G,{css:ek.title,children:[(0,r.tZ)(a.xv,{children:"Show Whitespace"}),(0,r.tZ)(a.xv,{multiline:!0,variant:"small",color:"dimmest",children:"Make whitespace characters visible, such as tabs and spaces."})]}),(0,r.BX)(l.G,{css:ek.body,children:[(0,r.BX)(l.G,{css:ek.switchWrapper,tag:"label",children:[(0,r.tZ)(a.xv,{variant:"small",css:ek.switchLabel,children:"Leading"}),(0,r.tZ)(Z.r,{"aria-label":"Show leading whitespace",isSelected:t.showLeadingWhitespace,onChange:function(e){n({showLeadingWhitespace:e})}})]}),(0,r.BX)(l.G,{css:ek.switchWrapper,tag:"label",children:[(0,r.tZ)(a.xv,{variant:"small",css:ek.switchLabel,children:"Enclosed"}),(0,r.tZ)(Z.r,{"aria-label":"Show enclosed whitespace",isSelected:t.showEnclosedWhitespace,onChange:function(e){n({showEnclosedWhitespace:e})}})]}),(0,r.BX)(l.G,{css:ek.switchWrapper,tag:"label",children:[(0,r.tZ)(a.xv,{variant:"small",css:ek.switchLabel,children:"Trailing"}),(0,r.tZ)(Z.r,{"aria-label":"Show trailing whitespace",isSelected:t.showTrailingWhitespace,onChange:function(e){n({showTrailingWhitespace:e})}})]}),(0,r.BX)(l.G,{css:ek.switchWrapper,tag:"label",children:[(0,r.tZ)(a.xv,{variant:"small",css:ek.switchLabel,children:"Selected"}),(0,r.tZ)(Z.r,{"aria-label":"Show selected whitespace",isSelected:t.showSelectedWhitespace,onChange:function(e){n({showSelectedWhitespace:e})}})]})]})]})}var eT=n(93264),eR=n(85421),eD=n(95563),eI=n(11894),eB=n(64432),eG=n(11721);function eA(){var e=(0,R._)(["\n  query GhostwriterChatCurrentUserQuery {\n    currentUser {\n      username\n      id\n      image\n      isStaff: hasRole(role: REPLIT_STAFF)\n      isVerified\n      userSubscriptionType\n    }\n  }\n"]);return eA=function(){return e},e}var eP={},eL=(0,D.Ps)(eA()),eN=n(80454),eO=n(252),eU=n(2049),eM=n(75235),eX=eM.Z.get(eD.Tu,"string"),eF=Array.from((0,ed._)(Object.entries(eN.f)).concat([["custom",""]]),function(e){return{title:e[0],value:e[1]}}),eW=(0,eD.hN)()?eF[0]:eF[1];function eH(){var e,t,n,i=(0,h.P5)({controlName:"flag-ghostwriter-chat-engine-override",logFlagToAnalytics:!1}),o=(e=(0,u._)({},eP,void 0),I.a(eL,e)).data,s=(null==o?void 0:null===(t=o.currentUser)||void 0===t?void 0:t.isStaff)||!1,d=(0,f.Gn)("chatEngine","ghostwriterChatServiceEnvironment","ghostwriterUseAdvancedModel"),p=d.preferences,v=d.update,b=(0,eD.vl)(),w=eX||((0,eD.hN)()?eN.f.production:eN.f.staging),Z=(0,S._)((0,X.useState)(!Object.values(eN.f).includes(w)),2),x=Z[0],_=Z[1],k=(0,S._)((0,X.useState)(""),2),E=k[0],T=k[1],R=function(e){var t=v(e),n=!0,r=!1,i=void 0;try{for(var o,a=Object.entries(e)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=(0,S._)(o.value,2),c=l[0],s=l[1];(0,m.j)(m.U3.SETTINGS_TOGGLED,{settingChanged:c,updatedValue:s})}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t};return(0,r.BX)(r.HY,{children:[i?(0,r.BX)(r.HY,{children:[(0,r.tZ)(g.R,{}),(0,r.tZ)(eO.L,{setting:eU.z2.chatEngine,currentValue:p.chatEngine,update:R,title:(0,r.BX)(r.HY,{children:[(0,r.BX)(l.G,{css:[c.l0.flex.row,c.l0.rowWithGap(8),c.l0.center,c.l0.justify.start],children:[(0,r.tZ)(a.xv,{multiline:!1,children:"AI Chat Engine"}),(0,r.tZ)(eB.u,{tooltip:'You are seeing this functionality because you have special permissions. If set, this preference overrides "Use Advanced model" preference.',children:(0,r.tZ)(eG.Z,{})})]}),(0,r.BX)(a.xv,{variant:"small",color:"dimmest",children:["Current applied engine: ",b]})]})})]}):null,(0,r.BX)(r.HY,{children:[(0,r.tZ)(g.R,{}),(0,r.tZ)(eO.L,{setting:eU.z2.ghostwriterUseAdvancedModel,currentValue:p.ghostwriterUseAdvancedModel,update:R})]}),s?(0,r.BX)(r.HY,{children:[(0,r.tZ)(g.R,{}),(0,r.tZ)(eZ.$,{id:"ghostwriterChatService",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(l.G,{css:[c.l0.flex.row,c.l0.rowWithGap(8),c.l0.center,c.l0.justify.start],children:(0,r.tZ)(a.xv,{multiline:!1,children:"Ghostwriter Chat Service V2 "})}),(0,r.BX)(l.G,{css:[c.l0.colWithGap(8)],children:[(0,r.BX)(a.xv,{variant:"small",color:"dimmest",children:["Current endpoint: ",w]}),(0,r.tZ)(a.xv,{variant:"small",color:"dimmest",children:"Reloading window is required for change to take effect."})]})]}),children:(0,r.BX)(l.G,{css:c.l0.colWithGap(12),children:[(0,r.tZ)(eI.P,{css:[c.l0.minWidth(184)],initialSelectedItem:null!==(n=eF.find(function(e){return e.value===eX}))&&void 0!==n?n:eX?eF[eF.length-1]:eW,onChange:function(e){(null==e?void 0:e.title)!=="custom"?(eM.Z.set(eD.Tu,null==e?void 0:e.value),_(!1),window.location.reload()):_(!0)},items:eF}),x?(0,r.BX)(l.G,{css:c.l0.rowWithGap(4),children:[(0,r.tZ)(ey.II,{value:E,onChange:function(e){T(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&eM.Z.set(eD.Tu,E)}}),(0,r.tZ)(y.hU,{alt:"Update custom url",onClick:function(){eM.Z.set(eD.Tu,E),window.location.reload()},children:p.ghostwriterChatServiceEnvironment!==E?(0,r.tZ)(C.Z,{}):(0,r.tZ)(eb.Z,{})})]}):null]})})]}):null]})}function eV(e){var t=e.preferences,n=e.update;return(0,r.tZ)(eZ.$,{id:"formatOnSave",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{multiline:!1,children:"Format on Save"}),(0,r.tZ)(a.xv,{variant:"small",color:"dimmest",children:"Controls whether files are automatically formatted when saved"})]}),children:(0,r.tZ)(Z.r,{"aria-label":"Format on Save",isSelected:t.formatOnSave,onChange:function(e){n({formatOnSave:e})}})})}var ez=n(19934),ej=n(89421);function eq(e){var t=e.context,n=e.text,i=(0,S._)((0,X.useState)(!1),2),o=i[0],a=i[1];return(0,r.BX)(r.HY,{children:[(0,r.tZ)(eg.zx,{text:void 0===n?"Activate":n,colorway:"primary",onClick:function(){return a(!0)}}),(0,r.tZ)(ej.Z,{isOpen:o,onClose:function(){return a(!1)},type:"purchase",analyticsContext:{upgrade:{context:t}}})]})}var eJ=n(9413),eY=n(85438),e$=n(14375);function eK(){var e=(0,R._)(["\n  query CodeSuggestionPreferences {\n    currentUser {\n      id\n      userSubscriptionType\n    }\n  }\n"]);return eK=function(){return e},e}var eQ={},e0=(0,D.Ps)(eK()),e1={titleContainer:[c.l0.rowWithGap(8),c.l0.align.center],upgradeRow:[c.l0.rowWithGap(8),c.l0.align.center,c.l0.justify.spaceBetween]};function e2(){var e,t,n=(0,h.P5)({controlName:"flag-code-suggestion-engine",logFlagToAnalytics:!1}),o=(e=(0,u._)({},eQ,void 0),I.a(e0,e)).data,s=(null==o?void 0:null===(t=o.currentUser)||void 0===t?void 0:t.userSubscriptionType)===eY.HP.HackerPro,d=(0,i.Gv)((0,eR.useRouter)()),p=(0,eJ.v)().isTeamWithAiDisabled,v=(0,f.Gn)("codeSuggestion","completeCodeEngine"),y=v.preferences,b=v.update,w=(0,ez.Z)().engine,Z=function(e){var t=b(e),n=!0,r=!1,i=void 0;try{for(var o,a=Object.entries(e)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=(0,S._)(o.value,2),c=l[0],s=l[1];(0,m.j)(m.U3.SETTINGS_TOGGLED,{settingChanged:c,updatedValue:s})}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t};return p?null:(0,r.BX)(l.G,{css:c.l0.colWithGap(12),children:[(0,r.tZ)(eO.L,{currentValue:y.codeSuggestion,update:Z,setting:eU.z2.codeSuggestion,title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(l.G,{css:e1.titleContainer,children:(0,r.tZ)(a.xv,{multiline:!1,children:"AI Code Completion"})}),(0,r.BX)(a.xv,{variant:"small",color:"dimmest",children:["Code completion provides inline “ghost text” suggestions while you code.",(0,r.tZ)("br",{}),"Press tab or swipe right on your mobile device to accept."]})]})}),s||d?null:(0,r.BX)(l.G,{css:e1.upgradeRow,children:[(0,r.tZ)(a.xv,{children:"Upgrade for full access to Replit AI"}),(0,r.tZ)(eq,{text:"Upgrade to Replit ".concat(e$.we),context:"workspace_settings_pane"})]}),n?(0,r.BX)(r.HY,{children:[(0,r.tZ)(g.R,{}),(0,r.tZ)(eO.L,{title:(0,r.BX)(r.HY,{children:[(0,r.BX)(l.G,{css:[c.l0.flex.row,c.l0.rowWithGap(8),c.l0.center,c.l0.justify.start],children:[(0,r.tZ)(a.xv,{multiline:!1,children:"AI Code Completion Engine"}),(0,r.tZ)(eB.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,r.tZ)(eG.Z,{})})]}),(0,r.BX)(a.xv,{variant:"small",color:"dimmest",children:["Current applied engine: ",w]})]}),currentValue:y.completeCodeEngine,update:Z,setting:eU.z2.completeCodeEngine})]}):null]})}function e4(e){var t=e.preferences,n=e.update;return(0,r.tZ)(eZ.$,{id:"codeActionsOnSave",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{multiline:!1,children:"Code Actions on Save"}),(0,r.tZ)(a.xv,{variant:"small",color:"dimmest",children:"Run 'Fix all' Code Actions for the current editor on save."})]}),children:(0,r.tZ)(Z.r,{"aria-label":"Code Actions on Save",isSelected:t.codeActionsOnSave,onChange:function(e){n({codeActionsOnSave:e})}})})}function e3(e){var t=e.hideLayoutControl,n=e.className,o=e.resetLayout,s=(0,f.Gn)("isLayoutStacked","fontSize","minimapDisplay","wrapping","keyboardHandler","multiselectModifierKey","showFileTreeGitStatus","codeIntelligence","codeActionsOnSave","formatOnSave","semanticTokens","accessibleTerminal","shellBellAudio","webviewAutoOpenOnPortOpened","chatAudioNotification","forwardPortsAutomatically","acceptSuggestionOnCommitCharacter","enableCloseBracketMatching"),_=s.preferences,S=s.update,k=(0,i.Gv)((0,eR.useRouter)()),E=(0,i.T3)(),T=(0,eT.cR)(),R=(0,v.NJ)(),D=(0,h.P5)({controlName:"flag-draft-buffers",logFlagToAnalytics:!1}),I=(0,h.P5)({controlName:"flag-lsp-semantic-tokens",logFlagToAnalytics:!1}),B=function(e){Object.keys(e).forEach(function(t){var n=e[t];(0,m.j)(m.U3.SETTINGS_TOGGLED,{settingChanged:t,updatedValue:n})}),S(e)};if(!_)return null;var G=(0,d._)((0,u._)({},eU.z2.multiselectModifierKey),{options:eU.z2.multiselectModifierKey.options.map(function(e){return(0,d._)((0,u._)({},e),{title:(0,p.hp)("cmdOrCtrlKey"===e.id?p.LH.CMD_OR_CTRL_KEY:p.LH.ALT_KEY,R)})})});return(0,r.BX)(w.Tg,{className:n,background:"default",css:[c.l0.p(16),c.l0.colWithGap(12)],children:[t?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(eO.L,{setting:eU.z2.layout,update:B,currentValue:_.isLayoutStacked,rightComponent:o?(0,r.tZ)(y.hU,{alt:"Reset layout",onClick:function(){o.reset()},children:o.reseting?(0,r.tZ)(x.Z,{}):(0,r.tZ)(C.Z,{})}):null}),(0,r.tZ)(g.R,{})]}),(0,r.tZ)(eO.L,{setting:eU.z2.fontSize,update:B,currentValue:_.fontSize}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eZ.$,{id:"acceptSuggestionOnCommitCharacter",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{children:"Accept Suggestion on Commit Character"}),(0,r.BX)(a.xv,{variant:"small",color:"dimmest",children:["Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (",(0,r.tZ)("code",{children:";"}),") can be a commit character that accepts the suggestion and types the character."]})]}),children:(0,r.tZ)(Z.r,{"aria-label":"Accept suggestion on commit character",isSelected:_.acceptSuggestionOnCommitCharacter,onChange:function(e){B({acceptSuggestionOnCommitCharacter:e})}})}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eZ.$,{id:"enableCloseBracketMatching",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{children:"Auto close brackets"}),(0,r.tZ)(a.xv,{variant:"small",color:"dimmest",children:"Controls whether the editor should automatically close brackets after the user adds an opening bracket."})]}),children:(0,r.tZ)(Z.r,{"aria-label":"Auto close brackets",isSelected:_.enableCloseBracketMatching,onChange:function(e){B({enableCloseBracketMatching:e})}})}),(0,r.tZ)(g.R,{}),(0,r.tZ)(ev.ZP,{}),(0,r.tZ)(g.R,{}),D?(0,r.BX)(r.HY,{children:[(0,r.tZ)(e4,{preferences:_,update:B}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eV,{preferences:_,update:B}),(0,r.tZ)(g.R,{})]}):null,(0,r.tZ)(eO.L,{setting:eU.z2.wrapping,update:B,currentValue:_.wrapping}),(0,r.tZ)(g.R,{}),E?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(eO.L,{setting:eU.z2.minimap,update:B,currentValue:_.minimapDisplay}),(0,r.tZ)(g.R,{})]}),(0,r.tZ)(eS,{}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eO.L,{setting:eU.z2.keyboardHandler,update:B,currentValue:_.keyboardHandler}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eO.L,{setting:G,update:B,currentValue:_.multiselectModifierKey}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eO.L,{setting:eU.z2.showFileTreeGitStatus,update:B,currentValue:_.showFileTreeGitStatus}),(0,r.tZ)(g.R,{}),(0,r.tZ)(e2,{}),(0,r.tZ)(eH,{}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eO.L,{setting:eU.z2.codeIntelligence,update:B,currentValue:_.codeIntelligence}),(0,r.tZ)(g.R,{}),I&&_.codeIntelligence?(0,r.BX)(r.HY,{children:[(0,r.tZ)(eO.L,{setting:eU.z2.semanticTokens,update:B,currentValue:_.semanticTokens}),(0,r.tZ)(g.R,{})]}):null,(0,r.tZ)(eE,{}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eO.L,{setting:eU.z2.accessibleTerminal,update:B,currentValue:_.accessibleTerminal}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eO.L,{setting:eU.z2.shellBellAudio,update:B,currentValue:_.shellBellAudio}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eZ.$,{id:"webviewAutoOpenOnPortOpened",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{children:T?"Automatic Webview (unavailable in this Repl)":"Automatic Webview"}),(0,r.tZ)(a.xv,{variant:"small",color:"dimmest",children:"Open a webview automatically when a port is open"}),T?(0,r.tZ)(l.G,{css:[c.l0.pt(8),c.l0.maxWidth("calc(100% - 12px)")],children:(0,r.tZ)(b.E,{colorway:"orange",text:'This preference is unavailable in Extension Repls. To view custom tools in dev mode, click the "Preview" button in Extension Devtools instead.'})}):null]}),children:(0,r.tZ)(Z.r,{"aria-label":"Automatic Webview",isSelected:_.webviewAutoOpenOnPortOpened,isDisabled:T,onChange:function(e){B({webviewAutoOpenOnPortOpened:e})}})}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eO.L,{setting:eU.z2.forwardPortsAutomatically,update:B,currentValue:_.forwardPortsAutomatically}),k?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(g.R,{}),(0,r.tZ)(eZ.$,{id:"theme",title:"Theme",children:(0,r.tZ)(em,{css:[c.l0.minWidth(184),c.l0.backgroundColor.backgroundHigher],context:eu.HY.WorkspacePreferencesPane})})]}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eO.L,{setting:eU.z2.chatAudioNotification,update:B,currentValue:_.chatAudioNotification})]})}var e8=n(72370),e6=n(77450),e5=n(93801),e7=n(19653),e9=n(36647),te=n(60626),tt=n(98640),tn=n(55821),tr=n(76575),ti=n(39712),to=n(87128),ta=n(38702),tl=n(80003),tc=n(11407),ts=n(50798);function tu(e){var t=(0,X.useRef)(null),n=(0,X.useRef)([]);function r(){t.current&&clearTimeout(t.current),n.current=[]}function i(t){e({type:"success",shortcut:t.length>1?[t[0],t[1]]:t[0]}),r()}return{onKeyDown:function(r){var o=t.current,a=n.current;r.preventDefault(),r.stopPropagation(),o&&clearTimeout(o);var l=(0,tc.lc)(r);if(l){if((0,tc.ZG)(l)){e({type:"update",recorded:a.length?[a[0],l]:[l]});return}if(a.length>0&&"Enter"===l){i(a);return}a.push(l),e({type:"update",recorded:a});var c=2===a.length?0:600;t.current=setTimeout(function(){return i(a)},c)}},startRecording:function(){r(),e({type:"start"})},stopRecording:function(){r(),e({type:"stop"})}}}var td=(0,s.X)({root:[c.l0.colWithGap(8)],row:[c.l0.rowWithGap(8),c.l0.align.center,c.l0.minHeight(28)],left:[c.l0.colWithGap(2),c.l0.flex.grow(0),c.l0.flex.shrink(1)],right:[c.l0.rowWithGap(16),c.l0.align.center,c.l0.justify.end,c.l0.position.relative,c.l0.flex.grow(1),c.l0.flex.shrink(0)],recordingRow:[c.l0.flex.column,c.l0.align.center,c.l0.justify.end],recordingRowInner:[c.l0.rowWithGap(8),c.l0.align.center],recordingRowKeys:[c.l0.position.relative],recordingRowHint:[c.l0.position.absolute,c.l0.top(20),c.l0.right(0),{fontStyle:"italic"}],recordingRowPlaceholder:[c.l0.display.flex,c.l0.align.baseline,c.l0.rowWithGap(4),{fontStyle:"italic"}],keys:[c.l0.display.inlineFlex,c.l0.rowWithGap(12)],secondaryText:[c.l0.display.flex,c.l0.flex.row,c.l0.align.center,c.l0.rowWithGap(4)],secondaryTextId:[c.l0.flex.grow(1),c.l0.flex.shrink(0)],secondaryTextDescription:[c.l0.flex.grow(0),c.l0.flex.shrink(1),c.l0.color.foregroundDimmest],buttons:[c.l0.rowWithGap(4)]}),tf=(0,s.X)({root:[c.l0.rowWithGap(8),c.l0.align.center],recordingRow:[c.l0.rowWithGap(4),c.l0.align.center],input:[{opacity:0,width:1}],searchingText:[{fontStyle:"italic"}]});function th(e){var t,n,i,o,s=e.command,u=e.filter,d=e.shortcutsToCommands,f=e.onViewShortcutConflicts,h=(0,ts.r3)(),p=(0,ts.wU)(),m=(0,ts.V_)(s.id),v=(0,S._)((0,X.useState)(null),2),g=v[0],w=v[1],Z=tu(function(e){switch(e.type){case"start":w({recorded:[]});return;case"stop":w(null);return;case"update":w({recorded:e.recorded});return;case"success":var t=(0,tc.SG)(e.shortcut);if(!t||h(s.id,t)){w(null);return}w(null);return;case"error":w(function(t){var n;return{error:e.message,recorded:null!==(n=null==t?void 0:t.recorded)&&void 0!==n?n:[]}});return}}),x=Z.stopRecording,_=Z.startRecording,k=Z.onKeyDown,E=(0,e7.Z)(function(){return x()},[]),T=!!g;tb(T);var R=null!==(o=null==g?void 0:g.recorded)&&void 0!==o?o:[],D=null==g?void 0:g.error,I=u.length>0,B=null===(t=te.Z.match(u,s.name))||void 0===t?void 0:t.ranges,G=null===(n=te.Z.match(u,s.id))||void 0===n?void 0:n.ranges,A=(null==s?void 0:s.description)?null===(i=te.Z.match(u,s.description))||void 0===i?void 0:i.ranges:void 0,P=(0,e9.Z)(function(){return u.replaceAll('"',"").split("-").map(function(e){return e.toLowerCase()})},[u]);return(0,r.BX)(l.G,{css:td.root,"data-testid":s.id,children:[(0,r.BX)(l.G,{css:td.row,children:[(0,r.BX)(l.G,{css:td.left,children:[(0,r.tZ)(e5.x,{text:s.name,highlight:B,dimmed:I}),(0,r.BX)(a.xv,{variant:"small",css:td.secondaryText,multiline:!1,children:[I?(0,r.tZ)(e5.x,{css:td.secondaryTextId,text:s.id,highlight:G,dimmed:I}):null,s.description?(0,r.BX)(r.HY,{children:[I?(0,r.tZ)(a.xv,{color:"dimmest",multiline:!1,children:"•"}):null,(0,r.tZ)(e5.x,{css:td.secondaryTextDescription,text:s.description,highlight:A,dimmed:I})]}):null]})]}),(0,r.BX)(l.G,{innerRef:T?E:void 0,css:td.right,children:[T?(0,r.tZ)(ta.MT,{autoFocus:!0,restoreFocus:!0,children:(0,r.tZ)("input",{onKeyDown:k,css:tf.input})}):null,s.shortcut&&!T&&d.length>1?(0,r.tZ)(y.hU,{"data-testid":"View conflicts",alt:"View conflicts",onClick:function(){X.startTransition(function(){s.shortcut&&f(tp([s.shortcut]))})},children:(0,r.tZ)(to.Z,{color:c.TV.foregroundDimmer})}):null,s.shortcut&&!T?(0,r.tZ)(tl.bM,{small:!0,keyCombo:s.shortcut,match:P}):null,s.shortcut||T?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(eg.zx,{size:"small",variant:"outlined",iconLeft:(0,r.tZ)($.Z,{}),text:"Add shortcut",onClick:function(){return _()}}),m?(0,r.tZ)(y.hU,{alt:"Reset",onClick:function(){return h(s.id,m)},children:(0,r.tZ)(C.Z,{})}):null]}),T?(0,r.tZ)(l.G,{css:td.recordingRow,children:(0,r.BX)(l.G,{css:td.recordingRowInner,children:[(0,r.tZ)(l.G,{css:td.recordingRowKeys,children:R.length>0?(0,r.tZ)(l.G,{css:td.keys,children:R.map(function(e,t){return(0,r.tZ)(tl.bM,{small:!0,keyCombo:e},"".concat(e,"-").concat(t))})}):(0,r.tZ)(a.xv,{multiline:!1,color:"dimmest",css:td.recordingRowPlaceholder,children:"Recording…"})}),(0,r.tZ)(y.hU,{alt:"Stop",onClick:function(){return x()},children:(0,r.tZ)(tx,{})})]})}):null,s.shortcut&&!T?(0,r.BX)(l.G,{css:td.buttons,children:[m&&m!==s.shortcut?(0,r.tZ)(y.hU,{alt:"Reset",onClick:function(){return h(s.id,m)},children:(0,r.tZ)(C.Z,{})}):null,(0,r.tZ)(y.hU,{alt:"Change",onClick:function(){return _()},children:(0,r.tZ)(tr.Z,{})}),(0,r.tZ)(y.hU,{alt:"Remove",onClick:function(){return p(s.id)},children:(0,r.tZ)(tn.Z,{})})]}):null]})]}),D?(0,r.tZ)(b.E,{icon:(0,r.tZ)(to.Z,{}),colorway:"warning",text:D,closable:!0,closeAction:function(){return w(function(e){var t;return{recorded:null!==(t=null==e?void 0:e.recorded)&&void 0!==t?t:[]}})}}):null]})}function tp(e){var t=e.flat();return t.length>1?t.map(function(e){return tp([e])}).join(" "):(0,tc.QR)(t[0]).map(function(e){return'"'.concat(e,'"')}).join("-").replaceAll(" ","space")}var tm=(0,s.X)({root:[c.l0.colWithGap(8),c.l0.p(0)],surface:[c.l0.pt(8),c.l0.borderRadius(8),c.l0.colWithGap(12)]});function tv(e){var t=e.search,n=e.setSearch,i=(0,X.useRef)(null),o=(0,S._)((0,X.useState)(!1),2),c=o[0],s=o[1];tb(c);var u=tu(function(e){var t,r,o;switch(e.type){case"start":s(!0),n(""),null==i||null===(t=i.current)||void 0===t||t.focus();return;case"stop":case"error":s(!1),null==i||null===(r=i.current)||void 0===r||r.focus(),null==i||null===(o=i.current)||void 0===o||o.select();return;case"success":n(tp([e.shortcut]));return;case"update":n(tp(e.recorded));return}}),d=u.stopRecording,f=u.startRecording,h=u.onKeyDown;return(0,r.BX)(l.G,{css:tf.root,children:[(0,r.tZ)(ta.MT,{children:(0,r.tZ)(ey.II,{ref:i,placeholder:c?"Searching with pressed keys. Press Escape to exit":"Type to search keyboard shortcuts",onBlur:c?d:void 0,onChange:function(e){n(e.currentTarget.value)},onKeyDown:c?function(e){"Escape"===e.key?d():h(e)}:void 0,value:t})}),(0,r.tZ)(l.G,{css:tf.recordingRow,children:c?(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{color:"dimmest",css:tf.searchingText,multiline:!1,children:"Searching…"}),(0,r.tZ)(y.hU,{alt:"Stop Recording",onClick:d,children:(0,r.tZ)(tx,{})})]}):(0,r.tZ)(y.hU,{alt:"Record Keys",onClick:f,children:(0,r.tZ)(ti.Z,{})})}),(0,r.tZ)(y.hU,{alt:"Clear Input",disabled:0===t.length,onClick:function(){var e;n(""),null==i||null===(e=i.current)||void 0===e||e.focus()},children:(0,r.tZ)(ew.Z,{})})]})}function tg(){var e=(0,S._)((0,X.useState)(""),2),t=e[0],n=e[1],i=(0,X.useDeferredValue)(t);return(0,r.BX)(l.G,{css:tm.root,children:[(0,r.tZ)(tv,{search:t,setSearch:n}),(0,r.tZ)(ty,{search:i,setSearch:n})]})}var ty=X.memo(function(e){var t=e.search,n=e.setSearch,i=(0,ts.xF)(),o=(0,e9.Z)(function(){return(0,ed._)(i.values())},[i]),a=(0,X.useMemo)(function(){return te.Z.filter(t,o,{extract:function(e){var t="".concat(e.name," ").concat(e.id);return e.description&&(t+=" ".concat(e.description)),e.shortcut&&(t+=" ".concat(tp([e.shortcut]))),t}})},[t,o]),l=(0,X.useMemo)(function(){return a.reduce(function(e,t){var n=t.original,r=n.shortcut;if(!r)return e;var i=e.get(r);return i?i.push(n):i=[n],e.set(r,i),e},new Map)},[a]);return a.length>0?(0,r.tZ)(w.Tg,{css:tm.surface,children:a.map(function(e,i){var o;return(0,r.BX)(X.Fragment,{children:[i>0?(0,r.tZ)(w.Tg,{elevated:!0,style:{height:1}}):null,(0,r.tZ)(th,{command:e.original,filter:t,shortcutsToCommands:null!==(o=l.get(e.original.shortcut))&&void 0!==o?o:[],onViewShortcutConflicts:n})]},e.original.id)})}):null});function tb(e){var t="You have unsaved changes";(0,X.useEffect)(function(){var n=function(e){return e.preventDefault(),e.returnValue=t,t};if(e)return window.addEventListener("beforeunload",n),function(){window.removeEventListener("beforeunload",n)}},[e])}var tw=(0,e6.F4)("0%{transform:scale(1);}40%{transform:scale(1.3);}100%{transform:scale(1);}"),tZ=(0,s.X)({background:[{animationName:tw,animation:"".concat(tw," 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"),boxShadow:"0 0 10px ".concat(c.TV.redStronger)},c.l0.height(11),c.l0.width(11),c.l0.borderRadius("full"),c.l0.position.absolute],container:[c.l0.position.relative,c.l0.align.center,c.l0.justify.center],icon:[{zIndex:1}]});function tx(){return(0,r.BX)(l.G,{css:tZ.container,children:[(0,r.tZ)(tt.Z,{css:tZ.icon,color:c.TV.redStronger}),(0,r.tZ)(l.G,{css:tZ.background})]})}function tC(){var e=(0,e8.U)()("keyboard_shortcuts");return(0,r.BX)(w.Tg,{background:"default",css:[c.l0.px(16),c.l0.pb(16),c.l0.colWithGap(12)],children:[(0,r.tZ)(l.G,{tag:"label",htmlFor:e}),(0,r.tZ)(tg,{})]})}var t_=(0,s.X)({headerContainer:[c.l0.flex.column,c.l0.justify.center,c.l0.px(16),c.l0.py(8)],subheading:[{fontStyle:"italic"},c.l0.color.foregroundDimmer,c.l0.mt(8),c.l0.mb(8)],tabs:[{width:"100%"}],tabList:[{"[aria-selected=true]":[c.l0.fontWeight.medium]}],tab:[c.l0.py(8),c.l0.px(16)]});function tS(e){var t=e.hideLayoutControl,n=e.resetLayout,c=(0,i.T3)();return(0,r.BX)(r.HY,{children:[(0,r.BX)(l.G,{css:t_.headerContainer,children:[(0,r.tZ)(a.h4,{variant:"subheadBig",level:3,children:"User Settings"}),(0,r.tZ)(a.xv,{variant:"small",css:t_.subheading,children:"The following settings apply to your account and will be used across all your Repls."})]}),c?(0,r.tZ)(e3,{hideLayoutControl:t,resetLayout:n}):(0,r.tZ)(l.G,{children:(0,r.BX)(o.mQ,{css:t_.tabs,children:[(0,r.BX)(o.td,{withDividers:!1,css:t_.tabList,children:[(0,r.tZ)(o.OK,{css:t_.tab,children:"Editor preferences"}),(0,r.tZ)(o.OK,{css:t_.tab,children:"Keyboard shortcuts"})]}),(0,r.BX)(o.nP,{children:[(0,r.tZ)(o.x4,{children:(0,r.tZ)(e3,{resetLayout:n})}),(0,r.tZ)(o.x4,{children:(0,r.tZ)(tC,{})})]})]})})]})}},54012:function(e,t,n){n.d(t,{An:function(){return u},r:function(){return f}});var r=n(41733),i=n(21262),o=n(71440),a=n(99165);function l(){var e=(0,i._)(["\n  fragment CreateProjectBeforeForkReplContext on Repl {\n    id\n    title\n    description\n    publishedAs\n    user {\n      id\n      username\n    }\n    deployment {\n      activeRelease {\n        id\n      }\n    }\n    org {\n      id\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i._)(["\n  mutation CreateProjectBeforeFork($input: CreateProjectInput!) {\n    createProject(input: $input) {\n      __typename\n      ... on Error {\n        message\n      }\n      ... on Project {\n        id\n        mainRepl {\n          id\n          project {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}var s={},u=(0,o.Ps)(l()),d=(0,o.Ps)(c());function f(e){var t=(0,r._)({},s,e);return a.D(d,t)}},42950:function(e,t,n){n.d(t,{G:function(){return s}});var r=n(4216),i=n(94778),o=n(49224),a=n(72093),l=n(24605),c=(0,o.X)({container:[{maskImage:"linear-gradient(to right, white 80%, transparent)"}],svg:[a.l0.width("auto"),a.l0.height("auto")]}),s=function(){return(0,r.tZ)(i.G,{css:c.container,children:(0,r.BX)("svg",{viewBox:"0 0 448 59",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.tZ)("path",{d:"M28 14.5C56 14.5 56 44.5 84 44.5",stroke:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{d:"M196 14.5C224 14.5 224 44.5 252 44.5",stroke:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{d:"M280 14.5C308 14.5 308 44.5 336 44.5",stroke:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{d:"M364 14.5C392 14.5 392 44.5 420 44.5",stroke:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{d:"M168 14.5C140 14.5 140 44.5 112 44.5",stroke:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{d:"M112 14.5C140 14.5 140 44.5 168 44.5",stroke:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{d:"M336 14.5C308 14.5 308 44.5 280 44.5",stroke:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{d:"M420 14.5C392 14.5 392 44.5 364 44.5",stroke:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{d:"M252 14.5C224 14.5 224 44.5 196 44.5",stroke:l.TV.accentPositiveDimmest}),(0,r.tZ)("rect",{width:"28",height:"28",rx:"4",fill:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.6868 9.64645C11.8821 9.84171 11.8821 10.1583 11.6868 10.3536L8.04036 14L11.6868 17.6464C11.8821 17.8417 11.8821 18.1583 11.6868 18.3536C11.4915 18.5488 11.175 18.5488 10.9797 18.3536L6.9797 14.3536C6.78444 14.1583 6.78444 13.8417 6.9797 13.6464L10.9797 9.64645C11.175 9.45118 11.4915 9.45118 11.6868 9.64645ZM16.313 9.64645C16.5083 9.45118 16.8249 9.45118 17.0201 9.64645L21.0201 13.6464C21.2154 13.8417 21.2154 14.1583 21.0201 14.3536L17.0201 18.3536C16.8249 18.5488 16.5083 18.5488 16.313 18.3536C16.1178 18.1583 16.1178 17.8417 16.313 17.6464L19.9595 14L16.313 10.3536C16.1178 10.1583 16.1178 9.84171 16.313 9.64645Z",fill:l.TV.accentPositiveStrongest}),(0,r.tZ)("rect",{x:"84",y:"31",width:"28",height:"28",rx:"4",fill:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M95.6868 40.6464C95.8821 40.8417 95.8821 41.1583 95.6868 41.3536L92.0404 45L95.6868 48.6464C95.8821 48.8417 95.8821 49.1583 95.6868 49.3536C95.4915 49.5488 95.175 49.5488 94.9797 49.3536L90.9797 45.3536C90.7844 45.1583 90.7844 44.8417 90.9797 44.6464L94.9797 40.6464C95.175 40.4512 95.4915 40.4512 95.6868 40.6464ZM100.313 40.6464C100.508 40.4512 100.825 40.4512 101.02 40.6464L105.02 44.6464C105.215 44.8417 105.215 45.1583 105.02 45.3536L101.02 49.3536C100.825 49.5488 100.508 49.5488 100.313 49.3536C100.118 49.1583 100.118 48.8417 100.313 48.6464L103.959 45L100.313 41.3536C100.118 41.1583 100.118 40.8417 100.313 40.6464Z",fill:l.TV.accentPositiveStronger}),(0,r.tZ)("rect",{x:"168",y:"31",width:"28",height:"28",rx:"4",fill:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M179.687 40.6464C179.882 40.8417 179.882 41.1583 179.687 41.3536L176.04 45L179.687 48.6464C179.882 48.8417 179.882 49.1583 179.687 49.3536C179.492 49.5488 179.175 49.5488 178.98 49.3536L174.98 45.3536C174.784 45.1583 174.784 44.8417 174.98 44.6464L178.98 40.6464C179.175 40.4512 179.492 40.4512 179.687 40.6464ZM184.313 40.6464C184.508 40.4512 184.825 40.4512 185.02 40.6464L189.02 44.6464C189.215 44.8417 189.215 45.1583 189.02 45.3536L185.02 49.3536C184.825 49.5488 184.508 49.5488 184.313 49.3536C184.118 49.1583 184.118 48.8417 184.313 48.6464L187.959 45L184.313 41.3536C184.118 41.1583 184.118 40.8417 184.313 40.6464Z",fill:l.TV.accentPositiveStronger}),(0,r.tZ)("rect",{x:"252",y:"31",width:"28",height:"28",rx:"4",fill:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M263.687 40.6464C263.882 40.8417 263.882 41.1583 263.687 41.3536L260.04 45L263.687 48.6464C263.882 48.8417 263.882 49.1583 263.687 49.3536C263.492 49.5488 263.175 49.5488 262.98 49.3536L258.98 45.3536C258.784 45.1583 258.784 44.8417 258.98 44.6464L262.98 40.6464C263.175 40.4512 263.492 40.4512 263.687 40.6464ZM268.313 40.6464C268.508 40.4512 268.825 40.4512 269.02 40.6464L273.02 44.6464C273.215 44.8417 273.215 45.1583 273.02 45.3536L269.02 49.3536C268.825 49.5488 268.508 49.5488 268.313 49.3536C268.118 49.1583 268.118 48.8417 268.313 48.6464L271.959 45L268.313 41.3536C268.118 41.1583 268.118 40.8417 268.313 40.6464Z",fill:l.TV.accentPositiveStronger}),(0,r.tZ)("rect",{x:"336",y:"31",width:"28",height:"28",rx:"4",fill:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M347.687 40.6464C347.882 40.8417 347.882 41.1583 347.687 41.3536L344.04 45L347.687 48.6464C347.882 48.8417 347.882 49.1583 347.687 49.3536C347.492 49.5488 347.175 49.5488 346.98 49.3536L342.98 45.3536C342.784 45.1583 342.784 44.8417 342.98 44.6464L346.98 40.6464C347.175 40.4512 347.492 40.4512 347.687 40.6464ZM352.313 40.6464C352.508 40.4512 352.825 40.4512 353.02 40.6464L357.02 44.6464C357.215 44.8417 357.215 45.1583 357.02 45.3536L353.02 49.3536C352.825 49.5488 352.508 49.5488 352.313 49.3536C352.118 49.1583 352.118 48.8417 352.313 48.6464L355.959 45L352.313 41.3536C352.118 41.1583 352.118 40.8417 352.313 40.6464Z",fill:l.TV.accentPositiveStronger}),(0,r.tZ)("rect",{x:"420",y:"31",width:"28",height:"28",rx:"4",fill:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M431.687 40.6464C431.882 40.8417 431.882 41.1583 431.687 41.3536L428.04 45L431.687 48.6464C431.882 48.8417 431.882 49.1583 431.687 49.3536C431.492 49.5488 431.175 49.5488 430.98 49.3536L426.98 45.3536C426.784 45.1583 426.784 44.8417 426.98 44.6464L430.98 40.6464C431.175 40.4512 431.492 40.4512 431.687 40.6464ZM436.313 40.6464C436.508 40.4512 436.825 40.4512 437.02 40.6464L441.02 44.6464C441.215 44.8417 441.215 45.1583 441.02 45.3536L437.02 49.3536C436.825 49.5488 436.508 49.5488 436.313 49.3536C436.118 49.1583 436.118 48.8417 436.313 48.6464L439.959 45L436.313 41.3536C436.118 41.1583 436.118 40.8417 436.313 40.6464Z",fill:l.TV.accentPositiveStronger}),(0,r.tZ)("line",{x1:"28",y1:"14",x2:"444",y2:"14",stroke:l.TV.accentPositiveDimmest,strokeWidth:"2"})]})})}},32501:function(e,t,n){n.d(t,{J:function(){return m}});var r=n(41733),i=n(30509),o=n(93873),a=n(39271),l=n(21262),c=n(71440),s=n(58995);function u(){var e=(0,l._)(["\n  query CheckForProjectByRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        org {\n          id\n          type\n          name\n          authorizations {\n            createPublicRepl: createRepl(private: false) {\n              isAuthorized\n              message\n            }\n            createPrivateRepl: createRepl(private: true) {\n              isAuthorized\n              message\n            }\n            createProject {\n              isAuthorized\n              message\n            }\n          }\n        }\n        project {\n          id\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}var d={},f=(0,c.Ps)(u()),h=n(85438),p=n(36097);function m(){var e,t,n,l,c,u,m=(0,o.e)({controlName:p.r}),v=(e={variables:{id:(0,a.Z)()},skip:!m},t=(0,r._)({},d,e),s.a(f,t)),g=(null===(l=v.data)||void 0===l?void 0:null===(n=l.repl)||void 0===n?void 0:n.__typename)==="Repl"?v.data.repl.org:void 0,y=!!g&&g.type===h.a4.Team&&(g.authorizations.createPrivateRepl.isAuthorized||g.authorizations.createPublicRepl.isAuthorized)&&g.authorizations.createProject.isAuthorized;return(0,i._)((0,r._)({},v),{hasProject:(null===(c=v.data)||void 0===c?void 0:c.repl.__typename)==="Repl"&&!!(null===(u=v.data.repl.project)||void 0===u?void 0:u.id),isEligibleForProject:y})}},19480:function(e,t,n){n.d(t,{I9:function(){return h},ej:function(){return f},nt:function(){return u},pI:function(){return d}});var r=n(27387),i=n(66626),o=n(96583),a=n(72658),l=n(81199),c=n(50959),s=n(73372),u="".concat(s.Ql,"/bin/replit-ssh-wrapper"),d=function(e){return e.execImmediately("bash","-c","curl -sSL https://rid-tssh-util.replit.app/install.sh | bash")},f=function(e){return e.escapeHatchGitExecWrite("git config --local core.sshCommand ".concat(u))};function h(){var e=(0,l.Z)(),t=e.container,n=e.fs,s=e.git,h=(0,i._)((0,c.useState)({state:"loading"}),2),p=h[0],m=h[1];return(0,c.useEffect)(function(){function e(){return(e=(0,r._)(function(){var e;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return m({state:"loading"}),[4,s.getRepositoryState()];case 1:if((e=r.sent()).error&&m({state:"error",error:"Could not get repository status"}),e.error||e.state===a.yG.NOT_INITIALIZED)return m({state:"error",error:"Could not get repository status"}),[2];return[4,n.stat(u)];case 2:if(r.sent().exists)return[3,4];return[4,d(t)];case 3:if(r.sent().error)return m({state:"error",error:"Could not install project script"}),[2];r.label=4;case 4:return[4,f(s)];case 5:if(r.sent().error)return m({state:"error",error:"Could not configure SSH"}),[2];return m({state:"finished",hasInstalled:!0}),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[t,n,s]),p}},87410:function(e,t,n){n.d(t,{HX:function(){return C},ap:function(){return I},BZ:function(){return S},gF:function(){return E},vi:function(){return R}});var r=n(41733),i=n(21262),o=n(71440),a=n(18442);function l(){var e=(0,i._)(["\n  fragment ForkContextRepl on Repl {\n    id\n    title\n    description\n    org {\n      id\n    }\n  }\n"]);return l=function(){return e},e}var c=(0,o.Ps)(l()),s=n(9756),u=n(94563),d=n(71481),f=n(57100),h=n(54012),p=n(60100),m=n(58995),v=n(99165);function g(){var e=(0,i._)(["\n  fragment WorkspaceHeaderReplInfoRepl on Repl {\n    id\n    title\n    rawTemplateLabel: templateLabel(disableFallbackToTitle: true)\n    description\n    isPrivate\n    isRenamed\n    url\n    slug\n    workspaceCta\n    lastPublishedAt\n    publishedAs\n    owner {\n      ... on Team {\n        id\n      }\n      ... on User {\n        id\n      }\n    }\n    authorizations {\n      editMetadata {\n        isAuthorized\n      }\n      editResources {\n        isAuthorized\n      }\n      editTemplateMetadata {\n        isAuthorized\n      }\n      editVisibility {\n        isAuthorized\n        code\n        message\n      }\n      fork {\n        isAuthorized\n      }\n      deleteRepl {\n        isAuthorized\n      }\n      publish {\n        isAuthorized\n      }\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        currentBuild {\n          id\n        }\n      }\n    }\n    authorizations {\n      viewDeploymentConfig {\n        isAuthorized\n      }\n    }\n    user {\n      id\n      image\n      ...UserLinkUser\n    }\n    ...ForkContextRepl\n    ...WorkspaceHeaderReplMetadataRepl\n    ...ReplEnvironmentWebviewRepl\n    ...PublishReleaseFormRepl\n    ...BulkDeleteConfirmationModalRepl\n    ...CreateProjectBeforeForkReplContext\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return g=function(){return e},e}function y(){var e=(0,i._)(["\n  query WorkspaceHeaderReplInfo($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function b(){var e=(0,i._)(["\n  mutation WorkspaceHeaderReplInfoUnpublishTemplate(\n    $input: DeleteReplDeploymentInput!\n  ) {\n    deleteReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return b=function(){return e},e}function w(){var e=(0,i._)(["\n  mutation WorkspaceHeaderReplInfoUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function Z(){var e=(0,i._)(["\n  mutation WorkspaceHeaderReplInfoDeleteRepl($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return Z=function(){return e},e}var x={},C=(0,o.Ps)(g(),a._,c,s.s,u.sY,d.wd,f.d,h.An),_=(0,o.Ps)(y(),C);function S(e){var t=(0,r._)({},x,e);return m.a(_,t)}var k=(0,o.Ps)(b(),p.FW);function E(e){var t=(0,r._)({},x,e);return v.D(k,t)}var T=(0,o.Ps)(w(),C);function R(e){var t=(0,r._)({},x,e);return v.D(T,t)}var D=(0,o.Ps)(Z());function I(e){var t=(0,r._)({},x,e);return v.D(D,t)}},86723:function(e,t,n){n.d(t,{Z:function(){return rF}});var r,i,o,a,l,c,s,u,d=n(41733),f=n(30509),h=n(66626),p=n(4216),m=n(43182),v=n(50959),g=n(83003),y=n(64393),b=n(18394),w=n(57967),Z=n(85733),x=n(69170),C=n(39271),_=n(53399),S=n(61839),k=n(60305),E=n(95702),T=n(42516),R=n(82230),D=n(94778),I=n(60772),B=n(29318),G=n(72093),A=n(60100),P=n(27387),L=n(96583),N=n(59786),O=n(54401),U=n(12285),M=n(4955),X=n(14105),F=n(9670),W=n(29609);(r=l||(l={}))[r.Default=0]="Default",r[r.Saved=1]="Saved",r[r.Current=2]="Current";var H=n(92031),V=n(3341),z=n.n(V),j=n(85438),q=n(21262),J=n(71440),Y=n(71481),$=n(99165);function K(){var e=(0,q._)(["\n  mutation CreateTemplateReleaseCreateDeployment(\n    $input: CreateReplDeployemntInput!\n  ) {\n    createReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n        ...PublishReleaseFormRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return K=function(){return e},e}function Q(){var e=(0,q._)(["\n  mutation CreateTemplateReleaseCreateRelease($input: CreateReplReleaseInput!) {\n    createReplRelease(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n        ...PublishReleaseFormRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return Q=function(){return e},e}var ee={},et=(0,J.Ps)(K(),A.FW,Y.wd),en=(0,J.Ps)(Q(),A.FW,Y.wd),er="Something went wrong publishing your Template";function ei(e){if(e.error)return e.error.message||er;if(e.data){if("createReplDeployment"in e.data){if("NotFoundError"===e.data.createReplDeployment.__typename||"UnauthorizedError"===e.data.createReplDeployment.__typename||"UserError"===e.data.createReplDeployment.__typename)return e.data.createReplDeployment.message;if("Repl"!==e.data.createReplDeployment.__typename)return er}if("createReplRelease"in e.data){if("NotFoundError"===e.data.createReplRelease.__typename||"UnauthorizedError"===e.data.createReplRelease.__typename||"UserError"===e.data.createReplRelease.__typename)return e.data.createReplRelease.message;if("Repl"!==e.data.createReplRelease.__typename)return er}}}function eo(){var e,t,n,r,i=(0,h._)((e=(0,d._)({},ee,void 0),$.D(et,e)),2),o=i[0],a=i[1],l=(0,h._)((t=(0,d._)({},ee,void 0),$.D(en,t)),2),c=l[0],s=l[1];return{createRelease:(n=(0,P._)(function(e){var t,n;return(0,L.Jh)(this,function(r){switch(r.label){case 0:if(t=e.input,a.loading||s.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,c({refetchQueries:["ReplEnvironmentHeader"],variables:{input:t}})];case 2:return[2,{data:(n=r.sent()).data,error:ei(n)}];case 3:return r.sent(),[2,{data:null,error:er}];case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),createDeployment:(r=(0,P._)(function(e){var t,n;return(0,L.Jh)(this,function(r){switch(r.label){case 0:if(t=e.input,a.loading||s.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,o({variables:{input:t}})];case 2:return[2,{data:(n=r.sent()).data,error:ei(n)}];case 3:return r.sent(),[2,{data:null,error:er}];case 4:return[2]}})}),function(e){return r.apply(this,arguments)}),data:a.data||s.data,loading:a.loading||s.loading,error:ei(a||s)}}var ea=n(58995);function el(){var e=(0,q._)(["\n  query ReplPublishInputRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return el=function(){return e},e}var ec={},es=(0,J.Ps)(el(),A.FW);function eu(){var e=(0,q._)(["\n  mutation UseSetReplTagsSetTags($input: SetReplTagsInput!) {\n    setReplTags(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return eu=function(){return e},e}var ed={},ef=(0,J.Ps)(eu(),A.FW);function eh(e){var t,n,r,i,o,a,l;return e.error?e.error.message||"Something went wrong saving your Repl Tags":(null===(n=e.data)||void 0===n?void 0:null===(t=n.setReplTags)||void 0===t?void 0:t.__typename)==="NotFoundError"||(null===(i=e.data)||void 0===i?void 0:null===(r=i.setReplTags)||void 0===r?void 0:r.__typename)==="UnauthorizedError"||(null===(a=e.data)||void 0===a?void 0:null===(o=a.setReplTags)||void 0===o?void 0:o.__typename)==="UserError"?e.data.setReplTags.message:(null===(l=e.data)||void 0===l?void 0:l.setReplTags)&&"Repl"!==e.data.setReplTags.__typename?"Something went wrong posting your Repl":void 0}function ep(){var e=(0,q._)(["\n  mutation SetReplViewSettingsSetSettings($input: SetReplViewSettingsInput!) {\n    setReplViewSettings(input: $input) {\n      ... on ReplViewSettings {\n        id\n        repl {\n          id\n          ...PublishReplData\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return ep=function(){return e},e}var em={},ev=(0,J.Ps)(ep(),A.FW);function eg(e){var t,n,r,i,o,a,l;return e.error?e.error.message||"Something went wrong saving your Cover page":(null===(n=e.data)||void 0===n?void 0:null===(t=n.setReplViewSettings)||void 0===t?void 0:t.__typename)==="NotFoundError"||(null===(i=e.data)||void 0===i?void 0:null===(r=i.setReplViewSettings)||void 0===r?void 0:r.__typename)==="UnauthorizedError"||(null===(a=e.data)||void 0===a?void 0:null===(o=a.setReplViewSettings)||void 0===o?void 0:o.__typename)==="UserError"?e.data.setReplViewSettings.message:(null===(l=e.data)||void 0===l?void 0:l.setReplViewSettings)&&"ReplViewSettings"!==e.data.setReplViewSettings.__typename?"Something went wrong saving your Cover page":void 0}function ey(){var e=(0,q._)(["\n  mutation UpdateReplUpdate($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return ey=function(){return e},e}var eb={},ew=(0,J.Ps)(ey(),A.FW);function eZ(e){return e.message||"Something went wrong saving updates to your Repl"}function ex(e){return"repl_file"===e||"repl_image"===e}(i=c||(c={})).ReplFile="repl_file",i.ReplImage="repl_image";var eC=function(e){"use strict";(0,M._)(n,e);var t=(0,F._)(n);function n(){return(0,U._)(this,n),t.apply(this,arguments)}return n}((0,X._)(Error)),e_=function(e){"use strict";(0,M._)(n,e);var t=(0,F._)(n);function n(){return(0,U._)(this,n),t.apply(this,arguments)}return n}((0,X._)(Error)),eS=function(e){"use strict";(0,M._)(n,e);var t=(0,F._)(n);function n(){return(0,U._)(this,n),t.apply(this,arguments)}return n}((0,X._)(Error));function ek(e){return e?e.length>60?{message:"Title should not be more than ".concat(60," characters")}:void 0:{message:"Give your Repl a title"}}function eE(e){return e?e.length>1e3?{message:"Description should not be more than ".concat(1e3," characters")}:void 0:{message:"What does this Repl do?"}}var eT=(0,v.createContext)(null),eR=function(e){var t=(0,v.useContext)(eT);if(!t)throw Error("usePublishField must be used within a PublishInputContext");return t["".concat(e,"Field")]},eD=function(){var e=(0,v.useContext)(eT);if(!e)throw Error("usePublishForm must be used within a PublishInputContext");return e},eI=n(98924),eB=n(49224),eG=n(62435),eA=n(58045),eP=(0,eB.X)({container:[G.l0.p(4),G.l0.flex.row,G.l0.maxWidth(100),G.l0.backgroundColor.backgroundDefault,G.l0.borderRadius(4),{aspectRatio:"1 / 1"}],root:[G.l0.flex.grow(1),G.l0.flex.row],stacked:[G.l0.flex.grow(1),G.l0.colWithGap(2),G.l0.justify.spaceEvenly],sideBySide:[G.l0.flex.grow(1),G.l0.rowWithGap(2)],paneGroup:[G.l0.p(2),G.l0.flex.grow(1),G.l0.backgroundColor.backgroundHigher,G.l0.center]});function eL(e){var t=e.layoutState,n=(0,eI._)(e,["layoutState"]);return(0,p.tZ)(D.G,(0,f._)((0,d._)({css:eP.container},n),{children:(0,p.tZ)(eN,{root:t.layout,paneData:t.data})}))}function eN(e){var t,n=e.root,r=e.paneData;return null==n.tiling?null:(0,p.tZ)(D.G,{css:eP.root,children:(null===(t=n.tiling)||void 0===t?void 0:t.type)==="split"?(0,p.tZ)(eO,{split:n.tiling,paneData:r,depth:1}):(0,p.tZ)(eU,{group:n.tiling,paneData:r,depth:1})})}function eO(e){var t=e.split,n=e.paneData,r=e.depth;return r>2?(0,p.tZ)(eM,{}):(0,p.tZ)(D.G,{css:t.stacked?eP.stacked:eP.sideBySide,children:t.children.map(function(e){return"split"===e.type?(0,p.tZ)(eO,{split:e,paneData:n,depth:r+1}):(0,p.tZ)(eU,{group:e,paneData:n,depth:r+1})})})}function eU(e){var t=e.group,n=e.paneData,r=e.depth,i=n[t.panes[t.activeIndex]],o=(0,eA.Se)(),a=o.Icon({pane:i,size:r>1?12:16}),l=o.getTitle(i);return(0,p.tZ)(D.G,{css:eP.paneGroup,title:l,children:a})}function eM(){return(0,p.tZ)(D.G,{css:eP.paneGroup,children:(0,p.tZ)(eG.Z,{})})}var eX=n(63257),eF=n(64479),eW=n(91451),eH=n.n(eW),eV=(0,eB.X)({container:[G.l0.colWithGap(8)],layoutButton:[G.l0.borderRadius(4),G.l0.p(8),G.l0.border({width:1,color:G.TV.greyDimmer}),G.l0.backgroundColor.backgroundHigher,G.l0.cursor.pointer,{"&:hover":[G.l0.backgroundColor.backgroundHighest],'&[data-selected="true"]':[G.l0.backgroundColor.accentPrimaryDimmest,G.l0.border({color:G.TV.blueDimmer})],'&[data-selected="true"]:hover':[G.l0.backgroundColor.accentPrimaryDimmer],'&[data-disabled="true"]':[G.l0.backgroundColor.backgroundDefault,G.l0.border({color:G.TV.greyDimmest}),G.l0.color.foregroundDimmer,{"&:hover":{cursor:"not-allowed"}}]}],layoutButtonRow:[G.l0.rowWithGap(8),G.l0.justify.spaceBetween,G.l0.width("100%")],layoutButtonText:[G.l0.flex.growAndShrink(1),G.l0.flex.column,G.l0.justify.center],layoutButtonHeader:[G.l0.mb(4)],layoutPreview:[G.l0.width(80),G.l0.height(80),{alignSelf:"center"}]});function ez(e){var t,n=e.getCurrentLayoutState(),r=z()(eH()(n,"sidebarPercent"),eH()(e.savedLayoutState,"sidebarPercent")),i=(t=(0,eA.Se)(),(0,v.useCallback)(function(e){if((null==e?void 0:e.layout.tiling)==null)return"No tiled panes in layout";for(var n=[],r=[e.layout.tiling];r.length>0;){var i=r.pop();(null==i?void 0:i.type)==="paneGroup"?n.push.apply(n,(0,eX._)(i.panes)):(null==i?void 0:i.children)&&r.push.apply(r,(0,eX._)(i.children))}return n.reverse().map(function(n){return t.getTitle(e.data[n])}).join(", ")},[t])),o=(0,v.useMemo)(function(){return i(e.savedLayoutState)},[i,e.savedLayoutState]),a=(0,v.useMemo)(function(){return i(n)},[n,i]);return(0,p.BX)(D.G,{css:eV.container,children:[(0,p.tZ)(R.xv,{variant:"small",children:"Choose an initial workspace layout for new Repls using this template."}),(0,p.tZ)(eF.Tg,{css:eV.layoutButton,"data-selected":e.templateLayout.value===l.Default,onClick:function(){return e.templateLayout.setValue(l.Default)},children:(0,p.tZ)(D.G,{css:eV.layoutButtonRow,children:(0,p.BX)(D.G,{css:eV.layoutButtonText,children:[(0,p.tZ)(R.h4,{level:3,variant:"text",css:eV.layoutButtonHeader,children:"Default layout"}),(0,p.tZ)(R.xv,{multiline:!0,variant:"small",children:"User's default layout (either side-by-side or stacked)."})]})})}),e.savedLayoutState?(0,p.tZ)(eF.Tg,{css:eV.layoutButton,"data-selected":e.templateLayout.value===l.Saved,onClick:function(){return e.templateLayout.setValue(l.Saved)},children:(0,p.BX)(D.G,{css:eV.layoutButtonRow,children:[(0,p.BX)(D.G,{css:eV.layoutButtonText,children:[(0,p.tZ)(R.h4,{level:3,variant:"text",css:eV.layoutButtonHeader,children:"Saved layout"}),(0,p.tZ)(R.xv,{variant:"small",children:o})]}),(0,p.tZ)(eL,{css:eV.layoutPreview,layoutState:e.savedLayoutState})]})}):null,(0,p.tZ)(eF.Tg,{css:eV.layoutButton,"data-selected":e.templateLayout.value===l.Current,"data-disabled":r,onClick:r?void 0:function(){return e.templateLayout.setValue(l.Current)},children:(0,p.BX)(D.G,{css:eV.layoutButtonRow,children:[(0,p.BX)(D.G,{css:eV.layoutButtonText,children:[(0,p.tZ)(R.h4,{level:3,variant:"text",css:eV.layoutButtonHeader,children:"Current layout"}),(0,p.tZ)(R.xv,{variant:"small",children:r?"Same as saved layout":a})]}),(0,p.tZ)(eL,{css:eV.layoutPreview,layoutState:n})]})})]})}function ej(e){var t=e.getCurrentLayoutState,n=eR("layout");return(0,p.tZ)(D.G,{css:eV.container,children:null==t?(0,p.tZ)(R.xv,{children:"Initial layouts may only be customized in the desktop environment."}):(0,p.tZ)(ez,{templateLayout:n,getCurrentLayoutState:t})})}var eq=n(15235),eJ=n(99236),eY=n(64432),e$=n(2511),eK=n(1383),eQ=n(8147),e0=n(87128),e1=n(98674),e2=n(38414),e4=n(57253),e3=n(19068),e8=n(59947),e6=D.K.button,e5=function(){return(0,p.tZ)(D.G,{css:[G.l0.flex.row,G.l0.flex.grow(1),{borderTop:"1px solid ".concat(G.TV.outlineDimmest)}]})},e7=function(e){var t=e.isActive,n=e.isComplete,r=e.children,i=e.onClick,o=e.disabled;return(0,p.BX)(e6,{type:"button",css:[G.l0.reset.button,G.l0.position.relative,e3.gU.nofill,t&&G.l0.backgroundColor.backgroundHigher,G.l0.p(4),G.l0.borderRadius(4)],onClick:i,disabled:o,children:[(0,p.tZ)(R.xv,{variant:"small",multiline:!1,children:r}),n?(0,p.tZ)(e8.Z,{size:6,strokeWidth:6,color:G.TV.foregroundDimmer,css:[G.l0.position.absolute,{top:2,right:-2}]}):null]})},e9=n(80854),te=n(61967),tt=n(34186),tn=n(85638),tr=n(76677),ti=n(47336),to=n.n(ti),ta=n(12202),tl=function(e){var t=e.repl,n=(0,te.j3)(t),r=t.url?(0,te.QB)(t):"",i=(0,tt.Z)({text:"Check out what I just made on Replit: ".concat(t.title),url:r});return(0,p.BX)(eF.Tg,{background:"default",css:[G.l0.borderRadius(8),G.l0.overflow("hidden"),G.l0.colWithGap(16),G.l0.width(510),G.l0.p(16),G.l0.flex.growAndShrink(1),(0,T._)({},"@media (max-width: ".concat(I.j.tabletMin,"px)"),[{width:"100%"}])],dataCy:"published-repl-share-info-container",children:[(0,p.BX)(D.G,{css:[G.l0.colWithGap(16)],children:[(0,p.tZ)(R.xv,{variant:"subheadBig",multiline:!1,children:"Share your Repl"})," ",(0,p.BX)(D.G,{css:[G.l0.colWithGap(4)],children:[(0,p.tZ)(R.xv,{variant:"small",css:[G.l0.color.foregroundDimmer],multiline:!1,children:"Cover page link"}),(0,p.BX)(D.G,{css:[G.l0.rowWithGap(4),G.l0.align.center],children:[(0,p.tZ)(to(),(0,f._)((0,d._)({legacyBehavior:!0},n),{css:[G.l0.flex.growAndShrink(1)],children:(0,p.tZ)("a",{css:[{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}],children:r})})),(0,p.tZ)(ta.m,{tooltipDelay:"none",tooltipText:"Copy link",textToCopy:r})]})]})]}),(0,p.tZ)(D.G,{css:[G.l0.rowWithGap(12),G.l0.justify.end,(0,T._)({alignItems:"flex-end"},G.BC.max("mobileMax"),[G.l0.colWithGap(8),{width:"100%",">*":{width:"100%"}}])],children:(0,p.tZ)(tn.Z,{prefetch:!1,href:i,iconLeft:(0,p.tZ)(tr.Z,{}),text:"Share to Twitter",target:"_blank",css:[(0,T._)({},G.BC.max("mobileMax"),[G.l0.mr(0)])]})})]})};function tc(e){var t=e.error,n=e.dataCy;return t?(0,p.BX)(D.G,{css:[G.l0.rowWithGap(4),G.l0.align.center],children:[(0,p.tZ)(e0.Z,{css:[G.l0.color.accentNegativeStronger]}),(0,p.tZ)(R.xv,{css:[G.l0.flex.growAndShrink(1),G.l0.color.accentNegativeStronger],dataCy:n,children:t.message})]}):null}var ts=n(31673),tu=n(91945),td=n(17642),tf=n(14872),th=n(3212),tp=n(10495),tm=n(72333),tv=n(18060),tg=n(90493);function ty(){var e=(0,q._)(["\n  fragment PublishableReplSelectorRepl on Repl {\n    id\n    title\n    timeUpdated\n    url\n    slug\n    owner {\n      ... on User {\n        id\n        username\n        image\n      }\n      ... on Team {\n        id\n        username\n        image\n      }\n    }\n    iconUrl\n  }\n"]);return ty=function(){return e},e}function tb(){var e=(0,q._)(["\n  query PublishableReplSelector($search: String!) {\n    currentUser {\n      id\n      publishableReplSearch(search: $search) {\n        id\n        ...PublishableReplSelectorRepl\n      }\n    }\n  }\n  ","\n"]);return tb=function(){return e},e}var tw={},tZ=(0,J.Ps)(ty()),tx=(0,J.Ps)(tb(),tZ),tC=D.K.div,t_=D.K.li,tS={searchValue:"",loading:!1,repls:[]};function tk(e,t){switch(t.type){case"data":var n,r=(null===(n=t.data.currentUser)||void 0===n?void 0:n.publishableReplSearch)||[];return(0,f._)((0,d._)({},e),{loading:!1,repls:(0,th.Z)(r,{existing:e.repls,getKey:function(e){return e.id}})});case"loading":return(0,f._)((0,d._)({},e),{loading:!0});case"searchValue":return(0,f._)((0,d._)({},e),{searchValue:t.searchValue})}}function tE(e){var t;return e?"".concat(null===(t=e.owner)||void 0===t?void 0:t.username,"/").concat(e.title):""}function tT(e){var t,n=(0,v.useRef)(null);(0,ts.r)(function(){var t;e.selectedRepl&&(null===(t=n.current)||void 0===t||t.blur())},[e.selectedRepl]);var r=(null===(t=e.selectedRepl)||void 0===t?void 0:t.iconUrl)&&e.inputValue&&tE(e.selectedRepl)===e.inputValue?(0,p.tZ)(D.G,{css:[G.l0.px(8),G.l0.center,{position:"absolute",top:0,left:0,height:"100%"}],children:(0,p.tZ)(tm.ZP,{alt:e.selectedRepl.title,iconUrl:e.selectedRepl.iconUrl,size:16})}):null;return(0,p.BX)(D.G,{css:[{position:"relative"}],children:[(0,p.BX)(tC,(0,f._)((0,d._)({},e.getComboboxProps()),{css:{position:"relative"},children:[r,(0,p.tZ)(tv.II,(0,d._)({css:[G.l0.pr(32),r&&G.l0.pl(32)]},e.getInputProps({placeholder:"Search for a Repl",onFocus:e.onFocus,ref:n}))),(0,p.tZ)(D.G,{css:[G.l0.center,G.l0.px(8),{position:"absolute",top:0,right:0,height:"100%"}],children:e.loading&&e.isOpen?(0,p.tZ)(B.Z,{}):(0,p.tZ)(tg.Z,{})})]})),(0,p.tZ)(tC,(0,f._)((0,d._)({},e.getMenuProps()),{css:{position:"relative"},children:e.isOpen?(0,p.BX)(tu.Z,{children:[e.loading&&0===e.repls.length?(0,p.tZ)(t_,{css:[G.l0.center,G.l0.py(32)],children:(0,p.tZ)(B.Z,{})}):null,e.loading||0!==e.repls.length?null:(0,p.tZ)(t_,{css:[G.l0.center,G.l0.py(32)],children:(0,p.tZ)(R.xv,{color:"dimmer",variant:"small",multiline:!1,children:"No Repls found"})}),e.repls.map(function(t,n){return(0,p.tZ)(t_,(0,f._)((0,d._)({},e.getItemProps({item:t,index:n})),{children:(0,p.tZ)(td.Z,{taller:!0,filter:"",title:tE(t),subtitle:(0,tp.F)(t.timeUpdated),selected:e.selectedRepl===t,highlighted:e.highlightedIndex===n,icon:t.iconUrl?(0,p.tZ)(tm.ZP,{iconUrl:t.iconUrl,alt:t.title,size:16}):void 0})}),t.id)})]}):null}))]})}var tR=n(72370),tD=n(21371),tI=D.K.label,tB=(0,v.forwardRef)(function(e,t){return(0,p.tZ)(tI,(0,f._)((0,d._)({},e),{ref:t,css:G.l0.color.foregroundDimmer}))}),tG=function(){var e,t,n,r,i,o,a,l=(0,tR.U)()("repl"),c=eR("replId"),s=eR("iconUrl"),u=(t=(e=(0,h._)((0,v.useReducer)(tk,tS),2))[0],n=e[1],o=(r={variables:{search:(0,tf.Z)(t.searchValue,200)},notifyOnNetworkStatusChange:!0,onCompleted:function(e){n({type:"data",data:e})}},i=(0,d._)({},tw,r),ea.a(tx,i)).loading,(0,v.useEffect)(function(){o&&n({type:"loading"})},[o]),a=(0,v.useCallback)(function(e){return n({type:"searchValue",searchValue:e||""})},[]),{repls:t.repls,loading:t.loading,searchValue:t.searchValue,setSearchValue:a}),m=(0,tD.Kb)({id:l,items:u.repls,initialHighlightedIndex:-1,onInputValueChange:function(e){var t=e.inputValue;u.setSearchValue(t)},onSelectedItemChange:function(e){(null==e?void 0:e.selectedItem)&&(c.setValue(e.selectedItem.id),m.closeMenu())},itemToString:tE});return(0,p.BX)(D.G,{css:[G.l0.colWithGap(4)],children:[(0,p.tZ)(tB,{css:G.l0.color.foregroundDimmer,htmlFor:l,children:"Repl"}),(0,p.tZ)(tT,{getComboboxProps:m.getComboboxProps,getInputProps:m.getInputProps,getItemProps:m.getItemProps,getMenuProps:m.getMenuProps,isOpen:m.isOpen,highlightedIndex:m.highlightedIndex,inputValue:m.inputValue,selectedRepl:m.selectedItem?(0,f._)((0,d._)({},m.selectedItem),{iconUrl:s.value||m.selectedItem.iconUrl}):void 0,repls:u.repls,loading:u.loading,onFocus:function(e){m.selectedItem&&(e.preventDefault(),e.currentTarget.select(),u.setSearchValue("")),m.openMenu()}})]})},tA=function(){var e=(0,tR.U)(),t=e("replName"),n=e("replDescription"),r=eD(),i=r.replIdField,o=r.replTitleField,a=r.replDescriptionField,l=r.isSaving;return(0,p.BX)(D.G,{css:[G.l0.colWithGap(16),G.l0.flex.growAndShrink(1)],children:[!i.value||i.touched?(0,p.tZ)(tG,{}):null,(0,p.BX)(D.G,{css:[G.l0.colWithGap(4)],children:[(0,p.tZ)(D.G,{css:[G.l0.flex.row,G.l0.align.baseline,G.l0.justify.spaceBetween],children:(0,p.tZ)(tB,{css:[G.l0.color.foregroundDimmer,{lineHeight:G.TV.lineHeightSmall}],htmlFor:t,children:"Repl name"})}),o.value]}),(0,p.BX)(D.G,{css:[G.l0.colWithGap(4)],children:[(0,p.BX)(D.G,{css:[G.l0.flex.row,G.l0.align.baseline,G.l0.justify.spaceBetween],children:[(0,p.tZ)(tB,{css:[G.l0.color.foregroundDimmer,{lineHeight:G.TV.lineHeightSmall}],htmlFor:n,children:"Repl description"}),(0,p.BX)(R.xv,{multiline:!1,css:{color:a.value.length>1e3?G.TV.accentNegativeStronger:G.TV.foregroundDimmest},children:[a.value.length,"/",1e3]})]}),(0,p.tZ)(tv.B,{id:n,value:a.value,disabled:!i.value||l,onChange:function(e){a.setValue(e.currentTarget.value)},placeholder:"What does this Repl do?",css:[G.l0.minHeight(128),G.l0.maxHeight(256),{resize:"vertical"}],dataCy:"publish-form-repl-description-input"}),a.touched?(0,p.tZ)(tc,{error:a.error,dataCy:"publish-form-repl-description-error"}):null]})]})},tP=function(e){var t=e.showPlayButton,n=e.children,r=e.active;return(0,p.BX)("div",{css:{position:"relative",aspectRatio:"".concat(268,"/").concat(164),overflow:"hidden"},children:[(0,p.tZ)("div",{css:{position:"absolute",top:"calc(".concat(18," / ").concat(164," * 100%)"),bottom:"calc(".concat(1," / ").concat(164," * 100%)"),left:"calc(".concat(1," / ").concat(268," * 100%)"),right:"calc(".concat(1," / ").concat(268," * 100%)"),borderBottomLeftRadius:4,borderBottomRightRadius:4,overflow:"hidden",backgroundColor:r?G.TV.accentPrimaryDimmest:void 0},children:n}),(0,p.BX)("svg",{viewBox:"0 0 268 164",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:{position:"relative"},children:[(0,p.tZ)("rect",{width:"268",height:"17",fill:G.TV.backgroundDefault}),(0,p.tZ)("rect",{x:"241.5",y:"4.5",width:"22",height:"10",rx:"2",fill:G.TV.accentPositiveDimmer}),(0,p.tZ)("rect",{x:"228.5",y:"4.5",width:"10",height:"10",rx:"2",fill:G.TV.backgroundHighest}),(0,p.tZ)("rect",{x:"4.5",y:"4.5",width:"32",height:"10",rx:"2",fill:G.TV.backgroundHighest}),(0,p.tZ)("rect",{x:"1",y:"18",width:"266",height:"1",fill:r?G.TV.accentPrimaryDefault:G.TV.outlineDimmer}),t?(0,p.tZ)("path",{d:"M142.225 90.5642C142.565 90.7554 142.565 91.2446 142.225 91.4358L127.745 99.5809C127.412 99.7683 127 99.5275 127 99.1451L127 82.8549C127 82.4725 127.412 82.2317 127.745 82.4191L142.225 90.5642Z",fill:G.TV.white}):null,(0,p.tZ)("rect",{x:"1",y:"1",width:"266",height:"162",rx:"4",stroke:r?G.TV.accentPrimaryDefault:G.TV.outlineDimmer,strokeWidth:"1"})]})]})},tL=n(77450),tN=n(39667),tO=n(36559),tU=D.K.ol,tM=D.K.li,tX=(0,tL.iv)([G.l0.py(4),G.l0.borderRadius(8),{border:"1px solid ".concat(G.TV.outlineDimmest),borderRadius:G.TV.borderRadius8,backgroundColor:e3.vb.interactiveBackground,zIndex:G.n0,maxHeight:300,position:"absolute",overflowY:"auto",width:"100%",left:0,top:G.TV.space8,listStyle:"none"}]),tF={backgroundColor:e3.vb.interactiveBackgroundActive},tW={backgroundColor:G.TV.accentPrimaryDimmer},tH=(0,tL.iv)([G.l0.p(8),{":not([disabled])":{cursor:"pointer",":hover":(0,d._)({},tF),":active":(0,d._)({},tW)}}]);function tV(e){var t,n,r,i,o,a,l,c,s,u,m,g,y,b,w,x,C=e.fs,_=e.initiallySelectedFile,S=e.onFileSelect,k=e.onClear,E=(0,v.useRef)(null),T=(n=(t=(0,h._)((0,v.useState)({isLoading:!0,error:null,files:[]}),2))[0],r=t[1],(0,v.useEffect)(function(){function e(){return(e=(0,P._)(function(){var e,t;return(0,L.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,C.listFiles()];case 1:if((e=n.sent()).error)throw Error(e.error);return r({isLoading:!1,error:null,files:(null!==(t=e.files)&&void 0!==t?t:[]).slice().sort(function(e,t){return e.localeCompare(t)}).map(function(e){return{file:e,pathDepth:(0,tO.U$)(e)}}).sort(function(e,t){return e.pathDepth-t.pathDepth}).map(function(e){return e.file})}),[3,3];case 2:return n.sent(),r({isLoading:!1,error:"Could not load files",files:[]}),[3,3];case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[C]),(0,d._)({},n)),I=T.isLoading,B=T.files,A=T.error,N=(o=(i={files:B,inputRef:E,initiallySelectedFile:_}).files,a=i.inputRef,l=i.initiallySelectedFile,s=(c=(0,h._)((0,v.useState)(!1),2))[0],u=c[1],g=(m=(0,h._)((0,v.useState)(o),2))[0],y=m[1],b=(0,v.useCallback)(function(e){return o.filter(function(t){return t.toLowerCase().includes(e.toLowerCase())})},[o]),w=(0,tD.Kb)({items:g,isOpen:s,initialInputValue:l,initialSelectedItem:g.find(function(e){return e===l}),onIsOpenChange:function(e){u(!!e.isOpen)},onInputValueChange:function(e){var t;y(b(null!==(t=e.inputValue)&&void 0!==t?t:""))}}),x=(0,v.useCallback)(function(){var e;u(!1),null===(e=a.current)||void 0===e||e.blur()},[a]),(0,v.useEffect)(function(){var e;y(b(null!==(e=w.inputValue)&&void 0!==e?e:""))},[o,b,w.inputValue]),(0,v.useEffect)(function(){w.selectedItem&&x()},[w.selectedItem,x]),(0,f._)((0,d._)({},w),{closeMenu:x,items:g})),O=(0,Z.Z)(S);return(0,v.useEffect)(function(){N.selectedItem&&O.current(N.selectedItem)},[N.selectedItem,O]),(0,p.BX)(D.G,{children:[(0,p.tZ)(D.G,(0,f._)((0,d._)({},N.getComboboxProps({refKey:"innerRef"})),{css:[G.l0.position.relative],children:(0,p.tZ)(tN.E,(0,f._)((0,d._)({},N.getInputProps({onFocus:N.openMenu,ref:E,refKey:"inputRef",disabled:I,placeholder:"Search your files"})),{onClear:function(){var e;N.reset(),null===(e=E.current)||void 0===e||e.focus(),k()},loading:I}))})),(0,p.BX)(D.G,(0,f._)((0,d._)({},N.getMenuProps({refKey:"innerRef"})),{css:[G.l0.position.relative],children:[A?(0,p.tZ)(D.G,{css:[G.l0.p(8)],children:(0,p.tZ)(R.xv,{multiline:!1,children:"Something went wrong loading your files. Please try again."})}):null,!A&&N.isOpen?(0,p.tZ)(tU,{css:[tX],children:N.items.length>0?N.items.map(function(e,t){return(0,p.tZ)(tM,(0,f._)((0,d._)({css:[tH,N.highlightedIndex===t&&tF,e===N.selectedItem&&tW]},N.getItemProps({item:e,index:t,onClick:function(){N.closeMenu()}})),{children:(0,p.tZ)(R.xv,{multiline:!1,children:e})}),e)}):(0,p.tZ)(tM,{css:[G.l0.p(8)],children:(0,p.BX)(R.xv,{multiline:!1,children:['No files found for "',N.inputValue,'"']})})}):null]}))]})}var tz=n(73064),tj=function(e){var t=(0,v.useRef)(null);return{inputProps:{onChange:function(t){var n=t.target,r=n.validity,i=n.files;if(r.valid){var o=i?i[0]:null;o&&e(o)}},"aria-hidden":"true",ref:t,accept:tz.W9.join(","),type:"file"},buttonProps:{onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.click()}},inputRef:t}},tq=function(e){var t=tj(e.onFile),n=t.inputProps,r=t.buttonProps;return(0,p.BX)(p.HY,{children:[(0,p.tZ)("input",(0,f._)((0,d._)({},n),{css:{display:"none"}})),e.children(r)]})},tJ=n(12933),tY=n(71730),t$=n(85763),tK=n(45271),tQ=n(36084);n(80888);var t0=n(55821),t1=n(76171),t2=n(98308);n(30177);var t4=(0,tL.iv)({position:"absolute",top:0,left:0,width:"100%",height:"100%"});function t3(e){var t=e.src,n=e.alt;return(0,p.BX)(D.G,{css:[t4,{borderBottomLeftRadius:8,borderBottomRightRadius:8,overflow:"hidden"}],children:[(0,p.tZ)(tJ.Z,{objectFit:"cover",layout:"fill",src:t,alt:n}),(0,p.tZ)(D.G,{css:[t4,{background:"radial-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.6))",backgroundRepeat:"no-repeat"}]})]})}var t8=n(54579),t6=[{value:c.ReplImage,text:"Photo"},{value:c.ReplFile,text:"File"}],t5=function(e){var t,n,r,i,o,a,l=e.fs,s=(0,tR.U)(),u=s("coverPage"),m=eD(),g=m.selectedRepl,y=m.coverFileField,b=m.coverUrlField,w=m.coverDefaultViewField,Z=(0,h._)((t=(0,P._)(function(e){var t;return(0,L.Jh)(this,function(n){switch(n.label){case 0:if(!(null==e?void 0:e.length)||!(t=e[0]).type.startsWith("image/"))return[2];return[4,_.uploadImage(t,t2.N.ReplCoverImage)];case 1:return n.sent(),[2]}})}),n=function(e){return t.apply(this,arguments)},i=(r=(0,h._)((0,v.useState)(!1),2))[0],o=r[1],a=(0,v.useRef)(0),[i,(0,v.useMemo)(function(){return{onDragEnter:function(e){e.preventDefault(),a.current++,o(!0)},onDragLeave:function(e){e.preventDefault(),a.current--,0===a.current&&o(!1)},onDrop:function(e){e.preventDefault(),a.current=0,o(!1),e.persist();var t,r,i=Array.from(null!==(r=null==e?void 0:null===(t=e.dataTransfer)||void 0===t?void 0:t.files)&&void 0!==r?r:[]);if(0===i.length){n(null);return}n(i)},onDragOver:function(e){e.preventDefault()}}},[n])]),2),x=Z[0],C=Z[1],_=(0,H.W)(b.setValue);return(0,p.BX)(D.G,(0,f._)((0,d._)({css:[G.l0.colWithGap(16)]},C),{children:[(0,p.BX)(D.G,{css:G.l0.colWithGap(12),children:[(0,p.tZ)(D.G,{css:[G.l0.rowWithGap(8)],children:(0,p.tZ)(t8.E,{tag:"fieldset",css:[G.l0.rowWithGap(24)],name:u,value:w.value,onChange:function(e){ex(e.target.value)&&w.setValue(e.target.value)},children:t6.map(function(e){return(0,p.BX)(D.G,{css:[G.l0.rowWithGap(8)],children:[(0,p.tZ)(t8.Y,{id:s(e.value),value:e.value}),(0,p.tZ)("label",{htmlFor:s(e.value),children:e.text})]},e.value)})})}),w.value===c.ReplImage&&(0,p.BX)(D.G,{css:[G.l0.colWithGap(4),G.l0.align.center],children:[(0,p.tZ)(tq,{onFile:function(e){return _.uploadImage(e,t2.N.ReplCoverImage)},children:function(e){var t=e.onClick;return(0,p.tZ)(eq.zx,{onClick:t,colorway:x?"primary":void 0,text:"Upload a cover photo",iconLeft:_.isLoading?(0,p.tZ)(B.Z,{}):(0,p.tZ)(tQ.Z,{}),stretch:!0})}}),_.error?(0,p.tZ)(eJ.E,{colorway:"negative",icon:(0,p.tZ)(e0.Z,{}),text:_.error}):null,(0,p.tZ)(R.xv,{variant:"small",color:"dimmer",children:"or drag and drop a photo here"})]}),w.value===c.ReplFile&&(0,p.BX)(D.G,{css:[G.l0.colWithGap(8)],children:[(0,p.tZ)(tV,{fs:l,initiallySelectedFile:y.value,onFileSelect:y.setValue,onClear:function(){return y.setValue("")}},null==g?void 0:g.id),(0,p.tZ)(tc,{error:y.error})]})]}),w.value===c.ReplImage&&(0,p.BX)(tP,{active:x,showPlayButton:w.value===c.ReplImage&&!!b.value&&!_.isLoading,children:[w.value===c.ReplImage&&b.value?(0,p.tZ)(t3,{src:b.value,alt:"cover"}):null,_.isLoading?(0,p.tZ)(D.G,{css:[{position:"absolute",inset:0},G.l0.align.center,G.l0.justify.center],children:(0,p.tZ)(B.Z,{color:G.TV.white,size:24})}):null]})]}))},t7=n(64318),t9=function(){eR("iconUrl");var e=eD(),t=e.replIconInput,n=e.replIconUrl;return(0,p.BX)(D.G,{css:[G.l0.colWithGap(16),G.l0.align.center],children:[(0,p.BX)(D.G,{css:[G.l0.colWithGap(8)],children:[(0,p.BX)(D.G,{css:[G.l0.rowWithGap(8)],children:[(0,p.tZ)(tq,{onFile:function(e){return t.uploadImage(e,t2.N.ReplIcon)},css:G.l0.backgroundColor.accentNegativeDefault,children:function(e){var t=e.onClick;return(0,p.tZ)(eq.zx,{onClick:t,text:"Upload image",iconLeft:(0,p.tZ)(tQ.Z,{}),css:[G.l0.backgroundColor.backgroundHigher],type:"button",stretch:!0})}}),null]}),t.error?(0,p.tZ)(D.G,{children:(0,p.tZ)(eJ.E,{icon:(0,p.tZ)(e0.Z,{}),colorway:"negative",text:t.error,closable:!0,closeAction:t.clearError})}):null]}),(0,p.tZ)(tm.LN,{alt:"icon",size:84,iconUrl:n,isLoading:!!t.previewUrl,css:[G.l0.backgroundColor.backgroundHigher]})]})},ne=function(){return(0,p.tZ)(D.G,{css:[G.l0.colWithGap(8)],children:(0,p.tZ)(D.G,{children:(0,p.BX)(R.xv,{children:["See the"," ",(0,p.tZ)("a",{href:"https://docs.replit.com/replit-workspace/templates",target:"_blank",children:"template docs"})," ","for a guide on what makes a good template. Please make sure your Repl abides by the"," ",(0,p.tZ)("a",{href:"https://blog.replit.com/community-standards",target:"_blank",children:"Replit community rules and guidelines"})," ","before publishing."]})})})},nt=n(42074),nn=n(21063),nr=D.K.ul,ni=D.K.li;function no(e){var t=e.children;return(0,p.tZ)(D.G,{css:[G.l0.px(8),G.l0.pt(8)],children:(0,p.tZ)(R.xv,{multiline:!1,css:[{textTransform:"uppercase"}],variant:"small",color:"dimmer",children:t})})}function na(e){var t=e.highlighted,n=e.tag;return(0,p.tZ)(D.G,{css:[G.l0.rowWithGap(8),G.l0.p(8),t&&{backgroundColor:e3.gU.listItem["@media (hover: hover)"][":not([disabled], [aria-disabled])"][":not(textarea):active"].backgroundColor},{cursor:"pointer"}],children:(0,p.BX)(D.G,{css:[G.l0.flex.growAndShrink(1),G.l0.rowWithGap(4),G.l0.align.center],children:[(0,p.tZ)(R.xv,{multiline:!1,children:n.id}),n.isOfficial?(0,p.tZ)(nn.Z,{}):null]})})}var nl=v.memo(function(e){var t=e.getItemProps,n=e.highlightedIndex,r=e.data;return(0,p.tZ)(tu.Z,{css:[G.l0.minWidth(200)],children:r.sections.reduce(function(e,r){return e.sections.push((0,p.BX)(ni,{children:[(0,p.tZ)(no,{children:r.title}),(0,p.tZ)(nr,{css:[G.l0.pt(4),G.l0.pb(8)],children:r.tags.map(function(r){var i=e.itemIndex++;return(0,p.tZ)(ni,(0,f._)((0,d._)({},t({item:r,index:i})),{children:(0,p.tZ)(na,{tag:r,highlighted:n===i})}),r.id)})})]},r.title)),e},{sections:[],itemIndex:0}).sections})});nl.displayName="TagsMenu";var nc=n(16691);function ns(){var e=(0,q._)(["\n  fragment TagsComboboxTag on Tag {\n    id\n    isOfficial\n  }\n"]);return ns=function(){return e},e}function nu(){var e=(0,q._)(["\n  query TagsCombobox($limit: Int, $search: String) {\n    tagGroups {\n      official(limit: $limit, search: $search) {\n        id\n        ...TagsComboboxTag\n      }\n      community(limit: $limit, search: $search) {\n        id\n        ...TagsComboboxTag\n      }\n    }\n  }\n  ","\n"]);return nu=function(){return e},e}var nd={},nf=(0,J.Ps)(ns()),nh=(0,J.Ps)(nu(),nf),np=/^[0-9a-zA-Z]+$/,nm=function(e){return e.id},nv=n(29252),ng=D.K.div,ny=D.K.input,nb=(0,tL.iv)([G.l0.fontSize(12),G.l0.pl(24),G.l0.pr(8),G.l0.py(4)]);function nw(){return(0,p.tZ)(R.xv,{multiline:!1,css:[G.l0.px(4),G.l0.flex.row,G.l0.align.center,G.l0.position.absolute,G.l0.height("100%"),G.l0.color.foregroundDefault,{top:0,left:4,pointerEvents:"none"}],children:(0,p.tZ)(nv.Z,{size:12})})}function nZ(e){var t=e.text,n=e.children;return(0,p.BX)(eF.Tg,{elevated:!0,css:[G.l0.position.relative,G.l0.minWidth(30),G.l0.borderRadius(16),{border:"1px solid transparent","&:focus-within":{borderColor:G.TV.outlineDimmer,backgroundColor:"transparent"}}],children:[(0,p.tZ)(nw,{}),(0,p.tZ)(R.xv,{css:[{visibility:"hidden"},nb],multiline:!1,children:t}),n]})}function nx(e){var t,n,r,i,o,a,l,c,s,u,m,g,y,b,w,x,C,_,S,k,E=(t=e.onRemove,n=e.onSelect,r=e.filter,i=e.inputValue,o=e.setInputValue,a=(0,tf.Z)(i,100),l=(0,Z.Z)(n),_=(s=(c={search:a,filter:void 0===r?function(){return!0}:r}).search,u=c.filter,g=(m=(0,d._)({},nd,{variables:{limit:s?10:3,search:s}}),ea.a(nh,m)).data,b=(y=(0,h._)((0,v.useState)({official:[],community:[],newTag:[]}),2))[0],w=y[1],x=(0,v.useMemo)(function(){if(g){var e=[],t=[],n=new Set,r=!0,i=!1,o=void 0;try{for(var a,l=g.tagGroups.official[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;n.add(c.id.toLowerCase()),u(c)&&e.push(c)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var d=!0,f=!1,h=void 0;try{for(var p,m=g.tagGroups.community[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v=p.value;n.add(v.id.toLowerCase()),u(v)&&t.push(v)}}catch(e){f=!0,h=e}finally{try{d||null==m.return||m.return()}finally{if(f)throw h}}var y=t.find(function(e){return e.id===s}),b=!s||y||n.has(s.toLowerCase())?void 0:{id:s,isOfficial:!1};return{official:e,community:t,newTag:b&&u(b)?[b]:[]}}},[g,u,s]),(0,v.useEffect)(function(){if(x){var e=x.official,t=x.community,n=x.newTag;w(function(r){return{official:(0,th.Z)(e,{existing:r.official,getKey:nm}),community:(0,th.Z)(t,{existing:r.community,getKey:nm}),newTag:n}})}},[x]),C={tagGroups:b,reset:function(){w({official:[],community:[],newTag:[]})}}).tagGroups,S=C.reset,k=(0,tD.Kb)({inputValue:i,items:(0,eX._)(_.official).concat((0,eX._)(_.community),(0,eX._)(_.newTag)),defaultHighlightedIndex:0,itemToString:function(e){return e?e.id:""},onSelectedItemChange:function(e){e.selectedItem&&(S(),o(""),k.reset(),k.openMenu())}}),(0,nc.Z)(function(){k.selectedItem&&l.current(k.selectedItem)},[k.selectedItem]),{tagGroups:_,combobox:k,onChange:function(e){var t=e.currentTarget.value;(!t||np.test(t))&&!(t.length>30)&&o(t)},onKeyDown:function(e){""===i&&"Backspace"===e.key&&(e.preventDefault(),t())}}),T=E.combobox,R=E.tagGroups,I=E.onChange,B=E.onKeyDown,A=(0,v.useMemo)(function(){var e;return e=[],(R.official.length&&e.push({title:"Official Tags",tags:R.official}),R.community.length&&e.push({title:"Community Tags",tags:R.community}),R.newTag.length&&e.push({title:"Create new tag",tags:R.newTag}),0===e.length)?null:{type:"sections",sections:e}},[R]),P="Add tag";return(0,p.BX)(D.G,{children:[(0,p.tZ)(ng,(0,f._)((0,d._)({},T.getComboboxProps()),{css:[G.l0.flex.row],children:(0,p.tZ)(nZ,{text:T.inputValue||P,children:(0,p.tZ)(ny,(0,d._)({css:[G.l0.coverContainer,nb,G.l0.color.foregroundDefault,{backgroundColor:"transparent","&::placeholder":G.l0.color.foregroundDefault,"&:focus::placeholder":G.l0.color.foregroundDimmest}]},T.getInputProps({placeholder:P,onChange:I,onKeyDown:B,onFocus:function(){T.openMenu()}})))})})),(0,p.tZ)(ng,(0,f._)((0,d._)({},T.getMenuProps()),{css:[G.l0.position.relative],children:A&&T.isOpen?(0,p.tZ)(nl,{getItemProps:T.getItemProps,highlightedIndex:T.highlightedIndex,data:A}):null}))]})}function nC(e){var t=e.tags,n=e.max,r=e.onAdd,i=e.onRemove,o=t.map(function(e){return e.id}),a=(0,h._)((0,v.useState)(""),2),l=a[0],c=a[1];return(0,p.BX)(D.G,{css:[G.l0.flex.row,G.l0.flex.wrap,{margin:"calc(-1 * ".concat(G.TV.space4,")")}],children:[t.map(function(e,t){return(0,p.tZ)(D.G,{css:[G.l0.m(4)],children:(0,p.tZ)(nt.g,{small:!0,tag:e,onClick:function(){return i(t)}})},e.id)}),t.length<(void 0===n?5:n)?(0,p.tZ)(D.G,{css:[G.l0.m(4)],children:(0,p.tZ)(nx,{onSelect:r,filter:function(e){return!o.includes(e.id.toLowerCase())},inputValue:l,setInputValue:c,onRemove:function(){var e=t.length-1;e>=0&&(c(t[e].id),i(e))}})}):null]})}var n_=function(){var e=eR("tags");return(0,p.BX)(D.G,{css:[G.l0.colWithGap(8)],children:[(0,p.tZ)(D.G,{css:[G.l0.colWithGap(4)],children:(0,p.tZ)(nC,{max:5,tags:e.value,onAdd:function(t){return e.setValue((0,eX._)(e.value).concat([t]))},onRemove:function(t){return e.setValue((0,eX._)(e.value.slice(0,t)).concat((0,eX._)(e.value.slice(t+1))))}})}),(0,p.BX)(D.G,{css:G.l0.rowWithGap(4),children:[(0,p.tZ)(R.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Adding tags helps others find your Repl."}),(0,p.BX)(R.xv,{color:"dimmest",variant:"small",multiline:!1,children:[e.value.length,"/",5]})]})]})},nS=n(2993),nk=n(45098),nE=n(19393),nT=n(39126),nR=n(46180),nD=n(1813),nI=n(36632),nB=(0,eB.X)({rootContainer:[(0,T._)({},(0,e1.et)("tabletMin"),{display:"flex"}),G.l0.flex.growAndShrink(1),G.l0.p(16),G.l0.colWithGap(12),G.l0.align.center,G.l0.display.none],heading:[G.l0.width("100%"),{fontWeight:G.TV.fontWeightMedium}],contentContainer:[G.l0.width("100%"),G.l0.maxWidth(432),G.l0.position.relative],topShadow:{position:"absolute",zIndex:2,inset:0,boxShadow:"inset 0 48px 24px -24px "+G.TV.backgroundRoot+", inset 0 -48px 24px -24px "+G.TV.backgroundRoot},feed:[G.l0.height(416),G.l0.colWithGap(24),G.l0.justify.center,G.l0.overflow("hidden"),G.l0.backgroundColor.backgroundRoot],loadingContainer:[G.l0.flex.grow(1),G.l0.align.center,G.l0.justify.center]}),nG=D.K.form,nA=function(e){var t=e.user,n=eD(),r=n.selectedRepl,i=n.replTitleField,o=n.replDescriptionField,a=n.replIconUrl,l=n.tagsField;return(0,p.BX)(eF.Tg,{background:"root",css:nB.rootContainer,children:[(0,p.tZ)(R.xv,{multiline:!1,variant:"small",color:"dimmer",css:nB.heading,children:"Preview"}),(0,p.BX)(D.G,{css:nB.contentContainer,children:[(0,p.tZ)(D.G,{css:nB.topShadow}),(0,p.BX)(D.G,{css:nB.feed,children:[(0,p.tZ)(e9.O,{}),r&&a?(0,p.tZ)(e9.Z,{post:{user:t,repl:(0,f._)((0,d._)({},r),{title:i.value,iconUrl:a,tags:l.value,description:o.value,isTemplate:!0})}}):(0,p.tZ)(D.G,{css:nB.loadingContainer,children:(0,p.tZ)(B.Z,{})}),(0,p.tZ)(e9.O,{})]})]})]})},nP=["Basics","Tags","Icon","Cover page","Layout","Publishing"],nL=(0,eB.X)({rootContainer:[G.l0.borderRadius(8),G.l0.flex.row,G.l0.overflow("hidden"),(0,T._)({},(0,e1.et)("tabletMax"),{minWidth:850})],formContainer:[G.l0.colWithGap(12),G.l0.p(16),G.l0.minWidth(320),G.l0.flex.growAndShrink(1),(0,T._)({},(0,e1.et)("tabletMin"),{maxWidth:370})],form:[G.l0.colWithGap(16),G.l0.flex.growAndShrink(1)],formSections:[G.l0.rowWithGap(4),G.l0.align.center],formSectionsNavigation:[G.l0.flex.growAndShrink(1)],loadingContainer:[G.l0.rowWithGap(4),G.l0.color.foregroundDimmer],submitButton:[{boxShadow:"0px 0px 16px 0px ".concat(G.TV.accentPrimaryDimmer," !important")}]});function nN(e){var t,n,r,i,o,a,s,u,f,m,g,y,b,w,x,C,_,S,E,T,I,A,U,M=e.replId,X=e.currentUser,F=e.source,V=e.getDesktopLayoutState,q=(t=(0,P._)(function(e){var t;return(0,L.Jh)(this,function(n){switch(n.label){case 0:if(!eM)return[2,{message:"Could not get file"}];if(!e)return[2,{message:"File path cannot be blank"}];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,eM.stat(e)];case 2:if(!(t=n.sent()).exists||t.type!==e4.Tv.File)return[2,{message:"File does not exist"}];return[3,4];case 3:return n.sent(),[2,{message:"Could not get file"}];case 4:return[2]}})}),function(e){return t.apply(this,arguments)}),J=(0,O.d)({tablet:!0}),Y=(0,N.P5)({type:"boolean",controlName:"flag-template-layout-author"}),K=!J&&Y&&null!=V,Q=function(e){var t,n,r,i,o,a,c,s,u=(0,W.Y)(e.replId||null,function(e){return e?null:{message:"Select a Repl to share"}}),f=(t={variables:{id:u.value||""},skip:!u.value},n=(0,d._)({},ec,t),ea.a(es,n)),p=(null===(r=f.data)||void 0===r?void 0:r.repl.__typename)==="Repl"?f.data.repl:null,m=!!(null==p?void 0:p.publishedAs),g=(0,W.Y)("",ek),y=(0,W.Y)("",eE),b=(0,W.Y)(null,function(){return null}),w=(0,W.Y)("repl_image",function(){return null}),x=(0,W.Y)(null,function(){return null}),C=(0,W.Y)("",e.fileValidator),_=(0,W.Y)([],function(){return null}),S=(0,W.Y)(l.Default,function(){}),E=function(){var e,t=(0,h._)((e=(0,d._)({},em,void 0),$.D(ev,e)),2),n=t[0],r=t[1];function i(){return(i=(0,P._)(function(e){var t;return(0,L.Jh)(this,function(i){switch(i.label){case 0:if(r.loading)return[2,{data:null,error:null}];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n({variables:{input:e}})];case 2:return[2,{data:(t=i.sent()).data,error:eg(t)}];case 3:return i.sent(),[2,{data:null,error:"Something went wrong saving your Cover page"}];case 4:return[2]}})})).apply(this,arguments)}return{data:r.data,loading:r.loading,error:eg(r),setReplViewSettings:function(e){return i.apply(this,arguments)}}}(),T=function(){var e,t=(0,h._)((e=(0,d._)({},ed,void 0),$.D(ef,e)),2),n=t[0],r=t[1];function i(){return(i=(0,P._)(function(e){var t;return(0,L.Jh)(this,function(i){switch(i.label){case 0:if(r.loading)return[2,{data:null,error:null}];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n({variables:{input:e}})];case 2:return[2,{data:(t=i.sent()).data,error:eh(t)}];case 3:return i.sent(),[2,{data:null,error:"Something went wrong saving your Repl Tags"}];case 4:return[2]}})})).apply(this,arguments)}return{data:r.data,loading:r.loading,error:eh(r),setReplTags:function(e){return i.apply(this,arguments)}}}(),R=function(){var e,t=(0,h._)((e=(0,d._)({},eb,void 0),$.D(ew,e)),2),n=t[0],r=t[1];function i(){return(i=(0,P._)(function(e){return(0,L.Jh)(this,function(t){switch(t.label){case 0:if(r.loading)return[2,{data:null,error:null}];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,n({variables:{input:e}})];case 2:return[2,{data:t.sent().data,error:null}];case 3:return[2,{data:null,error:eZ(t.sent())}];case 4:return[2]}})})).apply(this,arguments)}return{data:r.data,loading:r.loading,error:r.error&&eZ(r.error),updateRepl:function(e){return i.apply(this,arguments)}}}(),D=eo(),I=(null==p?void 0:null===(i=p.replViewSettings)||void 0===i?void 0:i.defaultView)&&ex(p.replViewSettings.defaultView)?p.replViewSettings.defaultView:"repl_image",B=(0,Z.Z)(g.setValue),G=(0,Z.Z)(y.setValue),A=(0,Z.Z)(_.setValue),N=(0,Z.Z)(b.setValue),O=(0,Z.Z)(x.setValue),U=(0,Z.Z)(w.setValue),M=(0,Z.Z)(C.setValue);(0,v.useEffect)(function(){var e,t,n,r;p&&(U.current(I),M.current(null!==(t=null===(e=p.replViewSettings)||void 0===e?void 0:e.replFile)&&void 0!==t?t:""),B.current(p.isRenamed?p.title:"",{preventTouch:!0}),G.current(null!==(n=p.description)&&void 0!==n?n:"",{preventTouch:!0}),A.current(p.tags),N.current(p.iconUrl.endsWith(".svg")?null:p.iconUrl),O.current(null!==(r=p.imageUrl)&&void 0!==r?r:null))},[p,O,N,A,B,G,I,U,M]);var X=(0,H.W)(b.setValue),F=X.previewUrl||b.value||(null==p?void 0:p.iconUrl)||(null==p?void 0:p.templateInfo.iconUrl),V=null!==(s=null===(c=[u,g,y,b,w,x,_,C,S].filter(function(e){return(e!==C||"repl_file"===w.value)&&e.error}))||void 0===c?void 0:null===(a=c[0])||void 0===a?void 0:null===(o=a.error)||void 0===o?void 0:o.message)&&void 0!==s?s:null;function q(){return(q=(0,P._)(function(){var e,t,n,r,i,o,a,l,c,s,u;return(0,L.Jh)(this,function(d){switch(d.label){case 0:if(!p)throw new eC("Missing repl");if(t=p.title!==g.value,n=p.description!==y.value,r=p.iconUrl!==b.value,i="repl_image"===w.value&&p.imageUrl!==x.value,o=C.value&&"repl_file"===w.value&&(null===(e=p.replViewSettings)||void 0===e?void 0:e.replFile)!==C.value,a=w.value&&I!==w.value,l=!z()(p.tags,_.value),!(t||n||r))return[3,2];if(g.error||y.error||b.error)throw new eC;return[4,R.updateRepl({id:p.id,title:t?g.value:void 0,description:n?y.value:void 0,iconUrl:r?b.value:void 0})];case 1:if((c=d.sent()).error)throw new e_(c.error);d.label=2;case 2:if(!(a||i||o))return[3,4];if("repl_image"===w.value&&x.error||"repl_file"===w.value&&C.error)throw new eC;return[4,E.setReplViewSettings({replId:p.id,defaultView:"repl_image"===w.value?j.bV.ReplImage:j.bV.ReplFile,replImage:i?x.value:void 0,replFile:o?C.value:void 0})];case 3:if((s=d.sent()).error)throw new e_(s.error);d.label=4;case 4:if(!l)return[3,6];if(_.error)throw new eC;return[4,T.setReplTags({replId:p.id,tags:_.value.map(function(e){return e.id})})];case 5:if((u=d.sent()).error)throw new e_(u.error);d.label=6;case 6:return[2]}})})).apply(this,arguments)}function J(){return(J=(0,P._)(function(){var t,n,r;return(0,L.Jh)(this,function(i){switch(i.label){case 0:if(!p)throw new eC("Missing repl");if(V)throw new eC(null!=V?V:"Something went wrong");return t=null,e.canAuthorTemplateLayout&&S.value===l.Current&&(t=null===(n=e.getDesktopLayoutState)||void 0===n?void 0:n.call(e)),[4,D.createDeployment({input:{replId:p.id,description:y.value,iconUrl:F||p.iconUrl,initialLayoutState:t}})];case 1:if((r=i.sent()).error)throw new eS(r.error);return(0,k.j)(k.U3.POST_MADE,{source:e.source,replType:"template_repl",title:g.value,description:y.value,tags:_.value.map(function(e){return e.id}),defaultView:w.value}),[2]}})})).apply(this,arguments)}var Y=R.loading||E.loading||T.loading,K=R.error||E.error||T.error,Q=D.loading,ee=D.error;return{selectedRepl:p,isReplLoading:f.loading,replLoadingError:f.error,replIdField:u,replTitleField:g,replDescriptionField:y,iconUrlField:b,coverDefaultViewField:w,coverUrlField:x,coverFileField:C,layoutField:S,tagsField:_,replIconInput:X,replIconUrl:F,inputError:V,save:function(){return q.apply(this,arguments)},isSaving:Y,savingError:K,publishInitialRelease:function(){return J.apply(this,arguments)},isPublishing:Q,publishingError:ee,isPublished:m}}({replId:M,fileValidator:q,source:F,canAuthorTemplateLayout:K,getDesktopLayoutState:V}),ee=Q.selectedRepl,et=Q.isReplLoading,en=Q.replLoadingError,er=Q.replIdField,ei=Q.replTitleField,el=Q.replDescriptionField,eu=Q.iconUrlField,ep=Q.tagsField,ey=Q.coverDefaultViewField,eR=Q.coverUrlField,eD=Q.coverFileField,eI=Q.layoutField,eB=Q.save,eG=Q.isSaving,eA=Q.savingError,eP=Q.publishInitialRelease,eL=Q.isPublishing,eN=Q.publishingError,eO=Q.isPublished,eU=(r=(n={repl:ee,currentUser:X}).repl,i=n.currentUser,a=(o=(0,h._)((0,nD.qg)(),2))[0],s=o[1],u=(0,nD.ic)(),m=(f=(0,h._)((0,v.useState)(function(){var e,t,n;return e=(0,nS.ZP)({onUnrecoverableError:(0,nR.Z)({throwBsod:s,origin:"Publish: services/onUnrecoverableError"})}),t=(0,nT.Z)({container:e}),n=(0,nI.Z)({container:e,fs:t}),{container:e,fs:t,dotReplit:n}}),1)[0]).container,g=f.fs,y=f.dotReplit,w=(b=(0,h._)((0,v.useState)(function(){return m.getConnectionState()===nS.em.CONNECTED}),2))[0],x=b[1],C=(0,nk.b)(r?{repl:r,currentUser:i}:null),_=(0,nE.S)(),(0,v.useEffect)(function(){if(r&&C&&m.getConnectionState()===nS.em.DISCONNECTED)return m.connect({context:C,getMinimumRetryDelayMs:_}),function(){return m.close()}},[r,m,C]),(0,v.useEffect)(function(){return m.onConnectionStateChanged(function(e){x(e===nS.em.CONNECTED)})},[m]),{isConnected:w,container:m,fs:g,dotReplit:y,bsodId:null==a?void 0:a.eventId,devClearBsod:function(){return u()}}),eM=eU.fs,eX=eU.dotReplit,eW=eU.bsodId,eH=K&&!eO?[]:["Layout"],eV=(0,h._)((0,v.useState)(0),2),ez=eV[0],e1=eV[1],e3=nP[ez],e8=ez===nP.length-1,e6=(0,h._)((0,v.useState)({show:!1,isUpdate:!1}),2),e9=e6[0],te=e6[1],tt=(0,h._)((0,v.useState)(function(){return Array(nP.length).fill(!1)}),2),tn=tt[0],tr=tt[1],ti=(0,v.useCallback)(function(e,t){tn[e]=t,tr(tn)},[tn]);(0,v.useEffect)(function(){Q.replTitleField.value&&Q.replDescriptionField.value?ti(0,!0):ti(0,!1),Q.tagsField.value.length>0?ti(1,!0):ti(1,!1),Q.iconUrlField.value?ti(2,!0):ti(2,!1),Q.coverDefaultViewField.value===c.ReplImage&&Q.coverUrlField.value||Q.coverDefaultViewField.value===c.ReplFile&&Q.coverFileField.value?ti(3,!0):ti(3,!1)},[tn,Q,ti]);var to=(E=(S=(0,h._)((0,v.useState)({isLoading:!0,error:null,entryPoint:null}),2))[0],T=S[1],(0,v.useEffect)(function(){function e(){return(e=(0,P._)(function(){var e,t,n;return(0,L.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,eX.getConfig()];case 1:if((t=r.sent()).error)throw Error(t.errorMessage);return T({isLoading:!1,error:null,entryPoint:null!==(n=null==t?void 0:null===(e=t.config)||void 0===e?void 0:e.entrypoint)&&void 0!==n?n:null}),[3,3];case 2:return r.sent(),T({isLoading:!1,error:"Could not load .replit config",entryPoint:null}),[3,3];case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[eX]),(0,d._)({},E));(0,v.useEffect)(function(){to.isLoading||!to.entryPoint||eD.value||eD.setValue(to.entryPoint)},[to.isLoading,to.entryPoint,eD]);var ta=(0,h._)((0,v.useState)(!1),2),tc=ta[0],ts=ta[1];(0,v.useEffect)(function(){tc||M&&(et||eO)||(ts(!0),(0,k.j)(k.U3.PUBLISH_SELECTED,{source:F}))},[tc,F,M,et,eO]);var tu=(0,Z.Z)(!!((null==ee?void 0:ee.publishedAs)||(null==ee?void 0:ee.lastPublishedAt))),td=(0,Z.Z)(e3);if((0,v.useEffect)(function(){return function(){tu.current||(0,k.j)(k.U3.PUBLISH_FLOW_EXITED,{source:F,lastSectionVisited:td.current})}},[F,tu,td]),eW)return(0,p.tZ)(e2.Z,{});if(e9.show&&ee)return(0,p.tZ)(tl,{repl:ee});var tf={Basics:{hasError:!!(er.error||ei.error||el.error),isValid:(0,P._)(function(){return(0,L.Jh)(this,function(e){switch(e.label){case 0:return[4,Promise.all([er.validate(),ei.validate(),el.validate()])];case 1:return[2,e.sent().every(function(e){return!e})]}})})},Tags:{hasError:!!ep.error,isValid:(0,P._)(function(){return(0,L.Jh)(this,function(e){switch(e.label){case 0:return[4,ep.validate()];case 1:return[2,!e.sent()]}})})},Icon:{hasError:!!eu.error,isValid:(0,P._)(function(){return(0,L.Jh)(this,function(e){switch(e.label){case 0:return[4,eu.validate()];case 1:return[2,!e.sent()]}})})},"Cover page":{hasError:!!(ey.value===c.ReplImage?eR.error:eD.error),isValid:(0,P._)(function(){var e;return(0,L.Jh)(this,function(t){switch(t.label){case 0:if(ey.value!==c.ReplImage)return[3,2];return[4,eR.validate()];case 1:return e=!t.sent(),[3,4];case 2:return[4,eD.validate()];case 3:e=!t.sent(),t.label=4;case 4:return[2,e]}})})},Layout:{hasError:!!eI.error,isValid:(0,P._)(function(){return(0,L.Jh)(this,function(e){switch(e.label){case 0:return[4,eI.validate()];case 1:return[2,!e.sent()]}})})},Publishing:{hasError:!1,isValid:(0,P._)(function(){return(0,L.Jh)(this,function(e){return[2,!0]})})}},th=tf[e3].hasError,tp=tf[e3].isValid,tm=null!==(U=nP.find(function(e){return tf[e].hasError}))&&void 0!==U?U:null,tv=null;ee?en||eA||eN?tv="Something went wrong - please try again":th&&(tv="Please fill out the the form"):tv="Please select a Repl";var tg=!!(!ee||th||en||et||eG||eL),ty=(I=(0,P._)(function(e){var t;return(0,L.Jh)(this,function(n){switch(n.label){case 0:if(t=tg)return[3,2];return[4,tp()];case 1:t=!n.sent(),n.label=2;case 2:if(t)return[2];if(!eH.includes(nP[e]))return[3,4];return[4,ty(e+1)];case 3:case 6:return n.sent(),[2];case 4:return n.trys.push([4,6,,7]),e1(e),[4,eB()];case 5:return n.sent(),[3,7];case 7:return[2]}})}),function(e){return I.apply(this,arguments)}),tb=ez>0;return(0,p.tZ)(eT.Provider,{value:Q,children:(0,p.BX)(eF.Tg,{css:nL.rootContainer,background:"default",dataCy:"publish-form-container",children:[(0,p.BX)(D.G,{css:nL.formContainer,children:[(0,p.tZ)(R.xv,{variant:"subheadBig",multiline:!1,children:eO?"Edit publish settings":"Publish template"}),(0,p.BX)(nG,{onSubmit:(A=(0,P._)(function(e){var t,n,r,i,o,a;return(0,L.Jh)(this,function(l){switch(l.label){case 0:if(e.preventDefault(),!e8)return[3,13];t=!0,n=!1,r=void 0,l.label=1;case 1:l.trys.push([1,6,7,8]),i=nP[Symbol.iterator](),l.label=2;case 2:if(t=(o=i.next()).done)return[3,5];return[4,tf[o.value].isValid()];case 3:if(!l.sent())return[2];l.label=4;case 4:return t=!0,[3,2];case 5:return[3,8];case 6:return a=l.sent(),n=!0,r=a,[3,8];case 7:try{t||null==i.return||i.return()}finally{if(n)throw r}return[7];case 8:if(eO)return[3,10];return[4,eP()];case 9:return l.sent(),te({show:!0,isUpdate:!1}),[3,12];case 10:return[4,eB()];case 11:l.sent(),te({show:!0,isUpdate:!0}),l.label=12;case 12:return[3,14];case 13:ty(ez+1),l.label=14;case 14:return[2]}})}),function(e){return A.apply(this,arguments)}),css:nL.form,children:[(0,p.tZ)(D.G,{css:nL.formSections,children:nP.map(function(e,t){return eH.includes(e)?null:(0,p.BX)(v.Fragment,{children:[0!==t&&(0,p.tZ)(e5,{}),(0,p.tZ)(e7,{isActive:ez===t,isComplete:tn[t],onClick:function(){return ty(t)},disabled:tg,children:e})]},e)})}),(0,p.BX)(D.G,{css:nL.formSectionsNavigation,children:["Basics"===e3&&(0,p.tZ)(tA,{}),"Tags"===e3&&(0,p.tZ)(n_,{}),"Icon"===e3&&(0,p.tZ)(t9,{}),"Cover page"===e3&&(0,p.tZ)(t5,{fs:eM}),"Layout"===e3&&(0,p.tZ)(ej,{getCurrentLayoutState:V}),"Publishing"===e3&&(0,p.tZ)(ne,{})]}),(0,p.BX)(D.G,{children:[e8&&tm&&tm!==e3?(0,p.tZ)(eJ.E,{colorway:"negative",icon:(0,p.tZ)(e0.Z,{}),text:"Please fix error in ".concat(tm," section")}):null,eA?(0,p.tZ)(eJ.E,{colorway:"negative",icon:(0,p.tZ)(e0.Z,{}),text:eA}):null,eN?(0,p.tZ)(eJ.E,{colorway:"negative",icon:(0,p.tZ)(e0.Z,{}),text:eN}):null]}),(0,p.BX)(D.G,{css:[G.l0.rowWithGap(8),G.l0.align.center,tb?G.l0.justify.spaceBetween:G.l0.justify.end],children:[tb?(0,p.tZ)(eq.zx,{type:"button",iconLeft:(0,p.tZ)(e$.Z,{}),disabled:tg,onClick:function(){return ty(ez-1)},text:"Back"}):null,eG?(0,p.tZ)(D.G,{css:nL.loadingContainer,children:(0,p.tZ)(B.Z,{})}):null,(0,p.BX)(eY.u,{tooltip:tv,placement:"bottom",isDisabled:!tv,children:[!e8&&(0,p.tZ)(eq.zx,{type:"submit",colorway:"primary",iconLeft:(0,p.tZ)(eK.Z,{}),disabled:tg,text:"Next",dataCy:"publish-form-next-button"}),e8&&!eO?(0,p.tZ)(eq.zx,{type:"submit",colorway:"primary",css:nL.submitButton,iconLeft:eL?(0,p.tZ)(B.Z,{}):(0,p.tZ)(eQ.Z,{}),disabled:!!(tg||tm),text:"Submit",dataCy:"publish-form-publish-button"}):null,e8&&eO?(0,p.tZ)(eq.zx,{type:"submit",colorway:"primary",iconLeft:eL?(0,p.tZ)(B.Z,{}):(0,p.tZ)(eQ.Z,{}),disabled:!!(tg||tm),text:"Save"}):null]})]})]})]}),(0,p.tZ)(nA,{user:X})]})})}var nO=(0,eB.X)({loadingContainer:[G.l0.center,G.l0.p(32),G.l0.width(512),(0,T._)({},"@media (max-width: ".concat(I.j.tabletMin,"px)"),[{width:"100%"}])],errorContainer:[G.l0.center,G.l0.p(32)]});function nU(e){var t,n,r=e.replId,i=e.source,o=e.getDesktopLayoutState,a=(0,A.NH)(),l=(null===(n=a.data)||void 0===n?void 0:null===(t=n.currentUser)||void 0===t?void 0:t.__typename)==="CurrentUser"?a.data.currentUser:null;return a.loading?(0,p.tZ)(D.G,{css:nO.loadingContainer,children:(0,p.tZ)(B.Z,{})}):a.error||!l?(0,p.tZ)(D.G,{css:nO.errorContainer,children:(0,p.tZ)(R.xv,{multiline:!1,children:"Something went wrong, please try again."})}):(0,p.tZ)(nN,{source:i,replId:r,currentUser:l,getDesktopLayoutState:o})}function nM(){var e=(0,q._)(["\n  query PendingChanges($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        deployment {\n          id\n          activeRelease {\n            id\n            pendingChanges {\n              fileName\n              changeType\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return nM=function(){return e},e}var nX={},nF=(0,J.Ps)(nM()),nW=n(71089),nH=n(16923),nV=n(78890),nz=n(18158);function nj(){var e=(0,q._)(["\n  mutation RevertTemplateRelease($input: RevertReplReleaseInput!) {\n    revertReplRelease(input: $input) {\n      ... on Repl {\n        id\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return nj=function(){return e},e}var nq={},nJ=(0,J.Ps)(nj()),nY=D.K.form;function n$(e){if(0===e.length)return{message:"You cannot leave this empty."}}function nK(e){var t,n,r=e.changeType;return r===j.J5.NewFile?(t=G.TV.accentPositiveStronger,n="Added"):r===j.J5.DeletedFile?(t=G.TV.accentNegativeStronger,n="Deleted"):(t=G.TV.foregroundDefault,n="Changed"),(0,p.tZ)(R.xv,{variant:"small",css:[{color:t}],multiline:!1,children:n})}var nQ=(0,eB.X)({loadingContainer:[G.l0.center],container:[{display:"grid",gridTemplateColumns:"1fr 1fr",gap:G.TV.space8}],item:[G.l0.rowWithGap(4),G.l0.align.center]});function n0(e){var t=e.pendingChangesState,n=e.isReplitTemplate;if(t.loading)return(0,p.tZ)(D.G,{css:nQ.loadingContainer,children:(0,p.tZ)(B.Z,{})});if(t.error)return(0,p.tZ)(eJ.E,{icon:(0,p.tZ)(e0.Z,{}),text:t.error.message||"Could not load modified files - please try again.",colorway:"negative"});if(!t.pendingChanges||0===t.pendingChanges.length)return n?null:(0,p.tZ)(R.xv,{children:"No file changes to publish."});var r=t.pendingChanges,i=r.slice(0,15);return(0,p.BX)(D.G,{css:nQ.container,children:[i.map(function(e){return(0,p.BX)(v.Fragment,{children:[(0,p.BX)(D.G,{css:nQ.item,children:[(0,p.tZ)(nH.Z,{size:12,path:e.fileName}),(0,p.tZ)(R.xv,{multiline:!1,children:e.fileName})]},e.fileName),(0,p.tZ)(nK,{changeType:e.changeType})]},e.fileName)}),r.length>i.length&&(0,p.BX)(R.xv,{multiline:!1,children:["And ",r.length-i.length," other files..."]})]})}var n1=(0,eB.X)({header:[G.l0.mb(16)],grid:[{display:"grid",gridTemplateColumns:"2fr 3fr 1fr",gap:G.TV.space8}],activeLabel:[G.l0.p(4),{display:"flex"}]});function n2(e){var t,n=e.repl,r=function(){var e,t=(0,h._)((e=(0,d._)({},nq,{refetchQueries:["ReplEnvironmentHeader"]}),$.D(nJ,e)),2),n=t[0];function r(){return(r=(0,P._)(function(e){var t;return(0,L.Jh)(this,function(r){switch(r.label){case 0:return[4,n({variables:{input:e.input}})];case 1:return[2,{data:(t=r.sent()).data,error:function(e){if(!e.data)return null;var t=e.data;if("revertReplRelease"in t){if("NotFoundError"===t.revertReplRelease.__typename||"UnauthorizedError"===t.revertReplRelease.__typename||"UserError"===t.revertReplRelease.__typename)return t.revertReplRelease.message;if("Repl"!==t.revertReplRelease.__typename)return"Something went wrong reverting your Template"}}(t)}]}})})).apply(this,arguments)}return{revertTemplateRelease:function(e){return r.apply(this,arguments)},state:t[1]}}(),i=(t=(0,P._)(function(e){return(0,L.Jh)(this,function(t){switch(t.label){case 0:return[4,r.revertTemplateRelease({input:{replId:n.id,releaseId:e}})];case 1:return t.sent(),[2]}})}),function(e){return t.apply(this,arguments)});return(0,p.BX)(D.G,{children:[(0,p.tZ)(R.h4,{level:1,variant:"subheadBig",css:n1.header,children:"Existing Releases"}),(0,p.tZ)(D.G,{css:n1.grid,children:n.releases.items.map(function(e){var t,r;return(0,p.BX)(v.Fragment,{children:[(0,p.tZ)("span",{children:(0,nV.Z)(new Date(e.timeCreated),"do MMM, hh:mm a")}),(0,p.tZ)("span",{children:e.description}),(0,p.tZ)("span",{style:{justifySelf:"end"},children:e.id===(null===(r=n.deployment)||void 0===r?void 0:null===(t=r.activeRelease)||void 0===t?void 0:t.id)?(0,p.tZ)("span",{css:n1.activeLabel,children:"(active)"}):(0,p.tZ)(eq.zx,{text:"revert",colorway:"primary",size:"small",onClick:function(){i(e.id)}})})]},e.id)})})]})}var n4=(0,eB.X)({container:[G.l0.colWithGap(24),G.l0.p(16)],modifiedContainer:[G.l0.colWithGap(8)],layoutContainer:[G.l0.colWithGap(8)],descriptionContainer:[G.l0.colWithGap(4)],descriptionLabel:[G.l0.color.foregroundDimmer,{fontSize:G.TV.fontSizeSmall,lineHeight:G.TV.lineHeightSmall}],descriptionInput:[G.l0.width("100%"),G.l0.minHeight(64),G.l0.maxHeight(128),{resize:"vertical"}],footerContainer:[G.l0.rowWithGap(12),G.l0.justify.end],existingReleasesContainer:[G.l0.p(16),G.l0.colWithGap(16)]});function n3(e){var t,n,r,i,o,a,c,s,u,m,g,y,b=e.repl,w=e.getDesktopLayoutState,Z=(0,tR.U)(),x=(0,h._)((0,v.useState)(!1),2),C=x[0],_=x[1],S=(0,h._)((0,v.useState)(!1),2),k=S[0],E=S[1],I=(i=function(e){var t,n,r,i,o=(r={variables:{replId:e.replId},fetchPolicy:"cache-and-network",ssr:!1},i=(0,d._)({},nX,r),ea.a(nF,i)),a=o.data,l=o.loading,c=o.error;if(l)return{loading:l,pendingChanges:null,error:null};if(c)return{loading:!1,pendingChanges:null,error:c};var s=(null==a?void 0:a.repl.__typename)==="Repl"?a.repl:null;return s?{loading:!1,pendingChanges:(null===(n=s.deployment)||void 0===n?void 0:null===(t=n.activeRelease)||void 0===t?void 0:t.pendingChanges)||[],error:c}:{loading:!1,pendingChanges:null,error:Error("Repl not found")}}({replId:{replId:b.id}.replId}),o=(0,v.useMemo)(function(){return i.pendingChanges?i.pendingChanges.slice().sort(function(e,t){return e.fileName.localeCompare(t.fileName)}).map(function(e){return{file:e,pathDepth:(0,tO.U$)(e.fileName)}}).sort(function(e,t){return e.pathDepth-t.pathDepth}).map(function(e){return e.file}):[]},[i.pendingChanges]),(0,f._)((0,d._)({},i),{pendingChanges:o})),B=eo(),G=(0,W.Y)("",n$),A=(null===(c=I.pendingChanges)||void 0===c?void 0:c.length)!==0,U=(null===(s=b.user)||void 0===s?void 0:s.username)===nz.IU||(null===(u=b.user)||void 0===u?void 0:u.username)==="templates",M=(0,h._)((0,v.useState)({ran:!1,tested:!1}),2),X=M[0],F=M[1],H=(0,O.d)({tablet:!0}),V=(0,N.P5)({type:"boolean",controlName:"flag-template-layout-author"}),z=!H&&V&&null!=w,j=(0,h._)((n=(t=(0,h._)((0,v.useState)(b.releases.items[0]),2))[0],r=t[1],(0,v.useEffect)(function(){b.releases.items.length>0&&r(b.releases.items.slice().sort()[0])},[b.releases.items]),[n,r]),2),q=j[0],J=j[1],Y=(null==q?void 0:q.initialLayoutState)!=null,$=(0,W.Y)(Y?l.Saved:l.Default,function(){}),K=Y?$.value!==l.Saved:$.value!==l.Default,Q=A||K;(0,v.useEffect)(function(){F({ran:!1,tested:!1})},[F]);var ee=!!(G.error||B.loading||!U&&!Q||U&&(!X.ran||!X.tested)),et=U&&(null===(g=b.releases)||void 0===g?void 0:null===(m=g.items)||void 0===m?void 0:m.length)>1,en="";return(G.error?en="Please fill out the form":U||Q||(en="No file or layout changes to publish in this release"),C)?(0,p.tZ)(tl,{repl:b}):k?(0,p.tZ)(D.G,{css:n4.existingReleasesContainer,children:(0,p.tZ)(n2,{repl:b})}):(0,p.BX)(nY,{onSubmit:(a=(0,P._)(function(e){var t,n,r,i;return(0,L.Jh)(this,function(o){switch(o.label){case 0:if(e.preventDefault(),ee||G.validate())return[2];return n=null,z&&($.value===l.Current?n=w():$.value===l.Saved&&Y&&(n=null==q?void 0:q.initialLayoutState)),[4,B.createRelease({input:{replId:b.id,description:G.value,initialLayoutState:n}})];case 1:if((r=o.sent()).error)return[2];return _(!0),(null===(t=r.data)||void 0===t?void 0:t.createReplRelease.__typename)==="Repl"&&(J(i=r.data.createReplRelease.releases.items.slice().sort()[0]),$.setValue((null==i?void 0:i.initialLayoutState)!=null?l.Saved:l.Default)),[2]}})}),function(e){return a.apply(this,arguments)}),css:n4.container,children:[(0,p.tZ)(R.h4,{level:1,variant:"headerDefault",children:"Publish template changes"}),(0,p.BX)(D.G,{css:n4.modifiedContainer,children:[(0,p.tZ)(R.h4,{level:2,variant:"subheadDefault",children:"Modified files"}),(0,p.tZ)(n0,{pendingChangesState:I,isReplitTemplate:U})]}),z?(0,p.BX)(D.G,{css:n4.layoutContainer,children:[(0,p.tZ)(R.h4,{level:2,variant:"subheadDefault",children:"Workspace layout"}),(0,p.tZ)(ez,{getCurrentLayoutState:w,savedLayoutState:null==q?void 0:q.initialLayoutState,templateLayout:$})]}):null,U||Q?(0,p.BX)(D.G,{css:n4.descriptionContainer,children:[(0,p.tZ)("label",{htmlFor:Z("description"),css:n4.descriptionLabel,children:"Description"}),(0,p.tZ)(tv.B,{id:Z("description"),"aria-label":"Description",onChange:function(e){return G.setValue(e.target.value)},css:n4.descriptionInput,placeholder:"Explain what has changed about your template"}),G.error?(0,p.tZ)(eJ.E,{icon:(0,p.tZ)(e0.Z,{}),text:null===(y=G.error)||void 0===y?void 0:y.message,colorway:"negative"}):null]}):null,U?(0,p.tZ)(n6,{repl:b,state:X,onChange:function(e,t){return F(function(n){return(0,f._)((0,d._)({},n),(0,T._)({},e,t))})}}):null,(0,p.tZ)(D.G,{children:B.error?(0,p.tZ)(eJ.E,{icon:(0,p.tZ)(e0.Z,{}),text:B.error,colorway:"negative"}):null}),(0,p.BX)(D.G,{css:n4.footerContainer,children:[et?(0,p.tZ)(eq.zx,{text:"Revert to older",colorway:"negative",onClick:function(){return E(!0)}}):null,(0,p.tZ)(eY.u,{tooltip:en,placement:"bottom",isDisabled:!en,children:(0,p.tZ)(eq.zx,{text:"Publish release",type:"submit",colorway:"primary",iconLeft:(0,p.tZ)(eQ.Z,{}),disabled:ee})})]})]})}var n8=(0,eB.X)({container:[G.l0.colWithGap(12)],row:[G.l0.rowWithGap(8),G.l0.py(2)]});function n6(e){var t,n,r,i=e.repl,o=e.state,a=e.onChange,l=(0,tR.U)(),c=(0,Y.e9)(),s=c.data,u=c.loading,d=null==s?void 0:null===(t=s.currentUser)||void 0===t?void 0:t.username;return(0,p.BX)(D.G,{css:n8.container,children:[(0,p.tZ)(R.h4,{level:2,children:"Official Replit Template publishing checklist"}),(0,p.BX)(D.G,{children:[(0,p.BX)(n5,{children:[(0,p.tZ)(nW.X,{id:l("ran"),checked:o.ran,onChange:function(e){return a("ran",e)}}),(0,p.tZ)("label",{htmlFor:l("ran"),children:"Ran Repl:"}),(0,p.BX)("span",{children:["I ran the Repl to generate and cache package guesser result into"," ",(0,p.tZ)("code",{children:".upm"}),"."]})]}),(0,p.BX)(n5,{children:[(0,p.tZ)(nW.X,{id:l("tested"),checked:o.tested,onChange:function(e){return a("tested",e)}}),(0,p.tZ)("label",{htmlFor:l("tested"),children:"Ran tests:"}),(0,p.BX)("span",{children:['I ran "Test working copy" for @',null===(n=i.user)||void 0===n?void 0:n.username,"/",i.slug," in"," ",(0,p.tZ)("a",{href:"https://template-tester.replit.app/",target:"_blank",children:"template tester"}),". ",(0,p.tZ)("br",{}),"If there are no tests, consider adding one."]})]})]}),u||(null===(r=i.user)||void 0===r?void 0:r.username)!==d?null:(0,p.tZ)(eJ.E,{text:"You can't publish an update while impersonating. Add yourself as a member of the 'replit' team using CLUI tool 'add-remove-team-member', then open this Repl from your account.",colorway:"negative"})]})}function n5(e){var t=e.children;return(0,p.tZ)(D.G,{css:n8.row,children:t})}var n7=n(84573),n9=n(91925),re=n(33146),rt=n(54590),rn=n(77361),rr=n(17519),ri=n(18123),ro=n(89421),ra=n(85421),rl=n(87410),rc=n(4565),rs=n(76575),ru=n(24857),rd=(0,tL.F4)({from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}),rf=(0,tL.iv)([G.l0.position.relative,G.l0.cursor.pointer,G.l0.backgroundColor.backgroundHigher,G.l0.borderRadius(4),G.l0.p(2),{input:[G.l0.position.absolute,G.l0.top(0),G.l0.left(0),G.l0.width("100%"),G.l0.height("100%"),G.l0.zIndex(-1),{opacity:0}]}]),rh=(0,tL.iv)([G.l0.color.accentPrimaryDefault,G.l0.position.absolute,G.l0.top(0),G.l0.left(0),G.l0.width("100%"),G.l0.height("100%"),G.l0.borderRadius(4),G.l0.backgroundColor.backgroundRoot,G.l0.overflow("hidden"),G.l0.display.flex,G.l0.align.center,G.l0.justify.center]),rp=(0,eB.X)({addIcon:[rf,G.l0.display.flex,G.l0.align.center,G.l0.justify.center,G.l0.border({width:1,color:G.TV.foregroundDimmest}),G.l0.backgroundColor.backgroundRoot,{"&:hover":[G.l0.color.accentPrimaryDefault,{borderColor:G.TV.accentPrimaryDefault}]}],updateIcon:[rf,{"&:hover .hover-state":{opacity:.8}}],hoverState:[rh,{opacity:0}],loadingState:[rh,{opacity:.8}],loadingIcon:[G.l0.display.flex,G.l0.align.center,G.l0.justify.center,{animation:"".concat(rd," 1s linear infinite")}],error:[{fontSize:G.TV.fontSizeDefault,color:G.TV.accentNegativeDefault}]});function rm(e){var t=(0,v.useRef)(null),n=(0,h._)((0,v.useState)(e.value),2),r=n[0],i=n[1],o=(0,h._)((0,v.useState)(null),2),a=o[0],l=o[1],c=(0,tY.Z)({onUpload:function(t){var n=t.url;e.onChange(n)},onUploadPreview:function(e){i(e.dataUrl)},onError:function(e){l(e.message)}});(0,v.useEffect)(function(){i(e.value)},[e.value]);var s=null==r?void 0:r.startsWith("data:");return(0,p.BX)(ru.gC,{spacing:4,children:[(0,p.BX)("div",{onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},css:r?rp.updateIcon:rp.addIcon,"aria-label":r?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",children:[r?(0,p.BX)(p.HY,{children:[(0,p.tZ)(rc.Z,{iconUrl:r,size:32,alt:"icon"}),s?(0,p.tZ)("div",{css:rp.loadingState,children:(0,p.tZ)("div",{css:rp.loadingIcon,children:(0,p.tZ)(B.Z,{})})}):(0,p.tZ)("div",{css:rp.hoverState,className:"hover-state",children:(0,p.tZ)(rs.Z,{})})]}):(0,p.tZ)(t1.Z,{size:32}),(0,p.tZ)("input",{ref:t,accept:tz.W9.join(","),type:"file",onChange:function(e){var t=e.target,n=t.validity,r=t.files;n.valid&&(null==r?void 0:r.length)&&(l(null),c.uploadImage(r[0],t2.N.TemplateIcon))}})]}),a?(0,p.tZ)("div",{css:rp.error,children:a}):null]})}var rv=n(94311),rg=n(641),ry=n(72452),rb=n(44049),rw=n(31892),rZ=n(63685),rx=n(35021),rC=n(66958),r_=n(49580),rS=n(33597),rk=n(91893),rE=n(83138),rT=n(19871),rR=n(81199),rD=n(54012),rI=n(42950),rB=n(19480),rG=(0,eB.X)({dialog:[G.l0.py(2),G.l0.colWithGap(16)],actions:[G.l0.rowWithGap(8),G.l0.justify.end],setupItem:[G.l0.rowWithGap(8),G.l0.align.center],learnMoreLink:[G.l0.p(0)],description:[G.l0.colWithGap(8)],reachOut:[G.l0.pt(16),G.l0.px(16),G.l0.border({direction:"top",color:G.TV.outlineDimmest}),{marginInline:-16}]}),rA=function(e){var t,n,r,i,o,a,l,c,s,u,d,f,m,g=e.repl,y=e.org,b=e.onRequestClose,w=e.onForkSeparately,_=(0,x.Z)().showError,S=y.id,k=(0,h._)((0,rS.Z)({navigateAfterFork:!0,replLinkOptions:{projectPane:!0},onFork:function(){b()},onError:function(){_("Error creating fork - please try again")}}),2),E=k[0],T=k[1].loading,I=(0,h._)((n=(t=(0,rR.Z)()).git,r=t.fs,i=t.container,a=(o=(0,h._)((0,v.useState)({loading:!1,error:null,success:!1}),2))[0],l=o[1],c=(0,C.Z)(),s=(0,h._)((0,rD.r)({}),1)[0],u=(0,Z.Z)(function(){var e,t,n;E({originId:g.id,teamId:null,title:null,description:null,isPrivate:!0,forkToPersonal:null,replReleaseId:null!==(n=null===(t=g.deployment)||void 0===t?void 0:null===(e=t.activeRelease)||void 0===e?void 0:e.id)&&void 0!==n?n:void 0,orgId:S,trackingData:{forkSource:"projectDialog",isOnboarding:!1,isApp:g.publishedAs===j.O2.App,isTemplate:g.publishedAs===j.O2.Template}})}),d=(0,x.Z)().showError,[(0,v.useCallback)((f=(0,P._)(function(e){var t,o,a,f;return(0,L.Jh)(this,function(h){switch(h.label){case 0:return l({loading:!0,error:null,success:!1}),[4,r.stat(rB.nt)];case 1:if(h.sent().exists)return[3,3];return[4,(0,rB.pI)(i)];case 2:h.sent().error&&d("Could not install project script"),h.label=3;case 3:return[4,n.init({includeAllInitialFiles:!0,initialCommit:!0})];case 4:if(!(t=h.sent()).error)return[3,8];if(t.error!==rT.aq.ALREADY_INITIALIZED)return[3,7];return[4,n.stageFiles({all:!0})];case 5:return h.sent(),[4,n.commit({message:"Initial project commit",allowEmpty:!1})];case 6:return h.sent().error&&d("Could not generate initial commit"),[3,8];case 7:return l({loading:!1,error:"Could not initialize a repository",success:!1}),[2];case 8:return[4,(0,rB.ej)(n)];case 9:return h.sent().error&&d("Could not configure SSH"),[4,r.flush()];case 10:return h.sent(),[4,r.persist({skipDebounce:!0})];case 11:if((o=h.sent()).error||!o.success)return l({loading:!1,error:"Could not initialize a repository",success:!1}),[2];return[4,new Promise(function(e){if(r.getStatus()===e4.kO.Clean){e();return}r.onStatusChange(function(t){if(t===e4.kO.Clean){e();return}})})];case 12:h.sent(),h.label=13;case 13:return h.trys.push([13,15,,16]),[4,s({variables:{input:{mainReplId:c,orgId:e}}})];case 14:if((f=h.sent()).errors||!(null===(a=f.data)||void 0===a?void 0:a.createProject))throw Error("Could not create project");if("Project"!==f.data.createProject.__typename)throw Error(f.data.createProject.message);return[3,16];case 15:return l({loading:!1,error:h.sent().message,success:!1}),[2];case 16:return l({loading:!1,error:null,success:!0}),u.current(),[2]}})}),function(e){return f.apply(this,arguments)}),[n,r,c,s,i,u,d]),a]),2),B=I[0],G=I[1],A=(m=(0,P._)(function(){return(0,L.Jh)(this,function(e){return G.loading||B(S),[2]})}),function(){return m.apply(this,arguments)});return(0,p.BX)(rk.l0,{css:rG.dialog,onSubmit:function(e){e.preventDefault(),A()},children:[(0,p.tZ)(R.h4,{level:1,variant:"subheadDefault",children:"Planning to merge your changes back into this Repl?"}),(0,p.tZ)(rI.G,{}),(0,p.BX)(D.G,{css:rG.description,children:[(0,p.tZ)(R.xv,{children:"Consider starting a Project – a set of connected, forkable Repls for better collaborative development and versioning. Within a Project, you can:"}),(0,p.tZ)(rE.M,{children:(0,p.BX)("ul",{children:[(0,p.tZ)("li",{children:"Fork a Repl to work on a feature in isolation, and merge back when ready"}),(0,p.tZ)("li",{children:"View all ongoing development in one place"}),(0,p.BX)("li",{children:["Share secrets and configuration between forks"," ",(0,p.tZ)(R.xv,{color:"dimmest",children:"(coming soon)"})]})]})})]}),G.error?(0,p.tZ)(eJ.E,{colorway:"negative",icon:(0,p.tZ)(e0.Z,{}),text:G.error}):null,(0,p.BX)(D.G,{css:rG.actions,children:[(0,p.tZ)(eq.zx,{loading:G.loading||T,text:"Fork separately",onClick:function(){b(),w()}}),(0,p.tZ)(eq.zx,{loading:G.loading||T,text:"Fork & start a Project",colorway:"primary",type:"submit"})]}),(0,p.tZ)(D.G,{css:rG.reachOut,children:(0,p.BX)(R.xv,{color:"dimmest",children:["If you have questions or feedback, reach out to"," ",(0,p.tZ)("a",{href:"mailto:teams@replit.com",children:"teams@replit.com"})]})})]})},rP=n(32501),rL=n(12605);(o=s||(s={})).DeleteRepl="DeleteRepl",o.PowerUp="PowerUp",o.BuyCycles="BuyCycles",o.Unpublish="Unpublish",o.UnpublishTemplate="UnpublishTemplate",o.EditPublishSettings="EditPublishSettings",o.Publish="Publish",o.UpdatePublishedTemplate="UpdatePublishedTemplate",o.Share="Share",(a=u||(u={})).Fork="Fork",a.Delete="Delete",a.Unpublish="Unpublish",a.UnpublishTemplate="UnpublishTemplate",a.EditPublishSettings="EditPublishSettings";var rN=n(15457),rO=n(9975);function rU(e){var t=e.repl,n=(0,w.Z)(),r=(0,v.useMemo)(function(){if(t.org){var e;return{text:t.org.name,css:[{"&, & span":G.l0.flex.shrink(1)}],iconLeft:(0,p.tZ)(rv.q,{src:null!==(e=t.org.image)&&void 0!==e?e:null,username:t.org.name,fullName:t.org.name,size:24})}}return t.user?{text:t.user.username,css:[{"&, & span":G.l0.flex.shrink(1)}],iconLeft:(0,p.tZ)(rv.q,{src:t.user.image,username:t.user.username,size:24})}:{text:""}},[t]);if(!t.user||!t.org&&!t.user)return null;var i=t.org?(0,rN._Q)(t.org).repls:(0,rg.Ru)(t.user),o=t.org?(0,rN._Q)(t.org).repls.href.toString():(0,rg.Ru)(t.user).as;return n?(0,p.tZ)(eq.zx,(0,f._)((0,d._)({},r),{onClick:function(){rZ.X.openExternalUrl(o)}})):(0,p.tZ)(tn.Z,(0,f._)((0,d._)({},r,i),{prefetch:!1}))}function rM(e){var t,n,r=e.setActiveDialog,i=e.repl,o=e.isTemplate,a=e.updateIconUrl,l=e.showCloseButton,c=e.setIsEditing,u=e.updateReplInfo,m=(0,rL.Z)(),g=!!i.publishedAs,b=(0,h._)((0,v.useState)(!1),2),Z=b[0],x=b[1],C=(0,w.Z)(),_=!!i.org&&i.org.type===j.a4.Team,S=(0,y.g)().fork,k=(0,rP.J)(),E=(0,v.useCallback)(function(){var e;if(!(null===(e=i.org)||void 0===e?void 0:e.id)||k.loading){S();return}if(k.isEligibleForProject&&!k.hasProject){x(!0);return}S()},[i,S,k]),I=[];i.authorizations.fork.isAuthorized&&I.push({value:"Fork",label:"Fork",icon:(0,p.tZ)(rw.Z,{})});var B=i.authorizations.publish.isAuthorized;if(!C&&!m&&!_){var A=i.isPrivate||!i.isRenamed||!B,P="";i.isPrivate?P="Make Repl public to publish":i.isRenamed||(P="Rename Repl to publish"),null==i.publishedAs&&I.push({value:s.Publish,label:"Publish as Template",icon:(0,p.tZ)(rO.Z,{}),isDisabled:A,description:P,dataCy:"repl-info-header-settings-publish"}),i.publishedAs!==j.O2.RegularRepl||A||I.push({value:s.Unpublish,label:"Unpublish",icon:(0,p.tZ)(rb.Z,{})}),o&&!A&&I.push({value:s.UnpublishTemplate,label:"Unpublish template",icon:(0,p.tZ)(rb.Z,{})}),g&&!A&&I.push({value:s.EditPublishSettings,label:"Edit template publish settings",icon:(0,p.tZ)(rs.Z,{})})}return i.authorizations.deleteRepl.isAuthorized&&I.push({isDestructive:!0,value:s.DeleteRepl,label:"Delete",icon:(0,p.tZ)(t0.Z,{})}),(0,p.BX)(D.G,{css:[G.l0.colWithGap(8),G.l0.p(8)],children:[(0,p.BX)(D.G,{css:[G.l0.rowWithGap(8),G.l0.align.center,G.l0.justify.spaceBetween,(0,T._)({},G.BC.max("mobileMax"),[G.l0.flex.columnReverse,G.l0.align.start,{gap:G.TV.space8}])],children:[(0,p.BX)(D.G,{css:[G.l0.rowWithGap(8),G.l0.center,G.l0.flex.shrink(1)],children:[(0,p.tZ)(rU,{repl:i}),i.authorizations.editMetadata.isAuthorized&&o?(0,p.tZ)(rm,{value:i.iconUrl,onChange:a}):null]}),(0,p.BX)(D.G,{css:[G.l0.align.center,G.l0.rowWithGap(8),(0,T._)({},G.BC.max("mobileMax"),{width:"100%",">*:not(div)":{flex:1}})],children:[C?null:(0,p.tZ)(tn.Z,(0,f._)((0,d._)({prefetch:!1},(0,te.j3)(i)),{iconLeft:(0,p.tZ)(ry.Z,{}),colorway:"primary",text:"Cover page",target:"_blank",style:{pointerEvents:"auto"}})),o||C||m||_?null:(0,p.tZ)(eY.u,{tooltip:"Make Repl public to share",isDisabled:!i.isPrivate,children:(0,p.tZ)(eq.zx,{type:"button",iconLeft:(0,p.tZ)(t1.Z,{}),onClick:function(){r(s.Share)},text:"Share",disabled:i.isPrivate})}),o&&!C?(0,p.tZ)(eq.zx,{type:"button",iconLeft:(0,p.tZ)(t1.Z,{}),onClick:function(){return r(s.UpdatePublishedTemplate)},text:"Publish changes"}):null,C?(0,p.tZ)(ta.q,{textToCopy:window.location.href,tooltipText:"Copy Repl URL",tooltipSuccessText:"Copied!",iconLeft:(0,p.tZ)(rC.Z,{}),text:""}):null,I.length>0&&(0,p.tZ)(rx.ZE,{dataCy:"repl-info-header-settings",trigger:(0,p.tZ)(t$.hU,{alt:"Repl settings",size:32,children:(0,p.tZ)(r_.Z,{size:16})}),"aria-label":"Repl settings",onAction:function(e){switch(e){case"Fork":E();return;case s.Unpublish:r(s.Unpublish);return;case s.UnpublishTemplate:r(s.UnpublishTemplate);return;case s.DeleteRepl:r(s.DeleteRepl);return;case s.EditPublishSettings:r(s.EditPublishSettings);return;case s.Publish:r(s.Publish);return}},children:I.map(function(e){return(0,p.tZ)(rx.sN,{id:e.value,label:e.label,icon:e.icon,isDestructive:e.isDestructive,isDisabled:e.isDisabled,description:e.description,dataCy:e.dataCy},e.value)})}),l?(0,p.tZ)(t$.hU,{alt:"Close",tooltipBehavior:"hidden",onClick:function(){u(),c(!1)},children:(0,p.tZ)(t7.Z,{})}):null]})]}),(null===(t=i.org)||void 0===t?void 0:t.type)===j.a4.Team&&(null===(n=i.user)||void 0===n?void 0:n.__typename)==="User"?(0,p.BX)(R.xv,{variant:"small",color:"dimmest",children:["Created by @",i.user.username]}):null,i.lastPublishedAt&&B?(0,p.BX)(R.xv,{variant:"small",color:"dimmest",multiline:!1,children:["Last published on"," ",new Date(i.lastPublishedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}):null,Z&&i.org?(0,p.tZ)(tK.u,{isOpen:!0,onRequestClose:function(){return x(!1)},children:(0,p.tZ)(rA,{repl:i,org:i.org,onRequestClose:function(){return x(!1)},onForkSeparately:S})}):null]})}var rX=(0,eB.X)({loadingRoot:[G.l0.center,G.l0.p(16)],root:{overflow:"auto",maxHeight:"80vh",".icon-container":[G.l0.display.flex,G.l0.align.center,G.l0.px(4)],form:G.l0.p(8)}});function rF(e){var t=e.getDesktopLayoutState,n=e.setIsEditing,r=e.showCloseButton,i=e.onDeployClick,o=(0,C.Z)(),a=(0,rl.BZ)({variables:{replId:o}}).data,l=(null==a?void 0:a.repl.__typename)==="Repl"?a.repl:null;return l?(0,p.tZ)(rW,{getDesktopLayoutState:t,setIsEditing:n,showCloseButton:r,repl:l,onDeployClick:i}):(0,p.tZ)(D.G,{css:rX.loadingRoot,children:(0,p.tZ)(B.Z,{})})}function rW(e){var t,n,r,i=e.repl,o=e.getDesktopLayoutState,a=e.showCloseButton,l=e.setIsEditing,c=e.onDeployClick,u=(0,ra.useRouter)(),C=(0,w.Z)(),T=(0,h._)((0,v.useState)(null),2),I=T[0],B=T[1],A=(0,h._)((0,v.useState)(i.isRenamed?i.title:""),2),P=A[0],L=A[1],N=(0,h._)((0,v.useState)(i.description||""),2),O=N[0],U=N[1],M=(0,h._)((0,v.useState)(i.rawTemplateLabel),2),X=M[0],F=M[1],W=(0,x.Z)().showError,H=i.publishedAs===j.O2.Template,V=i.authorizations.editVisibility.isAuthorized||i.authorizations.editVisibility.code===j.RO.RequiresActiveSubscription;(0,v.useEffect)(function(){U(i.description||"")},[i.description]);var z=(0,E.Z)(),q=(0,v.useRef)(i),J=(0,h._)((0,rl.ap)({variables:{id:i.id},onCompleted:function(){if(C){u.push("/desktopApp/home");return}u.push("/home","/~")},update:function(e,t){var n;(null===(n=t.data)||void 0===n?void 0:n.deleteRepl)&&(e.evict({id:e.identify(t.data.deleteRepl)}),e.gc())},onError:function(e){return W((0,_.Z)(e.message))}}),2),Y=J[0],$=J[1].loading,K=(0,h._)((0,rl.vi)({onError:function(e){return W((0,_.Z)(e.message))},onCompleted:function(e){var t=e.updateRepl.repl,n=q.current,r={};n.description!==t.description&&(r.description=t.description),n.title!==t.title&&(r.title=t.title),n.url!==t.url&&(r.url=t.url,u.push({pathname:z,query:{replUrl:t.url}},t.url+window.location.search+window.location.hash)),n.isRenamed!==t.isRenamed&&(r.isRenamed=!!t.isRenamed),q.current=i,Object.keys(r).length>0&&l(!1)}}),2),Q=K[0],ee=K[1].loading,et=(0,h._)((0,rl.gF)({variables:{input:{replId:i.id}},onError:function(e){m.Tb(e),W((0,_.Z)(e.message))}}),2),en=et[0],er=et[1],ei=(0,v.useMemo)(function(){return!!P&&P!==i.title||X!==i.rawTemplateLabel||(""!==O||!!i.description)&&O!==i.description},[i,P,O,X]),eo=(0,Z.Z)(ei),ea=(0,v.useCallback)(function(){ei&&Q({variables:{input:{id:i.id,title:P.trim()||i.title,description:O,templateLabel:i.authorizations.editTemplateMetadata.isAuthorized?X:void 0}}})},[ei,Q,i,P,O,X]),el=(0,Z.Z)(ea);(0,v.useLayoutEffect)(function(){return function(){eo.current&&el.current()}},[el,eo]);var ec=function(){Q({variables:{input:{id:i.id,isPrivate:!i.isPrivate}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,f._)((0,d._)({},i),{isPrivate:!i.isPrivate})}}}),(0,k.j)(k.U3.PRIVATE_TOGGLED,{enabled:!i.isPrivate,source:"workspace_info_modal"})},es=i.isRenamed?"Name your Repl":"Default name: ".concat(i.title),eu=[j.Sy.Submit,j.Sy.PublishTemplate,j.Sy.EditTemplate].includes(i.workspaceCta),ed=(0,tR.U)(),ef=(null===(t=i.owner)||void 0===t?void 0:t.__typename)==="Team",eh=i.authorizations.viewDeploymentConfig.isAuthorized&&"function"==typeof c,ep="/replEnvironmentDesktop"===z&&eh,em=(null===(n=i.hostingDeployment)||void 0===n?void 0:n.__typename)==="HostingDeployment"&&i.hostingDeployment.currentBuild;return(0,p.BX)("div",{css:rX.root,"data-can-change-description":i.authorizations.editMetadata.isAuthorized,children:[(0,p.tZ)(y.b,{forkParams:{trackingData:{forkSource:"editReplPopoverMenuItem"}},repl:i,teamContext:null===(r=i.user)||void 0===r?void 0:r.username,children:(0,p.tZ)(rM,{repl:i,isTemplate:H,showCloseButton:a,setActiveDialog:B,setIsEditing:l,updateIconUrl:function(e){return Q({variables:{input:{id:i.id,iconUrl:e}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,f._)((0,d._)({},i),{iconUrl:e})}}})},updateReplInfo:ea})}),(0,p.tZ)("form",{onSubmit:function(e){e.preventDefault(),ea()},children:(0,p.BX)(D.G,{css:[G.l0.align.stretch,G.l0.colWithGap(16)],children:[(0,p.BX)(eF.Tg,{background:"default",css:[G.l0.colWithGap(16)],children:[(0,p.tZ)(D.G,{css:[G.l0.flex.column],children:(0,p.BX)(D.G,{css:[G.l0.colWithGap(4)],children:[(0,p.BX)(D.G,{css:[G.l0.flex.row,G.l0.justify.spaceBetween,G.l0.align.end],children:[(0,p.tZ)("label",{htmlFor:ed("name"),children:(0,p.tZ)(R.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Name"})}),(0,p.tZ)(b.Z,{maxLength:60,value:P,hideLabel:!0})]}),(0,p.tZ)(tv.II,{style:{cursor:i.authorizations.editMetadata.isAuthorized?"auto":"not-allowed"},disabled:!i.authorizations.editMetadata.isAuthorized,maxLength:60,placeholder:es,value:P,onChange:function(e){return L(e.target.value)},spellCheck:!1,id:ed("name"),dataCy:"ws-repl-info-title-input"})]})}),(0,p.tZ)(D.G,{css:[G.l0.flex.column],children:(0,p.BX)(D.G,{css:[G.l0.colWithGap(4)],children:[(0,p.BX)(D.G,{css:[G.l0.flex.row,G.l0.justify.spaceBetween,G.l0.align.end],children:[(0,p.tZ)("label",{htmlFor:ed("description"),children:(0,p.tZ)(R.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Description"})}),(0,p.tZ)(b.Z,{maxLength:n9.p,value:O,hideLabel:!0})]}),(0,p.tZ)(tv.B,{onKeyDown:function(e){13===e.keyCode&&(e.ctrlKey||e.metaKey)},disabled:!i.authorizations.editMetadata.isAuthorized,maxLength:n9.p,value:O,onChange:function(e){return U(e.target.value)},placeholder:"What does this Repl do?",css:[G.l0.minHeight(96),G.l0.maxHeight(256),{resize:"vertical"}],id:ed("description")})]})})]}),H&&i.authorizations.editTemplateMetadata.isAuthorized?(0,p.tZ)(eF.Tg,{background:"default",css:[G.l0.colWithGap(4)],children:(0,p.BX)(D.G,{css:[G.l0.colWithGap(4)],children:[(0,p.tZ)("label",{htmlFor:ed("template"),children:(0,p.tZ)(R.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Template label"})}),(0,p.tZ)(tv.II,{value:X,maxLength:60,placeholder:"Template label",spellCheck:!1,onChange:function(e){return F(e.target.value)},id:ed("template")})]})}):null]})}),eu?null:(0,p.BX)(D.G,{css:[G.l0.colWithGap(24),G.l0.p(8),G.l0.pt(0)],children:[V?(0,p.BX)(D.G,{css:[G.l0.colWithGap(8)],children:[(0,p.BX)(rt.hE,{tag:"fieldset",name:ed("privacy"),value:i.isPrivate.toString(),onChange:function(){if(!ee){(0,k.j)(k.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"private",setting:!i.isPrivate,source:"workspace_info_modal"});var e,t=!i.isPrivate;if(i.authorizations.editVisibility.isAuthorized||!1===t){ec();return}i.authorizations.editVisibility.code===j.RO.RequiresActiveSubscription&&(null===(e=i.org)||void 0===e?void 0:e.__typename)!=="Org"?B(s.PowerUp):W(i.authorizations.editVisibility.message)}},row:!0,primary:!0,stretch:!0,children:[(0,p.tZ)(rt.rK,{id:ed("false"),value:"false",text:"Public",icon:(0,p.tZ)(rr.Z,{})}),(0,p.tZ)(rt.rK,{id:ed("true"),value:"true",text:"Private",icon:(0,p.tZ)(ri.Z,{})})]}),(0,p.tZ)(R.xv,{variant:"small",color:"dimmest",children:(0,S.Z)(i.isPrivate,ef)})]}):null,ep?(0,p.tZ)(D.G,{css:G.l0.colWithGap(8),children:(0,p.tZ)(eq.zx,{text:em?"Redeploy your project":"Deploy your project",iconLeft:(0,p.tZ)(rn.Z,{}),colorway:em?void 0:"primary",onClick:function(){c(),em||(0,k.j)(k.U3.DEPLOY_PROJECT_SELECTED,{source:"workspace_info_modal"})}})}):null]}),(0,p.tZ)(re.Z,{isOpen:I===s.DeleteRepl,onClose:function(){return B(null)},selectedRepls:[i],onDelete:function(){Y()},deleting:$}),(0,p.tZ)(ro.Z,{isOpen:I===s.PowerUp,onClose:function(){return B(null)},type:"purchase",analyticsContext:{upgrade:{context:"workspace_info_modal"}}}),(0,p.tZ)(tK.u,{isOpen:I===s.Unpublish,onRequestClose:function(){return B(null)},children:(0,p.tZ)(n7.Z,{repl:i,source:"replEnvironment",onDone:function(){B(null)}})}),(0,p.tZ)(tK.u,{isOpen:I===s.UnpublishTemplate,onRequestClose:function(){return B(null)},children:(0,p.tZ)(g.Z,{confirmLabel:"Yes, unpublish this Template",isDestructive:!0,title:"Unpublish Template",onCancel:function(){return B(null)},onConfirm:function(){er.loading||(en(),B(null))},children:"Your Repl will no longer be discoverable on Templates. You can republish again at any time, and all of your comments or reactions will stick around."})}),(0,p.tZ)(tK.u,{isOpen:I===s.EditPublishSettings,onRequestClose:function(){return B(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,p.tZ)(nU,{source:"replEnvironment",replId:i.id,getDesktopLayoutState:o})}),(0,p.tZ)(tK.u,{isOpen:I===s.Publish,onRequestClose:function(){return B(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,p.tZ)(nU,{source:"replEnvironment",replId:i.id,getDesktopLayoutState:o})}),(0,p.tZ)(tK.u,{isOpen:I===s.UpdatePublishedTemplate,onRequestClose:function(){return B(null)},noPadding:!0,children:(0,p.tZ)(n3,{repl:i,getDesktopLayoutState:o})}),(0,p.tZ)(tK.u,{isOpen:I===s.Share,onRequestClose:function(){return B(null)},noPadding:!0,children:(0,p.tZ)(tl,{repl:i})})]})}},9756:function(e,t,n){n.d(t,{s:function(){return l}});var r=n(21262),i=n(71440),o=n(18442);function a(){var e=(0,r._)(["\n  fragment WorkspaceHeaderReplMetadataRepl on Repl {\n    id\n    title\n    iconUrl\n    user {\n      id\n      ...UserLinkUser\n    }\n    org {\n      id\n      name\n      image\n      slug\n      type\n    }\n    project {\n      id\n      title\n    }\n  }\n  ","\n"]);return a=function(){return e},e}var l=(0,i.Ps)(a(),o._)},69940:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(42516),i=n(4216),o=n(72333),a=n(82230),l=n(94778),c=n(49224),s=n(72093),u=n(8775),d=n(20856),f=n(64432),h=(0,c.X)({metadata:[s.l0.rowWithGap(6),s.l0.align.center,s.l0.flex.growAndShrink(1)],iconWrapper:[s.l0.position.relative,s.l0.display.none,(0,r._)({},s.BC.min("tabletMax"),[s.l0.display.flex])],dimIcon:[{opacity:.2}],diconnectedIcon:[s.l0.position.absolute,{left:0,right:0,top:0,bottom:0,margin:"auto"}],title:[s.l0.flex.shrink(1),s.l0.truncate]});function p(e){var t=e.repl,n=(0,u.Z)().didDisconnect;return(0,i.BX)(l.G,{css:h.metadata,children:[(0,i.BX)(l.G,{css:h.iconWrapper,children:[(0,i.tZ)(l.G,{css:n&&h.dimIcon,children:(0,i.tZ)(o.ZP,{iconUrl:t.iconUrl,size:20,alt:""})}),n?(0,i.tZ)(f.u,{tooltip:"Reconnecting",children:(0,i.tZ)(d.Z,{size:16,css:h.diconnectedIcon})}):null]}),(0,i.tZ)(a.xv,{multiline:!1,css:h.title,"data-cy":"header-repl-title",color:n?"dimmer":"default",children:t.title})]})}},8362:function(e,t,n){n.d(t,{ZP:function(){return ee},L7:function(){return Q}});var r,i,o,a=n(27387),l=n(42516),c=n(41733),s=n(30509),u=n(66626),d=n(96583),f=n(4216),h=n(77450),p=n(43182),m=n(17198),v=n(83805),g=n(22750),y=n(29547),b=n(21262),w=n(71440),Z=n(58995);function x(){var e=(0,b._)(["\n  query CelebrateReplRunCurrentUser {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return x=function(){return e},e}var C={},_=(0,w.Ps)(x()),S=new Date("2022-07-08"),k=(0,y.O4)("useCelebrateFirstReplPlay",!1),E=n(69170),T=n(39271),R=n(36556),D=n(38172),I=n(60305),B=n(82230),G=n(64432),A=n(60772),P=n(29318),L=n(80888),N=n(61114),O=n(72093),U=n(45929),M=n(98674),X=n(37058),F=n(50959);function W(){var e=(0,b._)(["\n  query WorkspaceRunButton($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        title\n        rootOriginReplUrl\n        source {\n          release {\n            id\n            repl {\n              id\n              title\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n"]);return W=function(){return e},e}var H={},V=(0,w.Ps)(W()),z=n(21822),j=n(57704);function q(e){var t=e.runState,n=e.size,r=void 0===n?16:n;switch(t){case U.Ah.IDLE:return(0,f.tZ)(L.Z,{size:r});case U.Ah.RUNNING:return(0,f.tZ)(N.Z,{size:r});default:return(0,f.tZ)(P.Z,{size:r})}}var J=(r={},(0,l._)(r,U.Ah.IDLE,"Run"),(0,l._)(r,U.Ah.RUNNING,"Stop"),(0,l._)(r,U.Ah.STOPPING,"Stopping"),(0,l._)(r,U.Ah.OFFLINE,"Working"),(0,l._)(r,U.Ah.BEFORE_RUN,"Working"),r),Y=(i={small:48,large:85},(0,l._)(i,U.Ah.IDLE,68),(0,l._)(i,U.Ah.RUNNING,72),(0,l._)(i,U.Ah.STOPPING,92),(0,l._)(i,U.Ah.OFFLINE,86),(0,l._)(i,U.Ah.BEFORE_RUN,86),i),$=(0,h.iv)([O.l0.py(12),O.l0.width(Y.small),O.l0.flex.row,O.l0.center,O.l0.borderRadius(),O.l0.backgroundColor.accentPositiveDimmest,O.l0.color.accentPositiveStrongest,O.l0.cursor.pointer,O.l0.focusRing,(o={transition:"color 0.2s ease 0s, background-color 0.2s ease 0s",border:"1px solid",borderColor:"transparent",lineHeight:1,outline:"0 none","&:hover":[{color:"white"},O.l0.backgroundColor.accentPositiveDefault],"&:active":[{borderColor:O.TV.accentPositiveStrongest}]},(0,l._)(o,(0,M.et)("tabletMax"),[O.l0.width(Y.large)]),(0,l._)(o,":focus-visible",{outlineColor:"".concat(O.TV.accentPositiveStrongest)}),o)]),K=(0,h.iv)([O.l0.color.foregroundDimmer,O.l0.backgroundColor.backgroundHigher,{borderColor:"transparent","&:hover":[{color:"white"},O.l0.backgroundColor.backgroundHighest],"&:active":[{borderColor:O.TV.accentPrimaryDefault}]}]);function Q(e){var t=(0,u._)((0,F.useState)(e.getRunState()),2),n=t[0],r=t[1];return(0,F.useEffect)(function(){return r(e.getRunState()),e.onStateChanged(function(e){r(e)})},[e]),n}var ee=F.forwardRef(function(e,t){var n,r,i,o,h,y,b,w,x,P,L,N,W,ee=e.runner,et=e.onRunInitiated,en=e.style,er=e.disableTooltip,ei=e.shortcut,eo=(0,z.s2)(),ea=(0,T.Z)(),el=Q(ee),ec=(0,F.useMemo)(function(){if(!eo||el===U.Ah.OFFLINE)return el;switch(eo.step){case j.KX.RUNNING:return U.Ah.RUNNING;case j.KX.FAILED:case j.KX.FINISHED:default:return U.Ah.IDLE}},[el,eo]),es=(n=(0,c._)({},H,{variables:{id:ea}}),Z.a(V,n)).data,eu=(null==es?void 0:es.repl.__typename)==="Repl"?es.repl:null,ed=(r=(0,c._)({},C,void 0),h=Z.a(_,r),y=(0,m.Gn)("extraDelight").preferences.extraDelight,b=(0,v.$0)().fireCircularBurstFrom,x=(w=(0,u._)((0,g.KO)(k),2))[0],P=w[1],L=null!==(o=null===(i=h.data)||void 0===i?void 0:i.currentUser)&&void 0!==o?o:null,N=!x&&L&&new Date(L.timeCreated)>=S,{hasCelebrated:x,celebrate:function(e){if(!e){p.Tb(Error("Cannot find element for celebrate Repl run confetti"));return}(y||N)&&b({element:e}),N&&P(!0)}}).celebrate,ef=ec!==U.Ah.IDLE&&ec!==U.Ah.RUNNING,eh=(0,E.Z)().showError,ep=(0,F.useRef)(null),em=(W=(0,a._)(function(){var e,t,n,r,i,o,a,l;return(0,d.Jh)(this,function(c){switch(c.label){case 0:if(c.trys.push([0,5,,6]),ec!==U.Ah.IDLE)return[3,4];if(et&&et(),ep.current&&ed(ep.current),!(null==eo?void 0:eo.run))return[3,1];return eo.run(),[3,3];case 1:return[4,ee.run()];case 2:c.sent(),c.label=3;case 3:return eu&&(0,I.j)(I.U3.PROJECT_RAN,{placement:"primary_btn",replId:eu.id,replTitle:eu.title,rootOriginReplUrl:eu.rootOriginReplUrl,templateTitle:null===(n=eu.source)||void 0===n?void 0:null===(t=n.release)||void 0===t?void 0:null===(e=t.repl)||void 0===e?void 0:e.title,templateOwner:null===(a=eu.source)||void 0===a?void 0:null===(o=a.release)||void 0===o?void 0:null===(i=o.repl)||void 0===i?void 0:null===(r=i.owner)||void 0===r?void 0:r.username}),[2];case 4:if(ec===U.Ah.RUNNING){if(null==eo?void 0:eo.stop)return[2,eo.stop()];return[2,ee.stopRun()]}return[3,6];case 5:if(eh((l=c.sent()).toString()),R.kg.error("run button error",{errorMessage:l.message}),ec===U.Ah.RUNNING){if(null==eo?void 0:eo.stop)return[2,eo.stop()];return[2,ee.stopRun()]}return[3,6];case 6:return[2]}})}),function(){return W.apply(this,arguments)}),ev=ec===U.Ah.IDLE;return"inline-small"===(void 0===en?"default":en)?(0,f.BX)("button",{"data-cy":"ws-run-btn",onClick:em,ref:ep,disabled:ef,css:[O.l0.p(12),O.l0.flex.row,O.l0.center,O.l0.borderRadius(8),ev?O.l0.backgroundColor.accentPositiveDimmest:O.l0.backgroundColor.backgroundHigher,ev?O.l0.color.accentPositiveStronger:O.l0.color.foregroundDimmer,{border:"1px solid",borderColor:ev?O.TV.accentPositiveDimmest:O.TV.backgroundHigher},O.l0.width("100%"),O.l0.height("100%")],children:[(0,f.tZ)(q,{runState:ec}),(0,f.tZ)(B.xv,{variant:"subheadDefault",css:[O.l0.pl(8)],multiline:!1,children:J[ec]})]}):(0,f.tZ)(G.u,{placement:"bottom",isDisabled:er||!ei,tooltip:ei?(0,f.tZ)(X.bM,{keyCombo:ei,fontSize:12}):null,children:function(e,n){return(0,f.BX)("button",(0,s._)((0,c._)({},e),{onClick:em,ref:(0,D.l)(ep,n,t),css:[$,!ev&&K,O.l0.height(32),(0,l._)({transition:"width 80ms ease-out"},(0,M.et)("tabletMax"),O.l0.width(Y[ec]))],children:[(0,f.tZ)(q,{runState:ec,size:12}),(0,f.tZ)(B.xv,{multiline:!1,css:[O.l0.pl(6),O.l0.display.none,O.l0.fontWeight.medium,(0,l._)({lineHeight:1,overflow:"visible"},"@media (min-width: ".concat(A.j.tabletMax,"px)"),[O.l0.display.block])],children:J[ec]})]}))}})})},82496:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(41733),i=n(30509),o=n(98924),a=n(4216),l=n(85763),c=n(49224),s=n(72093),u=(0,c.X)({checked:[s.l0.backgroundColor.backgroundHigher],unchecked:[s.l0.color.foregroundDimmest]});function d(e){var t=e.alt,n=e.icon,c=e.checked,s=e.onClick,d=(0,o._)(e,["alt","icon","checked","onClick"]);return(0,a.tZ)(l.hU,(0,i._)((0,r._)({},d),{css:c?u.checked:u.unchecked,alt:"".concat(c?"Disable":"Enable"," ").concat(t),onClick:s,children:n}))}},54443:function(e,t,n){n.d(t,{Z:function(){return d}});var r,i=n(42516),o=n(4216),a=n(77450),l=n(64432),c=n(55821),s=n(72093),u=(0,a.iv)([s.l0.focusRing,s.l0.display.flex,s.l0.center,s.l0.borderRadius(4),s.l0.backgroundColor.backgroundRoot,s.l0.color.foregroundDefault,s.l0.cursor.pointer,s.l0.p(4),(r={transition:"background-color 0.2s",border:"none"},(0,i._)(r,s.wl.hover,[s.l0.backgroundColor.backgroundHigher]),(0,i._)(r,":focus",{outline:"none"}),r)]),d=function(e){var t=e.onClick;return(0,o.tZ)(l.u,{tooltip:"Clear",placement:"bottom-start",children:(0,o.tZ)("button",{"aria-label":"Clear",onClick:t,css:u,children:(0,o.tZ)(c.Z,{size:16})})})}},27345:function(e,t,n){n.d(t,{f:function(){return D}});var r,i=n(4216),o=n(59786),a=n(93873),l=n(27387),c=n(42516),s=n(66626),u=n(96583),d=n(43182),f=n(14872),h=n(39271),p=n(72658),m=n(19871),v=n(69880),g=n(50959),y=n(41733),b=n(21262),w=n(71440),Z=n(99165);function x(){var e=(0,b._)(["\n  mutation SyncReplGitState($input: UpdateReplGitStateInput!) {\n    updateReplGitState(input: $input) {\n      ... on Repl {\n        id\n      }\n    }\n  }\n"]);return x=function(){return e},e}var C={},_=(0,w.Ps)(x()),S=n(36647),k=(r={},(0,c._)(r,p.yG.CLEAN,"CLEAN"),(0,c._)(r,p.yG.DIRTY_INDEX,"DIRTY_INDEX"),(0,c._)(r,p.yG.DIRTY_WORKTREE,"DIRTY_WORKTREE"),r),E=function(e){var t;return null!==(t=k[e])&&void 0!==t?t:null},T=n(36097);function R(){var e,t,n,r,i,o,a,c,b,w,x,k,T;return e=(0,h.Z)(),n=(0,v.Z)((t=(0,l._)(function(e){var t,n,r,i;return(0,u.Jh)(this,function(o){switch(o.label){case 0:return[4,e.getRepositoryState()];case 1:if((t=o.sent()).error)return[2,t];if(n=t.type,r=null,n!==p.y5.NORMAL)return[2,{error:null,notNormal:!0}];return[4,e.status()];case 2:if((i=o.sent()).error)return[2,i];return[2,{branchName:null==(r=i)?void 0:r.branch,state:E(t.state),type:"NORMAL",error:null}]}})}),function(e){return t.apply(this,arguments)})),r=(0,S.Z)(function(){return n&&!n.error&&!n.notNormal&&n.branchName&&n.state?{lastBranch:n.branchName,state:n.state,type:n.type}:null},[n]),o=(null==(i=(0,f.Z)(r,1e3))?void 0:i.type)==="NORMAL",w=null!==(c=null==(b=(0,v.Z)((a=(0,l._)(function(e){var t;return(0,u.Jh)(this,function(n){switch(n.label){case 0:if(!o)return[2,{error:null,firstSha:null}];return[4,e.escapeHatchGitExecRead("git rev-list --max-parents=0 HEAD")];case 1:if((t=n.sent()).error)return[2,{error:t.error}];if(!t.output)return[2,{error:null,firstSha:null}];if(!/^[0-9a-f]{40}$/.test(t.output.trim()))return d.Tb(Error("useFirstCommitSha expected a 40 character sha, got: ".concat(t.output.trim()))),[2,{error:m.aq.UNKNOWN}];return[2,{error:null,firstSha:t.output.trim()}]}})}),function(e){return a.apply(this,arguments)}),[o]))?void 0:b.firstSha)&&void 0!==c?c:null,k=(0,s._)((x=(0,y._)({},C,void 0),Z.D(_,x)),1)[0],T=(0,g.useCallback)(function(t){return k({variables:{input:{replId:e,gitInfo:t}}})},[k,e]),(0,g.useEffect)(function(){(null==i?void 0:i.state)&&w&&T({version:1,lastBranch:i.lastBranch,state:i.state,type:i.type,firstCommitSha:w,aiSummary:null})},[null==i?void 0:i.lastBranch,null==i?void 0:i.state,null==i?void 0:i.type,w,T]),null}function D(){var e=(0,o.P5)({controlName:"flag-legacy-team-repo-features"}),t=(0,a.e)({controlName:T.r});return e||t?(0,i.tZ)(R,{}):null}},89578:function(e,t,n){n.d(t,{Z:function(){return W}});var r=n(66626),i=n(4216),o=n(8261),a=n(99236),l=n(82230),c=n(64432),s=n(4276),u=n(94778),d=n(72093),f=n(50959),h=n(38953),p=n(66403),m=n(59786),v=n(69170),g=n(80274),y=n(59947),b=n(55821),w=n(47336),Z=n.n(w),x=n(41733),C=n(21262),_=n(71440),S=n(62496),k=n(99165);function E(){var e=(0,C._)(["\n  mutation DeleteThreadMessage($id: String!) {\n    deleteThreadMessage(messageId: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return E=function(){return e},e}var T={},R=(0,_.Ps)(E(),S.j7),D=n(77865),I=n(17198),B=n(41753),G=n(50761),A=n(9100),P=n(42173),L=n(71253),N=n(66164),O=n(25462),U=n(77450),M=["a","pre","code","em","strong","p","ul","ol","li","img","del","h1","h2","h3","h4","h5","h6","sup","sub","br","hr","blockquote","span","div"],X=(0,f.memo)(function(e){var t=e.content,n=(0,I.Gn)("fontSize").preferences.fontSize,r=(0,f.useCallback)(function(e){return(0,i.tZ)(B.Z,(0,x._)({},e))},[]);return(0,i.tZ)("div",{css:[{"& ol":{paddingInlineStart:"20px"},"& ul":{paddingInlineStart:"20px",listStyle:"initial"}}],children:(0,i.tZ)(A.D,{css:(0,U.iv)({wordBreak:"break-word",boxSizing:"border-box",whiteSpace:"normal",lineHeight:1.5,color:d.TV.foregroundDefault,fontFamily:"".concat(d.TV.fontFamilyDefault," !important"),fontSize:n,textSizeAdjust:"100%","h1, h2, h3, h4, h5, h6":{color:d.TV.foregroundDefault,fontWeight:d.TV.fontWeightMedium,marginBottom:d.TV.space16,lineHeight:1.25,wordWrap:"break-word"},"h1, h2":{paddingBottom:d.TV.space8,borderBottom:"1px solid ".concat(d.TV.backgroundHigher),marginTop:d.TV.space32},h1:{fontSize:"2em"},h2:{fontSize:"1.5em"},h3:{fontSize:"1.25em",marginTop:d.TV.space24},h4:{fontSize:"1em",marginTop:d.TV.space16},h5:{fontSize:"0.875em"},h6:{color:d.TV.foregroundDimmer,fontSize:"0.85em"},".anchor":{float:"left",lineHeight:1,marginLeft:"calc(-1 * ".concat(d.TV.space16,")"),paddingRight:d.TV.space4},".anchor:focus":{outline:"none"},p:{marginBottom:d.TV.space16,fontSize:n,fontFamily:"".concat(d.TV.fontFamilyDefault," !important")},"p:last-child":{marginBottom:0},table:{borderSpacing:0,borderCollapse:"collapse",display:"block",width:"100%",overflow:"auto",marginBottom:d.TV.space16,wordBreak:"normal",th:{fontWeight:d.TV.fontWeightMedium},"td, th":{padding:"".concat(d.TV.space8," ").concat(d.TV.space12),border:"1px solid ".concat(d.TV.backgroundHighest),minWidth:"16ch"},tr:{backgroundColor:d.TV.backgroundDefault,borderTop:"1px solid ".concat(d.TV.backgroundHighest)},"tr:nth-of-type(2n)":{backgroundColor:d.TV.backgroundRoot}},"hr:after":{clear:"both"},"li > p":{marginBottom:0},li:{marginTop:d.TV.space4},dd:{marginLeft:0},"ol, ul":{paddingLeft:d.TV.space16,marginTop:0,marginBottom:0},ul:{listStyle:"initial",listStyleType:"disc",marginBottom:d.TV.space16},ol:{listStyle:"decimal",marginBottom:d.TV.space16},"ol ol, ol ul, ul ol, ul ul":{paddingLeft:d.TV.space16,marginTop:0,marginBottom:0,paddingBottom:0},"ul ul":{listStyleType:"circle"},"ul ul ul":{listStyleType:"square"},"ol ol, ul ol":{listStyleType:"lower-roman"},"ol ol ol, ol ul ol, ul ol ol, ul ul ol":{listStyleType:"lower-alpha"},pre:{fontFamily:"".concat(d.TV.fontFamilyCode," !important"),margin:"".concat(d.TV.space16," 0"),borderRadius:4,wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-wrap",color:d.TV.foregroundDefault},"pre:last-child":{marginBottom:"0 !important"},blockquote:{padding:"0 1em",marginBottom:d.TV.space16,borderLeft:"".concat(d.TV.space2," solid ").concat(d.TV.backgroundHighest),paddingLeft:d.TV.space16},"blockquote > *":{color:"".concat(d.TV.foregroundDimmer," !important")},"blockquote > :last-child":{marginBottom:"0 !important",borderBottom:"none !important"},"blockquote > :first-child":{marginTop:"0 !important"},kbd:{display:"inline-block",padding:"3px 5px",font:"11px ".concat(d.TV.fontFamilyCode),color:d.TV.foregroundDimmer,verticalAlign:"middle",backgroundColor:d.TV.backgroundHigher,border:"none",borderRadius:3,boxShadow:"inset 0 -1px 0 ".concat(d.TV.backgroundHighest)},a:{color:d.TV.accentPrimaryStronger,backgroundColor:"initial"},"> :first-child":{marginTop:"0 !important",paddingTop:"0 !important"},"> :last-child":{borderBottom:"none !important",marginBottom:"0 !important",paddingBottom:"0 !important"},'[type="checkbox"]':{boxSizing:"border-box",marginRight:d.TV.space8,padding:0},details:{marginBottom:d.TV.space16,display:"block",background:d.TV.backgroundHigher,borderRadius:d.TV.borderRadius4,padding:d.TV.space16},summary:{display:"list-item",userSelect:"none",cursor:"pointer",fontWeight:d.TV.fontWeightBold},"details[open] > summary":{borderBottom:"1px solid ".concat(d.TV.backgroundHighest),marginBottom:d.TV.space16,paddingBottom:d.TV.space16},hr:{height:1,backgroundColor:d.TV.backgroundHigher,margin:"".concat(d.TV.space24," 0"),border:0}}),allowedElements:M,remarkPlugins:[D.Ic,N.Z,O.Z,L.Z],linkTarget:"_blank",rehypePlugins:[P.Z],components:{code:r,img:G.Z},children:t})})}),F=n(65268),W=(0,f.memo)(function(e){var t,n=e.thread,w=e.message,C=(0,p.d)(),_=(0,v.Z)().showError,S=(0,r._)((t=(0,x._)({},T,{onError:function(e){_(e.message)},onCompleted:function(e){var t;(null===(t=e.deleteThreadMessage)||void 0===t?void 0:t.__typename)==="UserError"&&_(e.deleteThreadMessage.message)}}),k.D(R,t)),2),E=S[0],D=S[1].loading,I=(0,m.P5)({controlName:"flag-threads-dropdown-menu",default:!1,type:"boolean",logFlagToAnalytics:!1}),B=!!(n&&n.indexStart===n.indexEnd),G={statusBanner:{resolved:"Thread resolved. Re-open it any time in the inbox.",unresolved:"Thread re-opened"},outdated:"Outdated",outdatedTooltip:"The code has changed since the comment was left"},A=(0,f.useMemo)(function(){return{diff:(0,F.Y)(w.timeCreated),full:(0,F.u)(w.timeCreated)}},[w]);if(!w.user)return null;var P=C===w.user.id?[{label:"Delete",icon:(0,i.tZ)(b.Z,{}),isDestructive:!0}]:[];return(0,i.BX)(u.G,{children:[(0,i.BX)(u.G,{css:[d.l0.flex.row,d.l0.justify.spaceBetween,d.l0.pb(4)],children:[(0,i.BX)(u.G,{css:[d.l0.flex.row,d.l0.align.center,d.l0.rowWithGap(8)],children:[(0,i.tZ)(Z(),{legacyBehavior:!0,passHref:!0,href:"/@".concat(w.user.username),children:(0,i.tZ)("a",{children:(0,i.tZ)(s.n,{small:!0,src:w.user.image,username:w.user.username})})}),(0,i.tZ)("p",{children:(0,i.tZ)(c.u,{tooltip:A.full,placement:"top",children:(0,i.tZ)(l.xv,{variant:"small",color:"dimmer",multiline:!1,children:A.diff})})}),P.length>0&&I?(0,i.tZ)(h.Z,{items:P,onItemClick:function(e){"Delete"!==e.label||D||E({variables:{id:w.id}})},label:"More"}):null]}),B?(0,i.tZ)(c.u,{tooltip:G.outdatedTooltip,children:(0,i.tZ)(o.D,{colorway:"negative",text:G.outdated})}):null]}),"StatusMessageContentType"===w.content.__typename&&"resolved"===w.content.status?(0,i.tZ)(a.E,{colorway:"positive",icon:(0,i.tZ)(y.Z,{}),text:G.statusBanner.resolved}):null,"StatusMessageContentType"===w.content.__typename&&"unresolved"===w.content.status?(0,i.tZ)(a.E,{colorway:"primary",icon:(0,i.tZ)(g.Z,{}),text:G.statusBanner.unresolved}):null,"TextMessageContentType"===w.content.__typename&&(0,i.tZ)(X,{content:w.content.text})]})})},65268:function(e,t,n){n.d(t,{Y:function(){return o},u:function(){return a}});var r=n(10495),i=n(20597),o=function(e){var t=new Date(e),n=new Date;return 60>(0,i.Z)(n,t)?"just now":(0,r.F)(t,!0)+" ago"},a=function(e){return new Date(e).toLocaleString()}},91181:function(e,t,n){n.d(t,{AL:function(){return Z},GD:function(){return m},VO:function(){return p},Y:function(){return b},tT:function(){return g}});var r=n(41733),i=n(21262),o=n(71440),a=n(62496),l=n(58995),c=n(99165);function s(){var e=(0,i._)(["\n  query CodemirrorThread($id: String!) {\n    thread: annotationAnchor(id: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n    currentUser {\n      id\n      username\n      fullName\n      image\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation CreateThread(\n    $thread: AnnotationAnchorInput!\n    $message: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThread: createAnnotationAnchor(\n      annotationAnchor: $thread\n      annotationMessage: $message\n      highlight: $highlight\n    ) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  mutation UpdateThread($id: String!, $changes: AnnotationAnchorChangesInput!) {\n    updateThread: updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i._)(["\n  mutation CreateThreadMessage(\n    $replId: String!\n    $threadId: String!\n    $threadMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThreadMessage: createAnnotationMessage(\n      replId: $replId\n      anchorId: $threadId\n      annotationMessage: $threadMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var h={},p=(0,o.Ps)(s(),a.j7);function m(e){var t=(0,r._)({},h,e);return l.a(p,t)}var v=(0,o.Ps)(u(),a.j7);function g(e){var t=(0,r._)({},h,e);return c.D(v,t)}var y=(0,o.Ps)(d(),a.j7);function b(e){var t=(0,r._)({},h,e);return c.D(y,t)}var w=(0,o.Ps)(f(),a.j7);function Z(e){var t=(0,r._)({},h,e);return c.D(w,t)}},51727:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(41733),i=n(30509),o=n(66626),a=n(63257),l=n(62496),c=n(30470),s=n(91181),u=n(54534),d=n(69170),f=n(39271),h=n(36647),p=n(81199),m=n(24090),v=n(30826),g=n.n(v),y=n(50959),b=n(36054);function w(e,t){if(!e)return null;var n,r=e.state.field(b.OQ),i=e.state.field(b.ZS);return(null!==(n=r[t])&&void 0!==n?n:(null==i?void 0:i.id)===t?i:null)||null}function Z(e,t){if(!e)return null;var n=w(e,t);if(!n)return null;var r=Math.min(n.indexStart,n.indexEnd),i=Math.max(n.indexStart,n.indexEnd),o=e.state.doc.lineAt(r),a=e.state.doc.lineAt(i),l=e.state.doc.sliceString(e.state.doc.line(Math.max(o.number-2,1)).from,r),c=e.state.doc.sliceString(i,e.state.doc.line(Math.min(a.number+2,e.state.doc.lines)).to);return{precode:l,code:e.state.doc.sliceString(r,i),postcode:c}}function x(e,t,n){var v=(0,d.Z)().showError,x=(0,f.Z)(),C=(0,c.Z)().map(function(e){return e.username}),_=(0,p.Z)().fs,S=(0,s.GD)({variables:{id:e}}),k=S.data,E=S.error,T=S.loading,R=S.client,D=function(){if(T||!k){var n;return!!t&&(null===(n=t.state.field(b.ZS))||void 0===n?void 0:n.id)===e}return"AnnotationAnchor"!==k.thread.__typename}(),I=(0,y.useMemo)(function(){return T||!k?null:"UserError"===k.thread.__typename?{id:e,__typename:"AnnotationAnchor",messages:[],isGeneral:!1,isResolved:!1}:"AnnotationAnchor"===k.thread.__typename?k.thread:null},[k,e,T]),B=(0,o._)((0,s.tT)({onError:function(e){return v(e.message)},update:function(e,t){var n,r;if(t.errors){t.errors.forEach(function(e){return v(e.message)});return}if((null===(r=t.data)||void 0===r?void 0:null===(n=r.createThread)||void 0===n?void 0:n.__typename)==="UserError"){v(t.data.createThread.message);return}}}),1)[0],G=(0,o._)((0,s.AL)({onError:function(e){return v(e.message)},update:function(e,t){if(t.errors){t.errors.forEach(function(e){return v(e.message)});return}var n,r=null===(n=t.data)||void 0===n?void 0:n.createThreadMessage;r&&"UserError"===r.__typename&&v(r.message)}}),1)[0],A=(0,o._)((0,s.Y)({onError:function(e){return v(e.message)},update:function(e,t){if(t.errors){t.errors.forEach(function(e){return v(e.message)});return}var n,r=null===(n=t.data)||void 0===n?void 0:n.updateThread;r&&"UserError"===r.__typename&&v(r.message)}}),1)[0],P=(0,o._)((0,l.Hj)(),1)[0],L=(0,h.Z)(function(){return g()(P,1e3,{trailing:!1})},[P]),N=function(){var e=null==k?void 0:k.currentUser;return e?{user:{__typename:"User",id:e.id,username:e.username,fullName:e.fullName,image:e.image}}:{}};return{thread:I,isPlaceholder:D,error:E,loading:T,getHighlight:Z,getLatestAnchor:function(){return w(t,e)},updateThread:function(e){var t,n=e.changes,o=(null==k?void 0:null===(t=k.thread)||void 0===t?void 0:t.__typename)==="AnnotationAnchor"?k.thread:null;if(!o)throw Error("expected thread");A({variables:{id:o.id,changes:n},optimisticResponse:{__typename:"RootMutationType",updateThread:(0,i._)((0,r._)({},o,n),{isResolved:"boolean"==typeof n.isResolved?n.isResolved:o.isResolved})}})},finalizeThreadMessage:function(o){var l=o.message,c=o.messageId,d=(0,m.kW)(l,{users:(0,a._)(C).concat(["everyone"])}),f={id:c,text:l,mentions:d.mentions};if(D&&t&&n){var h=t.state.field(b.ZS),p={id:e,replId:x,indexStart:null==h?void 0:h.indexStart,indexEnd:null==h?void 0:h.indexEnd,otVersion:_.getOTVersion(n),path:n};B({variables:{thread:p,message:f,highlight:Z(t,e)},optimisticResponse:{__typename:"RootMutationType",createThread:(0,i._)((0,r._)({__typename:"AnnotationAnchor"},p,N()),{messages:[(0,i._)((0,r._)({id:c,timeCreated:new Date().toISOString(),currentUserIsAuthor:!0},N()),{content:{text:l,__typename:"TextMessageContentType"},anchor:{id:p.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],isResolved:!1,isGeneral:!1})}}),R.writeQuery({query:s.VO,variables:{id:e},data:{__typename:"RootQueryType",thread:(0,i._)((0,r._)((0,i._)((0,r._)({},p),{isResolved:!1,isGeneral:!1}),N()),{messages:[(0,i._)((0,r._)({id:c,timeCreated:new Date().toISOString(),currentUserIsAuthor:!0},N()),{content:{text:l,__typename:"TextMessageContentType"},anchor:{id:p.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],__typename:"AnnotationAnchor"}),currentUser:null==k?void 0:k.currentUser}});var v=R.readQuery({query:u.Jq,variables:{replId:x,path:n}});if(v){var g,y,w=(null===(y=v.threadsByFile)||void 0===y?void 0:y.__typename)==="ThreadsByFileResult"?v.threadsByFile.threads:[],S=N().user;R.writeQuery({query:u.Jq,variables:{replId:x,path:n},data:{__typename:"RootQueryType",threadsByFile:{__typename:"ThreadsByFileResult",threads:(0,a._)(w).concat([(0,r._)({messageCount:1,unreadCount:0,__typename:"AnnotationAnchor",isGeneral:!1,user:S,isResolved:!1,participants:[S]},p)])}}})}return}var E=(null==k?void 0:null===(g=k.thread)||void 0===g?void 0:g.__typename)==="AnnotationAnchor"?k.thread:null;if(!E)throw Error("expected thread");G({variables:{replId:x,threadId:E.id,threadMessage:f,highlight:Z(t,E.id)},optimisticResponse:{__typename:"RootMutationType",createThreadMessage:(0,i._)((0,r._)({},E),{messages:(0,a._)(E.messages.filter(function(e){return!e.id.startsWith("chat-")})).concat([(0,i._)((0,r._)({},N(),f),{content:{text:f.text,__typename:"TextMessageContentType"},anchor:{id:E.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:new Date().toISOString(),currentUserIsAuthor:!0,seen:!0})])})}})},changeThreadMessage:function(t){L({variables:{threadId:e,messageId:t.messageId,message:null}})}}}},54534:function(e,t,n){n.d(t,{Jq:function(){return s},eR:function(){return u}});var r=n(41733),i=n(21262),o=n(71440),a=n(58995);function l(){var e=(0,i._)(["\n  query ThreadsByFileHook($replId: String!, $path: String!) {\n    threadsByFile(replId: $replId, path: $path) {\n      ... on ThreadsByFileResult {\n        threads {\n          id\n          path\n          otVersion\n          indexStart\n          indexEnd\n          messageCount\n          unreadCount\n          user {\n            id\n            image\n            username\n          }\n          participants {\n            id\n            image\n            username\n          }\n          isGeneral\n          isResolved\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},s=(0,o.Ps)(l());function u(e){var t=(0,r._)({},c,e);return a.a(s,t)}},86858:function(e,t,n){n.d(t,{Z:function(){return eT}});var r=n(66626),i=n(4216),o=n(39271),a=n(85763),l=n(82230),c=n(94778),s=n(29318),u=n(29252),d=n(72093),f=n(85447),h=n(50959),p=n(74004),m=n(41733),v=n(30509),g=n(77450),y=n(40509),b=n(30124),w=(0,g.iv)(d.l0.width("100%"),d.l0.display.flex,d.l0.justify.center),Z=function(e){var t=e.onClick,n=e.hasTests;return(0,i.tZ)("div",(0,v._)((0,m._)({},n?{"aria-label":"Delete all tests to switch test type","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip"}:{}),{css:w,children:(0,i.tZ)(b.Z,{filled:!1,border:!1,size:"small",Icon:y.Z,onClick:t,disabled:n,children:"Switch test type"})}))},x=n(69170),C=n(60305),_=n(15235),S=n(85638),k=n(45271),E=n(80274),T=n(59947),R=n(27022),D=n(15434),I=n(80403),B=n(3030),G=n(62942),A=n(87502),P=(0,g.iv)({editor:[d.l0.position.absolute,d.l0.width("100%"),d.l0.height("100%"),{overflow:"auto",".loader":[d.l0.height("100%"),d.l0.width("100%"),d.l0.zIndex(5)]}]}),L=I.q6.define();function N(e){var t=e.editorRef,n=e.onChange,r=e.placeholder,o=e.skeleton,a=e.language,l=e.skeletonClosingBracket,c=e.indentSize,s=(0,A.Z)(),u=s.ref,d=s.view,f=(0,h.useRef)(o?"".concat(o,"\n"):""),p=l?"\n".concat(l):"",m=" ".repeat(void 0===c?2:c);return(0,h.useEffect)(function(){if(d&&d.state.doc.length){var e=f.current;f.current=o?"".concat(o,"\n"):"",d.dispatch({changes:{from:0,to:e.length-1,insert:o},annotations:[I.YW.addToHistory.of(!1),L.of(!0)]})}},[d,o]),(0,h.useEffect)(function(){if(d){var e=I.yy.changeFilter.of(function(e){return!!e.annotation(L)||[-1,f.current.length,e.startState.doc.length-p.length,e.startState.doc.length+1]}),i=B.tk.updateListener.of(function(e){var t=e.state.doc.slice(f.current.length,e.state.doc.toString().length-p.length).toString();if(t!=="".concat(m).concat(r,"\n").concat(m)?n(t):n(""),e.docChanged&&e.state.doc.length===f.current.length+p.length){var i="\n"+m;d.dispatch({changes:{from:f.current.length-1,insert:"\n"+m},selection:{anchor:f.current.length+i.length-1},annotations:[L.of(!0)]})}}),o="".concat(f.current).concat(m).concat(r,"\n").concat(p);d.dispatch({changes:{from:0,to:d.state.doc.length,insert:o},effects:I.Py.appendConfig.of([e,i]),selection:{anchor:o.length},annotations:I.YW.addToHistory.of(!1)}),t({setValue:function(e){if(e){var t=d.state.doc.toString().length;d.dispatch({changes:{from:f.current.length,to:t-p.length,insert:e},annotations:I.YW.addToHistory.of(!1)})}},focus:function(){return d.focus()}})}},[n,a,d,p,t,r,m]),(0,i.tZ)("div",{css:P,children:(0,i.tZ)(G.ZP,{ref:u,language:a,indentSize:2,fontSize:14,indentIsSpaces:!0})})}var O=n(22529),U=n(72604);function M(e){var t,n,a,s,u=e.isOpen,f=e.meta,p=e.language,g=e.hasMetadata,y=e.onClose,b=(0,o.Z)(),w=(0,x.Z)().showConfirm,Z=(0,r._)((0,h.useState)(null),2),S=Z[0],E=Z[1],D=(0,r._)((0,h.useState)(!0),2),I=D[0],B=D[1],G=(0,r._)((0,h.useState)((null==f?void 0:f.initialization)||""),2),A=G[0],P=G[1],L=(0,r._)((0,h.useState)((null==f?void 0:f.imports)||""),2),N=L[0],M=L[1],V=(0,r._)((0,h.useState)((null==f?void 0:f.setup)||""),2),z=V[0],j=V[1],q=(0,r._)((0,h.useState)((null==f?void 0:f.tearDown)||""),2),J=q[0],Y=q[1],$=(0,r._)((0,U.rU)({onError:function(e){return E(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTestMeta;r&&("UserError"===r.__typename?E(r.message):"ReplUnitTestMeta"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:b}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:U.aA});return t?(0,v._)((0,m._)({},t),{meta:(0,m._)({},n)}):{__typename:"ReplUnitTestsWithMeta",meta:n,tests:[]}}}}),w("Setup saved!"),y()))}}),2),K=$[0],Q=$[1],ee=(0,r._)((0,U.AF)({onError:function(e){return E(e.message)},onCompleted:function(e){var t=e.updateReplUnitTestMeta;t&&("UserError"===t.__typename?E(t.message):"ReplUnitTestMeta"===t.__typename&&(w("Imports updated!"),y()))}}),2),et=ee[0],en=ee[1],er=(0,O.x)(p),ei=N!==(null==f?void 0:f.imports)||A!==(null==f?void 0:f.initialization)||z!==(null==f?void 0:f.setup)||J!==(null==f?void 0:f.tearDown),eo=Q.loading||en.loading;return(0,i.tZ)(k.u,{isOpen:u,onRequestClose:y,maxWidth:872,children:(0,i.BX)(c.G,{css:[d.l0.colWithGap(24)],children:[(0,i.tZ)(l.h4,{level:1,variant:"headerDefault",children:"Setup"}),(0,i.tZ)(X,{unitTestsLib:er,onChange:M,language:p,initialValue:null!==(t=null==f?void 0:f.imports)&&void 0!==t?t:""}),(0,i.tZ)(c.G,{onClick:function(){return B(!I)},css:{cursor:"pointer"},children:(0,i.BX)(c.G,{css:[d.l0.rowWithGap(8),d.l0.align.center],children:[(0,i.tZ)(l.h4,{level:2,variant:"headerDefault",children:"Advanced"}),(0,i.tZ)(R.Z,{color:"var(--foreground-default)",size:20,rotate:I?270:0})]})}),I?null:(0,i.BX)(c.G,{css:[d.l0.colWithGap(8)],children:[(0,i.tZ)(F,{unitTestsLib:er,onChange:P,language:p,initialValue:null!==(n=null==f?void 0:f.initialization)&&void 0!==n?n:""}),(0,i.tZ)(W,{unitTestsLib:er,onChange:j,language:p,initialValue:null!==(a=null==f?void 0:f.setup)&&void 0!==a?a:""}),(0,i.tZ)(H,{unitTestsLib:er,onChange:Y,language:p,initialValue:null!==(s=null==f?void 0:f.tearDown)&&void 0!==s?s:""})]}),(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.justify.spaceBetween],children:[(0,i.tZ)(l.xv,{css:[d.l0.color.accentNegativeStronger],children:S}),(0,i.BX)(c.G,{css:[d.l0.rowWithGap(12)],children:[(0,i.tZ)(_.zx,{disabled:eo,onClick:y,text:"Cancel"}),(0,i.tZ)(_.zx,{colorway:"primary",disabled:!ei||eo,onClick:function(){(0,C.j)(C.U3.REPL_UNIT_TEST_USED,{action:"modifiedSetup"}),g?et({variables:{input:{initialization:A,imports:N,setup:z,tearDown:J,replId:b}}}):K({variables:{input:{initialization:A,imports:N,setup:z,tearDown:J,replId:b}}})},iconLeft:(0,i.tZ)(T.Z,{}),text:"".concat(eo?"Saving...":"Save")})]})]})]})})}function X(e){var t=e.unitTestsLib,n=e.onChange,o=e.language,a=e.initialValue,s=(0,r._)((0,h.useState)(null),2),u=s[0],f=s[1];(0,h.useEffect)(function(){u&&(u.setValue(a),u.focus())},[u,a]);var p=t.defaultImports().trim();return(0,i.BX)(c.G,{css:[d.l0.colWithGap(8)],children:[(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.justify.spaceBetween,d.l0.align.center],children:[(0,i.tZ)(l.h4,{level:2,variant:"subheadDefault",children:"Imports"}),(0,i.tZ)(S.Z,{iconLeft:(0,i.tZ)(E.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",variant:"outlined"})]}),(0,i.tZ)(c.G,{css:[d.l0.backgroundColor.backgroundDefault,d.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(c.G,{css:[d.l0.borderRadius(8),d.l0.height(200),d.l0.position.relative],children:(0,i.tZ)(N,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add imports here"),editorRef:f,language:o,skeleton:p,skeletonClosingBracket:"",indentSize:0})})})]})}function F(e){var t=e.unitTestsLib,n=e.onChange,o=e.language,a=e.initialValue,s=(0,r._)((0,h.useState)(null),2),u=s[0],f=s[1];(0,h.useEffect)(function(){u&&u.setValue(a)},[u,a]);var p=t.classConstructorName();return(0,i.BX)(c.G,{css:[d.l0.colWithGap(8)],children:[(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.justify.spaceBetween,d.l0.align.center],children:[(0,i.tZ)(l.h4,{level:2,variant:"subheadDefault",children:"Initialization"}),(0,i.tZ)(S.Z,{iconLeft:(0,i.tZ)(E.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",variant:"outlined"})]}),p?(0,i.BX)(l.xv,{children:["Hint: constructor name is ",(0,i.tZ)("code",{children:p}),"."]}):null,(0,i.tZ)(c.G,{css:[d.l0.backgroundColor.backgroundDefault,d.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(c.G,{css:[d.l0.borderRadius(8),d.l0.height(200),d.l0.position.relative],children:(0,i.tZ)(N,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add initialization code here"),editorRef:f,language:o,skeleton:"",skeletonClosingBracket:"",indentSize:0})})})]})}function W(e){var t=e.unitTestsLib,n=e.onChange,o=e.language,a=e.initialValue,s=(0,r._)((0,h.useState)(null),2),u=s[0],f=s[1];(0,h.useEffect)(function(){u&&u.setValue(a)},[u,a]);var p=t.setupIntro().trim();return(0,i.BX)(c.G,{css:[d.l0.colWithGap(8)],children:[(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.justify.spaceBetween,d.l0.align.center],children:[(0,i.tZ)(l.h4,{level:2,variant:"subheadDefault",children:"Setup"}),(0,i.tZ)(S.Z,{iconLeft:(0,i.tZ)(E.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",variant:"outlined"})]}),(0,i.tZ)(c.G,{css:[d.l0.backgroundColor.backgroundDefault,d.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(c.G,{css:[d.l0.borderRadius(8),d.l0.height(200),d.l0.position.relative],children:(0,i.tZ)(N,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add setup code here"),editorRef:f,language:o,skeleton:p,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})})]})}function H(e){var t=e.unitTestsLib,n=e.onChange,o=e.language,a=e.initialValue,s=(0,r._)((0,h.useState)(null),2),u=s[0],f=s[1];(0,h.useEffect)(function(){u&&u.setValue(a)},[u,a]);var p=t.tearDownIntro().trim();return(0,i.BX)(c.G,{css:[d.l0.colWithGap(8)],children:[(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.justify.spaceBetween,d.l0.align.center],children:[(0,i.tZ)(l.h4,{level:2,variant:"subheadDefault",children:"Teardown"}),(0,i.tZ)(S.Z,{iconLeft:(0,i.tZ)(E.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",variant:"outlined"})]}),(0,i.tZ)(c.G,{css:[d.l0.backgroundColor.backgroundDefault,d.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(c.G,{css:[d.l0.borderRadius(8),d.l0.height(200),d.l0.position.relative],children:(0,i.tZ)(N,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add teardown code here"),editorRef:f,language:o,skeleton:p,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})})]})}var V=function(e){var t=e.language,n=e.meta,o=(0,r._)((0,h.useState)(!1),2),a=o[0],l=o[1];return(0,i.BX)(i.HY,{children:[(0,i.tZ)(_.zx,{iconLeft:(0,i.tZ)(D.Z,{}),onClick:function(){return l(!0)},text:"Setup"}),(0,i.tZ)(M,{language:t,isOpen:a,onClose:function(){return l(!1)},hasMetadata:!!(null==n?void 0:n.id),meta:n})]})},z=n(63257),j=n(64586),q=n(29609),J=n(18060),Y=n(7924),$=n(64318),K=n(99321),Q=n(76575),ee=n(55821),et=n(98924),en=n(15561),er=n(87128),ei=n(72370),eo={success:(0,g.iv)({":not([disabled])":{borderColor:d.TV.accentPositiveStrongest}}),error:(0,g.iv)({":not([disabled])":{borderColor:d.TV.accentNegativeStrongest}}),warning:(0,g.iv)({":not([disabled])":{borderColor:d.TV.yellowStrongest}}),default:void 0,loading:void 0},ea={success:(0,g.iv)([{color:d.TV.accentPositiveStrongest}]),error:(0,g.iv)([{color:d.TV.accentNegativeStrongest}]),warning:(0,g.iv)([{color:d.TV.yellowStrongest}]),default:void 0,loading:void 0},el={success:(0,i.tZ)(T.Z,{}),error:(0,i.tZ)(en.Z,{}),warning:(0,i.tZ)(er.Z,{}),default:void 0,loading:(0,i.tZ)(s.Z,{})},ec=function(e){var t=el[e.state];return(0,i.BX)(c.G,{css:[ea[e.state],d.l0.rowWithGap(4)],children:[h.isValidElement(t)?h.cloneElement(t,{size:12}):null,(0,i.tZ)(l.xv,{variant:"small",multiline:!1,children:e.message})]})},es=(0,g.iv)("display:grid;grid-gap:",d.TV.space8,";grid-template-areas:'label . status'\n    'input input input'\n    'validation validation validation'\n    'details details details';> .label{grid-area:label;}> .status{grid-area:status;}> .input{grid-area:input;}> .details{grid-area:details;}> .validation{grid-area:validation;}"),eu=function(e){var t,n=e.id,r=e.label,o=e.status,a=e.description,c=e["aria-describedby"],s=e.error,u=e.isValid,f=e.touched,h=e.value,p=e.warning,g=e.successText,y=(0,et._)(e,["id","label","status","description","aria-describedby","error","isValid","touched","value","warning","successText"]),b=(0,ei.U)(),w=n||b("input"),Z=o&&b("status"),x=a?b("description"):void 0,C=[Z,x,c].filter(Boolean).join(" "),_=!(t={description:a,error:s,isValid:u,touched:f,value:h,warning:p,successText:g}).touched&&t.description?{state:"default",message:t.description}:t.error?{message:t.error.message,state:"error"}:t.warning?{message:t.warning.message,state:"warning"}:t.isValid?{message:t.successText||"",state:"success"}:t.touched?{message:"",state:"loading"}:void 0;return(0,i.BX)("div",{css:es,children:[(0,i.tZ)("label",{htmlFor:w,className:"label",children:(0,i.tZ)(l.xv,{variant:"small",color:"dimmer",multiline:!1,children:r})}),o?(0,i.tZ)(l.xv,{multiline:!1,variant:"small",color:"dimmer",css:[d.l0.textAlign.right],className:"status",children:o}):null,(0,i.tZ)(J.II,(0,v._)((0,m._)({id:w,className:"input",value:h,css:[eo[(null==_?void 0:_.state)||"default"]]},y),{"aria-describedby":C,"aria-invalid":(null==_?void 0:_.state)==="error"})),(0,i.tZ)("div",{id:x,className:"validation",css:[ea[(null==_?void 0:_.state)||"default"]],"aria-live":(null==_?void 0:_.state)!=="default"?"polite":void 0,children:_?(0,i.tZ)(ec,(0,m._)({},_)):null})]})},ed=n(27387),ef=n(96583),eh=n(43182),ep=n(39864),em=n(45929),ev=n(81199),eg=n(15073),ey="\x1b[0;31m",eb="\x1b[0m",ew=["⣾","⣽","⣻","⢿","⡿","⣟","⣯","⣷","⠁","⠂","⠄","⡀","⢀","⠠","⠐","⠈"];function eZ(e){var t=e.name,n=e.failureMessage,r=e.stack;return"❌	".concat(ey).concat(t).concat(eb,"\r").concat(n?"\nMessage: ".concat(n,"\r"):"","\nStack Trace:\r\n").concat(r.replace(/\n/g,"\r\n"),"\n\r\n\r\n")}var ex=function(e){var t,n,o=e.language,a=e.unitTests,l=e.onResult,s=e.trackingContext,u=e.getRunnerOutput,d=(0,r._)((0,h.useState)(!1),2),f=d[0],p=d[1],v=(0,ev.Z)(),g=v.container,y=v.packager,b=v.fs,w=null,Z=u(),x=Z&&void 0!==Z.startBlock&&void 0!==Z.endBlock&&void 0!==Z.writeOutputToBlock&&void 0!==Z.writeErrorToBlock,S=function(){p(!1),(0,eg.WT)(b),w&&(w.stopLogSpinner(),w.finish(),w=null)},k=(t=(0,ed._)(function(){var e,t,n,r,i,c,u,d,h,v,_,k,E,T,R,D,I,B,G,A,P,L,N,U;return(0,ef.Jh)(this,function(M){switch(M.label){case 0:if(f)return[2];if(t=null,w={startLogSpinner:function(e){if(t)throw Error("A spinner is already active! call stopSpinner first or use the update callback to update the active spinner's message.");var n=e,r=0;return t=setInterval(function(){var e=ew[++r%ew.length];if(!w)throw Error("Expected logger");w.clearLine(),w.logMessage(e+" "+n)},100),function(e){n=e}},stopLogSpinner:function(){t&&clearInterval(t),t=null},finish:function(){if(x&&e){var t;null==Z||null===(t=Z.endBlock)||void 0===t||t.call(Z,e)}},logMessage:function(t){var n,r;if(x&&e){null==Z||null===(r=Z.writeOutputToBlock)||void 0===r||r.call(Z,e,t);return}null==Z||null===(n=Z.write)||void 0===n||n.call(Z,t)},logError:function(t){if(x&&e){var n;null==Z||null===(n=Z.writeErrorToBlock)||void 0===n||n.call(Z,e,t)}},clearLogs:function(){var e;x||(null==Z||null===(e=Z.clear)||void 0===e||e.call(Z),null==w||w.logMessage("\r\n"))},clearLine:function(){if(!w)throw Error("Expected logger");w.logMessage("\x1b[1K\r")}},!a)throw Error("Run button should not be active if there are no tests");return p(!0),(0,C.j)(C.U3.REPL_UNIT_TEST_USED,{trackingData:{context:s},action:"ranTests"}),w.clearLogs(),x&&(e=null==Z?void 0:null===(n=Z.startBlock)||void 0===n?void 0:n.call(Z,em.kH.UNIT_TEST).id),[4,(r=(0,O.x)(o)).buildAndRunTests((0,m._)({container:g,fs:b,packager:y,logger:w},a))];case 1:if(i=M.sent(),w.stopLogSpinner(),w.clearLine(),w.clearLogs(),null!==i.error)return w.logMessage("".concat(ey).concat(i.error).concat(eb,"\r\n")),S(),a.tests.map(function(e){return{testId:e.id,didPass:!1}}),[2];if(c=i.result.passed?[]:i.result.failures.map(function(e){return r.parseTestResultName(e.name)}),u=[],d=a.tests.map(function(e){return r.getProperTestName(e.name)}),(h=c.filter(function(e){return!d.includes(e)})).length)_=h[0],k=i.result.failures[0].stack,w.logMessage(eZ({name:_,failureMessage:"The following error occurred but was not related to a single unit test",stack:k})),w.logError("Testing failed"),(v=u).push.apply(v,(0,z._)(a.tests.map(function(e){return{testId:e.id,didPass:!1}})));else{E=!0,T=!1,R=void 0;try{for(D=a.tests[Symbol.iterator]();!(E=(I=D.next()).done);E=!0){if(B=I.value,G=r.getProperTestName(B.name),A=c.indexOf(G),P=-1===A,u.push({testId:B.id,didPass:P}),P){w.logMessage("✅	".concat("\x1b[0;32m").concat(G).concat(eb,"\r\n\r\n"));continue}L=i.result.failures[A].stack,w.logMessage(eZ({name:G,failureMessage:B.failureMessage,stack:L})),w.logError('Test "'.concat(G,'" failed'))}}catch(e){T=!0,R=e}finally{try{E||null==D.return||D.return()}finally{if(T)throw R}}}if(l(u),N=a.tests.length,i.result.passed)return w.logMessage("".concat("\x1b[48;5;22m","  All tests have passed ").concat(N,"/").concat(N,"  ").concat(eb,"\r\n")),S(),[2];return U=N-i.result.failures.length,w.logMessage("".concat("\x1b[48;5;88m","  ").concat(U,"/").concat(N," passed, see errors above  ").concat(eb)),S(),[2]}})}),function(){return t.apply(this,arguments)}),E=(n=(0,ed._)(function(){return(0,ef.Jh)(this,function(e){try{k()}catch(e){eh.$e(function(t){t.setTag("unittestsrun","true"),eh.Tb(e)}),w&&(w.logMessage("\r\n".concat(ey," Sorry, we have failed to run your tests. Please try again or contact support. ").concat(eb,"\r\n")),w.logError("Running tests failed")),S()}return[2]})}),function(){return n.apply(this,arguments)});return a&&a.tests.length>0?(0,i.tZ)(c.G,{children:(0,i.tZ)(_.zx,{disabled:f,colorway:"primary",iconLeft:(0,i.tZ)(ep.Z,{}),onClick:E,text:f?"Running tests...":"Run tests"})}):null},eC=(0,n(49224).X)({root:d.l0.colWithGap(16),list:[d.l0.colWithGap(8),d.l0.align.center],test:[d.l0.width("100%"),d.l0.p(8),d.l0.border({width:1,color:d.TV.outlineDimmest}),d.l0.borderRadius(4),{'&[data-status="passed"]':[{borderColor:d.TV.accentPositiveDefault},d.l0.backgroundColor.accentPositiveDimmer],'&[data-status="failed"]':[{borderColor:d.TV.accentNegativeDefault},d.l0.backgroundColor.accentNegativeDimmer]}]});function e_(e){var t=e.isOpen,n=e.test,a=e.language,s=e.onClose,f=e.trackingContext,p=(0,o.Z)(),g=(0,x.Z)().showConfirm,y=(0,r._)((0,h.useState)(null),2),b=y[0],w=y[1],Z=(0,r._)((0,h.useState)(""),2),E=Z[0],R=Z[1],D=(0,r._)((0,h.useState)(""),2),I=D[0],B=D[1],G=(0,r._)((0,h.useState)(""),2),A=G[0],P=G[1],L=(0,r._)((0,U.Hd)({onError:function(e){return P(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTest;r&&("UserError"===r.__typename?P(r.message):"ReplUnitTest"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:p}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:U.Rb});return t?(0,v._)((0,m._)({},t),{tests:(0,z._)(t.tests).concat([n])}):{__typename:"ReplUnitTestsWithMeta",meta:null,tests:[n]}}}}),g("Test created!"),s()))}}),2),M=L[0],X=L[1],F=(0,r._)((0,U.kO)({onError:function(e){return P(e.message)},onCompleted:function(e){var t=e.updateReplUnitTest;t&&("UserError"===t.__typename?P(t.message):"ReplUnitTest"===t.__typename&&(g("Test updated!"),s()))}}),2),W=F[0],H=F[1],V=(0,q.Y)("",function(e){return e.length<=0?{message:"Must include test name"}:e.trim().split(" ").length>1?{message:"Test name must only be one word"}:void 0});(0,h.useEffect)(function(){V.setValue((null==n?void 0:n.name)||"",{preventTouch:!0}),B((null==n?void 0:n.failureMessage)||""),R((null==n?void 0:n.code)||""),b&&b.setValue((null==n?void 0:n.code)||"")},[n,b]),(0,h.useEffect)(function(){P("")},[E,P]);var Q=(0,O.x)(a),ee="".concat(Q.getCommentChar()," Enter code here"),et=!n||n.name!==V.value||n.code!==E||n.failureMessage!==I,en=X.loading||H.loading,er=Q.testIntro(V.value||""),ei=Q.hasClosingBrackets()?Q.getClosingBrackets():"",eo=(0,r._)((0,h.useState)(!1),2),ea=eo[0],el=eo[1],ec=function(){b&&(b.setValue("  "+Q.exampleTest.code),b.focus()),R(Q.exampleTest.code)};return(0,i.tZ)(k.u,{isOpen:t,onRequestClose:s,maxWidth:872,children:(0,i.BX)(c.G,{css:[d.l0.colWithGap(24)],children:[(0,i.tZ)(l.h4,{level:1,variant:"headerDefault",children:"New unit test"}),(0,i.BX)(c.G,{css:[d.l0.colWithGap(8)],children:[(0,i.tZ)("label",{htmlFor:"name",children:(0,i.tZ)(l.h4,{level:2,variant:"subheadDefault",children:"Name"})}),(0,i.tZ)(eu,{id:"name",label:"Test name",status:null,autoFocus:!0,required:!0,value:V.value,isValid:V.isValid,error:V.error,warning:V.warning,touched:V.touched,onChange:function(e){V.setValue(e.target.value)},placeholder:"Enter test name here"})]}),(0,i.BX)(c.G,{css:[d.l0.colWithGap(8)],children:[(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.align.center,d.l0.justify.spaceBetween],children:[(0,i.tZ)(l.h4,{level:2,variant:"subheadDefault",children:"Code"}),(0,i.BX)(c.G,{css:[d.l0.rowWithGap(4)],children:[(0,i.BX)(j.Z,{isOpen:ea,onClickOutside:function(){return el(!1)},placement:"bottom-end",children:[(0,i.tZ)(_.zx,{iconLeft:(0,i.tZ)(K.Z,{}),size:"small",variant:"outlined",text:"View an example",onClick:function(){if([ee,Q.exampleTest.code].includes(E.trim())){ec();return}el(!0)}}),(0,i.BX)(c.G,{children:["This will overwrite your current test. Are you sure?",(0,i.BX)(c.G,{css:[d.l0.rowWithGap(4),d.l0.pt(8)],children:[" ",(0,i.tZ)(_.zx,{text:"No, go back",size:"small",iconLeft:(0,i.tZ)($.Z,{}),onClick:function(){el(!1)}}),(0,i.tZ)(_.zx,{text:"Yes, delete test",colorway:"negative",size:"small",iconLeft:(0,i.tZ)(T.Z,{}),onClick:function(){ec(),el(!1)}})]})]})]}),(0,i.tZ)(S.Z,{iconLeft:(0,i.tZ)(Y.Z,{}),size:"small",variant:"outlined",text:"View docs",target:"_blank",href:"https://docs.replit.com/teams-edu/unit-testing"})]})]}),(0,i.tZ)(c.G,{css:[d.l0.backgroundColor.backgroundDefault,d.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(c.G,{css:[d.l0.borderRadius(8),d.l0.height(200),d.l0.position.relative],children:(0,i.tZ)(N,{skeleton:er,skeletonClosingBracket:ei,language:a,editorRef:w,onChange:R,placeholder:ee})})})]}),(0,i.BX)(c.G,{css:[d.l0.colWithGap(8)],children:[(0,i.tZ)(l.h4,{level:2,variant:"subheadDefault",children:"Failure message"}),(0,i.tZ)(J.II,{value:I,onChange:function(e){return B(e.target.value)},placeholder:"This will be displayed on test failure"})]}),(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.align.center,d.l0.justify.spaceBetween],children:[(0,i.tZ)(l.xv,{css:[d.l0.color.accentNegativeStronger],multiline:!1,children:A}),(0,i.BX)(c.G,{css:[d.l0.rowWithGap(12)],children:[(0,i.tZ)(_.zx,{text:"Cancel",onClick:s}),(0,i.tZ)(_.zx,{text:"".concat(en?"Creating test...":"Create test"),iconLeft:(0,i.tZ)(u.Z,{}),colorway:"primary",disabled:!et||en,onClick:function(){if(!V.validate()){if(E.length<=0){P("Test cannot be empty");return}n?(W({variables:{input:{name:V.value,code:E,failureMessage:I,testId:n.id}}}),(0,C.j)(C.U3.REPL_UNIT_TEST_USED,{trackingData:{context:f},action:"modifiedTest"})):(M({variables:{input:{name:V.value,code:E,failureMessage:I,replId:p}}}),(0,C.j)(C.U3.REPL_UNIT_TEST_USED,{trackingData:{context:f},action:"addedTest"}))}}})]})]})]})})}function eS(e){var t=e.testId,n=e.onClose,a=(0,x.Z)().showConfirm,s=(0,o.Z)(),u=(0,r._)((0,U.IV)({onError:function(e){return b(e.message)},update:function(e,r){var i,o=null===(i=r.data)||void 0===i?void 0:i.deleteReplUnitTest;o&&("UserError"===o.__typename?b(o.message):"ReplUnitTest"===o.__typename&&t&&(e.modify({id:e.identify({__typename:"Repl",id:s}),fields:{unitTests:function(e,n){var r=n.readField,i=e.tests.filter(function(e){return r("id",e)!==t});return(0,v._)((0,m._)({},e),{tests:(0,z._)(i)})}}}),(0,C.j)(C.U3.REPL_UNIT_TEST_USED,{action:"removedTest"}),a("Test deleted!"),n()))}}),2),f=u[0],p=u[1],g=(0,r._)((0,h.useState)(""),2),y=g[0],b=g[1];return(0,i.tZ)(k.u,{isOpen:!!t,onRequestClose:n,children:(0,i.BX)(c.G,{css:[d.l0.colWithGap(24)],children:[(0,i.tZ)(l.h4,{level:1,variant:"headerDefault",children:"Delete test?"}),(0,i.tZ)(l.xv,{children:"Are you sure you want to delete this test? This cannot be undone."}),(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.justify.spaceBetween,d.l0.align.center],children:[(0,i.tZ)(l.xv,{css:[d.l0.color.accentNegativeStronger],children:y}),(0,i.BX)(c.G,{css:[d.l0.rowWithGap(12),d.l0.justify.end],children:[(0,i.tZ)(_.zx,{text:"Cancel",disabled:p.loading,onClick:n}),(0,i.tZ)(_.zx,{text:"Yes, delete this test",colorway:"negative",iconLeft:(0,i.tZ)(ee.Z,{}),disabled:p.loading,onClick:function(){if(!t)throw Error("Expected a testId");f({variables:{testId:t}})}})]})]})]})})}var ek=function(e){var t=e.unitTests,n=e.isAddingTest,s=e.onClose,f=e.language,p=e.canWrite,m=e.trackingContext,v=void 0===m?"default":m,g=e.getRunnerOutput,y=(0,r._)((0,h.useState)(n),2),b=y[0],w=y[1],Z=(0,r._)((0,h.useState)(null),2),x=Z[0],C=Z[1],S=(0,r._)((0,h.useState)(null),2),k=S[0],E=S[1],T=(0,o.Z)(),R=(0,r._)((0,U.lQ)(),1)[0],D=(null==t?void 0:t.tests)||[];return(0,i.BX)(c.G,{css:eC.root,children:[(0,i.tZ)(ex,{language:f,unitTests:t,onResult:function(e){R({variables:{input:{replId:T,results:e},replId:T}})},getRunnerOutput:g,trackingContext:v}),D.length>0?(0,i.tZ)(c.G,{css:eC.list,children:D.map(function(e){var t,n,r;return(null===(t=e.lastRun)||void 0===t?void 0:t.__typename)==="ReplUnitTestLastRun"&&(n=null===(r=e.lastRun.status)||void 0===r?void 0:r.toLowerCase()),(0,i.tZ)(c.G,{css:eC.test,"data-status":n,children:(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.justify.spaceBetween,d.l0.align.center,d.l0.p(8),d.l0.borderRadius(8),{border:"1px solid var(--background-highest);"}],children:[(0,i.tZ)(l.xv,{multiline:!1,children:e.name}),p?(0,i.BX)(c.G,{css:[d.l0.rowWithGap(8)],children:[(0,i.tZ)(a.hU,{onClick:function(){C(e)},alt:"Edit",children:(0,i.tZ)(Q.Z,{})}),(0,i.tZ)(a.hU,{onClick:function(){E(e.id)},alt:"Delete",children:(0,i.tZ)(ee.Z,{})})]}):null]})},e.id)})}):(0,i.BX)(c.G,{css:[d.l0.colWithGap(8),d.l0.align.center],children:[(0,i.tZ)(l.xv,{css:[d.l0.textAlign.center],children:"Looks like you don’t have any tests yet!"}),p?(0,i.tZ)(_.zx,{text:"Add test",onClick:function(){return w(!0)},iconLeft:(0,i.tZ)(u.Z,{})}):null]}),(0,i.tZ)(e_,{isOpen:b||!!x||n,test:x,language:f,onClose:function(){C(null),w(!1),s&&s()},trackingContext:v}),(0,i.tZ)(eS,{testId:k,onClose:function(){return E(null)}})]})},eE=n(49345),eT=function(e){var t,n,m,v,g,y=e.onBack,b=e.getRunnerOutput,w=(0,o.Z)(),x=(0,r._)((0,h.useState)(!1),2),C=x[0],_=x[1],S=(0,eE.Z)(),k=S.language,E=S.isLoading,T=(0,p.CH)({variables:{replId:w}}),R=null===(t=T.data)||void 0===t?void 0:t.repl;if(T.loading||E)return(0,i.tZ)(c.G,{css:[d.l0.backgroundColor.backgroundDefault,d.l0.flex.row,d.l0.align.center,d.l0.justify.center,d.l0.p(16)],children:(0,i.tZ)(s.Z,{})});if(!R||"Repl"!==R.__typename)return(0,i.tZ)(c.G,{css:[d.l0.p(16)],children:(0,i.tZ)(l.xv,{css:{textAlign:"center"},children:"Unable to fetch tests, please try again."})});if(!k)return(0,i.tZ)(c.G,{css:[d.l0.p(16)],children:(0,i.tZ)(l.xv,{css:{textAlign:"center"},children:"Unit tests are currently only supported in Java, Python, and Node.js Repls."})});var D="default";(null==R?void 0:R.isProject)?D="project_repl":(null==R?void 0:R.isProjectFork)&&(D="submission_repl");var I=!!((null===(n=R.unitTests)||void 0===n?void 0:n.tests)&&R.unitTests.tests.length>0);return(null==R?void 0:null===(v=R.authorizations)||void 0===v?void 0:null===(m=v.writeTests)||void 0===m?void 0:m.isAuthorized)?(0,i.BX)(c.G,{css:[d.l0.colWithGap(16),d.l0.align.center],children:[(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.justify.spaceBetween,d.l0.align.center,{width:"100%"}],children:[(0,i.tZ)(f.Z,{truncate:!0,level:4,children:"Unit tests"}),(0,i.tZ)(a.hU,{alt:"Add test",size:32,onClick:function(){return _(!0)},children:(0,i.tZ)(u.Z,{})})]}),(0,i.BX)(c.G,{css:[d.l0.colWithGap(8),d.l0.maxWidth(256),{width:"80%"}],children:[(0,i.tZ)(V,{language:k,meta:(null===(g=R.unitTests)||void 0===g?void 0:g.meta)||null}),(0,i.tZ)(ek,{isAddingTest:C,unitTests:(null==R?void 0:R.unitTests)||null,onClose:function(){return _(!1)},language:k,canWrite:!0,trackingContext:D,getRunnerOutput:b}),y?(0,i.tZ)(Z,{hasTests:I,onClick:y}):null]})]}):(0,i.BX)(c.G,{css:[d.l0.colWithGap(16)],children:[(0,i.tZ)(l.h4,{level:1,variant:"headerDefault",children:"Unit tests"}),(0,i.tZ)(c.G,{css:{width:"100%",overflowY:"auto"},children:(0,i.tZ)(ek,{unitTests:(null==R?void 0:R.unitTests)||null,language:k,isAddingTest:!1,canWrite:!1,trackingContext:D,getRunnerOutput:b})})]})}},22529:function(e,t,n){n.d(t,{x:function(){return T},y:function(){return E}});var r=n(27387),i=n(63257),o=n(96583),a=n(51305),l=n(43182),c=n(60305),s=n(12285),u=function(){"use strict";function e(t){(0,s._)(this,e),this.code="",this.currentIndent=0,this.lib=t}var t=e.prototype;return t.indent=function(){this.currentIndent+=1},t.dedent=function(){if(0===this.currentIndent)throw Error("indent at zero");this.currentIndent-=1},t.addIndents=function(){for(var e=0;e<this.currentIndent;e++)this.code+="  "},t.push=function(e){var t=e.split("\n"),n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;this.addIndents(),this.code+=l,this.newLine()}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}},t.newLine=function(){this.code+="\n"},t.closeCurly=function(){this.addIndents(),this.code+=this.lib.getClosingBrackets()},t.toString=function(){return this.code},e}(),d=n(15073),f={testRunnerName:function(){return"TestRunner"},testSuiteName:function(){return"TestSuite"},defaultImports:function(){return"import org.junit.Before;\nimport org.junit.After;\nimport org.junit.Test;\nimport static org.junit.Assert.*;"},classIntro:function(){return"public class ".concat((0,d.Og)(f.testSuiteName())," {")},classConstructorName:function(){return(0,d.Og)(f.testSuiteName())},setupIntro:function(){return"@Before\npublic void setUp() {"},tearDownIntro:function(){return"@After\npublic void tearDown() {"},testIntro:function(e){return"".concat(f.testIntroPreName()).concat(e).concat(f.testIntroPostName())},testIntroPreName:function(){return"@Test\npublic void "},testIntroPostName:function(){return"() {"},getProperTestName:function(e){return e},parseTestResultName:function(e){return e.replace("(".concat((0,d.Og)(f.testSuiteName()),")"),"")},buildSuite:function(e){var t=e.tests,n=e.meta,r=new u(f);r.push(f.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(f.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&(r.push(f.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),n.tearDown&&(r.push(f.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.code&&(r.push(f.testIntro(s.name)),r.indent(),r.push(s.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return v.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=f.buildSuite({tests:o,meta:a});return f.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"}"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react in this bitch either"},captureSetupError:function(e){var t=e.tag,n=e.raw;l.$e(function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","java10"),l.Tb(t)})},exampleTest:{id:-1,failureMessage:"An Adder class should have an add method that adds two ints and returns the result",name:"add",code:"Adder adder = new Adder();\nint result = adder.add(1, 2);\nassertEquals(3, result);\n"}},h="__UNIT_TEST_RESULT_START__",p="__UNIT_TEST_RESULT_END__",m="import org.json.simple.JSONArray;\nimport org.json.simple.JSONObject;\nimport org.junit.runner.JUnitCore;\nimport org.junit.runner.Result;\nimport org.junit.runner.notification.Failure;\n\npublic class ".concat((0,d.Og)(f.testRunnerName())," {\n    public static void main(String[] args) {\n      Result result = JUnitCore.runClasses(").concat((0,d.Og)(f.testSuiteName()),'.class);\n      JSONArray failures = new JSONArray();\n\n        for (Failure failure : result.getFailures()) {\n            JSONObject obj = new JSONObject();\n            obj.put("name", failure.getTestHeader());\n            obj.put("stack", failure.getTrace());\n            failures.add(obj);\n        }\n        JSONObject out = new JSONObject();\n        out.put("passed", result.wasSuccessful());\n        out.put("failures", failures);\n        System.out.println();\n        System.out.println("').concat(h,'");\n        System.out.println(out);\n        System.out.println("').concat(p,'");\n    }\n}');function v(){return(v=(0,r._)(function(e){var t,n,r,l,s,u,v,g,y,b,w,Z,x,C,_,S,k,E,T,R,D;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return t=e.container,n=e.fs,r=e.packager,l=e.logger,s=e.suiteCode,v=l.startLogSpinner("Setting up the environment"),[4,(0,d.WT)(n)];case 1:return o.sent(),v("Creating your test files 1/2"),[4,(0,d.e3)({fs:n,code:s,filename:"".concat(f.testSuiteName(),".java")})];case 2:if(g=o.sent().error)return f.captureSetupError({tag:"Failed to create suite code file",raw:g}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return v("Creating your test files 2/2"),[4,(0,d.e3)({fs:n,code:m,filename:"".concat(f.testRunnerName(),".java")})];case 3:if(y=o.sent().error)return f.captureSetupError({tag:"Failed to create test runner file",raw:y}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return l.stopLogSpinner(),l.clearLine(),l.logMessage("Installing imported packages\r\n"),[4,r.addPackages([{name:"junit:junit",version:"4.12"},{name:"com.googlecode.json-simple:json-simple",version:"1.1.1"},{name:"org.hamcrest:hamcrest-core",version:"1.3"}])];case 4:return o.sent(),[4,r.installPackages(a.D.active())];case 5:if(o.sent().error)return[2,{error:"Failed to install packages\r\n"}];return l.clearLogs(),v=l.startLogSpinner("Compiling your files"),[4,t.exec("find",".","-type","f","-name","*.java","-print0")];case 6:if(w=(b=o.sent()).output,Z=b.error)return x="Failed to fetch working directory java files",f.captureSetupError({tag:x,raw:Z}),[2,{error:"".concat(x,"\r\n\r\n")+(null==w?void 0:w.replace(/\n/g,"\n\r"))+"\r\n\r\n"+Z}];if("string"!=typeof w)throw Error("expected working directory files to be a string");return C=w.slice(0,-1).split("\x00"),_=".:./target/dependency/*",[4,(u=t).exec.apply(u,["javac","-classpath",_,"-d","."].concat((0,i._)(C)))];case 7:if(k=(S=o.sent()).output,E=S.error)return[2,{error:"".concat("Failed to compile test runner file","\r\n\r\n")+(null==k?void 0:k.replace(/\n/g,"\n\r"))+"\r\n\r\n"+E}];return v("Running your tests"),[4,t.exec("java","-classpath",_,(0,d.Og)(f.testRunnerName()))];case 8:if(R=(T=o.sent()).output,D=T.error)return(0,c.j)(c.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null==R?void 0:R.replace(/\n/g,"\n\r"))+"\r\n\r\n"+D}];if("string"!=typeof R)throw Error("expected runOutput to be a string");return[2,{result:JSON.parse(R.slice(R.indexOf(h)+h.length,R.lastIndexOf(p))),error:null}]}})})).apply(this,arguments)}var g=function(e){return!!e&&e.trim().length>0&&e.split("\n").some(function(e){return!(e.trim().startsWith("#")||""===e.trim())})},y={testRunnerName:function(){return"test_runner"},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"import unittest\nfrom main import *\n"},classIntro:function(){return"class UnitTests(unittest.TestCase):"},classConstructorName:function(){return"__init__"},setupIntro:function(){return"def setUp(self):"},tearDownIntro:function(){return"def tearDown(self):"},testIntro:function(e){return y.testIntroPreName()+e+y.testIntroPostName()},testIntroPreName:function(){return"def test_"},testIntroPostName:function(){return"(self):"},getProperTestName:function(e){return"test_".concat(e)},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,n=e.meta,r=new u(y);r.push(y.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(y.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),g(n.setup)&&(r.push(y.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.newLine()),g(n.tearDown)&&(r.push(y.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;r.push(y.testIntro(s.name)),r.indent(),r.push(s.code||"pass"),r.dedent(),r.newLine()}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.toString()},runSuite:function(e){return x.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=y.buildSuite({tests:o,meta:a});return y.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!1},getClosingBrackets:function(){throw Error("This language does not have closing brackets, check `hasClosingBrackets` first")},hasSemicolon:function(){return!1},getCommentChar:function(){return"#"},getHelpText:function(){return"no react in this bitch"},captureSetupError:function(e){var t=e.tag,n=e.raw;l.$e(function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","python3"),l.Tb(t)})},exampleTest:{id:-1,failureMessage:"In main.py you should have an add functions that adds two numbers and returns the result",name:"add",code:"self.assertEquals(add(1, 2), 3)"}},b="__UNIT_TEST_RESULT_START__",w="__UNIT_TEST_RESULT_END__",Z="import unittest\nimport ".concat((0,d.Og)(y.testSuiteName()),"\nimport os\nimport json\nfrom time import sleep\n\nsuite = unittest.TestLoader().loadTestsFromTestCase(\n  ").concat((0,d.Og)(y.testSuiteName()),'.UnitTests)\nf = open(os.devnull,"w")\ntest_res = unittest.TextTestRunner(stream=f).run(suite)\n\n# Merge errors and failures and normalize to {name, stack}\nfailures = [\n    {\n        "name": r[0]._testMethodName,\n        "stack": r[1],\n    } for r in test_res.errors + test_res.failures\n]\nprint()\nprint(\'').concat(b,'\')\nsleep(1)\nprint(json.dumps({\n    "passed": test_res.wasSuccessful(),\n    "failures": failures,\n}))\nprint()\nprint(\'').concat(w,"');");function x(){return(x=(0,r._)(function(e){var t,n,r,i,l,s,u,f,h,p,m;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return t=e.container,n=e.fs,r=e.packager,i=e.logger,l=e.suiteCode,s=i.startLogSpinner("Setting up the environment"),[4,(0,d.WT)(n)];case 1:return o.sent(),s("Creating your test files 1/2"),[4,(0,d.e3)({fs:n,code:l,filename:"".concat(y.testSuiteName(),".py")})];case 2:if(u=o.sent().error)return y.captureSetupError({tag:"Failed to create suite code file",raw:u}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return s("Creating your test files 2/2"),[4,(0,d.e3)({fs:n,code:Z,filename:"".concat(y.testRunnerName(),".py")})];case 3:if(f=o.sent().error)return y.captureSetupError({tag:"Failed to create test runner file",raw:f}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return i.stopLogSpinner(),i.clearLine(),i.logMessage("Installing imported packages\r\n"),[4,r.installPackages(a.D.active())];case 4:if(o.sent().error)return[2,{error:"Failed to install packages\r\n"}];return i.clearLogs(),i.startLogSpinner("Running your tests"),[4,t.exec("python","-B",(0,d.Og)("".concat(y.testRunnerName(),".py")))];case 5:if(p=(h=o.sent()).output,m=h.error)return(0,c.j)(c.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null==p?void 0:p.replace(/\n/g,"\n\r"))+"\r\n"+m}];if("string"!=typeof p)throw Error("expected runoutput to be a string");return[2,{result:JSON.parse(p.slice(p.indexOf(b)+b.length,p.lastIndexOf(w))),error:null}]}})})).apply(this,arguments)}var C={testRunnerName:function(){throw Error("Node test runner uses jest directly")},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"const index = require('./index.js');"},classIntro:function(){return'describe("UnitTests", function() {'},classConstructorName:function(){return null},setupIntro:function(){return"beforeAll(async function() {"},tearDownIntro:function(){return"afterAll(async function() {"},testIntro:function(e){return C.testIntroPreName()+e+C.testIntroPostName()},testIntroPreName:function(){return'test("'},testIntroPostName:function(){return'", async function() {'},getProperTestName:function(e){return e},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,n=e.meta,r=new u(C);r.push(C.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(C.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&(r.push(C.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),n.tearDown&&(r.push(C.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.code&&(r.push(C.testIntro(s.name)),r.indent(),r.push(s.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return S.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=C.buildSuite({tests:o,meta:a});return C.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"});"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react yet"},captureSetupError:function(e){var t=e.tag,n=e.raw;l.$e(function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","nodejs"),l.Tb(t)})},exampleTest:{id:-1,failureMessage:"",name:"add",code:"expect(index.add(1, 2)).toBe(3);"}};function _(){return(_=(0,r._)(function(e){var t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,e.exec("sh","-c","which jest &> /dev/null && echo 1 || echo 0")];case 1:if("1"===((t=n.sent()).output?t.output.trim():null))return[2];return[4,e.exec("npm","install","-g","jest@24.x.x")];case 2:return n.sent(),[2]}})})).apply(this,arguments)}function S(){return(S=(0,r._)(function(e){var t,n,r,i,l,s,u,f,h,p,m,v,g,y,b,w,Z,x,S;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return t=e.container,n=e.fs,r=e.packager,i=e.logger,l=e.suiteCode,s=i.startLogSpinner("Setting up the environment"),[4,(0,d.WT)(n)];case 1:return o.sent(),s("Creating your test files 1/2"),[4,(0,d.e3)({fs:n,code:l,filename:"".concat(C.testSuiteName(),".js")})];case 2:if(u=o.sent().error)return C.captureSetupError({tag:"Failed to create suite code file",raw:u}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return s("Creating your test files 2/2"),f=69,h="jest.config.json",p={testRegex:(0,d.Og)("".concat(C.testSuiteName(),".js")),testEnvironment:"node",testFailureExitCode:f},[4,(0,d.e3)({fs:n,code:JSON.stringify(p),filename:h})];case 3:if(m=o.sent().error)return C.captureSetupError({tag:"Failed to create config file",raw:m}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return i.stopLogSpinner(),i.clearLine(),i.logMessage("Installing imported packages\r\n"),[4,function(e){return _.apply(this,arguments)}(t)];case 4:return o.sent(),[4,r.installPackages(a.D.active())];case 5:if(o.sent().error)return[2,{error:"Failed to install packages\r\n"}];return i.clearLogs(),s=i.startLogSpinner("Running your tests"),v=(0,d.Og)("output.json"),[4,t.exec("jest","--json","--outputFile",v,"--config",(0,d.Og)(h),"--forceExit","--passWithNoTests")];case 6:if(y=(g=o.sent()).output,(b=g.error)&&!b.endsWith(f.toString()))return(0,c.j)(c.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null==y?void 0:y.replace(/\n/g,"\n\r"))+"\r\n"+b}];return s("Parsing your test results"),[4,n.readFile(v)];case 7:if((w=o.sent()).error)return C.captureSetupError({tag:"Error reading test results",raw:w.error}),[2,{error:"There was an error getting test results, if this happens please contact support."}];if((Z=JSON.parse(w.content.toString())).success)return[2,{error:null,result:{passed:!0,failures:[]}}];if(!(S=(x=Z.testResults[0]).assertionResults.filter(function(e){return"passed"!==e.status}).map(function(e){return{name:e.title,stack:e.failureMessages[0]}})).length)return[2,{error:x.message.replace(/\n/g,"\r\n")}];return[2,{error:null,result:{passed:!1,failures:S}}]}})})).apply(this,arguments)}var k={java10:f,java10_beta:f,java:f,python3:y,python3_beta:y,python:y,nodejs:C,javascript:C,nodejs_beta:C};function E(e){return e in k}function T(e){if(!E(e))throw Error("".concat(e," is not a supported unit testing language, it has to be one of ").concat(Object.keys(k)));return k[e]}},15073:function(e,t,n){n.d(t,{Og:function(){return u},WT:function(){return h},e3:function(){return d}});var r=n(27387),i=n(96583),o=n(43182),a=n(52399),l=n(73372),c=n(57253),s="_test_runner";function u(e){return s+e}function d(e){return f.apply(this,arguments)}function f(){return(f=(0,r._)(function(e){var t,n,r,o;return(0,i.Jh)(this,function(i){return t=e.fs,n=e.code,r=s+e.filename,o=a.Z.from(n,"utf8"),[2,t.writeFile(r,o)]})})).apply(this,arguments)}function h(e){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(e){var t,n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,e.readDir(l.Ql)];case 1:if((t=r.sent()).error)return[2];return[4,Promise.all(t.children.map(function(t){return t.filename.startsWith(s)?t.type===c.Tv.File?e.deleteFile(t.filename):e.deleteDir(t.filename):Promise.resolve(null)}))];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),o.$e(function(e){e.setTag("unitTestLib","true"),o.Tb(n)}),[3,4];case 4:return[2]}})})).apply(this,arguments)}},72604:function(e,t,n){n.d(t,{AF:function(){return Z},Hd:function(){return C},IV:function(){return E},Rb:function(){return g},aA:function(){return v},kO:function(){return S},lQ:function(){return R},rU:function(){return b}});var r=n(41733),i=n(21262),o=n(71440),a=n(99165);function l(){var e=(0,i._)(["\n  fragment UnitTestsReplUnitTestMeta on ReplUnitTestMeta {\n    id\n    imports\n    initialization\n    setup\n    tearDown\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i._)(["\n  fragment UnitTestsReplUnitTest on ReplUnitTest {\n    id\n    name\n    code\n    failureMessage\n  }\n"]);return c=function(){return e},e}function s(){var e=(0,i._)(["\n  mutation createUnitTestMeta($input: CreateReplUnitTestMetaInput!) {\n    createReplUnitTestMeta(input: $input) {\n      ... on ReplUnitTestMeta {\n        id\n        ...UnitTestsReplUnitTestMeta\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation updateUnitTestMeta($input: UpdateReplUnitTestMetaInput!) {\n    updateReplUnitTestMeta(input: $input) {\n      ... on ReplUnitTestMeta {\n        id\n        ...UnitTestsReplUnitTestMeta\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  mutation createUnitTest($input: CreateReplUnitTestInput!) {\n    createReplUnitTest(input: $input) {\n      ... on ReplUnitTest {\n        id\n        ...UnitTestsReplUnitTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i._)(["\n  mutation updateUnitTest($input: UpdateReplUnitTestInput!) {\n    updateReplUnitTest(input: $input) {\n      ... on ReplUnitTest {\n        id\n        ...UnitTestsReplUnitTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  mutation deleteUnitTest($testId: Int!) {\n    deleteReplUnitTest(testId: $testId) {\n      ... on ReplUnitTest {\n        id\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return h=function(){return e},e}function p(){var e=(0,i._)(["\n  mutation updateReplUnitTestLastRun(\n    $input: UpdateReplUnitTestLastRunInput!\n    $replId: String!\n  ) {\n    updateReplUnitTestLastRun(input: $input) {\n      ... on UpdateReplUnitTestLastRunUpdatedTests {\n        __typename\n        updatedTests {\n          ... on ReplUnitTest {\n            id\n            __typename\n            lastRun(replId: $replId) {\n              ... on ReplUnitTestLastRun {\n                __typename\n                status\n              }\n              ... on UserError {\n                __typename\n                message\n              }\n            }\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}var m={},v=(0,o.Ps)(l()),g=(0,o.Ps)(c()),y=(0,o.Ps)(s(),v);function b(e){var t=(0,r._)({},m,e);return a.D(y,t)}var w=(0,o.Ps)(u(),v);function Z(e){var t=(0,r._)({},m,e);return a.D(w,t)}var x=(0,o.Ps)(d(),g);function C(e){var t=(0,r._)({},m,e);return a.D(x,t)}var _=(0,o.Ps)(f(),g);function S(e){var t=(0,r._)({},m,e);return a.D(_,t)}var k=(0,o.Ps)(h());function E(e){var t=(0,r._)({},m,e);return a.D(k,t)}var T=(0,o.Ps)(p());function R(e){var t=(0,r._)({},m,e);return a.D(T,t)}},49345:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(66626),i=n(81199),o=n(50959),a=n(87137),l=n(22529);function c(){var e=(0,i.Z)().dotReplit,t=(0,r._)((0,o.useState)(null),2),n=t[0],c=t[1],s=(0,r._)((0,o.useState)(!0),2),u=s[0],d=s[1];return(0,o.useEffect)(function(){var t=!1,n=e.watch(function(e){if(t||(t=!0,d(!1)),e.error){e.error===a.Yt.NotFound&&c(null);return}var n,r,i=null===(r=e.config.unitTest)||void 0===r?void 0:null===(n=r.language)||void 0===n?void 0:n.toLowerCase();i&&(0,l.y)(i)?c(i):c(null)});return function(){n()}},[e]),{language:n,isLoading:u}}},75588:function(e,t,n){n.d(t,{Q:function(){return o}});var r=n(4216),i=n(50959);function o(e){var t=e.uploadFiles,n=e.fileUploadInputRef,o=e.dirUploadInputRef,a=(0,i.useRef)(Math.random().toString(36));return(0,r.BX)(r.HY,{children:[(0,r.tZ)("input",{style:{display:"none"},ref:n,id:"file-upload-input-".concat(a.current),type:"file",onChange:function(e){var n=e.target.files;n&&t({files:Array.from(n)})},onClick:function(e){e.currentTarget.value=""},multiple:!0,accept:"*"}),(0,r.tZ)("input",{style:{display:"none"},ref:o,id:"dir-upload-input-".concat(a.current),type:"file",onChange:function(e){var n=e.target.files;n&&t({files:Array.from(n)})},onClick:function(e){e.currentTarget.value=""},webkitdirectory:"true",mozdirectory:"true",msdirectory:"true",odirectory:"true",directory:"true",accept:"*"})]})}},2738:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(4216),i=n(15235),o=n(82230),a=n(49224),l=n(54556),c=n(69340),s=n(72093),u=n(93720),d=n(58045),f=(0,a.X)({button:[s.l0.display.inlineBlock]});function h(e){var t,n=e.openNetworkingTool,a=(0,d.Se)(),s=null===(t=a.getDescription)||void 0===t?void 0:t.call(a,{type:"webview"});return(0,r.tZ)(u.Z,{headerText:null!=s?s:"Webview",bodyText:(0,r.tZ)(r.HY,{children:(0,r.BX)(o.xv,{multiline:!0,children:["No web server is currently running with ports available to view. Try running your Repl, and check the"," ",(0,r.tZ)(i.zx,{css:f.button,text:"Networking tool",iconLeft:(0,r.tZ)(c.Z,{}),size:"small",onClick:n})," ","to ensure ports are being forwarded correctly."]})}),icon:(0,r.tZ)(l.Z,{size:48})})}},94563:function(e,t,n){n.d(t,{I5:function(){return p},sY:function(){return f}});var r=n(41733),i=n(21262),o=n(71440),a=n(58995);function l(){var e=(0,i._)(["\n  fragment ReplEnvironmentWebviewDeployBanner on Repl {\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        currentBuild {\n          id\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n    authorizations {\n      viewDeploymentConfig {\n        isAuthorized\n      }\n    }\n    config {\n      isVnc\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i._)(["\n  fragment ReplEnvironmentWebviewRepl on Repl {\n    id\n    prodUrl: hostedUrl(dotty: true)\n    devUrl: hostedUrl(dev: true)\n    authorizations {\n      addCustomDomain {\n        isAuthorized\n      }\n    }\n  }\n"]);return c=function(){return e},e}function s(){var e=(0,i._)(["\n  query ReplEnvironmentWebview($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentWebviewRepl\n        ...ReplEnvironmentWebviewDeployBanner\n      }\n    }\n  }\n  ","\n  ","\n"]);return s=function(){return e},e}var u={},d=(0,o.Ps)(l()),f=(0,o.Ps)(c()),h=(0,o.Ps)(s(),f,d);function p(e){var t=(0,r._)({},u,e);return a.a(h,t)}},34378:function(e,t,n){n.d(t,{oB:function(){return ez},U8:function(){return eJ},Cl:function(){return ej}});var r,i,o=n(41733),a=n(66626),l=n(4216),c=n(57967),s=n(39271),u=n(91175),d=n(73117),f=n(94778),h=n(49224),p=n(72093),m=n(10118),v=n(48058),g=n(15235),y=n(85763),b=n(82230),w=n(64432),Z=n(59947),x=n(64318),C=n(77361),_=n(73789),S=function(e){var t=e.onClick,n=e.onDismiss,r=e.rounded,i=[p.l0.colWithGap(4),p.l0.align.start,p.l0.p(4),p.l0.pl(8),p.l0.flex.growAndShrink(1),r&&p.l0.borderRadius(8),{borderWidth:1,borderStyle:"solid",background:p.TV.accentPrimaryDimmest,borderColor:p.TV.accentPrimaryDimmer,color:p.TV.accentPrimaryStrongest}],o="function"==typeof n;return(0,l.tZ)(f.G,{css:i,children:(0,l.BX)(f.G,{css:[p.l0.rowWithGap(6),p.l0.align.center,p.l0.justify.spaceBetween,p.l0.width("100%")],children:[(0,l.BX)(f.G,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:[(0,l.tZ)(w.u,{tooltip:(0,l.tZ)(f.G,{css:[p.l0.colWithGap(4),p.l0.justify.start,p.l0.align.start],children:["Deploy to any URL","Configurable machine","Always on"].map(function(e,t){return(0,l.BX)(f.G,{css:[p.l0.rowWithGap(8),p.l0.align.center,p.l0.justify.center],children:[(0,l.tZ)(Z.Z,{size:12}),(0,l.tZ)(b.xv,{variant:"small",multiline:!1,children:e})]},t)})}),delay:"none",children:(0,l.tZ)(_.Z,{})}),(0,l.tZ)(b.xv,{css:p.l0.flex.growAndShrink(1),variant:"small",children:"Ready to share with the world?"})]}),(0,l.tZ)(g.zx,{colorway:"primary",iconLeft:(0,l.tZ)(C.Z,{}),text:"Deploy your app",onClick:t}),o?(0,l.tZ)(f.G,{css:{marginLeft:"auto"},children:(0,l.tZ)(y.hU,{alt:"dismiss",onClick:n,children:(0,l.tZ)(x.Z,{})})}):null]})})},k=n(60305),E=n(98250),T=n(50959);function R(e){var t,n=e.repl,r=e.onClick,i=(0,E.Z)("workspace","workspace-deployments-webview-banner"),o=i.shouldDisplay,a=i.register,c=i.dismiss;(0,T.useEffect)(function(){a()},[a]);var s=n.authorizations.viewDeploymentConfig.isAuthorized,u=(null===(t=n.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"&&n.hostingDeployment.currentBuild;return s&&!u&&o?(0,l.tZ)(f.G,{children:(0,l.tZ)(S,{onClick:function(){(0,k.j)(k.U3.DEPLOY_PROJECT_SELECTED,{source:"workspace_webview_deploy_banner"}),c(),r()},onDismiss:c,rounded:!1})}):null}var D=n(98924);function I(e){var t=e.actionType,n=(0,D._)(e,["actionType"]);(0,k.j)(k.U3.WS_WEBVIEW_USED,(0,o._)({type:t},n))}var B=n(30509),G=n(43182),A=n(12285),P=n(85733),L=n(36647),N=function e(t){"use strict";var n=t.initialRelativeUrl,r=t.initialPort,i=t.onChange,o=t.navigateTo,a=this;(0,A._)(this,e),this.history=[],this.historyIndex=-1,this.init=function(e,t){a.history.push({relativeUrl:e,port:t}),a.historyIndex=a.history.length-1,a.notifyChanges()},this.notifyChanges=function(){a.onChange(a.canGoBack(),a.canGoForward(),a.getCurrentRelativeUrl(),a.getCurrentPort())},this.canGoBack=function(){return a.historyIndex>0},this.canGoForward=function(){return a.historyIndex<a.history.length-1},this.getCurrentRelativeUrl=function(){return a.history[a.historyIndex].relativeUrl},this.getCurrentPort=function(){return a.history[a.historyIndex].port},this.push=function(e,t){"blank"!==e&&"srcdoc"!==e&&((e!==a.getCurrentRelativeUrl()||t!==a.getCurrentPort())&&(a.history=a.history.slice(0,a.historyIndex+1),a.history.push({relativeUrl:e,port:t}),a.historyIndex=a.history.length-1),a.notifyChanges())},this.relativeUrlUpdate=function(e){if(a.pendingNavigations>0){a.pendingNavigations-=1;return}a.push(e,a.getCurrentPort())},this.back=function(){I({actionType:"history_back"}),a.canGoBack()&&(a.historyIndex-=1,a.navigate(a.getCurrentRelativeUrl(),a.getCurrentPort()))},this.forward=function(){I({actionType:"history_forward"}),a.canGoForward()&&(a.historyIndex+=1,a.navigate(a.getCurrentRelativeUrl(),a.getCurrentPort()))},this.navigate=function(e,t){var n=null!=t?t:a.getCurrentPort();a.navigateTo.current(e,n),a.push(e,n),a.pendingNavigations+=1},this.refresh=function(){var e,t;I({actionType:"refresh"}),a.navigateTo.current(null!==(e=a.getCurrentRelativeUrl())&&void 0!==e?e:"/",null!==(t=a.getCurrentPort())&&void 0!==t?t:80)},this.setPort=function(e){var t=a.getCurrentRelativeUrl();a.navigate(t,e)},this.onChange=i,this.pendingNavigations=0,this.navigateTo=o,this.init(n,r)},O=n(42516),U=n(77450),M=n(32622),X=n(85638),F=n(18060),W=n(45271),H=n(54579),V=n(64479),z=n(2511),j=n(1383),q=n(76575),J=n(59249),Y=n(29318),$=n(37546),K=n(15434),Q=n(72883),ee=n(87128),et=n(72370),en=n(37058),er=n(47336),ei=n.n(er),eo=n(21262),ea=n(71440),el=n(58995),ec=n(99165);function es(){var e=(0,eo._)(["\n  fragment EditDomainRepl on Repl {\n    id\n    hostedUrl\n    apexProxy\n    domains {\n      hosting_deployment_id\n      domain\n      state\n    }\n  }\n"]);return es=function(){return e},e}function eu(){var e=(0,eo._)(["\n  query EditDomain($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...EditDomainRepl\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n  }\n  ","\n"]);return eu=function(){return e},e}function ed(){var e=(0,eo._)(["\n  query EditDomainCheckDomain2($replId: String!, $domain: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        checkDomain2(domain: $domain) {\n          ... on DomainStatus2 {\n            verified\n            retry\n            status\n            records {\n              A\n              TXT\n              CNAME\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on ServiceUnavailable {\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return ed=function(){return e},e}function ef(){var e=(0,eo._)(["\n  mutation EditDomainLinkReplDomain2(\n    $replId: String!\n    $domain: String!\n    $deploymentId: String\n  ) {\n    linkReplDomain2(\n      replId: $replId\n      domain: $domain\n      deploymentId: $deploymentId\n    ) {\n      __typename\n      ... on Repl {\n        id\n        ...EditDomainRepl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n  ","\n"]);return ef=function(){return e},e}function eh(){var e=(0,eo._)(["\n  mutation EditDomainUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...EditDomainRepl\n      }\n    }\n  }\n  ","\n"]);return eh=function(){return e},e}var ep={},em=(0,ea.Ps)(es()),ev=(0,ea.Ps)(eu(),em),eg=(0,ea.Ps)(ed()),ey=(0,ea.Ps)(ef(),em),eb=(0,ea.Ps)(eh(),em),ew=n(75993),eZ=n(66958),ex=n(29252),eC=n(55821),e_=n(32508),eS=n.n(e_);function ek(e){switch(e.status){case"verified":return(0,l.tZ)(Z.Z,{color:p.TV.accentPositiveDefault});case"failed":return(0,l.tZ)(x.Z,{color:p.TV.accentNegativeDefault});case"verifying":return(0,l.tZ)(Y.Z,{color:p.TV.accentPrimaryDefault});default:return null}}function eE(e){var t,n=e.replId,r=e.hostedUrl,i=e.desiredARecord,c=e.existingDomain,s=e.onLink,u=e.onGoBack,d=e.onLinkStarted,h=e.onStateChanged,m=(0,a._)((0,T.useState)(c?"loading":null),2),v=m[0],y=m[1],w=(0,a._)((0,T.useState)(!1),2),Z=w[0],x=w[1],C=(0,a._)((0,T.useState)(null),2),_=C[0],S=C[1],k=(0,a._)((0,T.useState)(!1),2),E=k[0],R=k[1],D=(0,a._)((t=(0,o._)({},ep,void 0),ec.D(ey,t)),2),I=D[0],B=D[1],A=(0,T.useRef)(null),P=(0,T.useRef)(null),L=(0,T.useRef)(null),N=function(e){(null==e?void 0:e.current)&&e.current.select()},O=function(e){(0,ew.Z)(e).catch(function(e){G.$e(function(t){t.setTag("domain-link",!0),t.setExtra("type","copy"),G.Tb(e)})})},U=(0,a._)((0,T.useState)(c||""),2),M=U[0],X=U[1];(0,T.useEffect)(function(){B.data&&"Repl"===B.data.linkReplDomain2.__typename&&s()},[B.data,s]);var W=function(){try{var e=new URL("/",M);X(e.hostname)}catch(e){}},H=function(e){y(e),h()},V=eS()(M,{require_valid_protocol:!1})&&M.split(".").length>=2,z=V&&2===M.split(".").length,j=r.replace(/^https:\/\//,""),q="replit-verify=".concat(n),J=(0,et.U)();return(0,l.BX)(f.G,{css:[p.l0.colWithGap(16)],children:[(0,l.BX)(f.G,{css:[p.l0.colWithGap(8)],children:[(0,l.tZ)(b.h4,{level:2,variant:"subheadDefault",children:"New Domain Link"}),(0,l.BX)(b.xv,{children:["Learn more"," ",(0,l.tZ)("a",{href:"https://docs.replit.com/additional-resources/hosting-web-pages",target:"_blank",children:"here"}),"."]})]}),(0,l.BX)(f.G,{css:[p.l0.colWithGap(4)],children:[(0,l.tZ)("label",{htmlFor:J("domain"),children:(0,l.tZ)(b.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Step 1: Enter your domain"})}),(0,l.tZ)(F.II,{className:"cname-url",readOnly:"loading"===v,value:M,onChange:function(e){X(e.target.value)},onBlur:function(){W()},placeholder:"example.com",id:J("domain")})]}),z&&!E?(0,l.BX)(f.G,{css:[p.l0.colWithGap(8)],children:[(0,l.BX)(f.G,{css:[p.l0.colWithGap(4)],children:[(0,l.tZ)("label",{htmlFor:J("record"),children:(0,l.BX)(b.xv,{color:"dimmer",variant:"small",multiline:!1,children:["Step 2: Add an ",(0,l.tZ)("code",{children:"A"})," Record"]})}),(0,l.BX)(f.G,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,l.tZ)(b.xv,{multiline:!1,css:{fontFamily:p.TV.fontFamilyCode,maxWidth:"40%"},children:M}),(0,l.tZ)(b.xv,{multiline:!1,css:{fontFamily:p.TV.fontFamilyCode},children:"A"}),(0,l.tZ)(F.II,{readOnly:!0,ref:A,onChange:function(){return null},value:i,onFocus:function(){return N(A)},id:J("record")}),(0,l.tZ)(g.zx,{onClick:function(){return O(i)},text:"Copy"})]})]}),(0,l.tZ)(f.G,{css:[p.l0.flex.row,p.l0.align.stretch],children:(0,l.tZ)(g.zx,{variant:"outlined",onClick:function(){return R(!0)},text:"Use CNAME record instead."})})]}):null,V&&(E||!z)?(0,l.BX)(f.G,{css:[p.l0.colWithGap(4)],children:[(0,l.tZ)("label",{htmlFor:J("CNAMERecord"),children:(0,l.BX)(b.xv,{color:"dimmer",variant:"small",multiline:!1,children:["Step 2: Add a ",(0,l.tZ)("code",{children:"CNAME"})," Record"]})}),(0,l.BX)(f.G,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,l.tZ)(b.xv,{multiline:!1,css:{fontFamily:p.TV.fontFamilyCode,maxWidth:"40%"},children:M}),(0,l.tZ)(b.xv,{multiline:!1,css:{fontFamily:p.TV.fontFamilyCode},children:"CNAME"}),(0,l.tZ)(F.II,{readOnly:!0,ref:L,onChange:function(){return null},value:j,onFocus:function(){return N(L)},id:J("CNAMERecord")}),(0,l.tZ)(g.zx,{onClick:function(){return O(j)},text:"Copy"})]}),z?(0,l.BX)(f.G,{css:[p.l0.colWithGap(8)],children:[(0,l.tZ)(b.xv,{variant:"small",children:'Note: this CNAME record requires that your DNS provider supports CNAMEs for apex domains - for example Cloudflare with "CNAME Flattening".'}),(0,l.tZ)(f.G,{css:[p.l0.flex.row,p.l0.align.stretch],children:(0,l.tZ)(g.zx,{onClick:function(){return R(!1)},text:"Use A record instead",variant:"outlined"})})]}):null]}):null,V?(0,l.BX)(f.G,{css:[p.l0.colWithGap(4)],children:[z?(0,l.tZ)("label",{htmlFor:J("txtRecord"),children:(0,l.BX)(b.xv,{color:"dimmer",variant:"small",multiline:!1,children:["This domain also requires a ",(0,l.tZ)("code",{children:"TXT"})," Record"]})}):(0,l.BX)("label",{children:['If you are using a service like Cloudflare (with "orange cloud") that rewrites domain records, you can add a ',(0,l.tZ)("code",{children:"TXT"})," ","Record for verification purposes."]}),(0,l.BX)(f.G,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,l.tZ)(b.xv,{multiline:!1,css:{fontFamily:p.TV.fontFamilyCode,maxWidth:"40%"},children:M}),(0,l.tZ)(b.xv,{multiline:!1,css:{fontFamily:p.TV.fontFamilyCode},children:"TXT"}),(0,l.tZ)(F.II,{readOnly:!0,ref:P,onChange:function(){return null},value:q,onClick:function(){return N(P)},id:J("txtRecord")}),(0,l.tZ)(g.zx,{onClick:function(){return O(q)},text:"Copy"})]})]}):null,"loading"===v?(0,l.tZ)(f.G,{css:[p.l0.colWithGap(12),p.l0.pt(16)],children:(0,l.tZ)(eD,{replId:n,domain:M,onVerified:function(){return H("verified")},onError:function(){return H("error")}})}):null,"verified"===v?(0,l.tZ)(f.G,{css:[p.l0.colWithGap(12),p.l0.pt(16)],children:(0,l.tZ)(b.xv,{multiline:!1,children:"Your domain has been verified."})}):null,"error"===v||_?(0,l.tZ)(f.G,{css:[p.l0.colWithGap(12),p.l0.pt(16)],children:(0,l.BX)(b.xv,{multiline:!1,children:["Creating the domain link failed",_?": "+_:"","."]})}):null,(0,l.BX)(f.G,{css:[p.l0.rowWithGap(12),p.l0.justify.end],children:[(0,l.tZ)(g.zx,{onClick:u,text:"Close"}),V&&null===v?(0,l.tZ)(g.zx,{disabled:Z,onClick:function(){x(!0),S(null),I({variables:{replId:n,domain:M}}).then(function(e){var t,n=(null===(t=e.data)||void 0===t?void 0:t.linkReplDomain2)||null;(null==n?void 0:n.__typename)==="Repl"?(S(null),H("loading")):(((null==n?void 0:n.__typename)==="ServiceUnavailable"||(null==n?void 0:n.__typename)==="NotFoundError"||(null==n?void 0:n.__typename)==="UnauthorizedError")&&S(null==n?void 0:n.message),H("error")),x(!1),d()}).catch(function(e){x(!1),S(e.message)})},text:"".concat(Z?"Linking domain...":"Link domain"),iconLeft:(0,l.tZ)(eZ.Z,{}),colorway:"primary"}):null]})]})}(r=i||(i={})).Verified="verified",r.Verifying="verifying",r.Failed="failed";var eT=(0,U.F4)({from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}),eR=(0,h.X)({loadingIndicator:[p.l0.width("20px"),p.l0.height("20px"),p.l0.border({color:p.TV.accentPrimaryDimmer,direction:"top",width:3}),{aspectRatio:"1 / 1",borderRadius:"100%",transform:"rotate(0deg)",animation:"linear ".concat(eT," 1s infinite")}]});function eD(e){var t=e.domain,n=e.replId,r=e.onVerified,i=e.onError,c=(d=(0,o._)({},ep,{variables:{replId:n,domain:t},pollInterval:1e3}),el.a(eg,d)),s=c.data,u=c.stopPolling;if((0,T.useEffect)(function(){if(s&&"Repl"===s.repl.__typename){var e,t,n=s.repl;if((null===(e=n.checkDomain2)||void 0===e?void 0:e.__typename)==="NotFoundError"){i();return}if((null===(t=n.checkDomain2)||void 0===t?void 0:t.__typename)==="DomainStatus2"){var o=n.checkDomain2,a=o.retry,l=o.verified;if(!l&&!a){i();return}(l||!a)&&u(),l&&r()}}},[s,u,r,i]),(null==s?void 0:s.repl.__typename)==="Repl"&&s.repl.checkDomain2){var d,h,m,v,g,y,w="DomainStatus2"===s.repl.checkDomain2.__typename?s.repl.checkDomain2:null,Z=null;if(null==w?void 0:w.records){var x=w.records;x.__typename,Z=(0,D._)(x,["__typename"])}var C=null;return(null==w?void 0:w.status)||((null===(y=s.repl.checkDomain2)||void 0===y?void 0:y.__typename)==="ServiceUnavailable"&&(C=s.repl.checkDomain2.message),C||(C="DNS updates can take up to 48 hours to fully synchronize. Feel free to check back later.")),(0,l.BX)(f.G,{css:[p.l0.colWithGap(16),p.l0.justify.spaceBetween],children:[(0,l.BX)(f.G,{css:[p.l0.rowWithGap(16),p.l0.align.center],children:[(0,l.tZ)("div",{css:eR.loadingIndicator}),(0,l.tZ)("div",{children:C})]}),Z||(null===(m=s.repl.checkDomain2)||void 0===m?void 0:m.__typename)==="DomainStatus2"&&(null===(v=s.repl.checkDomain2)||void 0===v?void 0:v.retry)||(null===(g=s.repl.checkDomain2)||void 0===g?void 0:g.__typename)==="ServiceUnavailable"?(0,l.BX)(f.G,{children:[(0,l.tZ)("br",{}),Z?(0,l.BX)(f.G,{children:["Currently, your domain’s records show:",(0,l.tZ)("pre",{css:[p.l0.overflow("scroll")],children:Object.entries(Z).map(function(e){var n=(0,a._)(e,2),r=n[0],i=n[1];return null==i?void 0:i.map(function(e){return(0,l.BX)("div",{children:[t," ",r," ",e]},"{domain}-{dnsType}")})})})]}):(0,l.tZ)(b.xv,{children:"Currently, your domain is either not returning any records, or something is getting in the way of our verification process."})]}):null]})}return(null==s?void 0:s.repl.__typename)==="Repl"&&(null===(h=s.repl.checkDomain2)||void 0===h?void 0:h.__typename)==="NotFoundError"?(0,l.tZ)(l.HY,{children:"We ran into an internal error while checking the domain. Please try again later."}):null}function eI(e){var t,n=e.replId,r=e.domain,i=e.onUnlink,c=e.onGoBack,s=(0,a._)((t=(0,o._)({},ep,{variables:{input:{id:n,removeDomain:r}}}),ec.D(eb,t)),2),u=s[0],d=s[1];return(0,T.useEffect)(function(){d.data&&d.data.updateRepl.repl&&i()},[d.data,i]),(0,l.BX)(f.G,{css:[p.l0.colWithGap(16)],children:[(0,l.BX)(f.G,{css:[p.l0.colWithGap(8)],children:[(0,l.tZ)(b.h4,{level:3,variant:"subheadDefault",children:"Domain Unlinking"}),(0,l.BX)(b.xv,{children:["Are you sure you want to unlink"," ",(0,l.tZ)("a",{target:"_blank",rel:"noopener",href:"https://"+r,children:r}),"?"]})]}),(0,l.BX)(f.G,{css:[p.l0.rowWithGap(12),p.l0.justify.end],children:[(0,l.tZ)(g.zx,{onClick:c,text:"Cancel"}),(0,l.tZ)(g.zx,{onClick:function(){d.loading||u()},text:d.loading?"Unlinking domain...":"Yes, unlink this domain",colorway:"negative",iconLeft:(0,l.tZ)(eC.Z,{}),disabled:d.loading})]})]})}function eB(e){var t=e.replId,n=e.hostedUrl,r=e.apexProxy,i=e.onUnlink,o=e.onLink,c=e.domains,s=e.refetch,u=(0,a._)((0,T.useState)("listing"),2),d=u[0],h=u[1],m=(0,a._)((0,T.useState)(null),2),v=m[0],y=m[1],Z=null;return"listing"===d?Z=(0,l.BX)(f.G,{css:[p.l0.colWithGap(16)],children:[(0,l.BX)(f.G,{children:[(0,l.tZ)(b.h4,{level:3,variant:"subheadDefault",children:"Currently Linked Domains"}),(0,l.tZ)(f.G,{css:[p.l0.colWithGap(16)],children:c.map(function(e){return e?(0,l.tZ)(f.G,{children:(0,l.BX)(f.G,{css:[p.l0.colWithGap(4),p.l0.justify.spaceBetween,p.l0.align.center],children:[(0,l.BX)(f.G,{css:[p.l0.rowWithGap(8),p.l0.align.center,p.l0.justify.spaceBetween,p.l0.width("100%")],children:[(0,l.tZ)(f.G,{css:[p.l0.flex.shrink(1)],children:(0,l.tZ)(w.u,{tooltip:e.domain,children:(0,l.tZ)(b.xv,{multiline:!1,children:e.domain})})}),(0,l.tZ)(f.G,{children:(0,l.tZ)(w.u,{tooltip:(0,l.tZ)(b.xv,{css:{textTransform:"capitalize"},multiline:!1,children:e.state}),children:(0,l.tZ)(ek,{status:e.state})})})]}),(0,l.BX)(f.G,{css:[p.l0.rowWithGap(12),p.l0.justify.end,p.l0.align.center,p.l0.width("100%"),"verified"!==e.state&&p.l0.pl(12)],children:[(0,l.tZ)(g.zx,{text:"Unlink",css:p.l0.width("verified"!==e.state?"50%":"100%"),onClick:function(){y(e.domain),h("unlinking")}}),"verified"!==e.state?(0,l.tZ)(g.zx,{text:"Check status",css:p.l0.width("50%"),onClick:function(){y(e.domain),h("linking")}}):null]})]})},e.domain):null})})]}),(0,l.tZ)(g.zx,{text:"Create domain link",onClick:function(){return h("linking")},iconLeft:(0,l.tZ)(ex.Z,{})})]}):"linking"===d?Z=(0,l.tZ)(eE,{replId:t,desiredARecord:r,hostedUrl:n,existingDomain:v,onLink:o,onGoBack:function(){h("listing"),y(null)},onLinkStarted:s,onStateChanged:s}):"unlinking"===d&&null!==v&&(Z=(0,l.tZ)(eI,{replId:t,domain:v,onUnlink:function(){s(),h("listing"),i()},onGoBack:function(){h("listing"),y(null)}})),(0,l.BX)(f.G,{css:[p.l0.colWithGap(16)],children:[(0,l.tZ)(b.h4,{level:1,variant:"subheadDefault",children:"Domain Linking"}),(0,l.BX)(b.xv,{css:{fontStyle:"italic"},children:["Domain linking to the development preview is deprecated, please consider switching to"," ",(0,l.tZ)("a",{href:"https://docs.replit.com/cloud-services/deployments/about-deployments",target:"_blank",children:"deployments"})," ","as a more scalable solution."]}),Z]})}var eG=n(95571),eA=n(12202),eP=n(53928),eL=(0,U.iv)([p.l0.borderRadius(6),p.l0.color.foregroundDimmer,p.l0.height(24)]),eN=[p.l0.reset.button,F.u3,p.l0.rowWithGap(0),p.l0.flex.grow(0),p.l0.color.accentPositiveStronger,p.l0.fontSize("small"),p.l0.focusRing,{"&:hover":[p.l0.cursor.pointer,p.l0.color.accentPositiveStrongest]},{borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:0},p.l0.align.center,p.l0.py(0),p.l0.px(4)],eO=(0,h.X)({root:[p.l0.flex.row,p.l0.align.center,p.l0.justify.spaceBetween,p.l0.border({color:p.TV.outlineDimmest,direction:"bottom"}),p.l0.p(2),p.l0.container("root"),p.l0.zIndex(1),p.l0.p(4),p.l0.gap(4)],devControls:[p.l0.flex.row,p.l0.gap(4)],navControls:[p.l0.align.center,p.l0.rowWithGap(4),p.l0.flex.growAndShrink(1)],urlWrapper:[p.l0.position.relative,p.l0.flex.row,p.l0.flex.growAndShrink(1)],urlOptionsRoot:[p.l0.rowWithGap(0),p.l0.flex.growAndShrink(1),p.l0.overflow("hidden")],urlOptions:[p.l0.p(8),p.l0.colWithGap(6),p.l0.borderRadius(4)],urlOptionsSection:[p.l0.colWithGap(4),p.l0.pb(8),p.l0.border({direction:"bottom"}),{":last-child":{borderBottom:0}}],urlOptionsTitle:[p.l0.rowWithGap(0),p.l0.justify.spaceBetween,p.l0.flex.grow(1)],portRadioGroup:[p.l0.colWithGap(8)],portOption:[p.l0.rowWithGap(8),p.l0.color.foregroundDimmer],portOptionSelected:[p.l0.rowWithGap(8),p.l0.color.foregroundDefault],portOptionLabel:[{"&:hover":[p.l0.cursor.pointer,p.l0.color.foregroundDefault]}],temporaryDevLinkWrapper:[p.l0.rowWithGap(4)],temporaryDevLinkText:{flex:"0 1 auto"},temporaryDevLink:[p.l0.display.block,p.l0.color.accentPositiveStronger,p.l0.fontSize("small"),p.l0.focusRing,{wordBreak:"break-all","&:hover":[p.l0.cursor.pointer,p.l0.color.accentPositiveStrongest]}],url:eN,urlSelected:[eN,p.l0.backgroundColor.backgroundHighest,{borderBottomLeftRadius:0}],urlPath:[p.l0.py(0),p.l0.fontSize(12),p.l0.flex.grow(1)],urlPath2:[p.l0.py(0),p.l0.fontSize(12),p.l0.flex.grow(1),{borderTopLeftRadius:0,borderBottomLeftRadius:0}],urlDots:[p.l0.backgroundColor.greenDimmer,p.l0.borderRadius(4),p.l0.p(2),{lineHeight:1,"&:hover":[p.l0.cursor.pointer,p.l0.backgroundColor.greenDefault]}],goButton:[p.l0.position.absolute,p.l0.right(4),p.l0.top("50%"),{transform:"translateY(-50%)"}],text:[p.l0.ml(8),p.l0.mr(4),p.l0.color.foregroundDimmest],buttons:[p.l0.flex.row,p.l0.align.center,(0,O._)({},p.nC.max(500,"root"),{"svg + span":{display:"none"},svg:{marginRight:0}})],navButton:[p.l0.p(6),p.l0.borderRadius(4),p.l0.flex.shrink(0),{border:"none"}],fakeUrl:[p.l0.fontSize(12),p.l0.border(),{boxSizing:"content-box"},p.l0.borderRadius(6),p.l0.px(8),p.l0.py(2),p.l0.flex.grow(1),p.l0.rowWithGap(4),p.l0.align.center],devtoolsErrorsBadge:[p.l0.position.absolute,p.l0.center,p.l0.textAlign.center,p.l0.backgroundColor.accentNegativeStronger,p.l0.color.accentNegativeDimmest,p.l0.right(0),p.l0.top(-2),p.l0.p(2),p.l0.minWidth(14),p.l0.height(14),p.l0.borderRadius(16),p.l0.fontSize(10)]});function eU(e){var t=e.children;return(0,l.tZ)(w.u,{tooltip:"Dev URLs are only active when someone is in the workspace. The dev URL is also subject to change. For production hosting, use Deployments.",children:t})}function eM(e){var t=e.replId,n=e.url,r=e.webviewEventMonitorState,i=e.navigationState,s=e.forwardedPorts,u=e.canEditDomain,d=e.devtoolsErrorCount,h=e.iframeLoading,m=e.onToggleDevtools,v=e.onOpenPortSettings,y=(0,c.Z)(),w=function(e){var t,n,r,i=(t=(0,o._)({},ep,{variables:{replId:e}}),el.a(ev,t)),l=i.data,c=i.refetch,s=(0,a._)((0,T.useState)(!1),2),u=s[0],d=s[1],f=(0,T.useRef)(!1);if(!l||"Repl"!==l.repl.__typename)return{showEditReplcoDomainButton:!1};var h=null!==(r=null===(n=l.repl.domains)||void 0===n?void 0:n.filter(Boolean).filter(function(e){return!(null==e?void 0:e.hosting_deployment_id)}).map(function(e){return{domain:e.domain,state:e.state}}))&&void 0!==r?r:[];return h.length||f.current?(f.current=!0,{showEditReplcoDomainButton:!0,setIsEditingDomain:d,isEditingDomain:u,editDomainProps:{domains:h,refetch:c,replId:e,apexProxy:l.repl.apexProxy,hostedUrl:l.repl.hostedUrl,onUnlink:function(){c(),d(!1)},onLink:function(){c(),d(!1)}}}):{showEditReplcoDomainButton:!1}}(t),Z=(0,l.tZ)(eH,{});return"external-page"===r.state?Z=(0,l.tZ)(eW,{backToLocal:function(){return i.refresh()}}):"active"===r.state&&(Z=(0,l.tZ)(eF,{url:n,navigationState:i,forwardedPorts:s,iframeLoading:h,onOpenPortSettings:v})),(0,l.BX)(V.Tg,{css:eO.root,children:[Z,(0,l.tZ)(f.G,{css:p.l0.flex.row,children:(0,l.BX)(f.G,{css:eO.buttons,children:[u&&w.showEditReplcoDomainButton?(0,l.BX)(l.HY,{children:[(0,l.tZ)(g.zx,{variant:"outlined",size:"small",text:"Edit custom domain",onClick:function(){return w.setIsEditingDomain(!w.isEditingDomain)},iconLeft:(0,l.tZ)(q.Z,{size:16})}),(0,l.tZ)(W.u,{isOpen:w.isEditingDomain,onRequestClose:function(){return w.setIsEditingDomain(!1)},children:(0,l.tZ)(eB,(0,o._)({},w.editDomainProps))})]}):null,(0,l.BX)(f.G,{css:eO.devControls,children:["active"===r.state?(0,l.BX)(f.G,{css:p.l0.position.relative,children:[(0,l.tZ)(g.zx,{size:"small",variant:"outlined",onClick:m,css:eL,text:"Devtools",iconLeft:(0,l.tZ)(Q.Z,{})}),d>0?(0,l.tZ)(f.G,{css:eO.devtoolsErrorsBadge,children:(0,l.tZ)(b.xv,{variant:"small",multiline:!1,children:d>99?"99+":d.toString()})}):null]}):null,(0,l.tZ)(eU,{children:(0,l.tZ)(X.Z,{size:"small",variant:"outlined",css:eL,href:i.getExternalUrl(),target:"_blank",iconLeft:(0,l.tZ)(J.Z,{}),text:y?"Open in the browser":"New tab",onClick:function(){I({actionType:"open_new_window"})}})})]})]})})]})}function eX(e){var t=e.url,n=e.navigationState,r=e.forwardedPorts,i=e.onOpenPortSettings,o=n.canNavigateToInputRelativeUrl,c=n.navigateToInputRelativeUrl,s=n.inputRelativeUrl,u=n.setInputRelativeUrl,d=n.selectedPort,h=n.setPort,p=(0,a._)((0,T.useState)(!1),2),v=p[0],g=p[1],w=(0,et.U)(),Z=w("radioGroup");return(0,l.BX)(f.G,{css:eO.urlOptionsRoot,children:[(0,l.BX)(eP.xo,{isOpen:v,onOpenChange:g,label:"Show URL Options",background:"higher",children:[(0,l.BX)("button",{css:v?eO.urlSelected:eO.url,children:[(0,l.tZ)(eU,{children:(0,l.tZ)(f.G,{css:eO.urlDots,children:"{...}"})}),".".concat(t.includes("replit.dev")?"replit.dev":"repl.co").concat((0,m.O2)(d)?"":":"+d)]}),(0,l.BX)(V.Tg,{css:eO.urlOptions,children:[(0,l.BX)(f.G,{css:eO.urlOptionsSection,children:[(0,l.BX)(f.G,{css:eO.urlOptionsTitle,children:[(0,l.BX)(b.xv,{children:["Listening on ",(0,M.Z)("port",r.length),":"]}),(0,l.tZ)(y.hU,{alt:"Networking tool",onClick:i,children:(0,l.tZ)(K.Z,{})})]}),(0,l.tZ)(H.E,{tag:"fieldset",css:eO.portRadioGroup,name:Z,value:d.toString(),onChange:function(e){h(parseInt(e.target.value,10)),g(!1)},children:r.map(function(e,t){return(0,l.BX)(f.G,{css:d===e.configuration.externalPort?eO.portOptionSelected:eO.portOption,children:[(0,l.tZ)(H.Y,{id:w(e.configuration.externalPort),value:e.configuration.externalPort.toString()}),(0,l.tZ)("label",{htmlFor:w(e.configuration.externalPort),css:eO.portOptionLabel,children:":".concat(e.configuration.localPort," → :").concat(e.configuration.externalPort)})]},"".concat(t,"-").concat(e.configuration.externalPort,":").concat(e.configuration.localPort))})})]}),(0,l.BX)(f.G,{css:eO.urlOptionsSection,children:[(0,l.tZ)(b.xv,{children:"Dev URL:"}),(0,l.BX)(f.G,{css:eO.temporaryDevLinkWrapper,children:[(0,l.tZ)(b.xv,{css:eO.temporaryDevLinkText,maxLines:1,children:(0,l.tZ)(ei(),{legacyBehavior:!0,href:t,passHref:!0,children:(0,l.tZ)("a",{css:eO.temporaryDevLink,target:"_blank",children:t})})}),(0,l.tZ)(eA.m,{textToCopy:t,tooltipText:"Copy link",tooltipDelay:"none",size:18})]}),(0,l.tZ)(b.xv,{color:"dimmer",variant:"small",children:"Dev URLs are temporary and will sleep after you leave the workspace."})]})]})]}),(0,l.tZ)(F.II,{css:eO.urlPath2,style:v?{borderBottomRightRadius:0}:{},value:s,onKeyDown:function(e){"Enter"===e.key&&o&&c()},onChange:function(e){if(""===e.currentTarget.value){u("/");return}u(e.target.value)}})]})}function eF(e){var t=e.url,n=e.navigationState,r=e.forwardedPorts,i=e.iframeLoading,o=e.onOpenPortSettings,a=n.canNavigateBack,c=n.navigateBack,s=n.canNavigateForward,u=n.navigateForward,d=n.canNavigateToInputRelativeUrl,h=n.navigateToInputRelativeUrl,p=n.refresh,m=(0,eG.NJ)(),v=(0,en.gf)("webviewpane.reload");return(0,l.BX)(f.G,{css:eO.navControls,children:[(0,l.tZ)(y.hU,{alt:"Back",tooltipDelay:"long",onClick:c,disabled:!a,css:eO.navButton,children:(0,l.tZ)(z.Z,{})}),(0,l.tZ)(y.hU,{alt:"Forward",tooltipDelay:"long",onClick:u,disabled:!s,css:eO.navButton,children:(0,l.tZ)(j.Z,{})}),(0,l.tZ)(y.hU,{alt:"Refresh".concat(v?" (".concat((0,en.Ih)(v,m),")"):""),tooltipDelay:"long",onClick:p,css:eO.navButton,children:i?(0,l.tZ)(Y.Z,{}):(0,l.tZ)($.Z,{})}),(0,l.BX)(f.G,{css:eO.urlWrapper,children:[(0,l.tZ)(eX,{url:t,navigationState:n,forwardedPorts:r,onOpenPortSettings:o}),(0,l.tZ)(V.Tg,{elevated:!0,css:eO.goButton,children:(0,l.tZ)(y.hU,{alt:"Go to URL",disabled:!d,onClick:h,size:18,tooltipContents:(0,l.tZ)(en.bM,{keyCombo:"Enter"}),children:(0,l.tZ)(j.Z,{})})})]})]})}function eW(e){var t=e.backToLocal,n=(0,a._)((0,T.useState)(!1),2),r=n[0],i=n[1];return(0,l.BX)(f.G,{css:eO.navControls,children:[(0,l.tZ)(g.zx,{size:"small",variant:"outlined",onClick:function(){t(),i(!0)},loading:r,css:eL,text:"Back to my page",iconLeft:r?(0,l.tZ)(Y.Z,{}):(0,l.tZ)(z.Z,{})}),(0,l.BX)(V.Tg,{elevated:!0,css:eO.fakeUrl,children:[(0,l.tZ)(w.u,{tooltip:"The URL bar is not supported when navigating to external pages. You can open in a new tab to use your browser instead.",delay:"none",placement:"auto",children:(0,l.tZ)(ee.Z,{})}),(0,l.tZ)(b.xv,{variant:"small",color:"dimmer",children:"External page"})]})]})}function eH(){return(0,l.tZ)(f.G,{css:eO.navControls,children:(0,l.BX)(V.Tg,{elevated:!0,css:eO.fakeUrl,children:[(0,l.tZ)(w.u,{tooltip:"Page is loading, please wait.",delay:"none",placement:"auto",children:(0,l.tZ)(Y.Z,{})}),(0,l.tZ)(b.xv,{variant:"small",color:"dimmer",children:"Loading your page"})]})})}var eV=n(94563),ez=80;function ej(e,t){var n=function(e,t){var n=void 0;if((null==e?void 0:e.portType)==="external")n=null==e?void 0:e.port;else if((null==e?void 0:e.portType)==="local"){var r=t.find(function(t){return t.configuration.localPort===e.port});n=null==r?void 0:r.configuration.externalPort}return n}(e,t);return n||(t.length>0?t.find(function(e){return 80===e.configuration.externalPort})?80:t[0].configuration.externalPort:void 0)}var eq=(0,h.X)({desktopAppWebview:[p.l0.flex.growAndShrink(1),{border:"none",backgroundColor:p.TV.white}],iframe:[p.l0.flex.growAndShrink(1),{border:"none",display:"block",backgroundColor:p.TV.white}],self:[p.l0.backgroundColor.backgroundDefault,p.l0.height("100%"),p.l0.borderRadius(4),{overflow:"hidden"}]});function eJ(e){var t,n,r,i,h,p,g,y,b,w,Z,x,C,_,S,E,D,A,O,U,M,X,F,W,H,V,z,j,q,J,Y,$,K,Q,ee,et=e.initialPort,en=e.initialPath,er=void 0===en?"/":en,ei=e.openPane,eo=e.containerRef,ea=e.openNetworkingTool,el=e.setRefreshCb,ec=(0,T.useId)(),es=(0,s.Z)(),eu=(0,c.Z)(),ed=(0,eV.I5)({variables:{id:es}}).data,ef=(null==ed?void 0:ed.repl.__typename)==="Repl"?ed.repl:null,eh=(0,T.useRef)(null),ep=(0,T.useRef)(!1),em=(0,a._)((0,T.useState)(!0),2),ev=em[0],eg=em[1],ey=(0,a._)((0,T.useState)(0),2),eb=ey[0],ew=ey[1],eZ=(0,m.J_)(es),ex=(0,v.bg)(),eC=(n=(t={replId:es,webviewId:ec,isHTML:(0,u.T)(),iframeOrWebviewRef:eh,iframeSrc:null==eZ?void 0:eZ.iframeSrc,onLoaded:function(){return eg(!1)},onDevtoolsErrorCountChange:ew}).replId,r=t.webviewId,i=t.isHTML,h=t.iframeOrWebviewRef,p=t.iframeSrc,g=t.onLoaded,y=t.onDevtoolsErrorCountChange,w=(b=(0,a._)((0,T.useState)({state:"loading",relativeUrl:null}),2))[0],Z=b[1],x=(0,c.Z)(),(0,T.useEffect)(function(){if(x&&p){if(!h.current)throw Error("Expected iframe to be defined when iframerc exists");var e=h.current,t=new URL(p);return e.addEventListener("did-navigate",n),e.addEventListener("did-navigate-in-page",n),function(){e.removeEventListener("did-navigate",n),e.removeEventListener("did-navigate-in-page",n)}}function n(e){var n=new URL(e.url),r=n.pathname+n.search+n.hash;if("did-navigate-in-page"===e.type&&g(),n.hostname!==t.hostname){Z(function(e){return"external-page"===e.state?e:{state:"external-page",relativeUrl:null}});return}Z(function(e){return"active"===e.state&&e.relativeUrl===r?e:{state:"active",relativeUrl:r}})}},[x,p,h,g]),(0,T.useEffect)(function(){if(!x&&p){var e=new URL(p);return window.addEventListener("message",t),function(){window.removeEventListener("message",t)}}function t(t){if(t.origin&&"null"!==t.origin&&new URL(t.origin).hostname===e.hostname&&"object"==typeof t.data&&(null===(a=t.data)||void 0===a?void 0:a.type)){var a,l,c=h.current,s=t.data;if(null==s||!s.id||s.id===r)switch(s.type){case"ready":g(),t.data.wasShown&&(null==c||null===(l=c.contentWindow)||void 0===l||l.postMessage({type:"toggleDevtools",source:"automatic"},"*"));break;case"event":var u=t.data,d=u.event,f=u.payload;"error"===d?G.Tb(f):(0,k.j)(d,(0,B._)((0,o._)({},f),{replId:n,isHTML:i}));break;case"show-badge":y(t.data.count);break;case"page-navigation":if(s.payload.isExternal){Z(function(e){return"external-page"===e.state?e:{state:"external-page",relativeUrl:null}});return}var p=s.payload.path;Z(function(e){return"active"===e.state&&e.relativeUrl===p?e:{state:"active",relativeUrl:p}})}}}},[n,r,x,i,p,h,g,y]),{webviewEventMonitorState:w}).webviewEventMonitorState,e_=null!=eZ;(0,T.useEffect)(function(){eu&&e_&&eh.current.addEventListener("dom-ready",function(){ep.current=!0})},[eu,e_]);var eS=(0,T.useCallback)(function(e,t){if(ew(0),eZ&&eh.current&&(null==eZ?void 0:eZ.iframeSrc)){if(eu){if(!ep.current)return;var n,r=eh.current,i=new URL(e,eZ.iframeSrc);t&&(i=(0,m.hw)(i.toString(),t)),r.loadURL(i.toString()),eg(!0);return}if(null===(n=eh.current)||void 0===n?void 0:n.contentWindow){var o=(0,m.hw)(null==eZ?void 0:eZ.iframeSrc,t);o.searchParams.set("initialPath",e),o.searchParams.set("id",ec),eh.current.src=o.href,eg(!0)}}},[eZ,ec,eu]),ek=(_=(C={initialPort:et,initialPath:er,presentationalUrl:null==eZ?void 0:eZ.presentationUrl,webviewEventMonitorState:eC,navigateTo:function(e,t){return eS(e,t)}}).initialPort,S=C.initialPath,E=C.presentationalUrl,D=C.webviewEventMonitorState,A=C.navigateTo,U=(O=(0,a._)((0,T.useState)(!1),2))[0],M=O[1],F=(X=(0,a._)((0,T.useState)(!1),2))[0],W=X[1],V=(H=(0,a._)((0,T.useState)("Loading..."),2))[0],z=H[1],q=(j=(0,a._)((0,T.useState)(80),2))[0],J=j[1],Y=(0,T.useCallback)(function(e,t,n,r){M(e),W(t),z(n),J(r)},[]),$=(0,P.Z)(A),K=(0,P.Z)(_),Q=(0,P.Z)(S),ee=(0,L.Z)(function(){return new N({initialRelativeUrl:Q.current,initialPort:K.current,onChange:Y,navigateTo:$})},[Q,K,Y,$]),(0,T.useEffect)(function(){"loading"===D.state&&K.current!==q&&ee.setPort(K.current)},[_,K,ee,q,D]),(0,T.useEffect)(function(){"active"===D.state&&ee.relativeUrlUpdate(D.relativeUrl)},[D.state,D.relativeUrl,ee]),{canNavigateBack:U,canNavigateForward:F,navigateBack:ee.back,navigateForward:ee.forward,canNavigateToInputRelativeUrl:V!==D.relativeUrl,navigateToInputRelativeUrl:function(){I({actionType:"navigated_to",path:V}),ee.navigate(V)},inputRelativeUrl:V,setInputRelativeUrl:z,refresh:ee.refresh,setPort:ee.setPort,selectedPort:q,getExternalUrl:function(){return(0,m.hw)(E||"",q)+V}}),eE=(0,v.vU)(ek.selectedPort);return((0,T.useEffect)(function(){eE&&eE.configuration.isLocalhost&&"loading"===eC.state&&ek.refresh()},[ek,eE,eC.state]),(0,T.useEffect)(function(){el(function(){return ek.refresh})},[ek.refresh,el]),ef&&eZ)?(0,l.BX)(f.G,{css:eq.self,innerRef:eo,children:[(0,l.tZ)(eM,{replId:es,url:eZ.presentationUrl,webviewEventMonitorState:eC,navigationState:ek,forwardedPorts:ex,canEditDomain:ef.authorizations.addCustomDomain.isAuthorized,devtoolsErrorCount:eb,iframeLoading:ev,onToggleDevtools:function(){if(I({actionType:"devtools_opened"}),ew(0),!eu){var e,t;null===(t=eh.current)||void 0===t||null===(e=t.contentWindow)||void 0===e||e.postMessage({type:"toggleDevtools",source:"manual"},"*");return}var n=eh.current;n&&ep&&(n.isDevToolsOpened()?n.closeDevTools():n.openDevTools())},onOpenPortSettings:ea}),(0,l.tZ)(R,{repl:ef,onClick:function(){return ei({type:"deployments"})}}),eu?(0,l.tZ)("webview",(0,o._)({"data-cy":"ws-webview",ref:eh,src:eY({url:eZ.iframeSrc,port:et,path:er,id:ec}).toString(),css:eq.desktopAppWebview},d.Z)):(0,l.tZ)("iframe",(0,o._)({title:"webview","data-cy":"ws-webview",ref:eh,src:eY({url:eZ.iframeSrc,port:et,path:er,id:ec}).toString(),css:eq.iframe},d.Z))]}):null}function eY(e){var t=e.url,n=e.port,r=e.path,i=e.id,o=new URL(t);return(0,m.O2)(n)?o.port="":o.port=n.toString(),o.searchParams.set("initialPath",r),o.searchParams.set("id",i),o}},51500:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(45929),i=n(50959);function o(e){var t=e.container,n=e.runner,o=e.refreshWebView;(0,i.useEffect)(function(){var e,i=[];return"outputs"===n.mode&&i.push(n.onBlockChanged(function(t){t.type===r.kH.EXECUTION&&1===t.data.exitCode&&(e=Date.now())})),i.push(t.onPortOpened(function(t){var n=t.isVnc;if(t.isForwarded&&!n){var r=Date.now();void 0!==e&&r-e<1e3||o()}})),function(){return i.forEach(function(e){return e()})}},[t,o,n])}},95751:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(45929),i=n(50959);function o(e){var t=e.runner,n=e.refreshWebView;(0,i.useEffect)(function(){if("html"===t.mode)return t.onStateChanged(function(e){e===r.Ah.RUNNING&&n()})},[t,n])}},70972:function(e,t,n){n.d(t,{A:function(){return ee},Z:function(){return eo}});var r=n(66626),i=n(4216),o=n(82230),a=n(94778),l=n(49224),c=n(72093),s=n(37715),u=n(85763),d=n(21822),f=n(50959),h=n(19068),p=n(18060),m=n(57704),v=n(2511),g=n(15235),y=n(99149),b=n(64479),w=n(99007),Z=n(55821),x=n(35970),C=new Map(m.zY.anyOf.map(function(e){return[e.properties.task.const,e]})),_=new Set(C.keys());function S(e){var t=(0,d.Vg)(e),n=(0,d.Fq)(),r=(0,d.lP)(),a=(0,d.uL)();return t?(0,i.tZ)(E,{inititalConfig:t,onArgsBlur:a,onChange:function(t,n){null!==t&&r(e,t,{persist:"task"===n})},onRemove:function(){return n(e)}}):(0,i.tZ)(o.xv,{children:"Task not found"})}var k=(0,l.X)({root:[c.l0.borderRadius(4),c.l0.p(6),c.l0.colWithGap(4)],taskRow:[c.l0.rowWithGap(4),c.l0.align.center,c.l0.justify.spaceBetween],args:[c.l0.colWithGap(2)]});function E(e){var t,n=(0,r._)((0,f.useState)((null===(t=e.inititalConfig)||void 0===t?void 0:t.task)||null),2),l=n[0],c=n[1],s=(0,r._)((0,f.useState)(e.inititalConfig&&"args"in e.inititalConfig?e.inititalConfig.args:null),2),d=s[0],h=s[1],m=Array.from(C.keys()).map(function(e){return{id:e}}),v=l?function(e){var t,n=C.get(e);if(!n||!("args"in n.properties))return null;var r=null===(t=n.required)||void 0===t?void 0:t.includes("args");return{type:n.properties.args.type,required:r}}(l):null;function g(t){var n="task"===t.type?{task:"task"===t.type?t.task:l,args:l!==t.task?null:d}:{task:l,args:t.args};c(n.task),h(n.args);var r=n.task?C.get(n.task):null;if(!r)return null;try{e.onChange(y.B4.Decode(r,n),t.type)}catch(n){e.onChange(null,t.type)}}return(0,i.BX)(b.Tg,{elevated:!0,css:k.root,children:[(0,i.BX)(a.G,{css:k.taskRow,children:[(0,i.tZ)(w.P,{"aria-label":"Select a task",selectedKey:l,onSelectionChange:function(e){!function(e){if(!_.has(e))throw Error("Invalid task name: ".concat(e," (expected one of ").concat(Array.from(_),")"))}(e),g({type:"task",task:e})},items:m,children:function(e){return(0,i.tZ)(x.m9,{label:e.id},e.id)}}),(0,i.tZ)(u.hU,{alt:"Remove task",onClick:e.onRemove,children:(0,i.tZ)(Z.Z,{})})]}),v?(0,i.BX)(a.G,{css:k.args,children:[(0,i.BX)(o.xv,{variant:"small",color:"dimmest",children:["Args (",v.type,")"]}),(0,i.tZ)(p.II,{onBlur:e.onArgsBlur,onChange:function(e){var t=e.currentTarget.value;g({type:"args",args:"number"===v.type?Number(t):t})},required:v.required,value:d?d.toString():"",type:v.type})]}):null]})}var T=n(39864),R=n(78377),D=n(54590),I=n(80952),B=n(45271),G=n(29252),A=n(67242);function P(e){var t=e.mode,n=void 0===t?"sequential":t,r=e.onChange;return(0,i.BX)(D.hE,{name:"mode",onChange:r,row:!0,value:null!=n?n:"sequential",children:[(0,i.tZ)(D.rK,{id:"sequential",text:"Sequential",value:"sequential"}),(0,i.tZ)(D.rK,{id:"parallel",text:"Parallel",value:"parallel"})]})}function L(e){return(0,i.tZ)(a.G,{css:N.nav,children:(0,i.tZ)(g.zx,{size:"small",variant:"nofill",onClick:e.onBack,iconLeft:(0,i.tZ)(v.Z,{}),text:"Workflows"})})}var N=(0,l.X)({root:[c.l0.colWithGap(16)],nav:[c.l0.flex.row],content:[c.l0.colWithGap(8)],inputRow:[c.l0.colWithGap(2)],tasks:[c.l0.colWithGap(8)]});function O(e){var t=e.index,n=e.onDelete,l=(0,d.uL)(),c=(0,d.DW)(t),u=(0,d.xI)(),h=(0,d.G8)(),v=(0,d.IV)(t),y=(0,r._)((0,f.useState)(!1),2),b=y[0],w=y[1],x=(0,s.U)(function(e){return function(t){var n=t.workflowId;return e.workflows.runWorkflow.rpc({workflowId:n})}},[]);if(!c)return(0,i.tZ)(o.xv,{children:"Workflow not found"});var C=(null==v?void 0:v.step)===m.KX.RUNNING;return(0,i.BX)(i.HY,{children:[(0,i.BX)(a.G,{css:N.root,children:[(0,i.tZ)(g.zx,{size:"small",onClick:function(){return null==x?void 0:x({workflowId:c.name})},loading:C,iconLeft:C?(0,i.tZ)(R.Z,{}):(0,i.tZ)(T.Z,{}),text:"Run Workflow"}),(0,i.tZ)(A.R,{}),(0,i.BX)(a.G,{css:N.content,children:[(0,i.BX)(a.G,{css:N.inputRow,children:[(0,i.tZ)(o.xv,{variant:"small",color:"dimmest",children:"Name"}),(0,i.tZ)(p.II,{onBlur:l,value:c.name,onChange:function(e){u(t,function(t){t.name=e.currentTarget.value})}})]}),(0,i.BX)(a.G,{css:N.inputRow,children:[(0,i.tZ)(o.xv,{variant:"small",color:"dimmest",children:"Mode"}),(0,i.tZ)(P,{mode:c.mode,onChange:function(e){u(t,function(t){t.mode=e}),l()}})]}),(0,i.BX)(a.G,{css:N.inputRow,children:[(0,i.tZ)(o.xv,{variant:"small",color:"dimmest",children:"Tasks"}),(0,i.BX)(a.G,{css:N.tasks,children:[c.tasks.map(function(e,n){return(0,i.tZ)(S,{workflowIndex:t,taskIndex:n},n.toString())}),(0,i.tZ)(g.zx,{iconLeft:(0,i.tZ)(G.Z,{}),text:"Add task",onClick:function(){return h(t)}})]})]})]}),(0,i.tZ)(A.R,{}),(0,i.tZ)(g.zx,{iconLeft:(0,i.tZ)(Z.Z,{}),text:"Delete Workflow",colorway:"red",variant:"outlined",onClick:function(){return w(!0)}})]}),(0,i.tZ)(B.u,{isOpen:b,onRequestClose:function(){return w(!1)},children:(0,i.tZ)(I.Z,{name:"Workflow",hideModal:function(){return w(!1)},delete:n})})]})}var U=n(80888),M=n(61114),X=n(91893),F=n(41974),W=n(38117),H=(0,l.X)({root:[c.l0.colWithGap(12)],inputs:[c.l0.colWithGap(8)],tasks:[c.l0.colWithGap(8)],inputRow:[c.l0.colWithGap(2)]});function V(e){var t=(0,r._)((0,f.useState)(""),2),n=t[0],l=t[1],c=(0,r._)((0,f.useState)([null]),2),s=c[0],u=c[1],d=(0,r._)((0,f.useState)(void 0),2),h=d[0],m=d[1],v=(0,f.useMemo)(function(){if(!n||!s.length)return(0,W.UG)("invalid");var e=[],t=!0,r=!1,i=void 0;try{for(var o,a=s[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(null===l)return(0,W.UG)("invalid");e.push(l)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return(0,W.Ok)({name:n,mode:h,tasks:e})},[n,h,s]);return(0,i.BX)(X.l0,{css:H.root,onSubmit:function(t){t.preventDefault(),v.ok&&e.onCreate(v.value)},children:[(0,i.BX)(a.G,{css:H.inputs,children:[(0,i.BX)(a.G,{css:H.inputRow,children:[(0,i.tZ)(o.xv,{variant:"small",color:"dimmest",children:"Name"}),(0,i.tZ)(p.II,{required:!0,placeholder:"Workflow name",value:n,onChange:function(e){return l(e.currentTarget.value)}})]}),(0,i.BX)(a.G,{css:H.inputRow,children:[(0,i.tZ)(o.xv,{variant:"small",color:"dimmest",children:"Mode"}),(0,i.tZ)(P,{mode:h,onChange:m})]}),(0,i.BX)(a.G,{css:H.inputRow,children:[(0,i.tZ)(o.xv,{variant:"small",color:"dimmest",children:"Tasks"}),(0,i.BX)(a.G,{css:H.tasks,children:[s.map(function(e,t){return(0,i.tZ)(E,{onChange:function(e){u(function(n){return(0,F.Uy)(n,function(n){n[t]=e})})},onRemove:function(){u(function(e){return(0,F.Uy)(e,function(e){e.splice(t,1)})})}},"newTask"+t)}),(0,i.tZ)(g.zx,{size:"small",text:"Add task",type:"button",onClick:function(){u(function(e){return(0,F.Uy)(e,function(e){e.push(null)})})},iconLeft:(0,i.tZ)(G.Z,{})})]})]})]}),(0,i.tZ)(g.zx,{colorway:"primary",disabled:!v.ok,text:"Create Workflow",type:"submit"})]})}var z=n(29318),j=n(46298),q=n(64318),J=n(76575),Y=(0,l.X)({root:[c.l0.colWithGap(6)],item:[c.l0.rowWithGap(4),c.l0.align.center,c.l0.justify.spaceBetween]});function $(e){var t=e.index,n=(0,r._)((0,f.useState)(!1),2),l=n[0],c=n[1],s=(0,d.DW)(t),h=en(t),p=(0,j.Z)(null==h?void 0:h.isRunningObservable);return s&&h?l?(0,i.BX)(a.G,{css:K.root,children:[(0,i.BX)(a.G,{css:K.header,children:[(0,i.tZ)(o.xv,{children:"Edit Workflow"}),(0,i.tZ)(u.hU,{alt:"Close",onClick:function(){return c(!1)},children:(0,i.tZ)(q.Z,{})})]}),(0,i.tZ)(O,{index:t,onDelete:function(){return c(!1)}})]}):(0,i.BX)(a.G,{css:Y.item,children:[(0,i.tZ)(g.zx,{size:"small",iconLeft:p?(0,i.tZ)(M.Z,{}):(0,i.tZ)(U.Z,{}),text:s.name,onClick:function(){p?h.stop():h.run()}}),(0,i.tZ)(g.zx,{variant:"outlined",size:"small",iconLeft:(0,i.tZ)(J.Z,{}),text:"Edit",onClick:function(){return c(!0)}})]}):null}var K=(0,l.X)({root:[c.l0.colWithGap(6),c.l0.borderRadius(4),c.l0.border(),c.l0.p(8)],header:[c.l0.rowWithGap(6),c.l0.align.center,c.l0.justify.spaceBetween]});function Q(){var e=(0,r._)((0,f.useState)(!1),2),t=e[0],n=e[1],l=(0,d.mj)();return t?(0,i.BX)(a.G,{css:K.root,children:[(0,i.BX)(a.G,{css:K.header,children:[(0,i.tZ)(o.xv,{children:"New Workflow"}),(0,i.tZ)(u.hU,{alt:"Close",onClick:function(){return n(!1)},children:(0,i.tZ)(q.Z,{})})]}),(0,i.tZ)(V,{onCreate:function(e){n(!1),l(e)}})]}):(0,i.tZ)(a.G,{css:Y.item,children:(0,i.tZ)(g.zx,{onClick:function(){return n(!0)},iconLeft:(0,i.tZ)(G.Z,{}),size:"small",text:"New Workflow",variant:"outlined"})})}function ee(){var e=(0,d.e8)();return(0,i.BX)(a.G,{css:Y.root,children:[e.map(function(e){return(0,i.tZ)($,{index:e},e)}),(0,i.tZ)(Q,{})]})}var et=(0,l.X)({wrapper:[c.l0.rowWithGap(8),c.l0.align.center,c.l0.justify.spaceBetween,c.l0.borderRadius(4),c.l0.px(6),c.l0.height(32),h.gU.filled],left:[c.l0.align.center,c.l0.flex.row,c.l0.flex.growAndShrink(1)]});function en(e){var t=(0,d.gG)(),n=(0,s.U)(function(n){return function(){var r,i=null===(r=t())||void 0===r?void 0:r[e];return!!i&&n.workflows.runWorkflow.rpc({workflowId:i.name})}},[t,e]),r=(0,d.iM)(e),i=(0,s.U)(function(e){return function(){var t,n=null===(t=r())||void 0===t?void 0:t.runId;return!!n&&e.workflows.stopRun.rpc({runId:n})}},[r]),o=(0,d.IP)(e);return(0,f.useMemo)(function(){return n&&i?{run:n,stop:i,isRunningObservable:o}:null},[n,i,o])}function er(e){var t=e.index,n=e.onClick,r=(0,d.DW)(t),l=en(t),c=(0,j.Z)(null==l?void 0:l.isRunningObservable);return r?(0,i.BX)(a.G,{css:et.wrapper,children:[(0,i.tZ)(a.G,{css:et.left,onClick:n,children:(0,i.tZ)(o.xv,{children:r.name})}),l?(0,i.tZ)(u.hU,{alt:c?"Stop workflow":"Run workflow",onClick:function(){c?l.stop():l.run()},children:c?(0,i.tZ)(M.Z,{}):(0,i.tZ)(U.Z,{})}):null]}):null}var ei=(0,l.X)({wrapper:[c.l0.p(8),c.l0.colWithGap(8)],list:[c.l0.colWithGap(4)],loading:[c.l0.center,c.l0.p(16)]});function eo(e){(0,d.sA)(e.isActive);var t=(0,r._)((0,f.useState)({type:"list"}),2),n=t[0],o=t[1],l=(0,d.e8)(),c=(0,d.mj)(),s=(0,d.am)();if((0,d.nR)())return(0,i.tZ)(a.G,{css:ei.loading,children:(0,i.tZ)(z.Z,{})});switch(n.type){case"newWorkflow":return(0,i.BX)(a.G,{css:ei.wrapper,children:[(0,i.tZ)(L,{onBack:function(){return o({type:"list"})}}),(0,i.tZ)(V,{onCreate:function(e){o({type:"workflow",index:c(e)})}})]});case"workflow":return(0,i.BX)(a.G,{css:ei.wrapper,children:[(0,i.tZ)(L,{onBack:function(){return o({type:"list"})}}),(0,i.tZ)(O,{index:n.index,onDelete:function(){s(n.index),o({type:"list"})}})]});case"list":return(0,i.BX)(a.G,{css:ei.wrapper,children:[l.length?(0,i.tZ)(a.G,{css:ei.list,children:l.map(function(e){return(0,i.tZ)(er,{index:e,onClick:function(){return o({type:"workflow",index:e})}},e)})}):null,(0,i.tZ)(g.zx,{iconLeft:(0,i.tZ)(G.Z,{}),text:"New Workflow",onClick:function(){o({type:"newWorkflow"})}})]})}}},71358:function(e,t,n){n.d(t,{C:function(){return function e(t,n){if(!["context","action"].includes(t.data.type))throw Error("Command type not supported: "+t.data.type);if("action"===t.data.type)return{match:u.pl,data:{label:t.data.label,description:t.data.description,icon:t.data.iconPath?(0,a.tZ)(s.Z,{src:(0,f.Vh)(t.extension.baseUrl,t.data.iconPath),layout:"fill",alt:""}):(0,a.tZ)(a.HY,{children:" "}),type:"action",run:(0,r._)(function(){var e;return(0,o.Jh)(this,function(n){switch(n.label){case 0:if(!(e=t.run))throw Error("Action command must have run");return[4,e()];case 1:return[2,n.sent()]}})})}};var l,c=t.commands;if(!c)throw Error("Context command must have commands");return{match:u.pl,data:{label:t.data.label,description:t.data.description,icon:t.data.iconPath?(0,a.tZ)(s.Z,{src:(0,f.Vh)(t.extension.baseUrl,t.data.iconPath),layout:"fill",alt:""}):(0,a.tZ)(a.HY,{}),type:t.data.type},commands:(l=(0,r._)(function(r){var a;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,c({active:r.active,search:r.search,path:a=(0,i._)(n.path).concat([{data:t.data}])})];case 1:return[2,o.sent().map(function(t){return e(t,{path:a})})]}})}),function(e){return l.apply(this,arguments)})}}},V:function(){return p}});var r=n(27387),i=n(63257),o=n(96583),a=n(4216),l=n(74044),c=n(99149),s=n(12933),u=n(89748),d=n(47664),f=n(41909),h=l.Dy.Object({id:l.Dy.Optional(l.Dy.String()),icon:l.Dy.Optional(l.Dy.String()),type:l.Dy.Union([l.Dy.Literal("action"),l.Dy.Literal("context")]),label:l.Dy.String(),description:l.Dy.String(),contributions:l.Dy.Optional(l.Dy.Array(l.Dy.Enum(d.Y)))});function p(e,t){return m.apply(this,arguments)}function m(){return(m=(0,r._)(function(e,t){var n,i,a;return(0,o.Jh)(this,function(l){switch(l.label){case 0:return[4,e.data];case 1:if(n=l.sent(),!c.B4.Check(h,n))throw Error("Invalid command");if(i=null,"string"==typeof n.icon){if(""===n.icon)throw Error("Command icon cannot be empty. Omit it if you do not want an icon.");i=n.icon}if(a={data:{label:n.label,description:n.description,type:n.type,iconPath:i,id:n.id?n.id:void 0},extension:t.extension},n.contributions&&(a.data.contributions=n.contributions,t.logger.warn("Command ".concat(n.label," uses deprecated contributions field"))),"context"===n.type){var s;a.commands=(s=(0,r._)(function(n){var r,i,a,l,c,s,u,d,f;return(0,o.Jh)(this,function(o){switch(o.label){case 0:r=n.active,i=n.search,a=n.path,l=null,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,e.commands({active:r,search:i,path:a})];case 2:return l=o.sent(),[3,4];case 3:return c=o.sent(),t.logger.error(c.message,{commandError:c,api:"command"}),[2,[]];case 4:return[4,l.length];case 5:s=o.sent(),u=[],d=0,o.label=6;case 6:if(!(d<s))return[3,9];return f=u.push,[4,p(l[d],t)];case 7:f.apply(u,[o.sent()]),o.label=8;case 8:return d++,[3,6];case 9:return[2,u]}})}),function(e){return s.apply(this,arguments)})}else a.run=(0,r._)(function(){var n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e.run()];case 1:return r.sent(),[2,void 0];case 2:return n=r.sent(),t.logger.error(n.message,{runError:n,api:"command"}),[2,{type:"error",message:n.message}];case 3:return[2]}})});return[2,a]}})})).apply(this,arguments)}},93264:function(e,t,n){n.d(t,{cR:function(){return b},nP:function(){return w},gI:function(){return Z},Sp:function(){return x}});var r=n(66626),i=n(39271),o=n(81199),a=n(69407),l=n(41733),c=n(21262),s=n(71440),u=n(58995),d=n(99165);function f(){var e=(0,c._)(["\n  query ReplConfigIsExtension($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return f=function(){return e},e}function h(){var e=(0,c._)(["\n  mutation UpdateReplConfigIsExtension(\n    $replId: String!\n    $isExtension: Boolean!\n  ) {\n    updateRepl(input: { id: $replId, isExtension: $isExtension }) {\n      repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return h=function(){return e},e}var p={},m=(0,s.Ps)(f()),v=(0,s.Ps)(h()),g=n(50959),y=n(31748);function b(){var e,t=(0,g.useContext)(a.Z),n=(0,r._)((0,g.useState)(null!==(e=null==t?void 0:t.replConfigIsExtension)&&void 0!==e&&e),2),i=n[0],l=n[1],c=(0,o.Z)().dotReplit;return(0,g.useEffect)(function(){return c.watch(function(e){var t,n,r;l(null!==(r=null===(n=e.config)||void 0===n?void 0:null===(t=n.extension)||void 0===t?void 0:t.isExtension)&&void 0!==r&&r)})},[c]),i}function w(){var e=(0,r._)((0,g.useState)(null),2),t=e[0],n=e[1],i=(0,o.Z)().dotReplit;return(0,g.useEffect)(function(){return i.watch(function(e){var t,r,i=null===(r=e.config)||void 0===r?void 0:null===(t=r.extension)||void 0===t?void 0:t.extensionID;i?n((0,y.T8)(i)):n(null)})},[i]),t}var Z=function(){var e=(0,o.Z)().dotReplit,t=(0,r._)((0,g.useState)(null),2),n=t[0],i=t[1];return(0,g.useEffect)(function(){return e.watch(function(e){var t,n,r=null===(n=e.config)||void 0===n?void 0:null===(t=n.extension)||void 0===t?void 0:t.staticDirectory;r?i({path:r,relativePath:r.replace(/^\.\//,"")}):i(null)})},[e]),n};function x(){var e,t,n,a,c=(0,i.Z)(),s=(e=(0,l._)({},p,{variables:{replId:c}}),u.a(m,e)),f=s.data,h=s.loading,y=s.error,b=(0,r._)((t=(0,l._)({},p,void 0),d.D(v,t)),1)[0],w=!h&&!y&&!!(null==f?void 0:f.repl)&&"Repl"===f.repl.__typename&&null!==(a=null===(n=f.repl.config)||void 0===n?void 0:n.isExtension)&&void 0!==a&&a,Z=(0,r._)((0,g.useState)(!1),2),x=Z[0],C=Z[1],_=(0,o.Z)().dotReplit;(0,g.useEffect)(function(){return _.watch(function(e){var t,n,r;C(null!==(r=null===(n=e.config)||void 0===n?void 0:null===(t=n.extension)||void 0===t?void 0:t.isExtension)&&void 0!==r&&r)})},[_]),(0,g.useEffect)(function(){h||y||x===w||b({variables:{replId:c,isExtension:x},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:{id:c,__typename:"Repl",config:{__typename:"ReplConfig",isExtension:x}}}}})},[h,y,c,w,x,b])}},44079:function(e,t,n){n.d(t,{LM:function(){return r.LM},Mu:function(){return i.Mu},WF:function(){return r.WF},WG:function(){return i.WG},jx:function(){return i.jx},ot:function(){return r.ot},r9:function(){return i.r9}});var r=n(52240),i=n(12904)},52240:function(e,t,n){n.d(t,{EO:function(){return R},I1:function(){return B},Kf:function(){return I},LM:function(){return T},WF:function(){return E},bN:function(){return S},dI:function(){return D},ot:function(){return k},zm:function(){return G}});var r=n(27387),i=n(41733),o=n(30509),a=n(66626),l=n(96583),c=n(60305),s=n(21625),u=n(81199),d=n(81839),f=n(40635),h=n(19334),p=n.n(h),m=n(50959),v=n(41909),g=n(62784),y=n(31748),b=n(18770),w=n(85234),Z=n.n(w),x=n(6098),C=n(12904),_=n(67385);function S(){var e,t=(0,_.E4)(C.We);return(0,m.useCallback)((e=(0,r._)(function(e){return(0,l.Jh)(this,function(n){return t({installationId:e}),[2]})}),function(t){return e.apply(this,arguments)}),[t])}function k(){var e,t=L(),n=t.throwSystemError,a=t.throwExtensionError,c=(0,_.E4)(C.nk),s=(0,_.ZC)(C.Ol),u=(0,_.Ld)();return(0,m.useCallback)((e=(0,r._)(function(e){var t,r,d,f,h,m,w,Z,_,S,k,E,T,R,D,I,B,G,A,P;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return t=e.installationId,d=void 0===(r=e.forceRefetch)||r,[4,(0,x.Al)()];case 1:if(!(f=l.sent())||f.error)return n({friendlyMessage:"Failed to load user context",error:f.error}),[2];if(h=f.result.userHasInternalApiEnabled,!(m=u.get(C.Lq).find(function(e){return e.installationId===t})))return[3,3];return[4,(0,x.V9)(m.baseUrl)];case 2:if(w=l.sent(),Z=s.createLogger({extensionId:m.extensionId,installationId:m.installationId,local:!0}),w.error)return _=(0,o._)((0,i._)({},m),{manifest:(0,v.fF)(),enableExperimentalApi:!1,enableInternalApi:!1,logger:Z.createLogger({extensionName:"Unnamed Extension"}),isLocal:!0}),s.info("Adding extension: ".concat(_.manifest.name),{extensionArgs:p()(_,["extensionId","installationId","baseUrl","manifest","enableExperimentalApi","enableInternalApi","isLocal"]),local:_.isLocal,error:!0}),c(_),S="Failed to load extension manifest",w.error instanceof b.Jg&&(S=w.error.message),a({extensionId:m.extensionId,installationId:m.installationId,extensionError:{error:w.error,friendlyMessage:S}}),[2];return k=(0,g.MU)(w.result,"experimental-api"),E=(0,o._)((0,i._)({},m),{manifest:w.result,enableExperimentalApi:k,enableInternalApi:h,logger:Z.createLogger({extensionName:w.result.name}),isLocal:!0}),s.info("Adding extension: ".concat(E.manifest.name),{extensionArgs:p()(E,["extensionId","installationId","baseUrl","manifest","enableExperimentalApi","enableInternalApi","isLocal"]),local:!0}),c(E),[3,5];case 3:return[4,(0,x.mr)(t,d)];case 4:if((T=l.sent()).error)return n({friendlyMessage:"Something went wrong while downloading an extension",error:T.error}),[2];if(!(R=T.result))return n({friendlyMessage:"Extension failed to install",error:Error("Expected installation to be defined")}),[2];if(!(D=R.extension))return n({friendlyMessage:"Extension failed to install",error:Error("Expected extension to be defined")}),[2];if(!D.manifest)return a({extensionId:(0,y.T8)(D.id),installationId:(0,y.Ad)(R.id),extensionError:{friendlyMessage:"Extension failed to install",error:Error("Expected extension manifest to be defined")}}),[2];if("ExtensionManifestError"===D.manifest.__typename)return a({extensionId:(0,y.T8)(D.id),installationId:(0,y.Ad)(R.id),extensionError:{friendlyMessage:"An error occurred while loading the extension manifest: ".concat(D.manifest.message),error:Error(D.manifest.message)}}),[2];if(!D.manifest||"ExtensionManifest"!==D.manifest.__typename)return a({extensionId:(0,y.T8)(D.id),installationId:(0,y.Ad)(R.id),extensionError:{friendlyMessage:"An error occurred while loading the extension manifest",error:Error("Expected extension manifest to be defined")}}),[2];return I=(0,v.tr)(D.manifest),B=(0,g.MU)(I,"experimental-api"),G=(0,y.T8)(D.id),A=D.enableInternalApi,P={extensionId:G,installationId:t,manifest:I,baseUrl:(0,v.BY)(D.url),enableExperimentalApi:B,enableInternalApi:h||A,logger:s.createLogger({extensionId:G,installationId:t,extensionName:I.name,local:!1}),isLocal:!1},s.info("Adding extension: ".concat(P.manifest.name),{extensionArgs:p()(P,["extensionId","installationId","baseUrl","manifest","enableExperimentalApi","enableInternalApi","isLocal"]),local:!1}),c(P),[2,R];case 5:return[2]}})}),function(t){return e.apply(this,arguments)}),[c,a,n,u,s])}function E(){var e,t=k(),n=L().throwSystemError;return(0,m.useCallback)((e=(0,r._)(function(e){var r,i,o,a,s;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return r=e.extensionId,i=e.replId,[4,(0,x.Wc)({extensionId:r,replId:i})];case 1:if((s=l.sent()).error)return n({error:s.error,friendlyMessage:"Something went wrong while installing an extension"}),[2];return(0,c.j)(c.U3.EXTENSION_INSTALLED,{name:null===(a=s.result)||void 0===a?void 0:null===(o=a.extension)||void 0===o?void 0:o.name,extensionId:r}),[4,t({installationId:(0,y.Ad)(s.result.id)})];case 2:return l.sent(),[2,s.result]}})}),function(t){return e.apply(this,arguments)}),[t,n])}function T(){var e,t=S(),n=(0,_.Ld)(),i=L().throwSystemError;return(0,m.useCallback)((e=(0,r._)(function(e){var r,o,a;return(0,l.Jh)(this,function(l){switch(l.label){case 0:if(r=e.installationId,o=e.replId,!(a=n.get(C._t).find(function(e){return e.installationId===r})))return i({friendlyMessage:"Extension appears to be already uninstalled",error:Error("Expected extension to be defined")}),[2];if(!a.installationId||!a.extensionId)return i({friendlyMessage:"Failed to uninstall extension",error:Error("Expected installationId to be defined")}),[2];return(0,c.j)(c.U3.EXTENSION_UNINSTALLED,{name:a.manifest.name,extensionId:a.extensionId}),[4,(0,x.Y4)({installationId:a.installationId,replId:o})];case 1:return l.sent(),[4,t(a.installationId)];case 2:return l.sent(),[2]}})}),function(t){return e.apply(this,arguments)}),[t,n,i])}function R(){var e,t=S(),n=k();return(0,m.useCallback)((e=(0,r._)(function(e){return(0,l.Jh)(this,function(r){switch(r.label){case 0:return[4,t(e)];case 1:return r.sent(),[4,n({installationId:e,forceRefetch:!0})];case 2:return r.sent(),[2]}})}),function(t){return e.apply(this,arguments)}),[t,n])}function D(){var e,t,n,i,o=(e=k(),t=(0,_.ZC)(C.Ol),n=L().throwSystemError,(0,m.useCallback)((i=(0,r._)(function(r){var i,o,a,c,s,u,d,f,h,p;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return[4,(0,x.Zw)(r)];case 1:if((i=l.sent()).error)return n({friendlyMessage:"Failed to load installed extensions",error:i.error}),[2];o=!0,a=!1,c=void 0,l.label=2;case 2:l.trys.push([2,9,10,11]),s=i.result[Symbol.iterator](),l.label=3;case 3:if(o=(u=s.next()).done)return[3,8];if(null===(f=(d=u.value).extension)||void 0===f?void 0:f.isDisabled)return t.info("Skipping disabled extension: ".concat(d.extension.name),{extension:!0,extensionId:d.extension.id,installationId:d.id}),[3,7];l.label=4;case 4:return l.trys.push([4,6,,7]),[4,e({installationId:(0,y.Ad)(d.id),forceRefetch:!0})];case 5:return l.sent(),[3,7];case 6:return h=l.sent(),t.error("Extension Loading error: ".concat(h.message),{extension:!0,errors:h.message}),[3,7];case 7:return o=!0,[3,3];case 8:return[3,11];case 9:return p=l.sent(),a=!0,c=p,[3,11];case 10:try{o||null==s.return||s.return()}finally{if(a)throw c}return[7];case 11:return[2]}})}),function(e){return i.apply(this,arguments)}),[e,n,t])),c=(0,_.E4)(C.Ol),s=(0,_.E4)(C.zk),u=(0,a._)((0,m.useState)(!1),2),f=u[0],h=u[1],p=(0,a._)((0,m.useState)(null),2),v=p[0],g=p[1],b=(0,a._)((0,m.useState)(null),2),w=b[0],Z=b[1];return(0,m.useEffect)(function(){if(v&&w&&!f){var e=v.replId;h(!0),o(e)}},[v,w,o,f]),(0,m.useCallback)(function(e){var t=e.replId,n=e.userId;if(!f){g({replId:t,userId:n});var r=(0,d.Z)({extension:!0,isInitialized:!0,replId:t,userId:n},{onLog:function(e){s(e)}});Z(r),c(r)}},[c,f,s])}function I(){var e,t=k(),n=(0,C.qr)(),i=(0,C.Mu)(),o=(0,_.E4)(C.ot);return(0,m.useCallback)((e=(0,r._)(function(e){var r,a;return(0,l.Jh)(this,function(l){return r=(0,v.BY)(e),(a=n.find(function(e){return e.baseUrl===r}))||o(a={extensionId:(0,y.T8)(Z()()),installationId:(0,y.Ad)(Z()()),baseUrl:r}),i.find(function(e){return e.extensionId===(null==a?void 0:a.extensionId)})||t({installationId:a.installationId}),[2]})}),function(t){return e.apply(this,arguments)}),[n,i,o,t])}function B(){var e=(0,u.Z)().container,t=(0,s.Z)(e),n=(0,_.E4)(C.M1),i=(0,_.Ld)(),o=k();return(0,m.useCallback)((0,r._)(function(){var e;return(0,l.Jh)(this,function(r){switch(r.label){case 0:if(!t)return[2];return[4,o({installationId:(e=n(t)).installationId,forceRefetch:!0})];case 1:return r.sent(),[2,i.get(C._t).find(function(t){return t.installationId===e.installationId})]}})}),[t,n,o,i])}function G(){var e=(0,u.Z)().container,t=(0,s.Z)(e),n=(0,_.E4)(C.M1),r=(0,C.Mu)();return(0,m.useMemo)(function(){if(t){var e=n(t);return r.find(function(t){return e.installationId===t.installationId})}},[t,r,n])}var A=(0,f.cn)(null,function(e,t,n){var r=e(C.Ol);t(C.wQ,n),r.error("Extension System Error: ".concat(n.error.message),{extensionSystem:!0,originalError:n.error.message,friendlyMessage:n.friendlyMessage})}),P=(0,f.cn)(null,function(e,t,n){var r=e(C._t),i=e(C.Ol),o=r.find(function(e){return e.extensionId===n.extensionId});if(i.error("Extension Error: ".concat(n.extensionError.friendlyMessage),{extension:!0,extensionId:n.extensionId,originalError:n.extensionError.error.message,friendlyMessage:n.extensionError.friendlyMessage}),!o){t(C.nk,{extensionId:n.extensionId,installationId:n.installationId,manifest:(0,v.fF)({name:n.extensionId}),baseUrl:"",enableExperimentalApi:!1,enableInternalApi:!1,logger:i.createLogger({extensionId:n.extensionId,extensionName:n.extensionId,installationId:n.installationId,local:void 0}),isLocal:null}),t(C.f4,{extensionId:n.extensionId,extensionError:n.extensionError});return}t(C.f4,{extensionId:n.extensionId,extensionError:n.extensionError})});function L(){return{throwSystemError:(0,_.E4)(A),throwExtensionError:(0,_.E4)(P)}}},12904:function(e,t,n){n.d(t,{Lq:function(){return C},M1:function(){return G},Mu:function(){return M},Ol:function(){return S},UB:function(){return T},UT:function(){return R},WG:function(){return H},We:function(){return A},_K:function(){return L},_t:function(){return x},c_:function(){return W},ep:function(){return D},f4:function(){return P},jx:function(){return X},nk:function(){return I},ot:function(){return B},qr:function(){return z},r9:function(){return F},s6:function(){return V},wQ:function(){return _},zk:function(){return E}});var r,i,o,a=n(27387),l=n(41733),c=n(30509),s=n(66626),u=n(63257),d=n(96583),f=n(36647),h=n(81839),p=n(41974),m=n(40635),v=n(35554),g=n.n(v),y=n(31748),b=n(85234),w=n.n(b),Z=n(67385),x=(0,m.cn)([]),C=(0,m.cn)([]),_=(0,m.cn)(null),S=(0,m.cn)((0,h.Z)({extension:!0,isInitialized:!1},{onLog:function(){throw Error("Logged before extension system was initialized.")}})),k=(0,m.cn)([]),E=(0,m.cn)(null,function(e,t,n){var r=e(k);t(k,(0,p.Uy)(r,function(e){e.push((0,p.Uy)(n,function(t){t.index=e.length})),e.length>1e3&&e.splice(0,e.length-1e3)}))}),T=(0,m.cn)(null,function(e,t){t(k,[])}),R=(0,m.cn)("local:true"),D=(0,m.cn)(function(e){var t=e(k),n=e(R);if(!n)return t;var r=n.split(" ").map(function(e){var t=(0,s._)(e.split(":"),2),n=t[0],r=t[1];return n&&void 0===r?function(e){return e.message.toLowerCase().includes(n.toLowerCase())}:n&&""===r?function(e){return void 0!==g()(e,n)}:n&&r?function(e){try{return String(g()(e,n))===r}catch(e){return!1}}:null}).filter(function(e){return null!==e});return t.filter(function(e){return r.every(function(t){return t(e)})})}),I=(0,m.cn)(null,(r=(0,a._)(function(e,t,n){return(0,d.Jh)(this,function(r){if(e(x).find(function(e){return e.extensionId===n.extensionId}))throw Error("Extension already loaded");return t(x,function(e){return(0,p.Uy)(e,function(e){var t,r,i,o,a,l,c,s,u=(r=n.baseUrl,i=n.extensionId,o=n.installationId,a=n.manifest,l=n.enableExperimentalApi,c=n.enableInternalApi,s=n.logger,{baseUrl:r,extensionId:i,installationId:o,manifest:a,isLocal:n.isLocal,stateAtom:(0,m.cn)({error:null,panes:[],scopes:new Set(null===(t=a.scopes)||void 0===t?void 0:t.map(function(e){return e.name})),enableExperimentalApi:l,enableInternalApi:c,commands:new Map}),logger:s});e.push(u)})}),[2]})}),function(e,t,n){return r.apply(this,arguments)})),B=(0,m.cn)(null,(i=(0,a._)(function(e,t,n){return(0,d.Jh)(this,function(r){if(e(C).find(function(e){return e.extensionId===n.extensionId||e.installationId===n.installationId||e.baseUrl===n.baseUrl}))throw Error("Extension already loaded");return t(C,function(e){return(0,p.Uy)(e,function(e){e.push(n)})}),[2]})}),function(e,t,n){return i.apply(this,arguments)})),G=(0,m.cn)(null,function(e,t,n){var r=e(C).find(function(e){return e.baseUrl===n});if(r)return r;var i={baseUrl:n,extensionId:(0,y.T8)(w()()),installationId:(0,y.Ad)(w()())};return t(C,function(e){return(0,p.Uy)(e,function(e){e.push(i)})}),i}),A=(0,m.cn)(null,(o=(0,a._)(function(e,t,n){return(0,d.Jh)(this,function(e){return t(x,function(e){return(0,p.Uy)(e,function(e){var t=e.findIndex(function(e){return"extensionId"in n?e.extensionId===n.extensionId:e.installationId===n.installationId});-1!==t&&e.splice(t,1)})}),[2]})}),function(e,t,n){return o.apply(this,arguments)})),P=(0,m.cn)(null,function(e,t,n){var r=e(x).find(function(e){return e.extensionId===n.extensionId});if(!r)throw Error("Extension not found");t(r.stateAtom,function(e){return(0,p.Uy)(e,function(e){e.error=n.extensionError})})}),L=(0,m.cn)(null,function(e,t,n){var r=n.createCommand.id;if(!n.createCommand.id)throw Error("Expected createCommand to have id");if(!n.createCommand.contributions)throw Error("Expected createCommand to have contributions");t(n.extensionStateAtom,function(e){return(0,p.Uy)(e,function(e){e.commands.set(r,n.createCommand)})})}),N=(0,m.cn)(function(e){return e(x).flatMap(function(t){return(0,u._)(e(t.stateAtom).commands.values())})}),O=(0,m.cn)(function(e){return e(x).map(function(e){var t;return null===(t=e.manifest.fileHandlers)||void 0===t?void 0:t.map(function(t){return(0,c._)((0,l._)({},t),{extension:e})})}).flat().filter(function(e){return!!e})}),U=(0,m.cn)(function(e){return e(x).map(function(e){var t;return null===(t=e.manifest.tools)||void 0===t?void 0:t.map(function(t){return(0,c._)((0,l._)({},t),{extension:e})})}).flat().filter(function(e){return!!e})});function M(){return(0,Z.ZC)(x)}function X(e){return M().find(function(t){return t.installationId===e})}function F(e){var t=X(e);return t&&e?t.stateAtom:null}function W(){return(0,Z.ZC)(O)}function H(){return(0,Z.ZC)(U)}function V(e){var t=(0,Z.ZC)(N);return(0,f.Z)(function(){return t.filter(function(t){return t.contributions.includes(e)})},[t,e])}function z(){return(0,Z.ZC)(C)}},67385:function(e,t,n){n.d(t,{E4:function(){return f},Ld:function(){return s},OA:function(){return u},Wv:function(){return h},ZC:function(){return d}});var r=n(66626),i=n(4216),o=n(40635),a=n(22750),l=n(50959),c=(0,l.createContext)(null);function s(){return function(){var e=(0,l.useContext)(c);if(!e)throw Error("Expected extensions context");return e}().store}var u=function(e){var t=s();return(0,a.KO)(e,{store:t})};function d(e){var t=s();return(0,a.Dv)(e,{store:t})}var f=function(e){var t=s();return(0,a.b9)(e,{store:t})};function h(e){var t=e.children,n=(0,r._)((0,l.useState)(function(){return(0,o.MT)()}),1)[0];return(0,i.tZ)(c.Provider,{value:{store:n},children:t})}},47664:function(e,t,n){var r,i;n.d(t,{Y:function(){return r}}),(i=r||(r={})).CommandBar="commandbar",i.FiletreeContextMenu="filetree-context-menu",i.SidebarSearch="sidebar-search",i.EditorContextMenu="editor-context-menu"},81839:function(e,t,n){n.d(t,{Z:function(){return function e(t,n){var r=function(e){var r,i,l,s,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{logLevel:"debug"},h=null!==(r=(i={},(0,o._)(i,"debug",c.kg.debug),(0,o._)(i,"warn",c.kg.warn),(0,o._)(i,"info",c.kg.info),(0,o._)(i,"error",c.kg.error),i)[f.logLevel])&&void 0!==r?r:c.kg.debug;(null!==(l=(s={},(0,o._)(s,"debug",d.debug),(0,o._)(s,"warn",d.warn),(0,o._)(s,"info",d.info),(0,o._)(s,"error",d.error),s)[f.logLevel])&&void 0!==l?l:d.debug)(e,f),h(e,u()((0,a._)({},f,t),["replId","logLevel"])),n.onLog((0,a._)({message:e},f,t))};return{context:t,info:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(e,(0,l._)((0,a._)({},t),{logLevel:"info"}))},warn:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(e,(0,l._)((0,a._)({},t),{logLevel:"warn"}))},error:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(e,(0,l._)((0,a._)({},t),{logLevel:"error"}))},createLogger:function(r){return e((0,a._)({},t,r),n)}}}},i:function(){return i}});var r,i,o=n(42516),a=n(41733),l=n(30509),c=n(36556),s=n(59245),u=n.n(s),d=n(49500);(r=i||(i={})).debug="debug",r.info="info",r.warn="warn",r.error="error"},33675:function(e,t,n){n.d(t,{Cl:function(){return a},VD:function(){return d},uN:function(){return u}});var r=n(40635),i=n(22750),o=n(50959),a=(0,o.createContext)(null),l=(0,r.cn)(null),c=(0,r.cn)(null,function(e,t,n){t(l,n)});function s(){var e=(0,o.useContext)(a);if(!e)throw Error("Expected store in context");return e}function u(){return(0,i.Dv)(l,{store:s()})}function d(e){var t=(0,i.Dv)(l,{store:s()}),n=(0,i.b9)(c,{store:s()});(0,o.useEffect)(function(){t!==e&&n(e)},[e,t,n])}},64546:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(81199),i=n(50959),o=n(36559),a=n(59786),l=n(89587);function c(e){var t=(0,r.Z)().fs,n=(0,a.P5)({controlName:"flag-draft-buffers"}),c=(0,l.Qk)(),s=(0,i.useCallback)(function(r,i){var a=r.code,l=r.insertAt,s=r.newLine,u=void 0===s||s;if(!e||(0,o.T3)(e)||(0,o.sL)(e)||(0,o.IQ)(e)||(0,o.hj)(e))throw Error("Invalid file, this should never happen");if(0!==a.length)var d=t.watchTextFile(e,{onReady:function(r){var o=r.initialContent,s=r.writeChange,f=o.toString(),h="end"===l?f.length:l,p=a;u&&(0!==h&&h!==f.length&&-1===(h=f.indexOf("\n",h))&&(h=f.length),0!==h&&"\n"!==f[h-1]&&(p="\n"+p),"\n"!==f[h]&&(p+="\n")),s({from:h,insert:p},i),!n||c?t.flush(new Set([e])).finally(function(){d()}):d()}})},[e,t,n,c]);return!e||(0,o.T3)(e)||(0,o.sL)(e)||(0,o.IQ)(e)||(0,o.hj)(e)?null:s}},65108:function(e,t,n){n.d(t,{Z:function(){return b}});var r=n(27387),i=n(66626),o=n(63257),a=n(96583),l=n(69755),c=n(60305),s=n(81199),u=n(36136),d=n(39743),f=n(50959),h=n(36559),p=n(57253),m=n(1813),v=n(40750),g=n(59786),y=n(89587);function b(e){var t,n,b,w=e.moveOrDeleteFile,Z=(0,s.Z)().fs,x=(0,u.K)(),C=(0,f.useRef)(new Map),_=(0,d.ex)(),S=(0,i._)((0,f.useState)(!1),2),k=S[0],E=S[1],T=(0,i._)((0,f.useState)(!1),2),R=T[0],D=T[1],I=(0,i._)((0,f.useState)([]),2),B=I[0],G=I[1],A=(0,v.k)(),P=(0,m.uV)(),L=(0,g.P5)({controlName:"flag-draft-buffers"}),N=(0,y.Qk)(),O=B.map(function(e){return e.path}).map(function(e){return{title:e,path:e}}),U=(0,i._)((0,f.useState)(),2),M=U[0],X=U[1],F=(0,d.ZB)();(0,f.useEffect)(function(){if(!(!_||C.current.has(_))){var e=function(e){var t=e.node.path;F(e.eventType===p.kS.Move?{path:t,type:"move",to:e.to}:{path:t,type:"delete"}),w&&w(e),C.current.delete(_),G(function(e){return e.filter(function(e){return e.path!==_})})};(0,h.Mb)(_)?Z.watchTextFile(_,{onMoveOrDelete:e,onError:function(e,t){e.code||((!L||N)&&Z.flush(),Z.persist({skipDebounce:!0}),P({error:e,extras:t,tags:{ot:!0},origin:"useContentsDiverged: fs.watchTextFile"}))},onReconnectFail:function(e,t){G(function(n){return(0,o._)(n.filter(function(e){return e.path!==_})||[]).concat([{path:_,prompt:t,cb:e}])}),x("user:ot:diverged",{path:_,divergence:t}),E(!0),M||X(_)}}):Z.watchFile(_,{onChange:function(){},onMoveOrDelete:e}),C.current.set(_,!0)}},[_,Z,P,w,M,x,F,N,L]);var W=(t=(0,r._)(function(e){return(0,a.Jh)(this,function(t){switch(t.label){case 0:return(0,c.j)(c.U3.FILE_RECONNECT_FALLBACK_CHOSEN,{choice:e}),(0,c.j)(c.U3.CONTENTS_DIVERGED_ACTION,{action:"local"===e?"client":"server"}),D(!0),[4,Promise.all(B.map(function(t){return G(function(e){var n=e.filter(function(e){return e.path!==t.path});return 0===n.length?E(!1):X(n[0].path),n}),t.cb(e)}))];case 1:return t.sent(),D(!1),[2]}})}),function(e){return t.apply(this,arguments)}),H=M?B.find(function(e){return e.path===M}):null,V=null==H?void 0:H.prompt,z=(0,l.J)({left:{code:null!==(n=null==V?void 0:V.localContent)&&void 0!==n?n:"",filePath:M},right:{code:null!==(b=null==V?void 0:V.remoteContent)&&void 0!==b?b:"",filePath:M}});return{isConverging:R,didContentsDiverge:k,showMoreDetail:A,failedFiles:B,failedFilesOptions:O,selectedFile:M,setSelectedFile:X,reviewingPrompt:V,onChoice:W,local:z.left,remote:z.right}}},8775:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(66626),i=n(2993),o=n(33980),a=n(81199),l=n(50959);function c(){var e=(0,a.Z)().container,t=(0,o.Z)(e),n=(0,r._)((0,l.useState)(!1),2),c=n[0],s=n[1];return((0,l.useEffect)(function(){t===i.em.CONNECTED&&s(!0)},[t]),c)?{didConnectOnce:c,didDisconnect:t!==i.em.CONNECTED}:{didConnectOnce:!1,didDisconnect:!1}}},41761:function(e,t,n){n.d(t,{$q:function(){return eg},FL:function(){return ex}});var r,i,o,a=n(31417),l=n(27387),c=n(42516),s=n(66626),u=n(63257),d=n(96583),f=n(43182),h=n(8260),p=n(69170),m=n(39271),v=n(36556),g=n(52296),y=n.n(g),b=function(e){var t=y()(e,{baseUrl:!1}).pathname.replace(/\.git$/,"");if(t){var n=(0,s._)(t.split("/").reverse(),2),r=n[0],i=n[1];if(i&&r)return{username:i,repository:r}}},w=n(85733),Z=n(54314),x=n(50959),C=n(81199),_=n(15493),S=n(41733),k=n(33859),E=n.n(k),T=n(21262),R=n(71440),D=n(78711);function I(){var e=(0,T._)(["\n  query WorkspacePatchDotReplitRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return I=function(){return e},e}var B={},G=(0,R.Ps)(I()),A=function(e,t){return{op:"add",path:e,value:JSON.stringify(t)}},P=new Map([["hintsList","hints"]]);function L(){return(L=(0,l._)(function(e){var t,n,r,i,o,a,c,u,f,h,p,m,v,g,y;function b(){return w.apply(this,arguments)}function w(){return(w=(0,l._)(function(){var e,n,o;return(0,d.Jh)(this,function(a){switch(a.label){case 0:if(!(e="object"==typeof r.env?r.env:null)||0===Object.keys(e).length)return[2];return o=(n="object"==typeof i.env?i.env:null)?(0,S._)({},e,n):e,[4,t.updateDotReplit([A("env",o)])];case 1:return a.sent(),[2]}})})).apply(this,arguments)}function Z(){return x.apply(this,arguments)}function x(){return(x=(0,l._)(function(){var e,o,a,l;return(0,d.Jh)(this,function(c){switch(c.label){case 0:if(null===(e=i.nix)||void 0===e?void 0:e.channel)return[2];if(null==r?void 0:null===(o=r.nix)||void 0===o?void 0:o.channel)return[3,2];return[4,n.getLatestStableChannel()];case 1:if(!(l=c.sent()).channel)return[2];return a=l.channel,[3,3];case 2:a=r.nix.channel,c.label=3;case 3:return[4,t.updateDotReplit([A("nix/channel",a)])];case 4:return c.sent(),[2]}})})).apply(this,arguments)}function C(){return(C=(0,l._)(function(e){var n,o,a,l,c;return(0,d.Jh)(this,function(s){switch(s.label){case 0:if(o=!!(n=i[e]),Array.isArray(n)?o=n.length>0:n&&"object"==typeof n&&(o=Object.keys(n).length>0),l=null!==(a=P.get(e))&&void 0!==a?a:e,o||!r[l])return[2];return c=A(l,r[l]),[4,t.updateDotReplit([c])];case 1:return s.sent(),[2]}})})).apply(this,arguments)}return(0,d.Jh)(this,function(l){switch(l.label){case 0:t=e.dotReplit,n=e.nixService,r=e.templateConfig,i=e.config,o=[],a={entrypoint:"entrypoint config",hidden:"hidden files config",audio:"audio config",run:"run command",refreshWebViewOnFileChange:"webview refresh config",language:"language config",onBoot:"onBoot command",languages:"languages config",compile:"compile command",debugger:"debugger config",packager:"packager config",interpreter:"interpreter config",unitTest:"unit test config",nix:Z,env:b,hosting:"hosting config",gitHubImport:"GitHub import config",auth:"Repl Auth config",hintsList:"Hints config",ports:"Ports config",deployment:"deployment config",orderedEnv:null,modules:"nix modules config",extension:"extension config",rules:"rules config",suggestions:"suggestions config",objectStorage:"object storage config",autoSave:"autosave config"},c=[],u=!0,f=!1,h=void 0;try{for(p=Object.entries(a)[Symbol.iterator]();!(u=(m=p.next()).done);u=!0)g=(v=(0,s._)(m.value,2))[0],y=v[1],null!==y&&("function"==typeof y?c.push(y()):c.push(function(e){return C.apply(this,arguments)}(g)))}catch(e){f=!0,h=e}finally{try{u||null==p.return||p.return()}finally{if(f)throw h}}return[4,Promise.all(c)];case 1:return l.sent(),[2,o]}})})).apply(this,arguments)}var N=n(15529),O=n(80131),U=n(36632),M=n(53157),X=n(73372),F=n(57253),W=n(58995),H=n(99165);function V(){var e=(0,T._)(["\n  query WorkspaceDoGitHubImportFlow($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          gitRemoteUrl\n          doClone\n        }\n        slug\n      }\n    }\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n      username\n    }\n  }\n"]);return V=function(){return e},e}function z(){var e=(0,T._)(["\n  mutation WorkspaceDoGitHubImportFlowFinishClone($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          doClone\n        }\n      }\n    }\n  }\n"]);return z=function(){return e},e}function j(){var e=(0,T._)(["\n  query GitHubImportRootOriginReplUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return j=function(){return e},e}function q(){var e=(0,T._)(["\n  query GitHubImportGetTopLanguages($input: GitHubRepoInfoInput!) {\n    githubRepoInfo(input: $input) {\n      ... on GitHubRepoInfoOutput {\n        topLanguages\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return q=function(){return e},e}var J={},Y=(0,R.Ps)(V()),$=(0,R.Ps)(z());j();var K=(0,R.Ps)(q()),Q=n(85421),ee=n(99450),et=n(36559),en=n(60305),er=n(43985),ei=n(59786),eo=n(83238),ea=n(94774),el=n(95088),ec=n.n(el),es=n(91823),eu=n.n(es),ed={14:"nodejs-14",16:"nodejs-16",18:"nodejs-18",19:"nodejs-19",20:"nodejs-20"},ef={bash:"bash",basic:"qbasic",nix:"nix",clojure:"clojure-1.11","c++":"cpp-clang14",c:"c-clang14","c#":"dotnet-7.0",dart:"dart-3.3",deno:"deno-1",elixir:"elixir-1_15","f#":"dotnet-7.0",go:"go-1.21",haskell:"haskell-ghc9.4",html:"web",css:"web",shell:"bash",java:"java-graalvm22.3",lua:"lua-5.2",nodejs:"nodejs-20",php:"php-8.2",python:{"3.8":"python-3.8","3.10":"python-3.10","3.11":"python-3.11","3.12":"python-3.12"},r:"r-4.3",rust:"rust-stable",ruby:"ruby-3.2",swift:"swift-5.8",typescript:ed,javascript:ed,vue:{18:"vue-node-18",20:"vue-node-20"}};function eh(e,t){if(void 0===e)return!1;if(void 0===t)return!0;var n=eu()(e);if(null===n)return!1;var r=eu()(t);return null===r||ec()(n,r)}var ep=n(37715),em=n(29871),ev=n(91620).lW;(r=i||(i={})).PreparingRepl="preparingRepl",r.GitInit="gitInit",r.GitRemoteAdd="gitRemoteAdd",r.CheckoutBranch="checkoutBranch",r.TidyingFiles="tidyingFiles",r.Done="done";var eg=(o={},(0,c._)(o,"preparingRepl","Preparing Repl"),(0,c._)(o,"gitInit","Initializing Git"),(0,c._)(o,"gitRemoteAdd","Adding Remote"),(0,c._)(o,"checkoutBranch","Checking Out Branch"),(0,c._)(o,"tidyingFiles","Tidying Files"),(0,c._)(o,"done","Finalizing"),o);function ey(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return["bash","-c",t.join("&&")]}function eb(e){return e.replace(/'/g,"'\"'\"'")}var ew=function(e){var t,n,r,i,o,a,c,f,h,p,m,g,y,b=e.checkoutBranch,_=(0,Q.useRouter)(),S=(0,C.Z)(),k=S.container,E=S.dotReplit,T=S.runner,R=S.git,D=S.fs,I=(t=(0,Z.Z)({container:k,service:"exec"}).channel,n=(0,x.useRef)(!1),r=(0,x.useRef)([]),i=(0,w.Z)((0,l._)(function(){var e,o,a,l,c,u,f,h,p,m;return(0,d.Jh)(this,function(d){switch(d.label){case 0:if(n.current||!r.current.length||(null==t?void 0:t.status)!=="open")return[2];if(!(e=r.current.pop()))throw Error("Expected request");return l=(a=(o=(0,s._)(e,2))[0]).args,c=a.env,u=o[1],f="",h=t.onCommand(function(e){e.output&&(f+=e.output)}),n.current=!0,[4,t.request({exec:{args:l,env:c,noUserEnv:!0}})];case 1:return p=d.sent(),n.current=!1,h(),m=p.channelClosed?"Channel closed":p.error,u(m?{error:m,output:f||null}:{output:f,error:null}),i.current(),[2]}})})),o=null==t?void 0:t.status,(0,x.useEffect)(function(){"open"===o&&i.current()},[o,i]),(0,x.useCallback)(function(e){var t=e.args,n=e.env;return new Promise(function(e){r.current.push([{args:t,env:n},e]),i.current()})},[i])),B=(a=(0,l._)(function(){return(0,d.Jh)(this,function(e){switch(e.label){case 0:return[4,R.init({initialCommit:!1,includeAllInitialFiles:!1})];case 1:return e.sent(),[2]}})}),function(){return a.apply(this,arguments)}),G=(c=(0,l._)(function(e){return(0,d.Jh)(this,function(t){switch(t.label){case 0:return[4,R.addRemote({name:"origin",url:e})];case 1:return t.sent(),[2]}})}),function(e){return c.apply(this,arguments)}),A=(f=(0,l._)(function(){var e,t;return(0,d.Jh)(this,function(n){switch(n.label){case 0:return[4,I({args:ey("git remote show origin | grep 'HEAD branch'")})];case 1:if(!(e=n.sent()).output)return[2,"main"];return(t=(0,s._)(e.output.split(": "),2))[0],[2,t[1].trim()]}})}),function(){return f.apply(this,arguments)}),P=(h=(0,l._)(function(e){var t;return(0,d.Jh)(this,function(n){switch(n.label){case 0:return[4,I({args:ey("git checkout -f -b '".concat(eb(e),"' 'origin/").concat(eb(e),"'"))})];case 1:if((t=n.sent()).error)throw Error("Failed to checkout branch: ".concat(t.error));return[2]}})}),function(e){return h.apply(this,arguments)}),L=(p=(0,l._)(function(e){var t,n,r,i;return(0,d.Jh)(this,function(o){switch(o.label){case 0:if(n=void 0!==(t=e.deepen)&&t,r=e.remote,i=e.branch,!r.startsWith("https://api.glitch.com"))return[3,2];return[4,I({args:ey("git fetch '".concat(eb(r),"' +refs/heads/*:refs/remotes/origin/*"))})];case 1:return o.sent(),[2];case 2:if(!(i&&n))return[3,4];return[4,I({args:ey("git fetch origin '".concat(eb(i),"' --progress --deepen=10"))})];case 3:case 5:case 7:return[2,o.sent()];case 4:if(!i)return[3,6];return[4,I({args:ey("git fetch origin '".concat(eb(i),"' --progress --depth=10"))})];case 6:return[4,I({args:ey("git fetch origin +refs/heads/*:refs/remotes/origin/* --progress --depth=10")})]}})}),function(e){return p.apply(this,arguments)}),O=(m=(0,l._)(function(){var e,t,n,r,i,o;return(0,d.Jh)(this,function(a){switch(a.label){case 0:return[4,D.readDir(X.Ql)];case 1:if((r=a.sent()).error)return[2];return[4,E.getConfig()];case 2:if(!(null===(t=(i=a.sent()).config)||void 0===t?void 0:null===(e=t.gitHubImport)||void 0===e?void 0:e.requiredFiles))return[3,4];return o=i.config.gitHubImport.requiredFiles.concat(".cache").map(function(e){return new RegExp(e)}),[4,Promise.all(r.children.filter(function(e){var t;return t=e.filename,!o.some(function(e){return null!=t.match(e)})}).map(function(e){return e.type===F.Tv.Directory?D.deleteDir(e.filename):D.deleteFile(e.filename)}))];case 3:return a.sent(),[3,6];case 4:if(!(null===(n=i.config)||void 0===n?void 0:n.entrypoint))return[3,6];return[4,D.deleteFile(i.config.entrypoint)];case 5:a.sent(),a.label=6;case 6:return[2]}})}),function(){return m.apply(this,arguments)}),U={"requirements.txt":["pyproject.toml","poetry.lock"],"pnpm-lock.yaml":["package-lock.json"],"yarn.lock":["package-lock.json"],"bun.lockb":["package-lock.json"]},M=(g=(0,l._)(function(){var e,t,n,r;return(0,d.Jh)(this,function(i){switch(i.label){case 0:for(t in e=[],U)e.push(t);n=0,i.label=1;case 1:if(!(n<e.length))return[3,5];return r=e[n],[4,D.stat(r)];case 2:if(!i.sent().exists)return[3,4];return[4,I({args:["git","clean","-fdx"].concat((0,u._)(U[r]))})];case 3:i.sent(),i.label=4;case 4:return n++,[3,1];case 5:return[2]}})}),function(){return g.apply(this,arguments)});return y=(0,l._)(function(e){var t,n,r,i,o;return(0,d.Jh)(this,function(a){switch(a.label){case 0:return t=e.remote,n=e.accessToken,[4,O()];case 1:return a.sent(),v.kg.info("GitHub Import: Removed template boilerplate"),[4,B()];case 2:return a.sent(),[4,G(t)];case 3:return a.sent(),[4,A()];case 4:return r=a.sent(),[4,Promise.all([L({deepen:!1,remote:t,remoteToken:n,branch:r}),b?L({deepen:!1,remote:t,remoteToken:n,branch:b}):null])];case 5:var c;if(a.sent(),c=(0,l._)(function(){var e;return(0,d.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,P(r)];case 1:return n.sent(),[3,3];case 2:return e=n.sent(),v.kg.error("GitHub Import: checkout default branch failed",{originalError:String(e),query:JSON.stringify(_.query),checkoutBranch:b,githubRepo:t}),[3,3];case 3:return[2]}})}),i=function(){return c.apply(this,arguments)},!b)return[3,11];a.label=6;case 6:return a.trys.push([6,8,,10]),[4,P(b)];case 7:case 9:return a.sent(),[3,10];case 8:return o=a.sent(),v.kg.error("GitHub Import: checkout branch from query parameter failed",{originalError:String(o),query:JSON.stringify(_.query),checkoutBranch:b,githubRepo:t}),[4,i()];case 10:return[3,13];case 11:return[4,i()];case 12:a.sent(),a.label=13;case 13:if("html"!==T.mode)return[3,16];return[4,(0,N.r)(k,X.Ql)];case 14:return a.sent(),[4,T.run()];case 15:a.sent(),a.label=16;case 16:return[4,M()];case 17:return a.sent(),v.kg.info("GitHub Import: Tidied up required files"),[2]}})}),function(e){return y.apply(this,arguments)}},eZ=function(e){var t=e.checkoutBranch,n=e.onUpdateState,r=e.showError;return(0,ep.U)(function(e){var i;return i=(0,l._)(function(i){var o,l,c,u,f,h,p,m,v,g,y,b,w,Z;return(0,d.Jh)(this,function(d){switch(d.label){case 0:o=i.remote,l=i.accessToken,c=i.homeDir,f=function(){},d.label=1;case 1:return d.trys.push([1,,15,16]),h={homeDir:c,remoteUrl:o,accessToken:null!=l?l:void 0,clearHomeDir:!0},t&&(h.checkoutBranch=t),[4,e.gitImport.fromGithub.subscribe(h)];case 2:u=(p=s._.apply(void 0,[d.sent(),2]))[0],f=p[1],m=!1,v=!1,d.label=3;case 3:d.trys.push([3,8,9,14]),y=(0,a._)(u),d.label=4;case 4:return[4,y.next()];case 5:if(!(m=!(b=d.sent()).done))return[3,7];(w=b.value).ok?n(w.payload.state):r(w.payload.code+": "+w.payload.message),d.label=6;case 6:return m=!1,[3,4];case 7:return[3,14];case 8:return Z=d.sent(),v=!0,g=Z,[3,14];case 9:if(d.trys.push([9,,12,13]),!(m&&null!=y.return))return[3,11];return[4,y.return()];case 10:d.sent(),d.label=11;case 11:return[3,13];case 12:if(v)throw g;return[7];case 13:return[7];case 14:return[3,16];case 15:return f(),[7];case 16:return[2]}})}),function(e){return i.apply(this,arguments)}},[t,n,r])};function ex(e){var t,n,r,i,o,a,c,u,g,y,w,Z,k,T,R,I,A,P,N,X,F,V,z,j,q,el,ec,es,ed=e.insertConfigPlugin,ep=e.setConfigScreenLockIsOpen,eg=e.openFile,ey=e.onUpdateState,eb=(0,em.iM)(),ex=(0,ei.P5)({controlName:"flag-pid2-github-import"})&&eb,eC=(0,ei.P5)({controlName:"flag-github-import-nix-modules"}),e_=(0,Q.useRouter)(),eS=(0,m.Z)(),ek=(0,s._)((t=(0,S._)({},J,void 0),H.D($,t)),2),eE=ek[0],eT=ek[1],eR=(0,s._)((0,x.useState)(null),2),eD=eR[0],eI=eR[1],eB=(0,C.Z)(),eG=eB.fs,eA=eB.runner,eP=eB.dotReplit,eL=(0,p.Z)(),eN=eL.showError,eO=eL.showConfirm,eU=(r=(n=(0,C.Z)()).dotReplit,i=n.nixService,o=(0,m.Z)(),c=(0,s._)((a=(0,S._)({},B,void 0),D.t(G,a)),1)[0],g=(u=(0,p.Z)()).showWarning,y=u.showError,(0,x.useCallback)((w=(0,l._)(function(e){var t,n,a,l,s,u,f,h,p,m,b,w;return(0,d.Jh)(this,function(d){switch(d.label){case 0:return[4,r.getConfig()];case 1:if(!(n=d.sent().config)||(null===(t=n.modules)||void 0===t?void 0:t.length))return[2];return[4,c({variables:{replId:o}})];case 2:if(!(null==(l=(null==(a=d.sent().data)?void 0:a.repl.__typename)==="Repl"?a.repl:null)?void 0:l.rootOriginReplUrl))return[2];try{s=E().parse(e.toString())}catch(e){return y("Failed to parse template .replit file"),v.kg.error("GitHub Import: Failed to parse template .replit file"),[2]}if(!s)return[2];return[4,function(e){return L.apply(this,arguments)}({nixService:i,dotReplit:r,config:n,templateConfig:s})];case 3:u=d.sent(),f=!0,h=!1,p=void 0;try{for(m=u[Symbol.iterator]();!(f=(b=m.next()).done);f=!0)w=b.value,g(w,1e3)}catch(e){h=!0,p=e}finally{try{f||null==m.return||m.return()}finally{if(h)throw p}}return[2]}})}),function(e){return w.apply(this,arguments)}),[o,g,y,r,i,c])),eM=(Z=(0,ee.Wd)("importBranch","string"))?decodeURIComponent(Z):null,eX=(0,eo.Z)();(0,x.useEffect)(function(){eT.error&&eN("Failed to finish cloning Repl - "+eT.error)},[eT.error,eN]),(0,x.useEffect)(function(){eD&&eN("Failed to finish cloning Repl - "+eD)},[eD,eN]),(0,x.useEffect)(function(){eT.data&&eO("Finished cloning Repl")},[eT.data,eO]);var eF=(k=(0,S._)({},J,{variables:{replId:eS},fetchPolicy:"no-cache"}),W.a(Y,k)).data,eW=(T=(0,ei.P5)({controlName:"flag-github-import-nix-modules"}),R=(0,eo.Z)(),A=(I=(0,C.Z)()).fs,P=I.dotReplit,z=(null==(V=(X={skip:!((N=(null==eF?void 0:eF.repl.__typename)==="Repl"?eF.repl.config.gitRemoteUrl:void 0)&&R),variables:N?{input:{githubRepoUrl:N}}:void 0},F=(0,S._)({},J,X),W.a(K,F)).data)?void 0:V.githubRepoInfo.__typename)==="GitHubRepoInfoOutput"?V.githubRepoInfo.topLanguages:void 0,{addRecommendedModules:(0,x.useCallback)((0,l._)(function(){var e,t,n,r,i,o;return(0,d.Jh)(this,function(a){switch(a.label){case 0:if(!(T&&z&&R))return[3,4];return e=z.map(function(e){return{language:e}}),[4,A.readFile("package.json")];case 1:return"content"in(t=a.sent())&&(n=function(e){var t,n,r=null;try{n=JSON.parse(e)}catch(e){return null}if(null===(t=n.engines)||void 0===t?void 0:t.node){var i=eu()(n.engines.node);i&&(r="".concat(i.major))}return r}(t.content.toString()))&&(e.push({language:"javascript",version:n}),z.includes("Vue")&&e.push({language:"vue",version:n})),[4,A.readFile("pyproject.toml")];case 2:return"content"in(t=a.sent())&&(r=function(e){var t,n,r,i,o,a=null;try{o=E().parse(e)}catch(e){return null}var l=(null===(r=o.tool)||void 0===r?void 0:null===(n=r.poetry)||void 0===n?void 0:null===(t=n.dependencies)||void 0===t?void 0:t.python)||(null===(i=o.project)||void 0===i?void 0:i["requires-python"]);if(l){var c=eu()(l);c&&(a="".concat(c.major,".").concat(c.minor))}return a}(t.content.toString()))&&e.push({language:"python",version:r}),i=function(e,t){var n=new Map,r=!0,i=!1,o=void 0;try{for(var a,l,c=e[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value,d=ef[u.language.toLowerCase()];if(d){var f=n.get(d);(!f||eh(u.version,f.version))&&n.set(d,u)}}}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}var h=new Map;null===(a=t.fullModules)||void 0===a||a.forEach(function(e){(null==e?void 0:e.id)&&h.set(e.id,e)});var p=new Set,m=!0,v=!1,g=void 0;try{for(var y,b=n.entries()[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var w=(0,s._)(y.value,2),Z=w[0],x=w[1];if("string"==typeof Z){var C=h.get(Z);C&&p.add(C)}else{var _=x.version;if(!_||!Z[_]){var S=Object.keys(Z);S.sort(function(e,t){return eh(e,t)?-1:1}),_=S[0]}var k=Z[_],E=h.get(k);E&&p.add(E)}}}catch(e){v=!0,g=e}finally{try{m||null==b.return||b.return()}finally{if(v)throw g}}return Array.from(p)}(e,R),o=[{op:"add",path:"nix/channel",value:'"stable-23_11"'}],i.length>0?(v.kg.info("GitHub Import: recommended modules:",Object.fromEntries(i.map(function(e){return[e.id,e.name]}))),o.push({op:"add",path:"modules",value:JSON.stringify(i.map(function(e){return e.id}))})):v.kg.warn("GitHub Import: no recommended modules found"),[4,P.updateDotReplit(o)];case 3:a.sent(),a.label=4;case 4:return[2]}})}),[P,A,T,R,z]),topLanguages:z}),eH=eW.addRecommendedModules,eV=eW.topLanguages,ez=(j=(0,l._)(function(){var e,t,n,r,i,o,a;return(0,d.Jh)(this,function(l){switch(l.label){case 0:if(!eF||(t=eF.repl,n=eF.currentUser,"Repl"!==t.__typename||!n||"CurrentUser"!==n.__typename)||(i=null!==(r=null===(e=n.gitHubInfo)||void 0===e?void 0:e.accessToken)&&void 0!==r?r:null,!(o=t.config.gitRemoteUrl)||!t.config.doClone||eC&&!eV))return[2];l.label=1;case 1:return l.trys.push([1,3,4,5]),ep(!0),[4,e2({remote:o,accessToken:i})];case 2:return l.sent(),(0,en.j)(en.U3.NIX_GH_IMPORT_USED,{action:er.D.ImportEnded,replId:t.id,orgContext:(0,ea.sI)(),nixModuleFlow:eC}),[3,5];case 3:return a=l.sent(),v.kg.error("GitHub Import: Failed to do GitHub import flow",{originalError:String(a),query:JSON.stringify(e_.query),githubRepo:o,hasAccessToken:!!i}),f.Tb(a,{extra:{query:JSON.stringify(e_.query),githubRepo:o,hasAccessToken:!!i}}),eI(String(a)),[3,5];case 4:return ep(!1),[7];case 5:return[2]}})}),function(){return j.apply(this,arguments)}),ej=(0,s._)((0,x.useState)(!1),2),eq=ej[0],eJ=ej[1];(0,x.useEffect)(function(){eX&&eF&&(!eC||eC&&eV)&&eJ(!0)},[eF,eC,eX,eq,eV]),(0,x.useEffect)(function(){eq&&ez()},[eq]);var eY=(q=(0,l._)(function(){var e;return(0,d.Jh)(this,function(t){switch(t.label){case 0:return[4,(0,_.W)({dotReplit:eP,fs:eG})];case 1:return(e=t.sent().entrypoint)&&eg({path:e,opener:(0,et.gK)(e.toLowerCase())?{paneType:"markdown"}:void 0}),[2]}})}),function(){return q.apply(this,arguments)}),e$=(el=(0,l._)(function(e,t){var n;return(0,d.Jh)(this,function(r){switch(r.label){case 0:return[4,(0,O.J9)({repoNameWithOwner:e,accessToken:t})];case 1:if("error"in(n=r.sent()))return[2,{hasDotReplit:!1,hasProcfile:!1}];return[2,{hasDotReplit:n.some(function(e){return e.path===U.l}),hasProcfile:n.some(function(e){return e.path===h.E})}]}})}),function(e,t){return el.apply(this,arguments)}),eK=(ec=(0,l._)(function(e,t){var n,r,i,o,a,l,c,s;return(0,d.Jh)(this,function(u){switch(u.label){case 0:return[4,(0,O.LK)({repoNameWithOwner:e,filePath:h.E,accessToken:t})];case 1:if("error"in(n=u.sent())||(r=ev.from(n.content,"base64").toString(),!(i=(0,h.c)(r))||!(a=null!==(o=i.web)&&void 0!==o?o:i.worker)))return[2,{showConfigPanel:!0}];return l=a.command+" "+a.options.join(" "),[4,eP.updateDotReplit([(0,M.KQ)(l),(0,M.xz)("interpreter")])];case 2:if(c=u.sent(),s=i.web&&!i.worker||!i.web&&i.worker,c.error||!s)return[2,{showConfigPanel:!0}];return[2,{showConfigPanel:!1}]}})}),function(e,t){return ec.apply(this,arguments)});function eQ(){return eG.readFile(U.l)}var e0=eZ({checkoutBranch:eM,onUpdateState:ey,showError:eN}),e1=ew({checkoutBranch:eM}),e2=(es=(0,l._)(function(e){var t,n,r,i,o,a,l,c,s,u,f,h;return(0,d.Jh)(this,function(d){switch(d.label){case 0:if(t=e.remote,n=e.accessToken,!eX||!(eF&&"Repl"===eF.repl.__typename))return[2];return v.kg.info("GitHub Import: Starting client-side GitHub import flow"),[4,eQ()];case 1:if(r=d.sent(),!(ex&&e0))return[3,3];return i=eF.repl,[4,e0({remote:t,accessToken:n,homeDir:"/home/runner/".concat(i.slug)})];case 2:return d.sent(),[3,5];case 3:return[4,e1({remote:t,accessToken:n})];case 4:d.sent(),d.label=5;case 5:if(v.kg.info("GitHub Import: Cloned repo into Repl"),"NOT_FOUND"!==r.error)return[3,8];return[4,eP.updateDotReplit([])];case 6:return d.sent(),[4,eQ()];case 7:r=d.sent(),d.label=8;case 8:if("content"in r)return[3,9];return v.kg.error("GitHub Import: Skipping patching dotReplit because templateDotReplit was an error",{readError:String(r.error)}),[3,14];case 9:return[4,eQ()];case 10:return o=d.sent(),a=""!==r.content.toString()&&"content"in o&&o.content.toString()!==r.content.toString(),[4,eU(r.content)];case 11:if(d.sent(),v.kg.info("GitHub Import: Patched dotreplit"),!a)return[3,12];return v.kg.info("GitHub Import: Repo has .replit",{githubURL:t}),[3,14];case 12:return[4,eH()];case 13:d.sent(),v.kg.info("GitHub Import: Added recommended modules"),d.label=14;case 14:return[4,eE({variables:{input:{id:eS,doClone:!1}}})];case 15:if(d.sent(),!eM)return[3,17];return[4,eG.persist()];case 16:d.sent(),(0,ee.pg)({router:e_,params:[{mode:"delete",key:"importBranch"}]}),d.label=17;case 17:return v.kg.info("GitHub Import: Disabled doClone on Repl. Done."),[4,eY()];case 18:if(d.sent(),l=b(t),c=!1,!(!eC&&l))return[3,22];return s=l.username,u=l.repository,[4,e$("".concat(s,"/").concat(u),n)];case 19:if(h=(f=d.sent()).hasDotReplit,!(f.hasProcfile&&!h))return[3,21];return[4,eK("".concat(s,"/").concat(u),n)];case 20:return c=!d.sent().showConfigPanel,[3,22];case 21:c=h,d.label=22;case 22:if("html"===eA.mode||c)return[2];return ed(),[2]}})}),function(e){return es.apply(this,arguments)})}},5017:function(e,t,n){n.d(t,{T:function(){return d}});var r=n(39271),i=n(41733),o=n(21262),a=n(71440),l=n(58995);function c(){var e=(0,o._)(["\n  query WorkspaceEduPaneEnabled($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isModelSolution\n        isProject\n        isProjectFork\n        owner {\n          __typename\n          ... on Team {\n            id\n            isAdmin\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}var s={},u=(0,a.Ps)(c());function d(){var e,t,n,o=(t={variables:{replId:(0,r.Z)()}},n=(0,i._)({},s,t),l.a(u,n)).data,a=(null==o?void 0:null===(e=o.repl)||void 0===e?void 0:e.__typename)==="Repl"?null==o?void 0:o.repl:null;if(!a)return!1;var c=a.owner;return!!c&&a.isProjectFork&&!a.isModelSolution&&"Team"===c.__typename&&c.isAdmin}},63466:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(66626),i=n(81199),o=n(50959),a=n(57253),l=n(8775);function c(){var e=(0,i.Z)().fs,t=(0,r._)((0,o.useState)(!1),2),n=t[0],c=t[1],s=(0,l.Z)(),u=s.didConnectOnce,d=s.didDisconnect;return((0,o.useEffect)(function(){return c(e.getStatus()===a.kO.Syncing),e.onStatusChange(function(e){c(e===a.kO.Syncing)})},[e]),u)?{isSaving:n,isOffline:d}:{isSaving:!1,isOffline:!1}}},12602:function(e,t,n){n.d(t,{C:function(){return c}});var r=n(27387),i=n(96583),o=n(17198),a=n(72658),l=n(69880);function c(){var e,t,n,c=(0,o.Gn)("showFileTreeGitStatus").preferences.showFileTreeGitStatus,s=(0,l.Z)((n=(0,r._)(function(e){var t,n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:if(!c)return[2,{status:null,error:null}];return[4,e.getRepositoryState()];case 1:if((t=r.sent()).error)return[2,t];if(t.type!==a.y5.NORMAL)return[2,{status:null,error:null}];return[4,e.status()];case 2:if((n=r.sent()).error)return[2,n];return[2,{status:n,error:null}]}})}),function(e){return n.apply(this,arguments)}),[c]);return s&&!s.error&&(null===(e=s.status)||void 0===e?void 0:e.changes)?function(e){var t=new Map,n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;t.set(l.path,{index:l.type.index,worktree:l.type.worktree})}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}(null===(t=s.status)||void 0===t?void 0:t.changes):null}},10901:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(59786),i=n(39271),o=n(91175),a=n(75958),l=n(81199),c=n(50959),s=n(73372),u="persistmirrored";function d(){var e=(0,o.T)(),t=(0,i.Z)(),n=(0,r.P5)({controlName:"flag-persist-mirror-html",default:!0,logFlagToAnalytics:!1}),d=(0,l.Z)().container;(0,c.useEffect)(function(){if(!(!e||!n||(null!==(r=a.Z.get(u,"array"))&&void 0!==r?r:[]).includes(t))){var r,i=d.openChannel({service:"gcsfiles",skip:function(e){return!e.repl.authorizations.editFileContents.isAuthorized}},function(e){return e.channel.request({persistMirror:{path:s.Ql}}).then(function(e){if(e.ok){var n,r;r=null!==(n=a.Z.get(u,"array"))&&void 0!==n?n:[],a.Z.set(u,r.concat(t)),i()}}),function(){}});return i}},[d,e,n,t])}},57964:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(2993),i=n(81199),o=n(50959);function a(){var e=(0,i.Z)().container;(0,o.useEffect)(function(){var t=function(){e.getConnectionState()===r.em.CONNECTED&&e.focus()};return window.addEventListener("focus",t),function(){window.removeEventListener("focus",t)}},[e])}},43580:function(e,t,n){n.d(t,{s:function(){return s}});var r=n(66626),i=n(50959),o=n(59786),a=n(89587),l=n(36559),c=n(74275),s=function(){var e=(0,o.P5)({controlName:"flag-draft-buffers"}),t=(0,a.Qk)(),n=(0,i.useRef)(!1);return(0,i.useEffect)(function(){n.current=t||!1===e},[t,e]),n};t.Z=function(e,t){var n=(0,a.Qk)(),s=(0,r._)((0,i.useState)(!1),2),u=s[0],d=s[1],f=(0,o.P5)({controlName:"flag-draft-buffers"});return(0,i.useEffect)(function(){if(!t||!(0,l.Mb)(t)||!f||(0,c.C_)((0,c.S1)(t))){d(!1);return}d(!1===e.isFileOrDirSaved(t));var n=e.watchTextFile(t,{onFileSavedChanged:function(e){d(!e)}});return function(){n()}},[e,t,f]),f&&null!==t&&!1===n&&u}},288:function(e,t,n){n.d(t,{V:function(){return c},Z:function(){return s}});var r=n(66626),i=n(50959),o=n(81199),a=n(73372),l=n(57253),c=".tutorial";function s(){var e=(0,o.Z)().fs,t=(0,r._)((0,i.useState)({isLoading:!0,isTutorial:!1}),2),n=t[0],s=t[1];return(0,i.useEffect)(function(){e.watchDir(a.Ql,{onChange:function(e){s({isLoading:!1,isTutorial:e.some(function(e){return e.type===l.Tv.Directory&&e.filename===c})})},onMoveOrDelete:function(){s({isLoading:!1,isTutorial:!1})},onError:function(){s({isLoading:!1,isTutorial:!1})}})},[e]),n}},46584:function(e,t,n){n.d(t,{ZP:function(){return R},Ln:function(){return T}});var r=n(27387),i=n(96583),o=n(43182),a=n(39271),l=n(2993),c=n(45098),s=n(19393),u=n(39126),d=n(81199),f=n(40635),h=n(22750),p=n(50959),m=n(74725),v=n(17165),g=n(57253),y=n(41733),b=n(21262),w=n(71440),Z=n(95420),x=n(58995);function C(){var e=(0,b._)(["\n  query ReplEnvironmentDesktopLoadCurriculum($id: String!) {\n    currentUser {\n      id\n      isTeacher: hasRole(role: TEACHER)\n      ...CrosisContextCurrentUser\n    }\n    repl(id: $id) {\n      ... on Repl {\n        id\n        isProject\n        isProjectFork\n        isModelSolution\n        isModelSolutionFork\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        origin {\n          id\n          ...CrosisContextRepl\n          origin {\n            id\n            ...CrosisContextRepl\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return C=function(){return e},e}var _={},S=(0,w.Ps)(C(),Z.D,Z.C),k=n(49500),E=(0,f.cn)(!1);function T(){return(0,h.Dv)(E)}function R(){var e,t,n,f=(0,a.Z)(),b=(0,d.Z)().fs,w=(e=(0,y._)({},_,{variables:{id:f}}),x.a(S,e)).data,Z=(0,h.b9)(E);(0,p.useEffect)(function(){return function(){Z(!1)}},[Z]);var C=(null==w?void 0:w.repl.__typename)==="Repl"?w.repl:null,T=(null==w?void 0:null===(t=w.currentUser)||void 0===t?void 0:t.__typename)==="CurrentUser"?w.currentUser:null,R=(null==w?void 0:w.repl.__typename)==="Repl"&&w.repl.isModelSolutionFork,D=R?C&&(null===(n=C.origin)||void 0===n?void 0:n.origin):C&&C.origin||null,I=(0,c.b)((null==D?void 0:D.__typename)==="Repl"?{repl:D,currentUser:T||void 0}:null),B=(0,s.S)();(0,p.useEffect)(function(){C&&T&&C.isProject&&b.stat(".lesson").then(function(e){e.exists||b.createDir(".lesson")})},[b,T,C]),(0,p.useEffect)(function(){if(C&&(C.isProjectFork||R)&&D&&I){var e,t=(0,l.ZP)({onUnrecoverableError:function(e){k.error(e),o.$e(function(t){t.setTag("curriculum-authoring",!0),t.setExtra("originId",D.id),o.Tb(e)})}}),n=(0,u.Z)({container:t});t.connect({context:I,getMinimumRetryDelayMs:B,fetchConnectionMetadata:function(){return(0,m.Z)({url:"/data/repls/".concat(C.id,"/get_repl_origin_guest_connection_metadata")})}});var a=t.onConnectionStateChanged((e=(0,r._)(function(e){var r,l;return(0,i.Jh)(this,function(i){switch(i.label){case 0:if(e!==v.e.CONNECTED)return[3,8];a(),i.label=1;case 1:return i.trys.push([1,6,7,8]),[4,b.copyDirFromRemote(".lesson",".lesson",n)];case 2:if(!((r=i.sent()).error&&r.error!==g.Df.NotFound))return[3,3];return o.$e(function(e){e.setTag("curriculum-authoring",!0),e.setExtra("originId",D.id),o.Tb(Error("Error copying lesson: ".concat(r.error)))}),[3,5];case 3:return[4,b.stat(".lesson/instructions.md")];case 4:i.sent().exists&&Z(!0),i.label=5;case 5:return[3,8];case 6:return l=i.sent(),o.$e(function(e){e.setTag("curriculum-authoring",!0),o.Tb(l)}),[3,8];case 7:return t.destroy(),[7];case 8:return[2]}})}),function(t){return e.apply(this,arguments)}));return function(){return t.destroy()}}},[b,I,C,D,R,Z])}},41344:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(29871),i=n(50959);function o(){var e=(0,r.r9)();(0,i.useEffect)(function(){},[e])}},82289:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(31417),i=n(27387),o=n(66626),a=n(96583),l=n(53594),c=n(50959),s=n(85733);function u(){document.activeElement instanceof HTMLElement&&document.activeElement.blur()}function d(e){var t,n,d=e.fs,f=e.openMultipleFiles,h=e.openMultipleURLs,p=e.waitForFileClose,m=e.isMobileWorkspace,v=void 0!==m&&m,g=(0,s.Z)(p),y=(0,c.useCallback)((t=(0,i._)(function(e){var t,n,r;return(0,a.Jh)(this,function(i){switch(i.label){case 0:if(t=e.filename,n=e.waitForClose,!v)return[3,2];if(!t.endsWith(".git/COMMIT_EDITMSG"))return f({paths:[t]}),[2];return r=window.prompt("Enter a commit message"),[4,d.writeFile(t,null!=r?r:"")];case 1:case 4:return i.sent(),[2];case 2:if(u(),f({paths:[t]}),!n||!g.current)return[2];return[4,g.current(t)];case 3:return i.sent(),[4,d.flush()]}})}),function(e){return t.apply(this,arguments)}),[d,v,f,g]);(0,l.C)((n=(0,i._)(function(e,t){var n,i,l,c,s,d,p,m,v,g,b,w,Z;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return n=t.session,i=t.addCleanup,[4,e.replspaceApi.init.stream({session:n.from})];case 1:c=(l=o._.apply(void 0,[a.sent(),3]))[0],s=l[1],d=l[2],i(d),p=!1,m=!1,a.label=2;case 2:a.trys.push([2,11,12,17]),g=(0,r._)(s),a.label=3;case 3:return[4,g.next()];case 4:if(!(p=!(b=a.sent()).done))return[3,10];if(!(w=b.value).ok)return[3,9];switch(w.payload.$kind){case"openFile":return[3,5];case"openMultipleFiles":return[3,7];case"openMultipleURLs":return[3,8]}return[3,9];case 5:return[4,y(w.payload)];case 6:return a.sent(),w.payload.waitForClose&&c.push({$kind:"closeFile",filename:w.payload.filename,nonce:w.payload.nonce}),[3,9];case 7:return w.payload.files.length>0&&(u(),f({paths:w.payload.files})),[3,9];case 8:return w.payload.urls.length>0&&(u(),h({urls:w.payload.urls})),[3,9];case 9:return p=!1,[3,3];case 10:return[3,17];case 11:return Z=a.sent(),m=!0,v=Z,[3,17];case 12:if(a.trys.push([12,,15,16]),!(p&&null!=g.return))return[3,14];return[4,g.return()];case 13:a.sent(),a.label=14;case 14:return[3,16];case 15:if(m)throw v;return[7];case 16:return[7];case 17:return[2]}})}),function(e,t){return n.apply(this,arguments)}),[h,f,y])}},27494:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(36556),i=n(50959);function o(){(0,i.useEffect)(function(){var e=null;return!function t(){if(window.performance.memory){var n=window.performance.memory,i=n.jsHeapSizeLimit,o=n.totalJSHeapSize,a=n.usedJSHeapSize,l=window.performance.now();r.kg.info("perf:browser_memory",{jsHeapSizeLimit:i,totalJSHeapSize:o,usedJSHeapSize:a,timeElapsed:l}),e=setTimeout(t,-(3e5*Math.log(Math.random())))}}(),function(){e&&clearTimeout(e)}},[])}},17141:function(e,t,n){n.d(t,{L:function(){return c}});var r=n(41733),i=n(39271),o=n(35020),a=n(69368),l=n(50959);function c(){var e=(0,i.Z)(),t=(0,o.Z)("fileTree").trackTimeToLoadFileStart;return(0,l.useCallback)(function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(n);var o={action:"select",source:"filetree"};i.newTab?o={action:"newTab",source:"filetree"}:i.newPane&&(o={action:"newPane",source:"filetree"}),(0,a.Z)((0,r._)({replId:e},o))},[e,t])}},14489:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(17198),i=n(39271),o=n(60305),a=n(81199),l=n(50959),c=new Set([3e3,3001,3002,3003,3306,4e3,4200,5e3,5432,5173,6e3,6800,7e3,7001,8e3,8008,8080,8081,8888,9e3,9001,1e4,25565,25577,8887,27017,27018]);function s(){var e=(0,a.Z)().container,t=(0,r.Gn)("webviewAutoOpenOnPortOpened").preferences.webviewAutoOpenOnPortOpened,n=(0,i.Z)();(0,l.useEffect)(function(){return e.onPortOpened(function(e){var r=e.port,i=e.address,a=e.isForwarded,l=e.isVnc,s=e.externalPort;if(a){(0,o.j)(o.U3.WS_PORT_OPENED,{type:l?"vnc":"webview",replId:n,port:r,externalPort:s,address:i,webviewAutoOpenOnPortOpened:t});return}(0,o.j)(o.U3.WS_UNFORWARDED_PORT_OPENED,{port:r,isCommon:c.has(r),address:i,type:l?"vnc":"webview",replId:n,externalPort:s})})},[e,n,t])}},10948:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(47726),i=n(39271),o=n(36556),a=n(70617),l=n(81199),c=n(50959),s=n(9797),u=n(87137),d=new Set;function f(e){var t=e.workspaceType,n=(0,i.Z)(),f=(0,l.Z)(),h=f.dotReplit,p=f.container;(0,c.useEffect)(function(){if(!d.has(n)){d.add(n);var e=h.watch(function(n){if(!n.error||n.error!==u.Yt.Disconnected){try{var i=p.getConnectionMetadata();if(!i||!i.token)throw Error("Expected token in measure call.");!function(e){var t=e.workspaceType,n=e.parsedToken,i=!!window.performance.getEntriesByName(s.Iy.pageNavStart,"mark").length,a={ssr:!i,workspaceType:t,tokenCluster:n.cluster},l="time to code";window.performance.measure(l,i?s.Iy.pageNavStart:void 0);var c=window.performance.getEntriesByName(l,"measure")[0];if(!c){o.kg.info("Could not obtain measure for time to code",a);return}var u="page invisible fetch connection metadata",d=c.duration;window.performance.getEntriesByName(s.Iy.fetchConnectionMetadataPageInvisibleStart,"mark").length&&(window.performance.measure(u,s.Iy.fetchConnectionMetadataPageInvisibleStart,s.Iy.fetchConnectionMetadataPageInvisibleEnd),d-=window.performance.getEntriesByName(u,"measure")[0].duration,window.performance.clearMeasures(u),window.performance.clearMarks(s.Iy.fetchConnectionMetadataPageInvisibleStart),window.performance.clearMarks(s.Iy.fetchConnectionMetadataPageInvisibleEnd)),o.kg.time("time to code minus page invisible",d,a),o.kg.time("time to code with page invisible",c.duration,a),window.performance.clearMeasures(l),r.v.addTiming("time_to_code_minus_page_invisible",d),r.v.addTiming("time_to_code_with_page_invisible",c.duration)}({workspaceType:t,parsedToken:(0,a.he)(i.token)})}catch(e){o.kg.info("Could not measure time to code",{workspaceType:t,e:e,dotReplitResult:n.error?n.error:"success"})}e()}});return e}},[n,t,h,p])}},35020:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(36556),i=n(36384),o=n(36559),a=new Map,l=function(e,t){if((0,o.Mb)(e)){var n=window.performance.now();a.set(e,{start:n,source:t})}},c=function(e){var t=a.get(e);if(void 0!==t){var n=t.start,o=t.source,l=window.performance.now(),c=(0,i.V)(e);r.kg.time("time to load file",l-n,{from:o,fileViewerType:c}),a.delete(e)}};function s(e){return{trackTimeToLoadFileStart:function(t){return l(t,e)},trackTimeToLoadFileEnd:c}}},73536:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(23009),i=n(39271),o=n(81199),a=n(41733),l=n(21262),c=n(71440),s=n(293);function u(){var e=(0,l._)(["\n  subscription WorkspaceUserCanWrite($replId: String!) {\n    currentUserCanWrite(replId: $replId)\n  }\n"]);return u=function(){return e},e}var d={},f=(0,c.Ps)(u()),h=n(50959),p=n(57253);function m(){var e,t,n=(0,o.Z)().fs,l=(e={variables:{replId:(0,i.Z)()}},t=(0,a._)({},d,e),s.m(f,t)).data,c=(null==l?void 0:l.currentUserCanWrite)===!1;(0,h.useEffect)(function(){c&&window.location.reload()},[c]);var u=(0,h.useCallback)(function(){return c||n.getStatus()===p.kO.Clean?r.Tk.NavigateAnyway:r.Tk.PromptUser},[n,c]);(0,r.ZP)({shouldPreventNavCb:u})}},60397:function(e,t,n){n.d(t,{_:function(){return y},O:function(){return g}});var r=n(27387),i=n(66626),o=n(96583),a=n(36647),l=n(20367),c=n(11407),s=n(52259),u=n(41733),d=n(21262),f=n(71440),h=n(99165);function p(){var e=(0,d._)(["\n  mutation SetUserKeybindings($input: SetUserKeybindingsInput!) {\n    setUserKeybindings(input: $input) {\n      ... on Keybindings {\n        keybindings\n      }\n    }\n  }\n"]);return p=function(){return e},e}var m={},v=(0,f.Ps)(p());function g(){var e,t=(0,l.O)(),n=(0,i._)((e=(0,u._)({},m,void 0),h.D(v,e)),1)[0],c=(0,s.F)();return(0,a.Z)(function(){var e;return e=(0,r._)(function(e){var r,a,l,s,u,d,f,h,p;return(0,o.Jh)(this,function(o){switch(o.label){case 0:r=[],a=!0,l=!1,s=void 0;try{for(u=e[Symbol.iterator]();!(a=(d=u.next()).done);a=!0)h=(f=(0,i._)(d.value,2))[0],p=f[1],r.push({commandId:h,keyCombo:p})}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}return[4,n({variables:{input:{environment:t,platform:c,keybindings:r}}})];case 1:return o.sent(),[2]}})}),function(t){return e.apply(this,arguments)}},[t,n,c])}function y(e){var t=new Map;if(!Array.isArray(e))return t;var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,s=function(e){if(e&&"object"==typeof e&&"commandId"in e&&"string"==typeof e.commandId&&"keyCombo"in e){if(Array.isArray(e.keyCombo)){var t=(0,c.uv)(e.keyCombo);return{commandId:e.commandId,keyCombo:t}}if("string"==typeof e.keyCombo){var n=(0,c.gD)(e.keyCombo);return{commandId:e.commandId,keyCombo:n}}return{commandId:e.commandId,keyCombo:null}}}(l);s&&t.set(s.commandId,s.keyCombo)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}},52259:function(e,t,n){n.d(t,{F:function(){return o}});var r=n(95571),i=n(49494);function o(){var e=(0,r.NJ)(),t=(0,r.Vm)(),n=(0,r.Cl)();return e||t?i.K5.Mac:n?i.K5.Windows:i.K5.Linux}},8812:function(e,t,n){n.d(t,{R:function(){return s}});var r=n(27387),i=n(96583),o=n(27197),a=n(21262);function l(){var e=(0,a._)(["\n  query FiletreeDownloadZip($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        url\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c=(0,n(71440).Ps)(l());function s(e){return u.apply(this,arguments)}function u(){return(u=(0,r._)(function(e){var t,n,r;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return[4,null===o.l||void 0===o.l?void 0:o.l.query({query:c,variables:{replId:e}})];case 1:return r=(null==(n=i.sent())?void 0:null===(t=n.data)||void 0===t?void 0:t.repl.__typename)==="Repl"?n.data.repl.url:window.location.pathname,window.open(r+".zip","_blank"),[2]}})})).apply(this,arguments)}},96619:function(e,t,n){n.d(t,{mn:function(){return u}});var r=n(66626),i=n(63257),o=n(36559),a=n(57253),l=["json","md","draw","txt"],c=[".gitignore",".replit"];function s(e,t){var n=new Map,a=!0,l=!1,c=void 0;try{for(var s,u=e[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d,f=s.value,h=(0,o.r6)(f);if(h&&(!t||h.startsWith(t))){var p=null!==(d=n.get(h))&&void 0!==d?d:0;n.set(h,p+1)}}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}return(0,i._)(n.entries()).sort(function(e,t){var n=(0,r._)(e,2)[1];return(0,r._)(t,2)[1]-n}).map(function(e){return(0,r._)(e,1)[0]})}function u(e,t){if(e.fileType===a.Tv.Directory||!e.input)return[];if("."===e.input)return c.map(function(e){return{value:e,highlight:[{from:1,to:e.length}]}});if(e.input.startsWith("."))return c.filter(function(t){return t.startsWith(e.input)}).map(function(t){return{value:t,highlight:[{from:t.length-e.input.length,to:t.length}]}});var n=(0,o.r6)(e.input),r=s(e.siblings.map(function(e){return e.filename}),n);if(r.length<3&&r.push.apply(r,(0,i._)(s(t(),n))),r.length<3){var u=n?l.filter(function(e){return e.startsWith(n)}):l;r.push.apply(r,(0,i._)(u))}return(0,i._)(new Set(r)).slice(0,3).map(function(t){var r=e.input;r.endsWith(".")?r=r.slice(0,-1):n&&(r=r.slice(0,-(n.length+1)));var i=r+"."+t;return{value:i,highlight:[{from:e.input.length,to:i.length}]}})}},75039:function(e,t,n){n.d(t,{B:function(){return o}});var r=n(57253),i=function(e){if(1===e.length)return e[0].type===r.Tv.File?"file":"folder";if(e.length>1){var t=e.filter(function(e){return e.type===r.Tv.File}).length,n=e.filter(function(e){return e.type===r.Tv.Directory}).length,i=t>1?"files":"file",o=n>1?"folders":"folder",a="file";return t>0&&n>0?a="".concat(i," and ").concat(o):t>0?a="".concat(i):n>0&&(a="".concat(o)),"".concat(a)}return""};function o(e){var t=i(e),n=1===e.length?t:"".concat(e.length," ").concat(t),r=e.slice(0,5).map(function(e){return e.path}).join(", ");return{name:n,description:e.length>5?"".concat(r," and ").concat(e.length-5," more ").concat(i(e.slice(5))):r,confirmDescription:n}}},15529:function(e,t,n){n.d(t,{r:function(){return r}});function r(e,t){return new Promise(function(n){var r=e.openChannel({service:"gcsfiles"},function(e){return e.channel.request({persistMirror:{path:t}}).then(function(e){e.ok,r(),n()}),function(e){e.willReconnect&&r()}})})}},68302:function(e,t,n){n.d(t,{e:function(){return _},Z:function(){return C}});var r=n(41733),i=n(66626),o=n(85234),a=n.n(o),l=n(36556),c=n(27387),s=n(98924),u=n(63257),d=n(96583),f=n(43182),h=n(66810),p=n(82614),m=n(26685),v="exit status 1";function g(){return(g=(0,c._)(function(e){var t,n,r,i,o,a,l;return(0,d.Jh)(this,function(c){switch(c.label){case 0:if(n=e.container,0===(r=(0,s._)(e,["container"])).query.trim().length)return[2,y(m.f.EMPTY_QUERY)];if(n.getConnectionState()===h.em.DISCONNECTED)return[2,y(m.f.CONTAINER_DISCONNECTED)];if(n.getConnectionState()===h.em.CONNECTING)return[2,y(m.f.CONTAINER_CONNECTING)];return[4,(t=n).exec.apply(t,(0,u._)((0,p.PR)(r)))];case 1:if(o=(i=c.sent()).output,a=i.error)switch(a){case v:return[2,y(m.f.EMPTY_RESULTS)];case"signal: broken pipe":return[2,y(m.f.PARTIAL_RESULTS)];case"Channel closed":return[2,y(m.f.CHANNEL_CLOSED)];default:return f.Tb(Error("Ripgrep search command failed with error: ".concat(a))),[2,{error:a,data:null}]}if(!(null==o?void 0:o.trim())||!(l=(0,p.Tq)()(o))||0===l.filesMap.size)return[2,y(m.f.EMPTY_RESULTS)];return[2,y(l.error,l.filesMap)]}})})).apply(this,arguments)}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{error:e,data:t}}var b=n(86763),w=n.n(b),Z=n(19327),x="File Search Used";function C(e){var t=e.container,n=e.onError,i=e.onUpdate,o=e.onLoadingStateChange,c=e.isStreaming,u=e.trackLatency,d=void 0!==u&&u,h=(0,Z.Z)({container:t}),g=[],y=a()(),b=Date.now(),C=function(e){i(g=e)};return w()(function(e){var t=a()();y=t,b=Date.now(),n(null),o(!0);var i=!0;if(""===e.query){C([]),o(!1);return}!function(e){var t=e.execer,n=e.onComplete,r=e.onError,i=e.onParse,o=(0,s._)(e,["execer","onComplete","onError","onParse"]);if(0===o.query.length){n("abort");return}var a=new TextEncoder,l=(0,p.Tq)(),c=0,u=0,d=function(){},h=function(e){r(e),n("error")},g=function(e){if(0===c&&"finished"===e){h(m.f.EMPTY_RESULTS);return}"finished"===e?n(e,{bytes:u}):n(e),d()},y=t.onOutput(function(e){var t=a.encode(e).length;u+=t;var n=l(e);if(n){var r=n.error,o=n.filesMap,s=n.filesMapChanges;r&&h(r),c=o.size,s.forEach(function(e){var t=o.get(e);t&&o.set(e,(0,p.Vd)(t))}),i(o,s)}}),b=t.onStderr(function(e){if(e.trim()===v)return h(m.f.EMPTY_RESULTS);h(m.f.INVALID_COMMAND)});d=function(){y(),b()};var w=(0,p.PR)(o);t.request({args:w,noUserEnv:!0}).then(function(e){if(e.error)return e.error.trim()===v?h(m.f.EMPTY_RESULTS):h(m.f.INVALID_COMMAND);g("finished")}).catch(function(e){return f.Tb(Error("Ripgrep search command failed with error: ".concat(e))),h(m.f.INVALID_COMMAND)})}((0,r._)({execer:h,onComplete:function(r,i){if(y===t){o(!1);var a,c,s,u,f="finished"===r&&i&&i.bytes===p.Ak;f&&n(m.f.PARTIAL_RESULTS),d&&l.kg.time("".concat(x," - complete"),Date.now()-b,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!==(s=null==e?void 0:null===(a=e.includeGlobs)||void 0===a?void 0:a.length)&&void 0!==s?s:0)>0,hasExcludes:(null!==(u=null==e?void 0:null===(c=e.excludeGlobs)||void 0===c?void 0:c.length)&&void 0!==u?u:0)>0,latency:Date.now()-b,isPartialResults:f})}},onError:function(e){y===t&&n(e)},onParse:function(n,r){if(y===t){if(i){if(d){var a,s,u,f;l.kg.time("".concat(x," - first_chunk"),Date.now()-b,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!==(u=null==e?void 0:null===(a=e.includeGlobs)||void 0===a?void 0:a.length)&&void 0!==u?u:0)>0,hasExcludes:(null!==(f=null==e?void 0:null===(s=e.excludeGlobs)||void 0===s?void 0:s.length)&&void 0!==f?f:0)>0})}C((0,p.Md)([],n,r)),i=!1}else C((0,p.Md)(g,n,r));c&&o(!1)}},mode:"json",context:0},e))},200)}function _(e){var t=e.container,n=w()(function(e,n,o){(function(e){return g.apply(this,arguments)})((0,r._)({container:t,mode:"json",context:1,isCaseSensitive:!1},e)).then(function(e){var t=e.data?function(e){var t={},n=!0,r=!1,o=void 0;try{for(var a,l=e.entries()[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=(0,i._)(a.value,2),s=c[0],u=c[1];t[s]=u.lines.map(function(e){return{content:e.content,lineNumber:e.lineNumber,matches:e.matches.map(function(e){return{column:e.start,length:e.length}})}}).filter(function(e){return e.matches.length>0})}}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return t}(e.data):{},r=e.error===m.f.PARTIAL_RESULTS;if(r);else if(e.error)return n({error:e.error,results:null,isPartialResult:r});return n({error:null,results:t,isPartialResult:r})}).catch(o)},200);return function(e){return new Promise(function(t,r){return n(e,t,r)})}}},56443:function(e,t,n){n.d(t,{Eu:function(){return d},m6:function(){return l}});var r,i,o,a=n(63257);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=function(e){return e.forEach(function(e){return e&&n.push("-g",e)})},i=[],o=[],l=!0,u=!1,f=void 0;try{for(var h,p=e[Symbol.iterator]();!(l=(h=p.next()).done);l=!0){var m=h.value,v=s(m);v.startsWith("**")?i.push(v):o.push(v)}}catch(e){u=!0,f=e}finally{try{l||null==p.return||p.return()}finally{if(u)throw f}}return o.length>0&&(r(["!*"]),new Set(o).forEach(function(e){r((function(e){var t=function(e){Array.isArray(r[e])||(r[e]=[]);var t,i=n[e],o=i.startsWith("{")&&i.endsWith("}")?d(i.substring(1,i.length-1),","):[i];(t=r[e]).push.apply(t,(0,a._)(o.map(function(t){var n=r[e-1];return n&&n.length>0?n.map(function(e){return"".concat(e,"/").concat(t)}):t}).flat(2)))},n=d(e,"/").filter(function(e){return e.length>0});"**"!==n[n.length-1]&&n.push("**");for(var r={},i=0;i<n.length;i++)t(i);return Object.values(r).flat(2)})(e).map(c))})),r(i),r(t.map(function(e){return"!".concat(c(s(e)))})),n}function c(e){return e.startsWith("**")||e.startsWith("/")?e:"/".concat(e)}function s(e){return e.replaceAll(/\*/g,function(e,t,n){return t>0&&("*"===n[t-1]||"\\"===n[t-1])||t<n.length-1&&"*"===n[t+1]?e:"**"})}var u=(r={},i={},(o=function(e,t){r[e]=t,i[t]=e})("{","}"),o("(",")"),o("[","]"),{hasKey:function(e){return e in r},getKey:function(e){return r[e]},hasValue:function(e){return e in i},getValue:function(e){return i[e]}});function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";if(0===e.length)return[];var n=[],r=[],i="",o=!0,a=!1,l=void 0;try{for(var c,s=e[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var d=c.value;if(d===t){if(0===r.length){n.push(i),i="";continue}}else if(u.hasKey(d))r.push(d);else if(u.hasValue(d)&&r.pop()!==u.getValue(d))return[e];i+=d}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return 0!==r.length?[e]:(i.length>0&&n.push(i),n)}},82614:function(e,t,n){n.d(t,{Ak:function(){return f},Tq:function(){return h},PR:function(){return g},Vd:function(){return m},Md:function(){return v}});var r=n(41733),i=n(30509),o=n(63257),a=n(36556);function l(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map(function(e){return e.match(/["\s]/)&&!e.match(/'/)?"'".concat(e.replace(/(['\\])/g,"\\$1"),"'"):e.match(/["'\s]/)?'"'.concat(e.replace(/(["\\$`!])/g,"\\$1"),'"'):e.replace(/[#!"$&'()*,:;<=>?@[\\\]^`{|}]/g,"\\$&")}).join(" ")}var c=n(56443),s=n(26685),u=n(90005),d=n(91620).lW,f=524288;function h(){var e="",t=new Map;return function(n){var o=new Set,l=!1;if(n.trim().startsWith("error"))return{error:s.f.INVALID_COMMAND,filesMap:t,filesMapChanges:o};var c=n.indexOf("\n"),u=0,d=e+n;if(c>=0)c+=e.length;else{e=d;return}for(;c>=0;){var f=d.substring(u,c).trim();if(0!==f.length){var h=function(e){try{return JSON.parse(e)}catch(e){return null}}(f);h&&!function(e,t,n){switch(e.type){case"begin":var o=p(e.data.path);if(!o)return!1;t.set(o,{path:o,lines:[],dedentBy:0}),n.add(o);break;case"end":break;case"match":case"context":var l=p(e.data.path);if(!l)return!1;n.add(l);var c=t.get(l);if(!c)return!1;var s=function(e,t){var n,o,a=p(e.data.lines);if(!a)return null;var l=a.trimEnd().split(/\r?\n/),c=[];(null===(n=l[0])||void 0===n?void 0:n.trim())===""&&l.shift(),(null===(o=l[l.length-1])||void 0===o?void 0:o.trim())===""&&l.pop();var s=0,u=0,d=e.data.submatches;return l.forEach(function(t,n){var r=e.data.line_number+n,i=u;u+=t.length+1;for(var o=[];s<d.length;){var a=d[s];if(a.start>=u)break;var l=a.start-i,f=void 0;if(f=a.end<u?a.end-a.start:a.end===u?a.end-a.start-1:t.length-l,l<t.length&&o.push({start:l,length:f}),a.end>u){a.start=u;break}s++}c.push({lineNumber:r,content:t,matches:o})}),(0,i._)((0,r._)({},t),{lines:t.lines.concat(c)})}(e,c);s&&t.set(l,s);break;case"error":return a.kg.error("Invalid Search Line",{line:JSON.stringify(e)}),!1}return!0}(h,t,o)&&(l=!0)}u=c+1,c=d.indexOf("\n",u)}return e=d.substring(u),{error:l?s.f.INVALID_LINE:null,filesMap:t,filesMapChanges:o}}}function p(e){return e?"bytes"in e?d.from(e.bytes,"base64").toString():e.text:null}function m(e){var t,n=e.lines.length>0?(t=Math).min.apply(t,(0,o._)(e.lines.map(function(e){return e.content.match(/^[\t ]+/)}).flat().map(function(e){return(null==e?void 0:e.length)||0}))):0;return(0,i._)((0,r._)({},e),{dedentBy:n})}function v(e,t,n){for(var r=(0,o._)(e),i=new Set,a=0;a<r.length;a++){var l=r[a].path,c=t.get(l);n.has(l)&&c&&(r[a]=c,i.add(l))}var s=!0,u=!1,d=void 0;try{for(var f,h=n[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value,m=t.get(p);!i.has(p)&&m&&r.push(m)}}catch(e){u=!0,d=e}finally{try{s||null==h.return||h.return()}finally{if(u)throw d}}return r}function g(e){var t=e.mode,n=e.query,r=e.context,i=e.isRegex,a=e.isCaseSensitive,s=e.isMatchingWholeWords,d=e.includeGlobs,h=e.excludeGlobs,p=void 0===h?(0,o._)(u.hD):h,m=["rg"];switch(t){case"json":m.push("--json");break;case"files":m.push("--files-with-matches")}return null!==r&&m.push("--context","".concat(r)),n.includes("\n")&&m.push("--multiline"),i||m.push("--fixed-strings"),m.push("--max-count","100"),m.push("--max-filesize","4M"),m.push("--max-depth","24"),m.push("--max-columns","512"),m.push("--max-columns-preview"),m.push(a?"--case-sensitive":"--ignore-case"),m.push("--hidden"),s&&m.push("--word-regexp"),m.push.apply(m,(0,o._)((0,c.m6)(d,p))),m.push("--",n),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return["sh","-c","".concat(l.apply(void 0,(0,o._)(e))," | head -c ").concat(t)]}(m)}},26685:function(e,t,n){var r,i;n.d(t,{f:function(){return r}}),(i=r||(r={})).PARTIAL_RESULTS="Displaying partial results, try being more specific with your search.",i.EMPTY_RESULTS="Nothing came up searching your Repl's content.",i.EMPTY_QUERY="No search query was provided.",i.INVALID_LINE="We encountered an invalid line while parsing your search results.",i.INVALID_COMMAND="Ripgrep returned an invalid response.",i.CONTAINER_DISCONNECTED="Disconnected from the container.",i.CONTAINER_CONNECTING="Connecting to the container.",i.CHANNEL_CLOSED="Channel was closed."},69368:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(60305);function i(e){(0,r.j)(r.U3.FILETREE_USED,e)}},24090:function(e,t,n){n.d(t,{YI:function(){return L},kW:function(){return P}});var r,i,o=n(41733),a=n(30509),l=n(4216),c=n(49224),s=n(72093),u=n(72121);n(50959),(r=i||(i={})).TEXT="TEXT",r.MENTION="MENTION",r.LINK="LINK",r.REPL_LINK="REPL_LINK",r.DEEP_LINK="DEEP_LINK",r.CODE="CODE",r.BOLD="BOLD",r.ITALICS="ITALICS",r.STRIKETHROUGH="STRIKETHROUGH",r.QUOTE="QUOTE";var d=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)(u.Z,{size:"small",onClick:n,children:t.content})},f=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)(u.Z,{size:"small",fontWeight:"medium",onClick:n,children:t.content})},h=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("a",{href:t.url,onClick:n,rel:"noreferrer noopener nofollow",target:"_blank",children:t.content})},p=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("a",{href:t.url,onClick:n,target:"_blank",children:t.content})},m=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("a",{href:t.url,onClick:n,children:t.content})},v=function(e){var t=e.fragment,n=e.onClick,r=e.style;return(0,l.tZ)("code",{onClick:n,style:r,children:t.content})},g=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("b",{onClick:n,children:t.content})},y=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("i",{onClick:n,children:t.content})},b=(0,c.X)({strikethrough:[{textDecoration:"line-through"}],blockquote:[s.l0.color.foregroundDimmest,s.l0.border({width:2,color:s.TV.foregroundDimmest,direction:"left"}),{paddingLeft:6}]}),w=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("span",{onClick:n,css:b.strikethrough,children:t.content})},Z=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("blockquote",{onClick:n,css:b.blockquote,children:t.content})},x=/(@[0-9a-zA-Z_]+)/,C=/(#[-a-zA-Z0-9@:%._+~#=/]+)/,_=/(https?:\/\/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{2,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&//=]*))/,S=/(`.+?`)/,k=/(\*\*.+?\*\*)/,E=/(_.+?_)/,T=/(\*.+?\*)/,R=/(~~.+?~~)/,D=/(^>.+?$\n?)/m,I=/\/@([0-9a-zA-Z_]+)\/(.+)/;function B(e){var t=e.url;return{type:"LINK",url:t,content:t}}function G(e){var t=e.hash;return{type:"DEEP_LINK",url:t,content:t}}var A=RegExp([S.source,k.source,E.source,T.source,R.source,_.source,x.source,C.source,D.source].join("|"),"m");function P(e,t){var n=e.split(A),r=[],i=[],o=!0,a=!1,l=void 0;try{for(var c,s=n[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;if(u){var d=function(e,t){if(_.test(e)){var n={};try{n=new window.URL(e)}catch(t){return{content:e,type:"TEXT"}}return["repl.it","replit.com","firewalledreplit.com",document.location.host].includes(n.host)?n.pathname===t.replUrl?G({hash:n.hash}):I.test(n.pathname)?function(e){var t=e.url,n=I.exec(t.pathname);if(!n)throw Error("Not a Repl URL");return{type:"REPL_LINK",url:t.href,content:"@".concat(n[1],"/").concat(n[2]).concat(t.hash)}}({url:n}):B({url:e}):B({url:e})}if(C.test(e))return G({hash:e});if(D.test(e))return{type:"QUOTE",content:({text:e.slice(1).trim()}).text};if(S.test(e))return{type:"CODE",content:({code:e.slice(1,-1)}).code};if(k.test(e))return{type:"BOLD",content:({text:e.slice(2,-2)}).text};if(E.test(e)||T.test(e))return{type:"ITALICS",content:({text:e.slice(1,-1)}).text};if(R.test(e))return{type:"STRIKETHROUGH",content:({text:e.slice(2,-2)}).text};if(x.test(e)){var r=e.slice(1);if(!t.users||t.users.includes(r))return{type:"MENTION",username:r,content:"@".concat(r)}}return{content:e,type:"TEXT"}}(u,t);if(d){if("MENTION"===d.type){if(!d.username)continue;r.push(d.username)}i.push(d)}}}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return{tokens:i,mentions:r}}function L(e){var t=e.message,n=e.onMentionClick,r=void 0===n?function(){}:n,i=e.codeStyles,c=void 0===i?{}:i;return(0,l.tZ)(l.HY,{children:t.tokens.map(function(e,t){var n={fragment:e,key:t};return"MENTION"===e.type?(0,l.tZ)(f,(0,a._)((0,o._)({},n),{onClick:function(){return r(e)}})):"LINK"===e.type?(0,l.tZ)(h,(0,o._)({},n)):"REPL_LINK"===e.type?(0,l.tZ)(p,(0,o._)({},n)):"DEEP_LINK"===e.type?(0,l.tZ)(m,(0,o._)({},n)):"CODE"===e.type?(0,l.tZ)(v,(0,a._)((0,o._)({},n),{style:c})):"BOLD"===e.type?(0,l.tZ)(g,(0,o._)({},n)):"ITALICS"===e.type?(0,l.tZ)(y,(0,o._)({},n)):"STRIKETHROUGH"===e.type?(0,l.tZ)(w,(0,o._)({},n)):"QUOTE"===e.type?(0,l.tZ)(Z,(0,o._)({},n)):(0,l.tZ)(d,(0,o._)({},n))})})}},85645:function(e,t,n){n.d(t,{D:function(){return cq}});var r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y,b,w,Z,x,C=n(41733),_=n(30509),S=n(66626),k=n(63257),E=n(4216),T=n(33083),R=n(92191),D=n(74044),I=n(99149),B=n(63993),G=n(24655),A=n(28360),P=n(26101),L=n(6922),N=n(17198),O=n(36647),U=n(38753),M=n(16923),X=n(91961),F=n(56993),W=n(70501),H=n(72452),V=n(44049),z=n(65059),j=n(34270),q=n(1187),J=n(7466),Y=n(85421),$=n.n(Y),K=n(66048),Q=n(70016),ee=n(40635),et=n(50959),en=n(36559),er=n(52130),ei=n(54401),eo=n(63891),ea=n(94778),el=n(27856),ec=n(84077),es=n(72093),eu=n(86763),ed=n.n(eu),ef=n(33675),eh=n(95571),ep=n(49224),em=(0,ep.X)({root:[es.l0.height(48),es.l0.backgroundColor.backgroundRoot,es.l0.display.flex,es.l0.justify.spaceBetween,es.l0.align.stretch,{fontFamily:"Monaco, Menlo, 'Ubuntu Mono', Consolas, source-code-pro, monospace",button:[es.l0.color.foregroundDefault,es.l0.fontSize(16),es.l0.flex.growAndShrink(1),{padding:"10px",fontFamily:"inherit",backgroundColor:"transparent",border:"0 none",flexBasis:"auto"}]}],fixedContainer:[es.l0.position.fixed,es.l0.width("100%"),es.l0.zIndex(100),es.l0.left(0)]}),ev=function(e){var t=e.buttons,n=e.onClick,r=e.onUndo,i=e.onRedo;return(0,E.BX)("nav",{css:em.root,children:[t.map(function(e){return(0,E.tZ)("button",{onClick:function(t){t.stopPropagation(),t.preventDefault(),n(e)},children:void 0!==e.label?e.label:e.value},e.value)}),(0,E.tZ)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),r()},children:(0,E.tZ)(el.Z,{})}),(0,E.tZ)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),i()},children:(0,E.tZ)(ec.Z,{})})]})},eg=[{value:"{}",cursorOffset:1},{value:"()",cursorOffset:1},{value:'""',cursorOffset:1}],ey=function(e){var t=e.path,n=(0,k._)(eg).concat([{value:"= ",cursorOffset:2}]);return t.endsWith(".html")&&(n.unshift({value:"<>",cursorOffset:1}),n.unshift({label:"div",value:"<div></div>",cursorOffset:5})),n},eb="visualViewport"in window;function ew(e){var t=e.filePath,n=e.isLoading,r=(0,ef.uN)(),i=(0,ei.d)({tablet:!1}),o=(0,eh.Vm)(),a=(0,eo.Z)();(0,et.useEffect)(function(){a&&r&&r.requestMeasure({read:function(){return{cursor:r.coordsAtPos(r.state.selection.main.head),scroller:r.scrollDOM.getBoundingClientRect()}},write:function(e){var t=e.cursor,n=e.scroller;if(t){var i=(t.top+t.bottom)/2,a=(n.top+n.bottom)/2;Math.abs(i-a)>5&&(r.scrollDOM.scrollTop+=i-a+(o?50:0))}}})},[a,r,o]);var l=(0,S._)((0,et.useState)(0),2),c=l[0],s=l[1];if((0,et.useEffect)(function(){if(o){var e=window.visualViewport;if(eb&&e){var t=ed()(function(){s(window.innerHeight-e.height-e.offsetTop)},100);return e.addEventListener("scroll",t),e.addEventListener("resize",t),function(){e.removeEventListener("scroll",t),e.removeEventListener("resize",t)}}}},[o]),!a||n||!i)return null;var u=(0,E.tZ)(ev,{onUndo:function(){r&&((0,er.Yw)(r),r.focus())},onRedo:function(){r&&((0,er.KX)(r),r.focus())},onClick:function(e){if(r){var t,n=null!==(t=r.state.selection.ranges[0].from)&&void 0!==t?t:0;r.dispatch({changes:{from:n,insert:e.value},selection:{anchor:n+e.cursorOffset}}),r.focus()}},buttons:ey({path:t})});return!o||eb?(0,E.tZ)(ea.G,{css:em.fixedContainer,style:{bottom:c},children:u}):u}var eZ=n(13621),ex=n(85777),eC=n(30364),e_=n(27387),eS=n(96583),ek=n(3030),eE=n(60941),eT=n(46298),eR=n(84806),eD=n(81199),eI=n(75706),eB=n(7849),eG=new eE.j(function(e,t,n,r){return(0,eB.Rr)(e,t?(0,eI.ZF)("/home/runner/".concat(t.slug,"/").concat(n)):null,r)}),eA=n(12285),eP=n(80403),eL=n(73393),eN=n(16783),eO=n.n(eN),eU="".concat('url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><circle cx="10" cy="10" r="10" fill="black" /></svg>\')',", linear-gradient(transparent, transparent)"),eM="".concat('url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none" d="M2.5 10H15.5M15.5 10L9.5 5M15.5 10L9.5 15M18 4V16"/></svg>\')',", linear-gradient(transparent, transparent)"),eX=ek.tk.theme({".cm-vws-space":{backgroundColor:es.TV.foregroundDimmest,maskImage:eU,maskSize:"0.375ch",maskPosition:"center",maskRepeat:"no-repeat","-webkit-mask-image":eU,"-webkit-mask-size":"0.375ch","-webkit-mask-position":"center","-webkit-mask-repeat":"no-repeat","&.cm-vws-leading":{opacity:.325},"&.cm-vws-enclosed":{opacity:.5},"&.cm-vws-trailing":{opacity:.5},"&.cm-vws-selected":{opacity:.75}},".cm-vws-tab":{backgroundColor:es.TV.foregroundDimmest,maskImage:eM,maskSize:"1.75ch 1.75ch",maskPosition:"center",maskRepeat:"no-repeat","-webkit-mask-image":eM,"-webkit-mask-size":"1.75ch 1.75ch","-webkit-mask-position":"center","-webkit-mask-repeat":"no-repeat","&.cm-vws-leading":{opacity:.325,maskPosition:"left min(95%, 0.25ch) top 50%","-webkit-mask-position":"left min(95%, 0.25ch) top 50%"},"&.cm-vws-enclosed, &.cm-vws-trailing":{opacity:.5,maskPosition:"calc(50% - 0.25ch) 50%","-webkit-mask-position":"calc(50% - 0.25ch) 50%"},"&.cm-vws-selected":{opacity:.75}}}),eF=eO()(function(e,t,n){var r="cm-vws-".concat(" "===e?"space":"tab"," cm-vws-").concat(t).concat(n?" cm-vws-selected":"");return ek.p.mark({class:r})},function(e,t,n){return"".concat(e,"-").concat(t,"-").concat(n)});function eW(e,t,n){var r=e.facet(ez);if(!r.leading&&!r.enclosed&&!r.trailing&&!r.selected)return[];for(var i=[],o=e.doc.lineAt(t),a=e.doc.lineAt(n),l=o.number;l<=a.number;l++)!function(o){var a=e.doc.line(o),l=a.text.length;if(0!==l){var c=0===a.text.trim().length,s=!!r.selected&&e.selection.ranges.some(function(e){return!e.empty&&e.from<a.to&&e.to>=a.from});if(r.leading||r.enclosed||r.trailing||s){if(c){if(r.leading||r.trailing||s)for(var u=0;u<l;u++)!function(o){var l=a.text[o],c=a.from+o;if(!(c<t)&&!(c>=n)&&(" "===l||"	"===l)){var u=s&&e.selection.ranges.some(function(e){return e.from<=c&&e.to>c});(r.leading||r.trailing||u)&&i.push(eF(l,"trailing",u).range(c,c+1))}}(u);return}for(var d=l-a.text.trimStart().length,f=a.text.trim().length,h=0;h<l;h++)!function(o){var l=a.text[o],c=a.from+o;if(!(c<t)&&!(c>=n)&&(" "===l||"	"===l)){var u=void 0;u=o>=d+f?"trailing":o>d?"enclosed":"leading";var h=s&&e.selection.ranges.some(function(e){return e.from<=c&&e.to>c});(r[u]||h)&&i.push(eF(l,u,h).range(c,c+1))}}(h)}}}(l);return i}var eH=function(){"use strict";function e(t){(0,eA._)(this,e),this.decorations=ek.p.set(eW(t.state,0,t.state.doc.length))}return e.prototype.update=function(e){if((0,eL.aU)(e,ez)){this.decorations=ek.p.set(eW(e.state,0,e.state.doc.length));return}var t=e.state.facet(ez);if(e.docChanged||e.selectionSet&&t.selected){var n=this.decorations,r=null,i=null;if(e.selectionSet&&t.selected){var o=e.startState.selection.ranges.filter(function(e){return!e.empty}),a=(0,k._)(e.state.selection.ranges).concat((0,k._)(e.startState.selection.map(e.changes).ranges)).filter(function(e){return!e.empty});o.length&&(r=eP.jT.create(o)),a.length&&(i=eP.jT.create(a))}if(e.docChanged&&e.changes.iterChangedRanges(function(t,n,o,a){var l=eP.jT.range(e.startState.doc.lineAt(t).from,e.startState.doc.lineAt(n).to);r=r?r.addRange(l):eP.jT.create([l]);var c=eP.jT.range(e.state.doc.lineAt(o).from,e.state.doc.lineAt(a).to);i=i?i.addRange(c):eP.jT.create([c])}),r){var l=r.ranges;n=n.update({filter:function(e,t){return!l.some(function(n){return n.from<=e&&n.to>=t})},filterFrom:l[0].from,filterTo:l[l.length-1].to})}e.docChanged&&(n=n.map(e.changes)),i&&(n=n.update({add:i.ranges.map(function(t){return eW(e.state,t.from,t.to)}).flat()})),this.decorations=n}},e}(),eV=ek.lg.fromClass(eH,{decorations:function(e){return e.decorations}}),ez=eP.r$.define({combine:function(e){var t;return null!==(t=e[0])&&void 0!==t?t:{}},enables:[eX,eP.Wl.highest(eV)]}),ej=new eE.j(function(e,t,n,r){return e||t||n||r?ez.of({leading:e,enclosed:t,trailing:n,selected:r}):null}),eq=n(61762),eJ=n(25596),eY=n(118),e$=n(42385),eK=n(34635),eQ=n(73058),e0=n(33530),e1=n(29121),e2=n(54960),e4=n(19327),e3=new eE.j(function(e,t,n,r,i,o){return e?e.formatters.map(function(e){var a;if(2===(a=e.id.split("/")).length&&a[1].includes("languageServer")){var l,c,s=n.find(function(t){return t.clientId===e.id});return s&&s&&s.isSupportedFile(o)&&r&&r.isFormatSupported&&(0,eK.Z)(s).isFormatSupported&&i?eJ.Lf.of({format:(l=(0,e_._)(function(e,t,n){return(0,eS.Jh)(this,function(r){return[2,(t?s.request.formatRange(o,(0,eY.Ih)(e,t),n):s.request.format(o,n)).then(function(t){return"error"in t||t.cancelled?{error:!0}:t.result?{result:(0,eQ.Z)(t.result,e.toString())}:{result:eP.as.empty(e.length)}})]})}),function(e,t,n){return l.apply(this,arguments)}),supportsRangeFormatting:(0,eK.Z)(s).isFormatRangeSupported,identifier:s.clientId,name:s.clientName}):[]}return(0,e2.F)(o,e)?eJ.Lf.of({format:(c=(0,e_._)(function(n,r,i){var a,l,c,s,u;return(0,eS.Jh)(this,function(d){switch(d.label){case 0:if(!e.startCommand)throw Error("Expected formatter command");return a=(0,e4.Z)({container:t}),l=e.startCommand.args.map(function(e){return"$file"===e?o:e}),r&&e.id.includes("prettier")&&l.push("--range-start",String(r.main.from),"--range-end",String(r.main.to)),e.id.includes("prettier")&&l.push("--tab-width",String(i.tabSize),"--use-tabs",String(!i.insertSpaces)),c="",s="",u=[a.onOutput(function(e){return c+=e}),a.onStderr(function(e){return s+=e}),a.dispose],[4,a.request((0,_._)((0,C._)({},e.startCommand),{args:l,lifecycle:eq.api.Exec.Lifecycle.STDIN,stdin:n.toString()})).then(function(e){var t=e.error;return u.forEach(function(e){return e()}),t?{error:!0,message:s}:{result:c}})];case 1:return[2,d.sent()]}})}),function(e,t,n){return c.apply(this,arguments)}),supportsRangeFormatting:e.id.includes("prettier"),identifier:e.id,name:e.name}):null}).filter(Boolean):null}),e8=n(32754),e6=n(44322),e5=n(4955),e7=n(9670),e9=function(e){"use strict";(0,e5._)(n,e);var t=(0,e7._)(n);function n(e){var r;return(0,eA._)(this,n),(r=t.call(this)).type=e,r}return n.from=function(e){switch(e){case"yours":return this.yours;case"base":return this.base;case"middle":return this.middle;case"theirs":return this.theirs}},n.range=function(e,t,n){return this.from(e).range(t,n)},n}(eP.uU);function te(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,i=[],o=n;o<=r;){var a=e.lineAt(o),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;if(e.text.length<t)return null;var n=e.text[0],r=function(e){switch(e){case"<":return"yours";case"|":return"base";case"=":return"middle";case">":return"theirs";default:return null}}(n);if(!r)return null;var i=n.repeat(t);return e.text.slice(0,t)!==i||e.text.length>t&&" "!==e.text[t]?null:r}(a,t);l&&i.push(e9.range(l,a.from,a.to)),o=a.to+1}return i}e9.yours=new e9("yours"),e9.base=new e9("base"),e9.middle=new e9("middle"),e9.theirs=new e9("theirs");var tt=["yours","base","middle","theirs"];function tn(e){Array.isArray(e)&&(e=eP.Xs.of(e));var t=[],n=[];if(0===e.size)return{hunks:t,hanging:n};for(var r=e.iter();null!==r.value;){var i,o,a,l={},c={},s=[],u=!0,d=!1,f=void 0;try{for(var h,p=tt[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var m=h.value,v=r.value,g=r.from,y=r.to;if("base"!==m||v.type===m){if(v.type===m)l[m]={from:g,to:y},s.push({from:g,to:y,type:v.type});else if("yours"!==v.type)s.push({from:g,to:y,type:v.type});else break;if(r.next(),null===r.value)break}}}catch(e){d=!0,f=e}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}if(!l.yours||!l.middle||!l.theirs){n.push.apply(n,(0,k._)(s));continue}null!==(i=l.base)&&void 0!==i||(l.base=null),null!==(o=c.base)&&void 0!==o||(c.base=null);var b=null!==(a=l.base)&&void 0!==a?a:l.middle,w=l.yours.to+1,Z=b.from-1;if(c.yours=w<Z?{from:w,to:Z}:null,l.base){var x=l.base.to+1,C=l.middle.from-1;c.base=x<C?{from:x,to:C}:null}var _=l.middle.to+1,S=l.theirs.from-1;c.theirs=_<S?{from:_,to:S}:null;var E={from:l.yours.from,to:l.theirs.to,markers:l,content:c};t.push(E)}return{hunks:t,hanging:n}}var tr=eP.r$.define({combine:function(e){return e.length?e[0]:7}}),ti=eP.QQ.define({create:function(e){var t=e.doc,n=e.facet(tr),r=eP.Xs.of(te(t,n)),i=tn(r);return{markers:r,hunks:i.hunks,hanging:i.hanging}},update:function(e,t){var n=t.newDoc,r=t.startState.facet(tr),i=t.state.facet(tr);if(r!==i){var o=eP.Xs.of(te(n,i)),a=tn(o);return{markers:o,hunks:a.hunks,hanging:a.hanging}}if(!t.docChanged)return e;var l=null,c=null,s=null,u=null;t.changes.iterChangedRanges(function(e,t,n,r){l=null===l?e:Math.min(l,e),c=null===c?t:Math.max(c,t),s=null===s?n:Math.min(s,n),u=null===u?r:Math.max(u,r)});var d=e.markers;if(null!==l&&null!==c){var f=t.startState.doc.lineAt(l).from,h=t.startState.doc.lineAt(c).to;d=d.update({filter:function(){return!1},filterFrom:f,filterTo:h})}d=d.map(t.changes),null!==s&&null!==u&&(d=d.update({add:te(n,i,s,u)}));var p=tn(d);return{markers:d,hunks:p.hunks,hanging:p.hanging}}}),to=ek.tk.atomicRanges.from(ti,function(e){return function(){return e.markers}}),ta=eP.yy.changeFilter.of(function(e){var t=e.startState.field(ti);if(!e.docChanged||0===t.markers.size)return!0;var n=e.startState.doc,r=[];return e.changes.iterChanges(function(e,i,o,a,l){var c=l.length,s=Math.max(n.lineAt(e).from-1,0),u=Math.min(n.lineAt(i).to+1,n.length);t.markers.between(s,u,function(t,s){e<=t&&i>=s||0!==c&&(e===s&&"\n"===l.sliceString(0,1)||i===t&&"\n"===l.sliceString(c-1,c))||o===a&&(i===s+1&&0===n.lineAt(i).length||e===t-1&&0===n.lineAt(e).length)||r.push(t-1,s+1)})}),!(r.length>0)||r}),tl=eP.yy.transactionFilter.of(function(e){var t=e.docChanged?e.state.field(ti):e.startState.field(ti);if(0===t.markers.size)return e;var n=e.newSelection,r=!1,i=!1;do{i=!1;for(var o=0;o<n.ranges.length&&"break"!==function(e){var o=n.ranges[e],a=o.from,l=o.to,c=a,s=l;if(t.markers.between(a,l,function(e,t){var n=(e+t)/2;a>e&&a<t&&(c=a<n?e:t),l>e&&l<t&&(s=l<n?e:t)}),c!==a||s!==l){var u,d=o.anchor<o.head?c:s,f=o.anchor<o.head?s:c,h=o.goalColumn,p=null!==(u=o.bidiLevel)&&void 0!==u?u:void 0,m=eP.jT.range(d,f,h,p);return n=n.replaceRange(m,e),i=!0,r=!0,"break"}}(o);o++);}while(i);return r?[e,{selection:n,sequential:!0}]:e}),tc=n(42516),ts="cm-git-conflict-marker-yours",tu="cm-git-conflict-marker-base",td="cm-git-conflict-marker-middle",tf="cm-git-conflict-marker-theirs",th="cm-git-conflict-marker-hanging",tp="cm-git-conflict-content-yours",tm="cm-git-conflict-content-base",tv="cm-git-conflict-content-theirs";function tg(e){var t=e.background,n=e.color,r=e.noBorder,i={color:n,backgroundColor:t,backgroundClip:"padding-box",paddingTop:es.TV.space4,paddingBottom:es.TV.space4,fontWeight:es.TV.fontWeightBold};return void 0!==r&&r||(i.borderLeft="4px solid rgba(0, 150, 255, 0.1)",i.paddingLeft="2px"),i}function ty(e){return{backgroundColor:e.background,backgroundClip:"padding-box",borderLeft:"4px solid rgba(0, 150, 255, 0.1)",paddingLeft:"2px"}}var tb=ek.tk.theme((d={},(0,tc._)(d,".".concat(ts),tg({background:"rgba(0, 150, 255, 0.1)",color:es.TV.blueStrongest,noBorder:!0})),(0,tc._)(d,".".concat(td),tg({background:"rgba(255, 0, 0, 0.1)",color:es.TV.redStrongest})),(0,tc._)(d,".".concat(tu),tg({background:"rgba(255, 165, 0, 0.1)",color:es.TV.orangeStrongest})),(0,tc._)(d,".".concat(tf),tg({background:"rgba(0, 150, 255, 0.1)",color:es.TV.blueStrongest,noBorder:!0})),(0,tc._)(d,".".concat(th),tg({background:"rgba(100, 150, 255, 0.1)",color:es.TV.blueStrongest,noBorder:!0})),(0,tc._)(d,".".concat(tp),ty({background:"rgba(0, 255, 0, 0.1)"})),(0,tc._)(d,".".concat(tv),ty({background:"rgba(255, 0, 0, 0.1)"})),(0,tc._)(d,".".concat(tm),ty({background:"rgba(255, 165, 0, 0.1)"})),d)),tw={yours:{marker:ek.p.line({class:ts}),content:ek.p.line({class:tp})},base:{marker:ek.p.line({class:tu}),content:ek.p.line({class:tm})},middle:{marker:ek.p.line({class:td})},theirs:{marker:ek.p.line({class:tf}),content:ek.p.line({class:tv})},hanging:{marker:ek.p.line({class:th})}},tZ=function(){"use strict";function e(t){(0,eA._)(this,e),this.builder=new eP.f_,this.doc=t}var t=e.prototype;return t.add=function(e,t){var n=this.doc.lineAt(e.from);if(n.to>=e.to){this.builder.add(n.from,n.from,t);return}for(var r=n.from;r<=e.to;)this.builder.add(r,r,t),r=this.doc.lineAt(r).to+1},t.finish=function(){return this.builder.finish()},e}(),tx=ek.tk.decorations.from(ti,function(e){return function(t){var n=new tZ(t.state.doc),r=!0,i=!1,o=void 0;try{for(var a,l=e.hunks[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;t.viewport.from>c.to||t.viewport.to<c.from||(n.add(c.markers.yours,tw.yours.marker),c.content.yours&&n.add(c.content.yours,tw.yours.content),c.markers.base&&n.add(c.markers.base,tw.base.marker),c.content.base&&n.add(c.content.base,tw.base.content),n.add(c.markers.middle,tw.middle.marker),c.content.theirs&&n.add(c.content.theirs,tw.theirs.content),n.add(c.markers.theirs,tw.theirs.marker))}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n.finish()}}),tC=ek.tk.decorations.from(ti,function(e){return function(){var t=new eP.f_,n=!0,r=!1,i=void 0;try{for(var o,a=e.hanging[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;t.add(l.from,l.from,tw.hanging.marker)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t.finish()}}),t_=[ti,[to,ta,tl],[eP.Wl.lowest(tb),tx,tC]],tS=n(51743),tk=function(){"use strict";function e(t,n,r,i,o,a){(0,eA._)(this,e),this.original=t,this.current=n,this.chunks=r,this.desc=i,this.pending=o,this.ranges=a}var t=e.prototype;return t.hasChanges=function(){return this.ranges.length>0},t.update=function(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,a=this.original,l=this.chunks,c=this.desc,s=this.pending,u=this.ranges;if(Math.abs((this.pending?this.pending.length:this.current.length)-t.length)>=250||i){var d=(0,tS.Gj)(c,s,n).pending;l=(0,tS.U_)(a,t,{chunks:l,changesB:d},o),c=(0,tS.fu)(l,a.length),s=null,u=(0,tS.Hu)(c)}else s=(r=(0,tS.Gj)(c,s,n)).pending,c=r.desc,u=(0,tS.Hu)(c);return s&&t.eq(a)&&(l=[],c=eP.as.empty(a.length),s=null,u=[]),new e(a,t,l,c,s,u)},t.isAccurate=function(){return null===this.pending},t.getLineChangeType=function(e){var t=this.current.line(e);return 0===this.original.length&&this.current.length>0?tS.dQ.COVERED:(0,tS.dx)(t,tS.MF.B,this.ranges)},t.iterRanges=function(){return(0,eS.Jh)(this,function(e){switch(e.label){case 0:return[5,(0,eS.XA)(this.ranges)];case 1:return e.sent(),[2]}})},e.create=function(t,n,r){var i=(0,tS.U_)(t,n,void 0,r),o=(0,tS.fu)(i,t.length),a=(0,tS.Hu)(o);return new e(t,n,i,o,null,a)},e}(),tE=eP.r$.define({combine:function(e){var t;return null!==(t=e.filter(Boolean)[0])&&void 0!==t?t:null}}),tT=eP.QQ.define({create:function(){return null},update:function(e,t){var n=t.state.facet(tE);return!n||Math.max(n.lines,t.newDoc.lines)>5e3||Math.max(n.length,t.newDoc.length)>4e5?null:(e&&e.original.eq(n)?t.docChanged&&(e=e.update(t.newDoc,t.changes,!(t.isUserEvent("input.type")||t.isUserEvent("delete.forward")||t.isUserEvent("delete.backward")))):e=tk.create(n,t.newDoc,{scanLimit:4e4}),e)}}),tR=n(66382),tD=(0,ek.v5)({class:tR.Tr,renderEmptyElements:!0,lineMarker:function(e,t){var n=e.state.field(tT,!1);if(!n||!n.hasChanges())return tR.Do;if(0===n.original.length)return tR.Vt;var r=e.state.doc.lineAt(t.from);switch(n.getLineChangeType(r.number)){case tS.dQ.COVERED:return tR.vP;case tS.dQ.MODIFIED:return tR.wp;default:return tR.Do}},initialSpacer:function(e){return e.state.field(tT,!1)?tR.Vt:tR.Do},updateSpacer:function(e,t){var n=t.state.field(tT,!1)?tR.Vt:tR.Do;return e===n?e:n}}),tI=eP.r$.define({enables:function(e){return[tE.computeN([e],function(t){return t.facet(e)}),tR.Lw,tT,eP.Wl.highest(tD)]}}),tB=n(66873);(o=f||(f={})).GUTTER_DIFF="GUTTER_DIFF",o.INLINE_DIFF="INLINE_DIFF";var tG=eP.Py.define(),tA=eP.Py.define(),tP=eP.QQ.define({create:function(){return{head:null,mode:"GUTTER_DIFF"}},update:function(e,t){var n=e.head,r=e.mode,i=!0,o=!1,a=void 0;try{for(var l,c=t.effects[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.is(tG)?n=s.value:s.is(tA)&&(r=s.value)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return n!==e.head||r!==e.mode?{head:n,mode:r}:e},provide:function(e){return[tI.from(e,function(e){return"GUTTER_DIFF"===e.mode?e.head:null}),tB.p.from(e,function(e){return"INLINE_DIFF"===e.mode?e.head:null})]}}),tL=function(){"use strict";function e(t,n,r){var i=this;(0,eA._)(this,e),this.view=t,this.git=n,this.path=r,this.disposed=!1,this.dispose=n.onRefresh(function(){return i.fetchThenUpdateState()}),this.fetchThenUpdateState()}var t=e.prototype;return t.fetchThenUpdateState=function(){var e=this;return(0,e_._)(function(){var t,n,r,i,o;return(0,eS.Jh)(this,function(a){switch(a.label){case 0:return[4,e.git.getFileContents({path:e.path,revision:"HEAD"})];case 1:if(t=a.sent(),e.disposed||!(n=e.view.state.field(tP,!1)))return[2];return(!(o=null===(i=t.error?null:null!==(r=t.content)&&void 0!==r?r:"")?null:e.view.state.toText(i))!=!n.head||o&&n.head&&!o.eq(n.head))&&e.view.dispatch({effects:tG.of(o)}),[2]}})})()},t.destroy=function(){this.dispose(),this.disposed=!0},e}(),tN=n(59786),tO=new eE.j(function(e,t,n){var r=[t?[tP,ek.lg.define(function(n){return new tL(n,e,t)})]:[]];return n||r.push(t_),r}),tU=n(25497),tM=n(23821),tX=n(22648),tF=n(7351),tW=n(52178),tH=n(48495),tV=n(15323),tz=n(12674),tj=n(24531),tq=n(82230),tJ=n(72164),tY=n(2172),t$="cm-ghostwriter-hint-tooltip",tK=ek.tk.theme((0,tc._)({".cm-ghostwriter-hint":{display:"none",width:"100%",backgroundColor:es.TV.backgroundHigher,borderTop:"solid 1px ".concat(es.TV.outlineDefault)}},".cm-tooltip-autocomplete.".concat(t$," .cm-ghostwriter-hint"),{display:"block"})),tQ=(0,ep.X)({hint:[es.l0.p(4),es.l0.rowWithGap(8),es.l0.align.center,es.l0.font.default,{opacity:.6}],prompt:[es.l0.rowWithGap(4),es.l0.align.center]});function t0(){return(0,E.BX)(ea.G,{css:tQ.hint,children:[(0,E.tZ)(tJ.Z,{width:8,height:8}),(0,E.BX)(ea.G,{css:tQ.prompt,children:[(0,E.tZ)(tY.ZP,{size:"small",dimmed:!1,shortcut:{key:"tab"}}),(0,E.tZ)(tq.xv,{variant:"small",multiline:!1,children:"to use AI suggestion."})]})]})}var t1=ek.lg.define(function(e){var t=function(){var t,n,r;return(0,k._)(e.dom.children).concat((0,k._)(null!==(r=null===(n=tj.yb.get(e))||void 0===n?void 0:null===(t=n.children[0])||void 0===t?void 0:t.children)&&void 0!==r?r:[])).filter(function(e){return e.classList.contains("cm-tooltip-autocomplete")})},n=function(e){return Array.from(e.children).filter(function(e){return e.classList.contains("cm-ghostwriter-hint")})},r=!1;return{update:function(){null!==(0,tF.LR)(e.state)&&Promise.resolve().then(function(){if(!r){var e=!0,i=!1,o=void 0;try{for(var a,l=t()[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var c=a.value,s=n(c);if(0===s.length){var u=(0,tz.V)((0,E.tZ)(t0,{}));u.className="cm-ghostwriter-hint",c.appendChild(u)}}}catch(e){i=!0,o=e}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}}})},destroy:function(){var e=!0,i=!1,o=void 0;try{for(var a,l=t()[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var c=a.value,s=!0,u=!1,d=void 0;try{for(var f,h=n(c)[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value;c.removeChild(p)}}catch(e){u=!0,d=e}finally{try{s||null==h.return||h.return()}finally{if(u)throw d}}}}catch(e){i=!0,o=e}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}r=!0}}}),t2=n(36556),t4=n(60305),t3=n(24605),t8=n(24598),t6=n(7225),t5=n(77865),t7=n(41753),t9=(0,ep.X)({styles0:[{p:{whiteSpace:"pre-wrap"}}]}),ne={p:{padding:"".concat(es.TV.space2," ").concat(es.TV.space8),lineHeight:1.4,marginBottom:"".concat(es.TV.space8," !important")},"p:first-of-type":{marginTop:"".concat(es.TV.space4," !important")},"p:last-of-type":{marginBottom:"".concat(es.TV.space4," !important")},pre:{margin:"".concat(es.TV.space2," ").concat(es.TV.space8)},"pre + p":{borderTop:"1px solid ".concat(es.TV.outlineDimmest),paddingTop:es.TV.space4},"h1, h2, h3":{margin:"".concat(es.TV.space8," !important"),marginTop:"".concat(es.TV.space12," !important"),padding:"0 !important",paddingBottom:"".concat(es.TV.space4," !important"),fontSize:"100% !important",borderBottom:"1px solid ".concat(es.TV.backgroundHighest," !important"),lineHeight:1},"h1:first-of-type, h2:first-of-type, h3:first-of-type":{marginTop:"".concat(es.TV.space4," !important")},hr:{margin:"".concat(es.TV.space8," !important"),borderTop:"2px solid ".concat(es.TV.backgroundHighest," !important")},li:{margin:"".concat(es.TV.space2," ").concat(es.TV.space8)},".lsp-completion-detail":{borderBottom:"1px solid ".concat(es.TV.backgroundHighest),marginBottom:es.TV.space4},".cm-line":{paddingLeft:es.TV.space4,paddingRight:es.TV.space4},".cm-content":{paddingLeft:es.TV.space4,paddingRight:es.TV.space4}},nt=(0,et.memo)(function(e){var t=e.content,n=e.className;return(0,E.tZ)(ea.G,{css:ne,children:(0,E.tZ)(t5.ZP,{className:n,components:{code:function(e){return(0,E.tZ)(t7.Z,(0,C._)({minimal:!0,disableCopy:!0},e))}},children:t})})});function nn(e){var t=e.content,n=e.className;return"string"==typeof t?(0,E.tZ)(nt,{css:t9.styles0,className:n,content:t}):t.kind===t6.MarkupKind.PlainText?(0,E.tZ)(ea.G,{children:(0,E.tZ)(tq.xv,{className:n,children:t.value})}):(0,E.tZ)(nt,{className:n,content:t.value})}var nr=n(98924),ni=n(5172),no=n(4384),na=n(83176),nl=n(25490);(a=h||(h={}))[a.Dollar=0]="Dollar",a[a.Colon=1]="Colon",a[a.Comma=2]="Comma",a[a.CurlyOpen=3]="CurlyOpen",a[a.CurlyClose=4]="CurlyClose",a[a.Backslash=5]="Backslash",a[a.Forwardslash=6]="Forwardslash",a[a.Pipe=7]="Pipe",a[a.Int=8]="Int",a[a.VariableName=9]="VariableName",a[a.Format=10]="Format",a[a.Plus=11]="Plus",a[a.Dash=12]="Dash",a[a.QuestionMark=13]="QuestionMark",a[a.EOF=14]="EOF";var nc=function(){"use strict";function e(){(0,eA._)(this,e),this.value="",this.pos=0}var t=e.prototype;return t.text=function(e){this.value=e,this.pos=0},t.tokenText=function(e){return this.value.substr(e.pos,e.len)},t.next=function(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};var t,n=this.pos,r=0,i=this.value.charCodeAt(n);if("number"==typeof(t=e._table[i]))return this.pos+=1,{type:t,pos:n,len:1};if(e.isDigitCharacter(i)){t=8;do r+=1,i=this.value.charCodeAt(n+r);while(e.isDigitCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}}if(e.isVariableCharacter(i)){t=9;do i=this.value.charCodeAt(n+ ++r);while(e.isVariableCharacter(i)||e.isDigitCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}}t=10;do r+=1,i=this.value.charCodeAt(n+r);while(!isNaN(i)&&void 0===e._table[i]&&!e.isDigitCharacter(i)&&!e.isVariableCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}},e.isDigitCharacter=function(e){return e>=48&&e<=57},e.isVariableCharacter=function(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90},e}();nc._table=(p={},(0,tc._)(p,36,0),(0,tc._)(p,58,1),(0,tc._)(p,44,2),(0,tc._)(p,123,3),(0,tc._)(p,125,4),(0,tc._)(p,92,5),(0,tc._)(p,47,6),(0,tc._)(p,124,7),(0,tc._)(p,43,11),(0,tc._)(p,45,12),(0,tc._)(p,63,13),p);var ns=function(){"use strict";function e(){(0,eA._)(this,e),this._children=[],function(e,t){t.forEach(function(t){Object.defineProperty(e,t,{enumerable:!1,writable:!0})})}(this,["parent"])}var t=e.prototype;return t.appendChild=function(e){return e instanceof nu&&this._children[this._children.length-1]instanceof nu?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this},t.replace=function(e,t){var n=e.parent,r=n.children.indexOf(e),i=n.children.slice(0);i.splice.apply(i,[r,1].concat((0,k._)(t))),n._children=i,function e(t,n){var r=!0,i=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.parent=n,e(c.children,c)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}(t,n)},t.toString=function(){return this.children.reduce(function(e,t){return e+t.toString()},"")},t.len=function(){return 0},t.match=function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=Object.entries(nw)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=(0,S._)(i.value,2),l=a[0],c=a[1];if(this instanceof c&&l in e)return e[l](this)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}},(0,no._)(e,[{key:"children",get:function(){return this._children}},{key:"rightMostDescendant",get:function(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}},{key:"snippet",get:function(){for(var e=this;;){if(!e)return;if(e instanceof ny)return e;e=e.parent}}}]),e}(),nu=function(e){"use strict";(0,e5._)(n,e);var t=(0,e7._)(n);function n(e){var r;return(0,eA._)(this,n),(r=t.call(this)).value=e,r}var r=n.prototype;return r.toString=function(){return this.value},r.toTextmateString=function(){return n.escape(this.value)},r.len=function(){return this.value.length},r.clone=function(){return new n(this.value)},n.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},n}(ns),nd=function(e){"use strict";(0,e5._)(n,e);var t=(0,e7._)(n);function n(){return(0,eA._)(this,n),t.apply(this,arguments)}return n}(ns),nf=function(e){"use strict";(0,e5._)(n,e);var t=(0,e7._)(n);function n(e){var r;return(0,eA._)(this,n),(r=t.call(this)).index=e,r}var r=n.prototype;return r.toTextmateString=function(){var e="";return(this.transform&&(e=this.transform.toTextmateString()),0!==this.children.length||this.transform)?0===this.children.length?"${".concat(this.index).concat(e,"}"):this.choice?"${".concat(this.index,"|").concat(this.choice.toTextmateString(),"|").concat(e,"}"):"${".concat(this.index,":").concat(this.children.map(function(e){return e.toTextmateString()}).join("")).concat(e,"}"):"$".concat(this.index)},r.clone=function(){var e=new n(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(function(e){return e.clone()}),e},n.compareByIndex=function(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0},(0,no._)(n,[{key:"isFinalTabstop",get:function(){return 0===this.index}},{key:"choice",get:function(){return 1===this._children.length&&this._children[0]instanceof nh?this._children[0]:void 0}}]),n}(nd),nh=function(e){"use strict";(0,e5._)(n,e);var t=(0,e7._)(n);function n(){var e;return(0,eA._)(this,n),e=t.apply(this,arguments),e.options=[],e}var r=n.prototype;return r.appendChild=function(e){return e instanceof nu&&(e.parent=this,this.options.push(e)),this},r.toString=function(){return this.options[0].value},r.toTextmateString=function(){return this.options.map(function(e){return e.value.replace(/\||,|\\/g,"\\$&")}).join(",")},r.len=function(){return this.options[0].len()},r.clone=function(){var e=new n;return this.options.forEach(e.appendChild,e),e},n}(ns),np=function(e){"use strict";(0,e5._)(n,e);var t=(0,e7._)(n);function n(){var e;return(0,eA._)(this,n),e=t.apply(this,arguments),e.regexp=RegExp(""),e}var r=n.prototype;return r.resolve=function(e){var t=this,n=!1,r=e.replace(this.regexp,function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=!0,t._replace(r.slice(0,-2))});return!n&&this._children.some(function(e){return e instanceof nm&&!!e.elseValue})&&(r=this._replace([])),r},r._replace=function(e){var t="",n=!0,r=!1,i=void 0;try{for(var o,a=this._children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l instanceof nm){var c=e[l.index]||"";c=l.resolve(c),t+=c}else t+=l.toString()}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t},r.toString=function(){return""},r.toTextmateString=function(){return"/".concat(this.regexp.source,"/").concat(this.children.map(function(e){return e.toTextmateString()}),"/").concat((this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":""))},r.clone=function(){var e=new n;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(function(e){return e.clone()}),e},n}(ns),nm=function(e){"use strict";(0,e5._)(n,e);var t=(0,e7._)(n);function n(e,r,i,o){var a;return(0,eA._)(this,n),(a=t.call(this)).index=e,a.shorthandName=r,a.ifValue=i,a.elseValue=o,a}var r=n.prototype;return r.resolve=function(e){if("upcase"===this.shorthandName)return e?e.toLocaleUpperCase():"";if("downcase"===this.shorthandName)return e?e.toLocaleLowerCase():"";if("capitalize"===this.shorthandName)return e?e[0].toLocaleUpperCase()+e.substr(1):"";if("pascalcase"===this.shorthandName)return e?this._toPascalCase(e):"";if("camelcase"===this.shorthandName)return e?this._toCamelCase(e):"";if(e&&"string"==typeof this.ifValue)return this.ifValue;if(!e&&"string"==typeof this.elseValue)return this.elseValue;else return e||""},r._toPascalCase=function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map(function(e){return e.charAt(0).toUpperCase()+e.substr(1)}).join(""):e},r._toCamelCase=function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map(function(e,t){return 0===t?e.charAt(0).toLowerCase()+e.substr(1):e.charAt(0).toUpperCase()+e.substr(1)}).join(""):e},r.toTextmateString=function(){var e="${";return e+=this.index,this.shorthandName?e+=":/".concat(this.shorthandName):this.ifValue&&this.elseValue?e+=":?".concat(this.ifValue,":").concat(this.elseValue):this.ifValue?e+=":+".concat(this.ifValue):this.elseValue&&(e+=":-".concat(this.elseValue)),e+="}"},r.clone=function(){return new n(this.index,this.shorthandName,this.ifValue,this.elseValue)},n}(ns),nv=function(e){"use strict";(0,e5._)(n,e);var t=(0,e7._)(n);function n(e){var r;return(0,eA._)(this,n),(r=t.call(this)).name=e,r}var r=n.prototype;return r.resolve=function(e){var t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),void 0!==t&&(this._children=[new nu(t)],!0)},r.toTextmateString=function(){var e="";return(this.transform&&(e=this.transform.toTextmateString()),0===this.children.length)?"${".concat(this.name).concat(e,"}"):"${".concat(this.name,":").concat(this.children.map(function(e){return e.toTextmateString()}).join("")).concat(e,"}")},r.clone=function(){var e=new n(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(function(e){return e.clone()}),e},n}(nd);function ng(e,t){for(var n=(0,k._)(e);n.length>0;){var r=n.shift();if(!t(r))break;n.unshift.apply(n,(0,k._)(r.children))}}var ny=function(e){"use strict";(0,e5._)(n,e);var t=(0,e7._)(n);function n(){return(0,eA._)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.offset=function(e){var t=0,n=!1;return(this.walk(function(r){return r===e?(n=!0,!1):(t+=r.len(),!0)}),n)?t:-1},r.fullLen=function(e){var t=0;return ng([e],function(e){return t+=e.len(),!0}),t},r.enclosingPlaceholders=function(e){for(var t=[],n=e.parent;n;)n instanceof nf&&t.push(n),n=n.parent;return t},r.resolveVariables=function(e){var t=this;return this.walk(function(n){return n instanceof nv&&n.resolve(e)&&delete t._placeholders,!0}),this},r.appendChild=function(e){return delete this._placeholders,(0,na._)((0,nl._)(n.prototype),"appendChild",this).call(this,e)},r.replace=function(e,t){return delete this._placeholders,(0,na._)((0,nl._)(n.prototype),"replace",this).call(this,e,t)},r.toTextmateString=function(){return this.children.reduce(function(e,t){return e+t.toTextmateString()},"")},r.clone=function(){var e=new n;return this._children=this.children.map(function(e){return e.clone()}),e},r.walk=function(e){ng(this.children,e)},(0,no._)(n,[{key:"placeholderInfo",get:function(){if(!this._placeholders){var e,t=[];this.walk(function(n){return n instanceof nf&&(t.push(n),e=!e||e.index<n.index?n:e),!0}),this._placeholders={all:t,last:e}}return this._placeholders}},{key:"placeholders",get:function(){return this.placeholderInfo.all}}]),n}(ns),nb=function(){"use strict";function e(){(0,eA._)(this,e),this._scanner=new nc,this._token={type:14,pos:0,len:0}}var t=e.prototype;return t.text=function(e){return this.parse(e).toString()},t.parse=function(e,t,n){var r=new ny;return this.parseFragment(e,r),this.ensureFinalTabstop(r,null!=n&&n,null!=t&&t),r},t.parseFragment=function(e,t){var n=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););var r=new Map,i=[];t.walk(function(e){return e instanceof nf&&(e.isFinalTabstop?r.set(0,void 0):!r.has(e.index)&&e.children.length>0?r.set(e.index,e.children):i.push(e)),!0});var o=function(e,n){var i=r.get(e.index);if(i){var a=new nf(e.index);a.transform=e.transform;var l=!0,c=!1,s=void 0;try{for(var u,d=i[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value.clone();a.appendChild(f),f instanceof nf&&r.has(f.index)&&!n.has(f.index)&&(n.add(f.index),o(f,n),n.delete(f.index))}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}t.replace(e,[a])}},a=new Set,l=!0,c=!1,s=void 0;try{for(var u,d=i[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value;o(f,a)}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}return t.children.slice(n)},t.ensureFinalTabstop=function(e,t,n){(t||n&&e.placeholders.length>0)&&!e.placeholders.find(function(e){return 0===e.index})&&e.appendChild(new nf(0))},t._accept=function(e,t){if(void 0===e||this._token.type===e){var n=!t||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),n}return!1},t._backTo=function(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1},t._until=function(e){for(var t=this._token;this._token.type!==e;){if(14===this._token.type)return!1;if(5===this._token.type){var n=this._scanner.next();if(0!==n.type&&4!==n.type&&5!==n.type)return!1}this._token=this._scanner.next()}var r=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),r},t._parse=function(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)},t._parseEscaped=function(e){var t;return!!(t=this._accept(5,!0))&&(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new nu(t)),!0)},t._parseTabstopOrVariableName=function(e){var t,n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new nf(Number(t)):new nv(t)),!0):this._backTo(n)},t._parseComplexPlaceholder=function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);var r=new nf(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new nu("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else if(r.index>0&&this._accept(7))for(var i=new nh;;){if(this._parseChoiceElement(i)){if(this._accept(2))continue;if(this._accept(7)&&(r.appendChild(i),this._accept(4)))return e.appendChild(r),!0}return this._backTo(n),!1}else if(this._accept(6))return this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1);else if(this._accept(4))return e.appendChild(r),!0;else return this._backTo(n)},t._parseChoiceElement=function(e){for(var t=this._token,n=[];2!==this._token.type&&7!==this._token.type;){var r=void 0;if(!(r=(r=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||r:this._accept(void 0,!0)))return this._backTo(t),!1;n.push(r)}return 0===n.length?(this._backTo(t),!1):(e.appendChild(new nu(n.join(""))),!0)},t._parseComplexVariable=function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);var r=new nv(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new nu("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else if(this._accept(6))return this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1);else if(this._accept(4))return e.appendChild(r),!0;else return this._backTo(n)},t._parseTransform=function(e){for(var t=new np,n="",r="";!this._accept(6);){var i=void 0;if(i=this._accept(5,!0)){n+=i=this._accept(6,!0)||i;continue}if(14!==this._token.type){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){var o=void 0;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,t.appendChild(new nu(o));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(14!==this._token.type){r+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(n,r)}catch(e){return!1}return e.transform=t,!0},t._parseFormatString=function(e){var t=this._token;if(!this._accept(0))return!1;var n=!1;this._accept(3)&&(n=!0);var r=this._accept(8,!0);if(!r)return this._backTo(t),!1;if(!n||this._accept(4))return e.appendChild(new nm(Number(r))),!0;if(!this._accept(1))return this._backTo(t),!1;if(this._accept(6)){var i=this._accept(9,!0);return i&&this._accept(4)?(e.appendChild(new nm(Number(r),i)),!0):(this._backTo(t),!1)}if(this._accept(11)){var o=this._until(4);if(o)return e.appendChild(new nm(Number(r),void 0,o,void 0)),!0}else if(this._accept(12)){var a=this._until(4);if(a)return e.appendChild(new nm(Number(r),void 0,void 0,a)),!0}else if(this._accept(13)){var l=this._until(1);if(l){var c=this._until(4);if(c)return e.appendChild(new nm(Number(r),void 0,l,c)),!0}}else{var s=this._until(4);if(s)return e.appendChild(new nm(Number(r),void 0,void 0,s)),!0}return this._backTo(t),!1},t._parseAnything=function(e){return 14!==this._token.type&&(e.appendChild(new nu(this._scanner.tokenText(this._token))),this._accept(void 0),!0)},e.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},e.asInsertText=function(t){return new e().parse(t).toString()},e.guessNeedsClipboard=function(e){return/\${?CLIPBOARD/.test(e)},e}(),nw={Text:nu,Placeholder:nf,Variable:nv,FormatString:nm,Choice:nh},nZ=function(){"use strict";function e(t){(0,eA._)(this,e),this.lines=t.split(/\r\n?|\n/).map(function(e){return new nb().parse(e).children})}return e.prototype.apply=function(t){var n=t.view,r=t.from,i=t.to,o=e.instantiate(this.lines,t),a=o.text,l=o.ranges,c={from:r,to:i,insert:eP.xv.of(a)},s={changes:c,scrollIntoView:!0,annotations:tF.Jv.of(t.completion)};if(l.length&&(s.selection=nT(l,0)),l.length>1){var u=new n_(l,0),d=s.effects=[nS.of(u)];void 0===n.state.field(nE,!1)&&d.push(eP.Py.appendConfig.of([nE,nD,nI]))}if(r===i&&!l.length){var f=eP.as.of(c,n.state.doc.length),h=n.state.selection.ranges.map(function(e){return e.map(f,0)});s.selection=eP.jT.create(h,n.state.selection.mainIndex)}return s},e.resolveVariable=function(e,t){var n=t.view,r=t.from,i=t.path;switch(e){case"TM_FILENAME":return(0,ni.basename)(i);case"TM_FILENAME_BASE":return(0,ni.basename)(i,(0,ni.extname)(i));case"TM_DIRECTORY":return(0,ni.dirname)(i);case"TM_FILEPATH":return i;case"TM_LINE_INDEX":return(n.state.doc.lineAt(r).number-1).toString();case"TM_LINE_NUMBER":return n.state.doc.lineAt(r).number.toString();default:return e}},e.instantiate=function(t,n){var r=n.view,i=n.from,o=r.state,a=[],l=[],c=o.doc.lineAt(i),s=/^\s*/.exec(c.text)[0],u=o.facet(T.c),d=!0,f=!1,h=void 0;try{for(var p,m,v=t[Symbol.iterator]();!(d=(m=v.next()).done);d=!0)!function(){var t=m.value,r=0,o="",c=function(e){var t=0,n=r;if(0===r&&(t=/^\t*/.exec(e)[0].length)){var i=s+u.repeat(t);e=i+e.slice(t),n+=i.length}return o+=e,r+=e.length,{line:a.length,from:n,to:r}},d=function(t){var o=!0,s=!1,u=void 0;try{for(var f,h=t[Symbol.iterator]();!(o=(f=h.next()).done);o=!0)f.value.match({Text:function(e){c(e.value)},Variable:function(t){var r=t.name,i=t.transform,o=e.resolveVariable(r,n);i&&(o=o.replace(i.regexp,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.children.map(function(e){return e.match({Text:function(e){return e.value},FormatString:function(e){return e.resolve(t[e.index])}})}).filter(Boolean).join("")})),c(o)},Choice:function(e){c(e.options[0].value)},Placeholder:function(e){var t,n=a.length?i+a.map(function(e){return e.length}).reduce(function(e,t){return e+t}):i;if(null===(t=e.children)||void 0===t?void 0:t.length){var o={field:e.index,from:n+r,to:null};l.push(o),d(e.children),o.to=n+r}else{c("");var s=n+r;l.push({field:e.index,from:s,to:s})}}})}catch(e){s=!0,u=e}finally{try{o||null==h.return||h.return()}finally{if(s)throw u}}};d(t),a.push(o)}()}catch(e){f=!0,h=e}finally{try{d||null==v.return||v.return()}finally{if(f)throw h}}var g=(p=Math).max.apply(p,(0,k._)(l.map(function(e){return e.field})));return{text:a,ranges:l.map(function(e){var t=e.field,n=(0,nr._)(e,["field"]);return(0,_._)((0,C._)({},n),{field:0===t?g:t-1})})}},e}(),nx=ek.p.widget({widget:new(function(e){"use strict";(0,e5._)(n,e);var t=(0,e7._)(n);function n(){return(0,eA._)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.toDOM=function(){var e=document.createElement("span");return e.className="cm-snippetFieldPosition",e},r.ignoreEvent=function(){return!1},n}(ek.l9))}),nC=ek.p.mark({class:"cm-snippetField"}),n_=function(){"use strict";function e(t,n){(0,eA._)(this,e),this.ranges=t,this.active=n,this.deco=ek.p.set(t.map(function(e){return(e.from===e.to?nx:nC).range(e.from,e.to)}))}var t=e.prototype;return t.map=function(t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=this.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value,s=function(e,t){var n=t.mapPos(e.from,-1,eP.gc.TrackDel),r=t.mapPos(e.to,1,eP.gc.TrackDel);return null==n||null==r?null:{field:e.field,from:n,to:r}}(c,t);if(!s)return null;n.push(s)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return new e(n,this.active)},t.isSelectionInsideField=function(e){var t=this;return e.ranges.every(function(e){return t.ranges.some(function(n){return n.field===t.active&&n.from<=e.from&&n.to>=e.to})})},e}(),nS=eP.Py.define({map:function(e,t){return null==e?void 0:e.map(t)}}),nk=eP.Py.define(),nE=eP.QQ.define({create:function(){return null},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(nS))return l.value;if(l.is(nk)&&e)return new n_(e.ranges,l.value)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.isSelectionInsideField(t.selection)&&(e=null),e},provide:function(e){return ek.tk.decorations.from(e,function(e){return e?e.deco:ek.p.none})}});function nT(e,t){var n=e.filter(function(e){return e.field===t}).map(function(e){return eP.jT.range(e.from,e.to)});if(0!==n.length)return eP.jT.create(n)}function nR(e){return function(t){var n,r=t.state,i=t.dispatch,o=r.field(nE,!1);if(!o||e<0&&0===o.active)return!1;var a=o.active+e,l=(n=Math).max.apply(n,(0,k._)(o.ranges.map(function(e){return e.field}))),c=e>0&&o.active>=l;return i(r.update({selection:nT(o.ranges,a),effects:nS.of(c?null:new n_(o.ranges,a))})),!0}}var nD=eP.Wl.highest(ek.$f.of([{key:"Tab",run:nR(1),shift:nR(-1)},{key:"Escape",run:function(e){var t=e.state,n=e.dispatch;return!!t.field(nE,!1)&&(n(t.update({effects:nS.of(null)})),!0)}}])),nI=ek.tk.domEventHandlers({mousedown:function(e,t){var n,r=t.state.field(nE,!1);if(!r||null==(n=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;var i=r.ranges.find(function(e){return e.from<=n&&e.to>=n});return!!i&&i.field!==r.active&&(t.dispatch({selection:nT(r.ranges,i.field),effects:nS.of(r.ranges.some(function(e){return e.field>i.field})?new n_(r.ranges,i.field):null)}),!0)}}),nB=eP.r$.define({combine:function(e){return e.some(Boolean)}}),nG=new WeakMap;function nA(e){var t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),"[".concat(n?"\\w":"").concat(t.replace(".","").replace(/[^\w\s]/g,"\\$&"),"]")}var nP="lsp-completion-keyboard-shortcuts",nL=ek.tk.theme((m={"& .cm-tooltip-autocomplete":{"& > *":{marginRight:4},"& > *:last-child":{marginRight:0},"& .cm-completionLabel":{flexGrow:1,flexShrink:1,overflowX:"auto",textOverflow:"ellipsis"},"& .cm-completionDetail":{color:t3.TV.foregroundDimmer,fontSize:"85%",marginLeft:"unset"}}},(0,tc._)(m,"& .".concat(nP),{display:"none"}),(0,tc._)(m,'& [aria-selected="true"] .'.concat(nP),{float:"right",display:"inline-block"}),m)),nN=n(47745);function nO(e){var t=e.content,n=e.className,r=e.showHoveredVariable,i=(0,N.Gn)("fontSize").preferences;if("string"!=typeof t&&"kind"in t)return(0,E.tZ)(nn,{content:t});var o=(Array.isArray(t)?t:[t]).map(function(e){return"string"==typeof e?e:"```"+e.language+"\n"+e.value+"\n```"}).join("\n");return(0,E.tZ)(t5.ZP,{css:[{p:{fontSize:i.fontSize}},r?[es.l0.maxHeight(nU),es.l0.overflowY("auto")]:void 0],className:n,components:{code:function(e){return(0,E.tZ)(t7.Z,(0,C._)({minimal:!0,disableCopy:!0},e))}},children:o})}var nU=100;function nM(e){var t=e.className,n=e.content,r=e.textHovered,i=(0,tN.P5)({controlName:"flag-debugger-hover-variable",logFlagToAnalytics:!1}),o=(0,eD.Z)().debuggest,a=(0,eT.Z)(o.mainClient),l=a&&("running"===a.state.current||"paused"===a.state.current),c=(0,S._)((0,et.useState)(!1),2),s=c[0],u=c[1],d=(0,S._)((0,et.useState)(void 0),2),f=d[0],h=d[1],p=i&&l&&f;return(0,et.useEffect)(function(){function e(){return(e=(0,e_._)(function(){var e,t;return(0,eS.Jh)(this,function(n){switch(n.label){case 0:if(!(i&&l))return[3,4];u(!0),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,a.evaluate({expression:r,context:"hover"})];case 2:return(null===(e=(t=n.sent()).body)||void 0===e?void 0:e.result)&&h((0,C._)({name:r,value:t.body.result},t.body)),[3,4];case 3:return u(!1),[7];case 4:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[i,a,l,r]),(0,E.BX)(ea.G,{css:[ne,p?es.l0.maxHeight(nU+190):es.l0.maxHeight(190),es.l0.minHeight(30),es.l0.overflowY("auto"),es.l0.borderRadius(4),es.l0.backgroundColor.backgroundHigher],children:[s?void 0:(0,E.tZ)(nO,{content:n,className:t,showHoveredVariable:!!p}),p?(0,E.tZ)(ea.G,{css:[es.l0.maxHeight(190),es.l0.overflowY("auto")],children:(0,E.tZ)(nN._,{depth:0,client:a,variable:f})}):void 0]})}var nX=n(36101),nF=n(23508),nW=n(92370),nH=n(34780),nV=n(86486),nz=n(82587),nj=n(38e3),nq=n(32622),nJ=new(function(e){"use strict";(0,e5._)(n,e);var t=(0,e7._)(n);function n(){var e;return(0,eA._)(this,n),(e=t.call(this)).elementClass="cm-gutterElement-hidden",e}return n.prototype.toDOM=function(){var e=document.createElement("span");e.classList.add("cm-hidden-lines-gutter");var t=document.createElement("span");return t.classList.add("cm-dot"),e.appendChild(t),e},n}(ek.SJ)),nY=function(e){"use strict";(0,e5._)(n,e);var t=(0,e7._)(n);function n(e){var r;return(0,eA._)(this,n),(r=t.call(this)).numLines=e,r}var r=n.prototype;return r.eq=function(e){return e.numLines===this.numLines},r.toDOM=function(){var e=document.createElement("span");return e.textContent="".concat(this.numLines," hidden ").concat((0,nq.Z)("line",this.numLines)),e.className="cm-hidden-lines",e},n}(ek.l9),n$=ek.p.mark({class:"cm-searchResultMatch"}),nK=ek.tk.baseTheme({".cm-hidden-lines":{color:"var(--foreground-dimmer)",backgroundColor:"var(--background-highest)",display:"inline-block",width:"100%"},".cm-gutterElement-hidden":{backgroundColor:"var(--background-highest)"},".cm-hidden-lines-gutter":{backgroundColor:"var(--background-highest)",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},".cm-dot":{height:"5px",width:"5px",backgroundColor:"var(--foreground-dimmest)",borderRadius:"50%",display:"inline-block"},".cm-tooltip .cm-scroller":{border:"2px solid var(--background-highest)",borderRadius:"var(--border-radius-4)"},".cm-tooltip .cm-scroller:hover":{border:"2px solid var(--accent-primary-dimmest)",boxShadow:"var(--shadow-1)",cursor:"pointer"},".cm-searchResultMatch":{color:es.TV.foregroundDefault,backgroundColor:es.TV.accentPrimaryDimmest,outline:es.TV.accentPrimaryDimmer+" solid 1px"},".cm-searchResultMatch span":{color:es.TV.foregroundDefault},".cm-tooltip .cm-searchResultMatch:hover":{opacity:.8},".cm-tooltip .cm-gutterElement":{display:"flex",marginTop:0,textAlign:"center",alignItems:"center",justifyContent:"center",lineHeight:"21px"},".cm-tooltip .cm-line":{padding:0},".cm-tooltip .cm-gutters":{padding:0},".cm-tooltip .cm-content":{paddingTop:0},".cm-tooltip .cm-lineWrapping":{whiteSpace:"pre"},".cm-tooltip .cm-cursor":{display:"none"},".cm-tooltip .cm-selectionBackground":{display:"none"}}),nQ=n(19653),n0=n(85763),n1=n(43449),n2=n(64318),n4=n(29318),n3=n(30124),n8=(0,ep.X)({snippetGroupText:[es.l0.pl(8),es.l0.py(8)],snippetGroupContainer:[es.l0.p(4)],loadingContainer:[es.l0.width(128),es.l0.height(128),es.l0.display.flex,es.l0.align.center,es.l0.justify.center],container:[es.l0.minWidth("375px"),es.l0.maxWidth("500px"),es.l0.pt(4),es.l0.overflowY("scroll")],firstReferenceDivider:[es.l0.border({direction:"bottom",color:es.TV.backgroundHighest})],headerGroup:[es.l0.p(4)],headerContainer:[es.l0.flex.row,es.l0.justify.spaceBetween,es.l0.align.center,es.l0.pr(4)],header:[es.l0.p(4),es.l0.pl(8)],referencesGroups:[es.l0.p(4)],referencesHeader:[es.l0.p(4),es.l0.pl(8)]});function n6(e){var t=e.matchesMap,n=e.fileToContents,r=e.type,i=e.onClose,o=e.jumpToPosition,a=Object.keys(t);return 0===a.length?(0,E.tZ)(tq.xv,{color:"dimmer",css:n8.snippetGroupText,multiline:!1,children:"REFERENCES"===r?"No references found":"No definitions found"}):(0,E.tZ)(ea.G,{children:a.map(function(e){var r,l,c=t[e],s=n[e],u=(l=(r=c.sort(function(e,t){return e.from-t.from})).map(function(e){var t=e.from,n=e.to;return n$.range(t,n)}),[ek.lg.define(function(){return{}},{decorations:function(){return ek.p.set(l)}}),function(e,t){var n=[],r=1;e.forEach(function(i,o){var a=t.lineAt(i.from),l=t.lineAt(i.to);r<a.number-2&&n.push({startLine:r,endLine:a.number-2}),r=l.number+2,o===e.length-1&&r<t.lines&&n.push({startLine:r,endLine:t.lines})});var i=n.map(function(e){var n=t.line(e.startLine),r=t.line(e.endLine);return ek.p.replace({widget:new nY(e.endLine-e.startLine+1)}).range(n.from,r.to)}),o=n.map(function(e){var n=t.line(e.startLine);return ek.p.line({class:"cm-line-hidden"}).range(n.from)}),a=eP.QQ.define({create:function(){return ek.p.set(i)},update:function(e){return e},provide:function(e){return ek.tk.decorations.from(e)}}),l=eP.QQ.define({create:function(){return ek.p.set(o)},update:function(e){return e},provide:function(e){return ek.tk.decorations.from(e)}}),c=n.map(function(e){var n=t.line(e.startLine);return nJ.range(n.from)});return[a,l,nK,ek.p2.of(eP.Xs.of(c))]}(r,s)]);return(0,E.tZ)(ea.G,{css:n8.snippetGroupContainer,children:(0,E.tZ)(n9,{path:e,extensions:[u],doc:s,numMatches:c.length,initiallyExpanded:1===a.length,onNavigateToCode:function(t){if(null!==t)o({path:e,line:t.line+1,col:t.character});else{var n=(0,S._)(c,1)[0],r=s.lineAt(n.from),a=n.from-r.from;o({path:e,line:r.number,col:a})}i()}})},e)})})}function n5(e){var t=e.files,n=e.onClose,r=e.references,i=e.definitions,o=e.currentFile,a=e.currentFileContents,l=e.jumpToPosition,c=(0,eD.Z)().fs,s=(0,e0.Z)(o)[0],u=(0,nQ.Z)(n,[]),d=(0,S._)((0,et.useState)((0,tc._)({},o,eP.xv.of(a.split("\n")))),2),f=d[0],h=d[1];(0,et.useEffect)(function(){if(t.length){var e=!1;return!function(){n.apply(this,arguments)}(),function(){e=!0}}function n(){return(n=(0,e_._)(function(){var n;return(0,eS.Jh)(this,function(r){switch(r.label){case 0:var i;return n={},[4,Promise.all(t.map((i=(0,e_._)(function(e){var t;return(0,eS.Jh)(this,function(r){switch(r.label){case 0:return[4,c.readFile(e)];case 1:if((t=r.sent()).error)throw Error("Something went wrong reading file with path ".concat(e,". Received error: ").concat(t.error));return n[e]=eP.xv.of(t.content.toString().split("\n")),[2]}})}),function(e){return i.apply(this,arguments)})))];case 1:if(r.sent(),e)return[2];return h(function(e){return(0,C._)({},e,n)}),[2]}})})).apply(this,arguments)}},[c,t]);var p=(0,k._)(r).concat((0,k._)(i));if(!s||p.some(function(e){return!(s.documentUriToPath(e.uri) in f)}))return(0,E.tZ)(ea.G,{css:n8.loadingContainer,children:(0,E.tZ)(n4.Z,{size:32})});var m={},v={};function g(e,t){if(!s)throw Error("Expected LSP Client");var n=s.documentUriToPath(e.uri),r=e.range,i=r.start,o=r.end;n in t||(t[n]=[]);var a=f[n],l=a.line(i.line+1),c=a.line(o.line+1);t[n].push({from:l.from+i.character,to:c.from+o.character})}return r.forEach(function(e){g(e,m)}),i.forEach(function(e){g(e,v)}),(0,E.BX)(ea.G,{innerRef:u,css:n8.container,children:[(0,E.tZ)(ea.G,{css:n8.firstReferenceDivider,children:(0,E.BX)(ea.G,{css:n8.headerGroup,children:[(0,E.BX)(ea.G,{css:n8.headerContainer,children:[(0,E.tZ)(tq.h4,{level:2,variant:"subheadDefault",css:n8.header,children:"Definitions"}),(0,E.tZ)(n3.Z,{filled:!1,border:!1,onClick:n,children:(0,E.tZ)(n2.Z,{})})]}),(0,E.tZ)(n6,{matchesMap:v,fileToContents:f,type:"DEFINITION",onClose:n,currentFile:o,jumpToPosition:l})]})}),(0,E.tZ)(ea.G,{children:(0,E.BX)(ea.G,{css:n8.referencesGroups,children:[(0,E.tZ)(tq.h4,{level:2,variant:"subheadDefault",css:n8.referencesHeader,children:"References"}),(0,E.tZ)(n6,{matchesMap:m,fileToContents:f,type:"REFERENCES",onClose:n,currentFile:o,jumpToPosition:l})]})})]})}(l=v||(v={})).DEFINITION="DEFINITION",l.REFERENCES="REFERENCES";var n7=(0,ep.X)({container:[es.l0.width("100%"),es.l0.p(4),es.l0.rowWithGap(4),es.l0.justify.spaceBetween,es.l0.align.center],left:[es.l0.flex.grow(1),es.l0.rowWithGap(8),es.l0.align.center],editor:[es.l0.p(4)],text:[es.l0.flex.shrink(1),{textOverflow:"ellipsis"}]});function n9(e){var t=e.path,n=e.doc,r=e.extensions,i=e.numMatches,o=e.onNavigateToCode,a=e.initiallyExpanded,l=(0,S._)((0,et.useState)(a),2),c=l[0],s=l[1];return(0,E.BX)(ea.G,{children:[(0,E.BX)(ea.G,{css:n7.container,children:[(0,E.BX)(ea.G,{css:n7.left,children:[(0,E.tZ)(M.Z,{path:t}),(0,E.tZ)(tq.xv,{multiline:!1,title:t,css:n7.text,children:t}),(0,E.tZ)(tq.xv,{color:"dimmest",multiline:!1,children:(0,nq.Z)("match",i,!0)})]}),(0,E.tZ)(n0.hU,{alt:c?"Collapse snippet":"Expand snippet",tooltipBehavior:"hidden",onClick:function(){return s(function(e){return!e})},children:(0,E.tZ)(n1.Z,{rotate:c?180:0,style:{transition:"200ms ease"}})})]}),(0,E.tZ)(ea.G,{css:n7.editor,style:{display:c?"block":"none"},children:(0,E.tZ)(nj.F,{path:t,initialDoc:n,extensions:void 0===r?[]:r,maxHeight:"max-content",allowScroll:!0,hideGutter:!0,onNavigateToCode:o})})]})}var re=n(30341),rt=n(42433),rn=n(32472),rr=(0,n(4495).B)(),ri=eP.Py.define(),ro=eP.QQ.define({create:function(){return null},update:function(e,t){if(t.isUserEvent("select")||t.isUserEvent("undo")||t.isUserEvent("redo"))return null;if(!t.isUserEvent("input.type")||t.changes.empty)return e;var n="";return t.changes.iterChanges(function(e,t,r,i,o){n=o.sliceString(0,1)}),n||null}}),ra=new tz.J(function(e){var t,n,r=e.help,i=e.index,o="1px solid ".concat(es.TV.outlineDimmer),a="min(425px, 80vw)",l=r.signatures[i],c=r.signatures.length>1;if(!l)return null;var s=l.documentation,u=null!=r.activeParameter&&(null===(n=l.parameters)||void 0===n?void 0:null===(t=n[r.activeParameter])||void 0===t?void 0:t.documentation);return(0,E.BX)(ea.G,{css:[es.l0.flex.row,es.l0.backgroundColor.backgroundHigher,{width:"max-content"}],children:[c?(0,E.tZ)(ea.G,{css:[es.l0.flex.row,es.l0.pl(4),{borderRight:o,paddingBottom:5}],children:(0,E.BX)("span",{css:[{alignSelf:"flex-end"},es.l0.p(4)],children:[i+1,"/",r.signatures.length]})}):null,(0,E.BX)(ea.G,{children:[(0,E.tZ)(ea.G,{css:[es.l0.py(4),es.l0.pl(c?4:8),es.l0.pr(8),es.l0.maxHeight(100),es.l0.overflowY("scroll"),es.l0.font.code,{lineHeight:es.TV.lineHeightSmall,maxWidth:a}],children:(0,E.tZ)(rl,{signature:l,activeParameter:r.activeParameter})}),!!(s||u)&&(0,E.BX)(ea.G,{css:[es.l0.px(c?4:8),es.l0.py(2),es.l0.maxHeight(200),es.l0.overflow("scroll"),{borderTop:o,maxWidth:a}],children:[u?(0,E.tZ)(nn,{content:u}):null,s?(0,E.tZ)(nn,{content:s}):null]})]})]})});function rl(e){var t,n=e.signature,r=n.label,i=n.parameters,o=e.activeParameter;if(null==o||!i)return(0,E.tZ)("span",{children:r});var a=null===(t=i[o])||void 0===t?void 0:t.label;if(!a)return(0,E.tZ)("span",{children:r});var l=(0,S._)("string"==typeof a?[r.indexOf(a),r.indexOf(a)+a.length]:a,2),c=l[0],s=l[1];return(0,E.BX)("div",{children:[(0,E.tZ)("span",{children:r.slice(0,c)}),(0,E.tZ)("strong",{children:a}),(0,E.tZ)("span",{children:r.slice(s)})]})}function rc(){return(rc=(0,e_._)(function(e,t,n,r,i){return(0,eS.Jh)(this,function(o){switch(o.label){case 0:var a;return[4,Promise.all(n.map((a=(0,e_._)(function(n){var o,a;return(0,eS.Jh)(this,function(l){return(o=i.current.get(n.clientId))&&n.notify.cancelRequest(o),a=n.generateId(),i.current.set(n.clientId,a),[2,n.request.signatureHelp(r,(0,eY.sg)(e.doc,t),{id:a}).then(function(e){return(i.current.get(n.clientId)===a&&i.current.set(n.clientId,null),"error"in e)?null:e.result})]})}),function(e){return a.apply(this,arguments)})))];case 1:return[2,o.sent().find(function(e){return null!==e&&e.signatures.length})]}})})).apply(this,arguments)}var rs=n(47703),ru=n(92674),rd=n.n(ru),rf=new Map,rh=n(32661),rp=n(22488),rm=n(19127),rv=n(8252),rg=n(41691),ry=n(22712),rb={namespace:rg.pJ.namespace,type:rg.pJ.typeName,class:rg.pJ.className,enum:rg.pJ.typeName,interface:rg.pJ.typeName,struct:rg.pJ.typeName,typeParameter:rg.pJ.typeName,parameter:rg.pJ.variableName,variable:rg.pJ.variableName,property:rg.pJ.propertyName,enumMember:rg.pJ.propertyName,event:rg.pJ.typeName,function:rg.pJ.function(rg.pJ.variableName),method:rg.pJ.function(rg.pJ.propertyName),macro:rg.pJ.macroName,keyword:rg.pJ.keyword,modifier:rg.pJ.modifier,comment:rg.pJ.comment,string:rg.pJ.string,number:rg.pJ.number,regexp:rg.pJ.regexp,operator:rg.pJ.operator,decorator:rg.pJ.function(rg.pJ.annotation),angle:null,arithmetic:rg.pJ.arithmeticOperator,attribute:rg.pJ.attributeName,attributeBracket:rg.pJ.bracket,bitwise:rg.pJ.bitwiseOperator,boolean:rg.pJ.bool,brace:rg.pJ.brace,bracket:rg.pJ.bracket,builtinAttribute:rg.pJ.standard(rg.pJ.attributeName),builtinType:rg.pJ.standard(rg.pJ.typeName),character:rg.pJ.character,colon:rg.pJ.punctuation,comma:rg.pJ.separator,comparison:rg.pJ.compareOperator,constParameter:rg.pJ.constant(rg.pJ.variableName),derive:rg.pJ.function(rg.pJ.annotation),deriveHelper:rg.pJ.function(rg.pJ.annotation),dot:rg.pJ.derefOperator,escapeSequence:rg.pJ.escape,invalidEscapeSequence:rg.pJ.invalid,formatSpecifier:rg.pJ.processingInstruction,generic:rg.pJ.typeName,label:rg.pJ.labelName,lifetime:rg.pJ.special(rg.pJ.variableName),logical:rg.pJ.logicOperator,macroBang:rg.pJ.macroName,parenthesis:rg.pJ.paren,punctuation:rg.pJ.punctuation,selfKeyword:rg.pJ.self,selfTypeKeyword:rg.pJ.self,semicolon:rg.pJ.separator,typeAlias:rg.pJ.typeName,toolModule:rg.pJ.namespace,union:null,unresolvedReference:null,tomlArrayKey:rg.pJ.propertyName,tomlTableKey:rg.pJ.className},rw={declaration:rg.pJ.definition,definition:rg.pJ.definition,readonly:rg.pJ.constant,static:rg.pJ.constant,deprecated:null,abstract:null,async:rg.pJ.special,modification:function(e){return e===rg.pJ.keyword?rg.pJ.modifier:null},documentation:function(e){return e===rg.pJ.comment?rg.pJ.docComment:e===rg.pJ.string?rg.pJ.docString:null},defaultLibrary:rg.pJ.standard,attribute:null,callable:rg.pJ.function,constant:rg.pJ.constant,consuming:null,controlFlow:function(e){return e===rg.pJ.keyword?rg.pJ.controlKeyword:e===rg.pJ.operator?rg.pJ.controlOperator:null},crateRoot:null,injected:null,intraDocLink:function(){return rg.pJ.url},library:null,macro:null,mutable:null,public:null,reference:null,trait:null,unsafe:null},rZ=new Set([rg.pJ.comment,rg.pJ.string,rg.pJ.number,rg.pJ.keyword,rg.pJ.operator]),rx=new Map;function rC(){return(rC=(0,e_._)(function(e){var t,n,r,i,o,a,l,c,s,u,d;return(0,eS.Jh)(this,function(f){switch(f.label){case 0:if(t=e.client,n=e.path,r=e.previous,i=e.doc,o=e.signal,a=(0,eK.Z)(t),r&&a.isSemanticTokensDeltaSupported)l=t.semanticTokensDelta(n,r,{signal:o});else if(a.isSemanticTokensFullSupported)l=t.semanticTokensFull(n,{signal:o});else{if(!i||!a.isSemanticTokensRangeSupported)return[2,null];c=(0,eY.sg)(i,0),s=(0,eY.sg)(i,i.length),l=t.semanticTokensRange(n,{start:c,end:s},{signal:o})}return[4,l];case 1:if((u=f.sent())&&"error"in u&&-32802===u.error.code)return[2,!1];if(!u||u.cancelled||!(d="result"in u&&!u.cancelled?u.result:null))return[2,null];return[2,d]}})})).apply(this,arguments)}var r_=function(){"use strict";function e(t,n){(0,eA._)(this,e),this.data=t,this.id=n}var t=e.prototype;return t.reset=function(){this.data=[],this.id=null},t.update=function(e){if(!e){this.reset();return}if("edits"in e&&this.id){var t,n,r=e.edits.slice().sort(function(e,t){return t.start-e.start}),i=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s,u,d=l.value;(null===(s=d.data)||void 0===s?void 0:s.length)?(u=this.data).splice.apply(u,[d.start,d.deleteCount].concat((0,k._)(d.data))):this.data.splice(d.start,d.deleteCount)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}this.id=null!==(n=e.resultId)&&void 0!==n?n:null}else if("data"in e)this.data=e.data,this.id=null!==(t=e.resultId)&&void 0!==t?t:null;else throw Error("Invalid semantic tokens response")},t.decorations=function(e,t){for(var n=t.doc,r=new eP.f_,i=0,o=0,a=0;a<this.data.length;a+=5){var l=this.data[a],c=this.data[a+1],s=this.data[a+2],u=this.data[a+3],d=this.data[a+4];i+=l,o=l>0?c:o+c;var f=function(e,t,n){var r=(0,ry.uH)(e,t);if(null===r)return null;var i=rb[r];if(!i)return null;var o=(0,ry.ib)(e,n),a="".concat(r,":").concat(o.join(",")),l=rx.get(a);if(void 0!==l)return l;var c=o.map(function(e){if(void 0===rw[e])return null;var t=rw[e];return null===t?null:t}).filter(Boolean),s=!0,u=!1,d=void 0;try{for(var f,h=c[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=(0,f.value)(i);p&&(i=p)}}catch(e){u=!0,d=e}finally{try{s||null==h.return||h.return()}finally{if(u)throw d}}return i&&rZ.has(i)&&(i=null),rx.set(a,i),i}(e,u,d);if(f){var h=(0,T.QN)(t,[f]);if(h){var p=(0,eY.RL)(n,{line:i,character:o}),m=(0,eY.RL)(n,{line:i,character:o+s}),v=ek.p.mark({class:h});r.add(p,m,v)}}}return r.finish()},e}(),rS=["typescript"],rk=function(){"use strict";function e(t,n){var r=this;(0,eA._)(this,e),this.view=t,this.client=n,this.data=new r_([],null),this.controller=null,this.disposables=[],this.pending=!1,this.running=!1,this.changes=null,this.decorations=ek.p.none,this.proneToDesync=rS.some(function(e){return n.clientId.includes(e)}),this.disposables.push(n.onSemanticTokensRefresh(function(){return r.refresh()}),n.onServerCapabilitiesChange(function(){return r.refresh()}));var i=t.state.facet(tV.Yp);if(i){if(n.isOpen(i))this.run();else{var o=setTimeout(function(){n.isOpen(i)&&r.run()},500);this.disposables.push(function(){return clearTimeout(o)})}}}var t=e.prototype;return t.abort=function(){var e;this.pending=!1,null===(e=this.controller)||void 0===e||e.abort()},t.refresh=function(){this.abort(),this.data.reset(),this.run()},t.run=function(){if(this.pending=!0,!this.running){this.running=!0;var e=this;(0,e_._)(function(){var t;return(0,eS.Jh)(this,function(n){switch(n.label){case 0:t=function(){var t,n,r,i,o,a,l,c,s,u,d;return(0,eS.Jh)(this,function(f){switch(f.label){case 0:t=Date.now(),f.label=1;case 1:if(f.trys.push([1,3,,4]),e.pending=!1,e.changes=null,o=(i=e.view.state).facet(tV.Yp),a=null===(r=e.client.getServerCapabilities())||void 0===r?void 0:null===(n=r.semanticTokensProvider)||void 0===n?void 0:n.legend,c=(l=(0,eK.Z)(e.client)).isSemanticTokensFullSupported||l.isSemanticTokensRangeSupported,!o||!a||!c||!e.client.isOpen(o))return e.data.reset(),e.decorations.size>0&&(e.decorations=ek.p.none,e.view.dispatch()),[2,"continue"];return e.controller=new AbortController,[4,function(e){return rC.apply(this,arguments)}({client:e.client,path:o,previous:e.data.id,doc:i.doc,signal:e.controller.signal})];case 2:return!1===(s=f.sent())?e.pending=!0:e.controller.signal.aborted||(e.data.update(s),e.decorations=e.changes?e.data.decorations(a,i).map(e.changes):e.data.decorations(a,i),e.view.dispatch()),[3,4];case 3:return u=f.sent(),(0,ek.OO)(e.view.state,u),e.data.reset(),e.decorations=ek.p.none,e.changes=null,[3,4];case 4:if(e.controller=null,d=Date.now()-t,!(e.pending&&d<150))return[3,6];return[4,new Promise(function(e){return setTimeout(e,150-d)})];case 5:f.sent(),f.label=6;case 6:return[2]}})},n.label=1;case 1:if(!e.pending)return[3,3];return[5,(0,eS.XA)(t())];case 2:return n.sent(),[3,1];case 3:return e.running=!1,e.changes=null,[2]}})})()}},t.update=function(e){e.docChanged&&this.decorations.size&&(this.decorations=this.decorations.map(e.changes))},t.postUpdate=function(e){(0,eL.aU)(e,tV.Yp)?this.refresh():e.docChanged&&(this.running&&(this.changes=this.changes?this.changes.composeDesc(e.changes):e.changes),this.proneToDesync&&this.abort(),this.run())},t.destroy=function(){this.abort(),this.data.reset();var e=!0,t=!1,n=void 0;try{for(var r,i=this.disposables[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)(0,r.value)()}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.disposables=[]},e}(),rE=new eE.j(function(e){if(!e||!e.length)return null;var t=e.map(function(e){return ek.lg.define(function(t){return new rk(t,e)},{decorations:function(e){return e.decorations},provide:function(e){return ek.tk.updateListener.of(function(t){var n;return null===(n=t.view.plugin(e))||void 0===n?void 0:n.postUpdate(t)})}})});return eP.Wl.highest(t)}),rT=n(72304),rR=new eE.j(function(e){return nB.of(e)}),rD=new eE.j(function(e){return rh.WB.of(e)}),rI=new eE.j(function(e){return rT.I.of(e)}),rB=n(97588),rG=ek.tk.theme({"& .cm-gutters.cm-minimap-gutter":{backgroundColor:t3.TV.backgroundDefault,borderLeft:"1px solid ".concat(t3.TV.backgroundHigher)},"& .cm-minimap-box-shadow":{boxShadow:"unset"}}),rA=eP.QQ.define({create:function(e){return 0===e.doc.length||e.doc.lines>1e3},update:function(e,t){return t.docChanged?0===t.state.doc.length||t.state.doc.lines>1e3:e}}),rP=new eE.j(function(e,t,n){var r=function(){return{dom:document.createElement("div")}};return e?null:[rG,rA,rB.a.compute([tT,rA],function(e){if(e.field(rA,!1)||"blocks"!==t&&"characters"!==t)return null;var i=e.field(tT,!1),o={};if(i)for(var a=1;a<=e.doc.lines;a++)switch(i.getLineChangeType(a)){case tS.dQ.COVERED:o[a]=n.values.global.greenDefault;break;case tS.dQ.MODIFIED:o[a]=n.values.global.blueDefault}return{create:r,displayText:t,gutters:[o]}})]}),rL=n(74509),rN=n(85234),rO=n.n(rN),rU=n(51561),rM=eP.r$.define({combine:function(e){var t;return null!==(t=e.find(function(e){return null!==e}))&&void 0!==t?t:null}}),rX=eP.r$.define({combine:function(e){return rW(e)}}),rF=eP.r$.define({combine:function(e){return rW(e)}});function rW(e){var t=[];return e.forEach(function(e){return e?t.push(e):void 0}),t}var rH=function(e){"use strict";(0,e5._)(n,e);var t=(0,e7._)(n);function n(e){var r;return(0,eA._)(this,n),(r=t.call(this)).diagnostic=e,r}return n.prototype.eq=function(e){return e instanceof n&&this.severityValue===e.severityValue},(0,no._)(n,[{key:"severityValue",get:function(){switch(this.diagnostic.severity){case"error":return 3;case"warning":return 2;case"info":return 1;default:return 0}}},{key:"severityColor",get:function(){switch(this.diagnostic.severity){case"error":return"#d11";case"warning":return"orange";case"info":return"#999";default:return"#66d"}}}]),n}(eP.uU);function rV(e){var t=new eP.f_;return(0,R.c1)(e,function(e,n,r){t.add(n,r,new rH(e))}),t.finish()}var rz=eP.QQ.define({create:function(e){return rV(e)},update:function(e,t){return(0,eL.aU)(t,R.lC)?rV(t.state):e.map(t.changes)},provide:function(e){return rX.compute([e],function(t){for(var n=new Map,r=t.field(e).iter();r.value;){for(var i=t.doc.lineAt(r.from),o=t.doc.lineAt(r.to),a=i.number;a<=o.number;){var l,c=null===(l=n.get(a))||void 0===l?void 0:l.severityValue;(!c||c<r.value.severityValue)&&n.set(a,r.value),a++}r.next()}return Array.from(n.entries()).map(function(e){var t=(0,S._)(e,2),n=t[0],r=t[1];return{color:r.severityColor,number:n,zIndex:r.severityValue}})})}}),rj="cm-with-scrollbar",rq="cm-scrollbar-gutter",rJ="cm-scrollbar-inner",rY="cm-scrollbar-overlay-container",r$="cm-scrollbar-overlay",rK="cm-scrollbar-overlay-invisible",rQ="cm-scrollbar-overlay-active",r0="--cm-scrollbar-overlay-height",r1=ek.tk.theme((b={"&":{height:"100%",overflowY:"auto"}},(0,tc._)(b,"& .".concat(rq),{borderRight:0,boxSizing:"border-box",display:"flex",flexShrink:0,height:"100%",insetInlineStart:0,left:"unset",position:"sticky",right:0,top:0,width:"".concat(15,"px"),zIndex:200}),(0,tc._)(b,"& .".concat(rJ),{height:"100%",position:"absolute",right:0,top:0,overflowY:"hidden",borderLeft:"1px solid",borderLeftColor:"inherit"}),(0,tc._)(b,"& .".concat(rJ," > canvas"),{display:"block",height:"100%",width:"".concat(14,"px"),opacity:.6}),(0,tc._)(b,".".concat(rY),(y={position:"absolute",top:0,height:"100%",width:"100%"},(0,tc._)(y,"& .".concat(r$),(g={background:"rgb(121, 121, 121)",opacity:"0.2",position:"absolute",right:0,top:0,height:"max(".concat(20,"px, var(").concat(r0,"))"),width:"100%",transition:"top 0s ease-in 0ms"},(0,tc._)(g,"&:hover",{opacity:"0.3"}),(0,tc._)(g,"&.".concat(rK),{pointerEvents:"none",opacity:0}),g)),(0,tc._)(y,"& .".concat(rQ),(0,tc._)({opacity:1,visibility:"visible",transition:"visibility 0s linear 0ms, opacity 300ms"},"& .".concat(r$),{opacity:"0.4"})),y)),(0,tc._)(b,"&.".concat(rj," .cm-scroller::-webkit-scrollbar"),{width:0}),(0,tc._)(b,"&.".concat(rj," .cm-scroller"),{scrollbarWidth:"none"}),b)),r2=function(){"use strict";function e(t){(0,eA._)(this,e),this.dragInfo=null,this.view=t,this.container=document.createElement("div"),this.container.classList.add(rY),this.container.role="presentation",this.container.ariaHidden="true",this.handle=document.createElement("div"),this.handle.classList.add(r$),this.container.appendChild(this.handle);var n=t.dom.querySelector(".".concat(rJ));n&&n.appendChild(this.container),this.observer=new ResizeObserver(this.resizeHandle.bind(this)),this.observer.observe(t.dom),this.container.addEventListener("mousedown",this.onMouseDown.bind(this)),window.addEventListener("mouseup",this.onMouseUp.bind(this)),window.addEventListener("mousemove",this.onMouseMove.bind(this))}var t=e.prototype;return t.resizeHandle=function(){var e=this;this.view.requestMeasure({key:"".concat(this,".resizeHandle"),read:function(){return{ratio:Math.min(1,e.view.scrollDOM.clientHeight/e.view.contentHeight)}},write:function(t){var n=t.ratio;e.handle.style.setProperty(r0,"".concat(100*n,"%")),1===n?e.handle.classList.add(rK):e.handle.classList.remove(rK)}})},t.updateHandlePosition=function(){var e=this;this.view.requestMeasure({key:"".concat(this,".onScroll"),read:function(){var t=e.view.contentHeight,n=e.view.scrollDOM.clientHeight,r=e.handle.getBoundingClientRect().height;return{scrollTop:Math.round(e.view.scrollDOM.scrollTop*((n-r)/(t-n)))}},write:function(t){var n=t.scrollTop;e.handle.style.top="".concat(n,"px")}})},t.onMouseDown=function(e){var t=this;if(2!==e.button){if(e.preventDefault(),e.target===this.handle){this.dragInfo={dragStartY:e.clientY},this.container.classList.add(rQ);return}this.view.requestMeasure({key:"".concat(this,".onMouseDown"),read:function(){var n=t.view.scrollDOM.clientHeight,r=t.view.contentHeight;return{scrollTop:Math.max(0,e.clientY-e.target.getBoundingClientRect().top-n/r*n/2)/n*r}},write:function(e){var n=e.scrollTop;t.view.scrollDOM.scrollTop=n}})}},t.onMouseUp=function(){this.dragInfo&&(this.dragInfo=null,this.container.classList.remove(rQ))},t.onMouseMove=function(e){if(this.dragInfo){e.preventDefault();var t=e.clientY-this.dragInfo.dragStartY;this.view.scrollDOM.scrollTop=this.view.scrollDOM.scrollTop+t/this.view.dom.clientHeight*this.view.contentHeight,this.view.scrollDOM.scrollTop>0&&Math.round(this.view.scrollDOM.scrollTop)<Math.round(this.view.contentHeight-this.view.dom.clientHeight)&&(this.dragInfo={dragStartY:e.clientY}),this.updateHandlePosition()}},t.update=function(e){(e.docChanged||e.geometryChanged)&&(this.resizeHandle(),this.updateHandlePosition())},t.destroy=function(){this.container.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),this.container.remove(),this.observer.disconnect()},e}(),r4=function(){"use strict";function e(t){(0,eA._)(this,e),this.view=t;var n=t.state.facet(rM);if(!n)throw Error("expected config");this.dom=n.create(t).dom,this.dom.classList.add(rq);var r=document.createElement("div");r.classList.add(rJ);var i=document.createElement("canvas");i.ariaHidden="true",this.context=i.getContext("2d"),r.appendChild(i),this.dom.appendChild(r),t.scrollDOM.insertBefore(this.dom,t.contentDOM.nextSibling),this.update()}var t=e.prototype;return t.shouldRedraw=function(e,t){return!!(!e||!t||(0,eL.aU)(e,"doc","selection","focus",rF,rX,T.SW,T.xP))||this.view.contentHeight!==this.previousContentHeight||2*t.scrollClientHeight!==this.previousCanvasHeight},t.update=function(e){var t=this;this.view.requestMeasure({key:this,read:function(){return{scrollClientHeight:t.view.scrollDOM.clientHeight}},write:function(n){var r=n.scrollClientHeight;if(t.context&&t.shouldRedraw(e,{scrollClientHeight:r})){t.previousContentHeight=t.view.contentHeight,t.context.canvas.width=28,t.context.canvas.height=2*r,t.previousCanvasHeight=t.context.canvas.height,t.context&&t.context.clearRect(0,0,t.context.canvas.width,t.context.canvas.height);var i=t.view.state.facet(rF),o=t.view.state.facet(rX),a=new Map,l=!0,c=!1,s=void 0;try{for(var u,d=o.entries()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f,h=(0,S._)(u.value,2),p=h[0],m=h[1],v=p%3,g=void 0,y=void 0,b=!0,w=!1,Z=void 0;try{for(var x,C=m[Symbol.iterator]();!(b=(x=C.next()).done);b=!0){var _,k=x.value;if(void 0===g||void 0===y){g=k,y=k;continue}if(y.number+1===k.number&&y.color===k.color&&y.zIndex===k.zIndex){y=k;continue}a.set(v,(null!==(_=a.get(v))&&void 0!==_?_:[]).concat([[g,y]])),g=k,y=k}}catch(e){w=!0,Z=e}finally{try{b||null==C.return||C.return()}finally{if(w)throw Z}}g&&y&&a.set(v,(null!==(f=a.get(v))&&void 0!==f?f:[]).concat([[g,y]]))}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}var E=!0,R=!1,D=void 0;try{for(var I,B=a.entries()[Symbol.iterator]();!(E=(I=B.next()).done);E=!0)!function(){var e=(0,S._)(I.value,2),n=e[0],i=e[1].sort(function(e,t){var n,r,i=(0,S._)(e,1)[0],o=(0,S._)(t,1)[0];return(null!==(n=i.zIndex)&&void 0!==n?n:0)-(null!==(r=o.zIndex)&&void 0!==r?r:0)}),o=!0,a=!1,l=void 0;try{for(var c,s=i[Symbol.iterator]();!(o=(c=s.next()).done);o=!0)!function(){var e=(0,S._)(c.value,2),i=e[0],o=i.color,a=i.number,l=e[1].number,s=t.view.state.doc.line(a),u=t.view.state.doc.line(l),d=1/0,f=-1/0;if((0,T.q2)(t.view.state).between(s.from,u.to,function(e,t){d>e&&(d=e),f<t&&(f=t)}),d<f){var h=t.view.state.doc.lineAt(d);h.number<=s.number&&(s=h),t.view.state.doc.lineAt(f).number>=u.number&&(u=h)}var p=s.number,m=u.number,v=!0,g=!1,y=void 0;try{for(var b,w=t.view.state.field(r6)[Symbol.iterator]();!(v=(b=w.next()).done);v=!0){var Z=(0,S._)(b.value,2),x=Z[0],C=Z[1];x[0].number<s.number&&(p-=C),x[1].number<u.number&&(m-=C)}}catch(e){g=!0,y=e}finally{try{v||null==w.return||w.return()}finally{if(g)throw y}}t.drawRange({scrollClientHeight:r,color:o,from:p,to:m,lane:n})}()}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}}()}catch(e){R=!0,D=e}finally{try{E||null==B.return||B.return()}finally{if(R)throw D}}var G=!0,A=!1,P=void 0;try{for(var L,N=i[Symbol.iterator]();!(G=(L=N.next()).done);G=!0){var O=L.value,U=!0,M=!1,X=void 0;try{for(var F,W=O[Symbol.iterator]();!(U=(F=W.next()).done);U=!0){var H=F.value,V=H.color,z=H.number,j=z,q=!0,J=!1,Y=void 0;try{for(var $,K=t.view.state.field(r6)[Symbol.iterator]();!(q=($=K.next()).done);q=!0){var Q=(0,S._)($.value,2),ee=(0,S._)(Q[0],1)[0],et=Q[1];ee.number<z&&(j-=et)}}catch(e){J=!0,Y=e}finally{try{q||null==K.return||K.return()}finally{if(J)throw Y}}t.drawRange({scrollClientHeight:r,color:V,from:j})}}catch(e){M=!0,X=e}finally{try{U||null==W.return||W.return()}finally{if(M)throw X}}}}catch(e){A=!0,P=e}finally{try{G||null==N.return||N.return()}finally{if(A)throw P}}}}})},t.destroy=function(){this.dom.remove()},t.drawRange=function(e){if(this.context){var t,n=(this.view.documentPadding.top+this.view.defaultLineHeight*(e.from-1))/this.view.contentHeight*e.scrollClientHeight,r=2;e.to&&(r=(this.view.documentPadding.top+this.view.defaultLineHeight*e.to)/this.view.contentHeight*e.scrollClientHeight-n)<4&&(n-=(4-r)/2,r=4),this.context.fillStyle=e.color,this.context.beginPath(),this.context.fillRect(9.333333333333334*(null!==(t=e.lane)&&void 0!==t?t:0),2*n,28/(void 0===e.lane?1:3),2*r)}},e}();function r3(e){for(var t=[],n=(0,T.q2)(e).iter();n.value;){var r=t[t.length-1];if(!r||r[0][1].to<n.to){var i=e.doc.lineAt(n.from),o=e.doc.lineAt(n.to);t.push([[i,o],o.number-i.number])}n.next()}return t}function r8(e){return null!==e.facet(rM)}var r6=eP.QQ.define({create:function(e){return r8(e)?r3(e):[]},update:function(e,t){return r8(t.state)&&(0,eL.aU)(t,"doc",T.iQ,r8)?r3(t.state):e}}),r5=eP.r$.define({combine:function(e){var t;return null!==(t=e.find(function(e){return null!==e}))&&void 0!==t?t:null},enables:function(e){return[rM.compute([e],function(t){return t.facet(e)}),r1,[r6,(0,eL.Zc)(function(e){return new r4(e)},{isEnabled:function(e){return null!==e.facet(rM)},provide:function(){return ek.tk.editorAttributes.of(function(e){return null!==e.state.facet(rM)?{class:rj}:null})}})],(0,eL.Zc)(function(e){return new r2(e)},{isEnabled:function(e){return null!==e.facet(rM)},eventObservers:{scroll:function(){var e;null===(e=this.plugin())||void 0===e||e.updateHandlePosition()}}})]}}),r7="cm-multiplayer-selection-green",r9="cm-multiplayer-selection-red",ie="cm-multiplayer-selection-blue",it="cm-multiplayer-selection-gold",ir="cm-multiplayer-selection-purple",ii="cm-multiplayer-selection-teal",io="cm-multiplayer-selection-pink",ia=ek.tk.theme((w={},(0,tc._)(w,".".concat(r7),{background:"rgba(27, 196, 125, 0.2)"}),(0,tc._)(w,".".concat(r9),{background:"rgba(239, 85, 51, 0.2)"}),(0,tc._)(w,".".concat(ie),{background:"rgba(24, 160, 251, 0.2)"}),(0,tc._)(w,".".concat(it),{background:"rgba(255, 199, 0, 1)"}),(0,tc._)(w,".".concat(ir),{background:"rgba(144, 124, 255, 0.2)"}),(0,tc._)(w,".".concat(ii),{background:"rgba(0, 181, 206, 0.2)"}),(0,tc._)(w,".".concat(io),{background:"rgba(238, 70, 211, 0.2)"}),w)),il={"#1BC47D":r7,"#EF5533":r9,"#18A0FB":ie,"#FFC700":it,"#907CFF":ir,"#00B5CE":ii,"#EE46D3":io},ic=eP.Py.define(),is=eP.Py.define(),iu=eP.Py.define(),id=eP.QQ.define({create:function(){return{}},update:function(e,t){if(!t.changes.empty){var n=function(e){return t.changes.mapPos(Math.min(t.changes.length,e))},r={},i=!0,o=!1,a=void 0;try{for(var l,c=Object.values(e)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;r[s.id]=(0,_._)((0,C._)({},s),{position:n(s.position),selectionStart:n(s.selectionStart),selectionEnd:n(s.selectionEnd)})}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}e=r}var u=!0,d=!1,f=void 0;try{for(var h,p=t.effects[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var m=h.value;if(m.is(rU.R)&&(e=(0,C._)({},e)),m.is(ic)&&m.value.position<=t.newDoc.length&&((e=(0,C._)({},e))[m.value.id]=(0,C._)({},m.value)),m.is(is)&&(e=(0,C._)({},e),m.is(is)&&delete e[m.value]),m.is(iu)){e=(0,C._)({},e);var v=!0,g=!1,y=void 0;try{for(var b,w=Object.entries(e)[Symbol.iterator]();!(v=(b=w.next()).done);v=!0){var Z=(0,S._)(b.value,2),x=Z[0];Z[1].username===m.value&&delete e[x]}}catch(e){g=!0,y=e}finally{try{v||null==w.return||w.return()}finally{if(g)throw y}}}}}catch(e){d=!0,f=e}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}return e},provide:function(e){return[ia,eP.Wl.high((0,ek.EY)({above:!1,class:"cm-multiplayer-cursor-layer",update:function(t){return(0,eL.aU)(t,e)},markers:function(t){var n=t.state.field(e,!1);if(!n)return[];var r=[],i=!0,o=!1,a=void 0;try{for(var l,c=Object.values(n)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value,u=s.selectionStart,d=s.selectionEnd,f=s.color.selection;if(u!==d){var h=eP.jT.range(u,d);r.push.apply(r,(0,k._)(ek.dc.forRange(t,f,h)))}}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r}})),rF.compute([e],function(t){var n=t.field(e,!1);return n?Object.entries(n).map(function(e){var n=(0,S._)(e,2),r=(n[0],n[1]);return{color:r.color.cursor,number:t.doc.lineAt(r.selectionStart).number}}):[]})]}}),ih=ek.tk.theme({".multiplayer-cursor":{width:"2px",left:"0",top:"0"},".multiplayer-cursor .multiplayer-label":{boxShadow:es.TV.shadow1,borderRadius:es.TV.borderRadius4,padding:"1px",position:"absolute",left:"0px",animation:"fadeOut 2s ease-in forwards",color:"white",display:"inline-block",whiteSpace:"nowrap"},".multiplayer-cursor:hover .multiplayer-label":{animation:"auto"}});function ip(e){e.style.transform="translate(-10000px, -10000px)"}var im=/iPhone|iPad|iPod/i;function iv(){return!!window.navigator.userAgent.match(im)||"ontouchstart"in window&&window.navigator.userAgent.includes("Macintosh")}function ig(e){var t=document.createElement("div");t.textContent=e.username,t.style.backgroundColor=e.color.cursor,t.classList.add("multiplayer-label");var n=document.createElement("div");return n.classList.add("multiplayer-cursor"),n.style.backgroundColor=e.color.cursor,n.style.position=iv()?"absolute":"fixed",n.appendChild(t),{dom:n,label:t}}var iy=new Map,ib=[ih,ek.lg.define(function(e){var t=e.state.field(id,!1),n=new Map((t?Object.values(t):[]).map(function(e){return[e.id,{view:ig(e),cursor:e}]})),r=!0,i=0,o="function"==typeof IntersectionObserver?new IntersectionObserver(function(e){Date.now()>i-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&s()},{threshold:[1]}):null;function a(){o&&(o.disconnect(),n.forEach(function(e){o.observe(e.view.dom)}))}function l(){t&&0!==Object.values(t).length&&(e.inView&&e.requestMeasure(u),r!==e.inView)&&!(r=e.inView)&&n.forEach(function(e){ip(e.view.dom)})}a();var c=null;function s(){null===c&&(c=setTimeout(function(){c=null,l()},50))}window.addEventListener("resize",s);var u={read:function(){return{editorRect:e.scrollDOM.getBoundingClientRect(),dimensions:new Map((t?Object.values(t):[]).map(function(t){var r=n.get(t.id),i=r?function(e,t){var n=iy.get(e);if(n)return n;var r=t.getBoundingClientRect().width;return iy.set(e,r),r}(t.username,r.view.label):null;return[t.id,{position:e.coordsAtPos(t.position),labelWidth:i}]}))}},write:function(e){n.forEach(function(t,n){var r=e.dimensions.get(n);!function(e){var t=e.cursorView,n=e.position,r=e.labelWidth,i=e.editorRect,o=t.dom,a=t.label;if(!n||!r){ip(o);return}var l=n.bottom-n.top;if(n.bottom<=i.top+l||n.top+l>=i.bottom||n.right<i.left-.1||n.left>i.right+.1){ip(o);return}var c=n.left+r-i.right,s="0px";c>0?(s="-".concat(c,"px"),a.style.borderBottomLeftRadius="4px"):a.style.borderBottomLeftRadius="0px",a.style.pointerEvents="none",a.style.transform="translate(".concat(s,", -100%)");var u=iv()?{x:n.left-i.left+"px",y:n.top-i.top+"px"}:{x:"calc(".concat(n.left,"px + var(--fixed-position-offset-x))"),y:"calc(".concat(n.top,"px + var(--fixed-position-offset-y))")},d=u.x,f=u.y;o.style.transform="translate(".concat(d,", ").concat(f,")"),o.style.height=l+"px"}({cursorView:t.view,position:(null==r?void 0:r.position)||null,labelWidth:(null==r?void 0:r.labelWidth)||null,editorRect:e.editorRect})})},key:"multiplayer-cursors-plugin-".concat(rO()())};return{update:function(r){r.transactions.length&&(i=Date.now());var o=r.state.field(id,!1);if(!(o!==r.startState.field(id,!1))){r.geometryChanged&&l();return}var c=new Map,s=new Set;if(o){var u=new Map((0,k._)(n.values()).map(function(e){return[e.cursor.id,e.view]}));Object.values(o).forEach(function(t){var n=u.get(t.id);if(n)s.add(n),c.set(t.id,{view:n,cursor:t});else{var r=ig(t);c.set(t.id,{view:r,cursor:t}),e.dom.appendChild(r.dom)}})}n.forEach(function(e){s.has(e.view)||e.view.dom.remove()}),n=c,t=o,a(),l()},destroy:function(){window.removeEventListener("resize",s),n.forEach(function(e){e.view.dom.remove()}),t=void 0,n=new Map,null==o||o.disconnect(),c&&clearTimeout(c)},maybeMeasure:l}},{eventHandlers:{scroll:function(){this.maybeMeasure()}}})],iw=function(){"use strict";function e(t,n,r,i){var o=this;(0,eA._)(this,e),this.view=t,this.destroyed=!1,this.colors=this.getColorMapFromUsers(i.getActiveUsers()),this.disposes=[],this.updateSelections=null,this.disposes.push(i.onUserLeave(function(e){o.destroyed||o.view.dispatch({effects:iu.of(e.username)})}),i.onActiveUsersChange(function(e){o.destroyed||(o.colors=o.getColorMapFromUsers(e))}),r.watchTextFile(n,{onReady:function(e){var t=e.updateSelections;o.destroyed||(o.updateSelections=t)},onCursor:function(e){if(!o.destroyed){var t=function(e){var t,n=e.cursor,r=e.usernameColorsMap,i=null===(t=n.user)||void 0===t?void 0:t.name;if(i){var o=n.id,a=n.position,l=n.selectionStart,c=n.selectionEnd,s=r[i];if(s&&o&&"number"==typeof a&&"number"==typeof l&&"number"==typeof c)return ic.of({id:o,username:i,position:a,color:{cursor:s,selection:il[s]||""},selectionStart:l,selectionEnd:c})}}({cursor:e,usernameColorsMap:o.colors});t&&o.view.dispatch({effects:t})}},onRemoveCursor:function(e){o.destroyed||o.view.dispatch({effects:is.of(e)})},onError:function(){o.updateSelections=null},onMoveOrDelete:function(){o.updateSelections=null}}))}var t=e.prototype;return t.getColorMapFromUsers=function(e){return e.reduce(function(e,t){return t.username&&t.color?(0,_._)((0,C._)({},e),(0,tc._)({},t.username,t.color)):e},{})},t.postUpdate=function(e){if(!(!e.selectionSet||e.transactions.every(function(e){return e.annotation(eP.YW.remote)}))&&this.updateSelections){var t=e.state.selection.ranges.map(function(e){return{position:e.head,selectionStart:e.from,selectionEnd:e.to}});this.updateSelections(t)}},t.destroy=function(){this.destroyed=!0,this.disposes.forEach(function(e){return e()})},e}(),iZ=new eE.j(function(e,t,n){return[ib,id,ek.lg.define(function(r){return new iw(r,e,t,n)},{provide:function(e){return ek.tk.updateListener.of(function(t){var n;return null===(n=t.view.plugin(e))||void 0===n?void 0:n.postUpdate(t)})}})]}),ix=function(){"use strict";function e(t,n){var r=this;(0,eA._)(this,e),this.view=t,this.presence=n,this.destroyed=!1,this.followed=null,this.dispose=n.onFollowedUserChanged(function(e){return r.onFollowedUserChanged(e)}),Promise.resolve().then(function(){r.onFollowedUserChanged(n.getFollowedUser())})}var t=e.prototype;return t.onFollowedUserChanged=function(e){var t=this;if(!this.destroyed&&(this.followed=e,this.followed)){var n=this.view.state.field(id,!1);if(n){var r=Object.values(n).find(function(e){var n;return e.username===(null===(n=t.followed)||void 0===n?void 0:n.username)});r&&this.jumpToPosition(r.position)}}},t.jumpToPosition=function(e){this.view.dispatch({effects:[ek.tk.scrollIntoView(eP.jT.cursor(e),{x:"center",y:"center"})]})},t.unfollow=function(){this.presence.getFollowedUser()&&this.presence.unfollowUser()},t.postUpdate=function(e){if(this.followed){var t=void 0,n=!0,r=!1,i=void 0;try{for(var o,a=e.transactions[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=!0,s=!1,u=void 0;try{for(var d,f=l.effects[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var h=d.value;h.is(ic)&&h.value.username===this.followed.username&&(t=h)}}catch(e){s=!0,u=e}finally{try{c||null==f.return||f.return()}finally{if(s)throw u}}}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}t&&this.jumpToPosition(t.value.position)}},t.destroy=function(){this.destroyed=!0,this.dispose()},e}(),iC=new eE.j(function(e){return ek.lg.define(function(t){return new ix(t,e)},{provide:function(e){return ek.tk.updateListener.of(function(t){var n;return null===(n=t.view.plugin(e))||void 0===n?void 0:n.postUpdate(t)})},eventHandlers:{click:function(){this.unfollow()},wheel:function(){this.unfollow()},keydown:function(e){"Control"!==e.key&&"Meta"!==e.key&&this.unfollow()}}})}),i_=n(34328),iS=ek.lg.define(function(e){var t=e.state.facet(ik),n=[];return{update:function(e){t=e.state.facet(ik);var n=!0,r=!1,i=void 0;try{for(var o,a=e.transactions[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;l.changes.empty||this.pushTransaction(l)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}},flush:function(){n=[]},logs:function(){return n},pushEvent:function(t){var n={anchor:e.state.selection.main.anchor,head:e.state.selection.main.head,docLength:e.state.doc.length,time:Date.now(),type:t.type};t instanceof KeyboardEvent&&(n.key=t.key,n.metaKey=t.metaKey,n.shiftKey=t.shiftKey,n.altKey=t.altKey,n.ctrlKey=t.ctrlKey),t instanceof InputEvent&&(n.data=t.data,n.inputType=t.inputType,n.isComposing=t.isComposing),t instanceof CompositionEvent&&(n.data=t.data),this.pushLog(n)},pushTransaction:function(e){this.pushLog({userEvent:e.annotation(eP.YW.userEvent),changes:JSON.stringify(e.changes),time:Date.now(),type:"transaction"})},pushLog:function(e){t&&(n.push(e),n=n.slice(Math.max(0,n.length-100)))}}},{provide:function(e){var t=function(t,n){var r;return null===(r=n.plugin(e))||void 0===r?void 0:r.pushEvent(t)};return eP.Wl.highest(ek.tk.domEventHandlers({keypress:t,keydown:t,keyup:t,beforeinput:t,input:t,compositionstart:t,compositionupdate:t,compositionend:t}))}}),ik=eP.r$.define({combine:function(e){return!!e.length&&e[0]}}),iE=new eE.j(function(e){return ik.of(e)}),iT=n(1813),iR=n(35020),iD=n(57253),iI=eP.q6.define(),iB=eP.Py.define(),iG=eP.QQ.define({create:function(){return!0},update:function(e,t){return!(0,eL.aU)(t,iB)&&e},provide:function(e){return rL.o.from(e)}}),iA=function(){"use strict";function e(t,n,r,i){var o=this;(0,eA._)(this,e),this.view=t,this.path=n,this.fs=r,this.writeChange=null,this.destroyed=!1,this.debug=(0,_._)((0,C._)({},i),{latestReceivedVersion:0,openVersion:0,initiatedChanges:0,previousInitiatedChanges:null}),this.dispose=r.watchTextFile(n,{onReady:function(e){var n=e.initialContent,r=e.writeChange,i=e.version;o.destroyed||(o.debug.latestReceivedVersion=i,o.debug.openVersion=i,o.debug.setBsodFilePathVersion({filePath:o.path,version:i}),o.debug.trackTimeToLoadFileEnd(o.path),o.writeChange=r,t.dispatch({changes:{from:0,to:t.state.doc.length,insert:n},effects:iB.of(null),annotations:[eP.YW.addToHistory.of(!1),eP.YW.remote.of(!0),iI.of(!0)]}))},onChange:function(e){var n=e.changes,r=e.changeSource,i=e.version;if(!o.destroyed){o.debug.latestReceivedVersion=i,o.debug.setBsodFilePathVersion({filePath:o.path,version:i});try{t.dispatch({changes:n,annotations:[eP.YW.remote.of(r===iD.Fl.Container),eP.YW.addToHistory.of(r===iD.Fl.Local),iI.of(!0)]})}catch(e){o.debugThrowSyncRemoteOpError(n,r,e)}}},onError:function(){o.destroyed||(o.dispose=null,o.writeChange=null)},onMoveOrDelete:function(){o.destroyed||(o.dispose=null,o.writeChange=null)}})}var t=e.prototype;return t.postUpdate=function(e){if(e.docChanged&&this.writeChange){var t=!0,n=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(!(a.annotation(eP.YW.remote)||a.annotation(iI))){this.debug.initiatedChanges++;var l=a.annotation(i_.Z)?{author:"ghostwriter"}:{};try{this.writeChange(a.changes,l),this.debug.previousInitiatedChanges=a.changes}catch(t){this.debugThrowWriteChangeError(e,a,t);break}}}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}},t.destroy=function(){var e;this.destroyed=!0,null===(e=this.dispose)||void 0===e||e.call(this),this.dispose=null,this.writeChange=null,this.debug.deleteBsodFilePathVersion({filePath:this.path})},t.debugThrowSyncRemoteOpError=function(e,t,n){var r=this;this.fs.readFile(this.path,{fromDisk:!1}).then(function(i){var o="replitReadError: "+i.error;i.error||(o=i.content.toString());var a=r.view.contentDOM.innerText;r.debug.throwBsod({origin:"Codemirror: ot/syncRemoteOp",error:n,tags:{ot:!0},extras:{filePath:r.path,previousChanges:JSON.stringify(r.debug.previousInitiatedChanges),changes:JSON.stringify(e),changeSource:t,otClientDoc:o,domText:a,cmDoc:r.view.state.doc.sliceString(0),openVersion:r.debug.openVersion,version:r.debug.latestReceivedVersion,initiatedChanges:r.debug.initiatedChanges}}),(0,ek.OO)(r.view.state,n)})},t.debugThrowWriteChangeError=function(e,t,n){var r=this;this.fs.readFile(this.path,{fromDisk:!1}).then(function(i){var o="replitReadError: "+i.error;i.error||(o=i.content.toString());var a=e.view.contentDOM.innerText,l=e.view.plugin(iS),c=null==l?void 0:l.logs();null==l||l.flush(),r.debug.throwBsod({origin:"Codemirror: ot/writeChange",error:n,tags:{ot:!0},extras:{filePath:r.path,previousChanges:JSON.stringify(r.debug.previousInitiatedChanges),transactionChanges:JSON.stringify(t.changes),otherTransactionChanges:JSON.stringify(e.transactions.filter(function(e){return e!==t}).map(function(e){return e.changes})),transactionDoc:t.newDoc.sliceString(0),updateDoc:e.state.doc.sliceString(0),otClientDoc:o,domText:a,openVersion:r.debug.openVersion,latestReceivedVersion:r.debug.latestReceivedVersion,keystrokes:JSON.stringify(c)}})}),(0,ek.OO)(e.state,n)},e}(),iP=new eE.j(function(e,t,n){return ek.lg.define(function(r){return new iA(r,e,t,n)},{provide:function(e){return[iG,ek.tk.updateListener.of(function(t){var n;return null===(n=t.view.plugin(e))||void 0===n?void 0:n.postUpdate(t)})]}})}),iL=n(48126),iN=n(91175),iO=n(32682),iU=n(45077),iM=n(56683),iX=n(49995),iF=n(60994),iW=n(15235),iH=n(18060),iV=n(45271),iz=n(38702),ij=(0,ep.X)({buttons:[es.l0.display.flex,es.l0.rowWithGap(4),es.l0.justify.end],input:[es.l0.colWithGap(4),es.l0.flex.grow(1)],gap:[es.l0.colWithGap(16)],label:[es.l0.color.foregroundDimmer,es.l0.fontSize(12),es.l0.height(24),es.l0.justify.center],flexRow:[es.l0.display.flex,es.l0.rowWithGap(8),es.l0.align.center]}),iq={fontFamily:"text-security-disc"},iJ=ea.K.label;function iY(e){var t=(0,eD.Z)().secrets,n=(0,et.useId)(),r=(0,et.useId)(),i=(0,S._)((0,et.useState)(""),2),o=i[0],a=i[1],l=(0,S._)((0,et.useState)(e.initialValue),2),c=l[0],s=l[1],u=(0,S._)((0,et.useState)(!1),2),d=u[0],f=u[1],h=(0,et.useRef)(null);return(0,et.useEffect)(function(){if(e.isOpen){var t;null===(t=h.current)||void 0===t||t.focus(),(0,t4.j)(t4.U3.PASTE_SCANNER_USED,{action:"modal_opened",provider:null==e?void 0:e.provider})}},[e.isOpen,null==e?void 0:e.provider]),(0,E.tZ)(iz.MT,{contain:!0,children:(0,E.tZ)(iV.u,{isOpen:e.isOpen,onRequestClose:e.onCancel,children:(0,E.BX)(ea.G,{css:ij.gap,children:[(0,E.tZ)(tq.xv,{variant:"subheadBig",multiline:!1,children:"Add a key name for your secret value"}),(0,E.BX)(ea.G,{css:ij.flexRow,children:[(0,E.BX)(ea.G,{css:ij.input,children:[(0,E.tZ)(iJ,{css:ij.label,htmlFor:n,children:"Key"}),(0,E.tZ)(iH.II,{id:n,ref:h,value:o,onChange:function(e){return a(e.target.value)}})]}),(0,E.BX)(ea.G,{css:ij.input,children:[(0,E.BX)(ea.G,{css:ij.flexRow,children:[(0,E.tZ)(iJ,{css:ij.label,htmlFor:r,children:"Value"}),(0,E.tZ)(n0.hU,{alt:"Toggle Secret",onClick:function(){return f(function(e){return!e})},tooltipPlacement:"top",children:d?(0,E.tZ)(V.Z,{}):(0,E.tZ)(H.Z,{})})]}),(0,E.tZ)(iH.II,{id:r,value:c,onChange:function(e){return s(e.target.value)},style:d?void 0:iq})]})]}),(0,E.BX)(ea.G,{css:ij.buttons,children:[(0,E.tZ)(iW.zx,{text:"Cancel",onClick:e.onCancel}),(0,E.tZ)(iW.zx,{colorway:"primary",text:"Save Secret",disabled:0===o.length||0===c.length,onClick:(0,e_._)(function(){return(0,eS.Jh)(this,function(n){switch(n.label){case 0:return[4,t.writeSecret({key:o,value:c})];case 1:return n.sent(),e.onSaveSecret(o,c),(0,t4.j)(t4.U3.PASTE_SCANNER_USED,{action:"secret_created",provider:null==e?void 0:e.provider}),[2]}})})})]})]})})})}var i$=n(18123),iK=n(87128),iQ=n(37058),i0=(0,ep.X)({hint:[es.l0.align.center,es.l0.border({color:es.TV.outlineDimmer,direction:"top"}),es.l0.color.foregroundDimmest,es.l0.display.flex,es.l0.flex.row,es.l0.px(8),es.l0.py(4),es.l0.rowWithGap(8)],info:[es.l0.p(8)],key:[es.l0.px(4)],wrapper:[es.l0.backgroundColor.backgroundHigher,es.l0.borderRadius(4),es.l0.cursor.default,es.l0.font.default],mobileButtons:[es.l0.flex.grow(1)],mobileHint:[es.l0.justify.center]}),i1={borderTop:"1px solid ".concat(es.TV.outlineDimmer),borderBottom:"1px solid ".concat(es.TV.outlineDimmer),borderRadius:0};function i2(e){return(0,E.BX)(ea.G,{css:i0.wrapper,style:e.onMobile?i1:void 0,children:[(0,E.BX)(ea.G,{css:i0.info,style:{textAlign:e.onMobile?"center":"inherit"},children:[(0,E.tZ)(ea.G,{children:"The value you pasted looks like a secret."}),(0,E.tZ)(ea.G,{children:e.supportsSecrets?"Store it securely using our Secrets feature.":"Anyone will be able to see this."})]}),e.onMobile?(0,E.tZ)(i3,(0,C._)({},e)):(0,E.tZ)(i4,(0,C._)({},e))]})}function i4(e){return(0,E.BX)(E.HY,{children:[e.supportsSecrets?(0,E.BX)(ea.G,{css:i0.hint,onClick:e.onClickUseSecrets,children:[(0,E.tZ)(i$.Z,{}),"Press",(0,E.tZ)(ea.G,{css:i0.key,children:(0,E.tZ)(iQ.bM,{keyCombo:"Tab",small:!0})}),"to use Secrets"]}):null,(0,E.BX)(ea.G,{css:i0.hint,onClick:e.onClickPasteAnyway,children:[(0,E.tZ)(iK.Z,{}),"Press",(0,E.tZ)(ea.G,{css:i0.key,children:(0,E.tZ)(iQ.bM,{keyCombo:"Enter",small:!0})}),"to paste anyway"]}),e.supportsSecrets?null:(0,E.BX)(ea.G,{css:i0.hint,onClick:e.onClickUndo,children:[(0,E.tZ)(iK.Z,{}),"Press",(0,E.tZ)(ea.G,{css:i0.key,children:(0,E.tZ)(iQ.bM,{keyCombo:"Escape",small:!0})}),"to undo"]})]})}function i3(e){return(0,E.BX)(ea.G,{css:[i0.hint,i0.mobileHint],children:[e.supportsSecrets?(0,E.tZ)(iW.zx,{css:i0.mobileButtons,iconLeft:(0,E.tZ)(i$.Z,{}),text:"Use Secrets",onClick:e.onClickUseSecrets,colorway:"primary"}):null,(0,E.tZ)(iW.zx,{css:i0.mobileButtons,iconLeft:(0,E.tZ)(iK.Z,{}),text:"Paste Anyway",onClick:e.onClickPasteAnyway}),e.supportsSecrets?null:(0,E.tZ)(iW.zx,{css:i0.mobileButtons,iconLeft:(0,E.tZ)(i$.Z,{}),text:"Undo",onClick:e.onClickUndo})]})}var i8=n(64479),i6=n(82891),i5=(0,ep.X)({border:[es.l0.border({color:t3.TV.accentPrimaryDefault,direction:"y",width:1})],title:[es.l0.display.flex,es.l0.rowWithGap(8),es.l0.align.center,es.l0.justify.spaceBetween,es.l0.px(8),es.l0.pt(4),es.l0.font.default],wrapper:[es.l0.backgroundColor.backgroundRoot,es.l0.py(0),es.l0.position.relative,es.l0.zIndex(200)]});function i7(e){var t;return t=e.onClose,(0,et.useEffect)(function(){var e=function(e){"Escape"===e.key&&t(e)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[t]),(0,E.tZ)(iz.MT,{autoFocus:!0,contain:!0,children:(0,E.tZ)(ea.G,{css:i5.wrapper,children:(0,E.BX)(ea.G,{css:i5.border,children:[(0,E.BX)(ea.G,{css:i5.title,children:[(0,E.BX)(tq.xv,{multiline:!1,children:["Access the secret ",(0,E.tZ)("strong",{children:e.keyName}),":"]}),(0,E.tZ)(n0.hU,{alt:"Close",onClick:e.onClose,children:(0,E.tZ)(n2.Z,{})})]}),(0,E.tZ)(i8.Tg,{background:"root",children:(0,E.tZ)(i6.Z,{keyName:e.keyName,filePath:e.filePath,onInsert:e.onInsert})})]})})})}var i9=iM.V.compute([iO.xg],function(e){var t=e.field(iO.xg).iter();if(null===t.value)return null;for(var n=[];null!==t.value;){var r=t.from,i=t.to,o=t.value;n.push({from:r,to:i,insert:o.result.secret}),t.next()}return n}),oe=function(e){"use strict";(0,e5._)(n,e);var t=(0,e7._)(n);function n(e,r){var i;return(0,eA._)(this,n),(i=t.call(this)).secret=e,i.as=r,i}var r=n.prototype;return r.toDOM=function(e){var t=this,n=(0,tz.V)((0,E.tZ)(i2,{supportsSecrets:e.state.facet(iO.$X),onMobile:"pocket"===this.as,onClickUseSecrets:function(){e.dispatch({effects:iO.Lo.of(t.secret)})},onClickPasteAnyway:function(){(0,iO.Pz)(e),e.focus()},onClickUndo:function(){e.dispatch({effects:iO.uh.of(t.secret.id)}),e.focus()}}));return"pocket"===this.as&&(n.style.zIndex="200",n.style.position="relative",this.adjustForGutter(n,e)),n},r.updateDOM=function(e,t){return this.adjustForGutter(e,t),!0},r.adjustForGutter=function(e,t){var n=t.dom.querySelector(".cm-gutters");e.style.marginLeft=n?"-".concat(n.clientWidth,"px"):"inherit"},n}(ek.l9),ot=iF.t.compute([iO.xv],function(e){var t=e.facet(tV.Yp),n=e.field(iO.xv);return n&&t?{key:"pasteScannerModal",node:function(e){var t;return(0,E.tZ)(iY,{isOpen:!0,initialValue:n.result.secret,provider:n.result.provider,onSaveSecret:(t=(0,e_._)(function(t){var r,i,o,a,l;return(0,eS.Jh)(this,function(c){for(r=e.state.field(iO.xg).iter(),i=[];r.value;)o=r.from,a=r.to,(l=r.value).id===n.id&&(i.push(iO.uh.of(l.id)),i.push(iO.Yt.of({secret:t,from:o,to:a}))),r.next();return e.dispatch({effects:(0,k._)(i).concat([iO.ZB.of(null)])}),[2]})}),function(e){return t.apply(this,arguments)}),onCancel:function(){return e.dispatch({effects:iO.ZB.of(null)})}})}}:null}),on=ek.tk.decorations.compute([iO.Do],function(e){var t=e.field(iO.Do).iter(),n=t.from,r=t.to,i=t.value,o=e.facet(tV.Yp);return i&&o?ek.p.set(ek.p.widget({widget:new or(i.key,o),side:1,block:!0}).range(n,r)):ek.p.none}),or=function(e){"use strict";(0,e5._)(n,e);var t=(0,e7._)(n);function n(e,r){var i;return(0,eA._)(this,n),(i=t.call(this)).key=e,i.filePath=r,i}var r=n.prototype;return r.toDOM=function(e){var t=(0,tz.V)((0,E.tZ)(i7,{keyName:this.key,filePath:this.filePath,onClose:function(){return e.dispatch({effects:iO.qs.of(null)})},onInsert:function(t){e.dispatch(e.state.changeByRange(function(e){return{range:eP.jT.cursor(e.from+t.length),changes:{from:e.from,to:e.to,insert:t}}})),e.focus(),(0,t4.j)(t4.U3.PASTE_SCANNER_USED,{action:"secret_key_inserted"})}}));return this.adjustForGutter(t,e),t},r.updateDOM=function(e,t){return this.adjustForGutter(e,t),!0},r.adjustForGutter=function(e,t){var n=t.dom.querySelector(".cm-gutters");e.style.marginLeft=n?"-".concat(n.clientWidth,"px"):"inherit"},n}(ek.l9),oi=[i9,(c=[iO.xv,iO.xg],s=function(e){return null!=e.field(iO.xv,!1)?null:e.field(iO.xg,!1)||null},[ek.hJ.compute(c,function(e){var t=s(e);if(!t||e.facet(iX.h))return null;for(var n=t.iter();n.value;){var r=function(){var e=new oe(n.value,"tooltip");return{v:{arrow:!0,pos:n.to,create:function(t){return{dom:e.toDOM(t)}}}}}();if("object"===(0,iU._)(r))return r.v}return null}),ek.tk.decorations.compute(c,function(e){var t=s(e);if(!t||!e.facet(iX.h))return ek.p.none;for(var n=t.iter();n.value;){var r=new oe(n.value,"pocket");return ek.p.set(ek.p.widget({widget:r,side:1,block:!0}).range(n.to,n.to))}return ek.p.none})]),ot,on],oo=new eE.j(function(e){return[iO.$X.of(!e),iO.Do,iO.xg,iO.xv,oi,iO.Gv]});function oa(e,t){var n=performance.now();t2.kg.time(e,n-t)}var ol=new eE.j(function(e){var t=e?.01:.001;return eP.Wl.highest(ek.tk.domEventHandlers({keydown:function(e){if(Math.random()<t){var n=e.timeStamp;requestAnimationFrame(function(){oa("editor input latency",n),"undefined"!=typeof requestIdleCallback?requestIdleCallback(function(){oa("editor input latency after layout",n)}):setTimeout(function(){oa("editor input latency after layout",n)})})}}}))}),oc=n(62942),os=n(69436),ou=n(32508),od=n.n(ou),of=[{regexp:/https?:\/\/[^\s)"']+/g,cursor:"pointer",onClick:function(e){od()(e)&&window.open(e,"_blank")}}],oh=new eE.j(function(e){return e?null:(0,os.ZP)({key:"mod",rules:of})}),op=n(30826),om=n.n(op),ov=new Set,og=om()(function(){var e=!0,t=!1,n=void 0;try{for(var r,i=ov[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;(0,t4.j)(t4.U3.WS_TYPED,{fileExt:o})}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}ov.clear()},18e4),oy=ek.tk.updateListener.of(function(e){if(e.docChanged){var t=e.state.facet(tV.Yp);if(t){var n=(0,en.r6)(t)||(0,en.UO)(t);!e.transactions.some(function(e){return e.annotation(eP.YW.remote)})&&(ov.has(n)||(ov.add(n),og()))}}}),ob=n(87502),ow=ek.tk.theme({".cm-ruler-element":{backgroundColor:es.TV.backgroundHigher}}),oZ=eP.QQ.define({create:function(e){return 0===e.doc.length},update:function(e,t){return t.docChanged?0===t.state.doc.length:e}}),ox=(0,ek.EY)({above:!1,class:"cm-ruler-layer",update:function(e){return(0,eL.aU)(e,oC,oZ,rU.R)},markers:function(e){if(e.state.field(oZ,!1))return[];var t=e.state.facet(oC);if(0===t.length)return[];var n=[],r=e.dom.getBoundingClientRect(),i=e.contentDOM.getBoundingClientRect().left-r.left+6,o=r.width-2,a=Math.max(r.height,e.contentHeight),l=!0,c=!1,s=void 0;try{for(var u,d=t[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value,h=i+e.defaultCharacterWidth*f;h<o&&n.push(new ek.dc("cm-ruler-element",h,0,2,a))}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}return n}}),oC=eP.r$.define({enables:[oZ,ox,ow]}),o_=new eE.j(function(e){return e.map(function(e){return oC.of(e)})}),oS=n(5786),ok=n(85733),oE=n(55927),oT=n(46026),oR=n(45911),oD=n(35247),oI=n(79556),oB=n(82496);function oG(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;if(!e.valid)return[];for(var r=[],i=e.getCursor(t),o=i.next();!o.done&&r.length<n;)r.push(o.value),o=i.next();return r}var oA=n(38477);function oP(e){return e>420?"large":"small"}var oL=ea.K.div,oN=(0,ep.X)({root:[es.l0.rowWithGap(4),es.l0.px(4),es.l0.py(6),{borderBottom:"1px solid",borderColor:es.TV.outlineDimmest}],panelButtonWrapper:[es.l0.center,es.l0.height(32)],content:[es.l0.display.grid,es.l0.flex.growAndShrink(1),{gridTemplateAreas:'"search search-controls"',gridTemplateRows:"1fr",gridTemplateColumns:"1fr max-content",gap:es.TV.space8}],contentExpanded:[{gridTemplateAreas:'"search search-controls" "replace replace-controls"',gridTemplateRows:"1fr 1fr",gridTemplateColumns:"1fr max-content"}],contentExpandedSmall:[{gridTemplateAreas:'"search" "search-controls" "replace" "replace-controls"',gridTemplateRows:"1fr max-content 1fr max-content",gridTemplateColumns:"1fr"}],contentSmall:[{gridTemplateAreas:'"search" "search-controls"',gridTemplateRows:"1fr max-content",gridTemplateColumns:"1fr"}],matchLabel:[es.l0.position.absolute,es.l0.top(0),es.l0.right(0),es.l0.height("100%"),es.l0.center,es.l0.pr(4)],inputControlsSmall:[es.l0.colWithGap(8),es.l0.flex.growAndShrink(1)],searchInputWrapper:[es.l0.position.relative,{gridArea:"search"}],searchControls:[es.l0.display.flex,es.l0.align.center,es.l0.rowWithGap(8),es.l0.flex.wrap,{gridArea:"search-controls"}],replaceInputWrapper:[{gridArea:"replace"}],replaceControls:[es.l0.display.flex,es.l0.align.center,es.l0.rowWithGap(8),es.l0.flex.wrap,{gridArea:"replace-controls"}],searchSettings:es.l0.flex.row,jumpIconButton:[es.l0.height(32),es.l0.width(32)]});function oO(e){var t=(0,et.useRef)(null);return(0,et.useEffect)(function(){if(t.current){var n;e!==(null===(n=t.current)||void 0===n?void 0:n.value)&&(t.current.value=e)}},[e]),t}var oU=new tz.J(et.forwardRef(function(e,t){var n=e.view,r=e.query,i=e.updateQuery,o=(0,S._)((0,et.useState)(!1),2),a=o[0],l=o[1],c=(0,S._)((0,et.useState)([]),2),s=c[0],u=c[1],d=(0,S._)((0,et.useState)(null),2),f=d[0],h=d[1],p=s.length,m=(0,ok.Z)(r),v=(0,ok.Z)(s),g=oO(r.search),y=oO(r.replace);function b(){(0,oS.g)(n);var e=n.state.selection.main;n.dispatch({effects:ek.tk.scrollIntoView(e.from,{y:"center",x:"center"})}),p<=1||h(function(t){if(null===t){var n=s.findIndex(function(t){return t.from===e.from&&t.to===e.to});return -1===n?1:n+1}return t>=p?1:t+1})}function w(){(0,oS.a7)(n);var e=n.state.selection.main;n.dispatch({effects:ek.tk.scrollIntoView(e.from,{y:"center",x:"center"})}),p<=1||h(function(t){if(null===t){var n=s.findIndex(function(t){return t.from===e.from&&t.to===e.to});return -1===n?1:n+1}return t<=1?p||1:t-1})}(0,et.useImperativeHandle)(t,function(){return{onSelectionSet:function(){var e=n.state.selection.main,t=v.current.findIndex(function(t){return t.from<=e.anchor&&t.to>=e.anchor});h(-1!==t?t+1:null)},onDocChanged:function(){u(oG(m.current,n.state.doc)),h(null)},onExpandRequested:function(){l(!0)}}},[n,m,v]),(0,et.useEffect)(function(){var e=oG(r,n.state.doc);u(e);var t=n.state.selection.main,i=e.findIndex(function(e){return e.from<=t.anchor&&e.to>=t.anchor});h(-1!==i?i+1:null)},[n,r]);var Z=(0,S._)((0,et.useState)(function(){return oP(n.dom.clientWidth)}),2),x=Z[0],C=Z[1],_=(0,oE.Z)(function(e){e.width&&C(oP(e.width))});function k(e){return(0,ek.$1)(n,e,"search-panel")}var T=p>0,R=r.search.length>0?"0 / 0":null,D=T?"".concat(f||1," / ").concat(p):R,I=D?8*D.length:null,B=(0,E.BX)(ea.G,{css:oN.searchSettings,children:[(0,E.tZ)(oB.Z,{alt:"case sensitive",icon:(0,E.tZ)(oR.Z,{}),checked:r.caseSensitive,onClick:function(){i({caseSensitive:!r.caseSensitive})}}),(0,E.tZ)(oB.Z,{alt:"regular expressions",icon:(0,E.tZ)(oD.Z,{}),checked:r.regexp,onClick:function(){i({regexp:!r.regexp})}}),(0,E.tZ)(oB.Z,{alt:"whole words",icon:(0,E.tZ)(oA.Z,{}),checked:r.wholeWord,onClick:function(){i({wholeWord:!r.wholeWord})}})]}),G=[oN.content];return"small"!==x&&a?G.push(oN.contentExpanded):"small"===x&&a?G.push(oN.contentExpandedSmall):"small"!==x||a||G.push(oN.contentSmall),(0,E.tZ)(oL,{ref:_,onKeyDown:function(e){k(e)&&e.preventDefault()},children:(0,E.BX)(i8.Tg,{elevated:!0,css:oN.root,children:[(0,E.tZ)(ea.G,{css:oN.panelButtonWrapper,children:(0,E.tZ)(n0.hU,{alt:a?"Close replace panel":"Show replace panel",css:oN.jumpIconButton,onClick:function(){l(function(e){return!e})},children:(0,E.tZ)(W.Z,{rotate:a?90:0,style:{transition:"200ms ease"}})})}),(0,E.BX)(ea.G,{css:G,children:[(0,E.BX)(ea.G,{css:oN.searchInputWrapper,children:[(0,E.tZ)(oI.h,{ref:g,style:{padding:4,paddingRight:null!=I?I:void 0},placeholder:"Search",defaultValue:r.search,name:"search","main-field":"true",onKeyDown:function(e){if((0,oT.jh)(e)&&"f"===e.key){e.currentTarget.select();return}if(!("enter"!==e.key.toLowerCase()||k(e))){if(e.preventDefault(),e.shiftKey){w();return}b()}},onChange:function(e){i({search:e})}}),D?(0,E.tZ)(ea.G,{css:oN.matchLabel,children:(0,E.tZ)(tq.xv,{variant:"small",color:"dimmest",multiline:!1,children:D})}):null]}),(0,E.BX)(ea.G,{css:oN.searchControls,children:[(0,E.BX)(ea.G,{css:es.l0.flex.row,children:[(0,E.tZ)(n0.hU,{css:oN.jumpIconButton,alt:"Previous",onClick:function(){w()},children:(0,E.tZ)(W.Z,{rotate:-90})}),(0,E.tZ)(n0.hU,{css:oN.jumpIconButton,alt:"Next",onClick:function(){b()},children:(0,E.tZ)(W.Z,{rotate:90})})]}),(0,E.tZ)(iW.zx,{text:"Select all",onClick:function(){(0,oS.i3)(n),n.focus()}}),B]}),a?(0,E.BX)(E.HY,{children:[(0,E.tZ)(ea.G,{css:oN.replaceInputWrapper,children:(0,E.tZ)(iH.II,{ref:y,style:{padding:4},placeholder:"Replacement",name:"replace",defaultValue:r.replace,onKeyDown:function(e){"enter"!==e.key.toLowerCase()||k(e)||(e.preventDefault(),(0,oS.K9)(n))},onChange:function(e){i({replace:e.target.value})}})}),(0,E.BX)(ea.G,{css:oN.replaceControls,children:[(0,E.tZ)(iW.zx,{text:"Replace",onClick:function(){(0,oS.K9)(n)}}),(0,E.tZ)(iW.zx,{text:"Replace all",onClick:function(){(0,oS.ko)(n)}})]})]}):null]}),(0,E.tZ)(ea.G,{css:oN.panelButtonWrapper,children:(0,E.tZ)(n0.hU,{alt:"Close Search Panel",tooltipBehavior:"hidden",onClick:function(){(0,oS.N$)(n)},children:(0,E.tZ)(n2.Z,{})})})]})})})),oM=eP.Py.define(),oX=[(0,oS.yC)({createPanel:function(e){var t=!1,n=!1,r=!1,i=!1,o=!1,a=function(t){var n,r,i,o,a,l,c=(0,oS.uP)(e.state),s=new oS.Jb({search:null!==(n=t.search)&&void 0!==n?n:c.search,caseSensitive:null!==(r=t.caseSensitive)&&void 0!==r?r:c.caseSensitive,literal:null!==(i=t.literal)&&void 0!==i?i:c.literal,regexp:null!==(o=t.regexp)&&void 0!==o?o:c.regexp,replace:null!==(a=t.replace)&&void 0!==a?a:c.replace,wholeWord:null!==(l=t.wholeWord)&&void 0!==l?l:c.wholeWord});s.eq(c)||e.dispatch({effects:oS.ql.of(s)})},l=oU.create({view:e,query:(0,oS.uP)(e.state),updateQuery:a});return{dom:l,top:!0,update:function(t){(0,eL.aU)(t,oS.ql)&&oU.set(l,{view:e,query:(0,oS.uP)(t.state),updateQuery:a}),t.selectionSet&&!i&&(i=!0,requestAnimationFrame(function(){if(!n){var e;i=!1,null===(e=oU.ref(l))||void 0===e||e.onSelectionSet()}})),t.docChanged&&!r&&(r=!0,requestAnimationFrame(function(){if(!n){var e;r=!1,null===(e=oU.ref(l))||void 0===e||e.onDocChanged()}})),(0,eL.aU)(t,oM)&&!o&&(o=!0,requestAnimationFrame(function(){if(!n){var e;o=!1,null===(e=oU.ref(l))||void 0===e||e.onExpandRequested()}}))},mount:function(){t||(t=!0,requestAnimationFrame(function(){if(!n){t=!1;var e=l.querySelector("[main-field]");e&&(e.focus(),e.select())}}))},destroy:function(){return n=!0}}}}),ek.$f.of([{win:"Ctrl-h",linux:"Ctrl-h",preventDefault:!0,run:function(e){return!!((0,oS.Ep)(e.state)||(0,oS.nx)(e))&&(e.dispatch({effects:oM.of(null)}),!0)}}])],oF=n(39271),oW=n(90413),oH=null!==(Z=globalThis.requestIdleCallback)&&void 0!==Z?Z:globalThis.requestAnimationFrame;function oV(e,t,n){var r=e.field(t,!1);if(void 0===r){if(void 0===n)throw Error("Field is not mounted on state");return n}return t.spec.toJSON(r,e)}function oz(e){for(var t=e.sliceString(0,200)+e.length,n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(n>>>0).toString(36)}var oj=function(){"use strict";function e(t,n,r,i){var o=this;(0,eA._)(this,e),this.view=t,this.replId=n,this.cache=r,this.compartment=i,this.historyIsMounted=!1,this.destroyed=!1,this.pending=!1,this.scheduleCacheUpdate=this.scheduleCacheUpdate.bind(this),this.view.scrollDOM.addEventListener("scroll",this.scheduleCacheUpdate),this.view.state.field(iG,!1)||Promise.resolve().then(function(){o.destroyed||o.apply()})}var t=e.prototype;return t.apply=function(){if(!this.historyIsMounted&&this.view.state.field(er.cE,!1)){(0,ek.OO)(this.view.state,Error("History was preconfigured on this view, if you want to use state cache, please make sure history is not already configured for this view"));return}if(!this.key||this.view.state.field(iG,!1)){if(this.historyIsMounted){var e,t,n=this.key?rL.o.of(!0):[];this.view.dispatch({effects:this.compartment.reconfigure(n)}),this.historyIsMounted=!1}return}var r=this.cache.get(this.key);if(!r||r.hash!==oz(this.view.state.doc)){this.view.dispatch({effects:this.compartment.reconfigure((0,er.m8)())}),this.historyIsMounted=!0;return}var i=eP.jT.fromJSON(r.selection),o=[(e=r.scroll,(t=ek.tk.scrollIntoView(e.pos,{y:"start",x:"start",yMargin:e.yDiff,xMargin:e.scrollLeft})).value.isSnapshot=!0,t),this.compartment.reconfigure([er.cE.init(function(e){var t,n;return t=er.cE,n=r.history,t.spec.fromJSON(n,e)}),(0,er.m8)()])];if(this.view.state.field(T.iQ,!1))for(var a=0;a<r.folds.length;a+=2){var l=r.folds[a],c=r.folds[a+1];o.push(T.SW.of({from:l,to:c}))}this.view.dispatch({selection:i,effects:o}),this.historyIsMounted=!0},t.scheduleCacheUpdate=function(){var e=this;this.pending||(this.pending=!0,oH(function(){e.pending&&!e.destroyed&&(e.pending=!1,e.historyIsMounted&&e.key&&e.cache.set(e.key,{hash:oz(e.view.state.doc),scroll:function(e){var t=e.scrollDOM.scrollTop,n=e.scrollDOM.scrollLeft;if(0===t&&0===n)return{pos:0,yDiff:0,scrollLeft:0};var r=e.lineBlockAtHeight(t+8),i=r.from>=e.viewport.from||e.viewportLineBlocks[0].top-t>200?r:e.viewportLineBlocks[0];return{pos:i.from,yDiff:i.top-t,scrollLeft:n}}(e.view),selection:e.view.state.selection.toJSON(),history:oV(e.view.state,er.cE),folds:oV(e.view.state,T.iQ,[])}))}))},t.postUpdate=function(e){if((0,eL.aU)(e,tV.Yp,iG)){this.apply();return}!this.pending&&this.historyIsMounted&&(0,eL.aU)(e,"doc","selection",er.cE,T.iQ)&&this.scheduleCacheUpdate()},t.destroy=function(){this.destroyed=!0,this.view.scrollDOM.removeEventListener("scroll",this.scheduleCacheUpdate)},(0,no._)(e,[{key:"key",get:function(){var e=this.view.state.facet(tV.Yp);return e?"".concat(this.replId,":").concat(e):null}}]),e}(),oq=new eE.j(function(e,t){var n=new eP.F6,r=ek.lg.define(function(r){return new oj(r,e,t,n)},{provide:function(e){return ek.tk.updateListener.of(function(t){var n;null===(n=t.view.plugin(e))||void 0===n||n.postUpdate(t)})}});return[n.of(rL.o.of(!0)),r]}),oJ=ek.tk.theme({"&":{contain:"size"},"& > .cm-scroller":{contain:"strict"}}),oY=n(527),o$=n(69170),oK=n(54534);function oQ(e,t,n,r){var i=(0,o$.Z)().showError,o=(0,oF.Z)(),a=(0,oK.eR)({variables:{replId:o,path:e},onError:function(e){i(e.message)},skip:!r||t});return(0,et.useMemo)(function(){var r;return t||a.loading||a.error||!a.data||(null===(r=a.data.threadsByFile)||void 0===r?void 0:r.__typename)!=="ThreadsByFileResult"?{}:a.data.threadsByFile.threads.filter(function(t){return t.path===e&&(!n||!t.isResolved)}).reduce(function(e,t){return(0,_._)((0,C._)({},e),(0,tc._)({},t.id,t))},{})},[a.loading,a.data,a.error,e,t,n])}var o0=n(77450),o1=n(8261),o2=n(51727),o4=n(11715),o3=n(1712),o8=n(74042),o6=n(59947),o5=n(36397),o7=function(e){var t=e.caretSize,n=void 0===t?[8,12]:t,r=(0,nr._)(e,["caretSize"]);return(0,E.BX)("svg",(0,_._)((0,C._)({width:n[0],height:n[1],viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),{children:[(0,E.tZ)("mask",{id:"outline",fill:"white",children:(0,E.tZ)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z"})}),(0,E.tZ)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z",fill:"url(#gradient-fill)"}),(0,E.tZ)("path",{d:"M0 8L-0.8 7.4L-2 9H0V8ZM12 8V9H14L12.8 7.4L12 8ZM5.2 1.06667L4.4 0.466667L5.2 1.06667ZM6.80033 1.06711L6.00033 1.66711L6.80033 1.06711ZM12 7H0V9H12V7ZM0.8 8.6L6 1.66667L4.4 0.466667L-0.8 7.4L0.8 8.6ZM6.00033 1.66711C7.87223 4.16297 9.13719 5.84959 11.2 8.6L12.8 7.4C10.7372 4.64959 9.47223 2.96297 7.60033 0.467109L6.00033 1.66711ZM6 1.66667L6.00033 1.66711L7.60033 0.467109C6.80082 -0.598902 5.20049 -0.600655 4.4 0.466667L6 1.66667Z",fill:"#0079F2",mask:"url(#outline)"}),(0,E.tZ)("defs",{children:(0,E.BX)("linearGradient",{id:"gradient-fill",x1:"5.07692",y1:"0",x2:"5.07692",y2:"21.3333",gradientUnits:"userSpaceOnUse",children:[(0,E.tZ)("stop",{stopColor:"#57ABFF"}),(0,E.tZ)("stop",{offset:"1",stopColor:"#0079F2"})]})})]}))},o9=n(89578),ae=n(39885),at=n(68098),an=n(30470),ar=n(38672),ai=n(86257),ao=n(66403),aa=n(43816),al=n(75958),ac=n(38172),as=n(92286),au=n(77535),ad=n(24857),af=n(21371),ah=n(25150),ap=n(36054),am=(0,ep.X)({inlineThreadHeader:[es.l0.flex.row,es.l0.align.center,es.l0.justify.spaceBetween,es.l0.position.relative,es.l0.px(12),es.l0.py(8),{borderBottomWidth:es.TV.borderWidthDefault,borderBottomStyle:"solid",borderBottomColor:es.TV.outlineDimmest}],inlineThreadHeaderCaret:[es.l0.position.absolute,es.l0.height("fit-content"),es.l0.display.flex,es.l0.flex.row,es.l0.align.center],inlineThreadHeaderActions:[es.l0.flex.row,es.l0.align.center,es.l0.rowWithGap(4)],inlineThreadHeaderNavigator:[es.l0.flex.row,es.l0.align.center,es.l0.rowWithGap(4)],inlineThreadInputContainer:[es.l0.px(12),es.l0.pb(8),es.l0.pt(8),es.l0.border({color:es.TV.outlineDimmest,direction:"top"}),{".popover-control-container":[es.l0.flex.grow(1)]}],inlineThreadInput:[es.l0.flex.row,es.l0.align.start,es.l0.rowWithGap(8),es.l0.width("full")],commentContainer:[es.l0.px(12),es.l0.py(12),es.l0.maxHeight(300),es.l0.overflowY("auto"),es.l0.colWithGap(16)]}),av=function(e){var t,n,r=e.isCreating,i=e.threadId,o=e.filePath,a=e.isResolved,l=e.isLoading,c=e.isPlaceholder,s=e.caretPosition,u=e.onRequestClose,d=e.onResolveThread,f=e.openThreadsInbox,h={viewAll:"Inbox",next:"Next thread",previous:"Previous thread",dismiss:"Collapse"},p=oQ(null===o?"":o,l,!0,!0),m=(0,N.Gn)("fontSize").preferences.fontSize,v=[12,8];switch(m){case 10:v=[8,6];break;case 14:v=[10,6];break;case 18:v=[12,8];break;case 24:v=[14,10]}var g=(0,et.useMemo)(function(){return Object.values(p).sort(function(e,t){return e.indexStart-t.indexStart})},[p]),y=(0,et.useMemo)(function(){return g.findIndex(function(e){return e.id===i})},[g,i]),b=(0,ae.a9)(),w=(t=(0,e_._)(function(){return(0,eS.Jh)(this,function(e){return b(y===g.length-1?g[0].id:g[y+1].id),[2]})}),function(){return t.apply(this,arguments)}),Z=(n=(0,e_._)(function(){return(0,eS.Jh)(this,function(e){return b(0===y?g[g.length-1].id:g[y-1].id),[2]})}),function(){return n.apply(this,arguments)});return(0,E.BX)(i8.Tg,{background:"root",css:am.inlineThreadHeader,children:[null!==s&&(0,E.tZ)("span",{css:am.inlineThreadHeaderCaret,style:{top:-v[1],left:s},children:(0,E.tZ)(o7,{caretSize:v})}),(0,E.tZ)(iW.zx,{iconLeft:(0,E.tZ)(au.Z,{}),onClick:function(){f()},text:h.viewAll,size:"small"}),g.length>1?(0,E.BX)(ea.G,{css:am.inlineThreadHeaderNavigator,children:[(0,E.tZ)(n0.hU,{alt:h.previous,onClick:Z,children:(0,E.tZ)(o8.Z,{})}),(0,E.BX)(tq.xv,{color:"dimmest",variant:"small",multiline:!1,children:[y+1,"/",g.length]}),(0,E.tZ)(n0.hU,{alt:h.next,onClick:w,children:(0,E.tZ)(o3.Z,{})})]}):null,(0,E.BX)(ea.G,{css:am.inlineThreadHeaderActions,children:[r||a||c?null:(0,E.tZ)(iW.zx,{onClick:void 0===d?function(){}:d,text:"Resolve",size:"small",iconLeft:(0,E.tZ)(o6.Z,{})}),!r&&a?(0,E.tZ)(o1.D,{text:"Resolved",colorway:"positive"}):null,(0,E.tZ)(iW.zx,{onClick:void 0===u?function(){}:u,text:h.dismiss,size:"small",iconLeft:(0,E.tZ)(as.Z,{})})]})]})},ag=function(e){var t,n,r=e.threadId,i=e.isResolved,o=e.onMessageChange,a=e.onMessageSubmit,l=e.isPlaceholder,c=e.onRequestClose,s=void 0===c?function(){}:c,u=(0,S._)((0,et.useState)(""),2),d=u[0],f=u[1],h=(0,S._)((0,et.useState)(rd().v4()),2),p=h[0],m=h[1],v=(0,ai.Z)().ref,g=(0,et.useRef)(null),y={input:{placeholder:function(){return l?"Start a new thread… (Markdown is supported)":i?"Reply to re-open thread…":"Reply… (Markdown is supported)"}},submit:"Post reply",cancel:"Cancel"},b=function(){var e=d.trim();0!==e.length&&(a({message:e,messageId:p}),f(""),m(rd().v4()))},w=(0,ao.d)(),Z=(0,an.Z)(),x=(0,S._)((0,aa.Z)({"@":(t=(0,e_._)(function(e){var t,n;return(0,eS.Jh)(this,function(r){return t=Z.filter(function(e){return e.id!==w}),e&&(n=e.toLowerCase(),t=t.filter(function(e){return e.username.toLowerCase().startsWith(n)})),[2,t.slice(0,5).map(function(e){return{icon:(0,E.tZ)(ar.Z,{username:e.username,fullName:e.fullName,url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}})]})}),function(e){return t.apply(this,arguments)})}),2),k=x[0].suggestions,T=x[1],R=(0,af.Kb)({items:(null==k?void 0:k.results)||[],defaultHighlightedIndex:0,isOpen:(null!==(n=null==k?void 0:k.results.length)&&void 0!==n?n:0)>0,onSelectedItemChange:function(e){var t=e.selectedItem;if(k&&t){var n=k.applySuggestion({targetValue:d,suggestionValue:t.value}),r=n.fullValue,i=n.cursorIndex;f(r),setTimeout(function(){g.current&&(g.current.setSelectionRange(i,i),g.current.focus())})}}}),D=R.isOpen,I=R.getInputProps,B=R.getMenuProps,G=R.getItemProps,A=R.highlightedIndex,P=R.getComboboxProps;return(0,et.useEffect)(function(){var e="threads/drafts/".concat(r),t=al.Z.get(e,"string");t&&f(t);var n=g.current;return function(){if(n){var t=n.value;if(0===t.length){al.Z.remove(e);return}al.Z.set(e,t)}}},[r]),(0,E.tZ)(i8.Tg,{background:"root",css:am.inlineThreadInputContainer,children:(0,E.BX)("div",(0,_._)((0,C._)({css:am.inlineThreadInput},P()),{children:[l?(0,E.tZ)(iW.zx,{text:y.cancel,onClick:s}):null,(0,E.BX)("div",{css:[{width:"100%"}],children:[(0,E.tZ)(iH.B,(0,C._)({},I({ref:function(e){g.current=e,v(e),T(e)},value:d,onChange:function(e){var t=e.target.value;f(t),o({message:t,messageId:p})},onKeyDown:function(e){!D&&(e.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||(e.stopPropagation(),e.preventDefault(),b()))},onKeyUp:function(e){"Escape"===e.key&&(e.stopPropagation(),e.preventDefault(),s())},placeholder:y.input.placeholder(),css:[es.l0.height(32),es.l0.align.start,{resize:"vertical",width:"100%",flexGrow:1,caretColor:"auto"}],autoFocus:!0}))),(0,E.tZ)("div",{css:{position:"relative"},children:(0,E.tZ)("div",(0,_._)((0,C._)({},B({css:[{position:"absolute",top:es.TV.space2,overflow:"hidden"},es.l0.borderRadius(16),es.l0.shadow(1),es.l0.backgroundColor.backgroundDefault]})),{children:null==k?void 0:k.results.map(function(e,t){return(0,o0.az)("div",(0,_._)((0,C._)({},G({item:e,index:t})),{key:e.value}),(0,E.BX)(ad.Ug,{spacing:2,css:[A===t?es.l0.backgroundColor.backgroundHighest:null,es.l0.p(8)],children:[e.icon,(0,E.tZ)("div",{children:e.value})]}))})}))})]}),(0,E.tZ)(ea.G,{css:[es.l0.pt(4)],children:(0,E.tZ)(n0.hU,{alt:y.submit,tooltipDelay:"long",onClick:b,children:(0,E.tZ)(o5.Z,{})})})]}))})},ay=function(e){var t,n,r=e.threadId,i=e.isCreating,o=e.isResolved,a=void 0!==o&&o,l=e.view,c=e.filePath,s=e.openThreadsInbox,u=(0,o2.Z)(r,l,c),d=u.thread,f=u.loading,h=u.isPlaceholder,p=u.getLatestAnchor,m=u.updateThread,v=u.changeThreadMessage,g=u.finalizeThreadMessage,y=function(){null==l||l.dispatch({effects:[ap.YM.of(null)]})},b=(0,N.Gn)("fontSize").preferences.fontSize,w=(0,et.useRef)(null);(0,at.Z)(d);var Z=p(),x=l&&!f&&"number"==typeof(null==Z?void 0:Z.indexEnd)&&Z.indexEnd<=l.state.doc.length?null===(n=l.coordsAtPos(Z.indexEnd))||void 0===n?void 0:n.left:null,C=(null==l?void 0:l.dom.getBoundingClientRect().left)||null,_=b;switch(b){case 10:_=13;break;case 14:_=19;break;case 18:_=25;break;case 24:_=34}var S=(0,o$.Z)().showConfirm,T=(0,oF.Z)(),R=(0,et.useRef)(null),D=function(){R.current&&(R.current.scrollTop=R.current.scrollHeight)};(0,et.useEffect)(function(){setTimeout(function(){D()},0)},[null==d?void 0:d.messages]);var I=(0,et.useMemo)(function(){return(null==d?void 0:d.messages)?(0,k._)(d.messages).sort(function(e,t){return Date.parse(e.timeCreated)-Date.parse(t.timeCreated)}):[]},[null==d?void 0:d.messages]),B=(t=(0,et.useRef)(0),(0,oE.Z)(function(e){var n=e.height;n!==t.current&&(null==l||l.requestMeasure()),t.current=n}));return(0,E.tZ)("div",{css:[es.l0.width("100%"),es.l0.backgroundColor.backgroundRoot],children:(0,E.BX)(ea.G,{innerRef:(0,ac.l)(w,B),css:[es.l0.font.default,{borderTopWidth:es.TV.borderWidthDefault,borderBottomWidth:es.TV.borderWidthDefault,borderStyle:"solid",borderColor:es.TV.accentPrimaryDefault}],children:[h||f?null:(0,E.tZ)(av,{isCreating:i,isResolved:a,isLoading:f,threadId:r,filePath:c,caretPosition:x&&C?x-C-6:null,isPlaceholder:h,onRequestClose:y,onResolveThread:function(){m({changes:{isResolved:!0}}),S("Thread resolved. You can reopen it from the inbox.")},openThreadsInbox:s}),f&&!h?(0,E.tZ)(ea.G,{style:{height:_},children:(0,E.tZ)(o4.Z,{viewBox:"0 0 400 21",backgroundColor:es.TV.accentPrimaryDimmest,backgroundOpacity:0,foregroundColor:es.TV.accentPrimaryDimmest,foregroundOpacity:.2,speed:1,children:(0,E.tZ)("rect",{x:"0",y:"0",width:"100%",height:"100%"})})}):(0,E.BX)(E.HY,{children:[!i&&I.length>0?(0,E.tZ)("div",{css:am.commentContainer,style:{fontSize:b},ref:R,children:I.map(function(e){return(0,E.tZ)(o9.Z,{thread:d,message:e},e.id)})}):null,(0,E.tZ)(ag,{threadId:r,isPlaceholder:h,isResolved:a,onRequestClose:y,onMessageChange:v,onMessageSubmit:function(e){g(e),(0,t4.j)(ah.U3.MESSAGE_SENT,{replId:T,source:"threads",newThread:h})}})]})]})})},ab=function(e){"use strict";(0,e5._)(n,e);var t=(0,e7._)(n);function n(){return(0,eA._)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.compare=function(e){return this==e||this.constructor==e.constructor&&this.eq(e)},r.eq=function(e){return!1},r.destroy=function(e){},n}(eP.uU);ab.prototype.elementClass="",ab.prototype.toDOM=void 0,ab.prototype.mapMode=eP.gc.TrackBefore,ab.prototype.startSide=ab.prototype.endSide=-1,ab.prototype.point=!0;var aw=eP.r$.define(),aZ=eP.r$.define(),ax=eP.r$.define({combine:function(e){return e.some(function(e){return e})}}),aC=ek.lg.fromClass(function(){"use strict";function e(t){(0,eA._)(this,e),this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-right-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.width="0px",this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=t.state.facet(aZ).map(function(e){return new aE(t,e)});var n=!0,r=!1,i=void 0;try{for(var o,a=this.gutters[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;this.dom.appendChild(l.dom)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}this.fixed=!t.state.facet(ax),this.fixed&&(this.dom.style.position="sticky",this.dom.style.right="0"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM.nextSibling)}var t=e.prototype;return t.update=function(e){if(e.viewportChanged){var t=this.view.contentDOM.nextElementSibling;t&&t!==this.dom&&t.classList.contains("cm-minimap-gutter")&&e.view.scrollDOM.insertBefore(this.dom,e.view.contentDOM.nextSibling)}if(this.updateGutters(e)){var n=this.prevViewport,r=e.view.viewport,i=Math.min(n.to,r.to)-Math.max(n.from,r.from);this.syncGutters(i<(r.to-r.from)*.8)}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(ax)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport},t.syncGutters=function(e){var t=this,n=this.dom.nextSibling;e&&this.dom.remove();var r=eP.Xs.iter(this.view.state.facet(aw),this.view.viewport.from),i=[],o=this.gutters.map(function(e){return new ak(e,t.view.viewport,-t.view.documentPadding.top)}),a=!0,l=!1,c=void 0;try{for(var s,u=this.view.viewportLineBlocks[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value,f=void 0;if(Array.isArray(d.type)){var h=!0,p=!1,m=void 0;try{for(var v,g=d.type[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var y=v.value;if(y.type==ek.kH.Text){f=y;break}}}catch(e){p=!0,m=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw m}}}else f=d.type==ek.kH.Text?d:void 0;if(f){i.length&&(i=[]),aS(r,i,d.from);var b=!0,w=!1,Z=void 0;try{for(var x,C=o[Symbol.iterator]();!(b=(x=C.next()).done);b=!0)x.value.line(this.view,f,i)}catch(e){w=!0,Z=e}finally{try{b||null==C.return||C.return()}finally{if(w)throw Z}}}}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}var _=!0,S=!1,k=void 0;try{for(var E,T=o[Symbol.iterator]();!(_=(E=T.next()).done);_=!0)E.value.finish()}catch(e){S=!0,k=e}finally{try{_||null==T.return||T.return()}finally{if(S)throw k}}e&&this.view.scrollDOM.insertBefore(this.dom,n)},t.updateGutters=function(e){var t=e.startState.facet(aZ),n=e.state.facet(aZ),r=e.docChanged||e.heightChanged||e.viewportChanged||!eP.Xs.eq(e.startState.facet(aw),e.state.facet(aw),e.view.viewport.from,e.view.viewport.to);if(t==n){var i=!0,o=!1,a=void 0;try{for(var l,c=this.gutters[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)l.value.update(e)&&(r=!0)}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}else{r=!0;var s=[],u=!0,d=!1,f=void 0;try{for(var h,p=n[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var m=h.value,v=t.indexOf(m);v<0?s.push(new aE(this.view,m)):(this.gutters[v].update(e),s.push(this.gutters[v]))}}catch(e){d=!0,f=e}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}var g=!0,y=!1,b=void 0;try{for(var w,Z=this.gutters[Symbol.iterator]();!(g=(w=Z.next()).done);g=!0){var x=w.value;x.dom.remove(),0>s.indexOf(x)&&x.destroy()}}catch(e){y=!0,b=e}finally{try{g||null==Z.return||Z.return()}finally{if(y)throw b}}var C=!0,_=!1,S=void 0;try{for(var k,E=s[Symbol.iterator]();!(C=(k=E.next()).done);C=!0){var T=k.value;this.dom.appendChild(T.dom)}}catch(e){_=!0,S=e}finally{try{C||null==E.return||E.return()}finally{if(_)throw S}}this.gutters=s}return r},t.destroy=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.gutters[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)r.value.destroy()}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.dom.remove()},e}(),{provide:function(e){return ek.tk.scrollMargins.of(function(t){var n=t.plugin(e);return n&&0!=n.gutters.length&&n.fixed?t.textDirection==ek.Nm.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}:null})}});function a_(e){return Array.isArray(e)?e:[e]}function aS(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}var ak=function(){"use strict";function e(t,n,r){(0,eA._)(this,e),this.gutter=t,this.height=r,this.localMarkers=[],this.i=0,this.cursor=eP.Xs.iter(t.markers,n.from)}var t=e.prototype;return t.line=function(e,t,n){this.localMarkers.length&&(this.localMarkers=[]),aS(this.cursor,this.localMarkers,t.from);var r=n.length?this.localMarkers.concat(n):this.localMarkers,i=this.gutter.config.lineMarker(e,t,r);i&&r.unshift(i);var o=this.gutter;if(0!=r.length||o.config.renderEmptyElements){var a=t.top-this.height;if(this.i==o.elements.length){var l=new aT(e,t.height,a,r);o.elements.push(l),o.dom.appendChild(l.dom)}else o.elements[this.i].update(e,t.height,a,r);this.height=t.bottom,this.i++}},t.finish=function(){for(var e=this.gutter;e.elements.length>this.i;){var t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}},e}(),aE=function(){"use strict";function e(t,n){var r=this,i=function(e){r.dom.addEventListener(e,function(r){var i=t.lineBlockAtHeight(r.clientY-t.documentTop);n.domEventHandlers[e](t,i,r)&&r.preventDefault()})};for(var o in(0,eA._)(this,e),this.view=t,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:""),n.domEventHandlers)i(o);this.markers=a_(n.markers(t)),n.initialSpacer&&(this.spacer=new aT(t,0,0,[n.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}var t=e.prototype;return t.update=function(e){var t=this.markers;if(this.markers=a_(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){var n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}var r=e.view.viewport;return!eP.Xs.eq(this.markers,t,r.from,r.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)},t.destroy=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.elements[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)r.value.destroy()}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},e}(),aT=function(){"use strict";function e(t,n,r,i){(0,eA._)(this,e),this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,n,r,i)}var t=e.prototype;return t.update=function(e,t,n,r){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),!function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}(this.markers,r)&&this.setMarkers(e,r)},t.setMarkers=function(e,t){for(var n="cm-gutterElement",r=this.dom.firstChild,i=0,o=0;;){var a=o,l=i<t.length?t[i++]:null,c=!1;if(l){var s=l.elementClass;s&&(n+=" "+s);for(var u=o;u<this.markers.length;u++)if(this.markers[u].compare(l)){a=u,c=!0;break}}else a=this.markers.length;for(;o<a;){var d=this.markers[o++];if(d.toDOM){d.destroy(r);var f=r.nextSibling;r.remove(),r=f}}if(!l)break;l.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),c&&o++}this.dom.className=n,this.markers=t},t.destroy=function(){this.setMarkers(null,[])},e}(),aR=eP.r$.define(),aD=eP.r$.define({combine:function(e){return(0,eP.BO)(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers:function(e,t){var n=Object.assign({},e);for(var r in t)!function(e){var r=n[e],i=t[e];n[e]=r?function(e,t,n){return r(e,t,n)||i(e,t,n)}:i}(r);return n}})}}),aI=function(e){"use strict";(0,e5._)(n,e);var t=(0,e7._)(n);function n(e){var r;return(0,eA._)(this,n),(r=t.call(this)).number=e,r}var r=n.prototype;return r.eq=function(e){return this.number==e.number},r.toDOM=function(){return document.createTextNode(this.number)},n}(ab);function aB(e,t){return e.state.facet(aD).formatNumber(t,e.state)}function aG(e){for(var t=9;t<e;)t=10*t+9;return t}aZ.compute([aD],function(e){return{class:"cm-lineNumbers",renderEmptyElements:!1,markers:function(e){return e.state.facet(aR)},lineMarker:function(e,t,n){return n.some(function(e){return e.toDOM})?null:new aI(aB(e,e.state.doc.lineAt(t.from).number))},lineMarkerChange:function(e){return e.startState.facet(aD)!=e.state.facet(aD)},initialSpacer:function(e){return new aI(aB(e,aG(e.state.doc.lines)))},updateSpacer:function(e,t){var n=aB(t.view,aG(t.view.state.doc.lines));return n==e.number?e:new aI(n)},domEventHandlers:e.facet(aD).domEventHandlers}});var aA=new(function(e){"use strict";(0,e5._)(n,e);var t=(0,e7._)(n);function n(){var e;return(0,eA._)(this,n),e=t.apply(this,arguments),e.elementClass="cm-activeLineGutter",e}return n}(ab));aw.compute(["selection"],function(e){var t=[],n=-1,r=!0,i=!1,o=void 0;try{for(var a,l=e.selection.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(c.empty){var s=e.doc.lineAt(c.head).from;s>n&&(n=s,t.push(aA.range(s)))}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return eP.Xs.of(t)});var aP=n(1731),aL=n(91181),aN=function(e){var t=e.isOpen,n=e.threadId,r=(0,S._)((0,et.useState)(!1),2),i=r[0],o=r[1],a=(0,aL.GD)({variables:{id:n},skip:"initial-spacer"===n});(0,et.useEffect)(function(){if(a&&!a.error){var e,t=null===(e=a.data)||void 0===e?void 0:e.thread;t&&o((null==t?void 0:t.__typename)==="AnnotationAnchor"&&(null==t?void 0:t.messages.some(function(e){return!e.seen})))}},[a]);var l={button:{alt:{default:"View threads",close:"Dismiss thread"}}};return(0,E.tZ)(n0.hU,{alt:t?l.button.alt.close:l.button.alt.default,size:24,className:"thread-indicator",css:[es.l0.width(20),es.l0.height(20),es.l0.transition.snappy,es.l0.cursor.pointer,es.l0.display.flex,es.l0.borderRadius(8),es.l0.position.relative,es.l0.overflow("visible"),t?es.l0.color.accentPrimaryStrongest:es.l0.color.foregroundDimmest,{borderWidth:es.TV.borderWidthDefault,borderStyle:"solid",borderColor:t?es.TV.accentPrimaryDefault:"transparent",backgroundColor:t?es.TV.accentPrimaryDimmer:es.TV.backgroundHigher,outline:0},{":hover":{borderColor:t?es.TV.accentPrimaryStronger:es.TV.outlineDimmer,color:t?es.TV.accentPrimaryStrongest:es.TV.foregroundDimmer,background:t?es.TV.accentPrimaryDefault+" !important":es.TV.backgroundHighest},svg:{width:12,height:12}}],children:(0,E.BX)(E.HY,{children:[i?(0,E.tZ)("div",{css:[es.l0.width(8),es.l0.height(8),es.l0.backgroundColor.redStronger,es.l0.position.absolute,es.l0.top(-1),es.l0.left(-1),es.l0.borderRadius("full")]}):null,(0,E.tZ)(aP.Z,{})]})})};function aO(e,t,n){var r=t.clientWidth,i=n.clientWidth;e.style.maxWidth="".concat(r,"px"),e.style.position="sticky",e.style.zIndex="201",e.style.marginLeft="-".concat(i,"px")}var aU=function(e){"use strict";(0,e5._)(n,e);var t=(0,e7._)(n);function n(e,r){var i;return(0,eA._)(this,n),(i=t.call(this)).id=e,i.filePath=r,i}var r=n.prototype;return r.eq=function(e){return e.id===this.id},r.toDOM=function(e){var t=(0,tz.V)((0,E.tZ)(ay,{threadId:this.id,view:e,filePath:this.filePath,openThreadsInbox:function(){return(0,re.ZM)(e.state,{pane:{type:"threadInbox"}})}}));t.className="cm-thread-portal-widget";var n=e.dom.querySelector(".cm-scroller"),r=e.dom.querySelector(".cm-gutters");return n&&r&&aO(t,n,r),t},r.ignoreEvent=function(){return!0},n}(ek.l9),aM=function(e){"use strict";(0,e5._)(n,e);var t=(0,e7._)(n);function n(e,r){var i;return(0,eA._)(this,n),(i=t.call(this)).id=e,i.active=r,i}var r=n.prototype;return r.toDOM=function(e){var t=this,n=(0,tz.V)((0,E.tZ)(aN,{isOpen:this.active,threadId:this.id}));return n.className="cm-thread-indicator",n.style.display="inline",n.style.cursor="pointer",n.setAttribute("aria-hidden","true"),n.onclick=function(n){n.stopPropagation(),n.preventDefault(),e.dispatch({effects:[ap.YM.of(e.state.field(ap.PQ)===t.id?null:t.id)]})},n},r.eq=function(e){return e.id===this.id&&e.active===this.active},n}(ab),aX=[(i=[aC],r&&!1===r.fixed&&i.push(ax.of(!0)),i),aZ.of((0,C._)({},{class:"",renderEmptyElements:!1,elementStyle:"",markers:function(){return eP.Xs.empty},lineMarker:function(){return null},lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},{class:"cm-thread-indicator-gutter",markers:function(e){var t=e.state.field(ap.OQ),n=e.state.field(ap.PQ);return eP.Xs.of(Object.values(t).filter(function(e){return e.indexEnd!==e.indexStart}).map(function(t){var r=e.state.doc.lineAt(Math.min(t.indexStart,t.indexEnd)).from;return new aM(t.id,t.id===n).range(r)}),!0)},initialSpacer:function(){return new aM("initial-spacer",!1)}}))],aF=function(e){var t=parseInt(e.substring(1),16);return[t>>16&255,t>>8&255,255&t]},aW=n(55460),aH=function(e,t,n,r,i){if(t===n)return null;var o=(0,S._)(r,2),a=o[0],l=o[1];return ek.p.mark({class:"replit-thread-highlight cm-thread-".concat(e),attributes:{style:"background-color: ".concat(i?l:a)},id:e}).range(t,n)},aV=new eE.j(function(e,t){return e?[eP.Wl.highest(aX),ap.cR,ap.OQ,ap.ZS,ap.PQ,ek.tk.decorations.compute([ap.OQ,ap.ZS,ap.PQ],function(e){var n=e.field(ap.OQ),r=e.field(ap.ZS),i=e.field(ap.PQ),o=r||Object.values(n).find(function(e){return e.id===i});return ek.p.set((0,k._)(Object.values(n)).map(function(e){var n=o&&e.id===o.id;return aH(e.id,e.indexStart,e.indexEnd,t,n)}).filter(function(t){return null!==t&&t.from!==t.to&&t.from<=e.doc.length&&t.to<=e.doc.length}),!0)}),ek.tk.decorations.compute([ap.OQ,ap.ZS,ap.PQ,tV.Yp],function(e){var t=e.field(ap.OQ),n=e.field(ap.ZS),r=e.field(ap.PQ),i=e.facet(tV.Yp);if(void 0===i)return ek.p.none;var o=(0,k._)(Object.values(t)).concat((0,k._)(n?[n]:[])).filter(Boolean).find(function(e){return e.id===r});return o?ek.p.set([ek.p.widget({widget:new aU(o.id,i),block:!0,side:1}).range(o.indexEnd)],!0):ek.p.none}),ek.tk.updateListener.of(function(e){(0,rn.j)(e,rU.R,function(){var t=(0,k._)(e.view.dom.querySelectorAll(".cm-thread-portal-widget")),n=e.view.dom.querySelector(".cm-scroller"),r=e.view.dom.querySelector(".cm-gutters");if(t.length&&n&&r){var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;aO(s,n,r)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}})}),ek.tk.updateListener.of(function(e){(0,rn.j)(e,ap.eR,function(t){var n=t.value,r=e.state.field(ap.OQ)[n];r&&e.view.dispatch({selection:{anchor:r.indexStart,head:r.indexStart},effects:[ek.tk.scrollIntoView(r.indexStart,{x:"center",y:"center"})]})})})]:null}),az=n(99189),aj=n(26294),aq=n(18317);function aJ(e){return{filePath:e,text:"",selections:[],hasFocus:!1}}function aY(e,t){var n;return null==t?aJ(e):{filePath:e,text:null!==(n=t.state.doc.toString())&&void 0!==n?n:"",selections:t.state.selection.ranges.map(function(e){var t=e.from;return{location:t,length:e.to-t}}),hasFocus:t.hasFocus}}function a$(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rO()(),n={messageType:aq.cF.TEXT_EDITOR_STATE,filePath:e.textEditorState.filePath,text:e.textEditorState.text,selections:e.textEditorState.selections,hasFocus:e.textEditorState.hasFocus,hasGhostwriterSuggestion:e.hasGhostwriterSuggestion,revisionId:e.revisionId};(0,az.bG)(n,t)}function aK(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rO()(),n={messageType:aq.cF.TEXT_EDITOR_CLOSED,filePath:e};(0,az.bG)(n,t)}function aQ(e,t,n,r,i){return r===e&&r===n.textEditorState.filePath&&t===n.textEditorState.filePath&&i===n.revisionId}function a0(e){var t=e.map(function(e){return eP.jT.range(e.location,e.location+e.length)});return eP.jT.create(t)}function a1(e,t,n,r,i){var o=i.payload;if((0,aq.Se)(o))return function(e,t,n,r,i){if(!aQ(e,t,r,i.filePath,i.revisionId))return!1;var o=a0(i.selections);return n.dispatch({selection:o,scrollIntoView:!0}),!0}(e,t,n,r,o);if((0,aq.m7)(o))return function(e,t,n,r,i){if(!aQ(e,t,r,i.filePath,i.revisionId))return!1;var o=a0(i.selections);return n.dispatch({changes:{from:0,to:n.state.doc.length,insert:i.text},selection:o,scrollIntoView:!0}),!0}(e,t,n,r,o);if((0,aq.ac)(o))return function(e,t,n,r,i){if(!aQ(e,t,r,i.filePath,i.revisionId))return!1;var o=i.insertionRange,a=a0(i.selections);return n.dispatch({changes:{from:o.location,to:o.location+o.length,insert:i.text},selection:a,scrollIntoView:!0}),!0}(e,t,n,r,o);if((0,aq.fz)(o))return!!aQ(e,t,r,o.filePath,o.revisionId)&&(n.dispatch(n.state.replaceSelection(o.text)),!0);if((0,aq.T$)(o))aQ(e,t,r,o.filePath,o.revisionId)&&(0,iL.l)({filePath:e,view:n,clipboardText:o.text});else if((0,aq.aB)(o))switch(o.action){case aq.b9.REQUEST_BLUR:return function(e,t,n,r,i,o){if(!aQ(e,t,r,i,o))return!1;n.contentDOM.blur()}(e,t,n,r,o.filePath,o.revisionId);case aq.b9.REQUEST_UNDO:return!!aQ(e,t,r,o.filePath,o.revisionId)&&((0,er.Yw)(n),!0);case aq.b9.REQUEST_REDO:return!!aQ(e,t,r,o.filePath,o.revisionId)&&((0,er.KX)(n),!0);case aq.b9.REQUEST_INDENT_SELECTION:return!!aQ(e,t,r,o.filePath,o.revisionId)&&(er.at(n),!0);case aq.b9.REQUEST_DEDENT_SELECTION:return!!aQ(e,t,r,o.filePath,o.revisionId)&&(er.xi(n),!0);case aq.b9.REQUEST_TOGGLE_COMMENT:return!!aQ(e,t,r,o.filePath,o.revisionId)&&(er.O8(n),!0);case aq.b9.REQUEST_ACCEPT_GHOSTWRITER_SUGGESTION:return!!aQ(e,t,r,o.filePath,o.revisionId)&&(0,aj.o)(n);case aq.b9.REQUEST_FOCUS:return n.focus(),!0;default:throw Error("Unknown BridgeTextEditorAction.")}else throw Error("Invalid payload.")}var a2=n(96955),a4=n(36136),a3=new eE.j(function(e){var t=ek.tk.domEventHandlers({scroll:ed()(function(t,n){var r=0,i=0,o=!0,a=!1,l=void 0;try{for(var c,s=n.visibleRanges[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;r=Math.min(r,u.from),i=Math.max(r,u.to)}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}e("user:scroll",{visibleLines:{from:n.state.doc.lineAt(r).number,to:n.state.doc.lineAt(i).number}})},250)}),n=ed()(function(t,n,r){e("user:selection",{inputMethod:r,from:t,to:n})},250);return[t,ek.tk.updateListener.of(function(t){var r=t.transactions,i=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.isUserEvent("input.paste")&&e("user:paste",{}),s.isUserEvent("input.drop")&&e("user:new-drop",{}),s.isUserEvent("move.drop")&&e("user:move-drop",{}),s.isUserEvent("delete.cut")&&e("user:cut",{}),s.isUserEvent("input.complete")&&e("user:complete",{}),s.isUserEvent("select")&&n(s.newSelection.main.from,s.newSelection.main.to,s.isUserEvent("select.pointer")?"pointer":"keyboard"),s.isUserEvent("undo")&&e("user:undo",{}),s.isUserEvent("redo")&&e("user:redo",{})}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}})]}),a8=n(7954),a6=n(77454);function a5(e){var t=e.selection.main.head,n=e.doc.lineAt(t);return{offset:t,line:n.number,column:t-n.from+1}}var a7=new eE.j(function(e){return ek.tk.focusChangeEffect.of(function(t,n){var r=t.facet(tV.Yp);return r&&e(r,n?{type:"focus",position:a5(t)}:{type:"blur"}),null})}),a9=new eE.j(function(e){return ek.tk.updateListener.of(function(t){if(t.selectionSet){var n=t.state.facet(tV.Yp);n&&e(n,{type:"update",hasFocus:t.view.hasFocus,position:a5(t.state)})}})}),le=n(43471),lt=n(59500),ln=n(82646),lr=n(40042),li=n(19805),lo=n(25978),la=n(6191),ll=n(27025),lc=n(32774),ls=n(73590),lu=n(44707),ld=n(27894),lf=n(44906),lh=ek.tk.theme({"& .cm-scrollbar-gutter":{backgroundColor:t3.TV.backgroundDefault},"& .cm-scrollbar-inner":{borderColor:t3.TV.backgroundHigher}}),lp=new eE.j(function(e,t){var n;return e?null:[lh,r5.of({create:function(){return{dom:document.createElement("div")}}}),rX.compute(["doc",tT],function(e){var n=e.field(tT,!1);if(!n)return null;for(var r=[],i=1;i<=e.doc.lines;i++)switch(n.getLineChangeType(i)){case tS.dQ.COVERED:r.push({number:i,color:t.values.global.greenDefault,zIndex:1});break;case tS.dQ.MODIFIED:r.push({number:i,color:t.values.global.blueDefault,zIndex:0})}return r}),rz,(n=({color:t.values.global.foregroundDefault}).color,rF.compute(["doc","selection"],function(e){return e.selection.ranges.map(function(t){var r=t.head;return{color:n,number:e.doc.lineAt(r).number,zIndex:1/0}})}))]}),lm=n(69880),lv=n(59363),lg=n(21262),ly=n(71440),lb=n(58995);function lw(){var e=(0,lg._)(["\n  query GetReplCodeRepairAuthorization($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          useCodeRepair {\n            isAuthorized\n            code\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return lw=function(){return e},e}var lZ={},lx=(0,ly.Ps)(lw()),lC=new eE.j(function(){return(0,ek.CT)()}),l_=function(e){var t;return(0,lm.Z)((t=(0,e_._)(function(t){var n;return(0,eS.Jh)(this,function(r){switch(r.label){case 0:return[4,t.status()];case 1:if((n=r.sent()).error)return[2,{error:n.error,isUnmerged:null}];if(n.changes.find(function(t){return t.path===e&&(t.type.index===lf.h.UNMERGED||t.type.worktree===lf.h.UNMERGED)}))return[2,{error:null,isUnmerged:!0}];return[2,{error:null,isUnmerged:!1}]}})}),function(e){return t.apply(this,arguments)}),[e])||{error:null,isUnmerged:null}};function lS(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y,b,w,Z,x,T,R,D,I,B,M,X,F,W,H,V,z,j,q,J,Q,ee,er,ei,eo,ea,el,ec,es,eu,ep,em,ev,eg,ey,eb,ew,eZ,ex,eC,eE,eI,eB,eN,eO,eU,eM,eX,eF,eW,eH,eV,ez,eq,eJ,eQ,e2,e4,e5,e7,e9,te,tt,tn,tr,ti,to,ta,tl,tc,ts,tu=e.filePath,td=e.autoFocus,tf=e.isHidden,th=e.deeplink,tp=e.onDeeplinkUpdated,tm=e.performPaneOperation,tv=(0,eD.Z)(),tg=tv.fs,ty=tv.debuggest,tb=tv.presence,tw=tv.runner,tZ=(0,N.Gn)("formatOnSave","rulers","minimapDisplay","showLeadingWhitespace","showEnclosedWhitespace","showTrailingWhitespace","showSelectedWhitespace").preferences,tx=(0,ob.Z)(),tC=tx.ref,t_=tx.view,tS=(0,et.useCallback)(function(e){return tm({operation:"open",pane:e,secondary:!0})},[tm]);(0,ef.VD)(t_);var tk=(0,eh.FS)(),tE=iE.use(!!(null==tk?void 0:tk.match(/Chrome/i))&&!!(null==tk?void 0:tk.match(/Android/i))),tT="/replEnvironmentDesktop"===$().pathname,tR=(t={variables:{replId:(0,oF.Z)()}},n=(0,C._)({},lZ,t),lb.a(lx,n)).data,tD=(null==tR?void 0:null===(ts=tR.repl)||void 0===ts?void 0:ts.__typename)==="Repl"&&tR.repl.authorizations.useCodeRepair.isAuthorized,tI=(0,et.useContext)(le.B3),tB=(0,iT.jT)(),tG=(i=(r={path:tu,isHidden:tf}).path,o=r.isHidden,a=(0,a6.NH)(),l=a7.use(a),c=a9.use(a),(0,et.useEffect)(function(){a(i,{type:o?"hidden":"unhidden"})},[o,a,i]),(0,et.useEffect)(function(){return function(){a(i,{type:"unmount"})}},[a,i]),(0,et.useMemo)(function(){return[l,c]},[l,c])),tA=(d=(s={view:t_,presence:tb,fs:tg,filePath:tu}).view,f=s.presence,h=s.fs,p=s.filePath,m=iZ.use(p,h,f),v=iC.use(f),g=(0,iR.Z)().trackTimeToLoadFileEnd,y=(0,iT.uV)(),b=(0,iT.Id)(),w=(0,iT.I7)(),Z=(0,et.useMemo)(function(){return{trackTimeToLoadFileEnd:g,throwBsod:y,setBsodFilePathVersion:b,deleteBsodFilePathVersion:w}},[w,b,y,g]),x=iP.use(p,h,Z),T=null===(u=(0,L.IK)(d,rL.o))||void 0===u||u,R=(0,et.useMemo)(function(){return[x,m,v]},[x,m,v]),(0,et.useMemo)(function(){return{isLoading:T,extensions:R}},[T,R])),tP=tA.isLoading,tL=tA.extensions;I=(D={view:t_,autoFocus:td,isLoading:tP}).view,B=D.isLoading,M=D.autoFocus,(0,et.useEffect)(function(){M&&I&&!B&&I.focus()},[I,B,M]);var tj=function(){var e=(0,oF.Z)(),t=(0,et.useContext)(oW.d);if(!t)throw Error("Expected codemirror state to be in codemirror state context");return oq.use(e,t)}(),tq=(F=(X={filePath:tu,isLoading:tP}).filePath,W=X.isLoading,H=(0,eD.Z)().fs,V=(0,e0.Z)(F),z=(0,N.Gn)("acceptSuggestionOnCommitCharacter","codeIntelligence","codeActionsOnSave","semanticTokens").preferences,j=(0,tN.P5)({controlName:"flag-lsp-semantic-tokens",logFlagToAnalytics:!1}),q=(0,tN.P5)({controlName:"flag-draft-buffers",logFlagToAnalytics:!1}),J=W||!z.codeIntelligence||!V.find(function(e){return e.isSupportedFile(F)}),Q=(0,et.useMemo)(function(){return new eL.Rh(J?[]:function(e,t,n,r){if(!t.length)return[];var i,o,a,l,c,s,u,d=[(o=(i={lspClients:t,path:n}).lspClients,a=i.path,ek.lg.define(function(e){var t,n,r,i,l,c;return n=(t={lspClients:o,path:a,view:e}).lspClients,r=t.path,i=t.view,l=rd().v4(),c=function(e){var t,n=rf.get(e.clientId);return(null!==(t=null==n?void 0:n.get(r))&&void 0!==t?t:[])[0]===l},function(){var e=!0,t=!1,o=void 0;try{for(var a,c=n[Symbol.iterator]();!(e=(a=c.next()).done);e=!0){var s,u=a.value,d=rf.get(u.clientId),f=null!==(s=null==d?void 0:d.get(r))&&void 0!==s?s:[];d?d.set(r,(0,k._)(f).concat([l])):rf.set(u.clientId,new Map([[r,[l]]])),u.notify.didOpen(r,i.state.doc.toString())}}catch(e){t=!0,o=e}finally{try{e||null==c.return||c.return()}finally{if(t)throw o}}}(),{id:l,destroy:function(){var e=!0,t=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var c,s=o.value,u=rf.get(s.clientId),d=(null!==(c=null==u?void 0:u.get(r))&&void 0!==c?c:[]).filter(function(e){return e!==l});s.getServerState()===rs.a.INITIALIZED&&s.isOpen(r)&&s.notify.didClose(r),0===d.length?null==u||u.delete(r):null==u||u.set(r,d)}}catch(e){t=!0,i=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw i}}},update:function(e){if(e.docChanged){var t=!0,i=!1,o=void 0;try{for(var a,l,s=n[Symbol.iterator]();!(t=(l=s.next()).done);t=!0){var u,d=l.value;if(c(d)){var f=null===(u=d.getServerCapabilities())||void 0===u?void 0:u.textDocumentSync;if(f!==t8.TextDocumentSyncKind.None&&d.isOpen(r)){if(f===t8.TextDocumentSyncKind.Full){d.notify.didChange(r,[{text:e.view.state.doc.toString()}]);continue}a||(a=function(e,t){var n=[],r=t;return e.iterChanges(function(e,t,i,o,a){var l=a.sliceString(0),c=t-e,s=c+i;n.push({range:{start:(0,eY.sg)(r,i),end:(0,eY.sg)(r,s)},rangeLength:c,text:l}),r=r.replace(i,s,a)}),n}(e.changes,e.startState.doc)),d.notify.didChange(r,a)}}}}catch(e){i=!0,o=e}finally{try{t||null==s.return||s.return()}finally{if(i)throw o}}}}}})),(0,P.Fq)({lspClients:t,path:n}),function(e,t){function n(e){return(0,eK.Z)(e).isTextDocumentSyncSupported}return ek.lg.fromClass(function(){"use strict";function r(e){(0,eA._)(this,r),this.dispose=this.listen(e.state.facet(tV.Yp))}var i=r.prototype;return i.update=function(e){(0,eL.aU)(e,tV.Yp)&&(this.dispose=this.listen(e.state.facet(tV.Yp)))},i.destroy=function(){this.dispose&&this.dispose()},i.listen=function(r){if(this.dispose&&this.dispose(),r&&t.find(function(e){return n(e)}))return e.watchTextFile(r,{onFlush:function(){var e=!0,i=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var c=a.value;n(c)&&(0,eK.Z)(c).isTextDocumentSyncSaveSupported&&c.isOpen(r)&&c.notify.didSave(r)}}catch(e){i=!0,o=e}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}}})},r}())}(e,t),(0,rm.BB)(t)];return(0,rp.isMobile)()||d.push([nL,tK,t1,(0,tF.ys)({defaultKeymap:!1,closeOnBlur:!1,tooltipClass:function(e){return(0,tW.o)(e)?t$:""},addToOptions:[{render:function(e,t){if(!(0,tW.o)(t))return null;var n=(0,tz.V)((0,E.tZ)("div",{className:nP,children:(0,E.tZ)(tY.ZP,{size:"inherit",shortcut:{key:"⏎"}})}));return n.style.display="inline-flex",n},position:200}],override:t.map(function(e){return(0,tF.eC)(["LineComment","BlockComment"],function(e){var t=.01>Math.random(),n=0,r=function(n,r,i){if(t&&r){var o=e.getLanguageId(r);return t2.kg.info("lsp:autocomplete:".concat(n),(0,C._)({languageId:o},i)),(0,t4.j)(t4.U3.LSP_COMPLETION_USED,(0,C._)({type:n,sampleRate:.01},i))}};function i(){return(i=(0,e_._)(function(t){var i,o,a,l,c,s,u,d,f,h;return(0,eS.Jh)(this,function(p){switch(p.label){case 0:if(!(o=e.getServerCapabilities())||!(null==o?void 0:o.completionProvider)||!(a=function(e,t){var n=e.state,r=e.pos;if(e.explicit)return{triggerKind:t8.CompletionTriggerKind.Invoked};var i=n.doc.lineAt(r),o=i.text[r-i.from-1],a=i.text.substring(0,r-i.from);return(null==t?void 0:t.includes(o))?{triggerKind:t8.CompletionTriggerKind.TriggerCharacter,triggerCharacter:o}:a.match(/\w$/)?{triggerKind:t8.CompletionTriggerKind.Invoked}:null}(t,(null==o?void 0:null===(i=o.completionProvider)||void 0===i?void 0:i.triggerCharacters)||[])))return[2,null];if(n&&e.notify.cancelRequest(n),!(l=t.state.facet(tV.Yp)))throw Error("path not found");return n=e.generateId(),c=t.state.doc,[4,e.request.completion(l,(0,eY.sg)(c,t.pos),a,{id:n})];case 1:if("error"in(s=p.sent())||(u=s.result,t.aborted||!u))return[2,null];return d=Array.isArray(u)?u:u.items,h=Array.isArray(u)?{}:null!==(f=u.itemDefaults)&&void 0!==f?f:{},[2,function(e){for(var t,n=e.context,r=e.items,i=e.itemDefaults,o=e.client,a=e.trackCompletion,l=e.startingDoc,c=null,s=(R=r.filter(function(e){return!!e.label}),D=["label","kind"],I=new Set,R.filter(function(e){var t=D.map(function(t){return e[t]}).join("␞");return!I.has(t)&&(I.add(t),!0)})).map(function(e){return{item:e,label:e.label,filterText:(e.filterText||e.label).toLowerCase(),sortText:(e.sortText||e.label).toLowerCase()}}),u=((s=s.sort(function(e,t){return e.sortText<t.sortText?-1:e.sortText>t.sortText?1:0})).length%2?s.length-1:s.length)/2,d=0;d<=u;d++){if(0===d&&s[u]){s[u].boost=0;continue}var f=s[u-d];if(f){var h=s[u-d+1],p=h.sortText,m=h.boost,v=void 0===m?0:m;f.boost=f.sortText===p?v:v+1}var g=s[u+d];if(g){var y=s[u+d-1],b=y.sortText,w=y.boost,Z=void 0===w?0:w;g.boost=g.sortText===b?Z:Z-1}}var x=null!==(A=null===(B=s[0])||void 0===B?void 0:B.boost)&&void 0!==A?A:0,T=null!==(P=null===(G=s[s.length-1])||void 0===G?void 0:G.boost)&&void 0!==P?P:0;if(x>99||T<-99)for(var R,D,I,B,G,A,P,L,N=99/Math.max(Math.abs(x),Math.abs(T)),O=0;O<s.length;O++)s[O].boost=(null!==(L=s[O].boost)&&void 0!==L?L:0)*N;var U=(0,S._)(function(e){var t=Object.create(null),n=Object.create(null),r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value.filterText;t[c[0]]=!0;for(var s=1;s<c.length;s++)n[c[s]]=!0}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var u=nA(t)+nA(n)+"*$";return[RegExp("^"+u),new RegExp(u)]}(s),2),M=U[0],X=U[1],F=n.matchBefore(X),W=n.pos;function H(e,t){var n,r,s,u,d,f,h,p,m,v,g,y,b,w;return m=t.state.facet(tV.Yp),v=null!==(d=(0,tH.Z)(t.state))&&void 0!==d?d:"unknown",g=(0,eK.Z)(o),y=e.item,b=e.boost,w={label:y.label,detail:g.isCompletionLabelDetailsSupported?null===(n=y.labelDetails)||void 0===n?void 0:n.description:y.detail,type:null===(r=Object.entries(t6.CompletionItemKind).find(function(e){var t=(0,S._)(e,2),n=(t[0],t[1]);return y.kind===n}))||void 0===r?void 0:r[0].toLowerCase(),commitCharacters:t.state.facet(nB)?null!==(p=null!==(h=null!==(f=y.commitCharacters)&&void 0!==f?f:i.commitCharacters)&&void 0!==h?h:null===(u=o.getServerCapabilities())||void 0===u?void 0:null===(s=u.completionProvider)||void 0===s?void 0:s.allCommitCharacters)&&void 0!==p?p:[]:void 0,boost:b},nG.set(w,e),w.apply=function(t,n,r,i){var s=function(e){var n=u?l:t.state.doc,r={from:(0,eY.RL)(n,e.start),to:(0,eY.RL)(n,e.end)};return u&&(r.from=u.mapPos(r.from),r.to=u.mapPos(r.to)),r};if(m){var u=c,d=null!==(h=null===(f=e.resolved)||void 0===f?void 0:f.additionalTextEdits)&&void 0!==h?h:y.additionalTextEdits;if(y.insertTextFormat===t6.InsertTextFormat.Snippet){var f,h,p,g,b,w=null;d&&(w={changes:d.map(function(e){return(0,_._)((0,C._)({},s(e.range)),{insert:e.newText})})});var Z=new nZ(null!==(b=null!==(g=null===(p=y.textEdit)||void 0===p?void 0:p.newText)&&void 0!==g?g:y.insertText)&&void 0!==b?b:y.label);if(y.textEdit&&"range"in y.textEdit){var x=i,E=s(y.textEdit.range);r=E.from,i=Math.max(i=E.to,x)}var T=w?[w,Z.apply({view:t,from:r,to:i,path:m,completion:n})]:[Z.apply({view:t,from:r,to:i,path:m,completion:n})];t.dispatch.apply(t,(0,k._)(T)),a("completion-accepted",m,{language:v,completionKind:y.kind,insertTextFormat:y.insertTextFormat});return}var R=[];if(y.textEdit){if(!("range"in y.textEdit))return;var D=s(y.textEdit.range);R.push((0,_._)((0,C._)({},D),{to:Math.max(D.to,t.state.selection.main.to),insert:y.textEdit.newText}))}else{var I=y.insertText||y.label,B=t.state.wordAt(i);B&&B.to>i&&I.includes(t.state.doc.sliceString(i,B.to))&&(i=B.to),R.push({from:r,to:i,insert:I})}var G=(0,S._)(R,1)[0],A="";null==d||d.forEach(function(e){var t=s(e.range);"from"in G&&t.from===G.from&&(A=e.newText),R.push((0,_._)((0,C._)({},t),{insert:e.newText}))});var P=i-r;t.state.selection.ranges.forEach(function(e){if(e!==t.state.selection.main){if(!("insert"in G)||!G.insert)throw Error("Expected insert in mainChange");var n=e.from-P,r=A+G.insert;R.push({from:n,to:e.to,insert:r})}});var L=eP.as.of(R.map(function(e){return"from"in e&&void 0!==e.to?(0,_._)((0,C._)({},e),{from:Math.min(e.from,e.to),to:Math.max(e.from,e.to)}):e}),t.state.doc.length);a("completion-accepted",m,{language:v,completionKind:y.kind,insertTextFormat:y.insertTextFormat}),t.dispatch({annotations:tF.Jv.of(n),changes:L,selection:eP.jT.create(t.state.selection.ranges.map(function(e){return e.map(L,0)}),t.state.selection.mainIndex)}),y.command&&o.request.executeCommand(y.command.command,y.command.arguments)}},g.isCompletionItemResolveSupported&&(w.info=(0,e_._)(function(){var t,n,r,i,l,c,s;return(0,eS.Jh)(this,function(u){switch(u.label){case 0:if(n=null!==(t=e.resolved)&&void 0!==t?t:null)return[3,2];return[4,o.request.resolveCompletionItem(y)];case 1:if(n="result"in(r=u.sent())?r.result:null,r.cancelled||null===n)return[2,null];e.resolved=n,u.label=2;case 2:if(i=Math.floor(2147483647*Math.random()),l=[],m&&n.detail&&n.detail!==y.detail&&n.detail!==y.label&&(s=["```"+((c=m.lastIndexOf("."))>=0?m.slice(c+1):"md"),n.detail,"```"].join("\n"),l.push((0,E.tZ)(nn,{className:n.documentation?"lsp-completion-detail":void 0,content:{value:s,kind:"markdown"}},"".concat(i,"-detail")))),n.documentation&&l.push((0,E.tZ)(nn,{content:n.documentation},"".concat(i,"-documentation"))),0===l.length)return[2,null];return a("resolution-presented",m,{language:v,resolutionSource:"request",completionKind:y.kind}),[2,{dom:(0,tz.V)((0,E.tZ)("div",{children:l}))}]}})})),w}return F&&(W=F.from),s.length&&a("completion-options-presented",n.state.facet(tV.Yp),{language:null!==(t=(0,tH.Z)(n.state))&&void 0!==t?t:"unknown"}),{from:W,options:s.map(function(e){return H(e,n)}),validFor:M,update:function(e,t,n,r){return(0,_._)((0,C._)({},e),{options:e.options.map(function(e){var t,n=null!==(t=nG.get(e))&&void 0!==t?t:null;return n?H(n,r):e})})},map:function(e,t){return c=c?c.composeDesc(t):t,e}}}({context:t,startingDoc:c,items:d,itemDefaults:h,client:e,trackCompletion:r})]}})})).apply(this,arguments)}return function(e){return i.apply(this,arguments)}}(e))})})],function(e){var t={current:new Map};function n(){return(n=(0,e_._)(function(n,i){var o,a,l,c,s,u;return(0,eS.Jh)(this,function(d){switch(d.label){case 0:if(!(a=n.facet(tV.Yp))||(l=n.field(r,!1),c=n.field(ro,!1),!(s=e.filter(function(e){var t,n,r,i=null!==(r=null===(n=e.getServerCapabilities())||void 0===n?void 0:null===(t=n.signatureHelpProvider)||void 0===t?void 0:t.triggerCharacters)&&void 0!==r?r:[];return!!(i.length&&(l||c&&i.includes(c)))})).length))return[2,null];return[4,function(e,t,n,r,i){return rc.apply(this,arguments)}(n,i,s,a,t)];case 1:if(!(null==(u=d.sent())?void 0:null===(o=u.signatures)||void 0===o?void 0:o.length))return[2,null];return[2,u]}})})).apply(this,arguments)}var r=eP.QQ.define({create:function(){return null},update:function(e,t){return t.isUserEvent("select.pointer")?null:(e&&t.newSelection.main.from!==e.pos&&(e=(0,_._)((0,C._)({},e),{pos:t.newSelection.main.from})),(0,rn.j)(t,rr.effect,function(n){var r=n.value;e=r?{pos:t.newSelection.main.from,help:r,index:0}:null}),(0,rn.j)(t,ri,function(t){var n=t.value;if(e){var r=e.help.signatures.length,i=(r+e.index+n)%r;e=i>=e.help.signatures.length||i<0?null:(0,_._)((0,C._)({},e),{index:i})}}),e)},provide:function(e){var t=function(t){var n=t.state.field(e);if(!n)throw Error("expected nonnull field");var r=ra.create({help:n.help,index:n.index});return{dom:r,update:function(t){ra.update(r,function(r){var i=t.state.field(e);return i&&i!==n?{help:i.help,index:i.index}:r})}}};return ek.hJ.compute([e],function(n){var r=n.field(e);return r?{pos:r.pos,create:t,above:!0}:null})}}),i=ek.lg.define(function(){var t,r=ed()((t=(0,e_._)(function(e){var t,r,i;return(0,eS.Jh)(this,function(o){switch(o.label){case 0:if(!(t=e.state.selection.main).empty)return[3,2];return r=e.state.field(rr.state,!1),[4,function(e,t){return n.apply(this,arguments)}(e.state,t.from)];case 1:(i=o.sent())&&!r&&(0,tF._B)(e),e.dispatch({effects:rr.effect.of(i)}),o.label=2;case 2:return[2]}})}),function(e){return t.apply(this,arguments)}),0);return{update:function(t){e.some(function(e){return(0,eK.Z)(e).isSignatureHelpSupported})&&t.selectionSet&&t.state.selection.main.empty&&r(t.view)}}});function o(e,t){var n=e.state.field(rr.state,!1);return"active"!==(0,tF.LR)(e.state)&&null!=n&&("navigate"!==t||n.signatures.length>1)}var a=function(e){return function(t){return!!o(t,"navigate")&&(t.dispatch({effects:ri.of(e)}),!0)}},l=[{key:"ArrowDown",run:a(1)},{key:"ArrowUp",run:a(-1)},{key:"Escape",run:function(e){return!!o(e,"dismiss")&&(e.dispatch({effects:rr.effect.of(null)}),!0)}}];return[r,rr.state,ro,i,eP.Wl.high(ek.$f.of(l))]}(t),(l=function(e){var t,n=null;return(0,ek.bF)((t=(0,e_._)(function(t,r){var i,o,a,l,c,s;return(0,eS.Jh)(this,function(u){switch(u.label){case 0:if(t.state.facet(nX.j)||!(0,eK.Z)(e).isHoverSupported||!(i=t.state.facet(tV.Yp)))return[2,null];o=(0,eY.sg)(t.state.doc,r);try{a=t.state.wordAt(r)}catch(e){return[2,null]}if(n){if(n.from===(null==a?void 0:a.from)&&n.to===(null==a?void 0:a.to))return[2,null];e.notify.cancelRequest(n.id)}return n={id:l=e.generateId(),from:null==a?void 0:a.from,to:null==a?void 0:a.to},[4,e.request.hover(i,o,{id:l})];case 1:if(c=u.sent(),n=null,"error"in c||null===(s=c.result))return[2,null];return[2,function(e){var t,n,r=e.hover,i=e.state,o=e.offset;if((Array.isArray(r.contents)||"string"==typeof r.contents)&&0===r.contents.length)return null;var a="",l=i.doc;if(r.range)t=(0,eY.RL)(l,r.range.start),n=(0,eY.RL)(l,r.range.end),a=l.sliceString(t,n);else if(n=void 0,(t=o)<=i.doc.length){var c=i.wordAt(t);c?(a=l.sliceString(c.from,c.to),t=Math.min(t,c.from),n=c.to):a=l.sliceString(t,t+1)}return{pos:t,end:n,create:function(e){var t=(0,tz.V)((0,E.tZ)(nM,{content:r.contents,textHovered:a}));return t.classList.add("hover-tooltip"),t.style.padding="0",{dom:t,mount:function(){!function(e,t){t.forEach(function(t){return setTimeout(e,t)})}(function(){(0,ek.E2)(e)},[0,50,200,1e3])}}},above:!0}}({hover:s,offset:r,state:t.state})]}})}),function(e,n){return t.apply(this,arguments)}),{hideOn:function(e){return!e.annotation(eP.YW.remote)&&!!(e.isUserEvent("input")||e.isUserEvent("delete")||e.isUserEvent("select")||e.state.facet(nX.j))},hoverTime:0})},[eP.Wl.highest(t.map(function(e){return l(e)})),ek.tk.domEventObservers({mousedown:function(e,t){!(e.target instanceof HTMLElement&&e.target.matches(".cm-tooltip *"))&&(0,ek.Dm)(t.state)&&t.dispatch({effects:ek.E8})},keydown:function(e,t){"Escape"===e.key&&(0,ek.Dm)(t.state)&&t.dispatch({effects:ek.E8})},scroll:function(e,t){(0,ek.Dm)(t.state)&&t.dispatch({effects:ek.E8})}})]),(0,rh.DZ)(t,e,r),(0,nF.jd)({lspClients:t}),(c=eP.Py.define(),s=eP.Py.define(),[ek.tk.updateListener.of((u=(0,e_._)(function(e){var n,r,i,o,a,l,u,d,f,h,p,m,v,g,y,b,w,Z,x,C,_,S,E,T,R,D,I,B,G,A,P,L,N,O,U,M;return(0,eS.Jh)(this,function(X){switch(X.label){case 0:if(!t.some(function(e){var t=(0,eK.Z)(e);return t.isFindReferencesSupported||t.isFindDefinitionSupported}))return[2];n=null,r=!0,i=!1,o=void 0;try{for(a=e.transactions[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){u=l.value,d=!0,f=!1,h=void 0;try{for(p=u.effects[Symbol.iterator]();!(d=(m=p.next()).done);d=!0)(v=m.value).is(nH.h)&&(n=v.value)}catch(e){f=!0,h=e}finally{try{d||null==p.return||p.return()}finally{if(f)throw h}}}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}if(!n||!(g=e.view.state.facet(tV.Yp)))return[2];y=e.state.doc,b=(0,eY.sg)(y,n),w=[],Z=!0,x=!1,C=void 0;try{for(_=function(){var e=E.value,t=(0,eK.Z)(e);t.isFindDefinitionSupported&&w.push(e.request.findDefinitions(g,b).then(function(t){return{client:e,response:t,type:"definition"}})),t.isFindReferencesSupported&&w.push(e.request.findReferences(g,b,{includeDeclaration:!1}).then(function(t){return{client:e,response:t,type:"references"}}))},S=t[Symbol.iterator]();!(Z=(E=S.next()).done);Z=!0)_()}catch(e){x=!0,C=e}finally{try{Z||null==S.return||S.return()}finally{if(x)throw C}}return T=Promise.all(w),(0,nW.SC)(e.view,T),[4,T];case 1:R=X.sent(),D=[],I=[],B=new Set,G=!0,A=!1,P=void 0;try{for(L=function(){var e=O.value,t=e.client,n=e.response,r=e.type;if(("error"in n))throw Error("Something went wrong fetching references: ".concat(n.error.message));var i=(0,nz.g)(n.result);if(!i)return"continue";"definition"===r&&D.push.apply(D,(0,k._)(i)),"references"===r&&I.push.apply(I,(0,k._)(i)),i.forEach(function(e){B.add(t.documentUriToPath(e.uri))})},N=R[Symbol.iterator]();!(G=(O=N.next()).done);G=!0)L()}catch(e){A=!0,P=e}finally{try{G||null==N.return||N.return()}finally{if(A)throw P}}if(!D.length&&!I.length)return(0,nV.J)(e.view,{message:"No references found",offset:n}),e.view.dispatch({effects:s.of(null)}),[2];return U=Array.from(B).filter(function(e){return e!==g}),M=y.toJSON().join("\n"),e.view.dispatch({effects:c.of({references:I,definitions:D,currentFile:g,currentFileContents:M,files:U})}),[2]}})}),function(e){return u.apply(this,arguments)})),eP.QQ.define({create:function(){return null},update:function(e,t){var n=e,r=!0,i=!1,o=void 0;try{for(var a,l=t.effects[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;u.is(c)&&(n=u.value),u.is(s)&&(n=null)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n},provide:function(e){return[ek.$f.of([{key:"Escape",run:function(t){return!!t.state.field(e)&&(t.dispatch({effects:s.of(null)}),!0)}}]),ek.hJ.compute([e],function(t){var n=t.field(e),r=t.facet(tV.Yp);if(!n)return null;var i=t.selection.asSingle().main;return{pos:i.from,end:i.to,create:function(e){var t=(0,tz.V)((0,E.tZ)("div",{children:(0,E.tZ)(n5,(0,_._)((0,C._)({},n),{onClose:function(){e.dispatch({effects:s.of(null)})},jumpToPosition:function(t){if(t.path!==r){(0,re.ZB)(e.state,{path:t,secondary:!1});return}var n=t.line,i=t.col;(0,tU.S)({view:e,line:n,col:i}),e.focus()}}))}));return t.classList.add("replit-tooltip"),t.style.padding="0",t.style.overflow="scroll",{dom:t}}}})]}})]),(0,rt.f)(e,t)),d}(H,V,F,q))},[V,F,H,q,J]),ee=(0,et.useMemo)(function(){return new eL.Rh(function(){return tX.T.of(V.map(function(e){return(0,eK.Z)(e)}))})},[V]),(0,et.useEffect)(function(){return!V.length||J?Q.set(null):(0,rv.uf)(V.map(function(e){return e.onServerCapabilitiesChange(function(){ee.set(tX.T.of(V.map(function(e){return(0,eK.Z)(e)})))})}))},[ee,V,Q,J]),[ee.extension,Q.extension,rR.use(z.acceptSuggestionOnCommitCharacter),rD.use(z.codeActionsOnSave),rI.use(z.codeIntelligence),rE.use(z.semanticTokens&&j?V:null)]),tJ=(ei=(er={debuggest:ty,filePath:tu}).debuggest,eo=er.filePath,ea=(0,eD.Z)().fs,el=(0,eR.Z)(),ec=(0,eT.Z)(ei.mainClient),eG.use(ec,el,eo,ea));(0,tU.Z)({filePath:tu,view:t_,isLoading:tP,deeplink:th,onDeeplinkUpdated:tp});var tQ=(eu=(es={view:t_,filePath:tu}).view,ep=es.filePath,em=(0,eD.Z)().fs,(0,S._)((0,lo.L)({accept:[li.z.Code,la.FILE],drop:function(e,t){if(eu){var n=t.getClientOffset(),r=n?eu.posAtCoords(n):null;if(null!==r){var i=function(e){eu.focus(),eu.dispatch({changes:{from:r,insert:e},selection:{anchor:r,head:r+e.length}})};if(e.type===li.z.Code)i(e.code);else{var o=!0,a=!1,l=void 0;try{for(var c,s=e.files[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;ep&&(0,en.gK)(ep)&&(0,ll.r)(u,em,ep).then(i)}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}}}}}}),2)[1]),t0=(0,e8.Z)({filePath:tu}),t5=(eg=(ev={view:t_,filePath:tu,isLoading:tP,enable:tT}).view,ey=ev.filePath,eb=ev.isLoading,ew=ev.enable,eZ=(0,ae.kM)(),(0,et.useEffect)(function(){eg&&eZ&&eg.dispatch({effects:[ap.YM.of(eZ),ap.eR.of(eZ)]})},[eg,eZ]),ex=(0,aW.F)().theme,eE=(eC=(0,S._)((0,et.useState)([t3.TV.accentPrimaryDimmest,t3.TV.accentPrimaryDimmer]),2))[0],eI=eC[1],(0,et.useEffect)(function(){var e=aF(ex.values.global.accentPrimaryDimmest);eI(["rgba(".concat(e.join(","),", 0.5)"),t3.TV.accentPrimaryDimmer])},[ex]),eB=oQ(ey,eb,!0,ew),eN=(0,eD.Z)().fs,eU=(eO=(0,oY.kL)(ey)).contentRef,eM=eO.loadedFile,eX=eO.transformSelectionRef,(0,et.useEffect)(function(){var e=!1,t=eX.current,n=eU.current;if(eM&&t&&n&&!eb&&eg){var r=Object.values(eB);if(0===r.length){eg.dispatch({effects:ap.qi.of({})});return}Promise.all(r.map(function(e){return(0,oY.Ft)({anchor:e,version:eN.getOTVersion(ey),transformSelection:t,content:n})})).then(function(t){if(!e){var n=t.filter(function(e){return!!e}).map(function(e){if(!e)throw Error("expected resolved anchor");return(0,C._)({},e.anchor,null==e?void 0:e.newSelection)});return eg.dispatch({effects:ap.qi.of(n.reduce(function(e,t){return e[t.id]=t,e},{}))}),function(){e=!0,eg&&eg.dispatch({effects:ap.qi.of({})})}}})}},[eB,eg,eM,eN,eX,eU,ey,eb]),aV.use(ew,eE));eH=(eF={view:t_,filePath:tu}).view,eV=eF.filePath,ez=(0,Y.useRouter)(),eq=(0,U.Gv)(ez),eJ=(0,et.useRef)({revisionId:rO()(),textEditorState:aJ(eV),hasGhostwriterSuggestion:!1}),eQ=(0,et.useRef)(eV),e2=null!==(eW=null==eH?void 0:eH.plugin(L.pE))&&void 0!==eW?eW:null,(0,et.useEffect)(function(){if(eq&&eH&&e2&&!e2.destroyed){var e=function(e){a$(eJ.current,e.messageId)},t=function(t){a1(eV,eQ.current,eH,eJ.current,t)?e(t):(0,az.pl)(t.messageId)},n=function(t){a1(eV,eQ.current,eH,eJ.current,t)?e(t):(0,az.pl)(t.messageId)},r=function(r){try{var i=r.data;if(!(0,aq.CF)(i)||i.protocolVersion!==aq.Wj)return;var o=i.payload;i.messageDirection===aq.s1.TO_NATIVE&&(0,aq.H7)(o)&&(eQ.current=o.activePaneFilePath),(0,az.fp)(r,function(r){var o=r.type;switch(o){case aq.cF.TEXT_EDITOR_STATE_REQUEST:e(i);break;case aq.cF.REQUEST_SET_SELECTION:case aq.cF.REQUEST_REPLACE_SELECTION:case aq.cF.REQUEST_SET_TEXT:case aq.cF.REQUEST_INSERT_TEXT:case aq.cF.REQUEST_PASTE_TEXT:t(i);break;case aq.cF.TEXT_EDITOR_REQUEST_ACTION:n(i);break;default:(0,a2.Z)(o)}})}catch(e){throw Error("Invalid message: ".concat(e))}};window.addEventListener("message",r),eJ.current={revisionId:rO()(),textEditorState:aY(eV,eH),hasGhostwriterSuggestion:(0,tW.o)(eH.state)},a$(eJ.current);var i=!1,o=!1,a=e2.bind({changed:function(e){var t;return e.docChanged?(i=!0,!0):!!e.selectionSet||!!e.focusChanged||(null===(t=eJ.current)||void 0===t?void 0:t.hasGhostwriterSuggestion)!==(0,tW.o)(e.state)},callback:function(){var e=i?rO()():eJ.current.revisionId;i=!1,eJ.current={revisionId:e,textEditorState:aY(eV,eH),hasGhostwriterSuggestion:(0,tW.o)(eH.state)},a$(eJ.current)},destroy:function(){window.removeEventListener("message",r),o||(aK(eV),o=!0)}});return function(){window.removeEventListener("message",r),a(),o||(aK(eV),o=!0)}}},[eH,eV,eq,e2]);var t7=(e4=(0,a4.K)((0,O.Z)(function(){return{path:tu}},[tu])),a3.use(e4)),t9=l_(tu).isUnmerged,ne=(e7=(e5={filePath:tu,enableConflicts:!0===t9}).filePath,e9=e5.enableConflicts,te=(0,tN.P5)({controlName:"flag-editor-git-conflict-markers",logFlagToAnalytics:!1}),tt=(0,eD.Z)().git,tO.use(tt,void 0===e7?null:e7,!(void 0!==e9&&e9)||!te)),nt=(0,U.T3)(),nr=oh.use(nt),ni=iL.hx.use(tg),no=ol.use(nt),na=o_.use(tZ.rulers),nl=(0,aW.F)(),nc=rP.use(nt,tZ.minimapDisplay,nl),ns=lp.use(nt,nl),nu=(0,tN.P5)({controlName:"flag-draft-buffers"}),nd=G.NS.use(tg,tw,nu,tZ.formatOnSave),nf=(tn={filePath:tu},tr=(0,eD.Z)().container,ti=(0,e$.T)(),to=(0,N.Gn)("codeIntelligence").preferences,ta=(0,e0.Z)(tn.filePath),tl=(0,e1.Z)(ta),e3.use(ti,tr,ta,tl,to.codeIntelligence,tn.filePath)),nh=ej.use(tZ.showLeadingWhitespace,tZ.showEnclosedWhitespace,tZ.showTrailingWhitespace,tZ.showSelectedWhitespace),np=(0,lr.Ls)({path:tu}),nm=(0,lr.fD)({path:tu}),nv=(0,lr.jg)({path:tu}),ng=(0,et.useCallback)(function(){t_&&np(t_,"shortcut")},[t_,np]),ny=(0,lc.u)({isMobile:nt,generateCode:np,filePath:tu}),nb=(0,et.useCallback)(function(){tS({type:"ghostwriterChat"})},[tS]),nw=(0,e6.W)({onGenerateCode:ng,onReplyInChat:nb}),nx=(0,lt.av)(),nC=nx.onContextMenu,n_=nx.closeContextMenu,nS=nx.openContextMenu,nk=nx.isVisible,nE=(0,et.useCallback)(function(e){t_&&(0,ek.$1)(t_,e,"context-menu")&&(n_(),e.stopPropagation(),e.preventDefault())},[n_,t_]),nT=(0,S._)((0,lr.aT)({path:tu,view:t_,onCommand:function(e){if(t_){var t=t_.state.selection.main.head;if(t){var n=t_.coordsAtPos(t);n&&nS({target:{x:n.left,y:n.top},command:[nR(),e],width:275,onKeyDownHandler:nE})}}}}),2),nR=nT[0],nD=nT[1],nI=(0,et.useCallback)(function(e){nC(e,{command:nR(),width:275,onKeyDownHandler:nE})},[nR,nC,nE]),nN=(0,et.useCallback)(function(e,t){nS({target:e,command:[nR(),t],width:275,onKeyDownHandler:nE})},[nR,nE,nS]),nO=lr.pZ.use(nt,nk,nI),nU=ln.t.use(nN),nj=(0,et.useCallback)(function(e){nS({target:{x:e.right-275,y:e.top},width:275,command:nR(),onKeyDownHandler:nE})},[nR,nE,nS]),nq=(0,ls.W)({editCode:nv,explainCode:nm,generateCode:np,onMoreClick:nj}),nJ=(tc=(0,iN.T)(),oo.use(tc)),nY=(0,tN.P5)({controlName:"flag-problems-pane"}),n$=(0,tN.P5)({controlName:"flag-code-repair"}),nK=tM.y.use(nY),nQ=lv.lL.use(tD&&n$),n0=lC.use(),n1=(0,re.Fs)(tm),n2=ld.G.use(tg,tw,nu);return(0,E.tZ)("div",{css:lu.ac,"data-cy":tP?"workspace-cm-editor-loading":"workspace-cm-editor-".concat(tu),children:(0,E.tZ)(oc.ZP,{ref:tC,elementRef:tQ,css:lu.Mp,filePath:tu,hideTooltips:tf,extensions:[nO,nU,nD,tL,tJ,tj,tq,ny,n0,nr,tE,no,ne,ns,nc,iL.sy,ni,iS,nw,nJ,oJ,na,nh,nd,nf,A.er,t7,t0,t5,oX,oy,nt?[]:nq,tG,nK,n1,n2,nQ],onException:function(e){var t,n={filePath:tu,cursorPosition:JSON.stringify(null==tI?void 0:null===(t=tI.get(K._s))||void 0===t?void 0:t.position),fileVersion:tB({filePath:tu})};if(t_){var r=t_.plugin(iS),i=null==r?void 0:r.logs();null==r||r.flush(),n.domText=t_.contentDOM.innerText,n.keystrokes=JSON.stringify(i),n.selection=JSON.stringify(t_.state.selection.main.toJSON()),n.updateDoc=t_.state.doc.sliceString(0)}(0,a8.O)(e,{tags:{origin:"CodemirrorEditor: useEditor/onException",codemirror:!0},extras:n})},noHistory:!0})})}var lk=n(71921),lE=n(1611),lT=n(42914),lR=n(53854),lD=n(19068),lI=n(41974),lB=n(22750),lG=n(53928),lA=n(62435),lP=(0,ee.cn)(0),lL=(0,ee.cn)(new Map([["normal",[]],["compact",[]]])),lN=(0,ee.cn)(null,function(e,t,n){var r=e(lX);t(lL,function(e){return(0,lI.Uy)(e,function(e){var t=e.get(r);if(!t)throw Error("Expect width for: "+r);t[n.index]=n.width})})}),lO=(0,ee.cn)(null,function(e,t,n){t(lL,function(e){return(0,lI.Uy)(e,function(e){var t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0)(0,S._)(o.value,2)[1].slice(0,n)}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}})})}),lU=(0,ee.cn)(function(e){var t=new Map([["normal",0],["compact",0]]),n=!0,r=!1,i=void 0;try{for(var o,a=e(lL)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=(0,S._)(o.value,2),c=l[0],s=l[1],u=0,d=!0,f=!1,h=void 0;try{for(var p,m=s[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v=p.value;void 0!==v&&(u+=v)}}catch(e){f=!0,h=e}finally{try{d||null==m.return||m.return()}finally{if(f)throw h}}t.set(c,u)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}),lM=(0,ee.cn)(function(e){if("normal"===e(lX))return null;var t=e(lL).get("compact");if(!t)return null;var n=e(lP)-24,r=0,i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;if(void 0!==s){if((n-=s)>0){r++;continue}return r}}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return null}),lX=(0,ee.cn)(function(e){var t,n=e(lP);return(null!==(t=e(lU).get("normal"))&&void 0!==t?t:0)>n?"compact":"normal"}),lF=(0,ep.X)({item:[es.l0.viewStyle,lD.gU.listItem,es.l0.p(6),es.l0.rowWithGap(4),es.l0.align.center,{fontSize:es.TV.fontSizeSmall}]});function lW(e){var t=(0,S._)((0,et.useState)(null),2),n=t[0],r=t[1],i=null!==n&&(null===(s=e.items[n])||void 0===s?void 0:s.popover);if(i)return(0,E.tZ)(E.HY,{children:i});var o=[],a=!0,l=!1,c=void 0;try{for(var s,u,d=e.items[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var f=u.value;f.onClick||f.popover||o.push(f.key)}}catch(e){l=!0,c=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw c}}return(0,E.tZ)(lk.v2,{disabledKeys:o,onAction:function(t){var n=!0,i=!1,o=void 0;try{for(var a,l=e.items[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value;if(c.key===t){if(c.onClick){c.onClick();break}c.popover&&r(e.items.indexOf(c));break}}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}},children:e.items.map(function(e){return(0,E.tZ)(lk.sN,{id:e.key,css:lF.item,children:(0,E.tZ)(lH.Provider,{value:function(){},children:(0,et.cloneElement)(e.item,{presentation:"overflowMenu"})})},e.key)})})}var lH=(0,et.createContext)(function(e){});function lV(){return(0,et.useContext)(lH)}var lz=(0,ep.X)({button:[es.l0.viewStyle,es.l0.reset.button,es.l0.rowWithGap(4),es.l0.center,es.l0.color.foregroundDimmest,es.l0.hover([es.l0.color.foregroundDefault]),es.l0.height("100%"),{fontSize:12,"&:has(*)":[es.l0.px(4),lD.gU.nofill,es.l0.borderRadius(0)]}],tooltip:[es.l0.backgroundColor.backgroundHighest,es.l0.borderRadius(4),es.l0.color.foregroundDimmer,es.l0.p(4),es.l0.border({color:es.TV.outlineDefault}),{fontSize:12}]});function lj(e){var t=(0,oE.Z)(function(t){return e.onWidth(t.width)}),n=(0,S._)((0,et.useState)(null),2),r=n[0],i=n[1];return(0,E.tZ)(ea.G,{innerRef:t,children:(0,E.BX)(lE.aJ,{isDisabled:null==r||e.hidden,children:[(0,E.tZ)(lT.z,{isDisabled:e.isDisabled||e.hidden,css:lz.button,style:e.hidden?{opacity:0,pointerEvents:"none"}:void 0,onPress:function(){var t;return null===(t=e.onClick)||void 0===t?void 0:t.call(e)},children:(0,E.tZ)(lH.Provider,{value:i,children:e.children})}),(0,E.tZ)(lE.u,{placement:"top",offset:8,css:lz.tooltip,children:r})]})})}var lq=(0,ep.X)({root:[es.l0.flex.row,es.l0.flex.growAndShrink(1),es.l0.position.relative,{"& > div:first-of-type > button":{borderBottomLeftRadius:4},"& > div:button:last-of-type > button":{borderBottomRightRadius:4}}],middle:[es.l0.flex.growAndShrink(1)],moreButton:[{width:24},es.l0.reset.button,es.l0.center,lD.gU.nofill,es.l0.height("100%"),es.l0.position.absolute,es.l0.right(0),es.l0.top(0)],popover:[es.l0.borderRadius(4),es.l0.border({color:es.TV.outlineDefault})]});function lJ(e){var t=e.left.filter(Boolean),n=e.right.filter(Boolean),r=(0,S._)((0,et.useState)(function(){return(0,ee.MT)()}),1)[0],i=(0,lB.Dv)(lX,{store:r}),o=(0,lB.Dv)(lM,{store:r}),a=(0,lB.b9)(lN,{store:r}),l=(0,lB.b9)(lP,{store:r}),c=(0,oE.Z)(function(e){return l(e.width)}),s=t.length-1,u=(0,k._)(t).concat((0,k._)(n)),d=(0,lB.b9)(lO,{store:r}),f=u.length;return(0,et.useEffect)(function(){d(f)},[d,f]),(0,E.tZ)(E.HY,{children:(0,E.BX)(ea.G,{className:e.className,css:lq.root,innerRef:c,children:[u.map(function(e,t){return e.popover?(0,E.BX)(et.Fragment,{children:[(0,E.BX)(lR.hg,{children:[(0,E.tZ)(lj,{onWidth:function(e){return a({index:t,width:e})},hidden:null!==o&&t>=o,isDisabled:!e.popover&&!e.onClick,children:(0,et.cloneElement)(e.item,{presentation:i})}),(0,E.tZ)(lG.Bf,{placement:t<=s?"top left":"top right",children:e.popover})]}),t===s?(0,E.tZ)(ea.G,{css:lq.middle}):null]},e.key):(0,E.BX)(et.Fragment,{children:[(0,E.tZ)(lj,{onWidth:function(e){return a({index:t,width:e})},onClick:e.onClick,hidden:null!==o&&t>=o,isDisabled:!e.popover&&!e.onClick,children:(0,et.cloneElement)(e.item,{presentation:i})}),t===s?(0,E.tZ)(ea.G,{css:lq.middle}):null]},e.key+t)}),null===o?null:(0,E.BX)(lR.hg,{children:[(0,E.tZ)(lT.z,{css:lq.moreButton,children:(0,E.tZ)(lA.Z,{size:12})}),(0,E.tZ)(lG.Bf,{placement:"top right",children:(0,E.tZ)(lW,{items:u.slice(o)})})]})]})})}var lY=n(85127),l$=n(71089),lK=n(9853);function lQ(e){var t=e.presentation,n=(0,N.Gn)("codeSuggestion").preferences.codeSuggestion,r=lV();return(0,et.useEffect)(function(){r("compact"===t?"AI":null)},[r,t]),(0,E.BX)(E.HY,{children:[(0,E.tZ)(tJ.Z,{size:12,color:n?es.TV.blurpleDefault:void 0}),"compact"===t?null:(0,E.tZ)(ea.G,{children:"AI"})]})}var l0=(0,ep.X)({root:[es.l0.p(8),es.l0.maxWidth(260)],featureHeader:[es.l0.rowWithGap(8),es.l0.align.center],featureTitle:[es.l0.rowWithGap(4),es.l0.align.center,es.l0.flex.growAndShrink(1),es.l0.fontWeight.medium],enableAutocomplete:[es.l0.rowWithGap(4),es.l0.align.center],text:[es.l0.colWithGap(8)],hint:[es.l0.rowWithGap(4),es.l0.align.center]});function l1(){var e=(0,et.useId)(),t=(0,N.Gn)("codeSuggestion"),n=t.preferences.codeSuggestion,r=t.update;return(0,E.BX)(ea.G,{css:l0.root,children:[(0,E.BX)(ea.G,{css:l0.featureHeader,children:[(0,E.BX)(ea.G,{css:l0.featureTitle,children:[(0,E.tZ)(lY.Z,{color:es.TV.blurpleDefault}),(0,E.tZ)(tq.xv,{children:"AI Autocomplete"})]}),(0,E.BX)(ea.G,{css:l0.enableAutocomplete,children:[(0,E.tZ)(ea.G,{tag:"label",htmlFor:e,children:(0,E.tZ)(tq.xv,{color:"dimmer",variant:"small",children:"Enable"})}),(0,E.tZ)(l$.X,{id:e,checked:n,onChange:function(){return r({codeSuggestion:!n})}})]})]}),(0,E.BX)(ea.G,{css:l0.text,children:[(0,E.tZ)(tq.xv,{color:"dimmer",variant:"small",children:"Suggest lines of code as you type based on existing context."}),(0,E.BX)(ea.G,{css:l0.hint,children:[(0,E.tZ)(tq.xv,{color:"dimmer",variant:"small",children:"Press"}),(0,E.tZ)(iQ.bM,{small:!0,keyCombo:"Tab"}),(0,E.tZ)(tq.xv,{color:"dimmer",variant:"small",children:"to accept result"})]})]})]})}var l2=n(53557),l4=n(67242),l3=n(49926),l8=n(99477),l6=n(6481),l5=n(82241),l7=n(11894),l9=n(47857);function ce(e){var t=e.filePath,n=e.presentation,r=(0,N.Gn)("codeIntelligence").preferences.codeIntelligence,i=(0,ef.uN)(),o=(0,e0.Z)(t)[0],a=(0,S._)((0,et.useState)(null==o?void 0:o.getServerState()),2),l=a[0],c=a[1],s=(0,S._)((0,et.useState)(null==o?void 0:o.getServerHealth()),2),u=s[0],d=s[1],f=(0,S._)((0,et.useState)(!1),2),h=f[0],p=f[1],m=(0,L.IK)(i,tV.Q$),v=(0,et.useMemo)(function(){var e,n,r,i;return(r=null===(e=l2.$R.from(t))||void 0===e?void 0:e.name)?r:(r=null==m?void 0:null===(n=m.language)||void 0===n?void 0:n.name)&&r.length>0?(i=r).slice(0,1).toUpperCase()+i.slice(1).toLowerCase():(r=(0,en.r6)(t),m)?r:"Plain Text"},[t,m]),g=(0,et.useMemo)(function(){if(!r)return 6;if(null!==o&&u===rs.N.STALLED)return 3;var e=null!=o&&u===rs.N.READY;return h||l===rs.a.INITIALIZING||l===rs.a.INITIALIZED&&!e?0:e?1:l===rs.a.EXITED?2:null!==m?4:5},[o,h,m,u,l,r]);(0,et.useEffect)(function(){if(o)return p(!1),c(o.getServerState()),d(o.getServerHealth()),(0,rv.uf)([o.onServerStateChange(function(e){c(e)}),o.onServerHealthChange(function(e){d(e)})])},[o]);var y=(0,L.IK)(i,eJ.i5),b=(0,S._)((0,et.useState)(y?{title:y.name,value:y.id}:void 0),2),w=b[0],Z=b[1],x=(0,et.useRef)(!1);(0,et.useEffect)(function(){x.current||(null==w?void 0:w.value)===(null==y?void 0:y.id)||Z(y?{title:y.name,value:y.id}:void 0)},[w,y]);var C=lV();return(0,et.useEffect)(function(){C("Language support"+("compact"===n?" (".concat(v,")"):""))},[C,n,v]),(0,E.BX)(E.HY,{children:[(0,E.tZ)(co,{state:g}),"compact"===n?null:(0,E.tZ)(ea.G,{children:v})]})}var ct=(0,ep.X)({menu:[es.l0.p(8),es.l0.colWithGap(8),es.l0.maxWidth(390),es.l0.minWidth(390)],file:[es.l0.pl(4),es.l0.display.inlineFlex,es.l0.rowWithGap(4),es.l0.align.center,{verticalAlign:"top"}],section:[es.l0.rowWithGap(8),es.l0.align.center,es.l0.justify.spaceBetween],header:[es.l0.colWithGap(2),es.l0.flex.shrink(1)],selects:[es.l0.rowWithGap(4)],staticWidth:[es.l0.flex.grow(0),es.l0.flex.shrink(1)],variableWidth:[es.l0.flex.grow(1),es.l0.flex.shrink(0),{flexBasis:0}],flexEnd:[es.l0.align.end],red:[es.l0.color.redDefault],row:[es.l0.rowWithGap(8),es.l0.align.center]});function cn(e){var t=e.filePath,n=e.openSettings,r=(0,eD.Z)(),i=r.dotReplit,o=r.lspnix,a=(0,e0.Z)(t)[0],l=(0,S._)((0,et.useState)(null==a?void 0:a.getServerState()),2),c=l[0],s=l[1],u=(0,S._)((0,et.useState)(null==a?void 0:a.getServerHealth()),2),d=u[0],f=u[1],h=(0,S._)((0,et.useState)(!1),2),p=h[0],m=h[1];(0,et.useEffect)(function(){if(a)return m(!1),s(a.getServerState()),f(a.getServerHealth()),(0,rv.uf)([a.onServerStateChange(function(e){s(e)}),a.onServerHealthChange(function(e){f(e)})])},[a]);var v=(0,N.Gn)("codeIntelligence").preferences.codeIntelligence,g=(0,et.useCallback)(function(){v&&(o.disable(),o.enable(),m(!0))},[o,v]),y=(0,ef.uN)(),b=(0,L.IK)(y,tV.Q$),w=(0,et.useMemo)(function(){if(!v)return 6;if(null!==a&&d===rs.N.STALLED)return 3;var e=null!=a&&d===rs.N.READY;return p||c===rs.a.INITIALIZING||c===rs.a.INITIALIZED&&!e?0:e?1:c===rs.a.EXITED?2:null!==b?4:5},[a,p,b,d,c,v]),Z=(0,L.IK)(y,eJ.i5),x=(0,L.IK)(y,eJ.dt),k=(0,S._)((0,et.useState)(Z?{title:Z.name,value:Z.id}:void 0),2),T=k[0],R=k[1],D=(0,et.useRef)(!1),I=(0,et.useMemo)(function(){var e;return null!==(e=null==x?void 0:x.map(function(e){return{title:e.name,value:e.id,icon:void 0}}))&&void 0!==e?e:[]},[x]);return(0,E.BX)(ea.G,{css:ct.menu,children:[(0,E.BX)(tq.h4,{level:1,children:["Language support for ",(0,E.BX)("span",{css:ct.file,children:[(0,E.tZ)(M.Z,{path:t,size:16})," ",(0,E.tZ)("span",{children:(0,en.UO)(t)})]})]}),(0,E.tZ)(l4.R,{}),(0,E.tZ)(ci,{client:a,restart:g,state:w,openSettings:n,filePath:t}),x&&T?(0,E.BX)(E.HY,{children:[(0,E.tZ)(l4.R,{}),(0,E.BX)(ea.G,{css:ct.section,children:[(0,E.tZ)(ea.G,{css:[ct.header,ct.staticWidth],children:(0,E.tZ)(tq.xv,{multiline:!1,children:"Code Formatter"})}),1===x.length?(0,E.tZ)(ea.G,{css:[ct.header,ct.variableWidth,ct.flexEnd],children:(0,E.tZ)(tq.xv,{multiline:!1,children:T.title})}):(0,E.tZ)(ea.G,{css:ct.selects,children:(0,E.tZ)(l7.P,{placement:"top",items:I,selectedItem:(0,_._)((0,C._)({},T),{icon:D.current?(0,E.tZ)(n4.Z,{size:12}):void 0}),disabled:D.current,onChange:function(e){e.value!==T.value&&(D.current=!0,R(e),(function(e,t){return ca.apply(this,arguments)})(i,{path:t,formatterId:e.value}).finally(function(){return D.current=!1}))}})})]})]}):null]})}function cr(e){var t=(0,E.tZ)("a",{tabIndex:0,role:"button",onClick:e.restart,onKeyDown:function(t){"Enter"===t.key&&e.restart()},children:"Restart"});switch(e.state){case 0:return(0,E.tZ)(tq.xv,{multiline:!1,color:"dimmer",children:"Loading"});case 1:return(0,E.tZ)(tq.xv,{multiline:!1,color:"dimmer",children:"Active"});case 3:return(0,E.BX)(ea.G,{css:ct.row,children:[(0,E.tZ)(tq.xv,{css:ct.red,multiline:!1,children:"Stalled"})," ",t]});case 2:return(0,E.BX)(ea.G,{css:ct.row,children:[(0,E.tZ)(tq.xv,{css:ct.red,multiline:!1,children:"Stopped"})," ",t]});default:return null}}function ci(e){var t=function(){switch(e.state){case 0:case 1:case 2:case 3:return(0,E.BX)(E.HY,{children:[(0,E.tZ)(ea.G,{css:[ct.header,ct.variableWidth],children:(0,E.tZ)(tq.xv,{multiline:!1,children:e.client?e.client.clientName:"Language Server for ".concat(e.filePath)})}),(0,E.tZ)(ea.G,{css:[ct.header,ct.staticWidth],children:(0,E.tZ)(cr,{restart:e.restart,state:e.state})})]});case 5:case 4:return(0,E.tZ)(ea.G,{css:ct.header,children:(0,E.tZ)(tq.xv,{color:"dimmer",children:"Limited language support because the language server is not available."})});case 6:return(0,E.tZ)(ea.G,{css:ct.header,children:(0,E.BX)(tq.xv,{multiline:!0,color:"dimmer",children:["Code intelligence is disabled. Enable it in settings.",(0,E.tZ)("br",{}),(0,E.tZ)("a",{tabIndex:0,role:"button",onClick:e.openSettings,onKeyDown:function(t){"Enter"===t.key&&e.openSettings()},children:"Open settings"})]})});default:return null}}();return t?(0,E.BX)(ea.G,{css:ct.section,children:[" ",t," "]}):null}function co(e){switch(e.state){case 3:case 6:case 4:return(0,E.tZ)(l5.Z,{size:16});case 0:return(0,E.tZ)(n4.Z,{size:16,color:es.TV.blueStronger});case 1:return(0,E.tZ)(ea.G,{dataCy:"ws-code-intelligence-active",children:(0,E.tZ)(l8.Z,{size:16})});case 2:return(0,E.tZ)(l6.Z,{size:16});case 5:return(0,E.tZ)(l3.Z,{size:16})}}function ca(){return(ca=(0,e_._)(function(e,t){var n,r;return(0,eS.Jh)(this,function(i){return(n=".".concat((0,l9.mD)(t.path)),r="rules/formatter/fileExtensions/".concat(n,"/id"),t.formatterId)?[2,e.updateDotReplit([{path:"rules/formatter/fileExtensions",op:"add",value:JSON.stringify((0,tc._)({},"".concat(n),{id:t.formatterId}))}])]:[2,e.updateDotReplit([{path:r,op:"remove"}])]})})).apply(this,arguments)}(u=x||(x={}))[u.Loading=0]="Loading",u[u.Ready=1]="Ready",u[u.Exited=2]="Exited",u[u.Stalled=3]="Stalled",u[u.Partial=4]="Partial",u[u.Missing=5]="Missing",u[u.Disabled=6]="Disabled";var cl=n(46577),cc=n(72658);function cs(e){var t,n=e.presentation,r=(0,lm.Z)((t=(0,e_._)(function(e){var t,n,r,i;return(0,eS.Jh)(this,function(o){switch(o.label){case 0:return[4,e.getRepositoryState()];case 1:if((t=o.sent()).error)return[2,t];if(n=t.type,r=null,!(n!==cc.y5.INITIALIZING))return[3,3];return[4,e.status()];case 2:if((i=o.sent()).error)return[2,i];r=i,o.label=3;case 3:return[2,{branchName:null==r?void 0:r.branch,error:null}]}})}),function(e){return t.apply(this,arguments)})),i=!r||r.error?null:r.branchName,o=lV();return(0,et.useEffect)(function(){o("compact"===n&&i?i:null)},[o,n,i]),i?(0,E.BX)(E.HY,{children:[(0,E.tZ)(cl.Z,{color:t3.TV.foregroundDimmer,size:12}),"compact"===n?null:(0,E.tZ)(ea.G,{children:i})]}):null}var cu=n(39743),cd=n(44941),cf=(0,ep.X)({group:[es.l0.align.center,es.l0.rowWithGap(4)],row:[es.l0.align.center,es.l0.rowWithGap(8)]});function ch(e){var t,n,r,i,o,a,l,c,s=e.filePath,u=e.presentation,d=(n=(t=(0,S._)((0,et.useState)(null),2))[0],r=t[1],i=(0,e0.Z)(s),o=(0,cu.nC)(),a=(0,Q.dr)(),(0,et.useEffect)(function(){var e=function(e){var t,n=o().find(function(e){var t=(0,S._)(e,2);return"problems"===(t[0],t[1]).type});if(n){var r=a(n[0]);r&&"problems"===r.type&&(null===(t=r.updateProblems)||void 0===t||t.call(r,s,e))}},t=function(t){if(t.path===s){var n=[],o=!0,a=!1,l=void 0;try{for(var c,u=i[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value;d.isOpen(s)&&n.push.apply(n,(0,k._)(d.getDiagnostics(t.path)))}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}r(n),e(n)}},n=[],l=!0,c=!1,u=void 0;try{for(var d,f=i[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var h=d.value;h.isOpen(s)&&n.push.apply(n,(0,k._)(h.getDiagnostics(s)))}}catch(e){c=!0,u=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw u}}r(n),e(n);var p=[],m=!0,v=!1,g=void 0;try{for(var y,b=i[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var w=y.value;p.push(w.onDiagnostics(function(e){return t(e)}))}}catch(e){v=!0,g=e}finally{try{m||null==b.return||b.return()}finally{if(v)throw g}}return function(){p.forEach(function(e){return e()}),o().some(function(e){var t=(0,S._)(e,2),n=(t[0],t[1]);return"codeEditor"===n.type&&n.data.path===s})||e([])}},[i,s,o,a]),n),f=(0,et.useMemo)(function(){var e;return d?(e=d.reduce(function(e,t){return void 0===t.severity||(e[t.severity]=(e[t.severity]||0)+1),e},{}),d.length>0&&0===Object.keys(e).length&&(e[t6.DiagnosticSeverity.Error]=d.length),e):null},[d]),h=f&&null!==(l=f[t6.DiagnosticSeverity.Error])&&void 0!==l?l:0,p=f&&null!==(c=f[t6.DiagnosticSeverity.Warning])&&void 0!==c?c:0,m=null===f,v=lV();return((0,et.useEffect)(function(){if(m){v(null);return}var e="";0===h&&0===p&&(e="No problems"),h>0&&(e+="".concat((0,nq.Z)("Error",h),": ").concat(h)),p>0&&(e.length>0&&(e+=", "),e+="".concat((0,nq.Z)("Warning",p),": ").concat(p)),v(e)},[v,u,m,p,h]),f)?(0,E.BX)(ea.G,{css:cf.row,children:[(0,E.BX)(ea.G,{css:cf.group,children:[(0,E.tZ)(cd.Z,{severity:t6.DiagnosticSeverity.Error,size:12}),"compact"===u?null:(0,E.tZ)(tq.xv,{color:"dimmer",variant:"small",multiline:!1,children:String(h)})]}),(0,E.BX)(ea.G,{css:cf.group,children:[(0,E.tZ)(cd.Z,{severity:t6.DiagnosticSeverity.Warning,size:12}),"compact"===u?null:(0,E.tZ)(tq.xv,{color:"dimmer",variant:"small",multiline:!1,children:String(p)})]})]}):null}function cp(e){if(e.facet(rL.o))return"";var t=e.selection,n="",r=0;if(t.ranges.length>1){r=t.ranges.reduce(function(e,t){return e+(t.to-t.from)},0);var i=t.ranges.length;n="".concat(i," selections")}else{var o=t.ranges[0],a=e.doc.lineAt(o.head),l=o.head-a.from;r=o.to-o.from,n="Ln ".concat(a.number,", Col ").concat(l+1)}return r>0&&(n+=" (".concat(r," chars)")),n}function cm(e){var t=e.view,n=(0,et.useRef)(null);return(0,et.useEffect)(function(){var e,r=n.current,i=null!==(e=t.plugin(L.pE))&&void 0!==e?e:null;if(r&&i&&!i.destroyed){var o=null,a=t.state;r.textContent=cp(a);var l=i.bind({changed:function(e){return(0,eL.aU)(e,"selection",rL.o)},callback:function(e){a=e.state,null===o&&(o=requestAnimationFrame(function(){o=null,r.textContent=a?cp(a):""}))}});return function(){l(),null!==o&&cancelAnimationFrame(o),r.textContent=""}}},[t]),(0,E.tZ)("span",{ref:n,"data-cy":"current-position"})}var cv=n(9558),cg=n(22238);function cy(e,t,n){var r=[],i=0,o=!0,a=!1,l=void 0;try{for(var c,s=e.iterLines()[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value,d=i;if(i=i+u.length+1,0!==u.length){var f=(0,cg.L)(u,t),h=u.trimStart(),p=d+(u.length-h.length);if(0!==f&&d!==p){var m="";if(n===cv.Q.TABS){var v=Math.floor(f/t),g=f%t;m="	".repeat(v)+" ".repeat(g)}else n===cv.Q.SPACES&&(m=" ".repeat(f));m+h!==u&&r.push({from:d,to:p,insert:m})}}}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return eP.as.of(r,e.length)}var cb=n(99047),cw=n(99236),cZ=n(66548),cx=n(40509),cC=n(15434),c_=n(28675),cS=n(74035),ck=(0,ep.X)({surface:[es.l0.height("100%")],cursorOverlay:{cursor:"pointer"},menu:[es.l0.p(8),es.l0.colWithGap(8),es.l0.maxWidth(410)],file:[es.l0.pl(4),es.l0.display.inlineFlex,es.l0.rowWithGap(4),es.l0.align.center,{verticalAlign:"top"}],space:[es.l0.width(2),es.l0.color.foregroundDimmer,es.l0.textAlign.center],section:[es.l0.rowWithGap(8),es.l0.align.center,es.l0.justify.spaceBetween],header:[es.l0.colWithGap(2),es.l0.flex.shrink(1)],selects:[es.l0.rowWithGap(4)],sizeInput:{border:"none"},buttonsGroup:[es.l0.rowWithGap(8),es.l0.align.center,es.l0.justify.spaceBetween],saveButtons:[es.l0.rowWithGap(4)]});function cE(e){var t,n=e.filePath,r=e.openSettings,i=(0,N.Gn)("indentDetection","indentSize").preferences,o=(0,ef.uN)(),a=(0,L.IK)(o,rL.o),l=null!==a&&!!i.indentDetection&&a,c=(0,L.IK)(o,cb.K_),s=(0,L.IK)(o,cb.E2),u=(0,L.IK)(o,cb.vO),d=null!==(t=(0,L.IK)(o,eP.yy.tabSize))&&void 0!==t?t:i.indentSize,f="	"===(0,L.IK)(o,T.c)?cv.Q.TABS:cv.Q.SPACES,h=(0,S._)((0,et.useState)(!1),2),p=h[0],m=h[1],v=(0,S._)((0,et.useState)(f),2),g=v[0],y=v[1],b=(0,S._)((0,et.useState)(d),2),w=b[0],Z=b[1],x=(0,S._)((0,et.useState)(!1),2),C=x[0],_=x[1],R=(0,S._)((0,et.useState)(!1),2),D=R[0],I=R[1],B=(0,S._)((0,et.useState)(!1),2),G=B[0],A=B[1],P=(0,S._)((0,et.useState)(!1),2),O=P[0],U=P[1];(0,et.useEffect)(function(){C||(y(f),Z(d))},[f,d,C]),(0,et.useEffect)(function(){p||(y(f),Z(d),_(!1))},[p,f,d]),(0,et.useEffect)(function(){g===f&&w===d&&_(!1)},[g,w,f,d]),(0,et.useEffect)(function(){if(D||G||O){var e=setTimeout(function(){I(!1),A(!1),U(!1)},1e3);return function(){return clearTimeout(e)}}},[D,G,O]),l&&p&&m(!1);var X=(0,et.useCallback)(function(){if(o){var e=cy(o.state.doc,d,f);o.dispatch({changes:e,effects:cb.Fm.of(!0)}),A(!0)}},[o,f,d]),F=(0,et.useCallback)(function(){o&&(o.dispatch({effects:cb.Fm.of(!0)}),o.state.field(cb.E2)&&o.dispatch({effects:cb.O4.of({type:void 0,size:void 0})}),U(!0))},[o]),W=(0,et.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(o){var t=void 0,n=[cb.O4.of({type:g,size:w})];if(e){if(g!==f&&(t=cy(o.state.doc,d,g)),g===cv.Q.SPACES&&w!==d){var r=function(e,t,n,r){if(t===cv.Q.TABS)return eP.as.empty(e.length);var i=" ".repeat(r),o=[],a=0,l=!0,c=!1,s=void 0;try{for(var u,d=e.iterLines()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value,h=a;if(a=a+f.length+1,0!==f.length){var p=(0,cg.L)(f,n),m=f.trimStart(),v=h+(f.length-m.length);if(0!==p&&h!==v){var g=Math.floor(p/n),y=p%n,b=i.repeat(g)+" ".repeat(y);b+m!==f&&o.push({from:h,to:v,insert:b})}}}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}return eP.as.of(o,e.length)}(t?t.apply(o.state.doc):o.state.doc,g,d,w);t=t?t.compose(r):r}t&&n.push(cb.Fm.of(!0))}o.dispatch({changes:t,effects:n}),_(!1),I(!0)}},[o,f,d,g,w]),H=(0,et.useCallback)(function(){m(!1),r()},[r]),V=(0,et.useMemo)(function(){if(s){var e=s.size,t=s.type===cv.Q.SPACES?"spaces":"tabs";return"This file appears to use a unit of ".concat(e," ").concat(t,".")}return u?"Indentation detection hasn't been run on this file yet.":"This file is too small for indentation detection."},[s,u]);return(0,E.BX)(ea.G,{css:ck.menu,children:[(0,E.BX)(tq.h4,{level:1,children:["Indentation for",(0,E.BX)("span",{css:ck.file,children:[(0,E.tZ)(M.Z,{path:n,size:16})," ",(0,E.tZ)("span",{children:(0,en.UO)(n)})]})]}),c?(0,E.tZ)(cw.E,{colorway:"warning",icon:(0,E.tZ)(iK.Z,{}),text:"This file type requires that ".concat(c===cv.Q.SPACES?"spaces":"tabs"," be used for indentation.")}):null,(0,E.tZ)(l4.R,{}),(0,E.BX)(ea.G,{css:ck.section,children:[(0,E.BX)(ea.G,{css:ck.header,children:[(0,E.tZ)(tq.xv,{multiline:!1,children:"Indentation unit"}),(0,E.tZ)(tq.xv,{variant:"small",color:"dimmer",children:"The size and character to use when indenting lines."})]}),(0,E.BX)(ea.G,{css:ck.selects,children:[(0,E.tZ)(cS.qm,{css:ck.sizeInput,size:w,onChange:function(e){e!==w&&(Z(e),_(!0))}}),(0,E.tZ)(l7.P,{items:(0,k._)(cS.Ly),selectedItem:cS.Ly.find(function(e){return e.value===(g===cv.Q.SPACES?"spaces":"tabs")}),onChange:function(e){var t=(null==e?void 0:e.value)==="spaces"?cv.Q.SPACES:cv.Q.TABS;t!==g&&(y(t),_(!0))}})]})]}),(0,E.tZ)(l4.R,{}),i.indentDetection?(0,E.BX)(E.HY,{children:[(0,E.BX)(ea.G,{css:ck.section,children:[(0,E.BX)(ea.G,{css:ck.header,children:[(0,E.tZ)(tq.xv,{multiline:!1,children:"Detected indentation unit"}),(0,E.tZ)(tq.xv,{variant:"small",color:"dimmer",children:V})]}),O?(0,E.tZ)(iW.zx,{colorway:"positive",text:"Detected!",iconLeft:(0,E.tZ)(o6.Z,{}),onClick:F}):(0,E.tZ)(iW.zx,{text:s?"Re-detect":"Detect",iconLeft:(0,E.tZ)(cx.Z,{}),disabled:!u&&!s,onClick:F})]}),(0,E.tZ)(l4.R,{})]}):null,(0,E.BX)(ea.G,{css:ck.buttonsGroup,children:[(0,E.tZ)(iW.zx,{text:"Global settings",iconLeft:(0,E.tZ)(cC.Z,{}),onClick:H}),(0,E.tZ)(ea.G,{css:ck.saveButtons,children:D||G?(0,E.tZ)(E.HY,{children:D?(0,E.tZ)(iW.zx,{text:"Saved!",colorway:"positive",iconLeft:(0,E.tZ)(o6.Z,{}),onClick:function(){return W(!1)}}):(0,E.tZ)(iW.zx,{text:"Re-indented!",colorway:"positive",iconLeft:(0,E.tZ)(o6.Z,{}),onClick:X})}):(0,E.tZ)(E.HY,{children:C?(0,E.BX)(E.HY,{children:[(0,E.tZ)(iW.zx,{text:"Save and re-indent",colorway:"primary",iconLeft:(0,E.tZ)(c_.Z,{}),onClick:function(){return W(!0)}}),(0,E.tZ)(iW.zx,{text:"Save",iconLeft:(0,E.tZ)(o6.Z,{}),onClick:function(){return W(!1)}})]}):(0,E.tZ)(iW.zx,{text:"Re-indent file",iconLeft:(0,E.tZ)(c_.Z,{}),onClick:X})})})]})]})}function cT(e){var t,n=e.presentation,r=(0,N.Gn)("indentDetection","indentSize").preferences,i=(0,ef.uN)(),o=(0,L.IK)(i,rL.o),a=null!==o&&!!r.indentDetection&&o,l=null!==(t=(0,L.IK)(i,eP.yy.tabSize))&&void 0!==t?t:r.indentSize,c="	"===(0,L.IK)(i,T.c)?cv.Q.TABS:cv.Q.SPACES,s=lV();return(0,et.useEffect)(function(){s("File Indentation")},[s]),(0,E.BX)(E.HY,{children:[(0,E.tZ)(cD,{type:c,loading:a}),"compact"===n?null:(0,E.tZ)(cI,{type:c,size:l,loading:a})]})}function cR(e){var t=e.size,n=void 0===t?16:t,r=(0,nr._)(e,["size"]);return(0,E.tZ)(cZ.ZP,(0,_._)((0,C._)({size:n},r),{children:(0,E.tZ)("circle",{cx:n,cy:n,r:n/2,fillRule:"evenodd"})}))}function cD(e){var t=e.type;return e.loading?(0,E.tZ)(n4.Z,{size:12}):t===cv.Q.SPACES?(0,E.tZ)(cR,{color:es.TV.foregroundDimmer,size:12}):(0,E.tZ)(c_.Z,{color:es.TV.foregroundDimmer,size:12})}function cI(e){var t=e.type,n=e.size;if(e.loading)return(0,E.tZ)(tq.xv,{variant:"small",color:"dimmest",children:"Detecting..."});var r=t===cv.Q.SPACES?"Spaces":"Tabs";return(0,E.BX)(tq.xv,{variant:"small",color:"dimmer",children:[r,": ",n]})}function cB(e){var t=e.presentation,n=lV();return(0,et.useEffect)(function(){n("compact"===t?"History":null)},[n,t]),(0,E.BX)(E.HY,{children:["compact"===t?null:(0,E.tZ)(ea.G,{children:"History"}),(0,E.tZ)(j.Z,{size:12})]})}var cG=n(51953),cA=(0,ep.X)({text:[{textTransform:"capitalize"}]});function cP(e){var t=e.presentation,r=(0,S._)((0,et.useState)(null),2),i=r[0],o=r[1],a=(0,et.useRef)(null),l=(0,et.useRef)(null),c=lV(),s=(0,ef.uN)(),u=(0,N.Gn)("keyboardHandler").preferences,d=(null==u?void 0:u.keyboardHandler)==="vim",f=(0,et.useCallback)(function(e){var n=null!=e?e:"";if(s&&i&&void 0===e){var r,o,u=i.getCM(s);n=null!==(o=null==u?void 0:null===(r=u.state.vim)||void 0===r?void 0:r.mode)&&void 0!==o?o:"normal"}c("compact"===t?n:null),l.current=n,a.current&&a.current.innerText!==n&&(a.current.innerText=n||"")},[s,i,c,t]);return(0,et.useEffect)(function(){d&&!i&&n.e(9316).then(n.bind(n,4302)).then(function(e){o(e),f()})},[d,i,f]),(0,et.useEffect)(function(){if(s&&d&&i){var e,t=a.current,n=null!==(e=s.plugin(L.pE))&&void 0!==e?e:null;if(t&&n&&!n.destroyed)return n.bind({changed:function(){var e,t,n=i.getCM(s),r=null!==(t=null==n?void 0:null===(e=n.state.vim)||void 0===e?void 0:e.mode)&&void 0!==t?t:"";return l.current!==r},callback:function(){f()}})}},[s,d,i,f]),d?(0,E.BX)(E.HY,{children:[(0,E.tZ)(cG.Z,{size:12}),"compact"===t?null:(0,E.tZ)("span",{css:cA.text,ref:a})]}):null}var cL=n(51197);function cN(e){var t=e.presentation,n=e.toggled?"Diffing":"Diff",r=lV();return(0,et.useEffect)(function(){r("compact"===t?n:null)},[r,t,n]),(0,E.BX)(E.HY,{children:[(0,E.tZ)(cL.Z,{color:t3.TV.foregroundDimmer,size:12}),"compact"===t?null:(0,E.tZ)(ea.G,{children:n})]})}var cO=(0,ep.X)({root:[{borderTop:"1px solid ".concat(es.TV.backgroundHigher)},{height:"29px",contain:"strict"}]}),cU=(0,et.memo)(function(e){var t,n,r,i,o,a,l,c,s,u,d,h,p,m,v,g,y,b,w,Z,x,C,_,S=e.filePath,k=e.performPaneOperation,T=(0,et.useCallback)(function(e){return k({operation:"open",pane:e,secondary:!0})},[k]),R=(0,et.useCallback)(function(){return T({type:"preferences"})},[T]),D=(t=(0,lK.ZP)(),(0,lK.G_)(t)?{item:(0,E.tZ)(lQ,{}),popover:(0,E.tZ)(l1,{}),key:"ai"}:null),I=(r=(n={filePath:S,openSettings:R}).filePath,i=n.openSettings,{item:(0,E.tZ)(ce,{filePath:r,openSettings:i}),popover:(0,E.tZ)(cn,{openSettings:i,filePath:r}),key:"codeIntelligence"}),B=(o=(0,tN.P5)({controlName:"flag-lsp-diagnostics-in-footer",logFlagToAnalytics:!1}),a=(0,ef.uN)(),o?{item:(0,E.tZ)(ch,{filePath:S}),onClick:a?function(){return(0,tM.C)(a)}:void 0,key:"lspDiagnostics"}:null),G=(0,tN.P5)({controlName:"flag-status-bar-branch",logFlagToAnalytics:!1})?{item:(0,E.tZ)(cs,{}),onClick:function(){return T({type:"git"})},key:"currentBranch"}:null,A=(l=(0,tN.P5)({controlName:"flag-editor-git-inline-diff",logFlagToAnalytics:!1}),p=(c=(0,ef.uN)(),s=(0,L.IK)(c,tP),u=!c||!s||null===s.head,d=(null==s?void 0:s.mode)===f.INLINE_DIFF,h={toggle:(0,et.useCallback)(function(){if(!c)return null;c.dispatch({effects:tA.of(d?f.GUTTER_DIFF:f.INLINE_DIFF)})},[c,d]),toggled:d,disabled:u}).toggle,m=h.toggled,v=h.disabled,l&&!v?{item:(0,E.tZ)(cN,{toggled:m}),onClick:p,key:"toggleDiff"}:null),P={item:(0,E.tZ)(cP,{}),key:"vimMode"},N=(g=(0,ef.uN)())?{item:(0,E.tZ)(cm,{view:g}),onClick:function(){return(0,oS.zo)(g)},key:"currentPosition"}:null,O=(b=(y={filePath:S,performPaneOperation:k}).filePath,w=y.performPaneOperation,Z=(0,et.useCallback)(function(){w({operation:"replace",pane:{type:"history",data:{path:b}}})},[w,b]),{item:(0,E.tZ)(cB,{}),key:"history",onClick:Z}),U=(C=(x={filePath:S,openSettings:R}).filePath,_=x.openSettings,{item:(0,E.tZ)(cT,{}),popover:(0,E.tZ)(cE,{filePath:C,openSettings:_}),key:"indentation"});return(0,E.tZ)(lJ,{css:cO.root,left:[D,I,B,G,A,P],right:[N,U,O]})}),cM=(0,ep.X)({root:{position:"relative",display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%",width:"100%"}});function cX(e){var t=(0,ex.Do)(eZ.y.Editor),n=(0,eo.Z)();return(0,E.BX)("div",{ref:t,css:cM.root,children:[e.performPaneOperation?(0,E.tZ)(eC.$,{performPaneOperation:e.performPaneOperation,path:e.filePath}):null,(0,E.tZ)("div",{css:lu.ev,children:(0,E.tZ)(lS,{filePath:e.filePath,autoFocus:e.autoFocus,hideMobileKeyboardToolbar:e.hideMobileKeyboardToolbar,isHidden:e.isHidden,deeplink:e.deeplink,onDeeplinkUpdated:e.onDeeplinkUpdated,performPaneOperation:e.performPaneOperation})}),(0,E.tZ)("div",{style:{display:n?"none":"block"},children:(0,E.tZ)(cU,{filePath:e.filePath,performPaneOperation:e.performPaneOperation})}),e.hideMobileKeyboardToolbar?null:(0,E.tZ)(ew,{filePath:e.filePath,isLoading:!1})]})}var cF=n(89748),cW=n(63416),cH=(0,ep.X)({root:[es.l0.coverContainer,es.l0.center,es.l0.p(16)]});function cV(e){var t=e.message;return(0,E.tZ)(ea.G,{css:cH.root,children:(0,E.tZ)(ea.G,{children:(0,E.tZ)(cw.E,{icon:(0,E.tZ)(iK.Z,{}),colorway:"orange",text:t})})})}var cz=n(96264),cj=D.Dy.Object({type:D.Dy.Literal("codeEditor"),data:D.Dy.Object({path:D.Dy.Union([D.Dy.String({minLength:1}),D.Dy.Null()]),line:D.Dy.Optional(D.Dy.Number()),col:D.Dy.Optional(D.Dy.Number())})}),cq={Content:function(e){var t=e.pane,n=e.options;return(0,E.tZ)(cY,(0,_._)((0,C._)({},t.data),{isActive:n.isActive,isHidden:n.isHidden,performPaneOperation:n.performPaneOperation}))},Icon:function(e){var t=e.pane,n=e.size;return(0,E.tZ)(M.Z,{path:t.data.path||"",size:n})},getTitle:function(e){return e.data.path?(0,en.UO)(e.data.path):"No file open"},decode:function(e){return I.B4.Decode(cj,e)}};function cJ(e){var t,n,r,i,o,a,l,c,s=e.path,u=e.performPaneOperation,d=(0,ef.uN)(),f=(0,O.Z)(function(){return d?{match:cF.pl,data:{type:"action",label:"Toggle all folds",icon:(0,E.tZ)(W.Z,{}),run:function(){0===(0,T.q2)(d.state).size?(0,T.g_)(d):(0,T.jZ)(d)}}}:null},[d]),h=(0,L.IK)(d,B.W);(0,et.useEffect)(function(){h&&u({operation:"commit"})},[h,u]);var p=(0,cW.Mp)({path:s,performPaneOperation:u}),m=(t=(0,ef.uN)(),n=(0,L.IK)(t,G.SD),(0,O.Z)(function(){if(t&&n)return{match:cF.pl,data:{label:"Format "+(0,en.UO)(s),icon:(0,E.tZ)(z.Z,{}),type:"action",run:function(){(0,G.z1)(t)}}}},[n,s,t])),v=(r=(0,U.T3)(),o=(i=(0,N.Gn)("minimapDisplay")).preferences.minimapDisplay,a=i.update,(0,O.Z)(function(){return r?null:{match:cF.pl,data:{label:"Minimap",icon:(0,E.tZ)(F.Z,{}),type:"context"},commands:function(e){var t=e.active,n=e.search;return t||n?[{value:"none",label:"Hide",icon:(0,E.tZ)(V.Z,{})},{value:"characters",label:"Characters",icon:(0,E.tZ)(q.Z,{})},{value:"blocks",label:"Blocks",icon:(0,E.tZ)(J.Z,{})}].filter(function(e){return e.value!==o}).map(function(e){return{match:cF.pl,data:{type:"action",label:e.label,icon:e.icon,run:function(){a({minimapDisplay:e.value})}}}}):[]}}},[a,o,r])),g=(l=function(){return u({operation:"replace",pane:{type:"history",data:{path:s}}})},(0,O.Z)(function(){return{match:cF.pl,data:{label:"History",icon:(0,E.tZ)(j.Z,{}),type:"action",run:function(){l()}}}},[l])),y=(0,O.Z)(function(){var e=void 0;if((0,en.gK)(s)&&(e={type:"markdown",data:{path:s}}),(0,en.B4)(s)&&(e={type:"media",data:{path:s}}),e)return{match:cF.pl,data:{label:"Preview",icon:(0,E.tZ)(H.Z,{}),type:"action",run:function(){e&&u({operation:"replace",pane:e})}}}},[s,u]),b=(c=(0,cu.p9)(),{match:cF.pl,data:{label:"Reveal in file tree",icon:(0,E.tZ)(X.Z,{}),type:"action",run:function(){c(s)}}});return(0,Q.L5)(function(){if(d){var e=[];return m&&e.push(m),y&&e.push(y),e.push(g),v&&e.push(v),f&&e.push(f),e.push(b),p&&e.push.apply(e,(0,k._)(p)),{type:"codeEditor",commands:e,getEditorView:function(){return d},getCurrentSelectionText:function(){if(!d.state.selection.main.empty)return d.state.sliceDoc(d.state.selection.main.from,d.state.selection.main.to)},insertGhostwriterChatCode:function(e,t){(0,A.el)({view:d,insert:e,overwrite:t})},revertGhostwriterChatCode:function(){(0,A.iG)(d)},fetchProblems:function(){return(0,R.j)(d),(0,P.ge)(d.state)}}}},[d,m,y,g,v,f,b,p]),(0,Q.Wk)(function(){return d},[d]),null}function cY(e){var t,n,r,i,o,a,l,c,s=e.path,u=e.line,d=e.col,f=e.isActive,h=e.isHidden,p=e.performPaneOperation,m=(0,S._)((0,et.useState)(!h),2),v=m[0],g=m[1];v||h||g(!0);var y=(0,S._)((0,et.useState)(function(){return(0,ee.MT)()}),1)[0],b=(0,S._)((0,et.useState)(function(){return(0,ee.MT)()}),1)[0],w=(0,Y.useRouter)(),Z=!($().query.embed||$().query.lite)&&!(0,U.Gv)(w)&&f,x=(n=(t={path:s,replaceEditorPath:(0,et.useCallback)(function(e){p({operation:"replace",pane:{type:"codeEditor",data:{path:e}}})},[p]),getFileRenameInProgress:(0,K.p8)()}).path,r=t.replaceEditorPath,i=t.getFileRenameInProgress,o=(0,eD.Z)().fs,l=(a=(0,S._)((0,et.useState)(null),2))[0],c=a[1],(0,et.useEffect)(function(){if(n){if(n.startsWith("/"))return c('Cannot open "'.concat(n,'"')),function(){c(null)};var e=o.watchPathStat(n,{onNewStat:function(e){var t=i();if(!e.exists){if((null==t?void 0:t.from)===n){r(t.to);return}c('No file found at "'.concat(n,'", it may have been deleted'));return}if(e.type===iD.Tv.Directory){c('"'.concat(n,'" is a directory'));return}c(null)},onError:function(){c('Unknown error occured while read "'.concat(n,'", try re-opening the editor'))}});return function(){e(),c(null)}}},[i,o,n,r]),l),C=(0,O.Z)(function(){return{line:u,col:d}},[u,d]),_=(0,O.Z)(function(){return function(){p({operation:"replace",pane:{type:"codeEditor",data:{path:s}}})}},[p,s]);return s?x?(0,E.tZ)(cV,{message:x}):h&&!v?null:(0,E.tZ)(ef.Cl.Provider,{value:y,children:(0,E.BX)(cz.ox.Provider,{value:b,children:[(0,E.tZ)(cX,{filePath:s,autoFocus:Z,isHidden:null!=h&&h,deeplink:C,onDeeplinkUpdated:_,hideMobileKeyboardToolbar:!0,performPaneOperation:p},s),(0,E.tZ)(cJ,{path:s,isActive:f,performPaneOperation:p})]})}):null}},14209:function(e,t,n){n.d(t,{J:function(){return a}});var r=n(74044),i=n(99149),o=r.Dy.Object({type:r.Dy.Literal("commands"),data:r.Dy.Object({autoFocus:r.Dy.Boolean()})}),a=function(e){return i.B4.Decode(o,e)}},82278:function(e,t,n){n.d(t,{J:function(){return a}});var r=n(74044),i=n(99149),o=r.Dy.Object({type:r.Dy.Literal("config"),flow:r.Dy.Union([r.Dy.Literal("githubImport"),r.Dy.Literal("incompleteConfig")])}),a=function(e){return i.B4.Decode(o,e)}},12953:function(e,t,n){n.d(t,{R:function(){return sj}});var r,i,o,a,l,c,s,u,d,f,h,p,m=n(66626),v=n(4216),g=n(74044),y=n(99149),b=n(94778),w=n(29318),Z=n(72093),x=n(50959),C=n(15063),_=n(89885),S=n(27387),k=n(63257),E=n(96583),T=n(42516),R=n(47357),D=n(99236),I=n(82230),B=n(49224),G=n(87128),A=n(41733),P=n(30509),L=n(98924),N=n(41365),O=[Z.l0.px(8),Z.l0.pt(16)],U=(0,B.X)({root:[O],rootMaxWidth:[O,N.Qw.maxWidth]}),M=function(e){var t=e.children,n=e.maxWidth,r=(0,L._)(e,["children","maxWidth"]);return(0,v.tZ)(b.G,(0,P._)((0,A._)({},r),{css:n?U.rootMaxWidth:U.root,children:t}))},X=n(85763),F=n(2511),W=function(e){return e.loading?(0,v.tZ)(b.G,{css:[Z.l0.p(8),Z.l0.center],children:(0,v.tZ)(w.Z,{})}):null},H=(0,B.X)({error:[Z.l0.flex.grow(0),Z.l0.mt(0)]}),V=function(e){var t=e.text,n=(0,L._)(e,["text"]);return(0,v.tZ)(M,(0,P._)((0,A._)({css:H.error},n),{children:(0,v.tZ)(D.E,{colorway:"warning",icon:(0,v.tZ)(G.Z,{}),text:t})}))},z=(0,B.X)({back:[Z.l0.flex.row,Z.l0.align.center]}),j=function(e){var t=e.onBack;return(0,v.tZ)(b.G,{css:z.back,children:(0,v.tZ)(X.hU,{alt:"Back",tooltipBehavior:"hidden",onClick:t,children:(0,v.tZ)(F.Z,{})})})},q=n(60305),J=function(e){var t=e.context;(0,q.j)(q.U3.DEPLOYMENT_SECTION_VIEWED,{context:t})},Y=function(e,t){(0,q.j)(q.U3.DEPLOYMENT_DEBUG_SUMMARY_USED,{action:e,context:t})},$=n(94932),K=n(21262),Q=n(71440),ee=n(58995),et=n(99165);function en(){var e=(0,K._)(["\n  query ScheduledJobListExecution($deploymentId: String!) {\n    scheduledJobListExecutions(input: { deploymentId: $deploymentId }) {\n      __typename\n      ... on ScheduledJobListExecutionsResults {\n        results {\n          id\n          startedAt\n          endedAt\n          status\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return en=function(){return e},e}function er(){var e=(0,K._)(["\n  mutation CancelScheduledJobExecution(\n    $deploymentId: String!\n    $executionId: String!\n  ) {\n    cancelScheduledJobExecution(\n      input: { deploymentId: $deploymentId, executionId: $executionId }\n    ) {\n      __typename\n      ... on CancelScheduledJobExecutionResult {\n        execution {\n          id\n          startedAt\n          endedAt\n          status\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return er=function(){return e},e}var ei={},eo=(0,Q.Ps)(en()),ea=(0,Q.Ps)(er()),el=n(85438),ec=n(40509),es=n(2447),eu=n(54190),ed=n(38753),ef=n(97486),eh=n(27901),ep=n(43182),em=n(58474);function ev(){var e=(0,K._)(["\n  fragment ReplLogLine2 on ReplLog {\n    __typename\n    timestamp\n    line\n    level\n    isFromReplit\n    deploymentId\n    executionId\n    buildId\n  }\n"]);return ev=function(){return e},e}function eg(){var e=(0,K._)(["\n  query HostingDeploymentLogs2(\n    $replId: String!\n    $deploymentId: String!\n    $executionId: String\n    $start: DateTime\n    $end: DateTime\n    $message: String\n    $level: LogLevel\n    $limit: Int\n  ) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        __typename\n        hostingDeploymentLogs(\n          deploymentId: $deploymentId\n          executionId: $executionId\n          start: $start\n          end: $end\n          message: $message\n          level: $level\n          limit: $limit\n        ) {\n          ... on ReplLogs {\n            result {\n              ...ReplLogLine2\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on ServiceUnavailable {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return eg=function(){return e},e}function ey(){var e=(0,K._)(["\n  subscription HostingDeploymentLogUpdates(\n    $input: HostingDeploymentLogUpdatesInput!\n  ) {\n    hostingDeploymentLogUpdates(input: $input) {\n      ...ReplLogLine2\n    }\n  }\n  ","\n"]);return ey=function(){return e},e}var eb={},ew=(0,Q.Ps)(ev()),eZ=(0,Q.Ps)(eg(),ew),ex=(0,Q.Ps)(ey(),ew),eC=n(41974),e_=n(55927),eS=n(50157),ek=n(92468),eE=(0,x.createContext)(null),eT=function(){var e=(0,x.useContext)(eE);if(!e)throw Error("Expected log context in context");return e},eR=function(e){var t,n,r,i,o=e.deploymentId,a=e.replId,l=e.executionId,c=e.openFile,s=(0,m._)((0,x.useState)(null),2),u=s[0],d=s[1],f=(0,m._)((0,x.useState)([]),2),h=f[0],p=f[1],v=(0,m._)((0,x.useState)(),2),g=v[0],y=v[1],b=(0,m._)((0,x.useState)({message:"",executionId:l,start:null,end:null,level:null}),2),w=b[0],Z=b[1],C=(0,x.useCallback)(function(){return Z({message:"",executionId:l,start:null,end:null,level:null})},[l]),_=(0,m._)((0,x.useState)(!0),2),T=_[0],R=_[1],D=(0,m._)((0,x.useState)(!1),2),I=D[0],B=D[1],G=(0,m._)((0,x.useState)(!1),2),L=G[0],N=G[1],O=(0,m._)((0,x.useState)(!1),2),U=O[0],M=O[1],X=(0,m._)((0,ek.Z)("deployments-logs-color",!0),2),F=X[0],W=X[1],H=(0,x.useRef)(!1),V=(0,e_.Z)(function(e){var t=e.width;if(void 0!==t){var n=t>500;N(n),H.current||(H.current=!0,B(n))}}),z=(0,eS.iT)(),j=(t={ssr:!1,fetchPolicy:"network-only",variables:{deploymentId:o,replId:a,executionId:w.executionId?"d-scheduled-".concat(o,"-").concat(w.executionId):void 0,limit:100,level:w.level,message:w.message,start:null===(r=w.start)||void 0===r?void 0:r.toDate(z).toISOString(),end:null===(i=w.end)||void 0===i?void 0:i.toDate(z).toISOString()},onError:function(){y("Something went wrong"),p([])},onCompleted:function(e){if("hostingDeploymentLogs"in e.repl){if("ReplLogs"===e.repl.hostingDeploymentLogs.__typename){y(void 0);var t=e.repl.hostingDeploymentLogs.result,n=(0,k._)(t).reverse();if(!u){if(t.length>0){var r=new Date(t[0].timestamp);r.setSeconds(r.getSeconds()+1),d(r.toISOString())}else d(new Date().toISOString())}p(n)}else y(e.repl.hostingDeploymentLogs.message),p([])}}},n=(0,A._)({},eb,t),ee.a(eZ,n)),q=j.loading,J=j.fetchMore,Y=j.subscribeToMore,$=j.variables;(0,x.useEffect)(function(){q&&d(null)},[q]),(0,x.useEffect)(function(){d(null)},[w,o,a,l]),(0,x.useEffect)(function(){if(u)return Y({document:ex,variables:{input:(0,P._)((0,A._)({deploymentId:o,executionId:l},w),{start:w.end?w.start:u,level:w.level||void 0})},updateQuery:function(e,t){var n=t.subscriptionData;return(0,eC.Uy)(e,function(e){if(!("hostingDeploymentLogs"in e.repl))return e;if("ReplLogs"===e.repl.hostingDeploymentLogs.__typename){var t=n.data.hostingDeploymentLogUpdates;e.repl.hostingDeploymentLogs.result.unshift(t)}return e})}})},[Y,o,l,q,w,u]);var K=(0,x.useRef)(null),Q=(0,x.useRef)(!1),et=(0,x.useRef)(!1),en=(0,x.useCallback)((0,S._)(function(){var e,t,n,r;return(0,E.Jh)(this,function(i){switch(i.label){case 0:if(e=K.current?Math.abs(K.current.getTime()-Date.now()):0,q||K.current&&e<500||et.current||Q.current)return[2];return(t=new Date(h[0].timestamp)).setSeconds(t.getSeconds()-1),Q.current=!0,[4,J({variables:(0,P._)((0,A._)({},$),{end:t.toISOString()})})];case 1:return n=i.sent().data,Q.current=!1,"hostingDeploymentLogs"in n.repl&&"ReplLogs"===n.repl.hostingDeploymentLogs.__typename&&(K.current=new Date,0===n.repl.hostingDeploymentLogs.result.length?et.current=!0:(r=(0,k._)(n.repl.hostingDeploymentLogs.result).reverse(),p(function(e){return(0,k._)(r).concat((0,k._)(e))}))),[2]}})}),[J,q,h,$]);return(0,x.useMemo)(function(){return{logs:h,loading:q,error:g,fetchPage:en,isLive:T,setIsLive:R,isExpanded:I,setIsExpanded:B,filter:w,setFilter:Z,clearFilter:C,deploymentId:o,containerRef:V,isWide:L,isWrapped:U,setIsWrapped:M,openFile:c,isColorful:F,setIsColorful:W}},[C,V,o,g,en,w,F,I,T,L,U,q,h,c,W])},eD=n(12202),eI=n(19068),eB=n(9223),eG=(0,B.X)({root:[Z.l0.transition.none,Z.l0.reset.button,Z.l0.flex.row,Z.l0.align.center,Z.l0.font.code,Z.l0.fontSize(12),Z.l0.textAlign.left,Z.l0.position.absolute,Z.l0.top(0),Z.l0.left(0),Z.l0.width("100%"),Z.l0.color.foregroundDefault,Z.l0.border({color:Z.TV.outlineDimmest,direction:"bottom"}),Z.l0.highRes({borderWidth:.5}),{outline:"none",userSelect:"auto","--cell-background":"".concat(Z.TV.backgroundDefault),"&:hover":{backgroundColor:eI.vb.interactiveBackground,"--cell-background":"".concat(eI.vb.interactiveBackground),".copy":{display:"block"}},'&[data-error="true"]':[Z.l0.colorMixBg(Z.TV.accentNegativeDimmest,"transparent"),{borderBottomColor:Z.TV.accentNegativeDimmest,boxShadow:"0 -1px 0 0 "+Z.TV.accentNegativeDimmest,"&:hover":{"--cell-background":"".concat(Z.TV.accentNegativeDimmest),backgroundColor:"var(--cell-background) !important"},"&:active":{boxShadow:"0 -1px 0 0 "+Z.TV.accentPrimaryDefault}},Z.l0.highRes({boxShadow:"0 -0.5px 0 0 "+Z.TV.accentNegativeDimmest,"&:active":{boxShadow:"0 -0.5px 0 0 "+Z.TV.accentPrimaryDefault}})]}],primaryCell:[Z.l0.display.block,Z.l0.pl(6),Z.l0.py(6),Z.l0.pr(4),Z.l0.flex.growAndShrink(1),Z.l0.minHeight(26),{whiteSpace:"nowrap",'&[data-wrapped="true"]':{whiteSpace:"normal"},'&[data-new-flag="false"]':{cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",'&[data-wrapped="true"]':{whiteSpace:"normal"}},a:{color:"inherit","&:hover":{textDecoration:"underline"}}}],secondaryCell:[Z.l0.p(6),Z.l0.color.foregroundDimmest,Z.l0.truncate,{'&[data-error="true"]':Z.l0.color.accentNegativeStrongest}],copyColumn:[{display:"none",position:"absolute",top:"50%",zIndex:1,left:"calc(var(--width) + var(--scroll-left-offset))",transform:"translate(-100%, -50%)"}],copyButton:[{backgroundColor:"var(--cell-background) !important",color:"inherit"}]}),eA=(0,x.memo)(function(e){var t=e.log,n=e.y,r=e.height,i=e.resizeRef,o=e.index,a=e.isScrolling,l=e.columns,c=eT(),s=c.isWrapped,u=c.isColorful&&t.level===el.in.Error&&["INFO","DEBUG","TRACE"].every(function(e){return!t.line.includes(e)}),d=(0,x.useMemo)(function(){return(0,eB.Z)(t.line)},[t.line]);return(0,v.BX)("div",{tabIndex:0,role:"button",title:d,css:eG.root,style:{height:r,transform:"translateY(".concat(n,"px)")},"data-error":u,children:[l.map(function(e,n){var r=n===l.length-1,a=e.renderCell(t);return(0,v.tZ)(b.G,{css:r?eG.primaryCell:eG.secondaryCell,style:{width:e.width},innerRef:r?i:void 0,"data-index":o,"data-error":u,"data-wrapped":s,children:a},e.key)}),(0,v.tZ)("span",{css:eG.copyColumn,className:"copy",children:!a&&(0,v.tZ)(eD.m,{textToCopy:d,tooltipDisable:!0,css:eG.copyButton})})]})}),eP=n(63123),eL=n(78890),eN=n(81541),eO=n(73966),eU=n.n(eO),eM=n(92539),eX=new(n(69244)).cF,eF=function(e){var t=e.log,n=e.files,r=eT().openFile,i=t.line;i=t.level===el.in.Error?(0,eB.Z)(t.line):eX.toHtml(t.line);var o=(0,m._)((0,x.useState)([]),2),a=o[0],l=o[1];(0,x.useEffect)(function(){(0,eM.r)(i,function(){return Promise.resolve(n)}).then(function(e){return l(e)})},[n,i]);var c=(0,x.useCallback)(function(e){e.preventDefault();var t=e.target;t.dataset.file&&r({path:t.dataset.file})},[r]);return(0,v.tZ)("div",{dangerouslySetInnerHTML:{__html:function(e,t){t.sort(function(e,t){return e.from-t.from});var n="",r=0;return t.forEach(function(t){n+=e.slice(r,t.from);var i=e.slice(t.from,t.to);n+='<a href="#" data-file="'.concat(t.file,'">').concat(i,"</a>"),r=t.to}),n+=e.slice(r)}(i,a)},onKeyDown:c,onClick:c})},eW=n(64432),eH=n(73789),eV=n(59775),ez=function(e){var t=e.scrollRef,n=e.scrollBottomRef,r=(0,x.useRef)(!1);return(0,eu.q)(function(){t.current&&setTimeout(function(){n.current&&((0,eV.Z)(n.current),r.current=!0)},0)}),{didInitialScroll:r}},ej=function(e){var t,n=e.didInitialScroll,r=e.itemHeight,i=e.scrollRef,o=eT(),a=o.fetchPage,l=o.setIsLive,c=(0,m._)((0,x.useState)(!1),2),s=c[0],u=c[1],d=(0,m._)((0,x.useState)(0),2),f=d[0],h=d[1],p=(0,m._)((0,x.useState)(0),2),v=p[0],g=p[1],y=(0,x.useRef)(),b=(0,x.useRef)(!1);(0,x.useEffect)(function(){i.current&&h(i.current.offsetWidth-i.current.clientWidth)},[i]);var w=(0,x.useCallback)(function(e){(y.current||s)&&clearTimeout(y.current),u(!0),y.current=setTimeout(function(){u(!1),g(e.scrollLeft)},100)},[s]);return{scrollHandler:(0,x.useCallback)((t=(0,S._)(function(e){var t,i,o,c,s,u,d;return(0,E.Jh)(this,function(f){switch(f.label){case 0:if(!(t=e.currentTarget)||b.current)return[2];if(w(t),i=t.scrollHeight,o=t.scrollTop,l(s=i-(c=t.clientHeight)===o),u=20*r,!(!s&&o<u&&i>c&&n.current))return[3,5];b.current=!0,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,a()];case 2:return f.sent(),[3,4];case 3:return d=f.sent(),ep.Tb(d),[3,4];case 4:b.current=!1,f.label=5;case 5:return[2]}})}),function(e){return t.apply(this,arguments)}),[w,l,r,n,a]),isScrolling:s,scrollLeftOffset:v-f}},eq=function(e){var t=e.scrollRef,n=e.scrollBottomRef,r=eT(),i=r.loading,o=r.logs,a=r.isLive,l=r.isWrapped,c=(0,x.useRef)(0),s=(0,x.useRef)(o[0]),u=(0,x.useCallback)(function(){n.current&&(0,eV.Z)(n.current)},[n]);(0,x.useEffect)(function(){var e=t.current;if(e&&!i&&0!==o.length){if(a)e.scrollHeight>e.clientHeight&&u();else if(s.current&&s.current.timestamp>o[0].timestamp){var n=e.scrollHeight;if(n!==c.current){var r=n-c.current,l=e.scrollTop;e.scrollTo({top:l+r,behavior:"instant"})}}s.current=o[0],c.current=e.scrollHeight}},[a,i,o,t,u]);var d=(0,x.useRef)(l);(0,x.useEffect)(function(){a&&d.current!==l&&(u(),d.current=l)},[a,l,u])},eJ=(0,B.X)({root:[{overflow:"auto"},Z.l0.flex.growAndShrink(1)],virtualTable:[Z.l0.width("100%"),Z.l0.position.relative],tableHeader:[Z.l0.display.flex,Z.l0.flex.row,Z.l0.backgroundColor.backgroundDefault,Z.l0.position.sticky,Z.l0.zIndex(1),Z.l0.top(0),Z.l0.border({color:Z.TV.outlineDimmest,direction:"bottom"})],columnHeader:[Z.l0.color.foregroundDimmer,Z.l0.fontSize(12),{lineHeight:"18px"},Z.l0.px(6),Z.l0.justify.center],infoTooltip:[Z.l0.display.flex,Z.l0.align.center,Z.l0.gap(4),{lineHeight:0}],bottomAnchor:[Z.l0.position.absolute,Z.l0.bottom(0),Z.l0.left(0),Z.l0.right(0)]}),eY=function(){var e=eT().isColorful,t=(0,eN.f)();return(0,x.useMemo)(function(){var n={};if(t){var r=!0,i=!1,o=void 0;try{for(var a,l=Object.entries(t)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=(0,m._)(a.value,2),s=c[0],u=c[1];n["--ansi-".concat(eU()(s))]=e?u:"currentColor"}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}return n},[e,t])};function e$(){var e=eT(),t=e.loading,n=e.error,r=e.logs,i=e.isExpanded,o=e.isWrapped,a=e.isWide,l=!!(t||n),c=(0,x.useRef)(null),s=(0,x.useRef)(null),u=(0,ed.sG)(),d=eY(),f=u?44:26,h=(0,R.MG)({count:(null==r?void 0:r.length)||0,getScrollElement:function(){return c.current},estimateSize:function(){return f},overscan:10,measureElement:function(e){return e.getBoundingClientRect().height},rangeExtractor:function(e){var t=new Set([0].concat((0,k._)((0,em.MK)(e))));return(0,k._)(t)}});eq({scrollRef:c,scrollBottomRef:s});var p=ej({didInitialScroll:ez({scrollRef:c,scrollBottomRef:s}).didInitialScroll,itemHeight:f,scrollRef:c}),g=p.scrollHandler,y=p.isScrolling,w=p.scrollLeftOffset,Z=(0,C.$y)(),_=(null==Z?void 0:Z.provider)===el.r4.Cron,S=(0,x.useMemo)(function(){var e;return 8*(e=Math).max.apply(e,(0,k._)((null==r?void 0:r.map(function(e){return e.line.length}))||[]))},[r]),E=(0,C.XZ)().listFiles,T=(0,m._)((0,x.useState)([]),2),D=T[0],I=T[1];(0,x.useEffect)(function(){E().then(function(e){e.files&&I(e.files)})},[E]);var B=(0,ed.sG)(),G=(0,x.useMemo)(function(){return[{key:"time",title:(0,v.BX)("span",{css:eJ.infoTooltip,children:["Time",!B&&(0,v.tZ)(eW.u,{tooltip:"Logs persist for up to 30 days",css:eJ.infoTooltip,children:(0,v.tZ)(eH.Z,{size:12})})]}),width:a?173:115,renderCell:function(e){var t=(0,eP.Z)(e.timestamp);return(0,eL.Z)(t,a?"yyyy-MM-dd HH:mm:ss.SS":"MM-dd HH:mm:ss")}},i&&{key:"build",title:"Deployment",width:75,renderCell:function(e){var t=e.buildId.split("-");return t?t[0]:e.buildId}},_&&{key:"run",title:"Run",width:50,renderCell:function(e){var t,n=null===(t=e.executionId)||void 0===t?void 0:t.split("-");return n?n[n.length-1]:""}},i&&{key:"source",title:"Source",width:57,renderCell:function(e){return e.isFromReplit?"System":"User"}},{width:o?void 0:S,key:"log",title:"Log",renderCell:function(e){return(0,v.tZ)(eF,{files:D,log:e})}}].filter(Boolean)},[D,_,i,B,a,o,S]),P=(0,x.useMemo)(function(){return G.reduce(function(e,t){return e+(t.width||0)},0)},[G]);return(0,v.tZ)(b.G,{innerRef:c,css:eJ.root,onScroll:g,children:(0,v.BX)(b.G,{style:(0,A._)({height:h.getTotalSize(),minWidth:P,"--scroll-left-offset":"".concat(w,"px")},d),css:eJ.virtualTable,children:[(0,v.tZ)(b.G,{css:eJ.tableHeader,children:G.map(function(e){return(0,v.tZ)(b.G,{tag:"div",css:eJ.columnHeader,style:{width:e.width,flex:e.width?void 0:1,height:f},children:e.title},e.key)})}),h.getVirtualItems().map(function(e){var t=r[e.index];return t?(0,v.tZ)(eA,{log:t,height:e.size,y:e.start,resizeRef:h.measureElement,index:e.index,disabled:l,isScrolling:y,columns:G},e.key):null}),(0,v.tZ)("div",{ref:s,css:eJ.bottomAnchor})]})})}var eK=(0,B.X)({root:[Z.l0.flex.grow(1)],noLogsContainer:[Z.l0.colWithGap(8),Z.l0.pt(4)],noLogsText:[Z.l0.textAlign.center],viewError:[Z.l0.pt(0)]});function eQ(){var e=eT(),t=e.logs,n=e.error;return e.loading?(0,v.tZ)(M,{css:eK.root,children:(0,v.tZ)(W,{loading:!0})}):0===t.length?(0,v.BX)(v.HY,{children:[n?(0,v.tZ)(V,{css:eK.viewError,text:n}):null,(0,v.tZ)(M,{css:eK.root,children:(0,v.BX)(b.G,{css:eK.noLogsContainer,children:[(0,v.tZ)(I.xv,{css:eK.noLogsText,children:"No logs are available."}),(0,v.BX)(I.xv,{color:"dimmer",css:eK.noLogsText,children:["Having trouble?"," ",(0,v.tZ)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",onClick:function(){return J({context:"troubleshooting_doc"})},target:"_blank",children:"Troubleshooting tips"})]})]})})]}):(0,v.tZ)(e$,{})}var e0=n(15235),e1=n(1712),e2=n(92286),e4=n(73705),e3=n(71089),e8=n(72370),e6=n(66548);function e5(e){return(0,v.tZ)(e6.ZP,(0,P._)((0,A._)({},e),{viewBox:"0 0 16 16",fill:"none",children:(0,v.tZ)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 11.5H10A3.5 3.5 0 0013.5 8v0A3.5 3.5 0 0010 4.5H2.5m2 7L7 9m-2.5 2.5L7 14"})}))}var e7=n(79050),e9=(0,B.X)({root:[Z.l0.rowWithGap(8),Z.l0.justify.spaceBetween,Z.l0.border({color:Z.TV.outlineDimmest,direction:"top"}),Z.l0.height(29)],group:[Z.l0.display.flex,Z.l0.rowWithGap(8)],button:[Z.l0.color.foregroundDefault,Z.l0.borderRadius(0),Z.l0.height("100%")],liveIndicatorWrapper:[Z.l0.width(16),Z.l0.height(16),Z.l0.display.flex,Z.l0.align.center,Z.l0.justify.center],liveIndicator:[Z.l0.width(6),Z.l0.height(6),Z.l0.borderRadius("full"),Z.l0.backgroundColor.accentPositiveStronger],checkboxWrapper:[Z.l0.display.flex,Z.l0.align.center,Z.l0.rowWithGap(4),Z.l0.cursor.pointer],checkbox:[{input:[Z.l0.width(16),Z.l0.height(16)]}]});function te(){var e=eT(),t=e.isLive,n=e.setIsLive,r=e.isExpanded,i=e.setIsExpanded,o=e.isWrapped,a=e.setIsWrapped,l=e.isColorful,c=e.setIsColorful,s=(0,e8.U)();return(0,v.BX)(b.G,{css:e9.root,children:[(0,v.BX)(b.G,{css:e9.group,children:[(0,v.tZ)(e0.zx,{iconLeft:r?(0,v.tZ)(e2.Z,{rotate:90}):(0,v.tZ)(e4.Z,{rotate:90}),onClick:function(){return i(function(e){return!e})},variant:"nofill",text:r?"Collapse":"Expand",css:e9.button}),(0,v.BX)("label",{css:e9.checkboxWrapper,htmlFor:s("wrap"),children:[(0,v.tZ)(e3.X,{id:s("wrap"),checked:o,onChange:function(){return a(function(e){return!e})},css:e9.checkbox}),(0,v.tZ)(e5,{}),(0,v.tZ)("span",{children:"Wrap"})]}),(0,v.BX)("label",{css:e9.checkboxWrapper,htmlFor:s("colorful"),children:[(0,v.tZ)(e3.X,{id:s("colorful"),checked:l,onChange:function(){return c(function(e){return!e})},css:e9.checkbox}),(0,v.tZ)(e7.Z,{}),(0,v.tZ)("span",{children:"Colors"})]})]}),(0,v.tZ)(b.G,{css:e9.group,children:(0,v.tZ)(e0.zx,{iconLeft:t?(0,v.tZ)(b.G,{css:e9.liveIndicatorWrapper,children:(0,v.tZ)(b.G,{css:e9.liveIndicator})}):(0,v.tZ)(e1.Z,{}),onClick:function(){return n(function(e){return!e})},variant:"nofill",text:"Live",css:e9.button})})]})}var tt=n(39667),tn=n(19054),tr=n(67242),ti=n(26246),to=n(63713),ta=n(8817),tl=n(64318),tc=n(53928),ts=(0,B.X)({buttonGroup:[Z.l0.flex.row,Z.l0.rowWithGap(1),{button:{"&:not(:first-child)":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0}}}],checkboxWithLabel:[Z.l0.rowWithGap(8),Z.l0.p(8)],dateRangeInputs:[Z.l0.display.grid,Z.l0.gap(8),Z.l0.align.center,{gridTemplateColumns:"min-content 200px",gridAutoFlow:"row",gridAutoRows:"1fr"}],clearFilterButton:[Z.l0.borderRadius(0),Z.l0.width("fit-content")]});function tu(e){var t=e.onClear,n=e.label,r=e.buttonProps,i=e.children,o=t?"primary":void 0,a=(0,m._)((0,x.useState)(!1),2),l=a[0],c=a[1];return(0,v.BX)(ta.Z,{css:ts.buttonGroup,children:[(0,v.BX)(tc.xo,{label:n,isOpen:l,onOpenChange:c,noArrow:!0,background:"higher",children:[(0,v.tZ)(e0.zx,(0,A._)({colorway:o},r)),i]}),t?(0,v.tZ)(e0.zx,{colorway:o,text:"",iconLeft:(0,v.tZ)(tl.Z,{}),onClick:t}):null]})}var td=n(43449),tf=n(18060),th=n(88885),tp=n(52028),tm=n(16348),tv=n(51042),tg=n(42914),ty=n(87645),tb=n(1383),tw=(0,B.X)({group:[Z.l0.display.flex,{gap:Z.TV.space4},Z.l0.position.relative],dateInput:[tf.u3,Z.l0.flex.row,{gap:Z.TV.space4}],dateSegment:[Z.l0.borderRadius(2),{outline:"none","&[data-focused=true]":{outline:"2px solid ".concat(Z.TV.accentPrimaryDefault),outlineOffset:1}}],iconButton:[Z.l0.position.absolute,Z.l0.top("50%"),Z.l0.right(0),{transform:"translateY(-50%)"}],calendar:[Z.l0.p(8)],calendarHeader:[Z.l0.flex.row,Z.l0.align.center,Z.l0.justify.spaceBetween],calendarHeaderText:[Z.l0.fontSize(Z.TV.fontSizeDefault),Z.l0.color.foregroundDefault,Z.l0.fontWeight.normal],arrowButton:[eI.gU.listItem,Z.l0.borderRadius("default"),Z.l0.p(4),{appearance:"none",background:"transparent",border:"none"}],calendarGrid:[Z.l0.mt(8),{th:[Z.l0.height(14),Z.l0.color.foregroundDimmer,Z.l0.fontWeight.normal,Z.l0.pb(4)]}],calendarCell:[eI.gU.listItem,Z.l0.flex.column,Z.l0.fontSize(Z.TV.fontSizeDefault),Z.l0.width(32),Z.l0.height(28),Z.l0.borderRadius("default"),{textAlign:"center",justifyContent:"center",'&[data-outside-visible-range="true"]':[Z.l0.display.none],'&[data-selected="true"]':{"&, &:hover":[Z.l0.backgroundColor.accentPrimaryDimmer]}}]});function tZ(e){var t=(0,m._)((0,x.useState)(!1),2),n=t[0],r=t[1];return(0,v.tZ)(tp.Mt,(0,P._)((0,A._)({},e),{children:(0,v.BX)(ta.Z,{css:tw.group,children:[(0,v.tZ)(tm.Wr,{css:tw.dateInput,children:function(e){return(0,v.tZ)(tm.kE,{segment:e,css:tw.dateSegment})}}),(0,v.BX)(tc.xo,{label:"Calendar",isOpen:n,onOpenChange:r,children:[(0,v.tZ)(X.hU,{alt:"Open calendar",tooltipBehavior:"hidden",css:tw.iconButton,children:(0,v.tZ)(th.Z,{})}),(0,v.BX)(tv.f,{css:tw.calendar,children:[(0,v.BX)("header",{css:tw.calendarHeader,children:[(0,v.tZ)(tg.z,{slot:"previous",css:tw.arrowButton,children:(0,v.tZ)(F.Z,{})}),(0,v.tZ)(ty.X,{css:tw.calendarHeaderText}),(0,v.tZ)(tg.z,{slot:"next",css:tw.arrowButton,children:(0,v.tZ)(tb.Z,{})})]}),(0,v.tZ)(tv.TK,{css:tw.calendarGrid,children:function(e){return(0,v.tZ)(tv.VX,{date:e,css:tw.calendarCell})}})]})]})]})}))}var tx=(0,B.X)({section:[Z.l0.p(8),Z.l0.gap(8)],dateRangeInputs:[Z.l0.display.grid,Z.l0.gap(8),Z.l0.align.center,{gridTemplateColumns:"min-content 200px",gridAutoFlow:"row",gridAutoRows:"1fr"}]}),tC=function(){var e=eT(),t=e.filter,n=e.setFilter;return(0,v.BX)(b.G,{css:tx.dateRangeInputs,children:[(0,v.tZ)(to._,{variant:"text",children:"After"}),(0,v.tZ)(tZ,{granularity:"minute",hourCycle:24,value:t.start,onChange:function(e){return n(function(t){return(0,P._)((0,A._)({},t),{start:e})})}}),(0,v.tZ)(to._,{variant:"text",children:"Before"}),(0,v.tZ)(tZ,{granularity:"minute",hourCycle:24,value:t.end,onChange:function(e){return n(function(t){return(0,P._)((0,A._)({},t),{end:e})})}})]})},t_=function(){var e=eT(),t=e.filter,n=e.setFilter,r=(0,eS.iT)(),i=t.start||t.end,o="Date",a=t.start&&(0,eL.Z)(t.start.toDate(r),"M/d/yy"),l=t.end&&(0,eL.Z)(t.end.toDate(r),"M/d/yy");return a&&l?o="".concat(a," to ").concat(l):a?o="After ".concat(a):l&&(o="Before ".concat(l)),(0,v.tZ)(tu,{label:"Date range",onClear:i?function(){return n(function(e){return(0,P._)((0,A._)({},e),{start:null,end:null})})}:void 0,buttonProps:{text:o,iconRight:i?void 0:(0,v.tZ)(td.Z,{})},children:(0,v.tZ)(b.G,{css:tx.section,children:(0,v.tZ)(tC,{})})})},tS=(0,B.X)({inputContainer:[Z.l0.p(8)]}),tk=function(){var e=eT(),t=e.filter,n=e.setFilter,r=(0,m._)((0,x.useState)(t.executionId),2),i=r[0],o=r[1];return(0,x.useEffect)(function(){o(t.executionId)},[t.executionId]),(0,v.tZ)(tf.II,{placeholder:"*****",value:i||"",onChange:function(e){var t=e.target.value;o(t),t&&5!==t.length||n(function(e){return(0,P._)((0,A._)({},e),{executionId:t})})},onBlur:function(){return n(function(e){return(0,P._)((0,A._)({},e),{executionId:i})})},onKeyDown:function(e){"Enter"===e.key&&n(function(e){return(0,P._)((0,A._)({},e),{executionId:i})})}})},tE=function(){var e=eT(),t=e.filter,n=e.setFilter;return(0,v.tZ)(tu,{onClear:t.executionId?function(){return n(function(e){return(0,P._)((0,A._)({},e),{executionId:null})})}:void 0,label:"Run ID",buttonProps:{text:t.executionId?"Run: ".concat(t.executionId):"Run ID",iconRight:t.executionId?void 0:(0,v.tZ)(td.Z,{})},children:(0,v.tZ)(b.G,{css:tS.inputContainer,children:(0,v.tZ)(ti.nv,{children:(0,v.tZ)(tk,{})})})})},tT=function(){var e=(0,C.$y)();return(null==e?void 0:e.provider)===el.r4.Cron},tR=(0,B.X)({root:[Z.l0.p(8),Z.l0.rowWithGap(8),{"> *:first-child":Z.l0.flex.grow(1)}],divider:Z.l0.backgroundColor.outlineDimmer,section:[Z.l0.p(8),Z.l0.gap(8)],checkboxWithLabel:[Z.l0.rowWithGap(8),Z.l0.p(8)],buttonInnerCheckbox:[{pointerEvents:"none"}],clearFilterButton:[Z.l0.borderRadius(0),Z.l0.width("fit-content")]}),tD=function(){var e=eT(),t=e.filter,n=e.setFilter,r=function(){n(function(e){return(0,P._)((0,A._)({},e),{level:e.level===el.in.Error?null:el.in.Error})})};return(0,v.tZ)(e0.zx,{colorway:t.level===el.in.Error?"primary":void 0,text:"Errors only",iconLeft:(0,v.tZ)(e3.X,{onChange:r,checked:t.level===el.in.Error}),onClick:r})},tI=function(){var e=tT();return(0,v.BX)(v.HY,{children:[(0,v.tZ)(tD,{}),(0,v.tZ)(t_,{}),e&&(0,v.tZ)(tE,{})]})},tB=function(){var e=eT(),t=e.filter,n=e.setFilter,r=e.clearFilter,i=tT(),o=!!(t.message||t.level||t.start||t.end||t.executionId),a=(0,e8.U)();return(0,v.tZ)(tu,{label:"Filter",buttonProps:{text:"",iconLeft:(0,v.tZ)(tn.Z,{})},onClear:o?r:void 0,children:(0,v.BX)(b.G,{children:[(0,v.BX)(b.G,{css:tR.checkboxWithLabel,children:[(0,v.tZ)(e3.X,{name:"Filter by errors only",id:a("errors-only"),checked:t.level===el.in.Error,onChange:function(e){return n(function(t){return(0,P._)((0,A._)({},t),{level:e?el.in.Error:null})})}}),(0,v.tZ)("label",{htmlFor:a("errors-only"),children:"Errors only"})]}),i?(0,v.BX)(v.HY,{children:[(0,v.tZ)(tr.R,{css:tR.divider}),(0,v.tZ)(b.G,{css:tR.section,children:(0,v.BX)(ti.nv,{children:[(0,v.tZ)(to._,{color:"dimmer",children:"Run ID"}),(0,v.tZ)(tk,{})]})})]}):null,(0,v.tZ)(tr.R,{css:tR.divider}),(0,v.BX)(b.G,{css:tR.section,children:[(0,v.tZ)(to._,{color:"dimmer",children:"Date range"}),(0,v.tZ)(tC,{})]}),(0,v.tZ)(tr.R,{css:tR.divider}),(0,v.tZ)(e0.zx,{variant:"nofill",onClick:function(){return r()},text:"Clear all filters",alignment:"start",css:tR.clearFilterButton})]})})};function tG(){var e=eT(),t=e.filter,n=e.setFilter,r=e.isWide,i=(0,m._)((0,x.useState)(t.message),2),o=i[0],a=i[1];return(0,x.useEffect)(function(){a(t.message)},[t.message]),(0,v.BX)(b.G,{css:tR.root,children:[(0,v.tZ)(tt.E,{placeholder:"Search",value:o,onChange:function(e){a(e.target.value),""===e.target.value&&n(function(e){return(0,P._)((0,A._)({},e),{message:""})})},onBlur:function(){return n(function(e){return(0,P._)((0,A._)({},e),{message:o})})},onClear:function(){n(function(e){return(0,P._)((0,A._)({},e),{message:""})})},onKeyDown:function(e){"Enter"===e.key&&n(function(e){return(0,P._)((0,A._)({},e),{message:o})})}}),r?(0,v.tZ)(tI,{}):(0,v.tZ)(tB,{})]})}var tA=(0,B.X)({root:[Z.l0.flex.growAndShrink(1),Z.l0.overflow("hidden")],header:[Z.l0.colWithGap(8),Z.l0.p(6),{borderBottom:"1px solid ".concat(Z.TV.outlineDimmest)}],headerActions:[Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.justify.spaceBetween]}),tP=function(e){var t=e.deploymentId,n=e.replId,r=e.executionId,i=e.onBack,o=e.openFile;return t?(0,v.tZ)(tL,{deploymentId:t,replId:n,executionId:r,onBack:i,openFile:o}):(0,v.tZ)(M,{children:(0,v.tZ)(D.E,{colorway:"warning",icon:(0,v.tZ)(G.Z,{}),text:"Deployment not found"})})};function tL(e){var t=e.deploymentId,n=e.replId,r=e.executionId,i=e.onBack,o=eR({deploymentId:t,replId:n,executionId:r,openFile:e.openFile});return(0,eu.q)(function(){J({context:$.k.Logs})}),(0,v.tZ)(eE.Provider,{value:o,children:(0,v.BX)(b.G,{css:tA.root,innerRef:o.containerRef,children:[i?(0,v.tZ)(b.G,{css:tA.header,children:(0,v.tZ)(b.G,{css:tA.headerActions,children:(0,v.tZ)(X.hU,{alt:"Back",onClick:i,children:(0,v.tZ)(F.Z,{})})})}):null,(0,v.tZ)(tG,{}),(0,v.tZ)(eQ,{}),(0,v.tZ)(te,{})]})})}var tN=n(39864),tO=n(69170);function tU(){var e=(0,K._)(["\n  fragment ExecuteScheduledJobExecution on ScheduledJobExecution {\n    id\n    startedAt\n    endedAt\n    status\n  }\n"]);return tU=function(){return e},e}function tM(){var e=(0,K._)(["\n  mutation ExecuteScheduledJob($deploymentId: String!) {\n    executeScheduledJob(input: { deploymentId: $deploymentId }) {\n      __typename\n      ... on ExecuteScheduledJobResult {\n        execution {\n          ...ExecuteScheduledJobExecution\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return tM=function(){return e},e}var tX={},tF=(0,Q.Ps)(tU()),tW=(0,Q.Ps)(tM(),tF),tH=n(88736);function tV(e){var t,n=e.disabled,r=e.onSuccessfulExecution,i=(0,C.hn)(),o=(0,C.$y)(),a=(0,C.kW)(),l=(0,tO.Z)().showError,c=(0,m._)((0,x.useState)(),2),s=c[0],u=c[1],d=function(e){u(e.message),l(e.message)},f=(0,m._)((t=(0,A._)({},tX,{onError:d,onCompleted:function(e){var t=e.executeScheduledJob;if("ExecuteScheduledJobResult"===t.__typename){null==r||r(t.execution);return}d(Error("An error occurred while executing the scheduled job"))}}),et.D(tW,t)),2),h=f[0],p=f[1].loading,g=!!(!i||!o||p||s||void 0!==n&&n),y=(null==o?void 0:o.status)===el.Fe.Success,b=a===_.z.Ready,Z=!g&&b&&y,S=b?"You must successfully deploy your project before being able to run it":"Can't run while deployment is ".concat((0,tH.Sj)(a));return(0,v.tZ)(eW.u,{tooltip:S,isDisabled:Z,children:(0,v.tZ)(e0.zx,{text:"Run now",iconLeft:p?(0,v.tZ)(w.Z,{}):(0,v.tZ)(tN.Z,{}),size:"small",disabled:g||!Z,onClick:function(){i&&!g&&h({variables:{deploymentId:i}})}})})}var tz=(0,B.X)({root:[Z.l0.flex.growAndShrink(1),Z.l0.overflow("hidden")],executionListHeader:[Z.l0.colWithGap(8),Z.l0.p(6),{borderBottom:"1px solid ".concat(Z.TV.outlineDimmest)}],executionListHeaderActions:[Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.justify.spaceBetween],executionList:[{overflow:"auto"},Z.l0.flex.growAndShrink(1)],executionListRows:{width:"100%",position:"relative"},executionItem:[Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.fontSize(12),Z.l0.px(8),{position:"absolute",top:0,left:0,width:"100%",borderBottom:"1px solid ".concat(Z.TV.outlineDimmest),color:Z.TV.foregroundDimmer}],executionItemStatusDot:[Z.l0.width("6px"),Z.l0.height("6px"),Z.l0.borderRadius("full"),Z.l0.flex.shrink(0),Z.l0.pr(4)],executionItemDistance:[Z.l0.minWidth(100)],executionItemTimestamp:[Z.l0.minWidth(90)],executionItemRunTime:[Z.l0.minWidth(60)],executionItemStatus:[Z.l0.minWidth(100),{textTransform:"capitalize"}],executionItemActions:[Z.l0.rowWithGap(8),Z.l0.align.center,{marginLeft:"auto"}],noExecutionsContainer:[Z.l0.colWithGap(8),Z.l0.pt(4)],noExecutionsText:[Z.l0.textAlign.center],maxResultsMessage:[Z.l0.fontSize(12),Z.l0.color.foregroundDimmest]});function tj(e){var t=e.deploymentId,n=e.replId,r=e.openFile,i=(0,m._)((0,x.useState)(),2),o=i[0],a=i[1];return t?o?(0,v.tZ)(tP,{replId:n,deploymentId:t,executionId:o,onBack:function(){return a(void 0)},openFile:r}):(0,v.tZ)(tq,{deploymentId:t,onViewExecutionLogs:function(e){var t=e.split("-");a(t[t.length-1])}}):(0,v.tZ)(M,{children:(0,v.tZ)(D.E,{colorway:"warning",icon:(0,v.tZ)(G.Z,{}),text:"Deployment not found"})})}function tq(e){var t,n,r,i=e.deploymentId,o=e.onViewExecutionLogs,a=(0,m._)((0,x.useState)([]),2),l=a[0],c=a[1],s=(0,m._)((0,x.useState)(!1),2),u=s[0],d=s[1],f=(0,m._)((0,x.useState)(),2),h=f[0],p=f[1],g=(t=(0,A._)({},ei,{variables:{deploymentId:i},onError:function(e){p(e)},onCompleted:function(e){(null==e?void 0:e.scheduledJobListExecutions.__typename)==="ScheduledJobListExecutionsResults"&&c(e.scheduledJobListExecutions.results)}}),ee.a(eo,t)),y=g.loading,Z=g.refetch,C=(0,m._)((n=(0,A._)({},ei,{onError:function(e){p(e)},onCompleted:function(e){var t=e.cancelScheduledJobExecution;"CancelScheduledJobExecutionResult"===t.__typename&&c(function(e){return e.map(function(e){return e.id===t.execution.id?t.execution:e})})}}),et.D(ea,n)),2),_=C[0],S=C[1].loading,E=!!(y||S||u||h);return(0,eu.q)(function(){y||Z(),J({context:$.k.Schedule})}),(0,v.BX)(b.G,{css:tz.root,children:[(0,v.BX)(b.G,{css:tz.executionListHeader,children:[h?(0,v.tZ)(D.E,{colorway:"warning",icon:(0,v.tZ)(G.Z,{}),text:null!==(r=h.message)&&void 0!==r?r:"Something went wrong"}):null,(0,v.BX)(b.G,{css:tz.executionListHeaderActions,children:[(0,v.tZ)(tV,{disabled:E,onSuccessfulExecution:function(e){c(function(t){return[e].concat((0,k._)(t)).slice(0,50)})}}),(0,v.tZ)(X.hU,{alt:"Refresh",disabled:E,onClick:function(){E||(d(!0),Z().finally(function(){d(!1)}))},children:u?(0,v.tZ)(w.Z,{}):(0,v.tZ)(ec.Z,{})})]})]}),(0,v.tZ)(tJ,{executions:l,loading:y,disabled:E,onExecutionItemAction:function(e){switch(e.type){case"cancel":_({variables:{deploymentId:i,executionId:e.payload.id}});break;case"logs":o(e.payload.id)}}})]})}function tJ(e){var t=e.executions,n=e.loading,r=e.disabled,i=e.onExecutionItemAction,o=(0,x.useRef)(null),a=(0,ed.sG)()?44:28,l=(0,R.MG)({count:t.length,getScrollElement:function(){return o.current},estimateSize:function(){return a},overscan:10});return n?(0,v.tZ)(M,{children:(0,v.tZ)(W,{loading:!0})}):0===t.length?(0,v.tZ)(M,{children:(0,v.BX)(b.G,{css:tz.noExecutionsContainer,children:[(0,v.tZ)(I.xv,{css:tz.noExecutionsText,children:"No runs yet..."}),(0,v.BX)(I.xv,{color:"dimmer",css:tz.noExecutionsText,children:["Having trouble?"," ",(0,v.tZ)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",onClick:function(){return J({context:"troubleshooting_doc"})},target:"_blank",children:"Troubleshooting tips"})]})]})}):(0,v.tZ)(b.G,{innerRef:o,css:tz.executionList,children:(0,v.tZ)(b.G,{style:{height:l.getTotalSize()},css:tz.executionListRows,children:l.getVirtualItems().map(function(e){var n=t[e.index];return(0,v.tZ)(tK,{execution:n,height:e.size,y:e.start,index:e.index,onAction:i,disabled:r},e.key)})})})}var tY=(a={},(0,T._)(a,el.YJ.Done,Z.TV.accentPositiveDefault),(0,T._)(a,el.YJ.Running,Z.TV.orangeStronger),(0,T._)(a,el.YJ.Failed,Z.TV.accentNegativeDefault),(0,T._)(a,el.YJ.Cancelled,Z.TV.greyDefault),(0,T._)(a,el.YJ.Unrecognized,Z.TV.greyDefault),a);function t$(e){var t=e.status,n=t in tY?tY[t]:Z.TV.greyDefault;return(0,v.tZ)(b.G,{tag:"span",css:tz.executionItemStatusDot,style:{backgroundColor:n,boxShadow:"0 0 8px ".concat(n)}})}function tK(e){var t=e.execution,n=e.y,r=e.height,i=e.index,o=e.onAction,a=e.disabled,l=(null==t?void 0:t.endedAt)?(new Date(t.endedAt).valueOf()-new Date(t.startedAt).valueOf())/1e3:null;return(0,v.BX)(v.HY,{children:[(0,v.BX)(b.G,{title:t.id,css:tz.executionItem,style:{height:r,transform:"translateY(".concat(n,"px)")},children:[(0,v.tZ)(t$,{status:t.status}),(0,v.tZ)(b.G,{css:tz.executionItemDistance,children:(0,es.Z)(new Date(t.startedAt),Date.now(),{addSuffix:!0})}),(0,v.BX)(b.G,{css:tz.executionItemTimestamp,children:[new Date(t.startedAt).toLocaleString("en-US",{month:"short",day:"2-digit"}),", ",new Date(t.startedAt).toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",hourCycle:"h23"})]}),(0,v.tZ)(b.G,{css:tz.executionItemRunTime,children:l?"".concat(l,"s"):"-"}),(0,v.tZ)(b.G,{css:tz.executionItemStatus,children:t.status}),(0,v.BX)(b.G,{css:tz.executionItemActions,children:[t.status===el.YJ.Running?(0,v.tZ)(X.hU,{alt:"Cancel",size:12,disabled:a,onClick:function(){return o({type:"cancel",payload:{id:t.id}})},children:(0,v.tZ)(ef.Z,{})}):null,(0,v.tZ)(X.hU,{alt:"Logs",size:18,disabled:a,onClick:function(){return o({type:"logs",payload:{id:t.id}})},children:(0,v.tZ)(eh.Z,{})})]})]}),49===i?(0,v.tZ)(b.G,{title:t.id,css:tz.executionItem,style:{height:r,transform:"translateY(".concat(n+r,"px)")},children:(0,v.tZ)(I.xv,{css:tz.maxResultsMessage,children:"Only the most recent 50 runs are displayed currently"})}):null]})}(r=l||(l={})).Cancel="cancel",r.Logs="logs";var tQ=n(59786),t0=n(39271),t1=n(24635),t2=n(82400),t4=n(77361),t3=n(15434),t8=n(52554),t6=n(64479),t5=n(8261),t7=n(39475),t9=(0,B.X)({root:[{borderBottom:"1px solid ".concat(Z.TV.outlineDimmest)}],inner:[Z.l0.position.relative,{"::before":{content:'""',display:"block",position:"absolute",left:0,width:8,height:"100%",background:"linear-gradient(90deg, ".concat(Z.TV.backgroundDefault," 0%, rgba(0,0,0,0) 100%);"),zIndex:1},"::after":{content:'""',display:"block",position:"absolute",right:0,width:8,height:"100%",background:"linear-gradient(270deg, ".concat(Z.TV.backgroundDefault," 0%, rgba(0,0,0,0) 100%);"),zIndex:1}}],tabs:[Z.l0.flex.row,Z.l0.align.center,Z.l0.overflowX("auto"),Z.l0.pl(8)],tab:[eI.gU.nofill,Z.l0.borderRadius(0),Z.l0.px(12),Z.l0.position.relative,{transition:"none",height:38,marginRight:1,"::after":{content:'""',display:"block",position:"absolute",right:-2,width:1,height:16,backgroundColor:Z.TV.outlineDimmest},"&:last-child":{marginRight:0,"::after":{display:"none"}}}],dot:[Z.l0.position.absolute,Z.l0.borderRadius(16),Z.l0.width(8),Z.l0.height(8),Z.l0.backgroundColor.accentPrimaryStronger,{top:8,right:8}]}),ne=function(e){var t=e.tabs,n=e.activeView,r=e.onClick,i=(0,t7.o)("deployment-analytics-dot"),o=i.isLoading,a=i.isDone;return(0,v.tZ)(t6.Tg,{css:t9.root,children:(0,v.tZ)(b.G,{css:t9.inner,children:(0,v.tZ)(b.G,{css:t9.tabs,children:t.map(function(e){return(0,v.BX)(b.G,{css:Z.l0.position.relative,children:[(0,v.tZ)(e0.zx,{style:{borderBottom:"1px solid "+(n===e.view?Z.TV.foregroundDefault:"transparent")},css:t9.tab,text:e.label,iconLeft:e.icon,iconRight:e.beta?(0,v.tZ)(t5.D,{text:"Beta",colorway:"grey"}):void 0,onClick:function(){return r(e)}}),e.view!==$.k.Analytics||o||a?null:(0,v.tZ)(b.G,{css:t9.dot})]},e.view)})})})})},nt=n(26881),nn=n(77450),nr=n(55460),ni=(0,nn.iv)([Z.l0.maxHeight(320),Z.l0.minHeight(240),{aspectRatio:"2 / 1"}]);function no(){var e=(0,nr.F)().values;return{animation:{duration:0},backgroundColor:e.global.backgroundHigher,borderColor:e.global.outlineDimmer,borderWidth:1,titleFont:{family:"'IBM Plex Sans', sans-serif"},titleColor:e.global.foregroundDimmest,bodyFont:{family:"'IBM Plex Sans', sans-serif"},bodyColor:e.global.foregroundDimmest,footerFont:{family:"'IBM Plex Sans', sans-serif"},footerColor:e.global.foregroundDimmest,padding:8,cornerRadius:6}}var na=n(99266),nl=n(85289);function nc(){var e=(0,K._)(["\n  fragment ReplAnalyticsDurationResult on ReplAnalyticsDuration {\n    __typename\n    results {\n      __typename\n      value\n      count\n    }\n  }\n"]);return nc=function(){return e},e}function ns(){var e=(0,K._)(["\n  query ReplAnalyticsDuration(\n    $id: String!\n    $input: ReplAnalyticsDurationInput!\n  ) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsDuration(input: $input) {\n          ... on ReplAnalyticsDuration {\n            ...ReplAnalyticsDurationResult\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return ns=function(){return e},e}var nu={},nd=(0,Q.Ps)(nc()),nf=(0,Q.Ps)(ns(),nd),nh=function(e){var t=e.data;nt.kL.register(nt.ZL);var n=(0,nr.F)().values;return(0,v.tZ)(nl.$Q,{options:{responsive:!0,maintainAspectRatio:!1,datasets:{bar:{categoryPercentage:1,barPercentage:1}},plugins:{tooltip:no()},scales:{y:{title:{display:!0,text:"# Requests",color:n.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:n.global.foregroundDimmer,callback:function(e){if("number"==typeof e&&Math.floor(e)===e)return e}},grid:{color:n.global.outlineDimmest}},x:{title:{font:{family:"'IBM Plex Sans', sans-serif"},display:!0,text:"Duration (ms)",color:n.global.foregroundDimmer},ticks:{autoSkip:!1,maxRotation:20,color:n.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:n.global.outlineDimmest}}}},data:{labels:t.results.map(function(e){var t=e.value.replace("ms","").split("-"),n=t[t.length-1];return n.includes("s+")?n.replace("s+","000+"):"< "+n}),datasets:[{borderWidth:0,data:t.results.map(function(e){return e.count}),backgroundColor:Array(t.results.length).fill(n.global.tealDefault)}]}})},np=function(e){var t,n,r,i=e.replId,o=e.start,a=e.hours,l=(0,m._)((0,x.useState)(void 0),2),c=l[0],s=l[1],u=(t=(0,A._)({},nu,{variables:{id:i,input:{start:o,hours:a,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsDuration.__typename){case"UserError":case"NotFoundError":s(Error(e.repl.analyticsDuration.message))}}}),ee.a(nf,t)),d=u.data,f=u.loading,h=u.error;return h&&s(h),(0,v.BX)(b.G,{css:Z.l0.colWithGap(8),children:[(0,v.tZ)(I.xv,{variant:"subheadDefault",children:"Request Durations (ms)"}),(0,v.BX)(b.G,{children:[f?(0,v.tZ)(b.G,{css:[ni,Z.l0.borderRadius(),na.p.backgroundPulse()]}):null,c?(0,v.tZ)(D.E,{text:c.message,colorway:"negative"}):null,(null==d?void 0:null===(n=d.repl)||void 0===n?void 0:n.__typename)==="Repl"&&(null===(r=d.repl.analyticsDuration)||void 0===r?void 0:r.__typename)==="ReplAnalyticsDuration"?(0,v.tZ)(b.G,{css:ni,children:(0,v.tZ)(nh,{data:d.repl.analyticsDuration})}):null]})]})},nm=n(86306),nv=n(81995);nt.kL.register(nt.uw,nt.f$,nt.od,nt.jn,nt.u);var ng=function(e){var t=e.labels,n=e.datasets,r=e.maintainAspectRatio,i=e.yAxisLabel,o=e.xAxisLabel,a=e.unit,l=(0,nr.F)().values,c={labels:t.map(function(e){return e.toISOString()}),datasets:n.map(function(e){return(0,P._)((0,A._)({},e),{data:e.data.map(function(e){var t=e.x,n=e.y;return{x:t.toISOString(),y:n}}),pointRadius:.5,tension:.1})})},s=t.length;return(0,v.tZ)(nl.x1,{options:{clip:4,interaction:{mode:"nearest",intersect:!1},transitions:{active:{animation:{duration:0}}},elements:{point:{hoverRadius:4},line:{borderWidth:2}},responsive:!0,maintainAspectRatio:void 0===r||r,plugins:{tooltip:(0,P._)((0,A._)({},no()),{callbacks:{title:function(e){var t=new Date(e[0].label);return(0,eL.Z)(t,"MMM d, HH:mm (z)")}}})},scales:{y:{title:{display:!0,text:void 0===i?"# Requests":i,color:l.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:l.global.outlineDimmest},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:l.global.foregroundDimmer,callback:function(e){if("number"==typeof e&&Math.floor(e)===e)return a?"".concat(e).concat(a):e}},min:0},x:{title:{display:!0,text:void 0===o?"Time":o,color:l.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:l.global.outlineDimmest},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:l.global.foregroundDimmer,callback:function(e,n){var r=t[n];if(s<=24){if(r.getHours()%4!=0)return;return(0,eL.Z)(r,"HH:mm")}if(r.toISOString()===(0,nv.Z)(r).toISOString())return(0,eL.Z)(r,"MMM d")}}}}},data:c})};function ny(){var e=(0,K._)(["\n  fragment ReplAnalyticsPageViewDataPoint on ReplAnalyticsPageViewsData {\n    __typename\n    timestamp\n    success\n    failure\n  }\n"]);return ny=function(){return e},e}function nb(){var e=(0,K._)(["\n  fragment ReplAnalyticsPageViews on ReplAnalyticsPageViews {\n    __typename\n    uniques\n    results {\n      ...ReplAnalyticsPageViewDataPoint\n    }\n  }\n  ","\n"]);return nb=function(){return e},e}function nw(){var e=(0,K._)(["\n  query ReplAnalyticsPageViews(\n    $id: String!\n    $input: ReplAnalyticsPageViewsInput!\n  ) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsPageViews(input: $input) {\n          ... on ReplAnalyticsPageViews {\n            ...ReplAnalyticsPageViews\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return nw=function(){return e},e}var nZ={},nx=(0,Q.Ps)(ny()),nC=(0,Q.Ps)(nb(),nx),n_=(0,Q.Ps)(nw(),nC),nS=function(e){var t=e.data,n=e.start,r=e.hours,i=(0,nr.F)().values,o=Array(r).fill(0).map(function(e,t){return(0,nm.Z)(n,t)}),a=t.results.reduce(function(e,t){return e.set(t.timestamp,t),e},new Map),l=[{label:"Connected",data:o.map(function(e){var t;return{y:(null!==(t=a.get(e.toISOString()))&&void 0!==t?t:{success:0}).success,x:e}}),borderColor:i.global.accentPrimaryStronger,backgroundColor:i.global.accentPrimaryStronger},{label:"Failed",data:o.map(function(e){var t;return{y:(null!==(t=a.get(e.toISOString()))&&void 0!==t?t:{failure:0}).failure,x:e}}),borderColor:i.global.accentNegativeStronger,backgroundColor:i.global.accentNegativeStronger}];return(0,v.tZ)(ng,{labels:o,datasets:l,maintainAspectRatio:!1})},nk=function(e){var t,n,r,i=e.replId,o=e.start,a=e.hours,l=(0,m._)((0,x.useState)(void 0),2),c=l[0],s=l[1],u=(t=(0,A._)({},nZ,{variables:{id:i,input:{start:o,hours:a,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsPageViews.__typename){case"UserError":case"NotFoundError":s(Error(e.repl.analyticsPageViews.message))}}}),ee.a(n_,t)),d=u.data,f=u.loading,h=u.error,p=(null==d?void 0:null===(n=d.repl)||void 0===n?void 0:n.__typename)==="Repl"&&(null===(r=d.repl.analyticsPageViews)||void 0===r?void 0:r.__typename)==="ReplAnalyticsPageViews"?d.repl.analyticsPageViews:void 0,g=p?p.uniques:void 0;return h&&s(h),(0,v.BX)(b.G,{css:[Z.l0.colWithGap(8)],children:[(0,v.BX)(b.G,{css:[Z.l0.flex.row,Z.l0.align.center,Z.l0.justify.spaceBetween],children:[(0,v.tZ)(I.xv,{variant:"subheadDefault",multiline:!1,children:"Requests"}),g?(0,v.BX)(I.xv,{multiline:!1,children:[(0,v.tZ)("strong",{children:g})," unique IP addresses"]}):null]}),(0,v.BX)(b.G,{children:[f?(0,v.tZ)(b.G,{css:[Z.l0.width("100%"),ni,Z.l0.borderRadius(),na.p.backgroundPulse()]}):null,c?(0,v.tZ)(D.E,{text:c.message,colorway:"negative"}):null,p?(0,v.tZ)(b.G,{css:ni,children:(0,v.tZ)(nS,{data:p,start:o,hours:a})}):null]})]})},nE=n(57201);n(43658),nt.kL.register(nt.uw,nt.f$,nt.od,nt.jn,nt.Dx,nt.u,nt.FB);var nT=function(e){var t,n,r,i=e.data,o=e.start,a=e.end,l=e.label,c=e.unit,s=e.xAxisLabel,u=e.yAxisLabel,d=(0,nr.F)().values,f=no(),h={datasets:[{label:l,data:i,fill:!1,borderColor:d.global.blueDimmer,tension:.1}]},p=(r=Math).max.apply(r,(0,k._)(i.map(function(e){return e.y}))),m=Math.ceil(c===nE.YL.Percentage?Math.max(p,100):Math.ceil(1.2*p)),g=(t=o,(n=a.getTime()-t.getTime())<=36e5?{unit:"minute",stepSize:5}:n<=216e5?{unit:"minute",stepSize:30}:n<=864e5?{unit:"hour",stepSize:2}:n<=2592e5?{unit:"hour",stepSize:6}:n<=6048e5?{unit:"hour",stepSize:12}:{unit:"day",stepSize:1}),y=g.unit,b=g.stepSize;return(0,v.tZ)(nl.x1,{data:h,options:{animation:!1,scales:{x:{type:"time",time:{unit:y},title:{display:!0,text:s},min:o.getTime(),max:a.getTime(),ticks:{stepSize:b,color:d.global.foregroundDimmer}},y:{title:{display:!0,text:u},type:"linear",suggestedMax:m,ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:d.global.foregroundDimmer,callback:function(e){return c?"".concat(e).concat(c):e}},min:0}},maintainAspectRatio:!1,responsive:!0,plugins:{tooltip:(0,A._)({},f)}}})};function nR(){var e=(0,K._)(["\n  fragment ReplAnalyticsTimeSeriesDataPoint on ReplAnalyticsTimeSeriesData {\n    __typename\n    timestamp\n    value\n    count\n    unit\n  }\n"]);return nR=function(){return e},e}function nD(){var e=(0,K._)(["\n  fragment ReplAnalyticsTimeSeries on ReplAnalyticsTimeSeries {\n    __typename\n    results {\n      ...ReplAnalyticsTimeSeriesDataPoint\n    }\n  }\n  ","\n"]);return nD=function(){return e},e}function nI(){var e=(0,K._)(["\n  query ReplAnalyticsTimeSeries(\n    $id: String!\n    $input: ReplAnalyticsTimeSeriesInput!\n  ) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsTimeSeries(input: $input) {\n          ... on ReplAnalyticsTimeSeries {\n            ...ReplAnalyticsTimeSeries\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return nI=function(){return e},e}var nB={},nG=(0,Q.Ps)(nR()),nA=(0,Q.Ps)(nD(),nG),nP=(0,Q.Ps)(nI(),nA),nL=function(e){var t,n,r,i=e.start,o=e.end,a=e.timeSeriesFragment,l=e.xAxisLabel,c=e.yAxisLabel;if(0===a.results.length)return(0,v.tZ)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"400px"},children:"No Data Available"});var s={label:(t=a.results)[0].value,unit:(r=null===(n=t[0])||void 0===n?void 0:n.unit)?function(e,t){var n=Object.entries(e).find(function(e){var n=(0,m._)(e,2);return n[0],n[1]===t});if(n)return e[n[0]]}(nE.YL,r):void 0,data:t.map(function(e){return{x:new Date(e.timestamp),y:e.count}})},u=s.label,d=s.unit,f=s.data;return(0,v.tZ)(nT,{data:f,start:i,end:o,label:u,unit:d,xAxisLabel:l,yAxisLabel:c})},nN=function(e){var t=e.data,n=e.start,r=e.hours,i=e.colorFn,o=Array(r).fill(0).map(function(e,t){return(0,nm.Z)(n,t)}),a=t.results.reduce(function(e,t){var n,r=t.timestamp,i=t.value,o=t.count,a=null!==(n=e.get(i))&&void 0!==n?n:new Map;return a.set(r,o),e.set(i,a),e},new Map),l=(0,k._)(a.keys()).map(function(e,t){var n=i(e,t),r=a.get(e);return{label:e,data:o.map(function(e){var t,n=null!==(t=null==r?void 0:r.get(e.toISOString()))&&void 0!==t?t:0;return{x:new Date(e),y:n}}),borderColor:n,backgroundColor:n}});return(0,v.tZ)(ng,{labels:o,datasets:l,maintainAspectRatio:!1})},nO=function(e){var t,n,r,i=e.replId,o=e.title,a=e.metric,l=e.start,c=e.hours,s=e.colorFn,u=(0,m._)((0,x.useState)(void 0),2),d=u[0],f=u[1],h=(t=(0,A._)({},nB,{variables:{id:i,input:{metric:a,start:l,hours:c,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsTimeSeries.__typename){case"TooManyRequestsError":f(Error("Too many requests"));break;case"UserError":case"NotFoundError":f(Error(e.repl.analyticsTimeSeries.message))}}}),ee.a(nP,t)),p=h.data,g=h.loading,y=h.error,w=(null==p?void 0:null===(n=p.repl)||void 0===n?void 0:n.__typename)==="Repl"&&(null===(r=p.repl.analyticsTimeSeries)||void 0===r?void 0:r.__typename)==="ReplAnalyticsTimeSeries"?p.repl.analyticsTimeSeries:void 0;return y&&f(y),(0,v.BX)(b.G,{css:[Z.l0.colWithGap(8)],children:[(0,v.tZ)(b.G,{css:[Z.l0.flex.row,Z.l0.align.center,Z.l0.justify.spaceBetween],children:(0,v.tZ)(I.xv,{variant:"subheadDefault",multiline:!1,children:o})}),(0,v.BX)(b.G,{children:[g?(0,v.tZ)(b.G,{css:[Z.l0.width("100%"),ni,Z.l0.borderRadius(),na.p.backgroundPulse()]}):null,d?(0,v.tZ)(D.E,{text:d.message,colorway:"negative"}):null,w?(0,v.tZ)(b.G,{css:ni,children:(0,nE.BB)(a)?(0,v.tZ)(nL,{start:l,end:(0,nm.Z)(l,c),timeSeriesFragment:w}):(0,v.tZ)(nN,{data:w,start:l,hours:c,colorFn:s})}):null]})]})},nU=n(11765),nM=n.n(nU);function nX(){var e=(0,K._)(["\n  fragment ReplAnalyticsTopListResult on ReplAnalyticsTopList {\n    __typename\n    results {\n      __typename\n      value\n      count\n    }\n  }\n"]);return nX=function(){return e},e}function nF(){var e=(0,K._)(["\n  query ReplAnalyticsTopList($id: String!, $input: ReplAnalyticsTopInput!) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsTopList(input: $input) {\n          ... on ReplAnalyticsTopList {\n            ...ReplAnalyticsTopListResult\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return nF=function(){return e},e}var nW={},nH=(0,Q.Ps)(nX()),nV=(0,Q.Ps)(nF(),nH),nz=function(e){var t=e.data,n=e.variant;if(0===t.results.length)return(0,v.tZ)(I.xv,{multiline:!1,children:"No results"});switch(n){case"map":return(0,v.tZ)(nJ,{data:t});case"pie":return(0,v.tZ)(nq,{data:t,devices:!1});case"device-pie":return(0,v.tZ)(nq,{data:t,devices:!0});case"table":return(0,v.tZ)(nj,{data:t})}},nj=function(e){var t=e.data;return nt.kL.register(nt.qi),(0,v.tZ)(b.G,{children:t.results.map(function(e,t){return(0,v.BX)(b.G,{css:[Z.l0.rowWithGap(16),Z.l0.py(8),{borderBottom:"1px solid ".concat(Z.TV.outlineDimmest)},{"&:last-of-type":{borderBottom:"none"}}],children:[(0,v.tZ)(b.G,{css:[Z.l0.flex.grow(1),Z.l0.maxWidth("90%")],children:(0,v.tZ)(I.xv,{title:e.value,multiline:!1,children:e.value})}),(0,v.tZ)(b.G,{children:(0,v.tZ)(I.xv,{multiline:!1,children:e.count})})]},t)})})},nq=function(e){var t=e.data,n=e.devices,r=(0,nr.F)(),i=r.isDarkColorScheme,o=r.values,a=i?Z.tX.categorical:Z.tX.categorical.reverse(),l=new Map;return n?t.results.forEach(function(e){var t=e.value,n=e.count,r=t.match(/\(.*\)/);if(r&&r.length){var i=r[0].substring(1,r[0].length-1),o=l.get(i)||0;l.set(i,o+n)}else{var a=l.get("Unknown")||0;l.set("Unknown",a+n)}}):t.results.forEach(function(e){var t=e.value,n=e.count,r=t.replace(/ \(.*\)/,""),i=l.get(r)||0;l.set(r,i+n)}),(0,v.tZ)(b.G,{css:ni,children:(0,v.tZ)(nl.by,{options:{radius:"90%",maintainAspectRatio:!1,plugins:{tooltip:no()}},data:{labels:(0,k._)(l.keys()),datasets:[{borderWidth:(0,k._)(l.keys()).length>1?1:0,borderColor:o.global.outlineDimmest,data:(0,k._)(l.values()),backgroundColor:Array(l.size).fill(0).map(function(e,t){return a[t%a.length]})}]}})})},nJ=function(e){var t=e.data,r=nM()(function(){return Promise.all([n.e(5381),n.e(4096),n.e(8742),n.e(7739)]).then(n.bind(n,67739))},{loadableGenerated:{webpack:function(){return[67739]}},ssr:!1}),i=t.results.map(function(e){return{country:e.value,numHits:e.count}});return(0,v.tZ)(r,{countries:i})},nY=function(e){var t,n,r,i=e.replId,o=e.start,a=e.hours,l=e.metric,c=e.count,s=e.variant,u=void 0===s?"table":s,d=e.expandable,f=(0,nE.CZ)(l),h=(0,m._)((0,x.useState)(void 0),2),p=h[0],g=h[1],y=(0,m._)((0,x.useState)(!1),2),w=y[0],C=y[1],_=(t=(0,A._)({},nW,{variables:{id:i,input:{metric:l,start:o,hours:a,deployment:!0,count:w?3*c:c}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsTopList.__typename){case"UserError":case"NotFoundError":g(Error(e.repl.analyticsTopList.message))}}}),ee.a(nV,t)),S=_.data,k=_.loading,E=_.error;return E&&g(E),(0,v.BX)(b.G,{css:Z.l0.colWithGap(8),children:[(0,v.BX)(b.G,{css:Z.l0.rowWithGap(8),children:[(0,v.tZ)(I.xv,{variant:"subheadDefault",multiline:!1,children:"device-pie"===u?"Top Devices":"Top ".concat(f)}),void 0!==d&&d?(0,v.tZ)(X.hU,{alt:w?"Collapse list":"Expand list",onClick:function(){return C(!w)},children:w?(0,v.tZ)(e2.Z,{}):(0,v.tZ)(e4.Z,{})}):null]}),(0,v.BX)(b.G,{children:[k?(0,v.tZ)(b.G,{css:[Z.l0.height(80),Z.l0.borderRadius(),na.p.backgroundPulse()]}):null,p?(0,v.tZ)(D.E,{text:p.message,colorway:"negative"}):null,(null==S?void 0:null===(n=S.repl)||void 0===n?void 0:n.__typename)==="Repl"&&(null===(r=S.repl.analyticsTopList)||void 0===r?void 0:r.__typename)==="ReplAnalyticsTopList"?(0,v.tZ)(nz,{variant:u,data:S.repl.analyticsTopList}):null]})]})},n$=n(13033),nK=n(6543),nQ=n(34017),n0=[{label:"six hours",key:6},{label:"one day",key:24},{label:"five days",key:120},{label:"one week",key:168},{label:"two weeks",key:336},{label:"thirty days",key:720}],n1={label:"one week",key:168},n2=Z.nC.min(600),n4=(0,B.X)({fullWidth:(0,T._)({},n2,{gridColumn:"span 2"})}),n3=(0,B.X)({container:[Z.l0.display.grid,Z.l0.gap(32),Z.l0.pb(32),(0,T._)({},n2,{gridTemplateColumns:"repeat(2, minmax(0, 1fr))"})],fullWidth:n4.fullWidth,map:[n4.fullWidth],pies:[n4.fullWidth,Z.l0.flex.column,(0,T._)({gap:32},Z.nC.min(480),[Z.l0.flex.row,{" > *":{flex:1}}])]}),n8=function(e){var t=e.replId,n=(0,m._)((0,x.useState)(n1),2),r=n[0],i=r.key,o=r.label,a=n[1],l=(0,m._)((0,x.useState)((0,nK.Z)((0,nQ.Z)(new Date),i-1)),2),c=l[0],s=l[1],u=(0,t7.o)("deployment-analytics-dot"),d=u.isDone,f=u.setAsDone,h=(0,nK.Z)((0,nQ.Z)(new Date),23),p=(0,nr.F)().values,g=[p.global.redStronger,p.global.redDimmer,p.global.redStrongest,p.global.redDimmest],y=[p.global.orangeDefault,p.global.orangeDimmer,p.global.orangeStronger,p.global.orangeDimmest],w=[p.global.blueDefault,p.global.blueDimmer,p.global.blueStronger,p.global.blueDimmest],C=[p.global.greenDefault,p.global.greenDimmer,p.global.greenStronger,p.global.greenDimmest];return(0,x.useEffect)(function(){J({context:$.k.Analytics})},[]),(0,x.useEffect)(function(){d||f()},[d,f]),(0,v.tZ)(M,{children:(0,v.BX)(b.G,{css:n3.container,children:[(0,v.tZ)(b.G,{css:n3.fullWidth,children:(0,v.tZ)(n$.ZE,{items:n0,label:"Past ".concat(o),icon:(0,v.tZ)(td.Z,{}),onAction:function(e){var t,n="string"==typeof e?parseInt(e,10):e;a(null!==(t=n0.find(function(e){return e.key===n}))&&void 0!==t?t:n1),s((0,nK.Z)((0,nQ.Z)(new Date),n-1))},cssProps:[Z.l0.width("fit-content")],children:n0.map(function(e){return(0,v.tZ)(n$.ck,{children:(0,v.tZ)(b.G,{css:[Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.color.foregroundDefault],children:(0,v.tZ)(I.xv,{multiline:!1,children:e.label})})},e.key)})})}),(0,v.tZ)(b.G,{css:n3.fullWidth,children:(0,v.tZ)(nk,{replId:t,start:c,hours:i})}),(0,v.tZ)(nY,{replId:t,metric:nE.Pc.Url,start:c,hours:i,count:4,expandable:!0}),(0,v.tZ)(nY,{replId:t,metric:nE.Pc.Referrer,start:c,hours:i,count:4,expandable:!0}),(0,v.tZ)(nO,{replId:t,title:"HTTP Statuses (24h)",metric:nE.RH.Statuses,start:h,hours:24,colorFn:function(e,t){var n=Number(e);return n<300?C[t%C.length]:n<400?w[t%w.length]:n<500?y[t%y.length]:g[t%g.length]}}),(0,v.tZ)(np,{replId:t,start:c,hours:i}),(0,v.BX)(b.G,{css:n3.pies,children:[(0,v.tZ)(nY,{replId:t,metric:nE.Pc.Browser,start:c,hours:i,count:100,variant:"pie"}),(0,v.tZ)(nY,{replId:t,metric:nE.Pc.Browser,start:c,hours:i,count:100,variant:"device-pie"})]}),(0,v.tZ)(b.G,{css:n3.map,children:(0,v.tZ)(nY,{replId:t,metric:nE.Pc.Country,start:c,hours:i,count:100,variant:"map"})})]})})},n6=(0,B.X)({line:{width:1,position:"absolute",left:3},circlePast:{position:"absolute",top:10,left:1,width:5,height:5,borderRadius:"100%",opacity:.5}}),n5=(0,B.X)({container:{width:7,position:"relative"},linePast:[n6.line,{backgroundColor:Z.TV.outlineDimmest,top:15,bottom:-10}],linePresent:[n6.line,{backgroundImage:"linear-gradient(to top, ".concat(Z.TV.outlineDimmest,", ").concat(Z.TV.outlineDimmer,")"),top:27,bottom:-10}],lineFuture:[n6.line,{borderRight:"1px dashed "+Z.TV.outlineDimmer,top:23,bottom:-20}],lineFutureFailClosed:[n6.line,{backgroundColor:Z.TV.outlineDimmest,top:19,bottom:-20}],lineFutureFailOpen:[n6.line,{borderRight:"1px dashed "+Z.TV.outlineDimmer,top:22,bottom:-18}],circlePastGreen:[n6.circlePast,Z.l0.backgroundColor.accentPositiveDefault],circlePastRed:[n6.circlePast,Z.l0.backgroundColor.accentNegativeDefault],circlePastGray:[n6.circlePast,Z.l0.backgroundColor.outlineDimmer],circlePresent:[Z.l0.backgroundColor.accentPrimaryStronger,{position:"absolute",top:20,left:0,width:7,height:7,borderRadius:"100%"}],circleFuture:{position:"absolute",top:12,left:-1,width:9,height:9},circleFutureFailClosed:[Z.l0.backgroundColor.accentNegativeDefault,{position:"absolute",top:14,left:1,width:5,height:5,borderRadius:"100%",opacity:.6}]});function n7(e){var t,n;switch(e.type){case"pastSuccess":t=n5.linePast,n=(0,v.tZ)(b.G,{css:n5.circlePastGreen});break;case"pastFail":t=n5.linePast,n=(0,v.tZ)(b.G,{css:n5.circlePastRed});break;case"pastNeutral":t=n5.linePast,n=(0,v.tZ)(b.G,{css:n5.circlePastGray});break;case"present":t=n5.linePresent,n=(0,v.tZ)(b.G,{css:n5.circlePresent});break;case"future":t=n5.lineFuture,n=(0,v.tZ)("svg",{viewBox:"0 0 9 9",css:n5.circleFuture,children:(0,v.tZ)("circle",{cx:4.5,cy:4.5,r:4,fill:"none",stroke:Z.TV.outlineStrongest,strokeDasharray:"2 1"})});break;case"futureFailClosed":t=n5.lineFutureFailClosed,n=(0,v.tZ)(b.G,{css:n5.circleFutureFailClosed});break;case"futureFailOpen":t=n5.lineFutureFailOpen,n=null}return(0,v.BX)(b.G,{css:n5.container,children:[(0,v.tZ)(b.G,{css:t,"data-timeline-line":!0}),n]})}var n9=n(95563),re=n(54738),rt=n(85127),rn=n(25114),rr=n(63548),ri=n(35741);function ro(e){var t=e.currentStatus,n=e.provider,r=e.logs,i=e.viewBuildLogs,o=e.debugSummary,a=e.openFile,l=e.onViewBuildLogs,c=e.onViewApplicationLogs,s=(0,C.Eb)(),u=(0,tQ.P5)({controlName:rr.Iw,logFlagToAnalytics:!1});return t===el.Fe.Building?u&&(null==s?void 0:s.isCore)&&o?(0,v.tZ)(rh,{debugSummary:o,view:$.k.DeploymentInProgress}):(0,v.tZ)(ru,{provider:n,logs:r,openFile:a,viewBuildLogs:i,onViewBuildLogs:l}):t===el.Fe.Promoting?(0,v.tZ)(rs,{provider:n,logs:r,openFile:a,viewBuildLogs:i,onViewBuildLogs:l,onViewApplicationLogs:c}):null}function ra(e){var t=e.currentStatus,n=e.provider,r=e.debugSummary,i=e.openFile,o=e.onViewApplicationLogs,a=(0,C.Eb)(),l=(0,tQ.P5)({controlName:rr.Iw,logFlagToAnalytics:!1});return t===el.Fe.Building?l&&(null==a?void 0:a.isCore)&&r?(0,v.tZ)(rh,{debugSummary:r,view:"deploy_history_logs"}):(0,v.tZ)(ru,{provider:n,openFile:i}):t===el.Fe.Promoting?(0,v.tZ)(rs,{provider:n,openFile:i,onViewApplicationLogs:o}):null}var rl=(0,B.X)({errorContainer:[Z.l0.p(12),Z.l0.colWithGap(12)],warning:[Z.l0.colWithGap(8)],warningTitle:[Z.l0.rowWithGap(8),Z.l0.align.center],link:{color:Z.TV.foregroundDefault,textDecoration:"underline",":hover":{color:Z.TV.accentPrimaryStronger}},xtermContainer:[Z.l0.display.flex,Z.l0.pt(12),Z.l0.pl(16),Z.l0.overflow("hidden"),Z.l0.borderRadius(4,4,0,0)],xterm:[Z.l0.width("100%"),Z.l0.maxWidth("100%"),Z.l0.height(200)],xtermButton:Z.l0.borderRadius(0,0,4,4),list:[{listStyle:"inside"}],listCta:Z.l0.display.inlineFlex});function rc(e){var t=e.title,n=e.description,r=e.logs,i=e.viewBuildLogs,o=e.onViewBuildLogs,a=e.openFile,l=(0,eN.f)(),c=(0,C.XZ)(),s=(0,m._)((0,rn.Z)({openFile:a,listFiles:c.listFiles}),2),u=s[0],d=s[1],f=(0,x.useRef)(r?r.slice(-5):[]);return(0,x.useEffect)(function(){f.current.length&&f.current.forEach(function(e){null==u||u.write(e)})},[u]),(0,v.BX)(t6.Tg,{elevated:!0,css:rl.errorContainer,children:[(0,v.BX)(b.G,{css:rl.warning,children:[(0,v.BX)(b.G,{css:rl.warningTitle,children:[(0,v.tZ)(G.Z,{color:Z.TV.accentNegativeStronger}),(0,v.tZ)(I.xv,{multiline:!1,children:t})]}),(0,v.tZ)(I.xv,{children:n})]}),void 0===i||i?null:(0,v.BX)(b.G,{children:[(0,v.tZ)(b.G,{css:rl.xtermContainer,style:{backgroundColor:null==l?void 0:l.background},children:(0,v.tZ)(b.K.div,{css:rl.xterm,ref:d})}),(0,v.tZ)(e0.zx,{text:"View all",iconLeft:(0,v.tZ)(e4.Z,{}),onClick:function(){return null==o?void 0:o()},css:rl.xtermButton})]})]})}function rs(e){var t=(0,C.MV)();return(0,v.tZ)(rc,(0,A._)({title:"Your app failed to promote",description:(0,v.BX)(v.HY,{children:["Common issues for promote stage errors can be an error occurring while trying to run your run command, your application exiting unexpectedly, an error on your app server or a provisioning issue.",(0,v.tZ)("br",{}),(0,v.tZ)("br",{}),"Ways to debug:",(0,v.BX)("ul",{css:rl.list,children:[t?(0,v.tZ)("li",{children:"This promotion may also be failing due to VNC incompatibilities."}):null,(0,v.tZ)("li",{children:"make sure your repl runs in the Workspace"}),(0,v.BX)("li",{children:["view our"," ",(0,v.tZ)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",target:"_blank",css:rl.link,onClick:function(){return J({context:"troubleshooting_doc"})},children:"troubleshooting tips"})]}),e.provider!==el.r4.Static&&e.onViewApplicationLogs?(0,v.BX)("li",{children:["look for errors in your application's server logs"," ",(0,v.tZ)(e0.zx,{text:"Logs",size:"small",iconLeft:(0,v.tZ)(eh.Z,{}),onClick:e.onViewApplicationLogs,css:Z.l0.display.inlineFlex})," "]}):null,(0,v.tZ)("li",{children:"look for errors in your deploy logs"})]})]})},e))}function ru(e){var t=(0,C.MV)();return(0,v.tZ)(rc,(0,A._)({title:"Your app failed to build",description:(0,v.BX)(v.HY,{children:["Common issues for build stage errors can be an error occurring while trying to run your build command or an compilation issue with your application code.",(0,v.tZ)("br",{}),(0,v.tZ)("br",{}),"Ways to debug:",(0,v.BX)("ul",{css:rl.list,children:[t?(0,v.tZ)("li",{children:"This promotion may also be failing due to VNC incompatibilities."}):null,(0,v.tZ)("li",{children:"make sure your repl runs in the Workspace"}),(0,v.BX)("li",{children:["view our"," ",(0,v.tZ)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",target:"_blank",css:rl.link,onClick:function(){return J({context:"troubleshooting_doc"})},children:"troubleshooting tips"})]}),(0,v.tZ)("li",{children:"look for errors in your deploy logs"})]})]})},e))}function rd(e){return(0,v.tZ)(rc,(0,A._)({title:"This build's deploy logs have expired",description:(0,v.tZ)(v.HY,{children:"No information was found for this build. Deploy logs expire after 30 days."})},e))}var rf=(0,B.X)({errorsSection:[Z.l0.colWithGap(4),Z.l0.p(8),Z.l0.colorMixBg(Z.TV.accentNegativeDimmest,"transparent",.3),Z.l0.color.accentNegativeStrongest],errorsHeader:[Z.l0.rowWithGap(12),Z.l0.align.center,Z.l0.justify.spaceBetween],experimentalTag:[Z.l0.rowWithGap(4),Z.l0.align.center,Z.l0.mr(12),Z.l0.color.blurpleStrongest],errorsSectionTitleText:[Z.l0.color.foregroundDefault],loading:[Z.l0.rowWithGap(4),Z.l0.align.center],errorsList:[Z.l0.display.flex,Z.l0.colWithGap(4),Z.l0.pt(6),Z.l0.pl(24),{listStyleType:"disc"}],suggestionsSection:[Z.l0.colorMixBg(Z.TV.blurpleDimmest,"transparent",.15),Z.l0.border({direction:"top",color:Z.TV.outlineDimmer})],aiSuggestions:[Z.l0.p(8),Z.l0.colWithGap(8)],aiSuggestionsTitle:[Z.l0.rowWithGap(8),Z.l0.color.blurpleStrongest,Z.l0.align.center],aiSuggestionsList:Z.l0.pl(24),divider:Z.l0.backgroundColor.outlineDimmer,aiChat:[Z.l0.p(8),Z.l0.color.foregroundDimmer,{a:{color:"inherit",textDecoration:"underline"}}]});function rh(e){var t=e.debugSummary,n=e.view,r=(0,n9.nC)(t),i=r.loading,o=r.debugResponse,a=(0,t0.Z)(),l=(0,C.hn)(),c=(0,x.useRef)(!1);return(0,x.useEffect)(function(){l&&o&&!c.current&&(c.current=!0,Y("viewed",{view:n,debugSummary:t,debugResponse:o,replId:a,deploymentId:l}))},[o,n,t,a,l]),(0,v.BX)(t6.Tg,{elevated:!0,children:[(0,v.BX)(b.G,{css:rf.errorsSection,children:[(0,v.BX)(b.G,{css:rf.errorsHeader,children:[(0,v.BX)(b.G,{css:rl.warningTitle,children:[(0,v.tZ)(G.Z,{color:Z.TV.accentNegativeStronger}),(0,v.tZ)(I.xv,{css:rf.errorsSectionTitleText,multiline:!1,children:"Build failed"})]}),(0,v.BX)(b.G,{css:rf.experimentalTag,children:[(0,v.tZ)(I.xv,{variant:"small",children:"Experimental"}),(0,v.tZ)(ri.Z,{})]})]}),(0,v.tZ)(I.xv,{children:i?(0,v.BX)(b.G,{css:rf.loading,children:[(0,v.tZ)(w.Z,{}),(0,v.tZ)(I.xv,{children:"Analyzing error, generating suggestions..."})]}):(0,v.tZ)(v.HY,{children:o?(0,v.BX)(v.HY,{children:[(0,v.tZ)(I.xv,{children:"Your deployment attempt had the following errors:"}),(0,v.tZ)("ul",{css:rf.errorsList,children:o.errors.map(function(e){return(0,v.tZ)("li",{children:e},e)})})]}):null})})]}),!i&&o?(0,v.BX)(b.G,{css:rf.suggestionsSection,children:[(0,v.BX)(b.G,{css:rf.aiSuggestions,children:[(0,v.BX)(b.G,{css:rf.aiSuggestionsTitle,children:[(0,v.tZ)(rt.Z,{}),(0,v.tZ)(I.xv,{multiline:!1,children:"Replit AI suggestions"})]}),(0,v.tZ)("ol",{css:rf.aiSuggestionsList,children:o.suggestions.map(function(e){return(0,v.tZ)(rm,{suggestion:e},e.name)})})]}),(0,v.tZ)(tr.R,{css:rf.divider})]}):null]})}var rp=(0,B.X)({header:[Z.l0.width("95%"),Z.l0.rowWithGap(8),Z.l0.justify.spaceBetween],desc:[Z.l0.flex.growAndShrink(1)],file:[Z.l0.color.foregroundDimmest,Z.l0.fontSize("small")],body:[Z.l0.border(),Z.l0.borderRadius(),Z.l0.mt(4),Z.l0.mb(8),Z.l0.overflow("hidden"),Z.l0.font.code,Z.l0.fontSize("small"),{lineHeight:Z.TV.lineHeightSmall}],before:[Z.l0.color.accentNegativeStrongest,Z.l0.colorMixBg(Z.TV.accentNegativeDimmest,"transparent",.3),Z.l0.px(6),Z.l0.py(2)],after:[Z.l0.color.accentPositiveStrongest,Z.l0.colorMixBg(Z.TV.accentPositiveDimmest,"transparent",.3),Z.l0.px(6)]});function rm(e){var t=e.suggestion;return(0,v.tZ)("li",{children:(0,v.tZ)(re.Q,{animateChevron:!1,headerContent:function(e){var n=e.isExpanded;return(0,v.BX)(b.G,{css:rp.header,children:[(0,v.tZ)(I.xv,{css:rp.desc,maxLines:n?void 0:1,children:t.description})," ",t.file&&"null"!==t.file?(0,v.tZ)(I.xv,{css:rp.file,maxLines:1,children:t.file}):null]})},headerProps:{style:{textAlign:"left"}},children:(0,v.BX)(b.G,{css:rp.body,children:[(0,v.tZ)(b.G,{css:rp.before,children:(0,v.tZ)("pre",{children:t.before})}),(0,v.tZ)(b.G,{css:rp.after,children:(0,v.tZ)("pre",{children:t.after})})]})})})}var rv=n(39477),rg=n(17202),ry=n(59947),rb=n(24605),rw=function(e){var t=e.stage,n=e.activeStage;return t===e.erroredStage?(0,v.tZ)(G.Z,{alt:"error"}):t<n?(0,v.tZ)(ry.Z,{alt:"success"}):t===n?(0,v.tZ)(w.Z,{alt:"current"}):(0,v.tZ)(t2.Z,{alt:"waiting"})},rZ=function(e){var t=e.stage,n=e.activeStage,r=e.erroredStage;return n?t===r?"negative":t<n?"positive":t===n?"primary":null:null},rx=function(e){var t,n=e.stage,r=e.totalStagesWithTitle,i=e.activeStage,o=e.text,a=e.erroredStage;return(0,v.tZ)(x.Fragment,{children:(0,v.tZ)(t5.D,{text:i?o:"",colorway:null!==(t=rZ({stage:n,activeStage:i,erroredStage:a}))&&void 0!==t?t:void 0,variant:"filled",css:[i&&i<=n&&!a?na.p.foregroundPulse():{},Z.l0.border({color:rb.TV.backgroundDefault}),Z.l0.overflow("hidden"),(0,T._)({position:"relative",flex:1,height:26,zIndex:r-n,":first-of-type":{paddingLeft:6,paddingRight:6},":not(:first-of-type)":{paddingLeft:24},":not(:last-of-type)":{marginRight:-24}," span":Z.l0.display.none},Z.nC.min(400),{" span":Z.l0.display.flex,":first-of-type":{paddingLeft:16,paddingRight:0}})],iconRight:i?(0,v.tZ)(rw,{stage:n,activeStage:i,erroredStage:a}):void 0})},i&&i<=n&&!a?1:0)};function rC(){var e=(0,K._)(["\n  query HostingDeployActionHistory(\n    $input: HostingBuildDeployActionHistoryInput!\n  ) {\n    hostingBuildDeployActionHistory(input: $input) {\n      ... on HostingBuildDeployActionHistoryResults {\n        results {\n          ... on HostingBuildDeployLogAction {\n            log\n          }\n          ... on HostingBuildDeployStatusAction {\n            status\n            message\n          }\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return rC=function(){return e},e}var r_={},rS=(0,Q.Ps)(rC()),rk=[{id:0,title:"Provision",statusType:el.Fe.Pending},{id:1,title:"Build",statusType:el.Fe.Building},{id:2,title:"Bundle",statusType:el.Fe.Running},{id:3,title:"Promote",statusType:el.Fe.Promoting},{id:4,statusType:el.Fe.Success}],rE=rk.filter(function(e){return"title"in e}),rT=function(e){return rk.find(function(t){return t.statusType===e})},rR=(0,B.X)({base:{borderRadius:Z.TV.borderRadiusDefault,paddingLeft:6,paddingRight:6,height:24},disabled:{pointerEvents:"none",color:Z.TV.greyDefault}}),rD=[Z.l0.borderRadius(),{border:"1px solid var(--outline-dimmest)"}],rI=(0,B.X)({container:rD,top:[Z.l0.colWithGap(12),Z.l0.p(16),Z.l0.pt(12)],header:[Z.l0.rowWithGap(8),Z.l0.justify.spaceBetween,Z.l0.width("100%")],headerLeft:[Z.l0.rowWithGap(8),Z.l0.align.baseline,Z.l0.flex.shrink(1)],headerRight:[Z.l0.rowWithGap(6),Z.l0.justify.end],started:[Z.l0.rowWithGap(6),Z.l0.flex.growAndShrink(1),Z.l0.justify.end,Z.l0.color.foregroundDimmest],cancel:[rR.base,{'&[data-cancelable="true"]':{opacity:1,width:"auto"},'&[data-cancelable="false"]':{opacity:0,width:0}}],stages:[Z.l0.flex.row,Z.l0.flex.grow(1),{zIndex:0}],bottom:[Z.l0.borderRadius(0,0,4,4),Z.l0.overflow("hidden")],logsOpen:[Z.l0.overflow("hidden"),Z.l0.height("auto")],logsClosed:[Z.l0.overflow("hidden"),Z.l0.height(0)],xtermContainer:[Z.l0.display.flex,Z.l0.pt(12),Z.l0.pl(16),Z.l0.overflow("hidden")],xterm:[Z.l0.width("100%"),Z.l0.maxWidth("100%"),Z.l0.height(340)],textButton:[Z.l0.cursor.pointer,Z.l0.reset.button,Z.l0.color.foregroundDimmest,Z.l0.focusRing,Z.l0.hover(Z.l0.color.foregroundDefault),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}]}),rB=function(e){return(0,v.BX)(b.G,{css:rI.top,children:[(0,v.BX)(b.G,{css:rI.header,children:[(0,v.BX)(b.G,{css:rI.headerLeft,children:[(0,v.tZ)(I.xv,{variant:"subheadDefault",multiline:!1,children:"Deploying"}),e.timeStarted&&e.userDisplayName?(0,v.BX)(I.xv,{css:rI.started,multiline:!1,maxLines:1,children:["Started ".concat((0,rg.Z)(new Date(e.timeStarted),Date.now(),{addSuffix:!0})," by "),(0,v.tZ)("span",{children:e.userDisplayName})]}):null,(0,v.tZ)(e0.zx,{size:"small",text:"Cancel",css:rI.cancel,onClick:e.onCancel,iconRight:e.isCanceling?(0,v.tZ)(w.Z,{}):void 0,disabled:e.isCanceling,"data-cancelable":e.onCancel?"true":"false"})]}),(0,v.tZ)(b.G,{css:rI.headerRight,children:e.onViewBuildLogs?(0,v.BX)("button",{css:rI.textButton,onClick:e.onViewBuildLogs,children:[e.viewBuildLogs?"Hide":"View"," logs"," ",e.viewBuildLogs?(0,v.tZ)(rv.Z,{}):(0,v.tZ)(td.Z,{})]}):null})]}),(0,v.tZ)(b.G,{css:rI.stages,children:rE.map(function(t){var n=t.id,r=t.title;return(0,v.tZ)(rx,{stage:n,totalStagesWithTitle:rE.length,text:r,activeStage:e.activeStage,erroredStage:e.erroredStage},n)})})]})},rG=function(e){return(0,C.kW)()===_.z.Preparing?(0,v.tZ)(b.G,{css:rI.container,children:(0,v.tZ)(rB,{})}):(0,v.tZ)(rA,(0,A._)({},e))},rA=function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,g=e.initialBuild,y=e.viewBuildLogsOnLoad,w=e.onViewLogs,Z=e.onCanceled,_=e.onError,T=e.openFile,R=(0,C.rm)(),D=(0,C.pn)(),I=D?{id:D.id,status:D.status,provider:D.provider,timeStarted:D.timeCreated,userDisplayName:D.user.displayName,debugSummary:D.debugSummary}:void 0,B=(0,x.useRef)(g||I),G=(t={skip:!(null===(i=B.current)||void 0===i?void 0:i.id),variables:{input:{buildId:null!==(p=null===(o=B.current)||void 0===o?void 0:o.id)&&void 0!==p?p:""}},fetchPolicy:"network-only",ssr:!1,onCompleted:function(e){if(null==e?void 0:e.hostingBuildDeployActionHistory)switch(e.hostingBuildDeployActionHistory.__typename){case"NotFoundError":break;case"UnauthorizedError":_(e.hostingBuildDeployActionHistory.message);break;case"HostingBuildDeployActionHistoryResults":var t=e.hostingBuildDeployActionHistory.results;if(t&&t.length>0){var n=[],r=[],i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;switch(s.__typename){case"HostingBuildDeployLogAction":n.push(s.log);break;case"HostingBuildDeployStatusAction":r.push(s)}}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}ei({type:"setHistory",payload:n});var u=!0,d=!1,f=void 0;try{for(var h,p=r[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var m=h.value;eo(m.status,m.debugSummary)}}catch(e){d=!0,f=e}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}}break;default:_("Unexpected typename.")}},onError:function(e){_(e.message)}},n=(0,A._)({},r_,t),ee.a(rS,n)),P=G.loading,L=G.refetch;(0,C.U)(function(e){switch(e.__typename){case"HostingBuildDeployLogAction":ei({type:"addLog",payload:e.log});break;case"HostingBuildDeployStatusAction":eo(e.status,e.debugSummary)}});var N=(0,m._)((0,x.useState)(B.current?null===(a=rT(B.current.status))||void 0===a?void 0:a.id:void 0),2),O=N[0],U=N[1],M=(0,m._)((0,x.useState)((null===(l=B.current)||void 0===l?void 0:l.status)==="failed"?null===(c=rT(null===(s=B.current)||void 0===s?void 0:s.status))||void 0===c?void 0:c.id:void 0),2),X=M[0],F=M[1],W=(0,m._)((0,x.useState)((null===(u=B.current)||void 0===u?void 0:u.debugSummary)||void 0),2),H=W[0],V=W[1],z=(0,m._)((0,x.useState)(!1),2),j=z[0],q=z[1],Y=(0,C.XZ)(),$=(0,m._)((0,rn.Z)({openFile:T,listFiles:Y.listFiles}),2),K=$[0],Q=$[1],et=(0,eN.f)(),en=(0,m._)((0,x.useReducer)(function(e,t){switch(t.type){case"setHistory":return K&&K.clear(),{allLogs:(0,k._)(t.payload).concat((0,k._)(e.allLogs))};case"addLog":return{allLogs:(0,k._)(e.allLogs).concat([t.payload]),recentLogs:[t.payload]};case"refetchLogs":return K&&K.clear(),P||L(),{allLogs:[]}}},{allLogs:[]}),2),er=en[0],ei=en[1],eo=function(e,t){if(e===el.Fe.Failed)F(O),t&&V(t);else{var n=rT(e);if(!n)return;U(n.id)}},ea=(r=(0,S._)(function(){return(0,E.Jh)(this,function(e){switch(e.label){case 0:return q(!0),[4,R()];case 1:return e.sent(),Z(),[2]}})}),function(){return r.apply(this,arguments)}),ec=(0,m._)((0,x.useState)(y||!1),2),es=ec[0],eu=ec[1],ed=function(){eu(!es),es||J({context:"deploy_progress_logs"})};(0,x.useEffect)(function(){J({context:"deploy_progress"})},[]),(0,x.useEffect)(function(){var e;(null===(e=B.current)||void 0===e?void 0:e.id)&&D&&D.id!==B.current.id&&(B.current={id:D.id,status:D.status,provider:D.provider,timeStarted:D.timeCreated,userDisplayName:D.user.displayName,debugSummary:D.debugSummary},U(void 0),F(void 0),ei({type:"refetchLogs"}))},[D,null===(d=B.current)||void 0===d?void 0:d.id,L]),(0,x.useEffect)(function(){var e;void 0!==O&&(null===(e=B.current)||void 0===e?void 0:e.status)==="failed"&&F(O)},[O,null===(f=B.current)||void 0===f?void 0:f.status]),(0,x.useEffect)(function(){if(K){if(er.recentLogs){er.recentLogs.forEach(function(e){return K.write(e)});return}er.allLogs.forEach(function(e){return K.write(e)})}},[er,K]);var ef=null===(h=rk.find(function(e){return e.id===O}))||void 0===h?void 0:h.statusType,eh=ef!==el.Fe.Success&&!X;return B.current?(0,v.BX)(b.G,{css:rI.container,children:[(0,v.tZ)(rB,{onCancel:eh?ea:void 0,isCanceling:j,onViewBuildLogs:ed,viewBuildLogs:es,timeStarted:B.current.timeStarted,userDisplayName:B.current.userDisplayName,activeStage:O,erroredStage:X}),(0,v.BX)(b.G,{css:rI.bottom,children:[(0,v.BX)(b.G,{css:es?rI.logsOpen:rI.logsClosed,children:[(0,v.tZ)(tr.R,{}),(0,v.tZ)(b.G,{css:rI.xtermContainer,style:{backgroundColor:null==et?void 0:et.background},children:(0,v.tZ)(b.K.div,{css:rI.xterm,ref:Q})})]}),X&&ef?(0,v.BX)(v.HY,{children:[(0,v.tZ)(tr.R,{}),(0,v.tZ)(ro,{currentStatus:ef,provider:B.current.provider,debugSummary:H,logs:er.allLogs,viewBuildLogs:es,openFile:T,onViewBuildLogs:ed,onViewApplicationLogs:w})]}):null]})]}):null},rP=n(71166),rL=n(27022),rN=n(64586);(c||(c={})).Current="current";var rO=(0,T._)({},"current",{icon:(0,v.tZ)(function(e){var t=e.color;return(0,v.tZ)(b.G,{css:[Z.l0.align.center,Z.l0.rowWithGap(8),{textTransform:"capitalize"}],children:(0,v.tZ)(b.G,{tag:"span",css:[Z.l0.width("8px"),Z.l0.height("8px"),Z.l0.borderRadius("full"),{backgroundColor:t,boxShadow:"0 0 12px ".concat(t)}]})})},{color:Z.TV.blueStronger}),text:"Current deployment"}),rU=b.K.div,rM=function(e){var t=e.activityLogItem.type,n=(0,m._)((0,x.useState)(!1),2),r=n[0],i=n[1],o=(0,m._)((0,x.useState)(!1),2),a=o[0],l=o[1],c=(0,x.useRef)(!1);(0,x.useEffect)(function(){c.current=!0;var e=setTimeout(function(){l(r)},200);return function(){clearTimeout(e)}},[r]);var s=t in rO&&rO[t];if(!s)return null;var u=s.icon,d=s.text;return(0,v.tZ)(b.G,{css:[Z.l0.p(8)],onMouseEnter:function(){return i(!0)},onMouseLeave:function(){return i(!1)},children:(0,v.BX)(rN.Z,{isOpen:a,onClickOutside:function(){return l(!1)},padding:8,children:[(0,v.tZ)(rU,{css:Z.l0.cursor.pointer,children:u}),(0,v.tZ)(b.G,{css:[Z.l0.maxWidth(240)],children:(0,v.tZ)(I.xv,{children:d})})]})})},rX=n(15432);function rF(){var e=(0,K._)(["\n  fragment HostingActivityLogBuild on HostingBuild {\n    id\n    status\n    hasDeployLogs\n    provider\n    timeCreated\n    user {\n      id\n      displayName\n    }\n    debugSummary {\n      ...BuildDebugSummary\n    }\n  }\n  ","\n"]);return rF=function(){return e},e}function rW(){var e=(0,K._)(["\n  fragment HostingActivityLogLine2 on HostingActivityLog {\n    id\n    build {\n      ...HostingActivityLogBuild\n    }\n    type\n    user {\n      id\n      displayName\n    }\n    timeCreated\n  }\n  ","\n"]);return rW=function(){return e},e}function rH(){var e=(0,K._)(["\n  query HostingDeploymentActivityLogs2(\n    $replId: String!\n    $after: String\n    $count: Int\n  ) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            currentBuild {\n              id\n            }\n            activityLogs(after: $after, count: $count) {\n              items {\n                ...HostingActivityLogLine2\n              }\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n            }\n          }\n          ... on Error {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return rH=function(){return e},e}function rV(){var e=(0,K._)(["\n  query HostingActivityLogBuildHistory(\n    $input: HostingBuildDeployActionHistoryInput!\n  ) {\n    hostingBuildDeployActionHistory(input: $input) {\n      ... on HostingBuildDeployActionHistoryResults {\n        results {\n          ... on HostingBuildDeployStatusAction {\n            status\n            message\n          }\n          ... on HostingBuildDeployLogAction {\n            log\n          }\n        }\n      }\n    }\n  }\n"]);return rV=function(){return e},e}var rz={},rj=(0,Q.Ps)(rF(),rX.Si),rq=(0,Q.Ps)(rW(),rj),rJ=(0,Q.Ps)(rH(),rq),rY=(0,Q.Ps)(rV()),r$=n(49494),rK=function(e){var t=e.build,n=t.id.slice(0,8),r=(0,m._)((0,x.useState)(!1),2),i=r[0],o=r[1],a=(0,m._)((0,x.useState)(!1),2),l=a[0],c=a[1],s=(0,x.useRef)(!1);return(0,x.useEffect)(function(){s.current=!0;var e=setTimeout(function(){c(i)},200);return function(){clearTimeout(e)}},[i]),(0,v.tZ)("span",{onMouseEnter:function(){return o(!0)},onMouseLeave:function(){return o(!1)},children:(0,v.BX)(rN.Z,{isOpen:l,onClickOutside:function(){return c(!1)},padding:8,children:[(0,v.tZ)("span",{css:[eI.gU.listItem,Z.l0.display.inlineBlock,Z.l0.px(2),Z.l0.py(0),Z.l0.borderRadius(4)],children:n}),(0,v.tZ)(b.G,{css:[Z.l0.maxWidth(260)],children:(0,v.tZ)(I.xv,{variant:"small",children:t.id})})]})})},rQ=(s={},(0,T._)(s,r$.dD.Deploy,function(e){return(0,v.BX)(v.HY,{children:["deployed ",(0,v.tZ)(rK,{build:e})]})}),(0,T._)(s,r$.dD.Rollback,function(e){return(0,v.BX)(v.HY,{children:["rolled back ",(0,v.tZ)(rK,{build:e})]})}),(0,T._)(s,r$.dD.Fail,function(e){return(0,v.BX)(v.HY,{children:["failed to deploy ",(0,v.tZ)(rK,{build:e})]})}),s),r0=function(e){var t=e.activityLogItem,n=t.type,r=t.build,i=r.user.displayName,o=n in rQ&&rQ[n](r);return o?(0,v.BX)(I.xv,{multiline:!1,children:[(0,v.tZ)("span",{css:Z.l0.fontWeight.medium,children:i+" "}),o]}):null},r1=n(50372),r2=n(32622);function r4(e){var t=e.onViewBuildLogs,n=e.type,r=(0,t0.Z)();return(0,v.tZ)(io,{replId:r,onSelect:t,type:void 0===n?"default":n})}var r3=rk.filter(function(e){return"title"in e}),r8=(0,B.X)({root:[Z.l0.flex.row,Z.l0.px(8),Z.l0.pb(8),{zIndex:0}]});function r6(e){var t=e.activeStage,n=e.erroredStage;return(0,v.tZ)(b.G,{css:r8.root,children:r3.map(function(e){return(0,v.tZ)(rx,{stage:e.id,text:e.title,totalStagesWithTitle:r3.length,activeStage:t,erroredStage:n},e.id)})})}var r5=(0,B.X)({root:[Z.l0.colWithGap(8),Z.l0.height("100%")],header:[Z.l0.pt(8),Z.l0.px(8),Z.l0.rowWithGap(8),Z.l0.align.center],divider:[{marginLeft:8,marginRight:8,borderBottom:"1px solid "+Z.TV.outlineDimmest}],name:[Z.l0.color.foregroundDefault,Z.l0.fontWeight.medium],content:[Z.l0.p(8),Z.l0.flex.growAndShrink(1),Z.l0.position.relative],loading:[Z.l0.coverContainer,Z.l0.center],error:[Z.l0.m(8),Z.l0.borderRadius(8),Z.l0.overflow("hidden")],xterm:[Z.l0.coverContainer,{overflow:"hidden",borderBottomLeftRadius:8,borderBottomRightRadius:8,"& > div":[Z.l0.coverContainer,Z.l0.p(8)]}]});function r7(e){var t,n,r=e.build,i=e.onBack,o=e.fs,a=e.openFile,l=e.onViewAppLogs,c=(0,m._)((0,rn.Z)({openFile:a,listFiles:o.listFiles}),2),s=c[0],u=c[1],d=(t={variables:{input:{buildId:r.id}},ssr:!1,fetchPolicy:"cache-and-network"},n=(0,A._)({},rz,t),ee.a(rY,n)),f=d.data,h=d.loading,p=(0,x.useMemo)(function(){var e=[],t=f&&"HostingBuildDeployActionHistoryResults"===f.hostingBuildDeployActionHistory.__typename?f.hostingBuildDeployActionHistory.results:null;if(t){var n=void 0,r=void 0,i=void 0,o=!0,a=!1,l=void 0;try{for(var c,s,u=t[Symbol.iterator]();!(o=(s=u.next()).done);o=!0)!function(){var t=s.value;if("HostingBuildDeployLogAction"===t.__typename)return e.push(t.log);rk.some(function(e){return e.statusType===t.status})&&(n=t.status),t.status===el.Fe.Failed&&(r=n)}()}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}var d=n?null===(c=rT(n))||void 0===c?void 0:c.id:void 0;return r&&(i=d),{logs:e,activeStage:d,erroredStage:i,erroredStatus:r}}},[f]);return(0,x.useEffect)(function(){s&&p&&s.write(p.logs.join(""))},[s,p]),(0,v.BX)(b.G,{css:r5.root,children:[(0,v.BX)(b.G,{css:r5.header,children:[(0,v.tZ)(X.hU,{alt:"Back to timeline",onClick:function(){return i()},children:(0,v.tZ)(F.Z,{})}),(0,v.tZ)(b.G,{children:(0,v.BX)(I.xv,{color:"dimmer",multiline:!1,children:[(0,v.tZ)("span",{css:r5.name,children:r.user.displayName+" "}),(0,r1.B)(r.status)]})}),(0,v.tZ)(rK,{build:r})]}),p||h?(0,v.BX)(v.HY,{children:[(null==p?void 0:p.erroredStatus)?(0,v.tZ)(b.G,{css:r5.error,children:(0,v.tZ)(ra,{currentStatus:p.erroredStatus,provider:r.provider,debugSummary:r.debugSummary,openFile:a,onViewApplicationLogs:l})}):null,(0,v.tZ)(r6,{activeStage:null==p?void 0:p.activeStage,erroredStage:null==p?void 0:p.erroredStage}),(0,v.tZ)(b.G,{css:r5.divider}),(0,v.BX)(t6.Tg,{css:r5.content,children:[(0,v.tZ)(b.G,{css:r5.xterm,innerRef:u}),h||!s?(0,v.tZ)(b.G,{css:r5.loading,children:(0,v.tZ)(w.Z,{color:Z.TV.white,size:24})}):null]})]}):(0,v.tZ)(rd,{provider:r.provider,openFile:a})]})}var r9=(0,B.X)({item:Z.l0.rowWithGap(12),past:{":last-of-type":{"[data-timeline-line]":{display:"none"}}},future:{":last-of-type":{"[data-timeline-line]":{bottom:-19}}},animate:{animation:(0,N.Gs)(36.4)+" 300ms ease-out forwards"}}),ie=(0,B.X)({root:[Z.l0.colWithGap(8)],empty:[Z.l0.pb(8),Z.l0.center,Z.l0.align.stretch],items:[],loadMore:[Z.l0.center],item:[Z.l0.rowWithGap(8),Z.l0.pl(8),Z.l0.pr(4),Z.l0.pb(12),Z.l0.align.center,Z.l0.flex.growAndShrink(1),Z.l0.color.foregroundDimmest,Z.l0.hover(Z.l0.color.foregroundDefault)],itemMainText:[Z.l0.flex.growAndShrink(1),(0,T._)({},Z.nC.min(640),Z.l0.flex.growAndShrink(0))],itemLine:[Z.l0.display.none,(0,T._)({},Z.nC.min(640),[Z.l0.display.flex,Z.l0.flex.growAndShrink(1),Z.l0.border({color:Z.TV.outlineDimmest,direction:"top"})])],itemRight:[Z.l0.rowWithGap(6),Z.l0.justify.end,Z.l0.textAlign.right],itemContent:[Z.l0.rowWithGap(8),Z.l0.flex.growAndShrink(1),Z.l0.align.center],itemPast:[r9.item,r9.past],itemPastAnimate:[r9.item,r9.past,r9.animate],itemFuture:[r9.item,r9.future],itemFutureAnimate:[r9.item,r9.future,r9.animate],disabledLog:{cursor:"not-allowed"}}),it=(0,B.X)({button:[Z.l0.reset.button,Z.l0.cursor.pointer,Z.l0.borderRadius(8),Z.l0.display.flex,Z.l0.rowWithGap(6),Z.l0.align.center,Z.l0.px(8),Z.l0.color.foregroundDimmer,Z.l0.height(32),Z.l0.hover(Z.l0.color.foregroundDefault)]}),ir=(0,B.X)({button:it.button,buttonHighlight:[it.button,Z.l0.color.accentNegativeStrongest,Z.l0.backgroundColor.accentNegativeDimmest,Z.l0.border({color:Z.TV.accentNegativeDimmer})],buttonOpen:Z.l0.flex.growAndShrink(1),buttonClosed:[Z.l0.flex.growAndShrink(1),Z.l0.pb(12)],buttonContent:[Z.l0.flex.growAndShrink(1),Z.l0.rowWithGap(8),Z.l0.align.center]});function ii(e){var t=e.items,n=e.onClick,r=(0,m._)((0,x.useState)(!1),2),i=r[0],o=r[1],a=(0,C.pn)(),l=(0,x.useRef)(void 0);(0,x.useEffect)(function(){(null==a?void 0:a.status)!==void 0&&(l.current=null==a?void 0:a.status)},[a,null==a?void 0:a.status]);var c=!a&&l.current!==el.Fe.Building&&l.current!==el.Fe.Success,s=c?Z.TV.accentNegativeStronger:Z.TV.foregroundDimmer;return 0===t.length?null:(0,v.BX)(b.G,{children:[(0,v.BX)(b.G,{css:Z.l0.rowWithGap(12),children:[(0,v.tZ)(n7,{type:i?"futureFailOpen":"futureFailClosed"}),(0,v.tZ)(b.G,{css:i?ir.buttonOpen:ir.buttonClosed,children:(0,v.BX)("button",{onClick:function(){return o(!i)},css:c?ir.buttonHighlight:ir.button,children:[(0,v.BX)(b.G,{css:ir.buttonContent,children:[c?(0,v.tZ)(G.Z,{color:Z.TV.accentNegativeStronger}):null,(0,v.BX)(I.xv,{children:[t.length," ",(0,r2.Z)("build",t.length)," failed"]}),i?null:(0,v.BX)(I.xv,{children:[t.length>1?"Most recent: ":null,(0,rg.Z)(new Date(t[0].timeCreated),Date.now(),{addSuffix:!0})]})]}),i?(0,v.tZ)(rv.Z,{color:s}):(0,v.tZ)(td.Z,{color:s})]})})]}),i?(0,v.tZ)(b.G,{css:Z.l0.pt(8),children:t.map(function(e){return(0,v.tZ)(ia,{item:e,onClick:function(){return n(e.build)},type:"future"},e.id)})}):null]})}function io(e){var t,n,r,i=e.replId,o=e.onSelect,a=e.type,l=void 0===a?"default":a,c=(t=(0,A._)({},rz,{variables:{replId:i,count:20},fetchPolicy:"cache-and-network",ssr:!1}),ee.a(rJ,t)),s=c.data,u=c.previousData,d=c.loading,f=c.error,h=c.fetchMore,p=null!=s?s:u,m=(null==p?void 0:p.repl.__typename)==="Repl"?p.repl:null,g=(null==m?void 0:null===(r=m.hostingDeployment)||void 0===r?void 0:r.__typename)==="HostingDeployment"?m.hostingDeployment:null,y=(n=(0,S._)(function(){var e;return(0,E.Jh)(this,function(t){switch(t.label){case 0:if(!(e=null==g?void 0:g.activityLogs.pageInfo.nextCursor))return[2];return[4,h({variables:{after:e,count:20}})];case 1:return t.sent(),[2]}})}),function(){return n.apply(this,arguments)}),Z=(0,rP.Z)({onLoadMore:y,rootMargin:"0px 0px 300px 0px"}).targetRef,_=(0,x.useRef)(""),k=(0,C.$y)(),T=(0,C.pn)(),R=(0,x.useRef)(void 0);if((0,x.useEffect)(function(){(null==T?void 0:T.id)!==void 0&&(R.current=null==T?void 0:T.id)},[null==T?void 0:T.id]),d&&!g)return"failureQueue"===l?null:(0,v.tZ)(ic,{});if(!(null==g?void 0:g.activityLogs))return null;var I=g.activityLogs,B=I.items,P=I.pageInfo;if(0===B.length)return null;if(f)return(0,v.tZ)(b.G,{css:ie.empty,children:(0,v.tZ)(D.E,{colorway:"warning",icon:(0,v.tZ)(G.Z,{}),text:"Something went wrong"})});B.length&&(B[0].build.id===(null==k?void 0:k.id)&&B[1]?_.current=B[1].build.id:_.current=B[0].build.id);var L=function(e,t){var n=[],r=(null==t?void 0:t.timeCreated)?new Date(t.timeCreated):null,i=!0,o=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;if(s.type!==el.dD.Fail||r&&r.getTime()>new Date(s.build.timeCreated).getTime()||(null==t?void 0:t.id)===s.build.id)break;n.push(s)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return n}(B,k);return"failureQueue"===l?(0,v.tZ)(N.un,{render:L.length>0,initialHeight:44,children:(0,v.tZ)(ii,{items:L,onClick:o})}):(0,v.BX)(b.G,{css:ie.root,"data-history-timeline-items":B.length-L.length,children:[(0,v.tZ)(b.G,{css:ie.items,children:B.map(function(e,t){return e.build.id===(null==k?void 0:k.id)||t<L.length?null:(0,v.tZ)(ia,{item:e,onClick:function(){return o(e.build)}},e.id)})}),P.nextCursor?(0,v.tZ)(b.G,{css:ie.loadMore,children:(0,v.tZ)(X.hU,{disabled:d,tooltipBehavior:"hidden",alt:"Show more",onClick:y,ref:Z,children:d?(0,v.tZ)(w.Z,{}):(0,v.tZ)(rL.Z,{})})}):null]})}function ia(e){var t=e.item,n=e.onClick,r=e.timeline,i=e.type,o=t.build.hasDeployLogs,a=new Date(t.timeCreated),l=Date.now(),c=!o,s=(0,v.BX)(b.G,{css:ie.item,children:[(0,v.tZ)(b.G,{css:ie.itemMainText,children:(0,v.tZ)(r0,{activityLogItem:t})}),(0,v.tZ)(b.G,{css:ie.itemLine}),(0,v.BX)(b.G,{css:ie.itemRight,children:[(0,v.tZ)(rM,{activityLogItem:t}),(0,v.tZ)(I.xv,{multiline:!1,children:(0,rg.Z)(a,l,{addSuffix:!0})}),(0,v.tZ)(X.hU,{alt:o?"View deploy logs":"Deploy logs expire after 30 days",onClick:n,disabled:c,css:c&&ie.disabledLog,children:(0,v.tZ)(eh.Z,{})})]})]});return void 0===r||r?(0,v.BX)(b.G,{css:"past"===(void 0===i?"past":i)?ie.itemPast:ie.itemFuture,children:[(0,v.tZ)(n7,{type:t.type===el.dD.Fail?"pastFail":"pastSuccess"}),s]}):s}var il=(0,B.X)({loading:[Z.l0.rowWithGap(12),{":last-of-type":{"[data-timeline-line]":{display:"none"}}}],loadingItem:[na.p.backgroundPulse(),Z.l0.height(20.4),Z.l0.mt(2),Z.l0.ml(4),Z.l0.flex.growAndShrink(1),Z.l0.borderRadius(6),{opacity:.5,marginBottom:14}]});function ic(){return(0,v.tZ)(b.G,{children:[,,,].fill(0).map(function(e,t){return(0,v.BX)(b.G,{css:il.loading,children:[(0,v.tZ)(n7,{type:"pastNeutral"}),(0,v.tZ)(t6.Tg,{elevated:!0,css:il.loadingItem})]},t)})})}var is=(0,B.X)({self:[Z.l0.colWithGap(8)],selfGrow:[Z.l0.colWithGap(8),Z.l0.flex.grow(1)],label:[Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.maxWidth("100%")],labelText:[Z.l0.flex.growAndShrink(1),{textOverflow:"ellipsis"}],labelTextWarning:[Z.l0.flex.growAndShrink(1),Z.l0.color.orangeStrongest,{textOverflow:"ellipsis"}],header:[Z.l0.display.flex,Z.l0.flex.row,Z.l0.justify.spaceBetween,Z.l0.align.center],actions:[Z.l0.rowWithGap(4)],labelLoading:[Z.l0.rowWithGap(8),Z.l0.align.center,na.p.foregroundPulse(),Z.l0.width(200),Z.l0.borderRadius(8)],inputLoading:[na.p.foregroundPulse(),Z.l0.borderRadius(8)]}),iu=function(e){var t=e.id,n=e.title,r=e.information,i=e.optional,o=e.detail,a=e.warning,l=e.actions,c=e.children,s=e.grow;return(0,v.BX)(b.G,{css:void 0!==s&&s?is.selfGrow:is.self,children:[(0,v.BX)(b.G,{css:is.header,children:[(0,v.BX)(b.G,{tag:"label",htmlFor:t,css:is.label,children:[(0,v.tZ)(I.xv,{color:"dimmer",multiline:!1,children:n}),(0,v.tZ)(eW.u,{tooltip:r,children:(0,v.tZ)(eH.Z,{color:Z.TV.foregroundDimmest})}),void 0!==i&&i?(0,v.tZ)(I.xv,{css:is.labelText,variant:"small",color:"dimmest",multiline:!1,children:"optional"}):null,o?(0,v.tZ)(I.xv,{css:is.labelText,variant:"small",color:"dimmest",multiline:!1,children:o}):null,a?(0,v.tZ)(I.xv,{css:is.labelTextWarning,variant:"small",multiline:!1,children:a}):null]}),l?(0,v.tZ)(b.G,{css:is.actions,children:l}):null]}),c]})},id=function(){return(0,v.BX)(b.G,{css:is.self,children:[(0,v.tZ)(b.G,{css:is.header,children:(0,v.tZ)(b.G,{css:is.labelLoading,children:(0,v.tZ)(I.xv,{color:"dimmer",multiline:!1,children:"\xa0"})})}),(0,v.tZ)(b.G,{css:is.inputLoading,children:(0,v.tZ)(tf.II,{disabled:!0})})]})};function ih(){var e=(0,K._)(["\n  query ReservedVMMachineConfigurations {\n    hostingMachineConfigurations(input: { provider: gce }) {\n      __typename\n      ... on HostingMachineConfigurationsResults {\n        results {\n          ...MachineConfiguration\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return ih=function(){return e},e}var ip={},im=(0,Q.Ps)(ih(),rX.bN),iv=n(11894),ig=n(18158),iy=(0,B.X)({header:[Z.l0.colWithGap(4),Z.l0.mb(16)],costWrapper:[Z.l0.rowWithGap(2),Z.l0.align.center,Z.l0.flex.shrink(1)],cost:[Z.l0.rowWithGap(4),Z.l0.align.baseline],selectWrapper:Z.l0.rowWithGap(12),selectInner:[Z.l0.flex.growAndShrink(1)],select:[Z.l0.border({color:rb.TV.outlineDefault}),{flex:"1 1 auto"}]}),ib=function(e){var t,n=e.initialMachineConfiguration,r=e.isTeamRepl,i=e.onChange,o=e.onConfirm,a=e.onError,l=e.onBack,c=(0,m._)((0,x.useState)(n?(0,P._)((0,A._)({},n),{maxInstances:1}):void 0),2),s=c[0],u=c[1],d=(0,m._)((0,rr.gr)(null==s?void 0:s.configurationSlug),2),f=d[0],h=d[1],p=(0,m._)((0,x.useState)(!1),2),g=p[0],y=p[1],w=(t=(0,A._)({},ip,{onCompleted:function(e){"HostingMachineConfigurationsResults"!==e.hostingMachineConfigurations.__typename&&a("Something went wrong")},onError:function(e){return a(e.message)}}),ee.a(im,t)),C=w.data,_=w.loading,S=(null==C?void 0:C.hostingMachineConfigurations.__typename)==="HostingMachineConfigurationsResults"?C.hostingMachineConfigurations.results:null;(0,x.useEffect)(function(){J({context:$.k.AutoscaleMachineConfiguration})},[]),(0,x.useEffect)(function(){if(S&&!s){var e=r?S.find(function(e){return"e2-micro"===e.slug}):S.find(function(e){return"e2-small"===e.slug});if(!e){a("An error occurred trying to validate default machine configuration");return}var t={configurationId:e.id,configurationLabel:e.label,configurationSlug:e.slug,maxInstances:1};u(t),"function"==typeof i&&i(t)}},[S,s,r,i,a]);var k=S&&(null==S?void 0:S.length)>0,E=_||r||g||!k;return(0,v.BX)(v.HY,{children:[(0,v.tZ)(M,{maxWidth:!0,children:(0,v.tZ)(j,{onBack:l})}),(0,v.BX)(M,{maxWidth:!0,children:[(0,v.BX)(b.G,{css:iy.header,children:[(0,v.tZ)(I.xv,{variant:"subheadBig",children:"Reserved VM configuration"}),(0,v.tZ)(I.xv,{variant:"small",color:"dimmer",children:"Reserved VM apps are always on and can have a dedicated machine. You are billed for the total number of hours your machines have been running for. The cost per hour changes depending on your machine configuration."})]}),(0,v.tZ)(iu,{id:"machineConfiguration",title:"Machine Configuration",information:"Your machine configuration determines the number of vCPUs and memory available to your app. You can change it at any time.",children:s?(0,v.BX)(v.HY,{children:[(0,v.tZ)(b.G,{css:iy.selectWrapper,children:r?(0,v.tZ)(tf.II,{value:s.configurationLabel,disabled:!0}):(0,v.BX)(v.HY,{children:[(0,v.tZ)(b.G,{css:iy.selectInner,children:(0,v.tZ)(iv.P,{css:iy.select,initialSelectedItem:{id:s.configurationId,title:s.configurationLabel},items:k?Object.values(S).map(function(e){var t=e.id;return{title:e.label,id:t}}):[],onChange:function(e){var t=e.id,n=null==S?void 0:S.find(function(e){return e.id===t});if(!n){a("An error occurred trying to validate selected machine configuration");return}var r={configurationId:n.id,configurationLabel:n.label,configurationSlug:n.slug,maxInstances:1};u(r),"function"==typeof i&&i(r)},disabled:E})}),(0,v.tZ)(b.G,{css:iy.costWrapper,children:(0,v.BX)(b.G,{css:iy.cost,children:[(0,v.BX)(I.xv,{variant:"subheadDefault",multiline:!1,children:["$",h]}),(0,v.tZ)(I.xv,{color:"dimmer",variant:"small",multiline:!1,children:"per month"}),(0,v.BX)(I.xv,{color:"dimmer",variant:"small",multiline:!1,children:["($",f,"/hour)"]})]})})]})}),"function"==typeof o?(0,v.BX)(b.G,{css:[Z.l0.colWithGap(8),Z.l0.pt(8)],children:[(0,v.tZ)(e0.zx,{colorway:"primary",text:"Approve and update",iconRight:(0,v.tZ)(tb.Z,{}),onClick:function(){if(!s){a("An error occurred trying to validate selected machine configuration");return}y(!0),o(s)},loading:_,disabled:E}),(0,v.BX)(I.xv,{color:"dimmest",children:["Your deployed app will incur charges for any resource usage."," ",(0,v.tZ)("a",{href:ig.TT.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})]}):null]}):(0,v.tZ)(b.G,{css:[na.p.foregroundPulse(),Z.l0.borderRadius(8)],children:(0,v.tZ)(tf.II,{disabled:!0})})})]})]})},iw=(u={},(0,T._)(u,el.r4.Gce,"Reserved VM"),(0,T._)(u,el.r4.CloudRun,"Autoscale"),(0,T._)(u,el.r4.Static,"Static"),(0,T._)(u,el.r4.Cron,"Scheduled"),u),iZ=n(47336),ix=n.n(iZ),iC=n(65370),i_=n(20375),iS=n(95173),ik=(0,B.X)({root:[Z.l0.rowWithGap(0),Z.l0.flex.shrink(1)],name:[Z.l0.color.foregroundDefault,Z.l0.fontWeight.medium],item:[Z.l0.rowWithGap(8),Z.l0.pr(4),Z.l0.align.center,Z.l0.flex.growAndShrink(1)],itemMainText:[Z.l0.flex.growAndShrink(1),Z.l0.align.center],itemRight:[Z.l0.textAlign.right],itemContent:[Z.l0.rowWithGap(8),Z.l0.flex.growAndShrink(1),Z.l0.align.center],disabledLog:{cursor:"not-allowed"}}),iE=function(e){var t=e.onClick,n=(0,C.kW)(),r=(0,C.$y)();if(n===_.z.Loading||!r)return(0,v.tZ)(w.Z,{size:12});var i=r.status,o=r.hasDeployLogs,a=!o;return(0,v.tZ)(b.G,{css:ik.root,children:(0,v.BX)(b.G,{css:ik.item,children:[(0,v.tZ)(i_.c,{status:i}),(0,v.tZ)(b.G,{css:ik.itemMainText,children:(0,v.BX)(I.xv,{multiline:!1,children:[(0,v.tZ)("span",{css:ik.name,children:r.user.displayName+" "}),(0,r1.B)(i)+" ",!function(e){switch(e){case el.Fe.Building:case el.Fe.Promoting:case el.Fe.Running:case el.Fe.Pending:case el.Fe.Failed:case el.Fe.Success:return!0;case el.Fe.Resuming:case el.Fe.Suspending:case el.Fe.Suspended:case el.Fe.UpdatingTier:return!1}}(i)?null:(0,v.tZ)(eW.u,{tooltip:(0,iS.Z)(new Date(r.timeCreated),"MMMM do, Y 'at' h:m aa z"),maxWidth:250,children:function(e,t){return(0,v.tZ)("span",(0,P._)((0,A._)({},e),{ref:t,children:(0,rg.Z)(new Date(r.timeCreated),Date.now(),{addSuffix:!0})}))}})]})}),(0,v.tZ)(b.G,{css:ik.itemRight,children:(0,v.tZ)(X.hU,{alt:o?"View deploy logs":"Deploy logs expire after 30 days",onClick:t,disabled:a,css:a&&ik.disabledLog,children:(0,v.tZ)(eh.Z,{})})})]})})},iT=n(59249),iR=n(18123),iD=function(e){var t=e.currentBuild,n=(0,tQ.P5)({type:"string",controlName:"flag-fallback-deployments-domain",default:rr.q7}),r=(0,m._)((0,x.useState)([]),2),i=r[0],o=r[1],a=n!==rr.q7;return(0,x.useEffect)(function(){var e=(null===(i=t.repl.hostingDeployment)||void 0===i?void 0:i.__typename)==="HostingDeployment"&&t.repl.hostingDeployment.id,r=[];switch(t.provider){case el.r4.Goval:r.push({href:"https://".concat(e,".id.repl.co"),private:!0});break;case el.r4.Gce:case el.r4.CloudRun:case el.r4.Static:var i,a,l,c,s,u,d=(null===(a=t.repl.hostingDeployment)||void 0===a?void 0:a.__typename)==="HostingDeployment"?null===(l=t.repl.hostingDeployment)||void 0===l?void 0:l.replitAppSubdomain:void 0;!d&&(null===(c=t.repl.owner)||void 0===c?void 0:c.username)&&(d="".concat(t.repl.slug,"-").concat(t.repl.owner.username)),d&&r.push({href:"https://".concat(d).concat((null===(u=window)||void 0===u?void 0:null===(s=u.location)||void 0===s?void 0:s.hostname)!=="replit.com"?".staging":"",".").concat(n),private:!1})}if(t.repl.domains){var f=t.repl.domains.filter(function(t){return(null==t?void 0:t.hosting_deployment_id)===e}),h=!0,p=!1,m=void 0;try{for(var v,g=f[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var y=v.value;y&&r.push({href:"https://".concat(y.domain),private:!1,state:"verified"!==y.state?y.state:void 0})}}catch(e){p=!0,m=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw m}}}o(r)},[t,n]),(0,v.BX)(b.G,{css:[Z.l0.colWithGap(2),Z.l0.flex.growAndShrink(1)],children:[a?(0,v.tZ)(D.E,{colorway:"warning",text:"The ".concat(rr.q7," domain is currently unavailable, please use the ").concat(n," URL below.")}):null,i.map(function(e,t){return(0,v.BX)(b.G,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:[(0,v.tZ)(I.xv,{css:[Z.l0.flex.shrink(1)],multiline:!1,children:(0,v.tZ)("a",{href:e.href,target:"_blank",css:[Z.l0.color.foregroundDefault],children:e.href})}),e.private?(0,v.tZ)(iR.Z,{color:Z.TV.foregroundDefault}):null,(0,v.tZ)("a",{href:e.href,target:"_blank",css:[Z.l0.display.flex,Z.l0.align.center],children:(0,v.tZ)(iT.Z,{color:Z.TV.foregroundDefault})}),e.state?(0,v.BX)(I.xv,{multiline:!1,children:["(",e.state,")"]}):null]},"domains-".concat(t))})]})},iI=(0,nn.F4)("\n    50% {\n      background-color: ".concat(Z.TV.accentPositiveDimmest,";\n      outline: 1px solid ").concat(Z.TV.accentPositiveDimmer,";\n      box-shadow: 0px 0px 32px rgba(0, 145, 24, 0.3);\n    }\n")),iB=(0,B.X)({deploymentInfo:[Z.l0.colWithGap(8),Z.l0.p(16),Z.l0.borderRadius(),{outline:"1px solid transparent"}]}),iG=(0,B.X)({textButton:[Z.l0.cursor.pointer,Z.l0.reset.button,Z.l0.color.accentPrimaryStronger,Z.l0.focusRing,Z.l0.hover(Z.l0.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],textLink:Z.l0.hover(Z.l0.color.accentPrimaryStrongest),labeledSection:[Z.l0.flex.growAndShrink(1),(0,T._)({},Z.nC.min(400),[Z.l0.flex.row,Z.l0.align.baseline])],labeledSectionFullWidth:[Z.l0.flex.growAndShrink(1),(0,T._)({},Z.nC.min(400),[Z.l0.flex.row,Z.l0.align.baseline,Z.l0.flex.grow(1),Z.l0.justify.spaceBetween])],buildStatus:[Z.l0.rowWithGap(4),Z.l0.align.center,Z.l0.flex.shrink(1)],deploymentInfo:iB.deploymentInfo,deploymentInfoAnimate:[iB.deploymentInfo,{animation:"".concat(iI," 700ms ease-out")}],deploymentInfoTitle:[Z.l0.rowWithGap(8),Z.l0.flex.wrap,Z.l0.flex.shrink(0),Z.l0.justify.spaceBetween],deploymentInfoContent:[Z.l0.colWithGap(8),(0,T._)({},Z.nC.min(400),Z.l0.colWithGap(4))],typeColumn:[Z.l0.rowWithGap(6),Z.l0.flex.wrap,Z.l0.flex.shrink(1)]}),iA=function(e){var t=e.text,n=e.onClick;return(0,v.tZ)("button",{css:iG.textButton,onClick:n,children:t})},iP=function(e){var t=e.name,n=e.sku,r=e.canManage,i=e.usageLink,o=e.onManageClick;return(0,v.BX)(b.G,{css:iG.typeColumn,children:[(0,v.tZ)(I.xv,{multiline:!1,children:t}),n?(0,v.BX)(I.xv,{color:"dimmest",multiline:!1,children:["(",n,")"]}):null,r?(0,v.tZ)(iA,{text:"Manage",onClick:o}):null,i?(0,v.tZ)(ix(),{legacyBehavior:!0,href:"/usage",passHref:!0,children:(0,v.tZ)("a",{css:iG.textLink,children:(0,v.tZ)(I.xv,{children:"See all usage"})})}):null]})},iL=function(e){var t=e.label,n=e.children,r=e.fullWidth;return(0,v.BX)(b.G,{css:r?iG.labeledSectionFullWidth:iG.labeledSection,children:[(0,v.tZ)(b.G,{css:Z.l0.minWidth(100),children:(0,v.tZ)(I.xv,{css:Z.l0.color.foregroundDimmer,multiline:!1,children:t})}),n]})},iN=function(e){var t=e.provider,n=e.machine,r=e.onViewBuildLogs,i=e.onManageClick,o=e.onViewAction,a=(0,C.kW)(),l=(0,C.$y)(),c=void 0!==l,s=t!==el.r4.Static&&c&&null===l.hasImageTag,u=!!((a===_.z.Ready||a===_.z.Suspended)&&!s),d=null,f=null,h=null,p=null,m=(0,C.pn)(),g=(0,x.useRef)(void 0);(0,x.useEffect)(function(){m&&(g.current=null==m?void 0:m.id)},[m,null==m?void 0:m.id]);var y=(null==l?void 0:l.status)===el.Fe.Success,w=(null==l?void 0:l.id)===g.current,Z=(null==l?void 0:l.provider)!==el.r4.Cron;switch(l&&(f=(0,v.BX)(v.HY,{children:[(0,v.tZ)(iL,{label:"Status",children:(0,v.tZ)(b.G,{css:iG.buildStatus,children:(0,v.tZ)(iE,{onClick:function(){r(l)}})})}),Z?(0,v.tZ)(iL,{label:"Domain",children:(0,v.tZ)(iD,{currentBuild:l})}):null]})),t){case el.r4.Gce:h=(0,v.tZ)(iL,{label:"Type",fullWidth:!c,children:(0,v.tZ)(iP,{name:iw[t],sku:null==n?void 0:n.configurationLabel,canManage:u,onManageClick:i})});break;case el.r4.CloudRun:h=(0,v.tZ)(iL,{label:"Type",fullWidth:!c,children:(0,v.tZ)(iP,{name:iw[t],sku:n?"".concat(n.configurationLabel," / ").concat(n.maxInstances," Max"):"Beta",canManage:u,usageLink:!0,onManageClick:i})});break;case el.r4.Static:h=(0,v.tZ)(iL,{label:"Type",fullWidth:!c,children:(0,v.tZ)(iP,{name:iw[t],sku:void 0,canManage:u&&c,onManageClick:i})});break;case el.r4.Cron:if(!(null==l?void 0:null===(S=l.machineJob)||void 0===S?void 0:S.timezone))break;var S,k,E,T=null==l?void 0:null===(k=l.machineJob)||void 0===k?void 0:k.timezone,R=iC.y.find(function(e){return e.utc.includes(T)}),B=(null==R?void 0:R.abbr)||T;h=(0,v.tZ)(iL,{label:"Type",fullWidth:!c,children:(0,v.tZ)(iP,{name:iw[t],sku:"".concat(B,", ").concat(null==l?void 0:null===(E=l.machineJob)||void 0===E?void 0:E.crontab),canManage:!1,onManageClick:i})}),d=(0,v.tZ)(tV,{onSuccessfulExecution:function(){o({type:$.a.ChangeView,payload:{view:$.k.Schedule}})}});case el.r4.Goval:}return(s&&(p=(0,v.tZ)(b.G,{children:(0,v.tZ)(D.E,{icon:(0,v.tZ)(G.Z,{}),colorway:"warning",text:"To upgrade, please redeploy."})})),f||h||p)?(0,v.BX)(t6.Tg,{elevated:!0,css:y&&w?iG.deploymentInfoAnimate:iG.deploymentInfo,style:{paddingTop:l?12:16},children:[l?(0,v.BX)(b.G,{css:iG.deploymentInfoTitle,children:[(0,v.tZ)(I.xv,{variant:"subheadDefault",multiline:!1,children:"Production"}),d]}):null,(0,v.BX)(b.G,{css:iG.deploymentInfoContent,children:[f,h,p]})]}):null},iO=n(98250),iU=n(46717),iM=(0,B.X)({styles0:[Z.l0.height(128),Z.l0.width(128),Z.l0.borderRadius(2),eI.gU.nofill],styles1:[Z.l0.position.absolute]}),iX=(0,B.X)({container:[Z.l0.align.center,Z.l0.colWithGap(4)],qrContainer:[Z.l0.align.center,Z.l0.justify.center]});function iF(e){var t=e.color;return(0,v.BX)(b.G,{css:iX.container,children:[(0,v.BX)(b.G,{css:iX.qrContainer,children:[(0,v.tZ)("svg",{viewBox:"0 0 128 128",css:iM.styles0,target:"_blank",onClick:function(){window.open("/mobile")},children:(0,v.tZ)("path",{fill:null!=t?t:Z.TV.foregroundDefault,d:"m0,13.58v13.58h27.15V0H0v13.58ZM34.91,1.94v1.94h-3.88v3.88h3.88v-3.88h7.76v3.88h3.88v-3.88h-3.88V0h-7.76v1.94Zm31.03,0v1.94h-15.52v7.76h-15.52v3.88h7.76v7.76h-3.88v-3.88h-7.76v11.64h-15.52v7.76h-3.88v3.88h-3.88v-3.88H0v3.88h7.76v3.88H0v7.76h3.88v3.88H0v3.88h3.88v3.88H0v3.88h3.88v3.88H0v3.88h3.88v3.88H0v3.88h15.52v3.88h-3.88v7.76h3.88v-3.88h3.88v-3.88h7.76v-3.88h-7.76v-7.76h3.88v3.88h3.88v-3.88h3.88v-3.88h3.88v-19.39h7.76v-3.88h-3.88v-3.88h-3.88v-3.88h3.88v-3.88h3.88v3.88h3.88v-3.88h3.88v-3.88h3.88v-7.76h3.88v3.88h3.88v7.76h-3.88v3.88h11.64v-3.88h3.88v3.88h15.52v3.88h-3.88v3.88h3.88v11.64h11.64v3.88h-11.64v3.88h-3.88v3.88h15.52v7.76h-3.88v-3.88h-3.88v3.88h-3.88v-3.88h-3.88v3.88h3.88v15.52h3.88v15.52h7.76v3.88h-3.88v3.88h-3.88v-3.88h-3.88v3.88h-7.76v-3.88h-3.88v3.88h3.88v3.88h-11.64v-3.88h3.88v-7.76h7.76v-3.88h7.76v-3.88h-3.88v-3.88h-3.88v-3.88h3.88v-11.64h-11.64v3.88h3.88v3.88h-7.76v-3.88h-7.76v-3.88h-7.76v3.88h7.76v7.76h-7.76v-3.88h-15.52v7.76h3.88v-3.88h7.76v3.88h3.88v3.88h-3.88v3.88h-11.64v-3.88h-3.88v-7.76h-3.88v15.52h3.88v3.88h3.88v-3.88h3.88v3.88h3.88v3.88h3.88v3.88h7.76v-3.88h-7.76v-3.88h15.52v-3.88h-3.88v-3.88h7.76v-7.76h11.64v7.76h-7.76v3.88h-3.88v7.76h-3.88v3.88h3.88v3.88h27.15v-7.76h3.88v7.76h7.76v-3.88h3.88v3.88h3.88v-3.88h-3.88v-7.76h3.88v3.88h3.88v-3.88h3.88v-3.88h-3.88v3.88h-3.88v-3.88h-3.88v-11.64h3.88v3.88h3.88v3.88h7.76v-3.88h-3.88v-3.88h-7.76v-7.76h-3.88v-7.76h7.76v7.76h7.76v-3.88h-3.88v-7.76h-7.76v-3.88h-7.76v3.88h-3.88v-11.64h3.88v3.88h7.76v-3.88h-7.76v-3.88h3.88v-7.76h3.88v-3.88h3.88v3.88h3.88v3.88h-3.88v15.52h3.88v-11.64h3.88v-7.76h-3.88v-7.76h3.88v-7.76h-3.88v-11.64h-3.88v11.64h3.88v3.88h-3.88v3.88h-7.76v-3.88h3.88v-3.88h-3.88v-3.88h3.88v-3.88h-3.88v3.88h-3.88v-7.76h-7.76v3.88h3.88v3.88h-11.64v-3.88h3.88v-11.64h-3.88v7.76h-3.88v-11.64h3.88v-3.88h-3.88v3.88h-3.88v-3.88h-3.88v-3.88h7.76V3.88h3.88v3.88h3.88V0h-7.76v3.88h-3.88V0h-3.88v3.88h-7.76V0h-7.76v1.94Zm34.91,11.64v13.58h27.15V0h-27.15v13.58Zm-31.03-5.82v3.88h-7.76v3.88h-3.88v7.76h3.88v3.88h-3.88v-3.88h-3.88v3.88h-3.88v3.88h-3.88v7.76h-3.88v-7.76h-3.88v7.76h-3.88v3.88h-3.88v-3.88h-11.64v-3.88h11.64v-3.88h3.88v-7.76h3.88v3.88h3.88v-3.88h3.88v3.88h3.88v-3.88h3.88v-3.88h-7.76v-3.88h3.88v-3.88h3.88v3.88h3.88v-7.76h7.76v-3.88h3.88v3.88Zm-46.8,5.82v9.45H4.13V4.13h18.89v9.45Zm100.85,0v9.45h-18.89V4.13h18.89v9.45Zm-116.11,0v5.82h11.64V7.76H7.76v5.82Zm73.7-3.88v1.94h-3.88v7.76h-3.88v3.88h3.88v3.88h3.88v-7.76h3.88v7.76h-3.88v3.88h-3.88v-3.88h-3.88v3.88h-3.88v3.88h-3.88v-3.88h3.88v-3.88h-3.88v-11.64h3.88v3.88h3.88V7.76h7.76v1.94Zm27.15,3.88v5.82h11.64V7.76h-11.64v5.82Zm-38.79,11.64v1.94h3.88v-3.88h-3.88v1.94Zm-27.15,3.88v1.94h3.88v-3.88h-3.88v1.94Zm46.55,7.76v1.94h-11.64v-3.88h11.64v1.94Zm-62.06,7.76v1.94h-3.88v3.88h11.64v3.88h-11.64v3.88h3.88v3.88h3.88v11.64h-3.88v3.88h-3.88v-3.88h-3.88v3.88h-3.88v3.88h-3.88v-3.88h-3.88v-7.76h3.88v-11.64h3.88v3.88h3.88v-7.76h-7.76v-3.88h-3.88v-3.88h3.88v-3.88h15.52v1.94Zm81.45,1.94v3.88h3.88v7.76h-3.88v7.76h-3.88v3.88h-3.88v-3.88h3.88v-11.64h-3.88v-3.88h-3.88v-3.88h-3.88v-3.88h15.52v3.88Zm-96.97,1.94v1.94h3.88v-3.88h-3.88v1.94Zm89.21,0v1.94h3.88v3.88h3.88v-3.88h-3.88v-3.88h-3.88v1.94Zm-81.45,3.88v1.94h3.88v-3.88h-3.88v1.94Zm77.58,3.88v1.94h-3.88v-3.88h3.88v1.94Zm-77.58,9.7v3.88h-7.76v7.76h3.88v-3.88h3.88v-3.88h3.88v3.88h3.88v-3.88h-3.88v-3.88h3.88v-3.88h-7.76v3.88Zm19.39-1.94v1.94h3.88v-3.88h-3.88v1.94Zm0,11.64v1.94h-3.88v7.76h-3.88v3.88h3.88v-3.88h3.88v3.88h3.88v-7.76h-3.88v-3.88h3.88v-3.88h-3.88v1.94Zm58.18,7.76v1.94h3.88v-3.88h3.88v11.64h-7.76v-3.88h-3.88v-7.76h3.88v1.94Zm15.52,0v1.94h-3.88v-3.88h3.88v1.94ZM0,95.03v1.94h7.76v-3.88H0v1.94Zm23.27,0v1.94h3.88v-3.88h-3.88v1.94Zm46.55,0v1.94h-3.88v-3.88h3.88v1.94Zm38.79,7.76v5.82h-11.64v-11.64h11.64v5.82ZM0,114.42v13.58h27.15v-27.15H0v13.58Zm65.94-11.64v1.94h-3.88v-3.88h3.88v1.94Zm34.91,0v1.94h3.88v-3.88h-3.88v1.94Zm-42.67,3.88v1.94h-3.88v3.88h-3.88v-3.88h3.88v-3.88h3.88v1.94Zm-35.16,7.76v9.45H4.13v-18.89h18.89v9.45Zm-15.26,0v5.82h11.64v-11.64H7.76v5.82Zm100.85,3.88v1.94h-3.88v-3.88h3.88v1.94Zm-69.82,3.88v1.94h-3.88v3.88h3.88v-3.88h3.88v3.88h3.88v-3.88h-3.88v-3.88h-3.88v1.94Zm54.3,0v1.94h-3.88v-3.88h3.88v1.94Zm31.03,3.88v1.94h3.88v-3.88h-3.88v1.94Z"})}),(0,v.tZ)(iU.Z,{size:32,css:iM.styles1,color:t})]}),(0,v.tZ)(I.xv,{variant:"small",color:"dimmer",children:"Scan to install"})]})}var iW=n(45271),iH=n(24799),iV=n(25150),iz=(0,B.X)({row:[Z.l0.pb(12),Z.l0.rowWithGap(2),Z.l0.justify.center],buttonLeft:[Z.l0.borderRadius(8,0,0,8),Z.l0.flex.growAndShrink(1)],buttonRight:[Z.l0.borderRadius(0,8,8,0)]});function ij(e){var t=e.shouldShow,n=e.onDismissTour,r=(0,m._)((0,x.useState)(!1),2),i=r[0],o=r[1];return(0,v.BX)(v.HY,{children:[t?(0,v.BX)(b.G,{css:iz.row,children:[(0,v.tZ)(e0.zx,{iconLeft:(0,v.tZ)(iH.Z,{}),onClick:function(){(0,q.j)(iV.U3.DEPLOYMENT_MOBILE_DOWNLOAD_QR_VIEWED),o(!0)},text:"Deploy with the Replit App!",css:iz.buttonLeft}),(0,v.tZ)(e0.zx,{css:iz.buttonRight,text:"",iconLeft:(0,v.tZ)(tl.Z,{}),onClick:n})]}):null,(0,v.tZ)(iW.u,{isOpen:i,onRequestClose:function(){o(!1),n()},children:(0,v.tZ)(iF,{})})]})}function iq(e){var t=e.deployability,n=e.isRedeploy,r=t.deploy,i=t.redeploy,o=n?i:r;return o.isAuthorized?null:(0,v.tZ)(D.E,{text:o.message,colorway:"warning",icon:(0,v.tZ)(G.Z,{})})}var iJ=n(29252),iY=n(32903);function i$(e){var t=e.secrets,n=e.otherSecrets,r=new Map,i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=(0,m._)(l.value,2),u=s[0],d=s[1];t.has(u)||r.set(u,d)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return{missing:r}}var iK=(0,B.X)({root:[Z.l0.borderRadius(8),{border:"1px solid "+Z.TV.outlineDimmer}],button:[Z.l0.reset.button,eI.gU.nofill,Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.height(32),Z.l0.px(8),{border:"0 none",borderBottomLeftRadius:0,borderBottomRightRadius:0}],buttonText:[Z.l0.flex.growAndShrink(1),Z.l0.rowWithGap(8),Z.l0.align.center],expanded:[Z.l0.px(8),Z.l0.pb(8)],missingItems:[Z.l0.colWithGap(8)],missingItem:[Z.l0.rowWithGap(8)],missingSecret:[Z.l0.rowWithGap(8),Z.l0.flex.growAndShrink(1)],subtitle:[{borderTop:"1px solid "+Z.TV.outlineDimmest,top:-1},Z.l0.py(8),Z.l0.position.relative]});function iQ(e){var t=e.secrets,n=e.otherSecrets,r=e.otherEnvName,i=e.onAddSecret,o=e.initialExpanded,a=i$({secrets:t,otherSecrets:n}).missing,l=(0,m._)((0,x.useState)(o),2),c=l[0],s=l[1],u=0===a.size;if((0,x.useEffect)(function(){u&&s(!1)},[u]),u)return null;var d="".concat(a.size," ").concat((0,r2.Z)("secret",a.size)," out of sync"),f=1===a.size?"A ".concat(r," secret is missing from this environment"):"".concat(a.size," ").concat(r," secrets are missing from this environment");return(0,v.BX)(b.G,{css:iK.root,children:[(0,v.BX)(b.G,{css:iK.button,tag:"button",onClick:function(){return s(function(e){return!e})},children:[(0,v.BX)(b.G,{css:iK.buttonText,children:[(0,v.tZ)(G.Z,{color:Z.TV.orangeDefault}),(0,v.tZ)(I.xv,{multiline:!1,children:d})]}),c?(0,v.tZ)(rv.Z,{}):(0,v.tZ)(td.Z,{})]}),c?(0,v.BX)(b.G,{css:iK.expanded,children:[(0,v.tZ)(I.xv,{css:iK.subtitle,color:"dimmer",children:f}),(0,v.tZ)(b.G,{css:iK.missingItems,children:(0,k._)(a.entries()).map(function(e){var t=(0,m._)(e,2),n=t[0],r=t[1];return(0,v.BX)(b.G,{css:iK.missingItem,children:[(0,v.BX)(b.G,{css:iK.missingSecret,children:[(0,v.tZ)(iY.u_,{value:n}),(0,v.tZ)(iY.BH,{value:r})]}),r?(0,v.tZ)(e0.zx,{iconLeft:(0,v.tZ)(iJ.Z,{}),variant:"outlined",text:"Add secret",onClick:function(){return i({key:n,value:r})}}):null]},n)})})]}):null]})}function i0(e){var t=e.secrets,n=(0,m._)((0,x.useState)(null),2),r=n[0],i=n[1];return(0,x.useEffect)(function(){function e(){return(e=(0,S._)(function(){var e;return(0,E.Jh)(this,function(n){switch(n.label){case 0:return[4,t.readSecrets()];case 1:return e=n.sent(),i(new Map(e.map(function(e){return[e.key,e.value]}))),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[t]),{devSecrets:r}}var i1=n(33318),i2=n(13464),i4=n(27459),i3=n.n(i4),i8=n(46298),i6=n(80012),i5=n(70316),i7=n(93213),i9=n(15561),oe=Z.nC.min(600),ot=(0,B.X)({self:[Z.l0.colWithGap(8),Z.l0.mt(8)],accordion:[Z.l0.mb(0)],accordionItem:[Z.l0.rowWithGap(4),Z.l0.align.center],textButton:[Z.l0.cursor.pointer,Z.l0.reset.button,Z.l0.color.accentPrimaryStronger,Z.l0.focusRing,Z.l0.hover(Z.l0.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],tableHeader:[Z.l0.color.foregroundDimmer,Z.l0.m(4),Z.l0.textAlign.left],tableWrapper:[Z.l0.mb(8),Z.l0.colWithGap(8),(0,T._)({},oe,Z.l0.rowWithGap(0))],table:[Z.l0.flex.column,Z.l0.width("100%"),(0,T._)({},oe,[Z.l0.width("50%"),Z.l0.colWithGap(6),{"&:first-child":{table:{borderRight:"1px solid "+Z.TV.outlineDimmer}}}])],ghostRow:[Z.l0.display.none,(0,T._)({},oe,Z.l0.display.flex)]}),on=function(e){var t=e.text,n=e.onClick;return(0,v.tZ)("button",{css:ot.textButton,onClick:n,children:t})};function or(e){var t=e.hasPortsConfigured,n=e.hasPort80Configured,r=e.hasConflictingPorts,i=e.hasLocalhostPort80,o=e.openNetworkingPane;return t?n?r?(0,v.tZ)(D.E,{text:(0,v.BX)(v.HY,{children:["Potential port conflict. Make sure no External Ports have conflicts in your configuration and that you only have one External Port configured on port :80. Open the"," ",(0,v.tZ)(on,{text:"Networking pane to resolve.",onClick:o})]}),colorway:"warning"}):i?(0,v.tZ)(D.E,{text:(0,v.BX)(v.HY,{children:["Hosting your deployment on localhost can cause security or performance issues in some cases. Open the"," ",(0,v.tZ)(on,{text:"Networking pane to configure.",onClick:o})]}),colorway:"primary"}):(0,v.tZ)(D.E,{text:(0,v.BX)(v.HY,{children:["Deployment forwarding to External Port :80. Open the"," ",(0,v.tZ)(on,{text:"Networking pane to configure.",onClick:o})]}),colorway:"primary"}):(0,v.tZ)(D.E,{text:(0,v.BX)(v.HY,{children:["Potential port issue. Deployments require an External Port configured on port :80. Open the"," ",(0,v.tZ)(on,{text:"Networking pane to configure.",onClick:o})]}),colorway:"warning"}):(0,v.tZ)(D.E,{text:(0,v.BX)(v.HY,{children:["No ports configured. Deployments will automatically forward the first Internal Port that opens. Open the"," ",(0,v.tZ)(on,{text:"Networking pane to configure.",onClick:o})]})})}var oi=function(e){return 80===(0,i5.OD)(e.configuration)};function oo(e){var t=e.portState,n=(0,i5.VZ)(t.configuration),r=(0,i5.OD)(t.configuration),i=oi(t);return(0,v.BX)(v.HY,{children:[(0,v.BX)(i7.sg,{width:"50%",children:[(0,v.tZ)(I.xv,{children:n?"localhost":"0.0.0.0"}),i&&n?(0,v.tZ)(i9.Z,{size:16,color:i6.Br.primary.default}):null]}),(0,v.BX)(i7.sg,{width:"50%",children:[(0,v.BX)(I.xv,{children:[":",r]}),i?(0,v.tZ)(ry.Z,{size:16,color:i6.Br.positive.default}):(0,v.tZ)(tl.Z,{size:16,color:i6.Br.negative.default})]})]})}function oa(e){var t=e.ports,n=e.openNetworkingPane,r=(0,i8.Z)(t.portsState),i=(null==r?void 0:r.filter(function(e){return(0,i5.OD)(e.configuration)}).sort(function(e,t){var n,r;return(null!==(n=(0,i5.OD)(e.configuration))&&void 0!==n?n:0)-(null!==(r=(0,i5.OD)(t.configuration))&&void 0!==r?r:0)}))||null,o=null==i?void 0:i.find(oi),a=!!o,l=!!(i&&i.length>0),c=!!i&&!!o&&!!(i.filter(oi).length>1||i.some(function(e){return(0,i5.OD)(e.configuration)===o.configuration.localPort})),s=!!(o&&(0,i5.VZ)(o.configuration)),u=l&&!a||c,d=(0,m._)((0,x.useState)(!1),2),f=d[0],h=d[1];return(0,v.tZ)(re.Q,{headerContent:(0,v.BX)(b.G,{css:ot.accordionItem,children:[(0,v.tZ)(iu,{id:"deploymentPortConfiguration",title:"Port configuration",information:"Configure which port your deployment should use for incoming requests."}),u?(0,v.tZ)(G.Z,{size:16,color:i6.Br.warning.strongest}):null]}),expanded:f,onClick:function(){return h(!f)},css:ot.accordion,children:(0,v.BX)(b.G,{css:ot.self,children:[(0,v.tZ)(or,{hasPortsConfigured:l,hasPort80Configured:a,hasConflictingPorts:c,hasLocalhostPort80:s,openNetworkingPane:n}),(0,v.tZ)(b.G,{children:(0,v.BX)(b.G,{css:ot.tableWrapper,children:[(0,v.BX)(b.G,{css:ot.table,children:[(0,v.tZ)(I.xv,{css:ot.tableHeader,children:"Deployment expects:"}),(0,v.BX)(i7.iA,{children:[(0,v.BX)(i7.X2,{children:[(0,v.tZ)(i7.sg,{header:!0,width:"50%",children:"Host"}),(0,v.tZ)(i7.sg,{header:!0,width:"50%",children:"External Port"})]}),(0,v.BX)(i7.X2,{children:[(0,v.tZ)(i7.sg,{width:"50%",children:(0,v.tZ)(I.xv,{children:"0.0.0.0"})}),(0,v.BX)(i7.sg,{width:"50%",children:[(0,v.tZ)(I.xv,{children:":80"}),(0,v.tZ)(ry.Z,{size:16,color:i6.Br.positive.default})]})]}),l&&i?i3()((null==i?void 0:i.length)-1).map(function(e){return(0,v.tZ)(i7.X2,{css:ot.ghostRow,children:(0,v.tZ)(i7.sg,{children:(0,v.tZ)(I.xv,{children:"\xa0"})})},e)}):null]})]}),(0,v.BX)(b.G,{css:ot.table,children:[(0,v.tZ)(I.xv,{css:ot.tableHeader,children:"Your External Port configuration(s):"}),(0,v.BX)(i7.iA,{children:[(0,v.BX)(i7.X2,{children:[(0,v.tZ)(i7.sg,{header:!0,width:"50%",children:"Host"}),(0,v.tZ)(i7.sg,{header:!0,width:"50%",children:"External Port"})]}),l?null==i?void 0:i.map(function(e){return(0,v.tZ)(i7.X2,{children:(0,v.tZ)(oo,{portState:e})},e.configuration.localPort)}):(0,v.BX)(i7.X2,{children:[(0,v.tZ)(i7.sg,{width:"50%",children:(0,v.tZ)(I.xv,{children:"-"})}),(0,v.tZ)(i7.sg,{width:"50%",children:(0,v.tZ)(I.xv,{children:"-"})})]})]})]})]})})]})})}var ol=n(19653),oc=n(85733),os=n(54590),ou=n(9851);function od(){var e=(0,K._)(["\n  query CheckReplitAppSubdomainAvailability(\n    $subdomain: String!\n    $deploymentId: String\n  ) {\n    replitAppSubdomainAvailability(\n      subdomain: $subdomain\n      deploymentId: $deploymentId\n    ) {\n      __typename\n      ... on ReplitAppSubdomainAvailabilityResult {\n        available\n        message\n      }\n      ... on UserError {\n        errorMessage: message\n      }\n    }\n  }\n"]);return od=function(){return e},e}var of={},oh=(0,Q.Ps)(od()),op=n(51197),om=n(99321),ov=(0,B.X)({self:[Z.l0.colWithGap(4),Z.l0.flex.growAndShrink(1)],input:[Z.l0.color.greyStrongest],loading:[na.p.backgroundPulse(Z.TV.backgroundHighest,Z.TV.backgroundHigher)],error:[Z.l0.color.accentNegativeStronger]}),og=function(e){var t=e.id,n=e.value,r=e.loading,i=e.disabled,o=e.onChange,a=e.error,l=e.placeholder,c=e.type,s=void 0===c?"text":c,u=e.onFocus,d=(0,ou.Ar)(n),f=(0,x.useId)();return s||(s="text"),(0,v.BX)(b.G,{css:ov.self,children:[(0,v.tZ)(tf.II,{id:t,value:!r&&d?n:"",onChange:function(e){return o(e.target.value)},css:r?ov.loading:ov.input,disabled:r||i,"aria-describedby":f,placeholder:r?"":l,type:s,onFocus:u}),a?(0,v.tZ)(b.G,{css:ov.error,"aria-live":"polite","aria-atomic":"true",id:f,children:(0,v.tZ)("span",{children:a})}):null]})},oy=[Z.l0.borderRadius(8),Z.l0.width(32),Z.l0.height(32),eI.gU.filled,Z.l0.justify.center,Z.l0.align.center],ob=(0,B.X)({root:[Z.l0.rowWithGap(8),Z.l0.align.center],iconButton:[Z.l0.height("100%"),Z.l0.borderRadius(8),{"& button":Z.l0.height(32)}],keyInput:[Z.l0.width("40%")],valueInput:[Z.l0.flex.growAndShrink(1)],secretDifferentInDev:[oy,Z.l0.color.orangeStrongest],secretSameInDev:[oy,Z.l0.color.accentPrimaryStrongest]}),ow=function(e){var t=e.index,n=e.name,r=e.value,i=e.disabled,o=e.updateEnvVarName,a=e.updateEnvVarValue,l=e.removeEnvVar,c=e.otherKeys,s=e.devSecrets,u=(0,e8.U)(),d=(0,m._)((0,x.useState)(""===n||""===r),2),f=d[0],h=d[1],p=!!(n&&r),g=(0,oc.Z)(p),y=(0,ol.Z)(function(){y.current&&g.current&&h(!1)},[g]),w=s&&s.has(n)&&s.get(n)!==r;return f?(0,v.BX)(v.HY,{children:[(0,v.BX)(b.G,{css:ob.root,innerRef:y,children:[(0,v.tZ)(b.G,{css:ob.keyInput,children:(0,v.tZ)(tf.II,{placeholder:"Name",id:"".concat(u,"-name-").concat(t),value:n,onChange:function(e){return o(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&p&&h(!1)},disabled:i})}),(0,v.tZ)(b.G,{css:ob.valueInput,children:(0,v.tZ)(tf.II,{placeholder:"Value",name:"".concat(u,"-value-").concat(t),value:r,onChange:function(e){return a(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&p&&h(!1)},disabled:i})}),i?null:(0,v.tZ)(t6.Tg,{elevated:!0,css:ob.iconButton,children:(0,v.tZ)(X.hU,{alt:"Add",tooltipBehavior:"hidden",onClick:function(){p?h(!1):l()},children:p?(0,v.tZ)(ry.Z,{}):(0,v.tZ)(tl.Z,{})})})]}),c.includes(n)?(0,v.BX)(I.xv,{variant:"small",css:{color:Z.TV.accentNegativeDefault},children:['Secret "',n,'" already exists']}):null]}):(0,v.BX)(b.G,{css:ob.root,children:[w?(0,v.tZ)(eW.u,{tooltip:"The value of this secret differs from the workspace value",children:(0,v.tZ)(b.G,{css:ob.secretDifferentInDev,children:(0,v.tZ)(op.Z,{})})}):(0,v.tZ)(eW.u,{tooltip:"The value of this secret is the same as the workspace value",children:(0,v.tZ)(b.G,{css:ob.secretSameInDev,children:(0,v.tZ)(om.Z,{})})}),(0,v.tZ)(iY.u_,{value:n}),(0,v.tZ)(iY.BH,{value:r}),(0,v.tZ)(iY.$M,{onEdit:function(){return h(!0)},onDelete:function(){return l()}})]})},oZ=function(e){var t,n,r,i,o,a=e.id,l=e.subdomain,c=e.deploymentId,s=e.onChange,u=e.updateValidity,d=(0,tQ.P5)({type:"string",controlName:"flag-fallback-deployments-domain",default:rr.q7}),f=d!==rr.q7,h=(t={variables:{subdomain:l,deploymentId:c},skip:0===l.length},n=(0,A._)({},of,t),ee.a(oh,n)),p=h.data,m=h.loading,g=h.error,y=(null==p?void 0:p.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"&&p.replitAppSubdomainAvailability.available,C=(null==p?void 0:p.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"?p.replitAppSubdomainAvailability.message:null==p?void 0:null===(r=p.replitAppSubdomainAvailability)||void 0===r?void 0:r.errorMessage;return((0,x.useEffect)(function(){u(y)},[y]),g)?(0,v.tZ)(D.E,{colorway:"negative",text:"Something went wrong, please try refreshing the page."}):(0,v.BX)(b.G,{children:[(0,v.BX)(b.G,{css:[Z.l0.rowWithGap(4),Z.l0.align.center],children:[(0,v.tZ)(tf.II,{id:a,placeholder:"subdomain",value:l,onChange:function(e){return s(e.target.value)}}),(0,v.BX)(I.xv,{multiline:!1,children:[(null===(o=window)||void 0===o?void 0:null===(i=o.location)||void 0===i?void 0:i.hostname)!=="replit.com"?".staging":"",".",d]})]}),(0,v.BX)(b.G,{css:[Z.l0.rowWithGap(4),Z.l0.align.center,Z.l0.pt(4)],children:[m?(0,v.BX)(v.HY,{children:[(0,v.tZ)(w.Z,{}),(0,v.tZ)(I.xv,{multiline:!1,children:"Checking availability"})]}):null,y?(0,v.BX)(v.HY,{children:[(0,v.tZ)(ry.Z,{color:"green"}),(0,v.tZ)(I.xv,{css:[Z.l0.color.greenDefault],multiline:!1,children:"Available"})]}):null,y||m?null:(0,v.BX)(v.HY,{children:[(0,v.tZ)(G.Z,{color:"red"}),(0,v.tZ)(I.xv,{css:[Z.l0.color.redDefault],multiline:!1,children:C})]}),f?(0,v.tZ)(D.E,{colorway:"warning",text:"The ".concat(rr.q7," domain is currently unavailable, please use the ").concat(d," URL above.")}):null]})]})},ox=function(e){var t=e.appType,n=e.onChange,r=(0,e8.U)();return(0,v.tZ)(os.hE,{name:"deploymentTargetSelector",value:t,onChange:n,row:!0,css:[Z.l0.width("100%"),Z.l0.flex.row],children:[{value:el.Vp.Server,name:"Web Server",description:"ex. an API or website"},{value:el.Vp.Worker,name:"Background Worker",description:"ex. a Discord or Slack bot"}].map(function(e,t){return(0,v.tZ)(b.G,{css:[Z.l0.flex.grow(1)],children:(0,v.tZ)(eW.u,{tooltip:e.description,children:(0,v.tZ)(os.rK,{id:r(e.value),value:e.value,text:e.name})})},t)})})},oC=n(86763),o_=n.n(oC),oS=n(19993),ok=n(89631),oE=n(10905),oT=n(20371),oR=(0,B.X)({self:{ul:{maxHeight:"300px"}},select:[Z.l0.border()],error:[Z.l0.color.accentNegativeStronger],button:[Z.l0.reset.button,Z.l0.viewStyle,eI.gU.nofill,Z.l0.align.center,Z.l0.display.inlineFlex,{borderColor:eI.gU.outlined.borderColor}],popover:[Z.l0.width("max-content"),Z.l0.overflow("auto"),Z.l0.p(1),Z.l0.minWidth(240)],listbox:[Z.l0.maxHeight(300),Z.l0.minWidth(300),Z.l0.overflow("auto")],dropdownItemAndContainer:[Z.l0.flex.row,Z.l0.align.center,eI.gU.listItem,Z.l0.px(8),Z.l0.py(4)],selectedItemAndContainer:[Z.l0.px(8),Z.l0.py(4),Z.l0.justify.spaceBetween,Z.l0.align.center,Z.l0.rowWithGap(8)],selectedTimezoneCode:[Z.l0.align.center,Z.l0.textAlign.left,Z.l0.rowWithGap(8)],timezoneCode:[Z.l0.align.center,Z.l0.textAlign.left,Z.l0.rowWithGap(8)],selectedCheckIcon:[Z.l0.align.center,Z.l0.flex.row],header:[Z.l0.pt(8),Z.l0.px(8),Z.l0.pb(4),Z.l0.flex.growAndShrink(1),{borderBottom:"1px solid ".concat(Z.TV.outlineDimmest)}],search:[Z.l0.p(8),{borderBottom:"1px solid ".concat(Z.TV.outlineDimmest)}],searchInput:[Z.l0.width("100%")],dropdownHeader:[Z.l0.fontWeight.medium],loading:[Z.l0.maxWidth(70),na.p.backgroundPulse(Z.TV.backgroundHighest,Z.TV.backgroundHigher)]});function oD(e){var t=e.initialTimezone,n=e.onChange,r=e.loading,i=e.error,o=(0,m._)((0,x.useState)(),2),a=o[0],l=o[1],c=(0,x.useId)();return(0,x.useEffect)(function(){if(!r){if(t&&!a){l(t);return}if(!a&&!t){var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if((0,rr.lb)(e)){n(e),l(e);return}var i="America/Los_Angeles";i&&(n(i),l(i))}}},[n,a,t,r]),(0,v.BX)(b.G,{css:oR.self,children:[r||!a?(0,v.tZ)(tf.II,{css:oR.loading,disabled:!0}):(0,v.tZ)(oN,{selectedTzCode:a,onSelectionChange:function(e){"string"==typeof e&&(n(e),l(e))},css:oR.select}),i?(0,v.tZ)(b.G,{css:oR.error,"aria-live":"polite","aria-atomic":"true",id:c,children:(0,v.tZ)("span",{children:i})}):null]})}var oI=(0,B.X)({self:[oR.dropdownItemAndContainer,Z.l0.justify.spaceBetween,{backgroundColor:eI.vb.interactiveBackground}]});function oB(e){var t=e.title;return(0,v.BX)(b.G,{css:oR.selectedItemAndContainer,children:[(0,v.tZ)(b.G,{css:oR.selectedTimezoneCode,children:(0,v.tZ)(I.xv,{variant:"text",color:"dimmer",children:t})}),(0,v.tZ)(td.Z,{})]})}function oG(e){var t=e.tzCode,n=e.selected;return(0,v.BX)(b.G,{css:n?oI.self:oR.dropdownItemAndContainer,children:[(0,v.tZ)(b.G,{css:oR.timezoneCode,children:(0,v.tZ)(I.xv,{variant:"text",color:n?"default":"dimmer",children:t.replace(/_/g," ").replace(/\//g,", ")})}),(0,v.tZ)(b.G,{css:oR.selectedCheckIcon,children:n?(0,v.tZ)(ry.Z,{size:16}):null})]})}var oA=(0,B.X)({self:[oR.button,Z.l0.align.center,Z.l0.px(8),Z.l0.py(4),(0,T._)({},Z.BC.min("mobileMax"),[Z.l0.rowWithGap(4)])]});function oP(e){return e.toLowerCase().replaceAll("_"," ")}var oL=iC.y.map(function(e){var t=e.value,n=e.abbr,r=e.utc,i=oP(t),o=oP(n),a=r.map(function(e){return{tzCode:e,normalizedUtcValue:oP(e)}});return(0,P._)((0,A._)({},e),{normalizedValue:i,normalizedAbbr:o,normalizedUtc:a,searchableText:oP([e.value,e.abbr].concat((0,k._)(e.utc)).join(" "))})});function oN(e){var t=e.selectedTzCode,n=e.onSelectionChange,r=(0,m._)((0,x.useState)(""),2),i=r[0],o=r[1],a=(0,m._)((0,x.useState)(iC.y),2),l=a[0],c=a[1],s=(0,m._)((0,x.useState)(iC.y.find(function(e){return e.utc.includes(t)})),2),u=s[0],d=s[1];(0,x.useEffect)(function(){d(iC.y.find(function(e){return e.utc.includes(t)}))},[t]);var f=o_()(function(e){c(function(e){if(!e)return iC.y;var t=oP(e);return oL.map(function(n){var r=0,i=n.searchableText,o=n.normalizedValue,a=n.normalizedAbbr,l=n.normalizedUtc,c=n.utc;if(i.includes(t)){o.includes(t)&&(r+=10/(o.indexOf(t)+1)),a.includes(t)&&(r+=8/(a.indexOf(t)+1));var s=c;return l.some(function(e){return e.normalizedUtcValue.includes(t)})&&(r+=5,e.length>=3&&(s=l.map(function(e){var n=e.tzCode,r=e.normalizedUtcValue;return r.includes(t)?{tzCode:n,utcScore:5/(r.indexOf(t)+1)}:{tzCode:n,utcScore:0}}).sort(function(e,t){return t.utcScore-e.utcScore}).map(function(e){return e.tzCode}))),(0,P._)((0,A._)({},n),{utc:s,score:r})}return(0,P._)((0,A._)({},n),{score:0})}).filter(function(e){return e.score>0}).sort(function(e,t){return t.score-e.score})}(e))},100),h=function(e){o(e),f(e)};return(0,v.BX)(oS.Ph,{onSelectionChange:n,"aria-label":"Timezone Select",children:[u?(0,v.tZ)(tg.z,{css:oR.button,children:(0,v.tZ)(oB,{title:u.abbr})}):(0,v.tZ)(eW.u,{tooltip:"Could not detect valid timezone. Please try again, or contact support.",children:(0,v.BX)(tg.z,{css:oA.self,children:[(0,v.tZ)(I.xv,{color:"dimmer",children:"Select"}),(0,v.tZ)(eH.Z,{})]})}),(0,v.BX)(tc.Bf,{noArrow:!0,css:oR.popover,background:"default",placement:"bottom right",children:[(0,v.tZ)(b.G,{css:oR.search,children:(0,v.tZ)(tf.II,{css:oR.searchInput,value:i,onChange:function(e){return h(e.target.value)},placeholder:"Search"})}),(0,v.tZ)(ok.wb,{css:oR.listbox,children:l.map(function(e){var n=e.value,r=e.abbr,i=e.utc;return(0,v.BX)(oE.$0,{children:[(0,v.tZ)(oT.h,{css:oR.header,children:(0,v.BX)(I.xv,{variant:"small",color:"dimmest",css:oR.dropdownHeader,children:[n," (",r,")"]})}),i.map(function(e){return(0,v.tZ)(ok.m9,{id:e,children:(0,v.tZ)(oG,{tzCode:e,selected:e===t})},e)})]},n)})})]})]})}var oO=n(82419),oU={scheduleToCronExpression:{inputTarget:n9.i3.ENGLISH,outputTarget:n9.i3.CRON},cronExpressionToSchedule:{inputTarget:n9.i3.CRON,outputTarget:n9.i3.ENGLISH}},oM=function(e){var t,n=e.type,r=e.onTranslation,i=e.onError,o=(0,x.useRef)(null),a=(0,m._)((0,x.useState)(!1),2),l=a[0],c=a[1],s=function(e,t){var n,r;n=Error(e),ep.$e(function(e){e.setTag("deployments-pane",!0),e.setTag("context","useScheduledMachineConfigurationTranslator"),r&&e.setExtras(r),ep.Tb(n)}),i(t||e)},u=(0,n9.Vs)({onTranslation:function(e,t,i){if(!l&&(o.current&&clearTimeout(o.current),t)){if(!e){r("Unable to derive valid translation from description");return}var a,c=(a=e.match(/`([^`]+)`(?=[^`]*$)/))?a[1]:null;if(!c||"scheduleToCronExpression"===n&&!(0,oO.isValidCron)(c)){r("Unable to derive valid Cron expression from description");return}r(c),(0,q.j)(q.U3.DEPLOYMENT_SCHEDULE_TRANSLATION_GENERATED,{type:n,translation:e,prompt:i})}},onError:function(e){return s(e,"Error translating description")}}),d=u.sendMessage,f=u.loading,h=(t=(0,S._)(function(e){var t;return(0,E.Jh)(this,function(i){return(o.current&&clearTimeout(o.current),e)?"cronExpressionToSchedule"!==n||(0,oO.isValidCron)(e)?(t=oU[n],d((0,P._)((0,A._)({},t),{content:e})),o.current=setTimeout(function(){c(!0),s("Translation timed out")},8e3)):r("Invalid cron expression"):r(""),[2]})}),function(e){return t.apply(this,arguments)});return(0,x.useEffect)(function(){return function(){o.current&&clearTimeout(o.current)}},[o]),{translate:h,loading:f}},oX=n(89284),oF=n(41788);function oW(){return(0,v.BX)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,v.tZ)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.97978 15.6465C2.78451 15.8417 2.78451 16.1583 2.97978 16.3536L7.64644 21.0202C7.8417 21.2155 8.15829 21.2155 8.35355 21.0202C8.54881 20.825 8.54881 20.5084 8.35355 20.3131L4.54044 16.5L9.66666 16.5C9.9428 16.5 10.1667 16.2762 10.1667 16C10.1667 15.7239 9.9428 15.5 9.66666 15.5L4.54044 15.5L8.35355 11.6869C8.54881 11.4916 8.54881 11.1751 8.35355 10.9798C8.15829 10.7845 7.8417 10.7845 7.64644 10.9798L2.97978 15.6465Z",fill:Z.TV.blurpleStronger}),(0,v.tZ)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.3889 12.2661C16.259 11.9113 15.741 11.9113 15.6111 12.2661L14.7182 14.7055C14.675 14.8237 14.577 14.9153 14.4536 14.9531L12.2883 15.6156C11.9044 15.7331 11.9037 16.2592 12.2873 16.3776L14.4544 17.0466C14.5773 17.0846 14.6749 17.1761 14.718 17.2939L15.6111 19.7339C15.741 20.0887 16.259 20.0887 16.3889 19.7339L17.2819 17.2942C17.3251 17.1762 17.4228 17.0846 17.546 17.0468L19.7122 16.381C20.0959 16.263 20.0959 15.737 19.7122 15.619L17.546 14.9532C17.4228 14.9154 17.3251 14.8238 17.2819 14.7058L16.3889 12.2661Z",fill:Z.TV.blurpleStronger}),(0,v.tZ)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M29.0202 15.6465C29.2155 15.8417 29.2155 16.1583 29.0202 16.3536L24.3536 21.0202C24.1583 21.2155 23.8417 21.2155 23.6465 21.0202C23.4512 20.825 23.4512 20.5084 23.6465 20.3131L27.4596 16.5L22.3333 16.5C22.0572 16.5 21.8333 16.2762 21.8333 16C21.8333 15.7239 22.0572 15.5 22.3333 15.5L27.4596 15.5L23.6465 11.6869C23.4512 11.4916 23.4512 11.1751 23.6465 10.9798C23.8417 10.7845 24.1583 10.7845 24.3536 10.9798L29.0202 15.6465Z",fill:Z.TV.blurpleStronger})]})}var oH=Z.nC.min(480),oV=(0,B.X)({cronConfig:[Z.l0.colWithGap(8),Z.l0.pb(16),Z.l0.flex.growAndShrink(1),(0,T._)({},oH,[Z.l0.colWithGap(0),Z.l0.rowWithGap(8),Z.l0.align.start])],scheduledLabeledInput:[Z.l0.flex.growAndShrink(1)],crontabLabeledInput:[Z.l0.flex.growAndShrink(1),Z.l0.maxWidth(128)],translationSwitch:[Z.l0.flex.shrink(1),Z.l0.mb(4),(0,T._)({transform:"rotate(90deg)",alignSelf:"flex-start"},oH,{transform:"rotate(0deg)",marginBottom:0,paddingTop:30})],translationSwitchIcon:[Z.l0.height(32),Z.l0.width(32),Z.l0.center],timezoneSelect:[Z.l0.flex.shrink(1),(0,T._)({minWidth:75},oH,{paddingTop:30})],timeoutConfig:[Z.l0.flex.row,Z.l0.flex.growAndShrink(1),Z.l0.width("100%"),Z.l0.align.start,Z.l0.pb(8)],notificationConfig:[Z.l0.flex.row,Z.l0.flex.growAndShrink(1),Z.l0.width("100%"),Z.l0.align.start,Z.l0.pb(8)],selectedItemAndContainer:[Z.l0.px(8),Z.l0.py(4),Z.l0.justify.spaceBetween,Z.l0.align.center,Z.l0.rowWithGap(8)],selectedTimeoutUnits:[Z.l0.align.center,Z.l0.textAlign.left,Z.l0.rowWithGap(8)],button:[Z.l0.reset.button,Z.l0.viewStyle,eI.gU.nofill,Z.l0.align.center,Z.l0.display.inlineFlex,{borderColor:eI.gU.outlined.borderColor},Z.l0.minWidth(100)],timeoutUnitsDropdown:[Z.l0.ml(4)],dropdownItemAndContainer:[Z.l0.flex.row,Z.l0.align.center,eI.gU.listItem,Z.l0.px(8),Z.l0.py(4)],dropdownItem:[Z.l0.align.center,Z.l0.textAlign.left,Z.l0.rowWithGap(8)],selectedCheckIcon:[Z.l0.align.center,Z.l0.flex.row],popover:[Z.l0.width("max-content"),Z.l0.overflow("auto"),Z.l0.p(1),Z.l0.minWidth(120)],timeoutLabeledSection:[Z.l0.flex.row]}),oz=(0,B.X)({self:[oV.dropdownItemAndContainer,Z.l0.justify.spaceBetween,{backgroundColor:eI.vb.interactiveBackground}]}),oj=["minutes","hours"];function oq(e,t){var n=parseInt(e,10);return isNaN(n)?0:"hours"===t.toLowerCase()?3600*n:60*n}function oJ(e){return/^\d+$/.test(e.trim())&&!isNaN(parseInt(e,10))}function oY(e,t){return oJ(e)&&oq(e,t)>39600}function o$(e){var t=e.title;return(0,v.BX)(b.G,{css:oV.selectedItemAndContainer,children:[(0,v.tZ)(b.G,{css:oV.selectedTimeoutUnits,children:(0,v.tZ)(I.xv,{variant:"text",color:"dimmer",children:t})}),(0,v.tZ)(td.Z,{})]})}function oK(e){var t=e.item,n=e.selected;return(0,v.BX)(b.G,{css:n?oz.self:oV.dropdownItemAndContainer,children:[(0,v.tZ)(b.G,{css:oV.dropdownItem,children:(0,v.tZ)(I.xv,{variant:"text",color:n?"default":"dimmer",children:t})}),(0,v.tZ)(b.G,{css:oV.selectedCheckIcon,children:n?(0,v.tZ)(ry.Z,{size:16}):null})]})}function oQ(e){var t=e.callback,n=e.delay,r=(0,x.useRef)();return(0,x.useEffect)(function(){return function(){r.current&&clearTimeout(r.current)}},[]),{callerFunction:function(e){r.current&&clearTimeout(r.current),r.current=setTimeout(function(){return t(e)},n)}}}function o0(e){var t=e.crontab,n=e.setCrontab,r=e.crontabError,i=e.timezone,o=e.setTimezone,a=e.timezoneError,l=e.loading,c=void 0!==l&&l,s=e.timeoutValue,u=e.setTimeoutValue,d=e.timeoutUnits,f=e.setTimeoutUnits,h=e.setTimeoutValueError,p=e.enableFailureNotifications,g=e.setEnableFailureNotifications,y=(0,m._)((0,x.useState)(!1),2),C=y[0],_=y[1],S=(0,m._)((0,x.useState)(null),2),k=S[0],E=S[1],T=(0,m._)((0,x.useState)(null),2),R=T[0],D=T[1],I=(0,m._)((0,x.useState)("scheduleToCronExpression"),2),B=I[0],G=I[1],A="scheduleToCronExpression"===B,P="cronExpressionToSchedule"===B,L=oM({type:B,onTranslation:function(e){_(!1),A?n(e):P&&D(e)},onError:function(e){_(!1),E(e)}}),N=L.translate,O=L.loading,U=oQ({callback:function(e){return N(e)},delay:3e3}).callerFunction,M=oQ({callback:_,delay:500}).callerFunction,X=function(e,t){switch(t){case"scheduleToCronExpression":D(e);break;case"cronExpressionToSchedule":n(e)}F&&_(!1),""!==e&&null!==e&&(M(!0),U(e))},F=O||C;(0,x.useEffect)(function(){h(!oJ(s)||oY(s,d))},[s,d,h]);var W=(0,tQ.P5)({controlName:"flag-cron-email-notifications",type:"boolean",default:!1});if(k)return(0,v.BX)(b.G,{children:[(0,v.tZ)(b.G,{css:oV.crontabLabeledInput,children:(0,v.tZ)(iu,{id:"cronExpression",title:"Cron expression",information:"A cron expression is a string of characters used to define a schedule for running tasks at specific times or intervals in software applications.",warning:"".concat(k,". Enter valid Cron expression."),grow:!0,children:(0,v.tZ)(og,{id:"cronExpression",value:t,placeholder:"* * * * *",loading:c,disabled:!1,onChange:n,error:r})})}),(0,v.tZ)(b.G,{css:oV.timezoneSelect,children:(0,v.tZ)(oD,{initialTimezone:i,onChange:o,error:a,loading:c})})]});var H="";return oJ(s)?oY(s,d)&&(H="Please enter a value less than the maximum of 11 hours"):H="Please enter a positive whole number",(0,v.BX)(b.G,{children:[(0,v.BX)(b.G,{css:oV.cronConfig,children:[(0,v.tZ)(b.G,{css:oV.scheduledLabeledInput,children:(0,v.tZ)(iu,{id:"schedule",title:"Schedule description",information:"Describe when you want your scheduled deployment to run",grow:!0,children:(0,v.tZ)(og,{id:"describeSchedule",value:R,placeholder:t?"":"Every day at 3:00 AM",loading:c,disabled:F&&!A,onChange:function(e){return X(e,"scheduleToCronExpression")},onFocus:function(){return G("scheduleToCronExpression")}})})}),(0,v.tZ)(b.G,{css:oV.translationSwitch,children:(0,v.tZ)(eW.u,{tooltip:"When you type, Replit AI will translate between these properties",children:(0,v.tZ)(b.G,{css:oV.translationSwitchIcon,children:F?(0,v.tZ)(w.Z,{color:Z.TV.blurpleStronger}):(0,v.tZ)(oW,{})})})}),(0,v.tZ)(b.G,{css:oV.crontabLabeledInput,children:(0,v.tZ)(iu,{id:"cronExpression",title:"Cron expression",information:"A cron expression is a string of characters used to define a schedule for running tasks at specific times or intervals in software applications.",grow:!0,children:(0,v.tZ)(og,{id:"cronExpression",value:t,placeholder:"* * * * *",loading:c,disabled:F&&!P,onChange:function(e){return X(e,"cronExpressionToSchedule")},onFocus:function(){return G("cronExpressionToSchedule")},error:r})})}),(0,v.tZ)(b.G,{css:oV.timezoneSelect,children:(0,v.tZ)(oD,{initialTimezone:i,onChange:o,error:a,loading:c})})]}),(0,v.tZ)(b.G,{css:oV.timeoutConfig,children:(0,v.tZ)(iu,{id:"timeout",title:"Job timeout",information:"The maximum amount of time each execution of your scheduled job will run before being stopped",grow:!0,children:(0,v.BX)(b.G,{css:oV.timeoutLabeledSection,children:[(0,v.tZ)(og,{id:"timeoutValue",value:s,placeholder:"",loading:c,disabled:!1,onChange:function(e){return u(null!=e?e:"")},error:H,type:"number"}),(0,v.BX)(oS.Ph,{css:oV.timeoutUnitsDropdown,defaultSelectedKey:oj[0],selectedKey:d,onSelectionChange:function(e){return f(e.toString())},children:[(0,v.tZ)(tg.z,{css:oV.button,children:(0,v.tZ)(o$,{title:d})}),(0,v.tZ)(tc.Bf,{css:oV.popover,background:"default",placement:"bottom right",children:(0,v.tZ)(ok.wb,{children:oj.map(function(e){return(0,v.tZ)(ok.m9,{id:e,children:(0,v.tZ)(oK,{item:e,selected:e===d})},e)})})})]})]})})}),W?(0,v.tZ)(b.G,{css:oV.notificationConfig,children:(0,v.tZ)(iu,{id:"failure-notifications",title:"Job failure notifications",information:"Whether to send an email notification when the job fails to run.",grow:!0,children:(0,v.BX)(os.hE,{tag:"fieldset",name:"notification-switch",value:p?"true":"false",onChange:function(e){g("true"===e)},row:!0,primary:!0,stretch:!0,children:[(0,v.tZ)(os.rK,{id:"failure-notifications-false",value:"false",text:"Disabled",icon:(0,v.tZ)(oF.Z,{})}),(0,v.tZ)(os.rK,{id:"failure-notifications-true",value:"true",text:"Enabled",icon:(0,v.tZ)(oX.Z,{})})]})})}):null]})}var o1=n(57253);function o2(){var e=(0,K._)(["\n  fragment DeploymentsDeployOptionsDeployment on HostingDeployment {\n    id\n    replitAppSubdomain\n    currentBuild {\n      id\n      provider\n      envVars {\n        name\n        value\n      }\n      machineJob {\n        timezone\n        crontab\n        timeoutSeconds\n        failureNotifications\n      }\n    }\n  }\n"]);return o2=function(){return e},e}function o4(){var e=(0,K._)(["\n  query DeploymentsDeployOptions($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...DeploymentsDeployOptionsDeployment\n      }\n    }\n  }\n  ","\n"]);return o4=function(){return e},e}var o3={},o8=(0,Q.Ps)(o2()),o6=(0,Q.Ps)(o4(),o8);function o5(){return(o5=(0,S._)(function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g;return(0,E.Jh)(this,function(y){switch(y.label){case 0:t=["webpack.config.js","vite.config.js","webpack.config.ts","vite.config.ts"],n=!0,r=!1,i=void 0,y.label=1;case 1:y.trys.push([1,6,7,8]),o=t[Symbol.iterator](),y.label=2;case 2:if(n=(a=o.next()).done)return[3,5];return l=a.value,[4,e.stat(l)];case 3:if(!((c=y.sent()).exists&&c.type===o1.Tv.File))return[3,4];return[2,"dist"];case 4:return n=!0,[3,2];case 5:return[3,8];case 6:return s=y.sent(),r=!0,i=s,[3,8];case 7:try{n||null==o.return||o.return()}finally{if(r)throw i}return[7];case 8:u=["dist","build","public"],d=!0,f=!1,h=void 0,y.label=9;case 9:y.trys.push([9,14,15,16]),p=u[Symbol.iterator](),y.label=10;case 10:if(d=(m=p.next()).done)return[3,13];return v=m.value,[4,e.stat(v)];case 11:if(!((g=y.sent()).exists&&g.type===o1.Tv.Directory))return[3,12];return[2,v];case 12:return d=!0,[3,10];case 13:return[3,16];case 14:return s=y.sent(),f=!0,h=s,[3,16];case 15:try{d||null==p.return||p.return()}finally{if(f)throw h}return[7];case 16:return[2]}})})).apply(this,arguments)}var o7=(0,B.X)({self:Z.l0.colWithGap(16),footer:Z.l0.colWithGap(0),ctaGroup:[Z.l0.rowWithGap(8),Z.l0.pt(12)],deployButton:Z.l0.flex.grow(1),secretsModal:[Z.l0.colWithGap(8)],secretsModalButtons:[Z.l0.rowWithGap(8),Z.l0.justify.end,Z.l0.pt(8)]}),o9=function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,g,y,T,R,D=e.deploymentId,B=e.initialSubdomain,G=e.provider,P=e.machine,L=e.secrets,N=e.fs,O=e.ports,U=e.dotReplit,M=e.onDeploy,W=e.onCancel,H=e.onError,V=e.initialSecretsSyncExpanded,z=e.openNetworkingPane,j=(0,C.kW)(),q=(0,C.XA)().deployBuild,Y=(t=(0,A._)({},o3,{skip:!D,variables:{id:null!=D?D:""},fetchPolicy:"cache-and-network",ssr:!1,onCompleted:function(e){var t=(null===(n=e.hostingDeployment)||void 0===n?void 0:n.__typename)==="HostingDeployment"?e.hostingDeployment:null;if(t){if(t.replitAppSubdomain&&(eu(t.replitAppSubdomain),eh(!0)),t.currentBuild.machineJob&&(ek(t.currentBuild.machineJob.timezone),eB(t.currentBuild.machineJob.crontab),e6(null!==(r=t.currentBuild.machineJob.failureNotifications)&&void 0!==r&&r),t.currentBuild.machineJob.timeoutSeconds)){var n,r,i,o,a=t.currentBuild.machineJob.timeoutSeconds;a%3600==0?(i=a/3600,o="Hours"):(i=Math.floor(a/60),o="Minutes"),eY(i.toString()),eQ(o)}eO(t.currentBuild.envVars.map(function(e){return{name:e.name,value:e.value}}))}}}),ee.a(o6,t)),$=Y.data,K=Y.loading,Q=(r=(n={provider:G,fs:N,secrets:L,dotReplit:U,isNewDeployment:!D,onError:H,onOptions:function(e){e.appType&&ea(e.appType),e.envVars&&eO(e.envVars),e.ignorePorts&&eX(e.ignorePorts),e.buildCommand&&ev(e.buildCommand),e.runCommand&&eb(e.runCommand),e.publicDir&&eH(e.publicDir)}}).isNewDeployment,i=n.provider,o=n.fs,a=n.secrets,l=n.onOptions,c=n.onError,s=n.dotReplit,d=(u=(0,m._)((0,x.useState)(!0),2))[0],f=u[1],h=(0,oc.Z)(c),p=(0,oc.Z)(l),(0,x.useEffect)(function(){var e=!1;function t(){return(t=(0,S._)(function(){var t,n,l,c,u,d,h,v,g;return(0,E.Jh)(this,function(y){switch(y.label){case 0:return t=el.Vp.Server,n=null,l=null,c=null,u=null,[4,Promise.all([r?(0,i1.MC)(a):Promise.resolve(null),(0,i1.$f)(s)])];case 1:if(h=(d=m._.apply(void 0,[y.sent(),2]))[0],v=d[1],e)return[2];if(r)switch(i){case el.r4.Gce:t=v.ignorePorts?el.Vp.Worker:el.Vp.Server;break;case el.r4.CloudRun:t=el.Vp.CloudRun;break;case el.r4.Static:t=el.Vp.Static;break;case el.r4.Cron:t=el.Vp.Cron}else v.appType&&(t=v.appType);if(l=v.buildCommand,!(t!==el.Vp.Static))return[3,2];return n=v.runCommand,[3,5];case 2:if(!v.publicDir)return[3,3];return c=v.publicDir,[3,5];case 3:return[4,function(e){return o5.apply(this,arguments)}(o)];case 4:(g=y.sent())&&(c=g),y.label=5;case 5:return i===el.r4.Gce&&(u=v.ignorePorts),p.current({appType:t,envVars:h,buildCommand:l,runCommand:n,publicDir:c,ignorePorts:u}),f(!1),[2]}})})).apply(this,arguments)}try{!function(){t.apply(this,arguments)}()}catch(e){h.current(e.message),f(!1)}return function(){e=!0}},[i,o,s,h,p,r,a]),{loading:d}).loading,et=(null==$?void 0:null===(T=$.hostingDeployment)||void 0===T?void 0:T.__typename)==="HostingDeployment"?$.hostingDeployment:null,en=null==et?void 0:et.currentBuild,er=void 0!==en,ei=(0,m._)((0,x.useState)(el.Vp.Server),2),eo=ei[0],ea=ei[1],ec=(0,m._)((0,x.useState)(B),2),es=ec[0],eu=ec[1],ed=(0,m._)((0,x.useState)(!1),2),ef=ed[0],eh=ed[1],ep=(0,m._)((0,x.useState)(null),2),em=ep[0],ev=ep[1],eg=(0,m._)((0,x.useState)(null),2),ey=eg[0],eb=eg[1],ew=(0,m._)((0,x.useState)(void 0),2),eZ=ew[0],ex=ew[1],e_=(0,m._)((0,x.useState)(null),2),eS=e_[0],ek=e_[1],eE=(0,m._)((0,x.useState)(void 0),2),eT=eE[0],eR=eE[1],eD=(0,m._)((0,x.useState)(null),2),eI=eD[0],eB=eD[1],eG=(0,m._)((0,x.useState)(void 0),2),eA=eG[0],eP=eG[1],eL=(0,m._)((0,x.useState)(null!==(R=null==en?void 0:en.envVars.map(function(e){return{name:e.name,value:e.value}}))&&void 0!==R?R:[]),2),eN=eL[0],eO=eL[1],eU=(0,m._)((0,x.useState)(!1),2),eM=eU[0],eX=eU[1],eF=(0,m._)((0,x.useState)(null),2),eW=eF[0],eH=eF[1],eV=(0,m._)((0,x.useState)(void 0),2),ez=eV[0],ej=eV[1],eq=(0,m._)((0,x.useState)("10"),2),eJ=eq[0],eY=eq[1],e$=(0,m._)((0,x.useState)(oj[0]),2),eK=e$[0],eQ=e$[1],e1=(0,m._)((0,x.useState)(!1),2),e2=e1[0],e4=e1[1],e3=(0,m._)((0,x.useState)(!1),2),e8=e3[0],e6=e3[1],e5=i0({secrets:L}).devSecrets;(0,x.useEffect)(function(){J({context:"deploy_options"})},[]);var e7=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.value;eO(function(e){return(0,eC.Uy)(e,function(e){e.push({name:null!=t?t:"",value:null!=n?n:""})})})},e9=function(e,t){eO(function(n){return(0,eC.Uy)(n,function(n){n[e].name=t})})},te=function(e,t){eO(function(n){return(0,eC.Uy)(n,function(n){n[e].value=t})})},tt=function(e){eO(function(t){return(0,eC.Uy)(t,function(t){t.splice(e,1)})})},tn=eo!==el.Vp.Static,tr=G===el.r4.Gce,ti=eo===el.Vp.Static,to=G!==el.r4.Cron&&!(null==et?void 0:et.replitAppSubdomain),ta=G===el.r4.Cron,tl=eo===el.Vp.Server||eo===el.Vp.CloudRun,tc=(g=(0,S._)(function(){var e,t;return(0,E.Jh)(this,function(n){switch(n.label){case 0:if(!(e=(!to||ef)&&es.length?es:void 0))return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,q({envVars:eN.filter(function(e){return(0,ou.GV)(e)}),subdomain:e,machineConfigurationId:(null==P?void 0:P.configurationId)||void 0,maxMachineInstances:(null==P?void 0:P.maxInstances)||void 0,machineJob:eS&&eI?{timezone:eS,crontab:eI,timeoutSeconds:oq(eJ,eK),failureNotifications:e8}:void 0,config:{buildCommand:em,runCommand:ey,appType:eo,ignorePorts:eM,publicDir:eW}})];case 2:return n.sent(),M(),[3,4];case 3:if((t=n.sent())instanceof i2.ZG)return ex("Run command cannot be empty."),[2];if(t instanceof i2.SF)return ej("Public directory cannot be empty."),[2];if(t instanceof i2.Iy)return eR(t.message||"Invalid timezone."),[2];if(t instanceof i2.Bz)return eP(t.message||"Invalid crontab."),[2];return H(t.message),[3,4];case 4:return[2]}})}),function(){return g.apply(this,arguments)}),ts=(0,m._)((0,x.useState)(!1),2),tu=ts[0],td=ts[1],tf=(0,m._)((0,x.useState)(!1),2),th=tf[0],tp=tf[1],tm=(0,(0,C.BU)().getDeployabilityByProvider)(G),tv=er?tm.redeploy.isAuthorized:tm.deploy.isAuthorized,tg=K||Q||!tv||j===_.z.Preparing||e2,ty=tg||to&&!ef,tb=eN.map(function(e){return e.name}),tw=(y=(0,S._)(function(){var e,t;return(0,E.Jh)(this,function(n){switch(n.label){case 0:return td(!0),e=eN.reduce(function(e,t){return e[t.name]=t.value,e},{}),[4,L.readSecrets()];case 1:return t=n.sent(),[4,L.writeSecrets((0,k._)(t).concat((0,k._)(Object.entries(e).map(function(e){var t=(0,m._)(e,2);return{key:t[0],value:t[1]}}))))];case 2:return n.sent(),td(!1),tp(!1),[2]}})}),function(){return y.apply(this,arguments)}),tZ=Q?(0,v.BX)(v.HY,{children:[(0,v.tZ)(id,{}),(0,v.tZ)(id,{}),(0,v.tZ)(id,{})]}):(0,v.BX)(v.HY,{children:[ta?(0,v.tZ)(o0,{crontab:eI,setCrontab:eB,crontabError:eA,timezone:eS,setTimezone:ek,timezoneError:eT,loading:K,timeoutValue:eJ,setTimeoutValue:eY,timeoutUnits:eK,setTimeoutUnits:eQ,setTimeoutValueError:e4,enableFailureNotifications:e8,setEnableFailureNotifications:e6}):null,to?(0,v.tZ)(iu,{id:"primaryDomain",title:"Primary domain",information:"You can add more custom domains after deploying",children:(0,v.tZ)(oZ,{id:"primaryDomain",subdomain:es,deploymentId:D||void 0,onChange:eu,updateValidity:eh})}):null,ti?(0,v.tZ)(iu,{id:"publicDir",title:"Public directory",information:"The public directory is the folder where the browser should start when serving your static site",children:(0,v.tZ)(og,{id:"publicDir",value:eW,onChange:eH,loading:Q,disabled:tg,error:ez})}):null,(0,v.tZ)(iu,{id:"buildCommand",title:"Build command",information:"The build command is the command-line statement that compiles your app at build time.",optional:!0,children:(0,v.tZ)(og,{id:"buildCommand",value:em,onChange:ev,loading:Q,disabled:tg})}),tn?(0,v.tZ)(iu,{id:"runCommand",title:"Run command",information:"The run command is the command-line statement that launches your app after it has been built.",children:(0,v.tZ)(og,{id:"runCommand",value:ey,onChange:eb,loading:Q,disabled:tg,error:eZ})}):null,(0,v.tZ)(iu,{id:"envVars",title:"Deployment secrets",information:"Secrets, or environment variables, are private keys you can use to access APIs and services",actions:D&&eN.length>0?(0,v.tZ)(X.hU,{alt:"Copy all secrets from Deployment to Development.",disabled:tu,onClick:function(){tp(!0)},children:(0,v.tZ)(F.Z,{})}):null,children:(0,v.BX)(b.G,{css:[Z.l0.colWithGap(12)],children:[eN.length>0?eN.map(function(e,t){var n=e.name,r=e.value;return(0,v.tZ)(ow,{index:t,name:n,value:r,updateEnvVarName:function(e){return e9(t,e)},updateEnvVarValue:function(e){return te(t,e)},removeEnvVar:function(){return tt(t)},disabled:tg,otherKeys:tb.filter(function(e,n){return n!==t}),devSecrets:e5},t)}):null,e5?(0,v.tZ)(iQ,{secrets:new Map(eN.map(function(e){return[e.name,e.value]})),otherSecrets:e5,otherEnvName:"workspace",onAddSecret:function(e){return e7({name:e.key,value:e.value})},initialExpanded:V}):null,(0,v.tZ)(e0.zx,{onClick:function(){return e7()},text:"Add deployment secret",iconLeft:(0,v.tZ)(iJ.Z,{}),disabled:K})]})}),tr?(0,v.tZ)(iu,{id:"deploymentAppType",title:"App type",information:"Configure your app based on whether it needs to serve traffic from the web.",children:(0,v.tZ)(ox,{appType:eo,onChange:function(e){ea(e),eX((e===el.Vp.Server||e===el.Vp.Worker)&&e===el.Vp.Worker)}})}):null,tl?(0,v.tZ)(oa,{ports:O,openNetworkingPane:z}):null]});return(0,v.BX)(v.HY,{children:[(0,v.BX)(b.G,{css:o7.self,children:[tZ,(0,v.BX)(b.G,{css:o7.footer,children:[(0,v.tZ)(iq,{deployability:tm,isRedeploy:er}),(0,v.BX)(b.G,{css:o7.ctaGroup,children:[en?(0,v.tZ)(e0.zx,{text:"Cancel",onClick:W}):null,(0,v.tZ)(b.G,{css:o7.deployButton,children:(0,v.tZ)(e0.zx,{colorway:"primary",onClick:tc,text:j===_.z.Preparing&&"Preparing..."||Q&&"Fetching options..."||"Deploy",iconLeft:Q||j===_.z.Preparing?(0,v.tZ)(w.Z,{}):(0,v.tZ)(t4.Z,{}),disabled:ty})})]})]})]}),(0,v.tZ)(iW.u,{isOpen:th,onRequestClose:function(){tu||tp(!1)},children:(0,v.BX)(b.G,{css:o7.secretsModal,children:[(0,v.tZ)(I.xv,{variant:"subheadBig",children:"Copy secrets from Deployment to Development?"}),(0,v.tZ)(I.xv,{children:"Are you sure you want to copy all of your secrets from Deployment to Development? Secrets already present in Development will be overwritten and lost permanently."}),(0,v.BX)(b.G,{css:o7.secretsModalButtons,children:[(0,v.tZ)(e0.zx,{text:"Cancel",disabled:tu,onClick:function(){tp(!1)}}),(0,v.tZ)(e0.zx,{text:"Yes, copy secrets",colorway:"negative",disabled:tu,loading:tu,onClick:tw})]})]})})]})};function ae(){var e=(0,K._)(["\n  query HostingDeploymentConfigRedeploy($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        replitAppSubdomain\n        activityLogs(count: 20) {\n          items {\n            id\n            ...HostingActivityLogLine2\n          }\n          pageInfo {\n            hasNextPage\n            nextCursor\n          }\n        }\n        currentBuild {\n          id\n          envVars {\n            name\n            value\n          }\n        }\n        ...DeploymentsDeployOptionsDeployment\n      }\n    }\n  }\n  ","\n  ","\n"]);return ae=function(){return e},e}var at={},an=(0,Q.Ps)(ae(),rq,o8),ar=(0,B.X)({self:Z.l0.colWithGap(8),ctaGroup:{flexDirection:"row",gap:8,flexWrap:"wrap"},loading:rD,deployOptions:[Z.l0.p(16),Z.l0.pt(12),Z.l0.borderRadius(8),Z.l0.border({color:Z.TV.outlineDimmest})]}),ai=function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,g,y,w=e.deploymentId,Z=e.dotReplit,k=e.fs,T=e.ports,R=e.secrets,I=e.onError,B=e.expanded,P=e.setExpanded,L=e.shouldShowMobileTour,N=e.onDismissMobileTour,O=e.openNetworkingPane,U=e.onResume,M=(0,C.XA)().redeployWithNoNewOptions,X=(0,C.kW)(),F=(i=(t={deploymentId:w,dotReplit:Z}).deploymentId,o=t.dotReplit,l=(a=(0,m._)((0,x.useState)(null),2))[0],c=a[1],(0,x.useEffect)(function(){var e=!1;function t(){return(t=(0,S._)(function(){var t;return(0,E.Jh)(this,function(n){switch(n.label){case 0:return[4,(0,i1.$f)(o)];case 1:if(t=n.sent(),e)return[2];return c(t),[2]}})})).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e=!0}},[o]),d=(s=(0,A._)({},at,{variables:{id:i},ssr:!1,fetchPolicy:"cache-and-network"}),u=ee.a(an,s)).data,f=u.loading,h=u.error,p=(null==d?void 0:null===(n=d.hostingDeployment)||void 0===n?void 0:n.__typename)==="HostingDeployment"?d.hostingDeployment:null,(null==d?void 0:null===(r=d.hostingDeployment)||void 0===r?void 0:r.__typename)==="NotFoundError"?{deployment:null,config:null,error:"Deployment not found",loading:!1}:null===l||!p&&f?{data:null,erorr:null,loading:!0}:h||!p?{deployment:null,config:null,error:"Something went wrong",loading:!1}:{deployment:p,config:l,error:null,loading:!1}),W=(0,C.BU)().deployability,H=null===(g=F.deployment)||void 0===g?void 0:g.currentBuild,z=i0({secrets:R}).devSecrets,j=null===(y=F.deployment)||void 0===y?void 0:y.currentBuild.envVars,q=(0,x.useMemo)(function(){return z?i$({secrets:new Map(null==j?void 0:j.map(function(e){return[e.name,e.value]})),otherSecrets:z}).missing.size:0},[z,j]);if(F.error)return(0,v.tZ)(V,{text:F.error});if(B)return H?(0,v.tZ)(b.G,{css:ar.deployOptions,children:(0,v.tZ)(o9,{initialSubdomain:"",provider:H.provider,deploymentId:w,fs:k,secrets:R,dotReplit:Z,ports:T,onCancel:function(){return P(!1)},onDeploy:function(){return P(!1)},onError:I,initialSecretsSyncExpanded:q>0,openNetworkingPane:O})}):(0,v.tZ)(D.E,{colorway:"warning",icon:(0,v.tZ)(G.Z,{}),text:"Provider not found"});var J=F.loading||!W.redeploy.isAuthorized||!(X===_.z.Ready||X===_.z.Suspended);return(0,v.BX)(b.G,{css:ar.self,children:[(0,v.tZ)(iq,{deployability:W,isRedeploy:!0}),(0,v.BX)(b.G,{css:ar.ctaGroup,children:[(0,v.tZ)(e0.zx,{disabled:J,onClick:(0,S._)(function(){return(0,E.Jh)(this,function(e){switch(e.label){case 0:if(F.loading)return[2];if(X===_.z.Suspended)return U(),[2];return[4,M()];case 1:return e.sent(),[2]}})}),text:X===_.z.Suspended?"Resume":"Redeploy",iconLeft:(0,v.tZ)(t4.Z,{})}),(0,v.tZ)(e0.zx,{disabled:J,text:q>0?"".concat(q," ").concat((0,r2.Z)("secrets",q)," out of sync"):"Edit commands and secrets",iconLeft:q>0?(0,v.tZ)(G.Z,{}):void 0,onClick:function(){return P(!0)}}),(0,v.tZ)(ij,{shouldShow:L,onDismissTour:N})]})]})},ao=n(77862),aa=n(17841),al=n(22750),ac=Z.nC.min(320),as=(0,B.X)({container:Z.l0.colWithGap(4),label:[Z.l0.flex.column,Z.l0.pb(4),(0,T._)({},ac,[Z.l0.flex.row,Z.l0.justify.spaceBetween,Z.l0.pb(0)])],resource:Z.l0.fontWeight.medium,cost:[Z.l0.rowWithGap(1),Z.l0.align.baseline]}),au=n(40635),ad=n(4762),af=[1,2,4,8],ah=ad.m0*ad.hU,ap=[ah,2*ah,4*ah,8*ah],am=[[0,3],[0,4],[2,5],[3,6]],av=af.length-1,ag=1/(2*av),ay=(0,au.cn)(0),ab=(0,au.cn)(function(e){return af[e(ay)]}),aw=(0,au.cn)(function(e){return ap[e(ay)]}),aZ=(0,au.cn)(function(e){return am[e(ay)]}),ax=(0,au.cn)(0),aC=(0,au.cn)(function(e){var t=e(aG)[0]/av,n=e(aG)[1]/av,r=0,i=0;return e(ax)<t&&(r=(t-e(ax))/ag,i=t-ag),e(ax)>n&&(r=(e(ax)-n)/ag,i=n+ag),{overage:r,point:i}}),a_=(0,au.cn)(0),aS=(0,au.cn)(0),ak=[.5,1,2,4,8,16,32];ad.m0;var aE=[[0,1],[0,1],[0,2],[0,3],[1,3],[2,3],[3,3]],aT=ak.length-1,aR=1/(2*aT),aD=(0,au.cn)(2),aI=(0,au.cn)(function(e){return ak[e(aD)]}),aB=(0,au.cn)(function(e){return e(aM)*ad.m0}),aG=(0,au.cn)(function(e){return aE[e(aD)]}),aA=(0,au.cn)(0),aP=(0,au.cn)(function(e){var t=e(aZ)[0]/aT,n=e(aZ)[1]/aT,r=0,i=0;return e(aA)<t&&(r=(t-e(aA))/aR,i=t-aR),e(aA)>n&&(r=(e(aA)-n)/aR,i=n+aR),{overage:r,point:i}}),aL=(0,au.cn)(null,function(e,t){var n=e(ay),r=e(aG)[0],i=e(aG)[1];n<r&&t(ay,r),n>i&&t(ay,i)}),aN=(0,au.cn)(null,function(e,t){var n=e(aD),r=e(aZ)[0],i=e(aZ)[1];n<r&&t(aD,r),n>i&&t(aD,i)}),aO=(0,au.cn)(function(e){var t=e(aG)[0]/av,n=e(aG)[1]/av,r=e(aZ)[0]/aT,i=e(aZ)[1]/aT;return e(ax)<t?(t-e(ax))/ag:e(ax)>n?(e(ax)-n)/ag:e(aA)<r?(r-e(aA))/aR:e(aA)>i?(e(aA)-i)/aR:0}),aU=(0,au.cn)(function(e){var t;return(1e5*(t={ramCost:e(aB),cpuCost:e(aw)}).ramCost+1e5*t.cpuCost)/1e5}),aM=(0,au.cn)(function(e){return e(aI)*ad.v7}),aX=(0,au.cn)(function(e){return e(ab)*ad.hU}),aF=(0,au.cn)(function(e){return e(aM)+e(aX)});(i=d||(d={})).None="0ms",i.Normal="200ms";var aW=["ArrowLeft","ArrowRight","Home","End"],aH=(0,nn.iv)({position:"relative",height:"16px",width:"100%",touchAction:"none"}),aV=(0,nn.iv)({position:"absolute",zIndex:2,top:"0",width:"16px",height:"16px",backgroundColor:Z.TV.white,borderRadius:"100%",outline:"none",cursor:"pointer",willChange:"left, transition",boxShadow:"0 0 8px rgba(0,0,0,0.15)",":focus":{outline:"2px solid ".concat(Z.TV.accentPrimaryDefault),":not(:focus-visible)":{outlineColor:"transparent"}}}),az=(0,x.forwardRef)(function(e,t){var n=(0,m._)((0,al.KO)(ab),1)[0],r=(0,al.b9)(a_),i=(0,x.useRef)(null),o=(0,x.useRef)(null);return(0,x.useImperativeHandle)(t,function(){return i.current}),n&&i.current&&(i.current.setAttribute("aria-valuemin",String(af[0])),i.current.setAttribute("aria-valuemax",String(af[af.length-1])),i.current.setAttribute("aria-valuenow",String(n))),(0,x.useEffect)(function(){var e=function(){i.current&&(r(parseFloat(getComputedStyle(i.current).getPropertyValue("left"))),o.current=requestAnimationFrame(e))};return e(),function(){o.current&&cancelAnimationFrame(o.current)}},[r]),(0,x.useMemo)(function(){return(0,v.tZ)("div",{ref:i,role:"slider",tabIndex:0,css:[aV,{left:"calc((100% - 16px) * var(--cpu-progress, 0))",transition:"left var(--cpu-transition-time, 100ms) cubic-bezier(0, 0, 0.2, 1)"}]})},[])}),aj="min(var(--point), var(--position))",aq="max(var(--point), var(--position))",aJ=(0,x.forwardRef)(function(e,t){var n=(0,al.Dv)(aC),r=n.overage,i=n.point,o=(0,al.Dv)(ax),a=(0,x.useRef)(null);return(0,x.useEffect)(function(){(0,ao.A)(a,"--opacity",String(r))},[r]),(0,x.useEffect)(function(){(0,ao.A)(a,"--point",String(100*i)+"%")},[i]),(0,x.useEffect)(function(){(0,ao.A)(a,"--position",String(100*o)+"%")},[o]),(0,x.useMemo)(function(){return(0,v.BX)(v.HY,{children:[(0,v.tZ)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,v.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:eI.vb.interactiveBorder,borderRadius:"2px"},children:(0,v.tZ)("div",{ref:a,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(aj,", \n                  ").concat(eI.vb.interactiveBorderHover," ").concat(aj,", \n                  ").concat(eI.vb.interactiveBorderHover," ").concat(aq,", \n                  transparent ").concat(aq," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[t])}),aY=(0,B.X)({container:{flexDirection:"row",justifyContent:"space-between",height:6,paddingLeft:8,paddingRight:8},mark:{width:1,backgroundColor:Z.TV.outlineStronger}});function a$(e){var t=e.list;return(0,v.tZ)(b.G,{css:aY.container,children:t.map(function(e){return(0,v.tZ)(b.G,{css:aY.mark},e)})})}function aK(e){var t=e.setAttrs,n=(0,m._)((0,al.KO)(ay),2),r=n[0],i=n[1],o=(0,m._)((0,x.useState)(!1),2),a=o[0],l=o[1],c=(0,x.useRef)(null),s=(0,x.useRef)(null),u=(0,x.useRef)(null),f=(0,x.useCallback)(function(e){t.setTransitionTime(e)},[t]),h=(0,x.useCallback)(function(e){t.setProgress(e)},[t]);return void 0===r||a||(h(r/av),f(d.Normal)),(0,x.useEffect)(function(){if(void 0!==r&&s.current&&u.current&&!a){var e=s.current,t=u.current,n=function(n){if(0===n.button){l(!0),t.focus();var r=e.getBoundingClientRect(),o=t.getBoundingClientRect(),a=r.width,c=o.width,s=n.target===e?c/2:n.clientX-o.left,u=null,p=function(e){var t=Math.max(0,Math.min(1,(e-r.left-s)/(a-c)));t!==u&&(u=t,h(t),i(Math.round(t*av)))};p(n.clientX);var m=function(e){f(d.None),p(e.clientX),e.preventDefault(),e.stopPropagation()},v=function(){window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",v),f(d.Normal),l(!1)};window.addEventListener("pointermove",m),window.addEventListener("pointerup",v),window.addEventListener("pointercancel",v),n.preventDefault(),n.stopPropagation()}};return e.addEventListener("pointerdown",n),t.addEventListener("pointerdown",n),function(){e.removeEventListener("pointerdown",n),t.removeEventListener("pointerdown",n)}}},[r,a,i,h,f]),(0,x.useEffect)(function(){if(void 0!==r&&u.current&&!a){var e=u.current,t=function(e){if(void 0!==r&&aW.includes(e.key)){var t=Math.max(0,r-1),n=Math.min(av,r+1),o=null;switch(e.key){case"ArrowLeft":o=t;break;case"ArrowRight":o=n;break;case"Home":o=0;break;case"End":o=av}null!==o&&(i(o),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",t),function(){e.removeEventListener("keydown",t)}}},[a,r,i]),(0,x.useMemo)(function(){return(0,v.BX)(b.G,{css:Z.l0.colWithGap(8),children:[(0,v.BX)(b.G,{innerRef:c,css:aH,children:[(0,v.tZ)(aJ,{ref:s}),(0,v.tZ)(az,{ref:u})]}),(0,v.tZ)(a$,{list:af})]})},[])}function aQ(e){var t=e.setAttrs,n=(0,m._)((0,al.KO)(ab),1)[0],r=(0,m._)((0,al.KO)(aX),1)[0],i=(0,al.b9)(aN);return(0,x.useEffect)(function(){i()},[i,n]),(0,v.BX)(b.G,{css:as.container,children:[(0,v.BX)(b.G,{css:as.label,children:[(0,v.BX)(I.xv,{css:as.resource,multiline:!1,children:[n," vCPU",n>1?"s":""]}),(0,v.BX)(b.G,{css:as.cost,children:[(0,v.BX)(I.xv,{color:"dimmer",multiline:!1,children:[r," ",(0,r2.Z)("compute unit",r)]}),(0,v.tZ)(I.xv,{color:"dimmest",variant:"small",multiline:!1,children:"/sec"})]})]}),(0,v.tZ)(aK,{setAttrs:t})]})}var a0=(0,x.forwardRef)(function(e,t){var n=(0,m._)((0,al.KO)(aI),1)[0],r=(0,al.b9)(aS),i=(0,x.useRef)(null),o=(0,x.useRef)(null);return(0,x.useImperativeHandle)(t,function(){return i.current}),n&&i.current&&(i.current.setAttribute("aria-valuemin",String(ak[0])),i.current.setAttribute("aria-valuemax",String(ak[ak.length-1])),i.current.setAttribute("aria-valuenow",String(n))),(0,x.useEffect)(function(){var e=function(){i.current&&(r(parseFloat(getComputedStyle(i.current).getPropertyValue("left"))),o.current=requestAnimationFrame(e))};return e(),function(){o.current&&cancelAnimationFrame(o.current)}},[r]),(0,x.useMemo)(function(){return(0,v.tZ)("div",{ref:i,role:"slider",tabIndex:0,"data-ram-thumb":!0,css:[aV,{left:"calc((100% - 16px) * var(--ram-progress, 0))",transition:"left var(--ram-transition-time, 100ms) cubic-bezier(0, 0, 0.2, 1)"}]})},[])}),a1="min(var(--point), var(--position))",a2="max(var(--point), var(--position))",a4=(0,x.forwardRef)(function(e,t){var n=(0,al.Dv)(aP),r=n.overage,i=n.point,o=(0,al.Dv)(aA),a=(0,x.useRef)(null);return(0,x.useEffect)(function(){(0,ao.A)(a,"--opacity",String(r))},[r]),(0,x.useEffect)(function(){(0,ao.A)(a,"--point",String(100*i)+"%")},[i]),(0,x.useEffect)(function(){(0,ao.A)(a,"--position",String(100*o)+"%")},[o]),(0,x.useMemo)(function(){return(0,v.BX)(v.HY,{children:[(0,v.tZ)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,v.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:eI.vb.interactiveBorder,borderRadius:"2px"},children:(0,v.tZ)("div",{ref:a,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(a1,", \n                  ").concat(eI.vb.interactiveBorderHover," ").concat(a1,", \n                  ").concat(eI.vb.interactiveBorderHover," ").concat(a2,", \n                  transparent ").concat(a2," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[t])});function a3(e){var t=e.setAttrs,n=(0,m._)((0,al.KO)(aD),2),r=n[0],i=n[1],o=(0,m._)((0,x.useState)(!1),2),a=o[0],l=o[1],c=(0,x.useRef)(null),s=(0,x.useRef)(null),u=(0,x.useRef)(null),f=(0,x.useCallback)(function(e){t.setTransitionTime(e)},[t]),h=(0,x.useCallback)(function(e){t.setProgress(e)},[t]);return void 0===r||a||(h(r/aT),f(d.Normal)),(0,x.useEffect)(function(){if(void 0!==r&&s.current&&u.current&&!a){var e=s.current,t=u.current,n=function(n){if(0===n.button){l(!0),t.focus();var r=e.getBoundingClientRect(),o=t.getBoundingClientRect(),a=r.width,c=o.width,s=n.target===e?c/2:n.clientX-o.left,u=null,p=function(e){var t=Math.max(0,Math.min(1,(e-r.left-s)/(a-c)));t!==u&&(u=t,h(t),i(Math.round(t*aT)))};p(n.clientX);var m=function(e){f(d.None),p(e.clientX),e.preventDefault(),e.stopPropagation()},v=function(){window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",v),f(d.Normal),l(!1)};window.addEventListener("pointermove",m),window.addEventListener("pointerup",v),window.addEventListener("pointercancel",v),n.preventDefault(),n.stopPropagation()}};return e.addEventListener("pointerdown",n),t.addEventListener("pointerdown",n),function(){e.removeEventListener("pointerdown",n),t.removeEventListener("pointerdown",n)}}},[r,a,i,h,f]),(0,x.useEffect)(function(){if(void 0!==r&&u.current&&!a){var e=u.current,t=function(e){if(void 0!==r&&aW.includes(e.key)){var t=Math.max(0,r-1),n=Math.min(aT,r+1),o=null;switch(e.key){case"ArrowLeft":o=t;break;case"ArrowRight":o=n;break;case"Home":o=0;break;case"End":o=aT}null!==o&&(i(o),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",t),function(){e.removeEventListener("keydown",t)}}},[a,r,i]),(0,x.useMemo)(function(){return(0,v.BX)(b.G,{css:Z.l0.colWithGap(8),children:[(0,v.BX)(b.G,{innerRef:c,css:aH,children:[(0,v.tZ)(a4,{ref:s}),(0,v.tZ)(a0,{ref:u})]}),(0,v.tZ)(a$,{list:ak})]})},[])}function a8(e){var t=e.setAttrs,n=(0,m._)((0,al.KO)(aI),1)[0],r=(0,m._)((0,al.KO)(aM),1)[0],i=(0,al.b9)(aL);return(0,x.useEffect)(function(){i()},[i,n]),(0,v.BX)(b.G,{css:as.container,children:[(0,v.BX)(b.G,{css:as.label,children:[(0,v.BX)(I.xv,{css:as.resource,multiline:!1,children:[n," GiB RAM"]}),(0,v.BX)(b.G,{css:as.cost,children:[(0,v.BX)(I.xv,{color:"dimmer",multiline:!1,children:[r," ",(0,r2.Z)("compute unit",r)]}),(0,v.tZ)(I.xv,{color:"dimmest",variant:"small",multiline:!1,children:"/sec"})]})]}),(0,v.tZ)(a3,{setAttrs:t})]})}var a6=(0,B.X)({container:[Z.l0.px(8),Z.l0.width("100%"),Z.l0.position.absolute,Z.l0.top(60),Z.l0.bottom(10),Z.l0.transition.snappy,Z.l0.zIndex(1),(0,T._)({},Z.nC.min(320),Z.l0.top(34))],svg:[Z.l0.width("100%"),Z.l0.height("100%"),Z.l0.overflow("visible")],overage:{"--opacity":0,opacity:"var(--opacity)",transition:"opacity 80ms ease-out"}});function a5(){var e,t=(0,al.Dv)(aO),n=(0,x.useRef)(null),r=(0,x.useRef)(null),i=(0,x.useRef)((null===(e=r.current)||void 0===e?void 0:e.offsetWidth)||0),o=(0,al.Dv)(a_),a=(0,al.Dv)(aS);(0,x.useEffect)(function(){r.current&&(i.current=r.current.offsetWidth)});var l={x1:o/(i.current-16)*100,x2:a/(i.current-16)*100,y1:0,y2:100,strokeWidth:3,vectorEffect:"non-scaling-stroke",shapeRendering:"crisp-edges"};return(0,x.useEffect)(function(){(0,ao.A)(n,"--opacity",String(Math.pow(t,1/3)))},[t]),(0,v.tZ)(b.G,{css:a6.container,id:"rope",innerRef:r,children:(0,v.BX)("svg",{height:100,viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",css:a6.svg,children:[(0,v.tZ)("line",(0,P._)((0,A._)({},l),{stroke:Z.TV.outlineDimmer})),(0,v.tZ)("line",(0,P._)((0,A._)({},l),{stroke:Z.TV.outlineDefault,strokeDasharray:8})),(0,v.BX)("g",{ref:n,css:a6.overage,children:[(0,v.tZ)("line",(0,P._)((0,A._)({},l),{stroke:Z.TV.accentPrimaryDefault})),(0,v.tZ)("line",(0,P._)((0,A._)({},l),{stroke:Z.TV.accentPrimaryStrongest,strokeDasharray:8}))]})]})})}var a7=[Z.l0.borderRadius(8)],a9=(0,B.X)({container:[a7],disabled:[a7,{opacity:.5,pointerEvents:"none"}],top:[Z.l0.p(16),Z.l0.colWithGap(12)],bottom:[Z.l0.p(16),Z.l0.border({direction:"top",color:Z.TV.outlineDimmer})],header:[Z.l0.rowWithGap(8)],text:[Z.l0.colWithGap(4),Z.l0.flex.growAndShrink(1)],title:[Z.l0.rowWithGap(4),Z.l0.align.center],edit:eI.gU.outlined,overview:[Z.l0.colWithGap(8)],overviewLine:[Z.l0.flex.column,(0,T._)({},Z.nC.min(320),[Z.l0.flex.row,Z.l0.justify.spaceBetween])],overviewValue:[Z.l0.fontWeight.medium],total:[Z.l0.rowWithGap(4),Z.l0.flex.shrink(1),Z.l0.align.center],cost:[Z.l0.flex.row,Z.l0.align.baseline,{gap:1}],builder:[Z.l0.colWithGap(12),Z.l0.position.relative,{"--cpu-transition-time":d.Normal,"--cpu-progress":1,"--ram-transition-time":d.Normal,"--ram-progress":1,"#rope":{opacity:0}," *":{transitionTimingFunction:"ease"},":hover, :focus-within":{" #rope":{opacity:1}}}]});function le(e){var t=e.machineConfiguration,n=e.disabled,r=e.toggleEditable,i=void 0===r||r,o=(0,x.useRef)(null),a=(0,m._)((0,x.useState)(!i),2),l=a[0],c=a[1],s=(0,al.Dv)(ab),u=(0,al.Dv)(aI),d=(0,al.Dv)(aX),f=(0,al.Dv)(aM),h=(0,al.Dv)(aU),p=(0,al.Dv)(aF),g=(0,al.b9)(ax),y=(0,al.b9)(aA),w=(0,al.b9)(ay),C=(0,al.b9)(aD);return(0,x.useEffect)(function(){if(t){var e=af.findIndex(function(e){return e.toString()===t.vcpu}),n=ak.findIndex(function(e){return e.toString()===t.memory});w(e),C(n)}},[t,w,C]),(0,v.BX)(t6.Tg,{elevated:!0,css:n?a9.disabled:a9.container,children:[(0,v.BX)(b.G,{css:a9.top,children:[(0,v.BX)(b.G,{css:a9.header,children:[(0,v.BX)(b.G,{css:a9.text,children:[(0,v.BX)(b.G,{css:a9.title,children:[(0,v.tZ)(aa.Z,{}),(0,v.tZ)(I.xv,{variant:"subheadDefault",multiline:!1,children:"Machine power"})]}),(0,v.tZ)(I.xv,{multiline:!0,variant:"small",color:"dimmer",children:"The power level for each machine that spins up upon any request"})]}),i?(0,v.tZ)(e0.zx,{text:l?"Done":"Edit",css:a9.edit,onClick:function(){return c(!l)}}):null]}),l?(0,v.BX)(b.G,{css:a9.builder,innerRef:o,children:[(0,v.tZ)(a5,{}),(0,v.tZ)(aQ,{setAttrs:{setTransitionTime:function(e){(0,ao.A)(o,"--cpu-transition-time",e)},setProgress:function(e){(0,ao.A)(o,"--cpu-progress",e.toString()),g(e)}}}),(0,v.tZ)(a8,{setAttrs:{setTransitionTime:function(e){(0,ao.A)(o,"--ram-transition-time",e)},setProgress:function(e){(0,ao.A)(o,"--ram-progress",e.toString()),y(e)}}})]}):(0,v.BX)(b.G,{css:a9.overview,children:[(0,v.BX)(b.G,{css:a9.overviewLine,children:[(0,v.BX)(I.xv,{css:a9.overviewValue,multiline:!1,children:[s," vCPU",s>1?"s":""]}),(0,v.BX)(b.G,{css:a9.cost,children:[(0,v.BX)(I.xv,{multiline:!1,color:"dimmer",children:[d," ",(0,r2.Z)("compute unit",d)]}),(0,v.tZ)(I.xv,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]})]}),(0,v.BX)(b.G,{css:a9.overviewLine,children:[(0,v.BX)(I.xv,{css:a9.overviewValue,multiline:!1,children:[u," GiB RAM"]}),(0,v.BX)(b.G,{css:a9.cost,children:[(0,v.BX)(I.xv,{multiline:!1,color:"dimmer",children:[f," ",(0,r2.Z)("compute unit",f)]}),(0,v.tZ)(I.xv,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]})]})]})]}),(0,v.tZ)(b.G,{css:a9.bottom,children:(0,v.BX)(b.G,{css:a9.overviewLine,children:[(0,v.tZ)(I.xv,{css:a9.overviewValue,multiline:!1,children:"Total per machine"}),(0,v.BX)(b.G,{css:a9.total,children:[(0,v.BX)(b.G,{css:a9.cost,children:[(0,v.BX)(I.xv,{multiline:!1,children:[p," ",(0,r2.Z)("compute unit",p)]}),(0,v.tZ)(I.xv,{variant:"small",color:"dimmer",multiline:!1,children:"/sec"})]}),(0,v.tZ)(eW.u,{tooltip:(0,v.BX)(b.G,{css:a9.cost,children:[(0,v.BX)(I.xv,{multiline:!1,children:["$",h.toFixed(6)]}),(0,v.tZ)(I.xv,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]}),children:(0,v.tZ)(eH.Z,{color:Z.TV.foregroundDimmest})})]})]})})]})}var lt=[1,2,3,4,5,6,7,8,9,10],ln=lt.length-1,lr=1/(2*ln),li=(0,au.cn)(2),lo=(0,au.cn)(function(e){return lt[e(li)]}),la=(0,au.cn)(function(e){return(e(aU)*e(lo)).toFixed(6)}),ll=(0,au.cn)(function(e){return e(aF)*e(lo)}),lc=(0,au.cn)(0),ls=(0,au.cn)(function(e){var t=0/ln,n=lt.length-1/ln,r=0,i=0;return e(lc)<t&&(r=(t-e(lc))/lr,i=t-lr),e(lc)>n&&(r=(e(lc)-n)/lr,i=n+lr),{overage:r,point:i}});(o=f||(f={})).None="0ms",o.Normal="120ms";var lu=["ArrowLeft","ArrowRight","Home","End"],ld=(0,nn.iv)({position:"relative",height:"16px",width:"100%",touchAction:"none"}),lf=(0,nn.iv)({position:"absolute",zIndex:2,top:"0",width:"16px",height:"16px",backgroundColor:Z.TV.white,borderRadius:"100%",outline:"none",cursor:"pointer",willChange:"left, transition",boxShadow:"0 0 8px rgba(0,0,0,0.15)",":focus":{outline:"2px solid ".concat(Z.TV.accentPrimaryDefault),":not(:focus-visible)":{outlineColor:"transparent"}}}),lh=(0,x.forwardRef)(function(e,t){var n=(0,m._)((0,al.KO)(lo),1)[0],r=(0,x.useRef)(null);return(0,x.useImperativeHandle)(t,function(){return r.current}),n&&r.current&&(r.current.setAttribute("aria-valuemin",String(lt[0])),r.current.setAttribute("aria-valuemax",String(lt[lt.length-1])),r.current.setAttribute("aria-valuenow",String(n))),(0,x.useMemo)(function(){return(0,v.tZ)("div",{ref:r,role:"slider",tabIndex:0,css:[lf,{left:"calc((100% - 16px) * var(--max-instances-progress, 0))",transition:"left var(--max-instances-transition-time, 100ms) ease-out"}]})},[])}),lp="min(var(--point), var(--position))",lm="max(var(--point), var(--position))",lv=(0,x.forwardRef)(function(e,t){var n=(0,al.Dv)(ls),r=n.overage,i=n.point,o=(0,al.Dv)(lc),a=(0,x.useRef)(null);return(0,x.useEffect)(function(){(0,ao.A)(a,"--opacity",String(r))},[r]),(0,x.useEffect)(function(){(0,ao.A)(a,"--point",String(100*i)+"%")},[i]),(0,x.useEffect)(function(){(0,ao.A)(a,"--position",String(100*o)+"%")},[o]),(0,x.useMemo)(function(){return(0,v.BX)(v.HY,{children:[(0,v.tZ)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,v.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:eI.vb.interactiveBorder,borderRadius:"2px"},children:(0,v.tZ)("div",{ref:a,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(lp,", \n                  ").concat(eI.vb.interactiveBorderHover," ").concat(lp,", \n                  ").concat(eI.vb.interactiveBorderHover," ").concat(lm,", \n                  transparent ").concat(lm," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[t])});function lg(e){var t=e.setAttrs,n=(0,m._)((0,al.KO)(li),2),r=n[0],i=n[1],o=(0,m._)((0,x.useState)(!1),2),a=o[0],l=o[1],c=(0,x.useRef)(null),s=(0,x.useRef)(null),u=(0,x.useRef)(null),d=(0,x.useCallback)(function(e){t.setTransitionTime(e)},[t]),h=(0,x.useCallback)(function(e){t.setProgress(e)},[t]);return void 0===r||a||(h(r/ln),d(f.Normal)),(0,x.useEffect)(function(){if(void 0!==r&&s.current&&u.current&&!a){var e=s.current,t=u.current,n=function(n){if(0===n.button){l(!0),t.focus();var r=e.getBoundingClientRect(),o=t.getBoundingClientRect(),a=r.width,c=o.width,s=n.target===e?c/2:n.clientX-o.left,u=null,p=function(e){var t=Math.max(0,Math.min(1,(e-r.left-s)/(a-c)));t!==u&&(u=t,h(t),i(Math.round(t*ln)))};p(n.clientX);var m=function(e){d(f.None),p(e.clientX),e.preventDefault(),e.stopPropagation()},v=function(){window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",v),d(f.Normal),l(!1)};window.addEventListener("pointermove",m),window.addEventListener("pointerup",v),window.addEventListener("pointercancel",v),n.preventDefault(),n.stopPropagation()}};return e.addEventListener("pointerdown",n),t.addEventListener("pointerdown",n),function(){e.removeEventListener("pointerdown",n),t.removeEventListener("pointerdown",n)}}},[r,a,i,h,d]),(0,x.useEffect)(function(){if(void 0!==r&&u.current&&!a){var e=u.current,t=function(e){if(void 0!==r&&lu.includes(e.key)){var t=Math.max(0,r-1),n=Math.min(ln,r+1),o=null;switch(e.key){case"ArrowLeft":o=t;break;case"ArrowRight":o=n;break;case"Home":o=0;break;case"End":o=ln}null!==o&&(i(o),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",t),function(){e.removeEventListener("keydown",t)}}},[a,r,i]),(0,x.useMemo)(function(){return(0,v.tZ)(b.G,{css:Z.l0.colWithGap(8),children:(0,v.BX)(b.G,{innerRef:c,css:ld,children:[(0,v.tZ)(lv,{ref:s}),(0,v.tZ)(lh,{ref:u})]})})},[])}var ly=(0,B.X)({costInfo:[Z.l0.rowWithGap(4),Z.l0.flex.shrink(1),Z.l0.align.center]});function lb(e){var t=e.setAttrs,n=(0,m._)((0,al.KO)(lo),1)[0],r=(0,m._)((0,al.KO)(la),1)[0],i=(0,m._)((0,al.KO)(ll),1)[0];return(0,v.BX)(b.G,{css:as.container,children:[(0,v.BX)(b.G,{css:as.label,children:[(0,v.BX)(I.xv,{css:as.resource,multiline:!1,children:[n," ",(0,r2.Z)("machine",n)]}),(0,v.BX)(b.G,{css:ly.costInfo,children:[(0,v.BX)(b.G,{css:as.cost,children:[(0,v.BX)(I.xv,{multiline:!1,children:[i," compute units"]}),(0,v.tZ)(I.xv,{color:"dimmer",variant:"small",multiline:!1,children:"/s at max traffic"})]}),(0,v.tZ)(eW.u,{tooltip:(0,v.BX)(b.G,{css:as.cost,children:[(0,v.BX)(I.xv,{multiline:!1,children:["$",r]}),(0,v.tZ)(I.xv,{variant:"small",color:"dimmest",multiline:!1,children:"/s"})]}),children:(0,v.tZ)(eH.Z,{color:Z.TV.foregroundDimmest})})]})]}),(0,v.tZ)(lg,{setAttrs:t})]})}var lw=n(18257),lZ=[Z.l0.colWithGap(12),Z.l0.borderRadius("container"),Z.l0.p(16)],lx=(0,B.X)({container:[lZ],disabled:[lZ,{opacity:.5,pointerEvents:"none"}],text:[Z.l0.colWithGap(4)],title:[Z.l0.rowWithGap(4),Z.l0.align.center],cost:[Z.l0.flex.row,Z.l0.align.baseline,Z.l0.fontWeight.medium,{gap:3}],builder:[Z.l0.colWithGap(8),Z.l0.position.relative,{"--max-instances-transition-time":f.Normal,"--max-instances":1," *":{transitionTimingFunction:"ease"}}]});function lC(e){var t=e.maxMachineInstances,n=e.disabled,r=e.onError,i=(0,x.useRef)(null),o=(0,al.b9)(lc),a=(0,al.b9)(li);return(0,x.useEffect)(function(){if(t){var e=lt.indexOf(t);if(-1===e){r("An error occurred while setting selected max machine instances.");return}a(e)}},[t,a,r]),(0,v.BX)(t6.Tg,{elevated:!0,css:n?lx.disabled:lx.container,children:[(0,v.BX)(b.G,{css:lx.text,children:[(0,v.BX)(b.G,{css:lx.title,children:[(0,v.tZ)(lw.Z,{}),(0,v.tZ)(I.xv,{variant:"subheadDefault",multiline:!1,children:"Max number of machines"})]}),(0,v.tZ)(I.xv,{multiline:!0,variant:"small",color:"dimmer",children:"The most machines that should ever spin up to handle your highest traffic. More machines means a faster experience for your users."})]}),(0,v.tZ)(b.G,{css:lx.builder,innerRef:i,children:(0,v.tZ)(lb,{setAttrs:{setTransitionTime:function(e){(0,ao.A)(i,"--max-instances-transition-time",e)},setProgress:function(e){(0,ao.A)(i,"--max-instances-progress",e.toString()),o(e)}}})})]})}function l_(){var e=(0,K._)(["\n  query AutoscaleMachineConfigurations {\n    hostingMachineConfigurations(input: { provider: cloud_run }) {\n      __typename\n      ... on HostingMachineConfigurationsResults {\n        results {\n          ...MachineConfiguration\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return l_=function(){return e},e}var lS={},lk=(0,Q.Ps)(l_(),rX.bN),lE=function(e){var t,n,r=(0,C.kW)(),i=(0,C.hn)(),o=(0,C.$y)(),a=void 0!==(0,C.pn)(),l=!a&&"string"!=typeof i,c=(0,al.Dv)(ab),s=(0,al.Dv)(aI),u=(0,al.Dv)(lo),d=(t=(0,A._)({},lS,{onCompleted:function(t){"HostingMachineConfigurationsResults"!==t.hostingMachineConfigurations.__typename&&e.onError("Something went wrong")},onError:function(t){return e.onError(t.message)}}),ee.a(lk,t)),f=d.data,h=d.loading,p=(null==f?void 0:f.hostingMachineConfigurations.__typename)==="HostingMachineConfigurationsResults"?f.hostingMachineConfigurations.results:null;(0,x.useEffect)(function(){J({context:$.k.AutoscaleMachineConfiguration})},[]);var m=(n=(0,S._)(function(){var t,n,r,i;return(0,E.Jh)(this,function(o){return(t=null==p?void 0:p.find(function(e){var t=e.vcpu,n=e.memory;return c.toString()===t&&s.toString()===n}))?(n=t.id,r=t.label,i=t.slug,e.onConfirm({configurationId:n,configurationLabel:r,configurationSlug:i,maxInstances:u})):e.onError("An error occurred trying to validate selected machine configuration"),[2]})}),function(){return n.apply(this,arguments)}),g=h||e.fetching||a||r!==_.z.Ready;return(0,v.BX)(v.HY,{children:[(0,v.tZ)(M,{maxWidth:!0,children:(0,v.tZ)(j,{onBack:e.onBack})}),(0,v.tZ)(M,{maxWidth:!0,children:(0,v.BX)(b.G,{css:Z.l0.colWithGap(16),children:[(0,v.BX)(b.G,{css:Z.l0.colWithGap(4),children:[(0,v.tZ)(I.xv,{variant:"subheadBig",children:"Autoscale machine configuration"}),(0,v.tZ)(I.xv,{variant:"small",color:"dimmer",children:"Autoscale apps spin up enough machines to meet demand at any point in time. You are billed for the total number of compute units across all machines."})]}),(0,v.BX)(b.G,{css:Z.l0.colWithGap(16),children:[(0,v.tZ)(le,{machineConfiguration:null==o?void 0:o.machineConfiguration,disabled:g}),(0,v.tZ)(lC,{maxMachineInstances:null==o?void 0:o.maxMachineInstances,disabled:g,onError:e.onError})]}),(0,v.BX)(b.G,{css:[Z.l0.colWithGap(8),Z.l0.pt(8)],children:[(0,v.tZ)(e0.zx,{colorway:"primary",text:l?"Approve and configure build settings":"Approve and update",iconRight:(0,v.tZ)(tb.Z,{}),onClick:m,loading:h}),(0,v.BX)(I.xv,{color:"dimmest",children:["Your deployed app will utilize any available monthly free allotment before charging for additional resource usage."," ",(0,v.tZ)("a",{href:ig.TT.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})]})]})})]})},lT=(0,B.X)({deployOptionsWithCurrentBuild:[Z.l0.p(16),Z.l0.pt(12),Z.l0.borderRadius(),Z.l0.border({color:Z.TV.outlineDimmest})],back:[Z.l0.pb(8),Z.l0.flex.growAndShrink(1)],subViewOuter:[Z.l0.rowWithGap(12)],subView:[Z.l0.pb(12),Z.l0.flex.growAndShrink(1),Z.l0.colWithGap(12)],deploymentInfoWrapper:[Z.l0.rowWithGap(12),{':has( + [data-history-timeline-items="1"])':{"[data-timeline-line]":{display:"none"}}}],deploymentInfo:[Z.l0.pb(16),Z.l0.flex.growAndShrink(1),Z.l0.colWithGap(12)]}),lR=function(e){var t=e.view,n=e.onLifecycleCommand,r=e.onViewAction,i=e.onError,o=e.openFile,a=(0,C.kW)(),l=(0,C.hn)(),c=(0,C.$y)(),s=(0,C.pn)(),u=(0,C.XZ)(),d=(0,C.Qk)(),f=(0,ed.sG)(),h=void 0!==c,p=(0,t0.Z)(),g=(0,C.l9)(p),y=null==c?void 0:c.provider,w=h&&c.machineConfiguration?{configurationId:c.machineConfiguration.id,configurationLabel:c.machineConfiguration.label,configurationSlug:c.machineConfiguration.slug,maxInstances:null==c?void 0:c.maxMachineInstances}:void 0,Z=(0,iO.Z)("deployments-pane","deployments-mobile-download"),S=Z.shouldDisplay,k=Z.dismiss,E=Z.register;(0,x.useEffect)(function(){E()},[E]);var T=(null==c?void 0:c.status)&&c.status===el.Fe.Success&&S&&!f,R=(0,m._)((0,x.useState)(!1),2),D=R[0],I=R[1],B=(0,m._)((0,x.useState)(null),2),G=B[0],A=B[1],P=(0,m._)((0,x.useState)(null),2),L=P[0],N=P[1];(0,x.useEffect)(function(){J({context:$.k.Deployment})},[]),(0,x.useEffect)(function(){(a===_.z.Preparing||a===_.z.Deploying)&&(t===$.k.DeploymentInProgress||G||r({type:$.a.ChangeView,payload:{view:$.k.DeploymentInProgress}}))},[a,t,r,G]);var O=(0,x.useRef)(void 0);(0,x.useEffect)(function(){O.current=null==s?void 0:s.id},[null==s?void 0:s.id]);var U=(null==c?void 0:c.status)===el.Fe.Success,X=(null==c?void 0:c.id)===O.current;(0,x.useEffect)(function(){U&&X&&r({type:$.a.ChangeView,payload:{view:$.k.Deployment}})},[U,X,r]);var F=null==s?void 0:s.status,W=(0,x.useRef)(F);(0,x.useEffect)(function(){F&&(W.current=F)},[F]);var H=(0,C.v5)(),V=(0,C.t7)();if(G)return(0,v.tZ)(r7,{build:G,fs:u,openFile:o,onBack:function(){A(null)},onViewAppLogs:function(){r({type:$.a.ChangeView,payload:{view:$.k.Logs}})}});if(L===el.r4.CloudRun)return(0,v.tZ)(lE,{onError:i,onConfirm:function(e){r({type:$.a.SendDeploymentLifecycleCommand,payload:{command:el.Qc.UpdateMachineConfiguration,machineConfigurationId:e.configurationId,maxMachineInstances:e.maxInstances}})},onBack:function(){return N(null)}});if(L===el.r4.Gce)return(0,v.tZ)(ib,{isTeamRepl:g,initialMachineConfiguration:w,onConfirm:function(e){r({type:$.a.SendDeploymentLifecycleCommand,payload:{command:el.Qc.UpdateMachineConfiguration,machineConfigurationId:e.configurationId,maxMachineInstances:e.maxInstances}})},onBack:function(){return N(null)},onError:i});var z=!h||!l||!(a===_.z.Ready||a===_.z.Suspended||a===_.z.ProcessingLifecycleCommand);return(0,v.tZ)(v.HY,{children:(0,v.tZ)(M,{children:(0,v.BX)(b.G,{children:[(0,v.BX)(b.G,{css:lT.subViewOuter,children:[h?(0,v.tZ)(n7,{type:"future"}):null,(0,v.BX)(b.G,{css:lT.subView,children:[z?null:(0,v.tZ)(ai,{dotReplit:H,fs:u,secrets:d,ports:V,deploymentId:l,onError:i,expanded:D,setExpanded:I,shouldShowMobileTour:null!=T&&T,onDismissMobileTour:k,openNetworkingPane:function(){r({type:$.a.OpenPane,payload:{type:"networking"}})},onResume:function(){n({command:el.Qc.Resume})}}),t===$.k.DeploymentInProgress?(0,v.tZ)(rG,{openFile:o,viewBuildLogsOnLoad:!h,onViewLogs:function(){r({type:$.a.ChangeView,payload:{view:$.k.Logs}})},onCanceled:function(){r({type:$.a.ChangeView,payload:{view:$.k.Deployment}}),i("Build cancelled")},onError:i}):null]})]}),h?(0,v.BX)(v.HY,{children:[(0,v.tZ)(r4,{type:"failureQueue",onViewBuildLogs:A}),(0,v.BX)(b.G,{css:lT.deploymentInfoWrapper,children:[(0,v.tZ)(n7,{type:"present"}),(0,v.tZ)(b.G,{css:lT.deploymentInfo,children:(0,v.tZ)(iN,{provider:y,machine:w,onViewBuildLogs:A,onManageClick:function(){if(y===el.r4.CloudRun||y===el.r4.Gce){N(y);return}y===el.r4.Static&&r({type:$.a.ChangeView,payload:{view:$.k.Settings}})},onViewAction:r})})]}),(0,v.tZ)(r4,{onViewBuildLogs:A})]}):null]})})})},lD=n(25012),lI=n(68081),lB=n(24336),lG=n(12113),lA=n(28341),lP=n(18471),lL=n(81836),lN=n(43983),lO=n(54556),lU=n(42182),lM=n(96955),lX=n(97906);function lF(){var e=(0,K._)(["\n  fragment DeploymentsNewDeploymentRepl on Repl {\n    id\n    slug\n    owner {\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n  }\n"]);return lF=function(){return e},e}function lW(){var e=(0,K._)(["\n  query DeploymentsNewDeployment($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentsNewDeploymentRepl\n      }\n    }\n  }\n  ","\n"]);return lW=function(){return e},e}var lH={},lV=(0,Q.Ps)(lF()),lz=(0,Q.Ps)(lW(),lV);function lj(){var e=(0,K._)(["\n  query DeploymentsPaneIntro($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        owner {\n          __typename\n          ... on Team {\n            id\n          }\n        }\n        ...DeploymentsNewDeploymentRepl\n      }\n    }\n  }\n  ","\n"]);return lj=function(){return e},e}var lq={},lJ=(0,Q.Ps)(lj(),lV);function lY(e){var t=(0,A._)({},lq,e);return ee.a(lJ,t)}var l$=(0,B.X)({type:[Z.l0.borderRadius(8),Z.l0.p(8)],hostingTierFlow:Z.l0.colWithGap(8),manageReserved:Z.l0.colWithGap(16),manageReservedHeader:[Z.l0.rowWithGap(8),Z.l0.align.center],scheduledJobsConfiguration:[Z.l0.colWithGap(4)]});function lK(e){var t,n,r,i=e.replId,o=e.initialState,a=e.fs,l=e.secrets,c=e.dotReplit,s=e.ports,u=e.onBack,d=e.onDeploy,f=e.onError,h=e.openNetworkingPane,p=(0,m._)((0,x.useState)(o),2),g=p[0],y=p[1],w=(t=(0,A._)({},lH,{variables:{replId:i},onError:function(e){return f(e.message)}}),ee.a(lz,t)),Z=w.data,C=w.loading,_=(null==Z?void 0:Z.repl.__typename)==="Repl"?Z.repl:null,S=_?(0,ou.Jw)({replSlug:_.slug,username:null===(n=_.owner)||void 0===n?void 0:n.username}):"",k=(0,tQ.P5)({controlName:rr.dA,logFlagToAnalytics:!1});if(C)return(0,v.tZ)(W,{loading:!0});if(!_)return null;var E=(null==_?void 0:null===(r=_.owner)||void 0===r?void 0:r.__typename)==="Team";return g.type===el.r4.Static?(0,v.BX)(v.HY,{children:[(0,v.tZ)(M,{maxWidth:!0,children:(0,v.tZ)(X.hU,{alt:"Back",tooltipBehavior:"hidden",onClick:function(){return u()},children:(0,v.tZ)(F.Z,{})})}),(0,v.tZ)(M,{maxWidth:!0,children:(0,v.tZ)(t6.Tg,{css:l$.type,elevated:!0,children:(0,v.tZ)(iL,{label:"Type",fullWidth:!0,children:(0,v.tZ)(iP,{name:iw[g.type]})})})}),(0,v.tZ)(M,{maxWidth:!0,children:(0,v.tZ)(o9,{initialSubdomain:S,deploymentId:null,provider:g.type,onError:f,onCancel:function(){return u()},onDeploy:d,dotReplit:c,fs:a,ports:s,secrets:l,openNetworkingPane:h})})]}):g.type===el.r4.Gce?(0,v.BX)(v.HY,{children:[(0,v.tZ)(ib,{isTeamRepl:E,onBack:u,onError:f,onChange:function(e){y({type:el.r4.Gce,machine:e})}}),(0,v.tZ)(M,{maxWidth:!0,children:(0,v.tZ)(o9,{initialSubdomain:S,deploymentId:null,provider:g.type,machine:g.machine,onError:f,onCancel:u,onDeploy:d,fs:a,secrets:l,dotReplit:c,ports:s,openNetworkingPane:h})}),(0,v.tZ)(M,{maxWidth:!0,children:(0,v.BX)(I.xv,{color:"dimmest",children:["Your deployed app will incur charges for any resource usage."," ",(0,v.tZ)("a",{href:ig.TT.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})})]}):g.type===el.r4.Cron?k?(0,v.BX)(v.HY,{children:[(0,v.tZ)(M,{maxWidth:!0,children:(0,v.tZ)(j,{onBack:u})}),(0,v.tZ)(M,{maxWidth:!0,children:(0,v.BX)(b.G,{css:l$.scheduledJobsConfiguration,children:[(0,v.tZ)(I.xv,{variant:"subheadBig",children:"Scheduled Job configuration"}),(0,v.tZ)(I.xv,{variant:"small",color:"dimmer",children:"Scheduled deployments run at a specified time and frequency configured by you. During executions they spin up an on demand machine to run your code. You are billed for the total number of compute units used across all machines plus $0.10/month per scheduled deployment scheduler."})]})}),(0,v.tZ)(M,{maxWidth:!0,children:(0,v.tZ)(iu,{id:"machineConfiguration",title:"Machine Configuration",information:"Your machine configuration determines the number of vCPUs and memory available to your app.",detail:"More machine configurations coming soon.",children:(0,v.tZ)(t6.Tg,{css:l$.type,elevated:!0,children:(0,v.tZ)(iP,{name:"1 vCPU / 2 GiB RAM",sku:"$0.000028/sec"})})})}),(0,v.tZ)(M,{maxWidth:!0,children:(0,v.tZ)(o9,{initialSubdomain:S,deploymentId:null,provider:g.type,onError:f,onCancel:function(){return u()},onDeploy:d,fs:a,secrets:l,dotReplit:c,ports:s,openNetworkingPane:h})}),(0,v.tZ)(M,{maxWidth:!0,children:(0,v.BX)(I.xv,{color:"dimmest",children:["Your deployed app will incur charges for any resource usage."," ",(0,v.tZ)("a",{href:ig.TT.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})})]}):null:g.machine?(0,v.BX)(v.HY,{children:[(0,v.tZ)(M,{maxWidth:!0,children:(0,v.tZ)(X.hU,{alt:"Back",tooltipBehavior:"hidden",onClick:function(){return y({type:el.r4.CloudRun,machine:null})},children:(0,v.tZ)(F.Z,{})})}),(0,v.tZ)(M,{maxWidth:!0,children:(0,v.tZ)(t6.Tg,{css:l$.type,elevated:!0,children:(0,v.tZ)(iL,{label:"Type",fullWidth:!0,children:(0,v.tZ)(iP,{name:iw[g.type],sku:"".concat(g.machine.configurationLabel," / ").concat(g.machine.maxInstances," Max"),canManage:!0,onManageClick:function(){y({type:el.r4.CloudRun,machine:null})}})})})}),(0,v.tZ)(M,{maxWidth:!0,children:(0,v.tZ)(o9,{initialSubdomain:S,deploymentId:null,provider:g.type,machine:g.machine,onError:f,onCancel:function(){return y({type:el.r4.CloudRun})},onDeploy:d,fs:a,secrets:l,dotReplit:c,ports:s,openNetworkingPane:h})})]}):(0,v.tZ)(M,{maxWidth:!0,children:(0,v.tZ)(lE,{onBack:u,onError:f,onConfirm:function(e){y({type:el.r4.CloudRun,machine:e})}})})}var lQ=Z.nC.min(600),l0={order:"--provider-order"},l1={order:"var(".concat(l0.order,")")},l2=(0,nn.iv)([Z.l0.width("100%"),Z.l0.maxWidth(340),(0,T._)({},lQ,{order:l1.order})]),l4=(0,nn.iv)([Z.l0.reset.button,Z.l0.overflow("hidden"),Z.l0.position.relative,Z.l0.focusRing,Z.l0.borderRadius(),Z.l0.width("100%")]),l3=(0,B.X)({self:[l2,{"&::after":{content:"none"}}],selfLoading:[l2,na.p.foregroundPulse(),Z.l0.border({color:Z.TV.backgroundHighest})],button:[l4,eI.gU.filledAndOutlined,Z.l0.border({color:Z.TV.outlineDimmer})],buttonActive:[l4,Z.l0.cursor.pointer,Z.l0.backgroundColor.accentPrimaryDimmest,Z.l0.border({color:Z.TV.accentPrimaryStronger})],content:[Z.l0.p(8),Z.l0.colWithGap(4),(0,T._)({},lQ,Z.l0.py(12))],contentRecommended:[Z.l0.p(8),Z.l0.colWithGap(4),(0,T._)({},lQ,{paddingTop:12,paddingBottom:20})],recommended:[Z.l0.py(4),Z.l0.backgroundColor.backgroundHighest],recommendedActive:[Z.l0.py(4),Z.l0.backgroundColor.accentPrimaryDimmer],icon:[Z.l0.display.none,Z.l0.color.foregroundDimmer,Z.l0.center,(0,T._)({},lQ,Z.l0.display.flex)],iconActive:[Z.l0.display.none,Z.l0.color.accentPrimaryStrongest,Z.l0.center,(0,T._)({},lQ,Z.l0.display.flex)],tiersTitle:[Z.l0.rowWithGap(8),Z.l0.align.center],title:[Z.l0.rowWithGap(4),Z.l0.center]});function l8(e){var t,n=e.loading,r=e.active,i=e.provider,o=e.onClick,a=e.title,l=e.description,c=e.recommended,s=e.index,u=(t={},(0,T._)(t,el.r4.CloudRun,(0,v.tZ)(lL.Z,{size:32})),(0,T._)(t,el.r4.Gce,(0,v.tZ)(lw.Z,{size:32})),(0,T._)(t,el.r4.Static,(0,v.tZ)(lO.Z,{size:32})),(0,T._)(t,el.r4.Cron,(0,v.tZ)(t2.Z,{size:32})),t)[i];return(0,v.tZ)("span",{css:n?l3.selfLoading:l3.self,children:(0,v.BX)("button",{css:r?l3.buttonActive:l3.button,onClick:function(){return o(i)},disabled:n,style:(0,T._)({},l0.order,s),children:[c?(0,v.tZ)(b.G,{css:r?l3.recommendedActive:l3.recommended,children:(0,v.tZ)(I.xv,{variant:"small",children:"Recommended"})}):null,(0,v.BX)(b.G,{css:c?l3.contentRecommended:l3.content,children:[(0,v.tZ)(b.G,{css:r?l3.iconActive:l3.icon,children:u}),(0,v.BX)(b.G,{children:[(0,v.tZ)(b.G,{css:l3.title,children:(0,v.tZ)(I.xv,{variant:"subheadDefault",multiline:!1,children:a})}),(0,v.tZ)(I.xv,{multiline:!1,variant:"small",children:l})]})]})]})})}var l6=(0,B.X)({container:[Z.l0.colWithGap(12),Z.l0.maxWidth(420),{marginLeft:"auto",marginRight:"auto"}],item:[Z.l0.align.center,{display:"grid",gridTemplateColumns:"56px auto",gap:20}],text:[Z.l0.flex.growAndShrink(1),Z.l0.textAlign.left]});function l5(e){var t=e.header,n=e.info;return(0,v.BX)(b.G,{css:l6.container,children:[(0,v.tZ)(I.xv,{variant:"subheadDefault",children:t}),n.map(function(e,t){return(0,v.BX)(b.G,{css:l6.item,children:[e.icon,(0,v.tZ)(I.xv,{css:l6.text,children:e.text})]},t)})]})}var l7=[el.r4.Gce,el.r4.CloudRun,el.r4.Static,el.r4.Cron],l9=(0,B.X)({container:[Z.l0.colWithGap(32),Z.l0.py(32),Z.l0.textAlign.center,N.Qw.maxWidth],title:[Z.l0.colWithGap(4),Z.l0.width("100%"),Z.l0.maxWidth(400),{marginLeft:"auto",marginRight:"auto"}],body:Z.l0.colWithGap(16),providers:[Z.l0.flex.column,Z.l0.align.center,(0,T._)({gap:8},lQ,[Z.l0.flex.row,Z.l0.align.center,{gap:12}])],providerDetails:Z.l0.colWithGap(16),cta:[Z.l0.width("100%"),Z.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],ctaGroup:Z.l0.colWithGap(8),secondaryCta:[Z.l0.width("100%"),Z.l0.maxWidth(320)],ctaContainer:[Z.l0.colWithGap(8),Z.l0.align.center],ctaStatusBanner:[Z.l0.textAlign.left],oldCta:[Z.l0.px(8),Z.l0.colWithGap(16)],payment:[Z.l0.p(16),Z.l0.borderRadius("container"),Z.l0.textAlign.left,Z.l0.shadow(2)],budgetContainer:[Z.l0.colWithGap(8),Z.l0.border(),Z.l0.borderRadius(),Z.l0.p(8)],disabledBanner:[Z.l0.py(6),{alignSelf:"center"}]}),ce=function(e){var t,n,r,i,o,a=e.replId,l=e.onError,c=e.onDeploy,s=e.onViewAction,u=e.initialSelectedProvider,d=(0,C.XZ)(),f=(0,C.Qk)(),h=(0,C.v5)(),p=(0,C.t7)(),g=(0,m._)((0,x.useState)(void 0),2),y=g[0],w=g[1],_=(0,m._)((0,x.useState)(void 0),2),k=_[0],R=_[1],D=(0,m._)((0,x.useState)(!1),2),B=D[0],G=D[1],A=(0,m._)((0,x.useState)(!1),2),P=A[0],L=A[1],N=(0,m._)((0,x.useState)(null!=u?u:null),2),O=N[0],U=N[1],X=(0,C.BU)(),F=X.getDeployabilityByProvider,W=X.refetch;(0,x.useEffect)(function(){J({context:"intro"})},[]);var H=lY({variables:{id:a},onError:function(e){return l(e.message)}}),V=H.loading,z=H.data,j=(0,m._)((0,x.useState)(!1),2),q=j[0],Y=j[1],K=(null==z?void 0:z.repl.__typename)==="Repl"&&(null===(n=z.repl.owner)||void 0===n?void 0:n.__typename)==="Team",Q=(null==z?void 0:z.repl.__typename)==="Repl"&&(null==z?void 0:null===(r=z.repl.owner)||void 0===r?void 0:r.id)&&(0,lX.xm)(null==z?void 0:null===(i=z.repl.owner)||void 0===i?void 0:i.id),ee=(0,tQ.P5)({controlName:rr.dA,logFlagToAnalytics:!1});(0,x.useEffect)(function(){(0,S._)(function(){var e,t;return(0,E.Jh)(this,function(n){switch(n.label){case 0:if(V)return[2];if(K&&!Q)return w(el.r4.Gce),R(el.r4.Gce),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,(0,i1.$f)(h)];case 2:if(null===(e=n.sent()).appType)return w(el.r4.CloudRun),R(el.r4.CloudRun),[2];if((t=(0,tH.oU)(e.appType))===el.r4.Goval||t===el.r4.Extension)return l("Did not recognize template deployment provider"),[2];return w(t),R(t),[3,4];case 3:return n.sent(),l("Something went wrong"),[3,4];case 4:return[2]}})})()},[l,h,V,K,Q]);var et=(0,x.useCallback)((0,S._)(function(){return(0,E.Jh)(this,function(e){switch(e.label){case 0:return Y(!0),[4,W()];case 1:return e.sent(),Y(!1),[2]}})}),[W,Y]);if(O)return(0,v.tZ)(lK,{replId:a,initialState:O?{type:O}:{type:el.r4.Gce,didCheckout:!0},fs:d,secrets:f,dotReplit:h,ports:p,onDeploy:c,onBack:function(){return U(null)},onError:l,openNetworkingPane:function(){s({type:$.a.OpenPane,payload:{type:"networking"}})}});var en=F(y),er=en.deploy,ei=en.isIncludedInSubscription,eo=er.isAuthorized,ea=er.code,ec=er.message,es=V||q||void 0===y,eu=(o={title:"Deploy to production",subtitle:"Deploy a stable, public version of your project, unaffected by the changes you make in the workspace."},(0,T._)(o,el.r4.Gce,{display:!0,title:"Reserved VM",subtitle:"Always On Servers",header:"Reserved VMs are for long-running jobs and apps.",info:[{text:"Reserved VMs ensure high uptime, minimizing disruptions for apps requiring persistent session data.",icon:(0,v.tZ)(lB.lV,{})},{text:(t=(0,m._)((0,rr.gr)("e2-micro"),1)[0],"Reserved VMs are billed hourly starting at $".concat(t,"/hour.")),icon:(0,v.tZ)(lB.G8,{})},{text:"Suitable for bots, stateful APIs, webscraping, and long-running jobs.",icon:(0,v.tZ)(lB.KU,{})}]}),(0,T._)(o,el.r4.CloudRun,{display:!0,title:"Autoscale",subtitle:"Meet demand exactly",header:"Autoscale is the best choice for most projects",info:[{text:"Automatically scales from zero to any level of demand, making it inexpensive for most apps and effortless when you go viral.",icon:(0,v.tZ)(lB.Qm,{})},{text:"Compute units are billed at $".concat(ad.m0," per compute unit."),icon:(0,v.tZ)(lB.fG,{})},{text:"Suitable for web apps and stateless APIs.",icon:(0,v.tZ)(lB.KU,{})}]}),(0,T._)(o,el.r4.Static,{display:!0,title:"Static",subtitle:"Easy client-side apps",header:"Share client-side apps fast",info:[{text:"You only pay for outbound data transfer (included in Replit plans). $0.10/GiB otherwise.",icon:(0,v.tZ)(lB.Lv,{})},{text:"Fast deploy times allow you to move quickly on your production sites.",icon:(0,v.tZ)(lB.lt,{})},{text:"Suitable for HTML sites and static content.",icon:(0,v.tZ)(lB.KU,{})}]}),(0,T._)(o,el.r4.Cron,{display:ee,title:"Scheduled",subtitle:"Time-based job scheduler",header:"The easiest way to schedule for your apps to run",info:[{text:"Scheduled deployments run at a specified time and frequency configured by you.",icon:(0,v.tZ)(lB.lt,{})},{text:"Usage-based pricing. Each scheduled job is billed at $0.00000125 per compute unit + $0.10 per month for the scheduler.",icon:(0,v.tZ)(lB.fG,{})},{text:"Suitable for internal tools, one-off tasks, and Cron jobs.",icon:(0,v.tZ)(lB.KU,{})}]}),o);return(0,v.BX)(M,{children:[(0,v.tZ)(iW.u,{isOpen:P,onRequestClose:function(){return L(!1)},children:(0,v.tZ)(lI.Z,{onRequestClose:function(){return L(!1)}})}),(0,v.BX)(b.G,{css:l9.container,children:[(0,v.BX)(b.G,{css:l9.title,children:[(0,v.tZ)(I.xv,{variant:"subheadBig",children:eu.title}),(0,v.tZ)(I.xv,{color:"dimmer",children:eu.subtitle}),(0,v.tZ)(I.xv,{css:Z.l0.textAlign.center,children:(0,v.tZ)("a",{href:"https://docs.replit.com/category/replit-deployments",target:"_blank",rel:"noopener",children:"Learn more"})})]}),(0,v.BX)(b.G,{css:l9.body,children:[(0,v.tZ)(b.G,{css:l9.providers,children:l7.map(function(e,t){if(!eu[e].display)return null;var n=eu[e],r=n.title,i=n.subtitle;return(0,v.tZ)(l8,{provider:e,loading:es,active:y===e,onClick:function(e){w(e),G(!1)},title:r,description:i,recommended:k===e,index:e===k&&0===t?1.5:e===k&&2===t?.5:t},e)})}),(0,v.BX)(b.G,{css:l9.ctaGroup,children:[(0,v.tZ)(ct,{loading:es,isDeployable:eo,isDeployableCode:ea,isDeployableExplanation:ec,isIncludedInSubscription:ei,handleOnProviderContinue:function(){y&&U(y)},refetchDeployabilityQueryData:et,setShowPaymentMethodForm:function(){return G(!0)},showPaymentMethodForm:B,setShowSupportForm:function(){return L(!0)}}),B?(0,v.tZ)(t6.Tg,{elevated:!0,css:l9.payment,children:(0,v.tZ)(lA.q,{onSuccess:(0,S._)(function(){return(0,E.Jh)(this,function(e){switch(e.label){case 0:return G(!1),[4,et()];case 1:return e.sent(),[2]}})}),context:"workspace_hosting_pane"})}):null]})]}),(0,v.tZ)(b.G,{css:l9.providerDetails,children:y?(0,v.tZ)(l5,{header:eu[y].header,info:eu[y].info}):null})]})]})};function ct(e){var t=e.isDeployable,n=e.isDeployableCode,r=e.isDeployableExplanation,i=e.isIncludedInSubscription,o=e.loading,a=e.handleOnProviderContinue,l=e.refetchDeployabilityQueryData,c=e.setShowPaymentMethodForm,s=e.showPaymentMethodForm,u=e.setShowSupportForm,d=(0,ed.sG)();if(!t&&d)return(0,v.tZ)(D.E,{text:r,colorway:"grey",css:l9.disabledBanner});if(i)return(0,v.BX)(v.HY,{children:[(0,v.tZ)(e0.zx,{colorway:"primary",onClick:a,text:"Included in your subscription",loading:o,css:l9.cta}),(0,v.tZ)(I.xv,{color:"dimmer",children:r})]});switch(n){case el.RO.RequiresActiveSubscription:case el.RO.RequiresPaymentMethodOrSubscription:return(0,v.BX)(b.G,{css:l9.ctaContainer,children:[(0,v.tZ)(lU.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to deploy",css:l9.cta,colorway:"primary",variant:"default",disabled:s,onPlanCheckoutComplete:l}),(0,v.tZ)(e0.zx,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:l9.cta,disabled:s,loading:o,iconLeft:(0,v.tZ)(lN.Z,{}),onClick:function(){return c()}})]});case el.RO.RequiresSmsVerification:return(0,v.tZ)(lD.Z,{context:el.jv.Deployments,onSuccess:l});case el.RO.RequiresPaymentMethod:return(0,v.tZ)(e0.zx,{colorway:"primary",text:"Add a payment method",css:l9.cta,disabled:s,loading:o,iconLeft:(0,v.tZ)(lN.Z,{}),onClick:function(){return c()}});case el.RO.RequiresUnbanning:return(0,v.tZ)(lP.u,{text:"Your account currently has restrictions on deploying. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",iconLeft:(0,v.tZ)(G.Z,{}),css:l9.ctaStatusBanner,onClick:function(){return u()}});case el.RO.InsufficientBudget:return(0,v.BX)(v.HY,{children:[(0,v.tZ)(D.E,{text:"You've reached your monthly usage budget. Increase your budget to continue deploying.",colorway:"warning",icon:(0,v.tZ)(G.Z,{}),css:l9.ctaStatusBanner}),(0,v.tZ)(b.G,{css:l9.budgetContainer,children:(0,v.tZ)(lG.L,{onUpdateSuccess:l})})]});case el.RO.FeatureUnsupportedForReplitTeams:case el.RO.FeatureUnsupportedForTeamsEdu:case el.RO.FeatureUnsupportedForTeamsFree:case el.RO.FeatureUnsupportedForTeamsPro:case el.RO.InsufficientPermissions:case el.RO.InsufficientQuota:case el.RO.RequiresEmailVerification:return(0,v.tZ)(D.E,{text:r,colorway:"grey",css:l9.disabledBanner});case el.RO.Authorized:case el.RO.AuthorizedQuota:return(0,v.tZ)(e0.zx,{colorway:"primary",onClick:a,text:"Set up your deployment",loading:o,css:l9.cta});default:(0,lM.Z)(n)}}var cn=[{label:"one hour",key:1},{label:"six hours",key:6},{label:"one day",key:24},{label:"three days",key:72},{label:"one week",key:168}],cr={label:"one hour",key:1},ci=Z.nC.min(600),co=(0,B.X)({fullWidth:(0,T._)({},ci,{gridColumn:"span 2"})}),ca=(0,B.X)({container:(0,T._)({display:"grid",gap:32},ci,{gridTemplateColumns:"repeat(2, minmax(0, 1fr))"}),fullWidth:co.fullWidth,map:[co.fullWidth],pies:[co.fullWidth,Z.l0.flex.column,(0,T._)({gap:32},Z.nC.min(480),[Z.l0.flex.row,{" > *":{flex:1}}])],timeSpanSelector:[Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.color.foregroundDefault]}),cl=function(e){var t=e.replId,n=(0,m._)((0,x.useState)(cr),2),r=n[0],i=r.key,o=r.label,a=n[1],l=(0,nK.Z)(new Date,i),c=(0,nr.F)().values,s=cs(l,cc(i));return(0,v.tZ)(M,{children:(0,v.BX)(b.G,{css:ca.container,children:[(0,v.tZ)(b.G,{css:ca.fullWidth,children:(0,v.tZ)(n$.ZE,{items:cn,label:"Past ".concat(o),icon:(0,v.tZ)(td.Z,{}),onAction:function(e){var t,n="string"==typeof e?parseInt(e,10):e;a(null!==(t=cn.find(function(e){return e.key===n}))&&void 0!==t?t:cr)},cssProps:[Z.l0.width("fit-content")],children:cn.map(function(e){return(0,v.tZ)(n$.ck,{children:(0,v.tZ)(b.G,{css:ca.timeSpanSelector,children:(0,v.tZ)(I.xv,{multiline:!1,children:e.label})})},e.key)})})}),(0,v.tZ)(b.G,{css:ca.fullWidth,children:(0,v.tZ)(nO,{replId:t,title:"CPU Utilization",metric:nE.RH.CPU,start:s,hours:i,colorFn:function(){return c.global.redDefault}})}),(0,v.tZ)(b.G,{css:ca.fullWidth,children:(0,v.tZ)(nO,{replId:t,title:"Memory Utilization",metric:nE.RH.Memory,start:s,hours:i,colorFn:function(){return c.global.redDefault}})})]})})},cc=function(e){return e<=1?6e5:e<=6?18e5:e<=24?72e5:216e5},cs=function(e,t){var n=e.getTime()%t;return new Date(e.getTime()-n)},cu=(0,B.X)({sectionContainer:[Z.l0.colWithGap(8)]});function cd(e){var t=e.shouldShowDownloadQR,n=(0,m._)((0,x.useState)(t),2),r=n[0],i=n[1];return(0,v.tZ)(b.G,{children:(0,v.BX)(b.G,{css:cu.sectionContainer,children:[(0,v.tZ)(e0.zx,{iconLeft:(0,v.tZ)(iH.Z,{}),text:"Install the Replit App",onClick:function(){return i(function(e){var t=!e;return t&&(0,q.j)(q.U3.DEPLOYMENT_MOBILE_DOWNLOAD_QR_VIEWED),t})}}),r?(0,v.tZ)(iF,{color:Z.TV.foregroundDefault}):null]})})}var cf=n(83003),ch=n(92804),cp=n(80888),cm=n(54368),cv=n(55821),cg=(0,B.X)({container:Z.l0.colWithGap(24),pauseAndResumeButtons:Z.l0.colWithGap(8),sectionContainer:Z.l0.colWithGap(8),sectionButton:[Z.l0.color.accentNegativeStrongest,Z.l0.transition.snappy,(0,T._)({backgroundColor:eI.vb.interactiveBackground,borderColor:"transparent"},Z.wl.hover,{borderColor:"transparent"})]}),cy=function(e){var t=e.hideResume,n=e.hideSuspend,r=e.onLifecycleCommand,i=e.authorizations,o=(0,C.kW)(),a=(0,C.$y)(),l=(0,m._)((0,x.useState)(!1),2),c=l[0],s=l[1],u=i.editDeploymentStatus,d=u.isAuthorized,f=u.message,h=(null==a?void 0:a.status)===el.Fe.Resuming,p=(null==a?void 0:a.status)===el.Fe.Suspending,g=(null==a?void 0:a.status)===el.Fe.Suspended,y=h||p||o===_.z.ProcessingLifecycleCommand||o===_.z.Deploying,Z=!(void 0!==t&&t)&&(g||h)&&(null==a?void 0:a.hasImageTag),S=!(void 0!==n&&n)&&!g&&!h&&(p||o===_.z.Deploying||o===_.z.Ready)&&(null==a?void 0:a.hasImageTag);return(0,v.tZ)(v.HY,{children:(0,v.BX)(b.G,{css:cg.container,children:[Z||S?(0,v.BX)(b.G,{css:cg.pauseAndResumeButtons,children:[Z?(0,v.BX)(v.HY,{children:[(0,v.tZ)(eW.u,{tooltip:f,isDisabled:d,children:(0,v.tZ)(e0.zx,{text:h?"Resuming":"Resume",onClick:function(){return r({command:el.Qc.Resume})},loading:h,disabled:y||!d,iconLeft:h?(0,v.tZ)(w.Z,{}):(0,v.tZ)(cp.Z,{})})}),(0,v.tZ)(I.xv,{color:"dimmer",children:"Your app will become accessible to users again"})]}):null,S?(0,v.BX)(v.HY,{children:[(0,v.tZ)(eW.u,{tooltip:f,isDisabled:d,children:(0,v.tZ)(e0.zx,{text:"Pause",onClick:function(){return r({command:el.Qc.Suspend})},loading:p,disabled:y||!d,iconLeft:p?(0,v.tZ)(w.Z,{}):(0,v.tZ)(ch.Z,{})})}),(0,v.tZ)(I.xv,{color:"dimmer",children:"Your deployment billing will continue, but all users will lose access to your app"})]}):null]}):null,(0,v.tZ)(cb,{setIsDestroying:s,onLifecycleCommand:r,authorizations:i}),(0,v.tZ)(cw,{isDestroying:c,setIsDestroying:s,onLifecycleCommand:r,authorizations:i})]})})};function cb(e){var t=e.setIsDestroying,n=e.onLifecycleCommand,r=e.authorizations,i=(0,m._)((0,x.useState)(!1),2),o=i[0],a=i[1],l=r.deleteDeployment,c=l.isAuthorized,s=l.message;return(0,v.BX)(v.HY,{children:[(0,v.BX)(b.G,{css:cg.sectionContainer,children:[(0,v.tZ)(eW.u,{tooltip:s,isDisabled:c,children:(0,v.tZ)(e0.zx,{text:"Change deployment type",onClick:function(){return a(!0)},disabled:!c,iconLeft:(0,v.tZ)(cm.Z,{})})}),(0,v.tZ)(I.xv,{color:"dimmer",children:"To change your deployment type, you will need to shut down and create a new deployment."})]}),(0,v.tZ)(iW.u,{isOpen:o,onRequestClose:function(){return a(!1)},children:(0,v.tZ)(cf.Z,{confirmLabel:"Yes, delete my deployment",title:"Change Deployment Type",isDestructive:!0,onConfirm:function(){t(!0),a(!1),n({command:el.Qc.Destroy})},onCancel:function(){return a(!1)},children:"To change your deployment type, you will need to shut down and create a new deployment. This will destroy your deployment and any associated deployment tiers, saved replit.app domain and deployment history. You can always come back and redeploy your repl again."})})]})}function cw(e){var t=e.isDestroying,n=e.setIsDestroying,r=e.onLifecycleCommand,i=e.authorizations,o=(0,m._)((0,x.useState)(!1),2),a=o[0],l=o[1],c=i.deleteDeployment,s=c.isAuthorized,u=c.message;return(0,v.BX)(v.HY,{children:[(0,v.BX)(b.G,{css:cg.sectionContainer,children:[(0,v.tZ)(eW.u,{tooltip:u,isDisabled:s,children:(0,v.tZ)(e0.zx,{text:"Shut down",colorway:"negative",variant:"outlined",css:cg.sectionButton,onClick:function(){return l(!0)},disabled:t||!s,iconLeft:(0,v.tZ)(cv.Z,{})})}),(0,v.tZ)(I.xv,{color:"dimmer",children:"Your deployment billing will be canceled, and your deployed app will cease to exist"})]}),(0,v.tZ)(iW.u,{isOpen:a,onRequestClose:function(){return l(!1)},children:(0,v.tZ)(cf.Z,{confirmLabel:"Yes, delete my deployment",title:"Delete Deployment",isDestructive:!0,onConfirm:function(){n(!0),l(!1),r({command:el.Qc.Destroy})},onCancel:function(){return l(!1)},children:"This will destroy your deployment and any associated deployment tiers, saved replit.app domain and deployment history. You can always come back and redeploy your repl again."})})]})}var cZ=n(87409);function cx(){var e=(0,K._)(["\n  query AutoscaleUsageSectionCurrentUser {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          startDate\n          endDate\n          resources {\n            autoscaleComputeUnits {\n              usage\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return cx=function(){return e},e}var cC={},c_=(0,Q.Ps)(cx()),cS=n(76575),ck=(0,B.X)({root:[Z.l0.colWithGap(4),Z.l0.p(8),Z.l0.pt(12),Z.l0.borderRadius(8),{outline:"1px solid transparent"}],outerRow:[Z.l0.rowWithGap(12),Z.l0.align.center],typeCol:[Z.l0.colWithGap(4),Z.l0.flex.growAndShrink(1)],configAndUsageRow:[Z.l0.rowWithGap(12),Z.l0.align.center,Z.l0.flex.growAndShrink(1)],usageRow:[Z.l0.rowWithGap(8)]}),cE=function(e){var t,n=e.machineConfiguration,r=(t=(0,A._)({},cC,void 0),ee.a(c_,t)).data,i=(0,x.useMemo)(function(){return function(e){var t,n,r=e.data;if((null==r?void 0:null===(t=r.currentUser)||void 0===t?void 0:t.__typename)==="CurrentUser"){var i=null==r?void 0:null===(n=r.currentUser)||void 0===n?void 0:n.usageInterval;if(i&&"UsageInterval"===i.__typename){var o=i.resources.autoscaleComputeUnits.usage,a=(0,cZ.fZ)(o,{resourceUsageType:"ComputeUnits"}),l=new Date(i.endDate).toLocaleString("default",{month:"short",day:"numeric"});return{description:"".concat(a," used this billing period"),renewalInfo:"Renews ".concat(l," ")}}}}({data:r})},[r]),o=(0,x.useMemo)(function(){if(null!=n)return"Autoscale (".concat(n.label,")")},[n]);if(!o||!i)return(0,v.tZ)(b.G,{css:[Z.l0.justify.center,Z.l0.flex.row],children:(0,v.tZ)(w.Z,{})});var a=e.authorizations.editDeploymentTier,l=a.isAuthorized,c=a.message;return(0,v.BX)(t6.Tg,{elevated:!0,css:ck.root,children:[(0,v.BX)(b.G,{css:ck.outerRow,children:[(0,v.tZ)(b.G,{css:ck.typeCol,children:o?(0,v.tZ)(I.xv,{multiline:!1,children:o}):null}),(0,v.tZ)(X.hU,{alt:l?"Edit":c,disabled:!l,onClick:e.onEditAutoscaleMachineConfiguration,children:(0,v.tZ)(cS.Z,{})})]}),i?(0,v.BX)(v.HY,{children:[(0,v.BX)(b.G,{css:ck.outerRow,children:[(0,v.tZ)(I.xv,{multiline:!1,children:i.description}),(0,v.tZ)(I.xv,{color:"dimmer",multiline:!1,children:i.renewalInfo})]}),(0,v.tZ)(b.G,{css:ck.outerRow,children:(0,v.tZ)(ix(),{legacyBehavior:!0,passHref:!0,href:"/usage",prefetch:!1,children:(0,v.tZ)("a",{role:"button",children:"View account resource limits"})})})]}):null]})},cT=n(75993),cR=n(33298),cD=n(84126),cI=(0,cR.$)(["paddingRight"]),cB=cI.cssVars,cG=cI.styleTokens,cA=(0,B.X)({inputWrapper:[Z.l0.position.relative,Z.l0.flex.growAndShrink(1),{input:[{paddingRight:cG.paddingRight}]}],copyButton:[Z.l0.position.absolute,Z.l0.top("50%"),Z.l0.right(4),{transform:"translateY(-50%)"}]});function cP(e){return(0,v.BX)(b.G,{css:cA.inputWrapper,style:(0,T._)({},cB.paddingRight,e.value?"36px":"8px"),children:[(0,v.tZ)(tf.II,(0,P._)((0,A._)({},e),{onClick:function(e){return e.currentTarget.select()}})),e.value?(0,v.tZ)(X.hU,{css:cA.copyButton,alt:"Copy",tooltipBehavior:"hidden",onClick:function(){return e.value&&(0,cT.Z)(e.value)},children:(0,v.tZ)(cD.Z,{})}):null]})}var cL=(0,B.X)({root:[Z.l0.flex.column,(h={gap:8},(0,T._)(h,Z.nC.min("mobileMax"),[Z.l0.flex.row,{"& > div:nth-of-type(1)":{width:"30%"},"& > div:nth-of-type(2)":{maxWidth:50}}]),(0,T._)(h,"label",[Z.l0.color.foregroundDimmer,{fontSize:Z.TV.fontSizeSmall}]),h)],col:[Z.l0.colWithGap(4),Z.l0.flex.growAndShrink(1)],records:[Z.l0.px(12),Z.l0.pt(8),Z.l0.pb(16),Z.l0.colWithGap(16),Z.l0.borderRadius(12),(0,T._)({},Z.nC.min("mobileMax"),Z.l0.colWithGap(12))],divider:(0,T._)({display:"flex",height:1,backgroundColor:Z.TV.outlineDimmest},Z.nC.min("mobileMax"),Z.l0.display.none)});function cN(e){return(0,v.BX)(b.G,{css:cL.root,children:[(0,v.BX)(b.G,{css:cL.col,children:[(0,v.tZ)(b.G,{tag:"label",children:"Hostname"}),(0,v.tZ)(tf.II,{value:e.hostname,readOnly:!0})]}),(0,v.BX)(b.G,{css:cL.col,children:[(0,v.tZ)(b.G,{tag:"label",children:"Type"}),(0,v.tZ)(tf.II,{value:e.type,readOnly:!0})]}),(0,v.BX)(b.G,{css:cL.col,children:[(0,v.tZ)(b.G,{tag:"label",children:"Record"}),(0,v.tZ)(cP,{value:e.record,readOnly:!0})]})]})}function cO(e){var t="replit-verify=".concat(e.deploymentId);return(0,v.BX)(t6.Tg,{background:"default",css:cL.records,children:[(0,v.tZ)(cN,{hostname:e.hostname,type:"A",record:e.apexProxy}),(0,v.tZ)(b.G,{css:cL.divider}),(0,v.tZ)(cN,{hostname:e.hostname,type:"TXT",record:t})]})}function cU(){var e=(0,K._)(["\n  mutation HostingDeploymentsUnlinkDomain(\n    $input: UnlinkHostingDeploymentDomainInput!\n  ) {\n    unlinkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        id\n        domains {\n          id\n        }\n      }\n    }\n  }\n"]);return cU=function(){return e},e}function cM(){var e=(0,K._)(["\n  mutation HostingDeploymentsVerifyDomain(\n    $input: VerifyHostingDeploymentDomainInput!\n  ) {\n    verifyHostingDeploymentDomain(input: $input) {\n      ... on HostingDeploymentDomain {\n        id\n        state\n      }\n    }\n  }\n"]);return cM=function(){return e},e}var cX={},cF=(0,Q.Ps)(cU()),cW=(0,Q.Ps)(cM()),cH=n(78711);function cV(){var e=(0,K._)(["\n  fragment HostingDeploymentDomainsDomain on HostingDeploymentDomain {\n    id\n    state\n    domain\n  }\n"]);return cV=function(){return e},e}function cz(){var e=(0,K._)(["\n  fragment HostingDeploymentDomainsHostingDeployment on HostingDeployment {\n    id\n    currentBuild {\n      id\n      status\n    }\n    repl {\n      id\n      apexProxy\n    }\n    domains {\n      id\n      ...HostingDeploymentDomainsDomain\n    }\n    legacyReplDomains {\n      id\n      ...HostingDeploymentDomainsDomain\n    }\n  }\n  ","\n"]);return cz=function(){return e},e}function cj(){var e=(0,K._)(["\n  query HostingDeploymentDomains($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...HostingDeploymentDomainsHostingDeployment\n      }\n    }\n  }\n  ","\n"]);return cj=function(){return e},e}function cq(){var e=(0,K._)(["\n  mutation LinkHostingDeploymentDomain(\n    $input: LinkHostingDeploymentDomainInput!\n  ) {\n    linkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        id\n        domains {\n          ...HostingDeploymentDomainsDomain\n        }\n      }\n    }\n  }\n  ","\n"]);return cq=function(){return e},e}var cJ={},cY=(0,Q.Ps)(cV()),c$=(0,Q.Ps)(cz(),cY),cK=(0,Q.Ps)(cj(),c$),cQ=(0,Q.Ps)(cq(),cY),c0="https://docs.replit.com/additional-resources/custom-domains",c1=(0,B.X)({root:[Z.l0.colWithGap(8),Z.l0.borderRadius(8),Z.l0.pl(8),Z.l0.pr(4),Z.l0.height(32),Z.l0.justify.center]}),c2=(0,B.X)({root:c1.root,rootExpanded:[c1.root,Z.l0.height("auto"),Z.l0.pt(4),Z.l0.pb(12),Z.l0.justify.start],domainRow:[Z.l0.reset.button,Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.justify.spaceBetween],iconButtons:[Z.l0.flex.row],expanded:[Z.l0.colWithGap(12),Z.l0.pl(4),Z.l0.pr(8)],domainWrapper:[Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.flex.shrink(1),Z.l0.color.accentPrimaryStronger,{a:Z.l0.hover(Z.l0.color.accentPrimaryStrongest)}],statusDot:[Z.l0.borderRadius("full"),Z.l0.width(6),Z.l0.height(6)],status:[Z.l0.rowWithGap(4),Z.l0.align.center],dnsRecords:[Z.l0.colWithGap(6)],buttons:[Z.l0.flex.column,Z.l0.justify.spaceBetween,(p={gap:8},(0,T._)(p,Z.nC.min("mobileMax"),Z.l0.flex.row),(0,T._)(p,"button",[Z.l0.flex.growAndShrink(1)]),p)],warning:[Z.l0.rowWithGap(6),Z.l0.align.center]}),c4={verified:{color:Z.TV.accentPositiveDefault,text:"Verified"},verifying:{color:Z.TV.orangeDefault,text:"Verifying"},failed:{color:Z.TV.accentNegativeDefault,text:"Failed"}};function c3(e){var t,n,r,i=e.domain,o=e.deploymentId,a=e.apexProxy,l=e.authorizations,c=(0,m._)((0,x.useState)(!1),2),s=c[0],u=c[1],d=(0,m._)((0,x.useState)(!1),2),f=d[0],h=d[1],p=(0,m._)((t=(0,A._)({},cJ,{variables:{id:o},fetchPolicy:"network-only",ssr:!1}),cH.t(cK,t)),2),g=p[0],y=p[1].loading,C=(0,m._)((n=(0,A._)({},cX,void 0),et.D(cF,n)),2),_=C[0],S=C[1].loading,k=(0,m._)((r=(0,A._)({},cX,void 0),et.D(cW,r)),2),E=k[0],T=k[1].loading,R=i.state===el.zt.Failed,D=l.addCustomDomain,B=D.isAuthorized,P=D.message,L=l.deleteCustomDomain,N=L.isAuthorized,O=L.message;return(0,v.BX)(t6.Tg,{elevated:!0,css:s?c2.rootExpanded:c2.root,children:[(0,v.BX)(b.G,{css:c2.domainRow,style:{borderBottomLeftRadius:s?0:void 0,borderBottomRightRadius:s?0:void 0},children:[(0,v.BX)(b.G,{css:c2.domainWrapper,children:[(0,v.tZ)(I.xv,{multiline:!1,children:(0,v.tZ)("a",{target:"_blank",href:"".concat(i.domain.startsWith("http://")||i.domain.startsWith("https://")?"":"https://").concat(i.domain),children:i.domain})}),(0,v.BX)(b.G,{css:c2.status,children:[(0,v.tZ)(b.G,{css:c2.statusDot,style:{backgroundColor:c4[i.state].color}}),(0,v.tZ)(I.xv,{color:"dimmer",variant:"small",children:c4[i.state].text})]})]}),(0,v.BX)(b.G,{css:c2.iconButtons,children:[(0,v.tZ)(eD.m,{textToCopy:i.domain,tooltipSuccessText:"Copy link"}),(0,v.tZ)(eW.u,{tooltip:P,isDisabled:B,children:(0,v.tZ)(X.hU,{alt:"Edit",disabled:!B,tooltipBehavior:"hidden",onClick:function(){h(!1),u(function(e){return!e})},css:Z.l0.color.foregroundDimmer,children:s?(0,v.tZ)(rv.Z,{}):(0,v.tZ)(cS.Z,{})})})]})]}),s?(0,v.tZ)(b.G,{css:c2.expanded,children:f?(0,v.BX)(v.HY,{children:[(0,v.tZ)(I.xv,{children:"Are you sure you want to unlink this domain?"}),(0,v.BX)(b.G,{css:c2.buttons,children:[(0,v.tZ)(e0.zx,{size:"small",variant:"outlined",text:"Cancel",onClick:function(){h(!1)}}),(0,v.tZ)(e0.zx,{size:"small",disabled:S,text:"Yes, unlink "+i.domain,colorway:"negative",onClick:function(){_({variables:{input:{hostingDeploymentDomainId:i.id}}})}})]})]}):(0,v.BX)(v.HY,{children:[(0,v.BX)(b.G,{css:c2.dnsRecords,children:[R?(0,v.BX)(v.HY,{children:[(0,v.BX)(b.G,{css:c2.warning,children:[(0,v.tZ)(G.Z,{}),(0,v.tZ)(I.xv,{children:"DNS Error"})]}),(0,v.BX)(I.xv,{children:["Failed to link domain. Make sure your domain's DNS settings have these records."," ",(0,v.tZ)("a",{target:"_blank",href:c0,children:"Learn more"})]})]}):(0,v.BX)(I.xv,{color:"dimmer",children:["Add these records to your domain's"," ",(0,v.tZ)("strong",{css:Z.l0.color.foregroundDefault,children:"DNS settings"}),". This may take up to 48 hours to fully apply."," ",(0,v.tZ)("a",{target:"_blank",href:c0,children:"Learn more"})]}),(0,v.tZ)(cO,{hostname:i.domain,apexProxy:a,deploymentId:o})]}),(0,v.BX)(b.G,{css:c2.buttons,children:[(0,v.tZ)(e0.zx,{iconLeft:y||T?(0,v.tZ)(w.Z,{}):(0,v.tZ)(ec.Z,{}),size:"small",text:R?"Retry linking":"Check status",onClick:function(){R?E({variables:{input:{hostingDeploymentDomainId:i.id}}}):g()}}),(0,v.tZ)(eW.u,{isDisabled:N,tooltip:O,children:(0,v.tZ)(e0.zx,{iconLeft:(0,v.tZ)(cv.Z,{}),size:"small",disabled:S||!N,text:R?"Remove domain":"Unlink domain",colorway:"negative",onClick:function(){h(!0)}})})]})]})}):null]})}var c8=n(66958);function c6(){var e=(0,K._)(["\n  mutation HostingDeploymentsUnlinkLegacyReplDomain(\n    $input: UnlinkLegacyReplDomainInput!\n  ) {\n    unlinkLegacyReplDomain(input: $input) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            legacyReplDomains {\n              id\n              ...HostingDeploymentDomainsDomain\n            }\n            domains {\n              id\n              ...HostingDeploymentDomainsDomain\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return c6=function(){return e},e}var c5={},c7=(0,Q.Ps)(c6(),cY),c9=n(54615),se=n(32508),st=n.n(se),sn=(0,B.X)({root:[Z.l0.colWithGap(16),Z.l0.p(8),Z.l0.borderRadius(8),Z.l0.border({color:Z.TV.outlineDimmer})],labelRow:[Z.l0.rowWithGap(8),Z.l0.align.center],labelText:[Z.l0.flex.growAndShrink(1)],controls:[Z.l0.rowWithGap(8),Z.l0.justify.spaceBetween,{"& > button":[Z.l0.flex.growAndShrink(1)]}],domainSection:[Z.l0.colWithGap(8)],error:[Z.l0.rowWithGap(4),Z.l0.align.center],recordsSection:[Z.l0.colWithGap(8)],valueRow:[Z.l0.borderRadius(8),Z.l0.pl(8),Z.l0.pr(4),Z.l0.height(32),Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.justify.spaceBetween,{a:Z.l0.hover(Z.l0.color.accentPrimaryStrongest)}]});function sr(e){var t,n=(0,m._)((0,x.useState)(!0),2),r=n[0],i=n[1],o=(0,m._)((0,x.useState)(""),2),a=o[0],l=o[1],c=(0,m._)((0,x.useState)(!1),2),s=c[0],u=c[1],d=(0,m._)((t=(0,A._)({},cJ,{onCompleted:function(){e.onAdd()}}),et.D(cQ,t)),2),f=d[0],h=d[1].loading,p=(0,x.useRef)(null),g=(0,x.useId)(),y=st()(a,{require_valid_protocol:!1})&&a.split(".").length>=2,C=!y||h,_=y?null:"Enter a valid domain",S=h?(0,v.tZ)(w.Z,{}):(0,v.tZ)(tb.Z,{});return r||h||(S=(0,v.tZ)(c8.Z,{})),(0,v.BX)(b.G,{tag:"form",css:sn.root,onSubmit:function(t){if(t.preventDefault(),r){var n;i(!1),null===(n=p.current)||void 0===n||n.focus();return}f({variables:{input:{hostingDeploymentId:e.deploymentId,domain:a}}})},children:[(0,v.BX)(b.G,{css:sn.domainSection,children:[(0,v.BX)(b.G,{tag:"label",htmlFor:g,css:sn.labelRow,children:[y&&!r?(0,v.tZ)(ry.Z,{color:Z.TV.accentPositiveDefault}):null,(0,v.tZ)(I.xv,{color:"dimmer",children:"First, enter your domain"})]}),r?(0,v.tZ)(tf.II,{id:g,autoFocus:!0,placeholder:"example.com",value:a,disabled:h,onChange:function(e){return l(e.currentTarget.value)},onBlur:function(e){return u(!!e.currentTarget.value)}}):(0,v.BX)(t6.Tg,{elevated:!0,css:sn.valueRow,children:[(0,v.tZ)(b.G,{href:"https://"+a,tag:"a",target:"_blank",children:a}),(0,v.tZ)(X.hU,{alt:"Edit",onClick:function(){return i(!0)},children:(0,v.tZ)(cS.Z,{color:Z.TV.foregroundDimmer})})]}),_&&s?(0,v.BX)(b.G,{css:sn.error,children:[(0,v.tZ)(G.Z,{size:12,color:Z.TV.orangeDefault}),(0,v.tZ)(I.xv,{variant:"small",children:_})]}):null]}),!r&&y?(0,v.tZ)(si,{apexProxy:e.apexProxy,domain:a,deploymentId:e.deploymentId}):null,(0,v.BX)(b.G,{css:sn.controls,children:[(0,v.tZ)(e0.zx,{type:"button",text:"Cancel",onClick:e.onCancel}),(0,v.tZ)(e0.zx,{ref:p,iconRight:S,colorway:"primary",type:"submit",disabled:C,text:r?"Next":"Link domain"})]})]})}function si(e){return(0,v.BX)(b.G,{css:sn.recordsSection,children:[(0,v.BX)(b.G,{css:sn.labelRow,children:[(0,v.tZ)(c9.Z,{color:Z.TV.foregroundDimmest}),(0,v.BX)(I.xv,{multiline:!0,css:sn.labelText,children:["Next, add the following records your domain's DNS settings."," ",(0,v.tZ)("a",{target:"_blank",href:c0,children:"Learn more"})]})]}),(0,v.tZ)(cO,{apexProxy:e.apexProxy,hostname:e.domain,deploymentId:e.deploymentId})]})}var so=(0,B.X)({root:[Z.l0.py(12),Z.l0.flex.column,(0,T._)({gap:6},Z.nC.min("mobileMax"),[Z.l0.py(4),Z.l0.flex.row,Z.l0.align.center,{gap:2,button:{border:"none"}}])],domainLink:[Z.l0.flex.growAndShrink(1),Z.l0.flex.row,Z.l0.fontWeight.medium,{a:[Z.l0.truncate,Z.l0.flex.shrink(1)]}],confirm:[Z.l0.p(8),Z.l0.borderRadius(8),Z.l0.colWithGap(8),Z.l0.justify.spaceBetween],confirmButtons:[Z.l0.rowWithGap(8),{button:[Z.l0.flex.growAndShrink(1)]}],unlinkButton:[Z.l0.color.foregroundDimmer,Z.l0.hover(Z.l0.backgroundColor.backgroundHighest)]}),sa=function(e){var t=e.domain;return(0,v.tZ)("a",{target:"_bank",href:"https://"+t,children:t})};function sl(e){var t,n=e.deploymentId,r=e.domain,i=e.apexProxy,o=(0,m._)((t=(0,A._)({},c5,void 0),et.D(c7,t)),2),a=o[0],l=o[1].loading,c=(0,m._)((0,x.useState)(!1),2),s=c[0],u=c[1],d=(0,m._)((0,x.useState)(!1),2),f=d[0],h=d[1];return s?(0,v.BX)(t6.Tg,{elevated:!0,css:so.confirm,children:[(0,v.BX)(I.xv,{children:["Are you sure you want to remove ",(0,v.tZ)(sa,{domain:r.domain}),"?"]}),(0,v.BX)(b.G,{css:so.confirmButtons,children:[(0,v.tZ)(e0.zx,{text:"Cancel",onClick:function(){return u(!1)},size:"small"}),(0,v.tZ)(e0.zx,{size:"small",disabled:l,colorway:"negative",iconLeft:l?(0,v.tZ)(w.Z,{}):(0,v.tZ)(cv.Z,{}),text:"Unlink domain",onClick:function(){return a({variables:{input:{replDomainId:r.id}}})}})]})]}):f?(0,v.BX)(t6.Tg,{elevated:!0,css:so.confirm,children:[(0,v.BX)(b.G,{children:[(0,v.tZ)(I.xv,{variant:"small",color:"dimmer",children:"Transfering"}),(0,v.tZ)(b.G,{css:so.domainLink,children:(0,v.tZ)(sa,{domain:r.domain})})]}),(0,v.tZ)(si,{deploymentId:n,domain:r.domain,apexProxy:i}),(0,v.BX)(b.G,{css:so.confirmButtons,children:[(0,v.tZ)(e0.zx,{text:"Cancel",onClick:function(){return h(!1)},size:"small"}),(0,v.tZ)(e0.zx,{size:"small",disabled:l,colorway:"primary",iconLeft:l?(0,v.tZ)(w.Z,{}):(0,v.tZ)(c8.Z,{}),text:"Complete transfer",onClick:function(){return a({variables:{input:{replDomainId:r.id,transferToHostingDeploymentId:n}}})}})]})]}):(0,v.BX)(b.G,{css:so.root,children:[(0,v.tZ)(b.G,{css:so.domainLink,children:(0,v.tZ)(sa,{domain:r.domain})}),(0,v.tZ)(e0.zx,{size:"small",variant:"outlined",text:"Unlink",onClick:function(){return u(!0)},iconLeft:(0,v.tZ)(cv.Z,{}),css:so.unlinkButton}),(0,v.tZ)(e0.zx,{size:"small",variant:"outlined",disabled:l,iconRight:(0,v.tZ)(tb.Z,{}),colorway:"primary",text:"Transfer to deployment",onClick:function(){return h(!0)}})]})}var sc=(0,B.X)({root:[Z.l0.colWithGap(4),Z.l0.p(12),Z.l0.pb(6),Z.l0.borderRadius(12),Z.l0.backgroundColor.backgroundHigher,Z.l0.border({color:Z.TV.outlineDimmer})],header:[Z.l0.align.center,Z.l0.rowWithGap(8)],list:[{"& > div:not(:first-of-type)":Z.l0.border({color:Z.TV.outlineDimmer,direction:"top"})}]});function ss(e){var t=e.domains,n=e.deploymentId,r=e.apexProxy,i=1===t.length?"domain":"domains";return(0,v.BX)(t6.Tg,{css:sc.root,children:[(0,v.BX)(b.G,{css:Z.l0.colWithGap(4),children:[(0,v.BX)(b.G,{css:sc.header,children:[(0,v.tZ)(G.Z,{color:Z.TV.yellowStronger}),(0,v.BX)(I.xv,{variant:"subheadDefault",children:["Transfer ",i]})]}),(0,v.BX)(I.xv,{color:"dimmer",children:["You have attached ",t.length," custom ",i," to your development Repl. Please transfer ","domain"===i?"it":"them"," to your deployment for the best user experience."]})]}),(0,v.tZ)(b.G,{css:sc.list,children:t.map(function(e){return(0,v.tZ)(sl,{domain:e,deploymentId:n,apexProxy:r},e.id)})})]})}var su=(0,B.X)({root:[Z.l0.colWithGap(8)],error:[Z.l0.center,Z.l0.rowWithGap(8)],loading:[Z.l0.center],empty:[Z.l0.px(16),Z.l0.py(32),Z.l0.borderRadius(8),Z.l0.center,Z.l0.colWithGap(8),{border:"1px dashed",borderColor:Z.TV.outlineDimmer}],primaryDomain:[Z.l0.rowWithGap(4),Z.l0.height(32),Z.l0.justify.spaceBetween,Z.l0.align.center,Z.l0.pl(8),Z.l0.pr(4),Z.l0.borderRadius(8)],primaryDomainLink:[Z.l0.flex.shrink(1),Z.l0.color.accentPrimaryStronger,{a:Z.l0.hover(Z.l0.color.accentPrimaryStrongest)}],icons:[Z.l0.flex.row,Z.l0.align.center],footer:[Z.l0.flex.row]});function sd(e){var t,n,r,i,o=e.deployment,a=e.authorizations,l=(0,m._)((0,x.useState)(!1),2),c=l[0],s=l[1],u=(0,m._)((0,x.useState)(void 0),2),d=u[0],f=u[1],h=(0,tQ.P5)({type:"string",controlName:"flag-fallback-deployments-domain",default:rr.q7});t={variables:{id:o.id},fetchPolicy:"cache-and-network",ssr:!1,pollInterval:d,onCompleted:function(e){var t,n;f((null===(t=e.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"&&(null===(n=e.hostingDeployment.domains)||void 0===n?void 0:n.some(function(e){return e.state===r$.zt.Verifying}))?3e4:void 0)}},n=(0,A._)({},cJ,t),ee.a(cK,n);var p=(null==o?void 0:null===(r=o.domains)||void 0===r?void 0:r.length)?o.domains:null,g=(null==o?void 0:o.currentBuild.status)===el.Fe.Success,y=null==o?void 0:o.repl.apexProxy,w=(0,C.$y)(),_=function(){var e,t,n,r,i,o=(null==w?void 0:null===(e=w.repl.hostingDeployment)||void 0===e?void 0:e.__typename)==="HostingDeployment"?null===(t=w.repl.hostingDeployment)||void 0===t?void 0:t.replitAppSubdomain:void 0;if(!o&&(null==w?void 0:null===(n=w.repl.owner)||void 0===n?void 0:n.username)&&(o="".concat(w.repl.slug,"-").concat(w.repl.owner.username)),o)return"https://".concat(o).concat((null===(i=window)||void 0===i?void 0:null===(r=i.location)||void 0===r?void 0:r.hostname)!=="replit.com"?".staging":"",".").concat(h)}(),S=a.addCustomDomain,k=S.isAuthorized,E=S.message;return(0,v.BX)(b.G,{css:su.root,children:[!c&&(null==o?void 0:null===(i=o.legacyReplDomains)||void 0===i?void 0:i.length)&&y?(0,v.tZ)(ss,{domains:o.legacyReplDomains,deploymentId:o.id,apexProxy:y}):null,(0,v.BX)(t6.Tg,{elevated:!0,css:su.primaryDomain,children:[(0,v.tZ)(I.xv,{multiline:!1,css:su.primaryDomainLink,children:(0,v.tZ)("a",{href:_,target:"_blank",rel:"noreferrer noopener",children:_})}),(0,v.BX)(b.G,{css:su.icons,children:[(0,v.tZ)(eD.m,{textToCopy:null!=_?_:""}),(0,v.tZ)(eW.u,{tooltip:sf,children:(0,v.tZ)(iR.Z,{"aria-label":sf,color:Z.TV.foregroundDimmer,css:Z.l0.m(4)})})]})]}),p&&o?(0,v.tZ)(b.G,{css:Z.l0.colWithGap(8),children:p.map(function(e){return(0,v.tZ)(b.G,{children:(0,v.tZ)(c3,{apexProxy:o.repl.apexProxy,deploymentId:o.id,domain:e,authorizations:a})},e.domain)})}):null,c&&y?(0,v.tZ)(sr,{apexProxy:y,deploymentId:o.id,onAdd:function(){return s(!1)},onCancel:function(){return s(!1)}}):null,g?null:(0,v.tZ)(D.E,{colorway:"warning",icon:(0,v.tZ)(G.Z,{}),text:"You must successfully deploy your project before linking a domain"}),!1===c?(0,v.tZ)(b.G,{css:su.footer,children:(0,v.tZ)(eW.u,{tooltip:E,isDisabled:k,children:(0,v.tZ)(e0.zx,{disabled:!g||!k,iconLeft:(0,v.tZ)(iJ.Z,{}),text:"Link a domain",onClick:function(){return s(!0)},variant:"outlined",size:"small"})})}):null]})}var sf="Your primary domain cannot be changed";function sh(){var e=(0,K._)(["\n  fragment DeploymentSettingsAuthorizations on ReplAuthorizations {\n    addCustomDomain {\n      isAuthorized\n      code\n      message\n    }\n    deleteCustomDomain {\n      isAuthorized\n      code\n      message\n    }\n    deleteDeployment {\n      isAuthorized\n      code\n      message\n    }\n    editDeploymentStatus(provider: $provider) {\n      isAuthorized\n      code\n      message\n    }\n    editDeploymentTier(provider: $provider) {\n      isAuthorized\n      code\n      message\n    }\n  }\n"]);return sh=function(){return e},e}function sp(){var e=(0,K._)(["\n  query HostingDeploymentSettings($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...HostingDeploymentDomainsHostingDeployment\n        currentBuild {\n          id\n          provider\n          machineConfiguration {\n            ...MachineConfiguration\n          }\n          envVars {\n            name\n            value\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return sp=function(){return e},e}function sm(){var e=(0,K._)(["\n  query HostingDeploymentSettingsAuthz(\n    $replId: String!\n    $provider: HostingBuildProvider!\n  ) {\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        authorizations {\n          ...DeploymentSettingsAuthorizations\n        }\n      }\n    }\n  }\n  ","\n"]);return sm=function(){return e},e}var sv={},sg=(0,Q.Ps)(sh()),sy=(0,Q.Ps)(sp(),c$,rX.bN),sb=(0,Q.Ps)(sm(),sg),sw=(0,B.X)({container:[Z.l0.colWithGap(32),N.Qw.maxWidth,Z.l0.pb(16)],usageContainer:Z.l0.colWithGap(16),header:Z.l0.pb(8),paddedHeader:Z.l0.pb(12)}),sZ=function(e){var t=e.deploymentId,n=e.onLifecycleCommand,r=e.onError;return t?(0,v.tZ)(sC,{deploymentId:t,onLifecycleCommand:n,onError:r}):(0,v.tZ)(M,{children:(0,v.tZ)(D.E,{colorway:"warning",icon:(0,v.tZ)(G.Z,{}),text:"Deployment not found"})})},sx={__typename:"ReplAuthorizations",addCustomDomain:{__typename:"ReplAuthorization",isAuthorized:!1,code:el.RO.InsufficientPermissions,message:"Loading"},deleteCustomDomain:{__typename:"ReplAuthorization",isAuthorized:!1,code:el.RO.InsufficientPermissions,message:"Loading"},deleteDeployment:{__typename:"ReplAuthorization",isAuthorized:!1,code:el.RO.InsufficientPermissions,message:"Loading"},editDeploymentStatus:{__typename:"ReplAuthorization",isAuthorized:!1,code:el.RO.InsufficientPermissions,message:"Loading"},editDeploymentTier:{__typename:"ReplAuthorization",isAuthorized:!1,code:el.RO.InsufficientPermissions,message:"Loading"}};function sC(e){var t,n,r,i,o,a,l=(0,ed.sG)(),c=(0,m._)((0,x.useState)(!1),2),s=c[0],u=c[1];(0,x.useEffect)(function(){J({context:$.k.Settings})},[]);var d=(0,m._)((t=(0,A._)({},sv,void 0),cH.t(sb,t)),2),f=d[0],h=d[1],p=h.data,g=h.error,y=(n={variables:{id:e.deploymentId},ssr:!1,fetchPolicy:"cache-and-network",onCompleted:function(e){var t;(null==e?void 0:null===(t=e.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"&&f({variables:{replId:e.hostingDeployment.repl.id,provider:e.hostingDeployment.currentBuild.provider}})}},r=(0,A._)({},sv,n),ee.a(sy,r)),w=y.data,Z=y.loading,C=y.error,_=(null==w?void 0:null===(i=w.hostingDeployment)||void 0===i?void 0:i.__typename)==="HostingDeployment"?w.hostingDeployment:void 0;if(s)return(0,v.tZ)(lE,{onError:e.onError,onConfirm:function(t){e.onLifecycleCommand({command:el.Qc.UpdateMachineConfiguration,machineConfigurationId:t.configurationId,maxMachineInstances:t.maxInstances})},onBack:function(){return u(!1)}});if(C)return(0,v.tZ)(V,{text:C.message});if(Z||!_)return(0,v.tZ)(M,{children:(0,v.tZ)(W,{loading:!0})});var S=_.currentBuild,k=null!==(a=null==S?void 0:S.machineConfiguration)&&void 0!==a?a:void 0,E=(null==p?void 0:null===(o=p.repl)||void 0===o?void 0:o.__typename)==="Repl"?p.repl.authorizations:sx;return(0,v.tZ)(M,{children:(0,v.BX)(b.G,{css:sw.container,children:[g?(0,v.tZ)(D.E,{colorway:"negative",text:g.message}):void 0,S.provider===el.r4.CloudRun?(0,v.BX)(b.G,{children:[(0,v.tZ)(I.xv,{variant:"subheadDefault",css:sw.header,children:"Resource usage"}),(0,v.tZ)(b.G,{css:sw.usageContainer,children:(0,v.tZ)(cE,{machineConfiguration:k,onEditAutoscaleMachineConfiguration:function(){return u(!0)},authorizations:E})})]}):null,S.provider!==el.r4.Cron?(0,v.BX)(b.G,{children:[(0,v.tZ)(I.xv,{variant:"subheadDefault",css:sw.header,children:"Domains"}),(0,v.tZ)(sd,{deployment:_,authorizations:E})]}):null,(0,v.BX)(b.G,{children:[(0,v.tZ)(I.xv,{variant:"subheadDefault",css:sw.paddedHeader,children:"Manage deployment"}),(0,v.tZ)(cy,{onLifecycleCommand:e.onLifecycleCommand,authorizations:E})]}),l?null:(0,v.BX)(b.G,{children:[(0,v.tZ)(I.xv,{variant:"subheadDefault",css:sw.paddedHeader,children:"Deploy on the go"}),(0,v.tZ)(cd,{shouldShowDownloadQR:!1})]})]})})}var s_=n(36855),sS=Z.nC.min(600),sk=(0,nn.iv)([Z.l0.reset.button,Z.l0.focusRing,Z.l0.display.flex,Z.l0.position.relative,Z.l0.borderRadius(),Z.l0.py(8),Z.l0.px(8),Z.l0.rowWithGap(12),Z.l0.align.center,(0,T._)({rowGap:0},sS,[Z.l0.pb(8),Z.l0.pt(12),Z.l0.colWithGap(4)])]),sE=(0,cR.$)(["transformOffset","transformOffsetHover","selectedBorderColor"]),sT=sE.cssVars,sR=sE.styleTokens,sD=(0,B.X)({self:[(0,T._)({flex:1,minWidth:0,"&::after":{content:"none"}},sS,{transform:sR.transformOffset,transition:"transform 120ms ease-in-out"})],selfLoading:[{flex:1,minWidth:0},na.p.foregroundPulse(),Z.l0.border({color:Z.TV.backgroundHighest})],hiddenOnMobile:[Z.l0.display.none,(0,T._)({},sS,Z.l0.display.flex)],button:[sk,eI.gU.filledAndOutlined,Z.l0.border({color:Z.TV.outlineDimmer})],buttonActive:[sk,Z.l0.cursor.pointer,Z.l0.colorMixBg(Z.TV.accentPrimaryDimmest,eI.vb.interactiveBackground),Z.l0.border({color:sR.selectedBorderColor})],recommended:[Z.l0.py(2),Z.l0.mx(8),Z.l0.colorMixBg(Z.TV.accentPrimaryDimmest),Z.l0.color.accentPrimaryStrongest,Z.l0.borderRadius("default","default",0,0),Z.l0.display.none,(0,T._)({},sS,Z.l0.display.flex)],recommendedMobile:[Z.l0.display.flex,Z.l0.color.accentPrimaryStrongest,Z.l0.backgroundColor.accentPrimaryDimmest,Z.l0.py(2),Z.l0.px(6),Z.l0.borderRadius(),(0,T._)({},sS,Z.l0.display.none)],recommendedMobileActive:[Z.l0.display.flex,Z.l0.color.accentPrimaryStrongest,Z.l0.backgroundColor.accentPrimaryDimmer,Z.l0.py(2),Z.l0.px(6),Z.l0.borderRadius(),(0,T._)({},sS,Z.l0.display.none)],icon:[Z.l0.color.foregroundDimmer,Z.l0.center],iconActive:[Z.l0.color.accentPrimaryStrongest,Z.l0.center],tiersTitle:[Z.l0.rowWithGap(8),Z.l0.align.center],title:[Z.l0.fontWeight.medium,Z.l0.textAlign.left,Z.l0.flex.growAndShrink(1)]});function sI(e){var t,n=e.loading,r=e.active,i=e.provider,o=e.onClick,a=e.title,l=e.recommended,c=e.disabled,s=e.style,u=(t={},(0,T._)(t,el.r4.CloudRun,(0,v.tZ)(lL.Z,{size:24})),(0,T._)(t,el.r4.Gce,(0,v.tZ)(lw.Z,{size:24})),(0,T._)(t,el.r4.Static,(0,v.tZ)(lO.Z,{size:24})),(0,T._)(t,el.r4.Cron,(0,v.tZ)(t2.Z,{size:24})),t)[i];return(0,v.BX)(b.G,{css:[n?sD.selfLoading:sD.self,c&&sD.hiddenOnMobile],style:s,children:[(0,v.tZ)(b.G,{css:sD.recommended,style:{visibility:l?"visible":"hidden"},children:(0,v.tZ)(I.xv,{variant:"small",children:"Recommended"})}),(0,v.BX)("button",{css:r?sD.buttonActive:sD.button,onClick:function(){return o(i)},disabled:n||c,children:[(0,v.tZ)(b.G,{css:r?sD.iconActive:sD.icon,children:u}),(0,v.tZ)(I.xv,{css:sD.title,multiline:!1,children:a}),l?(0,v.tZ)(b.G,{css:r?sD.recommendedMobileActive:sD.recommendedMobile,children:"Recommended"}):null]})]})}var sB=[el.r4.Gce,el.r4.CloudRun,el.r4.Static,el.r4.Cron],sG=(0,B.X)({container:[Z.l0.colWithGap(32),Z.l0.py(32),Z.l0.textAlign.center,N.Qw.maxWidth],title:[Z.l0.colWithGap(4),Z.l0.width("100%"),Z.l0.maxWidth(400),{marginLeft:"auto",marginRight:"auto"}],body:Z.l0.colWithGap(24),providers:[Z.l0.flex.column,(0,T._)({gap:4},sS,[Z.l0.flex.row,Z.l0.align.end,{gap:8,"&:hover > div":{transform:sR.transformOffsetHover,transition:"transform 120ms ease-in-out"}}])],hiddenOnMobile:[Z.l0.display.none,(0,T._)({},sS,Z.l0.display.flex)],hiddenOnDesktop:[Z.l0.display.flex,(0,T._)({},sS,Z.l0.display.none)],providerDetails:Z.l0.colWithGap(16),recommendationHeader:[Z.l0.fontWeight.medium,Z.l0.pb(12)],recommendationReasons:[Z.l0.colWithGap(6),Z.l0.border({color:Z.TV.outlineDimmest}),Z.l0.borderRadius(),Z.l0.py(8),Z.l0.px(12),{alignSelf:"center"}],recommendationReasonsUl:[Z.l0.textAlign.left,Z.l0.display.flex,Z.l0.rowWithGap(8),{listStyleType:"disc"}],recommendationReason:[Z.l0.ml(16)],descriptionTableToggle:[Z.l0.color.foregroundDimmer,Z.l0.hover(Z.l0.color.foregroundDefault),{alignSelf:"center"}],descriptionTable:[Z.l0.colWithGap(12),Z.l0.pb(12)],cta:[Z.l0.width("100%"),Z.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],ctaGroup:Z.l0.colWithGap(12),secondaryCta:[Z.l0.width("100%"),Z.l0.maxWidth(320)],ctaContainer:[Z.l0.colWithGap(8),Z.l0.align.center],ctaStatusBanner:[Z.l0.textAlign.left],oldCta:[Z.l0.px(8),Z.l0.colWithGap(16)],payment:[Z.l0.p(16),Z.l0.borderRadius("container"),Z.l0.textAlign.left,Z.l0.shadow(2)],budgetContainer:[Z.l0.colWithGap(8),Z.l0.border(),Z.l0.borderRadius(),Z.l0.p(8)],disabledBanner:[Z.l0.py(6),{alignSelf:"center"}],learnMoreLink:[Z.l0.display.flex,Z.l0.rowWithGap(6),Z.l0.align.center,{alignSelf:"center"},Z.l0.hover(Z.l0.color.accentPrimaryStrongest)]}),sA=function(e){var t,n,r,i,o,a=e.replId,l=e.onError,c=e.onDeploy,s=e.onViewAction,u=e.initialSelectedProvider,d=(0,C.XZ)(),f=(0,C.Qk)(),h=(0,C.v5)(),p=(0,C.t7)(),g=(0,m._)((0,x.useState)(void 0),2),y=g[0],w=g[1],_=(0,m._)((0,x.useState)(void 0),2),k=_[0],R=_[1],D=(0,m._)((0,x.useState)(!1),2),B=D[0],G=D[1],A=(0,m._)((0,x.useState)(!1),2),P=A[0],L=A[1],N=(0,m._)((0,x.useState)(null!=u?u:null),2),O=N[0],U=N[1],X=(0,m._)((0,x.useState)(!1),2),F=X[0],W=X[1],H=(0,C.BU)(),V=H.getDeployabilityByProvider,z=H.refetch;(0,x.useEffect)(function(){J({context:"intro"})},[]);var j=lY({variables:{id:a},onError:function(e){return l(e.message)}}),q=j.loading,Y=j.data,K=(0,m._)((0,x.useState)(!1),2),Q=K[0],ee=K[1],et=(null==Y?void 0:Y.repl.__typename)==="Repl"&&(null===(n=Y.repl.owner)||void 0===n?void 0:n.__typename)==="Team",en=(null==Y?void 0:Y.repl.__typename)==="Repl"&&(null==Y?void 0:null===(r=Y.repl.owner)||void 0===r?void 0:r.id)&&(0,lX.xm)(null==Y?void 0:null===(i=Y.repl.owner)||void 0===i?void 0:i.id),er=(0,tQ.P5)({controlName:rr.dA,logFlagToAnalytics:!1});(0,x.useEffect)(function(){(0,S._)(function(){var e,t;return(0,E.Jh)(this,function(n){switch(n.label){case 0:if(q)return[2];if(et&&!en)return w(el.r4.Gce),R(el.r4.Gce),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,(0,i1.$f)(h)];case 2:if(null===(e=n.sent()).appType)return w(el.r4.CloudRun),R(el.r4.CloudRun),[2];if((t=(0,tH.oU)(e.appType))===el.r4.Goval||t===el.r4.Extension)return l("Did not recognize template deployment provider"),[2];return w(t),R(t),[3,4];case 3:return n.sent(),l("Something went wrong"),[3,4];case 4:return[2]}})})()},[l,h,q,et,en]);var ei=(0,x.useCallback)((0,S._)(function(){return(0,E.Jh)(this,function(e){switch(e.label){case 0:return ee(!0),[4,z()];case 1:return e.sent(),ee(!1),[2]}})}),[z,ee]);if(O)return(0,v.tZ)(lK,{replId:a,initialState:O?{type:O}:{type:el.r4.Gce,didCheckout:!0},fs:d,secrets:f,dotReplit:h,ports:p,onDeploy:c,onBack:function(){return U(null)},onError:l,openNetworkingPane:function(){s({type:$.a.OpenPane,payload:{type:"networking"}})}});var eo=V(y),ea=eo.deploy,ec=eo.isIncludedInSubscription,es=ea.isAuthorized,eu=ea.code,ed=ea.message,ef=q||Q||void 0===y,eh=(o={},(0,T._)(o,el.r4.Gce,{display:!0,title:"Reserved VM",description:"Provides a high-uptime VM; best for apps with known resource needs and persistent session data",billing:(t=(0,m._)((0,rr.gr)("e2-micro"),1)[0],"Billed hourly starting at $".concat(t,"/hour.")),examples:"Web scrapers, stateful APIs, long-running jobs"}),(0,T._)(o,el.r4.CloudRun,{display:!0,title:"Autoscale",description:"Scales resources from zero to any level of traffic; ideal for apps with variable demand",billing:"Usage-based – 700 minutes of machine time will cost $1 to start",examples:"Web apps, stateless APIs"}),(0,T._)(o,el.r4.Static,{display:!0,title:"Static",description:"Serves static content like HTML/CSS; simple and cost-effective for websites that don't require a server",billing:"Free, only pay for outbound data transfer (included in Replit plans). Otherwise, $0.10/GiB",examples:"Statically-generated sites or plain HTML/CSS/JS"}),(0,T._)(o,el.r4.Cron,{display:er,title:"Scheduled",description:"Runs tasks at specified times configured by you; useful for periodic jobs like daily reports",billing:"Usage-based – 595 minutes of machine time will cost $1",examples:"Monitors, Slack reminder bots, periodic scrapers"}),o),ep=(sB.length-1)/2;return(0,v.BX)(M,{children:[(0,v.tZ)(iW.u,{isOpen:P,onRequestClose:function(){return L(!1)},children:(0,v.tZ)(lI.Z,{onRequestClose:function(){return L(!1)}})}),(0,v.BX)(b.G,{css:sG.container,children:[(0,v.tZ)(b.G,{css:sG.title,children:(0,v.tZ)(I.xv,{variant:"subheadBig",children:"Deploy to production"})}),(0,v.BX)(b.G,{css:sG.body,children:[(0,v.tZ)(b.G,{css:sG.providers,children:sB.map(function(e,t){var n,r=-(t-ep);if(!eh[e].display)return null;var i=eh[e].title,o=k===e,a=y===e;return(0,v.BX)(v.HY,{children:[(0,v.tZ)(sI,{provider:e,loading:ef,active:a,onClick:function(e){w(e),G(!1),F||W(!0)},title:i,recommended:o,disabled:!F&&!o,style:(n={},(0,T._)(n,sT.transformOffset,F?0:"translateX(calc(".concat(100*r,"% + ").concat(8*r,"px))")),(0,T._)(n,sT.transformOffsetHover,F?0:a?"translateX(calc(".concat(100*r,"% + ").concat(8*r,"px))"):"translateX(calc(".concat(100*r,"% + ").concat(t<ep?8*r-75:8*r+75,"px)) scale(0.8)")),(0,T._)(n,"zIndex",o?1:void 0),(0,T._)(n,sT.selectedBorderColor,F?Z.TV.accentPrimaryStronger:Z.TV.accentPrimaryDimmest),n)},e),(0,v.tZ)(sU,{info:eh[e],render:y===e})]})})}),k&&!F?(0,v.BX)(b.G,{css:sG.hiddenOnMobile,children:[(0,v.BX)(b.G,{css:sG.recommendationHeader,children:[eh[k].title," is recommended for this template"]}),(0,v.tZ)(sO,{info:eh[k],dim:!0})]}):null,F?(0,v.BX)(b.G,{css:sG.descriptionTable,children:[(0,v.tZ)(sN,{title:"Description",content:sB.map(function(e){return eh[e].description})}),(0,v.tZ)(sN,{title:"Billing",content:sB.map(function(e){return eh[e].billing})}),(0,v.tZ)(sN,{title:"Example apps",content:sB.map(function(e){return eh[e].examples})})]}):null,(0,v.BX)(b.G,{css:sG.ctaGroup,children:[(0,v.tZ)(e0.zx,{variant:"nofill",css:sG.descriptionTableToggle,text:F?"Only show recommended deployment type":"Show all deployment types",onClick:function(){W(function(e){return e&&w(k),!e})}}),(0,v.tZ)(sP,{loading:ef,isDeployable:es,isDeployableCode:eu,isDeployableExplanation:ed,isIncludedInSubscription:ec,handleOnProviderContinue:function(){y&&U(y)},refetchDeployabilityQueryData:ei,setShowPaymentMethodForm:function(){return G(!0)},showPaymentMethodForm:B,setShowSupportForm:function(){return L(!0)}}),B?(0,v.tZ)(t6.Tg,{elevated:!0,css:sG.payment,children:(0,v.tZ)(lA.q,{onSuccess:(0,S._)(function(){return(0,E.Jh)(this,function(e){switch(e.label){case 0:return G(!1),[4,ei()];case 1:return e.sent(),[2]}})}),context:"workspace_hosting_pane"})}):null]})]}),(0,v.BX)("a",{href:"https://docs.replit.com/category/replit-deployments",target:"_blank",rel:"noopener",css:sG.learnMoreLink,children:[(0,v.tZ)(I.xv,{children:"Learn more about Deployments"}),(0,v.tZ)(iT.Z,{})]})]})]})};function sP(e){var t=e.isDeployable,n=e.isDeployableCode,r=e.isDeployableExplanation,i=e.isIncludedInSubscription,o=e.loading,a=e.handleOnProviderContinue,l=e.refetchDeployabilityQueryData,c=e.setShowPaymentMethodForm,s=e.showPaymentMethodForm,u=e.setShowSupportForm,d=(0,ed.sG)();if(!t&&d)return(0,v.tZ)(D.E,{text:r,colorway:"grey",css:sG.disabledBanner});if(i)return(0,v.BX)(v.HY,{children:[(0,v.tZ)(e0.zx,{colorway:"primary",onClick:a,text:"Included in your subscription",loading:o,css:sG.cta}),(0,v.tZ)(I.xv,{color:"dimmer",children:r})]});switch(n){case el.RO.RequiresActiveSubscription:case el.RO.RequiresPaymentMethodOrSubscription:return(0,v.BX)(b.G,{css:sG.ctaContainer,children:[(0,v.tZ)(lU.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to deploy",css:sG.cta,colorway:"primary",variant:"default",disabled:s,onPlanCheckoutComplete:l}),(0,v.tZ)(e0.zx,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:sG.cta,disabled:s,loading:o,iconLeft:(0,v.tZ)(lN.Z,{}),onClick:function(){return c()}})]});case el.RO.RequiresSmsVerification:return(0,v.tZ)(lD.Z,{context:el.jv.Deployments,onSuccess:l});case el.RO.RequiresPaymentMethod:return(0,v.tZ)(e0.zx,{colorway:"primary",text:"Add a payment method",css:sG.cta,disabled:s,loading:o,iconLeft:(0,v.tZ)(lN.Z,{}),onClick:function(){return c()}});case el.RO.RequiresUnbanning:return(0,v.tZ)(lP.u,{text:"Your account currently has restrictions on deploying. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",iconLeft:(0,v.tZ)(G.Z,{}),css:sG.ctaStatusBanner,onClick:function(){return u()}});case el.RO.InsufficientBudget:return(0,v.BX)(v.HY,{children:[(0,v.tZ)(D.E,{text:"You've reached your monthly usage budget. Increase your budget to continue deploying.",colorway:"warning",icon:(0,v.tZ)(G.Z,{}),css:sG.ctaStatusBanner}),(0,v.tZ)(b.G,{css:sG.budgetContainer,children:(0,v.tZ)(lG.L,{onUpdateSuccess:l})})]});case el.RO.FeatureUnsupportedForReplitTeams:case el.RO.FeatureUnsupportedForTeamsEdu:case el.RO.FeatureUnsupportedForTeamsFree:case el.RO.FeatureUnsupportedForTeamsPro:case el.RO.InsufficientPermissions:case el.RO.InsufficientQuota:case el.RO.RequiresEmailVerification:return(0,v.tZ)(D.E,{text:r,colorway:"grey",css:sG.disabledBanner});case el.RO.Authorized:case el.RO.AuthorizedQuota:return(0,v.tZ)(e0.zx,{colorway:"primary",onClick:a,text:"Set up your deployment",loading:o,css:sG.cta});default:(0,lM.Z)(n)}}var sL=(0,B.X)({root:[Z.l0.colWithGap(4),Z.l0.textAlign.left,Z.l0.display.none,(0,T._)({},sS,Z.l0.display.flex)],title:[Z.l0.px(2),Z.l0.fontWeight.medium],content:[Z.l0.rowWithGap(8)],p:[Z.l0.px(2),{flex:1}],hr:[Z.l0.height(1),Z.l0.backgroundColor.outlineDimmest,Z.l0.mx(2)],soloRoot:[Z.l0.display.grid,Z.l0.textAlign.left,Z.l0.pl(4),Z.l0.py(4),(0,T._)({gridTemplateColumns:"auto",columnGap:16},sS,[Z.l0.pl(0),Z.l0.py(0),Z.l0.maxWidth(400),{gridTemplateColumns:"max-content auto",marginInline:"auto"}])],soloTitles:(0,T._)({},sS,Z.l0.textAlign.left),soloDescriptions:Z.l0.pb(8),autosizeContainer:[Z.l0.display.flex,Z.l0.overflow("hidden"),(0,T._)({transition:"height 120ms ease-out"},sS,Z.l0.display.none)]});function sN(e){var t=e.content,n=e.title;return(0,v.BX)(b.G,{css:sL.root,children:[(0,v.tZ)(I.xv,{variant:"small",color:"dimmer",css:sL.title,children:n}),(0,v.tZ)(b.G,{css:sL.hr}),(0,v.tZ)(b.G,{css:sL.content,children:t.map(function(e,t){return(0,v.tZ)(I.xv,{variant:"small",css:sL.p,children:e},t)})})]})}function sO(e){var t=e.info,n=e.dim;return(0,v.BX)(b.G,{css:sL.soloRoot,children:[(0,v.tZ)(I.xv,{color:n?"dimmest":"dimmer",css:sL.soloTitles,children:"Description"}),(0,v.tZ)(I.xv,{color:n?"dimmer":"default",css:sL.soloDescriptions,children:t.description}),(0,v.tZ)(I.xv,{color:n?"dimmest":"dimmer",css:sL.soloTitles,children:"Billing"}),(0,v.tZ)(I.xv,{color:n?"dimmer":"default",css:sL.soloDescriptions,children:t.billing}),(0,v.tZ)(I.xv,{color:n?"dimmest":"dimmer",css:sL.soloTitles,children:"Example apps"}),(0,v.tZ)(I.xv,{color:n?"dimmer":"default",css:sL.soloDescriptions,children:t.examples})]})}function sU(e){var t=e.info,n=e.render,r=e.initialHeight,i=(0,x.useRef)(null),o=(0,x.useRef)(null),a=(0,N.ZP)(o),l=a>0?a:r,c={transition:"200ms ease-in-out",transitionProperty:"height",height:0,visibility:"hidden"},s={entering:{height:l,visibility:"visible"},entered:{height:l,visibility:"visible"},exiting:{height:0,visibility:"visible"},exited:{height:0,visibility:"hidden"}};return(0,v.tZ)(s_.ZP,{nodeRef:i,timeout:200,in:n,children:function(e){return(0,v.tZ)(b.G,{innerRef:i,style:(0,A._)({},c,s[e]),css:sL.autosizeContainer,children:(0,v.tZ)(b.G,{innerRef:o,children:(0,v.tZ)(sO,{info:t})})})}})}var sM=(0,B.X)({root:[{height:"100%"},Z.l0.overflow("hidden"),Z.l0.position.relative],content:[Z.l0.overflow("auto"),Z.l0.flex.growAndShrink(1),Z.l0.position.relative]}),sX=function(e){var t,n=e.onViewUpdate,r=e.onError,i=e.refetch,o=e.openFile,a=e.openPane,l=e.initialView,c=e.error,s=function(e){I({type:$.a.SendDeploymentLifecycleCommand,payload:e})},u=(0,t0.Z)(),d=(0,C.hn)(),f=(0,C.pn)(),h=(0,C.$y)(),p=(0,C.XZ)(),g="string"==typeof d,y=!(void 0!==f)&&!g,w=(0,m._)((0,x.useState)(function(){return f?$.k.DeploymentInProgress:y?$.k.Intro:$.k.Deployment}),2),Z=w[0],_=w[1],T=(0,tQ.P5)({controlName:"flag-supply-eye",logFlagToAnalytics:!1,default:!1}),R=(0,C.mF)(),I=(t=(0,S._)(function(e){var t;return(0,E.Jh)(this,function(o){switch(o.label){case 0:switch(n(),e.type){case $.a.SendDeploymentLifecycleCommand:return[3,1];case $.a.ChangeView:return[3,3];case $.a.OpenPane:return[3,4]}return[3,7];case 1:return[4,R(e.payload)];case 2:if(o.sent(),e.payload.command===el.Qc.Destroy)return _($.k.Intro),i(),[2];return e.payload.command===el.Qc.UpdateMachineConfiguration&&i(),_($.k.Deployment),[3,8];case 3:return _(e.payload.view),[3,8];case 4:if(!("codeEditor"===(t=e.payload).type&&".replit"===t.data.path))return[3,6];return[4,p.stat(".replit")];case 5:if(!o.sent().exists)return r("Could not find .replit configuration file."),[2];o.label=6;case 6:return a(t),[3,8];case 7:return[3,8];case 8:return[2]}})}),function(e){return t.apply(this,arguments)}),B=(0,tQ.P5)({controlName:"flag-depl-intro-simp",default:!1});if(Z===$.k.Intro)return B?(0,v.tZ)(b.G,{css:sM.content,children:(0,v.tZ)(sA,{initialSelectedProvider:l===$.k.ReservedVMTierSelection?el.r4.Gce:void 0,onViewAction:I,onError:r,onDeploy:function(){I({type:$.a.ChangeView,payload:{view:$.k.DeploymentInProgress}})},replId:u})}):(0,v.tZ)(b.G,{css:sM.content,children:(0,v.tZ)(ce,{initialSelectedProvider:l===$.k.ReservedVMTierSelection?el.r4.Gce:void 0,onViewAction:I,onError:r,onDeploy:function(){I({type:$.a.ChangeView,payload:{view:$.k.DeploymentInProgress}})},replId:u})});var A=h?function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return[{view:$.k.Deployment,label:"Overview",icon:(0,v.tZ)(t4.Z,{})}].concat((0,k._)(e===el.r4.Cron?[{view:$.k.Schedule,label:"Schedule",icon:(0,v.tZ)(t2.Z,{})}]:[]),(0,k._)(e!==el.r4.Static?[{view:$.k.Logs,label:"Logs",icon:(0,v.tZ)(eh.Z,{})}]:[]),(0,k._)(e!==el.r4.Cron?[{view:$.k.Analytics,label:"Analytics",icon:(0,v.tZ)(t1.Z,{})}]:[]),(0,k._)(t&&sF(e)?[{view:$.k.ResourceMonitoring,label:"Resources",icon:(0,v.tZ)(t8.Z,{}),beta:!1}]:[]),[{view:$.k.Settings,label:"Settings",icon:(0,v.tZ)(t3.Z,{})}])}(h.provider,T):null;return(0,v.BX)(b.G,{css:sM.root,children:[A?(0,v.tZ)(ne,{onClick:function(e){I({type:$.a.ChangeView,payload:{view:e.view}})},tabs:A,activeView:Z===$.k.DeploymentInProgress?$.k.Deployment:Z}):null,(0,v.BX)(b.G,{css:sM.content,children:[c?(0,v.tZ)(M,{children:(0,v.tZ)(D.E,{colorway:"warning",icon:(0,v.tZ)(G.Z,{}),text:c})}):null,Z===$.k.Analytics?(0,v.tZ)(n8,{replId:u}):null,Z===$.k.Logs?(0,v.tZ)(tP,{replId:u,deploymentId:d,openFile:o}):null,Z===$.k.ResourceMonitoring?(0,v.tZ)(cl,{replId:u}):null,Z===$.k.Settings?(0,v.tZ)(sZ,{onError:r,deploymentId:d,onLifecycleCommand:s}):null,Z===$.k.Deployment||Z===$.k.DeploymentInProgress?(0,v.tZ)(lR,{view:Z,refetch:i,onViewAction:I,onError:r,openFile:o,onLifecycleCommand:s}):null,Z===$.k.Schedule?(0,v.tZ)(tj,{replId:u,deploymentId:d,openFile:o}):null]})]})},sF=function(e){return[el.r4.Gce,el.r4.CloudRun,el.r4.Cron].includes(e)};function sW(e){var t=e.initialView,n=e.onViewUpdate,r=e.openFile,i=e.openPane,o=e.tabsNavRef,a=(0,C.m8)(),l=(0,C.kW)(),c=(0,C.ev)(),s=(0,m._)((0,x.useState)(null),2),u=s[0],d=s[1];return l===_.z.Loading?(0,v.tZ)(b.G,{css:[Z.l0.center,Z.l0.my(32)],children:(0,v.tZ)(w.Z,{size:16})}):(0,v.tZ)(sX,{tabsNavRef:o,initialView:t,onViewUpdate:function(){u&&d(null),n()},onError:d,refetch:a,openFile:r,openPane:i,error:u||c})}var sH=n(58045),sV=n(70016),sz=g.Dy.Object({type:g.Dy.Literal("deployments"),data:g.Dy.Optional(g.Dy.Object({view:g.Dy.Enum($.k)}))}),sj={Content:function(e){var t=e.pane.data,n=e.options.performPaneOperation,r=(0,x.useRef)(function(e){if(e&&"object"==typeof e&&"view"in e&&e.view===$.k.ReservedVMTierSelection)return $.k.ReservedVMTierSelection}(t)),i=(0,x.useCallback)(function(e){return n({operation:"open",secondary:!0,pane:{type:(0,sH.Dp)(e),data:e}})},[n]),o=(0,m._)((0,x.useState)(null),2),a=o[0],l=o[1];return(0,sV.L5)(function(){if(a)return{type:"deployments",getTabs:a.getTabs,setTab:a.setTab}},[a]),(0,v.tZ)(sW,{tabsNavRef:l,initialView:r.current,onViewUpdate:function(){r.current&&(r.current=void 0,n({operation:"replace",pane:{type:"deployments"}}))},openFile:i,openPane:function(e){n({operation:"open",pane:e})}})},Icon:function(e){var t=e.size;return(0,v.tZ)(e6.Pd.Provider,{value:{color:rb.TV.greenStrongest,size:t},children:(0,v.tZ)(t4.Z,{})})},getTitle:function(){return"Deployments"},description:"Deploy a stable, public version of your project, unaffected by the changes you make in the workspace",decode:function(e){return y.B4.Decode(sz,e)}}},69688:function(e,t,n){n.d(t,{J:function(){return c}});var r=n(74044),i=n(99149),o=n(18158),a=r.Dy.Union(Object.values(o.TT).map(function(e){return r.Dy.Literal(e)})),l=r.Dy.Object({type:r.Dy.Literal("docs"),data:r.Dy.Optional(r.Dy.Object({url:r.Dy.Optional(r.Dy.Union([a,r.Dy.Null()]))}))}),c=function(e){return i.B4.Decode(l,e)}},61117:function(e,t,n){n.d(t,{J:function(){return a}});var r=n(74044),i=n(99149),o=r.Dy.Object({type:r.Dy.Literal("preferences")}),a=function(e){return i.B4.Decode(o,e)}},75126:function(e,t,n){n.d(t,{s:function(){return tu},G:function(){return th}});var r,i=n(27387),o=n(66626),a=n(96583),l=n(4216),c=n(74044),s=n(99149),u=n(82230),d=n(94778),f=n(49224),h=n(23936),p=n(55821),m=n(72093),v=n(81199),g=n(37058),y=n(70016),b=n(50959),w=n(42516),Z=n(41733),x=n(30509),C=n(4354),_=n(14872),S=n(55927),k=n(33298),E=n(28659),T=n(38753),R=n(13621),D=n(48058),I=n(45929),B=n(85777),G=n(58045),A=n(81541),P=n(41974),L=n(73210),N=n(32622),O=n(15235),U=n(85763),M=n(8261),X=n(64432),F=n(59947),W=n(43449),H=n(70501),V=n(44610),z=n(98640),j=n(33559),q=n(87128),J=n(70316),Y=n(78890),$=n(57127),K=n(96955),Q=n(9223);function ee(e){return e&&0!==e.length?e[0].toUpperCase()+e.substring(1).toLowerCase():""}var et=(0,f.X)({outputBlockMetadataWrapper:[{containerType:"size"},m.l0.pl(4),m.l0.pr(8),m.l0.rowWithGap(4),m.l0.align.center,m.l0.justify.spaceBetween,m.l0.height(28),m.l0.backgroundColor.backgroundDefault,m.l0.border({direction:"bottom",width:1,style:"solid",color:m.TV.backgroundHigher}),m.l0.position.sticky,m.l0.top(0),m.l0.zIndex(1)],outputBlockMetadataWrapperLeft:[m.l0.rowWithGap(4),m.l0.align.center,m.l0.flex.shrink(1)],outputBlockMetadataWrapperRight:[m.l0.rowWithGap(6),m.l0.align.center],executionPill:[m.l0.flex.shrink(0),m.l0.display.flex,{"@container (max-width: 120px)":[m.l0.display.none]}],lastLineTextWrapper:[m.l0.flex.shrink(1)],lastLineText:[m.l0.display.block,m.l0.maxWidth("100%"),m.l0.overflow("hidden"),m.l0.font.code,m.l0.flex.shrink(1),{textOverflow:"ellipsis",whiteSpace:"nowrap"}],askAIButton:[m.l0.display.flex,m.l0.flex.row,m.l0.align.center,m.l0.m(0),{"@container (max-width: 120px)":[m.l0.display.none]}],aiButtonWithoutPorts:[{"@container (max-width: 320px)":{padding:"0 4px","& > span":[m.l0.display.none]}}],aiButtonWithPorts:[{"@container (max-width: 460px)":{padding:"0 4px","& > span":[m.l0.display.none]}}],dateText:[m.l0.flex.row,{"@container (max-width: 260px)":[m.l0.display.none]}],verticalDivider:[m.l0.mx(6),{width:1,height:28,background:m.TV.backgroundHigher}],portInfoDomain:[m.l0.display.flex,m.l0.flex.row,m.l0.align.center,m.l0.m(0),{"@container (max-width: 400px)":m.l0.display.none}],portInfoPorts:[m.l0.display.flex,m.l0.flex.row,m.l0.align.center,m.l0.m(0),{"@container (max-width: 320px)":m.l0.display.none}],portTooltipHeader:[m.l0.color.foregroundDimmer,m.l0.fontWeight.normal,m.l0.px(2),m.l0.pb(2)],portTooltipColumnLeft:[m.l0.textAlign.right],portTooltipColumnMiddle:[m.l0.textAlign.center,m.l0.px(4)],portInfoText:[m.l0.mr(0)]}),en=[et.askAIButton,et.aiButtonWithoutPorts],er=[et.askAIButton,et.aiButtonWithPorts],ei=(r={},(0,w._)(r,I.kH.DEBUGGER,"debugger"),(0,w._)(r,I.kH.PACKAGER,"packager"),(0,w._)(r,I.kH.UNIT_TEST,"tests"),(0,w._)(r,I.kH.EXECUTION,"run"),(0,w._)(r,I.kH.PORT_INFO,"port"),(0,w._)(r,I.kH.FORMATTER,"formatter"),(0,w._)(r,I.kH.SAVE,"save"),r);function eo(e){var t=e.onClick,n=e.showingPorts;return(0,l.BX)(d.G,{css:n?er:en,children:[(0,l.tZ)(u.xv,{color:"dimmer",children:(0,l.tZ)(O.zx,{size:"small",variant:"underlinedOnHover",iconLeft:(0,l.tZ)(j.Z,{}),text:"Ask AI",onClick:void 0===t?function(){}:t})}),(0,l.tZ)(d.G,{css:et.verticalDivider})]})}function ea(e){var t=e.openedPorts;return(0,l.tZ)(d.G,{children:(0,l.BX)("table",{children:[(0,l.BX)("tr",{children:[(0,l.tZ)("th",{css:et.portTooltipHeader,children:"Internal"}),(0,l.tZ)("th",{}),(0,l.tZ)("th",{css:et.portTooltipHeader,children:"External"})]}),(0,l.tZ)("tbody",{children:t.map(function(e){var t=e.configuration,n=!0,r=null;switch(t.type){case J.DL.FORWARDED:n=!0,r=":".concat(t.externalPort);break;case J.DL.INTERNAL_ONLY:n=!1,r=null;break;case J.DL.NO_MORE_EXTERNAL_PORTS_AVAILABLE:case J.DL.MISCONFIGURED:case J.DL.CONFIG_MISSING:n=!0,r=(0,l.tZ)(q.Z,{})}return(0,l.BX)("tr",{children:[(0,l.BX)("td",{css:et.portTooltipColumnLeft,children:[":",t.localPort]}),(0,l.tZ)("td",{css:et.portTooltipColumnMiddle,children:n?"→":null}),(0,l.tZ)("td",{children:r})]},t.localPort)})})]})})}function el(e){var t=e.openPane,n=e.openedPorts,r=void 0!==n&&n.length>0,i=r?"{...}.replit.dev":"",o=(0,b.useMemo)(function(){return r?1===n.length?":".concat(n[0].configuration.localPort):"".concat(n.length," ").concat((0,N.Z)("port",n.length)):""},[r,n]),a=(0,b.useCallback)(function(){t({type:"webview",data:r?{portType:"local",port:n[0].configuration.localPort}:void 0},!0)},[r,t,n]),c=(0,b.useCallback)(function(){t({type:"networking"},!0)},[t]);return r?(0,l.BX)(l.HY,{children:[(0,l.BX)(d.G,{css:et.portInfoDomain,children:[(0,l.tZ)(u.xv,{color:"dimmer",css:et.portInfoText,children:(0,l.tZ)(X.u,{tooltip:"Open Webview",children:(0,l.tZ)(O.zx,{size:"small",variant:"underlinedOnHover",text:i,onClick:a})})}),(0,l.tZ)(d.G,{css:et.verticalDivider})]}),(0,l.BX)(d.G,{css:et.portInfoPorts,children:[(0,l.tZ)(u.xv,{color:"dimmer",css:et.portInfoText,children:(0,l.tZ)(X.u,{tooltip:(0,l.tZ)(ea,{openedPorts:n}),children:(0,l.tZ)(O.zx,{size:"small",variant:"underlinedOnHover",iconLeft:(0,l.tZ)(V.Z,{color:m.TV.accentPositiveStronger}),text:o,onClick:c})})}),(0,l.tZ)(d.G,{css:et.verticalDivider})]})]}):null}function ec(e){var t=e.isDone,n=e.error,r=e.finishedTooltipText,i=e.executionPillText,o=e.runningTooltipText,a=e.circleColor,c=void 0===a?m.TV.accentPositiveDefault:a,s=e.duration,f=e.time,h=e.openPane,p=e.isCollapsed,v=e.setIsCollapsed,g=e.lastMeaningfullLine,y=e.openedPorts,b=e.onAiChatClick,w=(0,Y.Z)(new Date(f),"HH:mm:ss, MM/dd");return(0,l.BX)(d.G,{css:et.outputBlockMetadataWrapper,onDoubleClick:function(){return v(!p)},children:[(0,l.BX)(d.G,{css:et.outputBlockMetadataWrapperLeft,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,l.tZ)(U.hU,{alt:p?"Expand":"Collapse",onClick:function(){return v(!p)},children:p?(0,l.tZ)(H.Z,{}):(0,l.tZ)(W.Z,{})}),(0,l.tZ)(M.D,{color:"grey",text:ee(i),css:et.executionPill}),(0,l.tZ)(d.G,{css:et.lastLineTextWrapper,children:p?(0,l.tZ)(u.xv,{css:et.lastLineText,variant:"small",children:g}):null})]}),(0,l.BX)(d.G,{css:et.outputBlockMetadataWrapperRight,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,l.tZ)(eo,{showingPorts:!!y&&y.length>0,onClick:b}),(0,l.tZ)(el,{openPane:h,openedPorts:y}),(0,l.BX)(u.xv,{color:"dimmer",variant:"small",css:et.dateText,children:[s?(0,l.tZ)(X.u,{tooltip:"".concat(Math.round(s).toLocaleString(),"ms"),children:s<1e3?"".concat(Math.floor(s),"ms"):s<6e4?"".concat(Math.floor(s/1e3),"s"):"".concat(Math.floor(s/6e4),"m")}):null,s?"".concat("\xa0","on").concat("\xa0"):null,w]}),t?(0,l.tZ)(X.u,{tooltip:r,children:void 0!==n?(0,l.tZ)(q.Z,{}):(0,l.tZ)(F.Z,{})}):(0,l.tZ)(X.u,{tooltip:void 0===o?"Running...":o,children:(0,l.tZ)(z.Z,{color:c})})]})]})}function es(e){var t,n,r=e.isCollapsed,i=e.setIsCollapsed,o=e.openPane,a=e.startTime,c=e.endTime,s=e.localStartTime,u=e.localEndTime,d=e.isDone,f=e.data,h=e.error,p=e.openedPorts,m=e.onAiChatClick,v=ed(!d),g=ef(f.onMessage);a&&c?t=c-a:!d&&s?t=v-s:d&&u&&(t=u-s);var y="Finished";return void 0!==h&&(y=void 0!==h?ee(h):"Finished with error"),(0,l.tZ)(ec,{isDone:d,error:h,finishedTooltipText:y,executionPillText:null!==(n=f.executionMode)&&void 0!==n?n:"unknown",duration:t,time:null!=a?a:s,lastMeaningfullLine:g,openPane:o,isCollapsed:r,setIsCollapsed:i,openedPorts:p,onAiChatClick:m})}function eu(e){var t,n=e.isCollapsed,r=e.setIsCollapsed,i=e.openPane,o=e.localStartTime,a=e.localEndTime,c=e.isDone,s=e.type,d=e.error,f=e.data,h=e.onAiChatClick,p=ed(!c),v=ef(f.onMessage),g=ei[s],y=d?(0,l.BX)(u.xv,{multiline:!0,children:[ee(ei[s])," error",(0,l.tZ)("br",{}),d]}):"Finished",b=m.TV.accentPositiveDefault,w="Running...";if(s===I.kH.DEBUGGER){var Z=f.debugState;b="paused"===Z?m.TV.yellowDefault:m.TV.accentPositiveDefault,w="paused"===Z?"Paused":"Running..."}return a?t=a-o:!c&&o&&(t=p-o),(0,l.tZ)(ec,{isCollapsed:n,setIsCollapsed:r,openPane:i,isDone:c,finishedTooltipText:y,executionPillText:g,duration:t,time:o,circleColor:b,runningTooltipText:w,lastMeaningfullLine:v,error:d,onAiChatClick:h})}function ed(e){var t=(0,o._)((0,b.useState)(function(){return Date.now()}),2),n=t[0],r=t[1];return(0,b.useEffect)(function(){if(e){var t=setInterval(function(){r(Date.now())},100);return function(){clearInterval(t)}}},[e]),n}function ef(e){var t=(0,o._)((0,b.useState)(""),2),n=t[0],r=t[1];return(0,b.useEffect)(function(){return e(function(e){var t,n=null===(t=(0,Q.Z)(e).split("\n").reverse().find(function(e){return e.trim().length>0}))||void 0===t?void 0:t.trim();n&&r(n)})}),n}function eh(e){var t,n,r=e.isCollapsed,i=e.setIsCollapsed,o=e.openPane,a=e.isDone,c=e.type,s=e.data,u=e.error,d=e.localStartTime,f=e.localEndTime,h=e.startTime,p=e.endTime,m=e.openedPorts,v=e.openAIWithMessage,g=(t=s.onMessage,n=(0,b.useRef)(""),(0,b.useEffect)(function(){return t(function(e){n.current=(n.current+e).slice(-1500)})},[t]),n.current),y=function(){g&&(null==v||v((0,$.Rn)(g)))};switch(c){case I.kH.EXECUTION:return(0,l.tZ)(es,{isCollapsed:r,setIsCollapsed:i,openPane:o,isDone:a,type:c,startTime:h,endTime:p,localStartTime:d,localEndTime:f,data:s,error:u,openedPorts:m,onAiChatClick:y});case I.kH.DEBUGGER:case I.kH.PACKAGER:case I.kH.UNIT_TEST:case I.kH.FORMATTER:case I.kH.SAVE:return(0,l.tZ)(eu,{isCollapsed:r,setIsCollapsed:i,openPane:o,isDone:a,type:c,localStartTime:d,localEndTime:f,data:s,error:u,openedPorts:m,onAiChatClick:y});default:(0,K.Z)(c)}}var ep=n(93880),em=n(59500),ev=n(35909),eg=n(85033),ey=n(46026),eb=n(59786),ew=n(36136),eZ={noScroll:!0},ex=(0,f.X)({terminal:{gridRow:1,gridColumn:1,position:"sticky",top:ep.Cn.topOffset,"& .xterm":[m.l0.py(ep.J),m.l0.pl(ep.J),m.l0.height("100%"),m.l0.overflow("hidden")],"& .xterm-viewport":[m.l0.overflow("hidden")],"& .xterm-scroll-area":{height:"0px !important"}},searchWidget:{gridRow:1,gridColumn:1,position:"sticky",top:ep.Cn.topOffset,height:30,margin:"2px 0 0 auto",zIndex:4}});function eC(e){var t=e.onMessage,n=e.onInput,r=e.openFile,i=e.openAIWithMessage,a=e.openSearchAndReplace,c=e.openWebview,s=e.listFiles,u=e.autoFocus,f=e.maxHeight,h=e.onResizeTerminal,p=e.scrollPosition,m=e.scrollParent,v=e.performPaneOperation,g=(0,ep.fB)({maxHeight:f,openFile:r,listFiles:s,openWebview:c,performPaneOperation:v}),y=g.visibleHeight,w=g.visibleLines,Z=g.bufferHeight,x=g.bufferLines,C=g.wrapperResizeRef,_=g.xterm,S=g.xtermRef,k=g.hasScrollback,E=(0,b.useMemo)(function(){return null==_?void 0:_._term},[_]),T=(0,b.useMemo)(function(){var e,t=null==E?void 0:E._core;return null!==(e=null==t?void 0:t._renderService.dimensions.css.cell)&&void 0!==e?e:{width:0,height:0}},[E]),R=(0,o._)((0,b.useState)(!1),2),D=R[0],I=R[1],B=(0,o._)((0,b.useState)(""),2),G=B[0],A=B[1],P=(0,o._)((0,b.useState)(!1),2),L=P[0],N=P[1],O=(0,b.useRef)(null),U=(0,eb.P5)({controlName:"flag-output-userevents",logFlagToAnalytics:!1}),M=(0,ew.K)();(0,b.useEffect)(function(){return function(){null!==O.current&&clearTimeout(O.current)}},[O]),(0,b.useEffect)(function(){if(E){if(p<1||!k){E.scrollToLine(0);return}var e=Z-y,t=x-w;if(e<1){E.scrollToLine(0);return}E.scrollToLine(Math.round(p/e*t))}},[Z,x,k,p,E,y,w]);var X=(0,b.useCallback)(function(){if(E){var e=E.getSelectionPosition();e&&m(e.start.y*T.height-f/2)}},[E,f,m,T.height]);(0,b.useEffect)(function(){if(U)return t(function(e){return M("repl:run:output",{output:e})})},[t,U,M]);var F=(0,em.av)().onContextMenu,W=(0,ev.j)({xterm:_,isOutputsTerminal:!0,openAIWithMessage:i,openShellSearch:function(e){I(!0),A(e)},openSearchAndReplace:a});return(0,l.BX)(ep.VU,{onInput:n,xterm:_,wrapperResizeRef:C,bufferHeight:Z,onMessage:t,onResizeTerminal:h,autoFocus:u,style:{pointerEvents:L?"none":"all"},onWheel:function(){N(!0),O.current&&clearTimeout(O.current),O.current=setTimeout(function(){N(!1)},200)},onKeyDown:function(e){"f"===e.key&&(0,ey.jh)(e)&&(I(!0),e.preventDefault())},children:[D?(0,l.tZ)(d.G,{css:ex.searchWidget,children:(0,l.tZ)(eg.R,{searchValue:G,setSearchValue:A,findPrevious:function(e){(null==_?void 0:_.findPrevious(e,eZ))&&X()},findNext:function(e){(null==_?void 0:_.findNext(e,eZ))&&X()},exit:function(){return I(!1)}})}):null,(0,l.tZ)(ep.UB,{xtermRef:S,visibleHeight:y,maxHeight:f,css:ex.terminal,onContextMenu:function(e){return F(e,{command:W})}})]})}var e_=n(80888),eS=n(70972),ek=n(67242),eE=(0,f.X)({emptyStateWrapper:[m.l0.p(8),m.l0.display.block,{lineHeight:"32px"}],simpleRunButtonWrapper:[m.l0.rowWithGap(6),m.l0.backgroundColor.accentPositiveDimmest,m.l0.color.accentPositiveStrongest,m.l0.align.center,m.l0.borderRadius(8),m.l0.py(2),m.l0.px(6),m.l0.mx(4),m.l0.cursor.pointer,{"&:hover":[m.l0.color.white,m.l0.backgroundColor.accentPositiveDefault]}]}),eT=(0,f.X)({root:[m.l0.p(8),m.l0.colWithGap(8)],header:[m.l0.colWithGap(6),m.l0.align.start],workflows:[m.l0.colWithGap(6)]});function eR(e){var t=e.onClick;return(0,l.tZ)(d.G,{tag:"span",style:{display:"inline-block"},children:(0,l.BX)(d.G,{tag:"button",onClick:t,css:eE.simpleRunButtonWrapper,children:[(0,l.tZ)(e_.Z,{size:12}),(0,l.tZ)(u.xv,{children:"Run"})]})})}function eD(e){var t=e.runner,n=(0,o._)((0,b.useState)(function(){return t.getRunState()}),2),r=n[0],i=n[1],a=function(){var e=t.getRunState();(e===I.Ah.IDLE||e===I.Ah.STOPPING)&&t.run()},c=(0,eb.P5)({controlName:"flag-work-flows"});return((0,b.useEffect)(function(){var e=t.onStateChanged(function(e){i(e)});return function(){return e()}},[t]),r===I.Ah.OFFLINE)?(0,l.tZ)(d.G,{css:eE.emptyStateWrapper,children:"The Repl is booting..."}):r===I.Ah.RUNNING||r===I.Ah.BEFORE_RUN?(0,l.tZ)(d.G,{css:eE.emptyStateWrapper,children:"Running..."}):c?(0,l.BX)(d.G,{css:eT.root,children:[(0,l.tZ)(u.xv,{variant:"small",color:"dimmest",children:"Results of your code will appear here when you run"}),(0,l.tZ)(ek.R,{}),(0,l.BX)(d.G,{css:eT.header,children:[(0,l.tZ)(u.xv,{variant:"small",color:"dimmer",children:"Default"}),(0,l.tZ)(O.zx,{size:"small",text:"Run",iconLeft:(0,l.tZ)(e_.Z,{}),colorway:"positive",onClick:a})]}),(0,l.tZ)(ek.R,{}),(0,l.BX)(d.G,{css:eT.workflows,children:[(0,l.tZ)(u.xv,{variant:"small",color:"dimmer",children:"Workflows"}),(0,l.tZ)(eS.A,{})]})]}):(0,l.BX)(d.G,{css:eE.emptyStateWrapper,children:["Results of your code will appear here when you"," ",(0,l.tZ)(eR,{onClick:a})," the project."]})}var eI=n(57704),eB=n(31417),eG=n(33967),eA=n(66048),eP=n(63284),eL=n(37715),eN=n(38172);function eO(e){var t=e.visualState,n=e.onSetVisualState,r=e.maxHeight,i=(0,o._)((0,b.useState)(t===I.MZ.EXPANDED?0:void 0),2),a=i[0],l=i[1],c=(0,b.useRef)(null),s=(0,o._)((0,b.useState)(t===I.MZ.EXPANDED?"expanded":"collapsed"),2),u=s[0],d=s[1],f=(0,o._)((0,b.useState)(t===I.MZ.COLLAPSED?0:void 0),2),h=f[0],p=f[1],m=(0,b.useCallback)(function(e){e&&l(e.getBoundingClientRect().height)},[]),v=(0,S.Z)(function(e){var t=e.height;"expanded"===u&&l(t)},{type:"debounce",wait:200});(0,b.useEffect)(function(){if(c.current)switch(u){case"start-collapsing":d("is-collapsing");break;case"is-collapsing":p(0);break;case"start-expanding":d("is-expanding");break;case"is-expanding":p(a);break;case"expanded":p(void 0)}},[u,a]);var g="expanded"!==u&&"is-expanding"!==u,y=(0,b.useCallback)(function(e){n(e?I.MZ.COLLAPSED:I.MZ.EXPANDED)},[n]),w=(0,b.useRef)(t);(0,b.useEffect)(function(){w.current===I.MZ.EXPANDED&&t===I.MZ.COLLAPSED&&c.current&&(d("start-collapsing"),p(Math.min(c.current.getBoundingClientRect().height,r)),d("start-collapsing")),w.current===I.MZ.COLLAPSED&&t===I.MZ.EXPANDED&&d("start-expanding"),w.current=t},[r,t]);var Z=(0,b.useCallback)(function(){"is-collapsing"===u&&d("collapsed"),"is-expanding"===u&&d("expanded")},[u]),x=(0,b.useMemo)(function(){return{style:{height:h,transition:"height 120ms ease-out",overflow:"expanded"===u||"start-collapsing"===u?"visible":"hidden"},onTransitionEnd:Z}},[h,u,Z]);return{collapsedStep:u,isCollapsed:g,setIsCollapsed:y,blockWrapperRef:c,blockWrapperProps:x,blockResizeRef:(0,b.useMemo)(function(){return(0,eN.l)(v,m)},[v,m]),measuredBlockHeight:a}}var eU=n(99266),eM=(0,f.X)({terminalLoadingWrapper:[m.l0.p(8)],terminalLoadingLine:[m.l0.borderRadius(2),eU.p.foregroundPulse(),m.l0.height(16),m.l0.mb(4)]});function eX(e){var t=e.targetHeight,n=Math.min(Math.floor((t-8)/20),4),r=(0,b.useMemo)(function(){return Array.from({length:n}).map(function(e,t){return(0,l.tZ)(d.G,{css:eM.terminalLoadingLine,style:{width:100*Math.random()+"%"}},t)})},[n]);return(0,l.tZ)(d.G,{css:eM.terminalLoadingWrapper,style:{height:t+"px"},children:(0,l.tZ)(d.G,{style:{position:"sticky",top:36},children:r})})}var eF=n(18471),eW=n(15434),eH=n(38563),eV=(0,f.X)({button:[m.l0.textAlign.left]}),ez=function(e){var t=e.onClick;return(0,eH.Z)()?(0,l.tZ)(eF.u,{text:"Missing required secrets. Click here to add them.",onClick:t,iconRight:(0,l.tZ)(eW.Z,{}),colorway:"warning",css:eV.button}):null},ej=n(17519),eq=n(91620).lW,eJ="outputs",eY=(0,k.$)(["blockMinHeight","terminalBackgroundColor","previewHeight"]),e$=eY.cssVars,eK=eY.styleTokens,eQ=(0,f.X)({outputBlockMetadataWrapper:[{containerType:"size"},m.l0.pl(4),m.l0.pr(8),m.l0.rowWithGap(4),m.l0.align.center,m.l0.justify.spaceBetween,m.l0.height(28),m.l0.backgroundColor.backgroundDefault,m.l0.border({direction:"bottom",width:1,style:"solid",color:m.TV.backgroundHigher}),m.l0.position.sticky,m.l0.top(0),m.l0.zIndex(1)],outputBlockMetadataWrapperLeft:[m.l0.rowWithGap(4),m.l0.align.center,m.l0.flex.shrink(1)],outputBlockMetadataWrapperRight:[m.l0.rowWithGap(4),m.l0.align.center],taskNamePill:[m.l0.maxWidth(100),m.l0.flex.shrink(0),m.l0.display.flex,{"> span":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},"@container (max-width: 120px)":[m.l0.display.none]}],dateText:[m.l0.flex.row,{"@container (max-width: 460px)":[m.l0.display.none]}],outputBlockClosingBorder:[m.l0.height(1),m.l0.zIndex(1),m.l0.border({direction:"bottom",width:1,style:"solid",color:m.TV.backgroundHigher}),{marginTop:-1}],outputBlockTerminalWrapper:[m.l0.minHeight(eK.blockMinHeight)],terminal:{gridRow:1,gridColumn:1,position:"sticky",top:ep.Cn.topOffset,"& .xterm":[m.l0.py(ep.J),m.l0.pl(ep.J),m.l0.height("100%"),m.l0.overflow("hidden")],"& .xterm-viewport":[m.l0.overflow("hidden")],"& .xterm-scroll-area":{height:"0px !important"}},searchWidget:{gridRow:1,gridColumn:1,position:"sticky",top:ep.Cn.topOffset,height:30,margin:"2px 0 0 auto",zIndex:4},avatarWrapper:[m.l0.flex.growAndShrink(0),m.l0.rowWithGap(4),m.l0.align.center]});function e0(e){return(0,Y.Z)(new Date(e),"HH:mm:ss, MM/dd")}function e1(e){var t=e.isCollapsed,n=e.setIsCollapsed,r=e.taskName,i=e.duration,o=e.isDone,a=e.hasError,c=e.errorMessage,s=e.startTime,f=e.activeUsers,h=e.openPane,p=e.openedPorts,v=e.onAIChatClick,g=e0(s);return(0,l.BX)(d.G,{css:eQ.outputBlockMetadataWrapper,onDoubleClick:function(){return n(!t)},children:[(0,l.BX)(d.G,{css:eQ.outputBlockMetadataWrapperLeft,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,l.tZ)(U.hU,{alt:t?"Expand":"Collapse",onClick:function(){return n(!t)},children:t?(0,l.tZ)(H.Z,{}):(0,l.tZ)(W.Z,{})}),(0,l.tZ)(M.D,{color:"grey",text:r,css:eQ.taskNamePill})]}),(0,l.BX)(d.G,{css:eQ.outputBlockMetadataWrapperRight,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,l.tZ)(eo,{showingPorts:!!p&&p.length>0,onClick:v}),(0,l.tZ)(el,{openPane:h,openedPorts:p}),(0,l.BX)(u.xv,{color:"dimmer",variant:"small",css:eQ.dateText,children:[i?(0,l.tZ)(X.u,{tooltip:"".concat(Math.round(i).toLocaleString(),"ms"),children:i<1e3?"".concat(Math.floor(i),"ms"):i<6e4?"".concat(Math.floor(i/1e3),"s"):"".concat(Math.floor(i/6e4),"m")}):null,i?"".concat("\xa0","on").concat("\xa0"):null,g]}),f.length>0?(0,l.tZ)(d.G,{css:eQ.avatarWrapper,children:f.map(function(e){return(0,l.tZ)(eP.Z,{user:e,size:16},e.id)})}):null,o?(0,l.tZ)(X.u,{tooltip:a?"Error".concat(c?": ".concat(c):""):"Finished",children:a?(0,l.tZ)(q.Z,{}):(0,l.tZ)(F.Z,{})}):(0,l.tZ)(X.u,{tooltip:"Running...",children:(0,l.tZ)(z.Z,{color:m.TV.accentPositiveDefault})})]})]})}var e2={noScroll:!0};function e4(e){var t=e.taskIdx,n=e.runId,r=e.connectToTask,c=e.disconnectFromTask,s=e.maxHeight,u=e.scrollParent,f=e.scrollPosition,h=e.openPane,p=e.openAIWithMessage,m=(0,ep.fB)({maxHeight:s,openFile:function(){},listFiles:function(){return Promise.resolve({error:null,files:[]})},openWebview:function(){}}),v=m.visibleHeight,g=m.visibleLines,y=m.bufferHeight,w=m.bufferLines,Z=m.wrapperResizeRef,x=m.hasScrollback,C=m.xterm,_=m.xtermRef,S=(0,b.useMemo)(function(){return null==C?void 0:C._term},[C]),k=(0,b.useMemo)(function(){var e,t=null==S?void 0:S._core;return null!==(e=null==t?void 0:t._renderService.dimensions.css.cell)&&void 0!==e?e:{width:0,height:0}},[S]),E=(0,b.useRef)(!1),T=(0,o._)((0,b.useState)(null),2),R=T[0],D=T[1],I=(0,b.useRef)(null),B=(0,o._)((0,b.useState)(!1),2),G=B[0],A=B[1],P=(0,b.useRef)(null);(0,b.useEffect)(function(){return function(){null!==P.current&&clearTimeout(P.current)}},[P]),(0,b.useEffect)(function(){if(S){if(f<1||!x){S.scrollToLine(0);return}var e=y-v,t=w-g;if(e<1){S.scrollToLine(0);return}S.scrollToLine(Math.round(f/e*t))}},[y,w,x,f,S,v,g]),(0,b.useEffect)(function(){function e(){return(e=(0,i._)(function(){var e,t,n,i,l,c,s,u,d,f,h;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(E.current||!C||!R)return[2];return[4,r()];case 1:n=(t=o._.apply(void 0,[a.sent(),2]))[0],i=t[1],E.current=!0,I.current=n,null===(e=I.current)||void 0===e||e.push({$kind:"resize",size:C.getSize()}),l=!1,c=!1,a.label=2;case 2:a.trys.push([2,7,8,13]),u=(0,eB._)(i),a.label=3;case 3:return[4,u.next()];case 4:if(!(l=!(d=a.sent()).done))return[3,6];if(!(f=d.value).ok){if("UNEXPECTED_DISCONNECT"===f.payload.code||"NO_MATCHING_TASK_STATE"===f.payload.code)return[3,6];throw Error("[".concat(f.payload.code,"] ").concat(f.payload.message))}"output"===f.payload.$kind&&R(f.payload.chunk),a.label=5;case 5:return l=!1,[3,3];case 6:return[3,13];case 7:return h=a.sent(),c=!0,s=h,[3,13];case 8:if(a.trys.push([8,,11,12]),!(l&&null!=u.return))return[3,10];return[4,u.return()];case 9:a.sent(),a.label=10;case 10:return[3,12];case 11:if(c)throw s;return[7];case 12:return[7];case 13:return[2]}})})).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){E.current=!1}},[r,n,t,R,C]),(0,b.useEffect)(function(){return function(){c()}},[c]);var L=(0,b.useCallback)(function(e){return D(function(){return e}),function(){}},[]),N=(0,o._)((0,b.useState)(!1),2),O=N[0],U=N[1],M=(0,o._)((0,b.useState)(""),2),X=M[0],F=M[1],W=(0,b.useCallback)(function(e){h({type:"searchReplace",data:{initialQuery:e}},!0)},[h]),H=(0,em.av)().onContextMenu,V=(0,ev.j)({xterm:C,isOutputsTerminal:!0,openAIWithMessage:p,openShellSearch:function(e){U(!0),F(e)},openSearchAndReplace:W}),z=(0,b.useCallback)(function(){if(S){var e=S.getSelectionPosition();e&&u(e.start.y*k.height-s/2)}},[S,s,u,k.height]);return(0,l.BX)(ep.VU,{xterm:C,wrapperResizeRef:Z,bufferHeight:y,onInput:function(e){var t,n=new Uint8Array(eq.from(e));null===(t=I.current)||void 0===t||t.push({$kind:"stdin",stdin:n})},onMessage:L,onResizeTerminal:function(e){var t;null===(t=I.current)||void 0===t||t.push({$kind:"resize",size:e})},onFocus:function(){var e;null===(e=I.current)||void 0===e||e.push({$kind:"focused"})},onBlur:function(){var e;null===(e=I.current)||void 0===e||e.push({$kind:"blurred"})},style:{pointerEvents:G?"none":"all"},onWheel:function(){A(!0),P.current&&clearTimeout(P.current),P.current=setTimeout(function(){A(!1)},200)},onKeyDown:function(e){"f"===e.key&&(0,ey.jh)(e)&&(U(!0),e.preventDefault())},children:[O?(0,l.tZ)(d.G,{css:eQ.searchWidget,children:(0,l.tZ)(eg.R,{searchValue:X,setSearchValue:F,findPrevious:function(e){(null==C?void 0:C.findPrevious(e,e2))&&z()},findNext:function(e){(null==C?void 0:C.findNext(e,e2))&&z()},exit:function(){return U(!1)}})}):null,(0,l.tZ)(ep.UB,{xtermRef:_,visibleHeight:v,maxHeight:s,css:eQ.terminal,onContextMenu:function(e){return H(e,{command:V})}})]})}function e3(e){var t,n,r,i,a,c,s=e.task,u=e.config,d=e.isCollapsed,f=e.setIsCollapsed,h=e.openPane,p=e.openedPorts,m=e.onAIChatClick,v="FINISHED"===s.state||"FAILED"===s.state,g=s.startTime,y=v?s.endTime:void 0,w=(0,eA.aG)(),Z=(0,b.useMemo)(function(){return s.userIds.map(function(e){return w.find(function(t){return t.id===e})}).filter(Boolean)},[s,w]),x=(t=!v,r=(n=(0,o._)((0,b.useState)(function(){return Date.now()}),2))[0],i=n[1],(0,b.useEffect)(function(){if(t){var e=setInterval(function(){i(Date.now())},100);return function(){clearInterval(e)}}},[t]),r);g&&y?c=y-g:v||(c=x-g);var C="shell.exec"===u.task&&"args"in u?u.args:u.task;return(0,l.tZ)(e1,{isCollapsed:d,setIsCollapsed:f,taskName:C,duration:c,isDone:v,hasError:"FAILED"===s.state,errorMessage:"FAILED"===s.state?null===(a=s.result)||void 0===a?void 0:a.message:void 0,startTime:s.startTime,activeUsers:Z,openPane:h,openedPorts:p,onAIChatClick:m})}function e8(e){var t,n,r=e.task,c=e.taskIdx,s=e.runId,u=e.config,f=e.maxHeight,h=e.rootRef,p=e.currentUser,m=e.ports,v=e.openAIWithMessage,g=e.openPane,y=e.onDoExposePort,C=e.onDontExposePort,k=(0,b.useRef)(null),T=(0,o._)((0,b.useState)(!0),2),R=T[0],B=T[1],G=(0,o._)((0,b.useState)(!1),2),P=G[0],N=G[1],O=(0,o._)((0,b.useState)(0),2),U=O[0],M=O[1],X=(0,A.f)(),F=(0,_.Z)(R,P?6e4:500),W=(0,D.r4)(m,void 0!==r.metadata&&"cgroupPath"in r.metadata?null===(t=r.metadata)||void 0===t?void 0:t.cgroupPath:void 0),H=(0,o._)((0,b.useState)(I.MZ.EXPANDED),2),V=eO({maxHeight:f,visualState:H[0],onSetVisualState:H[1]}),z=V.collapsedStep,j=V.isCollapsed,q=V.setIsCollapsed,J=V.blockWrapperRef,Y=V.blockWrapperProps,K=V.blockResizeRef,Q=V.measuredBlockHeight;(0,b.useEffect)(function(){if(h.current){var e,t=h.current,n=function(){var n,r;M(Math.max(0,t.scrollTop-(null!==(r=null===(n=k.current)||void 0===n?void 0:n.offsetTop)&&void 0!==r?r:0))),N(!0),e&&clearTimeout(e),e=setTimeout(function(){N(!1)},500)};return t.addEventListener("scroll",n),function(){clearInterval(e),t.removeEventListener("scroll",n)}}},[h,k]),(0,b.useEffect)(function(){if(k.current&&h.current)return(0,E.j)(k.current,function(){return B(!0),function(){B(!1)}},{root:h.current,threshold:0})},[h,k]);var ee=(0,eL.U)(function(e){return function(){return e.workflows.connectToTask.stream({runId:s,taskIdx:c,userId:p.id,processViewId:eJ})}},[s,c,p]),et=(0,eL.U)(function(e){return function(){return e.workflows.disconnectFromTask.rpc({runId:s,taskIdx:c,userId:p.id,processViewId:eJ})}},[s,c,p]),en=(0,eL.U)(function(e){return(0,i._)(function(){var t,n,r,i,l,u,d,f,h;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,e.workflows.readTaskBuffer.subscribe({runId:s,taskIdx:c})];case 1:t=o._.apply(void 0,[a.sent(),1])[0],n=new Uint8Array([]),r=!1,i=!1,a.label=2;case 2:a.trys.push([2,7,8,13]),u=(0,eB._)(t),a.label=3;case 3:return[4,u.next()];case 4:if(!(r=!(d=a.sent()).done))return[3,6];if(!(f=d.value).ok)throw Error(f.payload.code+": "+f.payload.message);"output"===f.payload.$kind&&(n=eq.concat([n,f.payload.chunk])),"finished"===f.payload.$kind&&v((0,$.Rn)(n.toString())),a.label=5;case 5:return r=!1,[3,3];case 6:return[3,13];case 7:return h=a.sent(),i=!0,l=h,[3,13];case 8:if(a.trys.push([8,,11,12]),!(r&&null!=u.return))return[3,10];return[4,u.return()];case 9:a.sent(),a.label=10;case 10:return[3,12];case 11:if(i)throw l;return[7];case 12:return[7];case 13:return[2]}})})}),er=(0,o._)((0,b.useState)(0),2),ei=er[0],eo=er[1],ea=(0,S.Z)(function(e){var t=e.height;"expanded"===z&&eo(t)},{type:"debounce",wait:200}),el=(0,b.useCallback)(function(){g({type:"networking"},!0)},[g]),ec=(0,b.useCallback)(function(e,t){g({type:"webview",data:{portType:"local",path:e,port:t}},!0)},[g]),es=(0,b.useCallback)(function(){g({type:"envEditor"})},[g]),eu="FINISHED"===r.state||"FAILED"===r.state,ed=!1;return("collapsed"===z?ed=!1:(!eu||F)&&(ed=!0),ee&&et)?(0,l.BX)(d.G,{innerRef:k,children:[(0,l.tZ)(e3,{task:r,config:u,isCollapsed:j,setIsCollapsed:q,openPane:g,openedPorts:W,onAIChatClick:function(){return null==en?void 0:en()}}),(0,l.BX)(d.G,{innerRef:ea,style:{position:"sticky",top:28},children:[(0,l.tZ)(ez,{onClick:es}),(0,l.tZ)(L.ms,{configurations:W.map(function(e){return e.configuration}),openWebview:function(){ec("/",W[0].configuration.localPort)},openNetworkingTool:el,onDontExposePort:function(){1===W.length&&C(W[0].configuration.localPort)},onDoExposePort:function(){1===W.length&&y(W[0].configuration.localPort)}})]}),(0,l.tZ)("div",(0,x._)((0,Z._)({ref:J},Y),{children:(0,l.tZ)(d.G,{css:eQ.outputBlockTerminalWrapper,style:(n={},(0,w._)(n,e$.blockMinHeight,Q+"px"),(0,w._)(n,e$.terminalBackgroundColor,null==X?void 0:X.background),(0,w._)(n,ep.Dq.topOffset,28+ei+"px"),n),children:ed?(0,l.tZ)(d.G,{innerRef:K,children:(0,l.tZ)(e4,{taskIdx:c,runId:s,maxHeight:f-28-ei,scrollParent:function(e){var t,n,r,i=e+(null!==(r=null===(t=k.current)||void 0===t?void 0:t.offsetTop)&&void 0!==r?r:0);null===(n=h.current)||void 0===n||n.scrollTo({top:i})},scrollPosition:U,connectToTask:ee,disconnectFromTask:et,openPane:g,openAIWithMessage:v})}):(0,l.tZ)(eX,{targetHeight:null!=Q?Q:0})})})),(0,l.tZ)(d.G,{css:eQ.outputBlockClosingBorder})]}):null}function e6(e){var t=e.task,n=e.config,r=e.openPane,i=n.args,o=e0(t.startTime),a=(0,b.useCallback)(function(){r({type:"webview",data:{portType:"local",port:i}},!0)},[r,i]);return(0,l.BX)(d.G,{css:eQ.outputBlockMetadataWrapper,children:[(0,l.BX)(d.G,{css:eQ.outputBlockMetadataWrapperLeft,children:[(0,l.tZ)(U.hU,{alt:"Open Webview",onClick:a,children:(0,l.tZ)(ej.Z,{})}),(0,l.tZ)(M.D,{color:"grey",text:":".concat(i),css:eQ.taskNamePill})]}),(0,l.BX)(d.G,{css:eQ.outputBlockMetadataWrapperRight,children:[(0,l.tZ)(u.xv,{color:"dimmer",variant:"small",css:eQ.dateText,children:o}),(0,l.tZ)(X.u,{tooltip:"Finished",children:(0,l.tZ)(F.Z,{})})]})]})}function e5(e){var t=(0,eG.x)();if(!t)return null;var n=e.config.task;switch(n){case"shell.exec":case"dummy.echo":case"dummy.print":case"dummy.sleep":case"dummy.pass":case"dummy.fail":case"packager.installForLanguage":case"packager.installForAll":return(0,l.tZ)(e8,(0,x._)((0,Z._)({},e),{currentUser:t}));case"workspace.openWebview":return(0,l.tZ)(e6,(0,x._)((0,Z._)({},e),{config:e.config}));case"workflow.run":return null;default:(0,K.Z)(n)}}var e7=n(21822),e9=n(44355),te=(0,k.$)(["blockMinHeight","terminalBackgroundColor"]),tt=te.cssVars,tn=te.styleTokens,tr=(0,f.X)({outputsListParent:[m.l0.height("100%"),m.l0.overflow("hidden"),m.l0.borderRadius(0,0,8,8)],outputsListWrapper:[m.l0.height("100%")],outputsList:[m.l0.height("100%"),m.l0.overflowY("scroll")],outputsListSnapToBottom:{scrollSnapType:"y mandatory"},scrollSnap:[m.l0.height(1),{marginTop:-1,pointerEvents:"none",scrollSnapAlign:"end"}],outputBlockCollapsingWrapper:[m.l0.minHeight(tn.blockMinHeight)],outputBlockTerminalWrapper:[m.l0.minHeight(tn.blockMinHeight),{backgroundColor:tn.terminalBackgroundColor}],outputBlockClosingBorder:[m.l0.height(1),m.l0.zIndex(1),m.l0.border({direction:"bottom",width:1,style:"solid",color:m.TV.backgroundHigher}),{marginTop:-1}]});function ti(e){var t,n=e.onInput,r=e.openFile,i=e.openPane,a=e.openAIWithMessage,c=e.openSearchAndReplace,s=e.openSecretsPane,u=e.listFiles,f=e.autoFocus,h=e.rootRef,p=e.maxHeight,m=e.onResizeTerminal,v=e.isDone,g=e.data,y=e.error,C=e.localStartTime,k=e.localEndTime,T=e.startTime,R=e.endTime,B=e.type,G=e.visualState,P=e.onSetVisualState,N=e.ports,O=e.onDontExposePort,U=e.onDoExposePort,M=e.performPaneOperation,X=(0,b.useRef)(null),F=(0,o._)((0,b.useState)(!0),2),W=F[0],H=F[1],V=(0,o._)((0,b.useState)(!1),2),z=V[0],j=V[1],q=(0,o._)((0,b.useState)(0),2),J=q[0],Y=q[1],$=(0,A.f)(),K=(0,_.Z)(W,z?6e4:500),Q=(0,D.r4)(N,B===I.kH.EXECUTION?g.cgroup:void 0),ee=(0,o._)((0,b.useState)(0),2),et=ee[0],en=ee[1],er=(0,b.useCallback)(function(e,t){i({type:"webview",data:{portType:"local",path:e,port:t}},!0)},[i]),ei=eO({maxHeight:p,visualState:G,onSetVisualState:P}),eo=ei.collapsedStep,ea=ei.isCollapsed,el=ei.setIsCollapsed,ec=ei.blockWrapperRef,es=ei.blockWrapperProps,eu=ei.blockResizeRef,ed=ei.measuredBlockHeight;(0,e9.Z)({sendInput:function(e){return n(e),!0},paste:function(){return!1}}),(0,b.useEffect)(function(){if(h.current){var e,t=h.current,n=function(){var n,r;Y(Math.max(0,t.scrollTop-(null!==(r=null===(n=X.current)||void 0===n?void 0:n.offsetTop)&&void 0!==r?r:0))),j(!0),e&&clearTimeout(e),e=setTimeout(function(){j(!1)},500)};return t.addEventListener("scroll",n),function(){clearInterval(e),t.removeEventListener("scroll",n)}}},[h,X]),(0,b.useEffect)(function(){if(X.current&&h.current)return(0,E.j)(X.current,function(){return H(!0),function(){H(!1)}},{root:h.current,threshold:0})},[h,X]);var ef=(0,S.Z)(function(e){var t=e.height;"expanded"===eo&&en(t)},{type:"debounce",wait:200}),em=!1;return"collapsed"===eo?em=!1:(!v||K)&&(em=!0),(0,l.BX)(d.G,{innerRef:X,children:[(0,l.tZ)(eh,{isCollapsed:ea,setIsCollapsed:el,openPane:i,isDone:v,data:g,localStartTime:C,localEndTime:k,startTime:T,endTime:R,type:B,error:y,openedPorts:Q,openAIWithMessage:a}),(0,l.BX)(d.G,{innerRef:ef,style:{position:"sticky",top:28},children:[(0,l.tZ)(ez,{onClick:s}),(0,l.tZ)(L.ms,{configurations:Q.map(function(e){return e.configuration}),openWebview:function(){er("/",Q[0].configuration.localPort)},openNetworkingTool:function(){i({type:"networking"},!0)},onDontExposePort:function(){1===Q.length&&O(Q[0].configuration.localPort)},onDoExposePort:function(){1===Q.length&&U(Q[0].configuration.localPort)}})]}),(0,l.tZ)("div",(0,x._)((0,Z._)({ref:ec},es),{children:(0,l.tZ)(d.G,{css:tr.outputBlockTerminalWrapper,style:(t={},(0,w._)(t,tt.blockMinHeight,ed+"px"),(0,w._)(t,tt.terminalBackgroundColor,null==$?void 0:$.background),(0,w._)(t,ep.Dq.topOffset,28+et+"px"),t),children:em?(0,l.tZ)(d.G,{innerRef:eu,children:(0,l.tZ)(eC,{onMessage:g.onMessage,onInput:n,openFile:r,openAIWithMessage:a,openSearchAndReplace:c,openWebview:er,listFiles:u,maxHeight:p-28-et,onResizeTerminal:m,scrollPosition:J,scrollParent:function(e){var t,n,r,i=e+(null!==(r=null===(t=X.current)||void 0===t?void 0:t.offsetTop)&&void 0!==r?r:0);null===(n=h.current)||void 0===n||n.scrollTo({top:i})},autoFocus:f,performPaneOperation:M})}):(0,l.tZ)(eX,{targetHeight:null!=ed?ed:0})})})),(0,l.tZ)(d.G,{css:tr.outputBlockClosingBorder})]})}function to(e){var t=e.performPaneOperation,n=e.isActive,r=e.runner,i=e.ports,a=e.listFiles,c=e.sessionId,s=e.openAIWithMessage,u=e.onDontExposePort,f=e.onDoExposePort,h=(0,o._)((0,b.useState)([]),2),p=h[0],m=h[1],v=(0,o._)((0,b.useState)(0),2),g=v[0],y=v[1],w=(0,o._)((0,b.useState)(!0),2),Z=w[0],x=w[1],_=(0,b.useRef)(null),k=(0,B.Do)(R.y.Output),E=(0,o._)((0,b.useState)(!1),2),D=E[0],A=E[1],L=(0,b.useRef)(0),N=(0,T.T3)(),O=(0,e7.QF)(),U=(0,b.useMemo)(function(){return O?Object.entries(O).flatMap(function(e){var t=(0,o._)(e,2),n=t[0],r=t[1];return r.tasks.filter(function(e){return e.state!==eI.PX.NOT_STARTED}).map(function(e,t){return{task:e,taskIdx:t,runId:n,config:r.workflow.tasks[t]}})}).sort(function(e,t){return e.task.startTime-t.task.startTime}):[]},[O]),M=(0,S.Z)(function(e){y(e.height)},{type:"throttle",wait:200}),X=(0,b.useCallback)(function(e){t({operation:"open",secondary:!0,pane:{type:(0,G.Dp)(e),data:e}})},[t]),F=(0,b.useCallback)(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t({operation:"open",secondary:n,pane:e})},[t]),W=(0,b.useCallback)(function(){t({operation:"open",secondary:!1,pane:{type:"envEditor"}})},[t]),H=(0,b.useCallback)(function(e){t({operation:"open",secondary:!0,pane:{type:"searchReplace",data:{initialQuery:e}}})},[t]),V=(0,b.useCallback)(function(e){s(e),c&&t({operation:"open",secondary:!0,pane:{type:"ghostwriterChat",data:{sessionId:c}}})},[t,s,c]);return(0,b.useEffect)(function(){return r.onStateChanged(function(e){A(e===I.Ah.BEFORE_RUN)})},[r]),(0,b.useEffect)(function(){m(r.getOutputBlocks())},[r]),(0,b.useEffect)(function(){var e=r.onAllBlocksChanged(function(e){m(e)}),t=r.onBlockChanged(function(e){!p.find(function(t){return t.id===e.id})&&_.current&&(_.current.scrollTo(0,_.current.scrollHeight),x(!0)),m((0,P.Uy)(function(t){var n=t.findIndex(function(t){return t.id===e.id});n>=0?t[n]=e:t.push(e)}))});return function(){t(),e()}},[r,p,_]),(0,l.BX)(d.G,{css:tr.outputsListParent,innerRef:k,children:[D?(0,l.tZ)(C.Z,{}):null,(0,l.BX)(d.G,{css:tr.outputsListWrapper,innerRef:M,children:[0===p.length&&0===U.length?(0,l.tZ)(eD,{runner:r}):null,(0,l.BX)(d.G,{css:[tr.outputsList,Z&&tr.outputsListSnapToBottom],innerRef:_,onScroll:function(){_.current&&(_.current.scrollTop<L.current?x(!1):x(_.current.scrollHeight-_.current.scrollTop-20<g),L.current=_.current.scrollTop)},children:[p.map(function(e,o){var c=o===p.length-1;return(0,l.tZ)(ti,{rootRef:_,maxHeight:g,onInput:function(e){var t=r.getRunState();(t===I.Ah.IDLE||t===I.Ah.RUNNING)&&r.sendInput(e)},openFile:X,openAIWithMessage:V,openSearchAndReplace:H,openPane:F,openSecretsPane:W,listFiles:a,onResizeTerminal:function(t){e.isDone||e.type!==I.kH.EXECUTION||r.resizeTerminalForBlock(e.id,t)},autoFocus:n&&c&&!N,isDone:e.isDone,type:e.type,error:e.error,visualState:e.visualState,onSetVisualState:function(t){return r.setBlockVisualState(e.id,t)},localStartTime:e.localStartTime,localEndTime:e.localEndTime,startTime:e.startTime,endTime:e.endTime,data:e.data,ports:i,onDontExposePort:u,onDoExposePort:f,performPaneOperation:t},e.id)}),U.map(function(e){return(0,l.tZ)(e5,{task:e.task,taskIdx:e.taskIdx,runId:e.runId,config:e.config,maxHeight:g,rootRef:_,ports:i,openPane:F,openAIWithMessage:V,onDoExposePort:f,onDontExposePort:u},e.runId+"-"+e.taskIdx)}),Z?(0,l.tZ)(d.G,{css:tr.scrollSnap}):null]})]})]})}var ta=n(95563),tl=n(60305),tc=n(66548),ts=c.Dy.Object({type:c.Dy.Literal("runnerOutput")}),tu={id:"outputs.clear",name:"Clear console history",default:void 0};function td(e){var t,n,r,c,s,u,d,f=e.runner,h=e.options,m=(n=(t=(0,v.Z)()).fs,r=t.ports,c=(0,eL.U)(function(e){return function(){return e.workflows.clearHistory.rpc({})}},[]),s=(0,b.useMemo)(function(){return[{type:"action",label:"Clear history",icon:(0,l.tZ)(p.Z,{}),run:function(){c&&c(),f.clearBlockHistory()}}]},[f,c]),(0,y.L5)(function(){return{actions:s,type:"runnerOutput",startBlock:f.startBlock,endBlock:f.endBlock,writeOutputToBlock:f.writeOutputToBlock,writeErrorToBlock:f.writeErrorToBlock}},[f,s]),(0,g.Il)(function(){return[tu.id,f.clearBlockHistory]},[f]),u=(0,b.useCallback)(function(e){r.updateDotReplitPortsMapping(e,void 0)},[r]),{onDoExposePort:(0,b.useCallback)(function(e){r.tryExposingPortAutomatically(e)},[r]),onDontExposePort:u,ports:r,fs:n}),w=m.ports,Z=m.fs,x=m.onDontExposePort,C=m.onDoExposePort,_=(0,o._)((0,b.useState)(""),2),S=_[0],k=_[1],E=(0,ta.bD)({onSession:function(e){k(e),h.performPaneOperation({operation:"open",secondary:!0,pane:{type:"ghostwriterChat",data:{sessionId:e}}})}}).sendMessage,T=(0,o._)((0,ta.Ni)(),1)[0],R=(0,b.useCallback)((d=(0,i._)(function(e){return(0,a.Jh)(this,function(t){return(0,tl.j)(tl.U3.AI_CHAT_EVENT,{action:"message_sent",intent_type:"explain",model:T,user_model_selection:T,message_content:e,message_source:"console"}),E({kind:"message",message:e,intent:ta.$h.EXPLAIN,model:"advanced"===T?ta.BY.ADVANCED:ta.BY.BASIC}),[2]})}),function(e){return d.apply(this,arguments)}),[T,E]);return(0,l.tZ)(to,{runner:f,ports:w,listFiles:Z.listFiles,isActive:h.isActive,performPaneOperation:h.performPaneOperation,sessionId:S,openAIWithMessage:R,onDontExposePort:x,onDoExposePort:C})}var tf=(0,f.X)({unavailable:[m.l0.p(8)]}),th={Content:function(e){var t=e.options,n=(0,v.Z)().runner;return"outputs"!==n.mode?(0,l.tZ)(d.G,{css:tf.unavailable,children:(0,l.tZ)(u.xv,{children:"Console is not available."})}):(0,l.tZ)(td,{options:t,runner:n})},Icon:function(e){var t=e.size;return(0,l.tZ)(tc.Pd.Provider,{value:{color:m.TV.yellowStrongest,size:t},children:(0,l.tZ)(h.Z,{})})},getTitle:function(){return"Console"},description:"View the terminal output after running your code",decode:function(e){return s.B4.Decode(ts,e)}}},64780:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(4216),i=n(94778),o=n(87128),a=n(72121),l={Content:function(){return(0,r.tZ)(i.G,{style:{padding:32},children:(0,r.tZ)(a.Z,{children:"Sorry, this feature is not supported."})})},Icon:function(){return(0,r.tZ)(o.Z,{})},getTitle:function(){return"Unsupported"},decode:function(){return{type:"commands",data:{autoFocus:!1}}}}},36214:function(e,t,n){n.d(t,{J:function(){return b},R:function(){return w}});var r=n(66626),i=n(4216),o=n(74044),a=n(99149),l=n(91175),c=n(66548),s=n(54556),u=n(48058),d=n(81199),f=n(34378),h=n(2738),p=n(51500),m=n(95751),v=n(50959),g=n(24605),y=o.Dy.Object({type:o.Dy.Literal("webview"),data:o.Dy.Optional(o.Dy.Union([o.Dy.Object({portType:o.Dy.Literal("local"),port:o.Dy.Number(),path:o.Dy.Optional(o.Dy.String())}),o.Dy.Object({portType:o.Dy.Literal("external"),port:o.Dy.Number(),path:o.Dy.Optional(o.Dy.String())})]))}),b=function(e){return a.B4.Decode(y,e)},w={Content:function(e){var t=e.pane.data,n=e.options.performPaneOperation,o=(0,d.Z)(),a=o.container,c=o.runner,s=(0,l.T)(),g=(0,r._)((0,v.useState)(function(){return function(){}}),2),y=g[0],b=g[1],w=(0,u.bg)(),Z=s?f.oB:(0,f.Cl)(t,w);(0,p.Z)({container:a,runner:c,refreshWebView:y}),(0,m.Z)({runner:c,refreshWebView:y});var x=(0,v.useCallback)(function(){return n({operation:"open",secondary:!0,pane:{type:"networking"}})},[n]);return void 0===Z?(0,i.tZ)(h.Z,{openNetworkingTool:x}):(0,i.tZ)(f.U8,{initialPort:Z,initialPath:null==t?void 0:t.path,openPane:function(e){n({operation:"open",pane:e})},openNetworkingTool:x,setRefreshCb:b})},Icon:function(e){var t=e.size;return(0,i.tZ)(c.Pd.Provider,{value:{color:g.TV.foregroundDimmer,size:t},children:(0,i.tZ)(s.Z,{})})},getTitle:function(){return"Webview"},description:"Preview your Repl as a web application",decode:b}},34764:function(e,t,n){n.d(t,{U:function(){return wv}});var r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y,b,w,Z,x,C,_,S,k,E,T,R,D,I,B,G,A,P=n(66626),L=n(63257),N=n(4216),O=n(74044),U=n(99149),M=n(85763),X=n(16923),F=n(82230),W=n(94778),H=n(49224),V=n(38057),z=n(29318),j=n(72093),q=n(81199),J=n(63416),Y=n(70016),$=n(50959),K=n(36559),Q=(0,H.X)({text:{width:"100%",textAlign:"center"},loaderContainer:[j.l0.display.flex,j.l0.center,j.l0.height("100%")]}),ee=O.Dy.Object({type:O.Dy.Literal("binary"),data:O.Dy.Object({path:O.Dy.String()})}),et={Content:function(e){var t=e.pane,n=e.options;return(0,N.tZ)(en,{path:t.data.path,performPaneOperation:n.performPaneOperation})},Icon:function(e){var t=e.pane,n=e.size;return(0,N.tZ)(X.Z,{path:t.data.path,size:n})},getTitle:function(e){return(0,K.UO)(e.data.path)},decode:function(e){return U.B4.Decode(ee,e)}};function en(e){var t=e.path,n=e.performPaneOperation,r=(0,q.Z)().fs,i=(0,J.Mp)({path:t,performPaneOperation:n});(0,Y.L5)(function(){if(i)return{commands:i?(0,L._)(i):[]}},[i]);var o=(0,P._)((0,$.useState)(null),2),a=o[0],l=o[1],c=(0,P._)((0,$.useState)(!0),2),s=c[0],u=c[1];return((0,$.useEffect)(function(){var e=r.watchFile(t,{onChange:function(e){l(e.toString("base64")),u(!1)},onError:function(){l(null),u(!1)},onMoveOrDelete:function(){l(null),u(!1)}});return function(){e(),u(!0),l(null)}},[r,t]),s)?(0,N.tZ)(W.G,{css:Q.loaderContainer,children:(0,N.tZ)(z.Z,{})}):null===a?(0,N.tZ)(F.xv,{multiline:!1,children:"Failed to load binary file"}):(0,N.BX)(N.HY,{children:[(0,N.tZ)(J.HK,{path:t,performPaneOperation:n}),(0,N.BX)(J.VY,{centered:!0,children:[(0,N.tZ)(F.xv,{css:Q.text,children:"The file is not displayed in the text editor because it is either binary or uses an unsupported text encoding."}),(0,N.tZ)(M.hU,{alt:"Download",css:[j.l0.position.absolute,j.l0.bottom(8),j.l0.right(8),j.l0.p(16)],children:(0,N.tZ)("a",{href:"data:text/plain;base64,".concat(a),download:(0,K.UO)(t),css:[j.l0.color.foregroundDimmer],children:(0,N.tZ)(V.Z,{})})})]})]})}var er=n(85645),ei=n(18257),eo=n(58045),ea=n(66048),el=n(18158),ec=n(36647),es=n(41733),eu=n(30509),ed=n(78950),ef=n(18060),eh=n(75993),ep=n(15235),em=n(64479),ev=n(1383),eg=n(84126),ey=n(64546),eb=(0,H.X)({button:{width:"fit-content"}});function ew(e){var t=e.code,n=e.activeFile,r=(0,ey.Z)(n),i=r?{text:"Insert",iconRight:(0,N.tZ)(ev.Z,{}),onClick:function(){return r({code:t,insertAt:"end"})}}:{text:"Copy",iconLeft:(0,N.tZ)(eg.Z,{}),onClick:function(){return(0,eh.Z)(t)}};return(0,N.tZ)(em.Tg,{background:"default",children:(0,N.tZ)(ep.zx,(0,es._)({size:"small",variant:"outlined",css:eb.button},i))})}var eZ=(0,H.X)({self:j.l0.colWithGap(4),content:[j.l0.rowWithGap(4),j.l0.backgroundColor.backgroundRoot,j.l0.borderRadius(4),j.l0.p(4),j.l0.align.center,{width:"fit-content"}]});function ex(e){var t=e.method,n=e.content,r=e.activeFile,i=(0,P._)((0,$.useState)(n),2),o=i[0],a=i[1];return(0,N.BX)(W.G,{css:eZ.self,children:[(0,N.tZ)(eT,{title:t}),(0,N.tZ)(W.G,{css:eZ.content,children:o.map(function(e,n){var r="".concat(t,"-").concat(n);return"input"===e.type?(0,N.tZ)(e_,{i:n,value:e.value,placeholder:e.placeholder,setContent:a},r):(0,N.tZ)(ek,{value:e.value},r)})}),(0,N.tZ)(ew,{code:o.reduce(function(e,t){return e+(t.value||("input"===t.type?t.placeholder:""))},""),activeFile:r})]})}var eC=(0,H.X)({self:[j.l0.width(64),j.l0.height(24),j.l0.zIndex(1)]});function e_(e){var t=e.i,n=e.value,r=e.placeholder,i=e.setContent;return(0,N.tZ)(ef.II,{onChange:function(e){i(function(n){return n.map(function(n,r){return t===r?(0,eu._)((0,es._)({},n),{value:e.target.value}):n})})},placeholder:r,value:n||"",css:eC.self})}var eS=(0,H.X)({self:[j.l0.borderRadius(0),j.l0.backgroundColor.backgroundRoot],code:[j.l0.font.code,j.l0.color.greyStronger,j.l0.p(4)]});function ek(e){var t=e.value;return(0,N.tZ)(W.G,{css:eS.self,children:(0,N.tZ)(F.xv,{css:eS.code,multiline:!1,children:t})})}var eE=(0,H.X)({self:j.l0.rowWithGap(4),bold:{fontWeight:j.TV.fontWeightMedium}});function eT(e){var t=e.title,n=(0,P._)((0,ec.Z)(function(){var e=(0,ed._)(t.split(" "));return[e[0],e.slice(1).join(" ")]},[t]),2),r=n[0],i=n[1];return(0,N.BX)(W.G,{css:eE.self,children:[(0,N.tZ)(F.xv,{css:eE.bold,multiline:!1,children:r}),(0,N.tZ)(F.xv,{color:"dimmer",multiline:!1,children:i})]})}(r=g||(g={})).IMPORT="Import the database",r.CREATE="Create a new database",r.SET="Set a key to a value",r.GET="Get a key's value",r.DELETE="Delete a key",r.LIST="List all keys",r.LIST_PREFIX="List keys with a prefix";var eR={language:"Bash",methods:[eG("Set a key to a value","curl $REPLIT_DB_URL -d '{{key}} = {{value}}'"),eG("Get a key's value","curl $REPLIT_DB_URL/{{key}}"),eG("Delete a key","curl -XDELETE $REPLIT_DB_URL/{{key}}"),eG("List all keys",'curl "$REPLIT_DB_URL?prefix={{key}}"')]},eD={language:"Node",methods:[eG("Import the database",'const Database = require("@replit/database")'),eG("Create a new database","const db = new Database()"),eG("Set a key to a value",'db.set("{{key}}", "{{value}}").then(() => {})'),eG("Get a key's value",'db.get("{{key}}").then(value => {})'),eG("Delete a key",'db.delete("{{key}}").then(() => {})'),eG("List all keys","db.list().then(keys => {})"),eG("List keys with a prefix",'db.list("{{prefix}}").then(matches => {})')]},eI={language:"Go",methods:[eG("Import the database",'import "github.com/replit/database-go"'),eG("Set a key to a value",'db.Set("{{key}}", "{{value}}")'),eG("Get a key's value",'value, _ := database.Get("{{key}}")'),eG("Delete a key",'database.Delete("{{key}}")'),eG("List all keys",'keys, _ := database.ListKeys("")'),eG("List keys with a prefix",'matches, _ := database.ListKeys("{{prefix}}")')]},eB={language:"Python",methods:[eG("Import the database","from replit import db"),eG("Set a key to a value",'db["{{key}}"] = "{{value}}"'),eG("Get a key's value",'db["{{key}}"]'),eG("Delete a key",'del db["{{key}}"]'),eG("List all keys","keys = db.keys()"),eG("List keys with a prefix",'matches = db.prefix("{{prefix}}")')]};function eG(e,t){return{method:e,content:function(e){for(var t=[],n=0;n<e.length;){var r=e.indexOf("{{",n),i=e.indexOf("}}",n);if(-1===r||-1===i){t.push({type:"code",value:e.substring(n)});break}t.push({type:"code",value:e.substring(n,r)}),t.push({type:"input",placeholder:e.substring(r+2,i)}),n=i+2}return t}(t)}}var eA=(0,H.X)({self:j.l0.colWithGap(24),code:[j.l0.font.code,j.l0.color.greyStronger,j.l0.backgroundColor.backgroundRoot,j.l0.p(4),j.l0.borderRadius(4)]});function eP(e){var t=e.activeFile,n=(0,ec.Z)(function(){return function(e){switch(e?(0,K.r6)(e):"bash"){case"js":case"ts":case"tsx":case"jsx":case"mjs":return eD;case"go":return eI;case"py":return eB;default:return eR}}(t)},[t]);return(0,N.BX)(W.G,{css:eA.self,children:[(0,N.BX)(F.xv,{color:"dimmer",children:["You can use the Database from any Repl by making HTTP requests or a client library as outlined below. We’ve set an environment variable called ",(0,N.tZ)("code",{css:eA.code,children:"REPLIT_DB_URL"})," in your Repl if you'd like to interact with the database directly."]}),n.methods.map(function(e){return(0,N.tZ)(ex,{method:e.method,content:e.content,activeFile:t},"".concat(n.language).concat(e.method))})]})}var eL=n(54738),eN=(0,H.X)({children:[j.l0.p(12),j.l0.colWithGap(8)]});function eO(e){var t=e.title,n=e.defaultExpanded,r=e.children;return(0,N.tZ)(eL.Q,{defaultExpanded:n,headerContent:(0,N.tZ)(F.xv,{variant:"subheadDefault",multiline:!1,children:t}),children:(0,N.tZ)(W.G,{css:eN.children,children:r})})}var eU=n(77450),eM=n(32622),eX=n(99266),eF=n(15605),eW=(0,eU.F4)("from{opacity:0}to{opacity:1}"),eH=(0,H.X)({self:[j.l0.colWithGap(8),{animation:"".concat(eW," 100ms forwards ease-in-out alternate")}],selfLoadingText:[j.l0.height(16),j.l0.width(48),j.l0.borderRadius(4),eX.p.backgroundPulse()],selfLoading:[j.l0.height(12),j.l0.borderRadius(16),eX.p.backgroundPulse()],text:[j.l0.rowWithGap(4)],textSpan:[j.l0.width("fit-content"),j.l0.display.inlineFlex]});function eV(e){var t,n,r=e.database,i=e.loading,o=(null==r?void 0:r.sizeMB)||0,a=(t=1e6*(t=o)/1048576,"".concat(t.toFixed(),"/50 MiB")),l=i||!r;return(0,N.tZ)(W.G,{css:eH.self,children:l?(0,N.BX)(N.HY,{children:[(0,N.tZ)(W.G,{css:eH.selfLoadingText}),(0,N.tZ)(W.G,{css:eH.selfLoading})]}):(0,N.BX)(N.HY,{children:[(0,N.BX)(F.xv,{color:"dimmer",css:eH.text,multiline:!1,children:[(0,N.tZ)(W.K.span,{css:eH.textSpan,children:a}),(0,N.tZ)(W.K.span,{css:eH.textSpan,children:"|"}),(0,N.tZ)(W.K.span,{css:eH.textSpan,children:(n=(n=null==r?void 0:r.keysCount)||0,"".concat(n," ").concat((0,eM.Z)("key",n)))})]}),(0,N.tZ)(eF.J,{current:o,total:50,tooltip:a})]})},l?"databaseLoadingStats":"databaseLoadedStats")}var ez=n(39271),ej=n(21262),eq=n(71440),eJ=n(58995);function eY(){var e=(0,ej._)(["\n  fragment DatabaseUsage on Database {\n    id\n    keysCount\n    sizeMB\n  }\n"]);return eY=function(){return e},e}function e$(){var e=(0,ej._)(["\n  query Database($replID: String!) {\n    repl(id: $replID) {\n      ... on Repl {\n        id\n        database {\n          id\n          ...DatabaseUsage\n        }\n      }\n    }\n    currentUser {\n      id\n      isLoggedIn\n    }\n  }\n  ","\n"]);return e$=function(){return e},e}var eK={},eQ=(0,eq.Ps)(eY()),e0=(0,eq.Ps)(e$(),eQ),e1=(0,H.X)({self:[j.l0.colWithGap(16),j.l0.p(8),j.l0.backgroundColor.backgroundDefault,eo.F3],link:[j.l0.color.accentPrimaryStronger,j.l0.pr(4)],sectionWrapper:[j.l0.colWithGap(16),j.l0.overflowY("auto"),j.l0.width("100%"),{flex:"1"}]});function e2(e){var t,n,r,i,o,a,l,c,s,u=e.performPaneOperation,d=(l=(i={variables:{replID:(0,ez.Z)()},pollInterval:1e4},o=(0,es._)({},eK,i),a=eJ.a(e0,o)).data,c=a.error,s=a.loading,l&&("Repl"===l.repl.__typename?n=null==l?void 0:null===(r=l.repl)||void 0===r?void 0:r.database:t="Could not fetch Database info"),c&&("GraphQL error: You don't have access to this database"===c.message?n=null:t=c.message),{db:n,loading:s,error:t}),f=d.db,h=d.error,p=d.loading,m=(0,ea.R3)();return(0,N.BX)(W.G,{css:e1.self,children:[(0,N.tZ)(F.h4,{level:2,variant:"subheadBig",children:"Database"}),(0,N.BX)(W.G,{css:e1.sectionWrapper,children:[(0,N.BX)(W.G,{children:[(0,N.BX)(F.xv,{children:[(0,N.tZ)("a",{href:el.TT.REPL_DATABASE,target:"_blank",rel:"noopener",onClick:function(e){e.preventDefault(),u({operation:"open",pane:{type:"docs",data:{url:el.TT.REPL_DATABASE}}})},children:"Replit Database"})," ","is a free, easy to use key-value store. No configuration is necessary, so you can start using it right away."]}),h?(0,N.tZ)(F.xv,{css:[j.l0.color.accentNegativeStronger],children:h}):null]}),(0,N.tZ)(eO,{title:"Database Info",defaultExpanded:!0,children:(0,N.tZ)(eV,{database:f,loading:p})}),(0,N.tZ)(eO,{title:"Using the database",defaultExpanded:!0,children:(0,N.tZ)(eP,{activeFile:m})})]})]})}var e4=n(66548),e3=n(24605),e8=O.Dy.Object({type:O.Dy.Literal("database")}),e6={Content:function(e){var t=e.options.performPaneOperation;return(0,N.tZ)(e2,{performPaneOperation:t})},Icon:function(e){var t=e.size;return(0,N.tZ)(e4.Pd.Provider,{value:{color:e3.TV.blurpleStronger,size:t},children:(0,N.tZ)(ei.Z,{})})},getTitle:function(){return"Database (Key/Value)"},description:"Free, easy-to-use key-value store suitable for unstructured data, caching, session management, fast lookups, and flexible data models",decode:function(e){return U.B4.Decode(e8,e)}},e5=n(42516),e7=n(80403),e9=n(66873),te=n(98924),tt=n(33799),tn=n(3030),tr="rgba(180, 0, 0, 0.125)",ti="rgba(0, 180, 0, 0.125)",to=tn.tk.theme({"&.cm-merge-b .cm-changedLine":{background:"rgba(0, 180, 0, 0.075)"},"&.cm-merge-a .cm-changedLine":{background:"rgba(180, 0, 0, 0.075)"},"&.cm-merge-b .cm-changedLineGutter":{background:ti},"&.cm-merge-a .cm-changedLineGutter":{background:tr},"&.cm-merge-b .cm-changedText":{background:ti,outline:"solid 1px ".concat(ti),borderRadius:"2px"},"&.cm-merge-a .cm-changedText":{background:tr,outline:"solid 1px ".concat(tr),borderRadius:"2px"},".cm-collapsedLines":{color:e3.TV.accentPrimaryStrongest,background:e3.TV.accentPrimaryDimmest,transition:"background 250ms ease","&:hover":{background:e3.TV.accentPrimaryDimmer}}}),ta=[tn.tk.baseTheme({".cm-scroller":{height:"100% !important",overflowY:"auto !important"}}),tn.tk.theme({".cm-scroller":{height:"auto !important",overflowY:"visible !important"}})],tl=[e7.Wl.highest(ta),to],tc=n(51561),ts=n(62942),tu=n(36752),td=n(85733);function tf(e){var t,n,r,i=e.a,o=e.b,a=e.style,l=e.className,c=(0,te._)(e,["a","b","style","className"]),s=(0,P._)((0,$.useState)(null),2),u=s[0],d=s[1],f=(0,P._)((0,$.useState)(null),2),h=f[0],p=f[1],m=(0,$.useRef)(!1),v=(0,td.Z)(c),g=(0,td.Z)(i.doc),y=(0,td.Z)(o.doc),b=(0,ts.Xl)((0,eu._)((0,es._)({},i),{readOnly:!0})),w=(0,ts.Xl)((0,eu._)((0,es._)({},o),{readOnly:!0})),Z=(t=(0,P._)((0,$.useState)(),2)[1],(0,$.useCallback)(function(e){t(function(){throw e})},[])),x=c.orientation,C=c.revertControls,_=c.renderRevertControl,S=c.collapseUnchanged,k=c.gutter,E=c.highlightChanges,T=void 0!==S,R=null==S?void 0:S.margin,D=null==S?void 0:S.minSize,I=null!==(n=null==h?void 0:h.a)&&void 0!==n?n:null,B=null!==(r=null==h?void 0:h.b)&&void 0!==r?r:null;return(0,ts.uF)(),(0,$.useEffect)(function(){var e=function(e){Z(e)};if(u){var t=null;try{t=new tt.QK((0,eu._)((0,es._)({},v.current),{parent:u,a:{doc:g.current,extensions:[tn.tk.exceptionSink.of(e),tl].concat((0,L._)(b))},b:{doc:y.current,extensions:[tn.tk.exceptionSink.of(e),tl].concat((0,L._)(w))}}))}catch(t){e(t)}return t&&(p(t),m.current=!0),function(){if(t){p(null);try{t.destroy()}catch(t){e(t)}}}}},[u]),(0,$.useEffect)(function(){I&&!m.current&&I.dispatch({changes:{from:0,to:I.state.doc.length,insert:i.doc}})},[I,i.doc]),(0,$.useEffect)(function(){B&&!m.current&&B.dispatch({changes:{from:0,to:B.state.doc.length,insert:o.doc}})},[B,o.doc]),(0,$.useEffect)(function(){h&&!m.current&&th(h,v.current.collapseUnchanged)},[h,v,i.doc,o.doc]),(0,$.useEffect)(function(){if(h&&!m.current){var e=T?{margin:R,minSize:D}:void 0;h.reconfigure({orientation:x,revertControls:C,renderRevertControl:_,collapseUnchanged:e,gutter:k,highlightChanges:E}),e&&th(h,e)}},[h,x,C,_,T,R,D,k,E]),(0,tc.H)(I),(0,tc.H)(B),(0,$.useEffect)(function(){m.current=!1}),(0,N.BX)(N.HY,{children:[(0,N.tZ)("div",{ref:d,className:l,style:a}),(0,N.tZ)(tu.N1,{view:I}),(0,N.tZ)(tu.N1,{view:B})]})}function th(e,t){e&&t&&(e.reconfigure({collapseUnchanged:void 0}),e.reconfigure({collapseUnchanged:(0,es._)({},t)}))}var tp=n(54590),tm=n(12202),tv=n(43449),tg=n(39477),ty=n(44906),tb=(0,H.X)({container:[j.l0.width(60),j.l0.height(24),j.l0.display.flex,j.l0.center,j.l0.borderRadius(4),j.l0.fontSize(j.TV.fontSizeSmall)]});function tw(e){var t,n,r;switch(e.type){case ty.h.ADDED:case ty.h.UNTRACKED:t="Added",n=j.TV.greenDimmest,r=j.TV.greenStrongest;break;case ty.h.MODIFIED:t="Modified",n=j.TV.yellowDimmest,r=j.TV.yellowStrongest;break;case ty.h.DELETED:t="Deleted",n=j.TV.redDimmest,r=j.TV.redStrongest;break;case ty.h.RENAMED:t="Renamed",n=j.TV.tealDimmest,r=j.TV.tealStrongest;break;case ty.h.COPIED:t="Copy",n=j.TV.limeDimmest,r=j.TV.limeStrongest;break;default:return null}return(0,N.tZ)(W.G,{style:{backgroundColor:n,color:r},css:tb.container,children:(0,N.tZ)("span",{children:t})})}function tZ(e){var t,n,r;switch(e.type){case"ADDED":t="Added",n=j.TV.greenDimmest,r=j.TV.greenStrongest;break;case"MODIFIED":t="Modified",n=j.TV.yellowDimmest,r=j.TV.yellowStrongest;break;case"DELETED":t="Deleted",n=j.TV.redDimmest,r=j.TV.redStrongest;break;case"RENAMED":t="Renamed",n=j.TV.tealDimmest,r=j.TV.tealStrongest;break;case"COPIED":t="Copy",n=j.TV.limeDimmest,r=j.TV.limeStrongest;break;default:return null}return(0,N.tZ)(W.G,{style:{backgroundColor:n,color:r},css:tb.container,children:(0,N.tZ)("span",{children:t})})}var tx=n(22706),tC=[{"& > span:first-child-of-type":[j.l0.flex.grow(1),j.l0.textAlign.left]},{"& > span":[j.l0.flex.shrink(1)]},j.l0.height("auto"),j.l0.p(8),j.l0.fontWeight.medium,j.l0.backgroundColor.backgroundHigher,j.l0.flex.row,j.l0.align.center,j.l0.justify.spaceBetween,j.l0.overflow("hidden"),j.l0.cursor.pointer],t_=(0,H.X)({buttonFolded:[tC,j.l0.borderRadius(8)],buttonUnfolded:[tC,j.l0.borderRadius(8,8,0,0)],rowContainer:[j.l0.align.center,j.l0.rowWithGap(8),j.l0.position.relative,j.l0.zIndex(1),j.l0.overflow("hidden")],diffContainer:[j.l0.flex.grow(1),j.l0.borderRadius(8)],bodyContainer:[j.l0.borderRadius(0,0,8,8),j.l0.p(8),j.l0.display.flex,j.l0.flex.row,j.l0.flex.wrap,j.l0.align.center,j.l0.justify.center,j.l0.backgroundColor.backgroundDefault,j.l0.border({color:j.TV.outlineDimmer,direction:"bottom"}),j.l0.border({color:j.TV.outlineDimmer,direction:"left"}),j.l0.border({color:j.TV.outlineDimmer,direction:"right"})],noChangesContainer:[j.l0.py(8),j.l0.px(8),j.l0.center,j.l0.width("100%")],innerContainer:[j.l0.display.flex,j.l0.align.center],splitContainer:[j.l0.p(8),j.l0.display.flex,j.l0.flex.row,j.l0.justify.spaceBetween,j.l0.maxWidth("100%"),j.l0.align.center],splitChild:[j.l0.align.center,j.l0.justify.center,{flexBasis:"50%"}],buttonGroupItem:[j.l0.width(64),j.l0.height(32)]}),tS=function(e){var t=e.value,n=e.onChange;return(0,N.BX)(tp.hE,{name:"SplitOrUnifiedDiff",value:t,onChange:n,row:!0,children:[(0,N.tZ)(W.G,{css:t_.buttonGroupItem,children:(0,N.tZ)(tp.rK,{value:"Unified",text:"Unified",id:"SplitOrUnifiedDiffUnified"})}),(0,N.tZ)(W.G,{css:t_.buttonGroupItem,children:(0,N.tZ)(tp.rK,{value:"Split",text:"Split",id:"SplitOrUnifiedDiffSplit"})})]})},tk=function(e){var t=e.folded,n=void 0!==t&&t,r=e.setFolded,i=e.diff,o="".concat(i.initial.path,"/").concat(i.initial.filename),a="".concat(i.final.path,"/").concat(i.final.filename);return(0,N.BX)(W.G,{css:n?t_.buttonFolded:t_.buttonUnfolded,onClick:function(){return r(!n)},children:[(0,N.BX)(W.G,{css:[t_.rowContainer,j.l0.flex.shrink(1)],children:["RENAMED"===i.status||"COPIED"===i.status?(0,N.BX)(N.HY,{children:[(0,N.tZ)(X.Z,{path:o}),(0,N.tZ)(F.xv,{multiline:!1,children:i.initial.filename}),""===i.initial.path?null:(0,N.tZ)(F.xv,{multiline:!1,color:"dimmest",css:[j.l0.fontWeight.normal],maxLines:1,children:i.initial.path}),(0,N.tZ)(ev.Z,{}),(0,N.tZ)(X.Z,{path:a}),(0,N.tZ)(F.xv,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,N.tZ)(F.xv,{multiline:!1,color:"dimmest",css:[j.l0.fontWeight.normal],children:i.final.path})]}):(0,N.BX)(N.HY,{children:[(0,N.tZ)(X.Z,{path:a}),(0,N.tZ)(F.xv,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,N.tZ)(F.xv,{multiline:!1,color:"dimmest",css:[j.l0.fontWeight.normal],children:i.final.path})]}),(0,N.tZ)(tm.m,{textToCopy:a,tooltipText:"Copy Full Path",tooltipPlacement:"bottom-end"})]}),(0,N.BX)(W.G,{css:t_.rowContainer,children:[(0,N.tZ)(tZ,{type:i.status}),(0,N.tZ)(M.hU,{alt:n?"Collapse diff":"Expand diff",onClick:function(){return r(!n)},children:n?(0,N.tZ)(tv.Z,{}):(0,N.tZ)(tg.Z,{})})]})]})},tE=function(e){var t=e.diff,n=e.splitOrUnified,r=e.extensions;return"Split"===n?(0,N.tZ)(tf,{a:{filePath:t.initial.filename,doc:t.initial.content},b:{filePath:t.final.filename,doc:t.final.content,extensions:r},collapseUnchanged:{},style:{width:"100%"}}):(0,N.tZ)(ts.ZP,{filePath:t.final.filename,initialDoc:t.final.content,extensions:[e9.p.of(e7.xv.of(t.initial.content.split("\n")))],readOnly:!0,style:{width:"100%"}})},tT=function(e){return(0,K.T3)(e)?"media":(0,K.Mb)(e)?"ot":"binary"},tR=function(e){var t=e.content,n=e.type,r=e.filename,i=e.extensions;switch(n){case"media":return(0,N.tZ)(W.G,{css:[{display:"flex",height:"100%"}],children:(0,N.tZ)(tx.A,{content:t,mime:(0,K.yC)(r)})});case"ot":return(0,N.tZ)(ts.ZP,{filePath:r,initialDoc:t,readOnly:!0,style:{width:"100%"},extensions:i});default:return(0,N.tZ)(F.xv,{color:"dimmest",multiline:!1,children:"This binary file has changed."})}},tD=function(e){var t=e.diff,n=e.splitOrUnified,r=e.extensions;if(t.loading)return(0,N.tZ)(W.G,{css:t_.noChangesContainer,children:(0,N.tZ)(z.Z,{size:20})});if(t.initial.content===t.final.content)return(0,N.tZ)(W.G,{css:t_.noChangesContainer,children:(0,N.tZ)(F.xv,{color:"dimmest",multiline:!1,children:"There are no changes to show."})});if("DELETED"===t.status)return(0,N.tZ)(W.G,{css:t_.noChangesContainer,children:(0,N.tZ)(F.xv,{color:"dimmest",multiline:!1,children:"This file has been deleted."})});var i=tT(t.initial.filename),o=tT(t.final.filename);if("ADDED"===t.status)switch(o){case"media":return(0,N.tZ)(W.G,{css:t_.noChangesContainer,children:(0,N.tZ)(W.G,{css:t_.innerContainer,children:(0,N.tZ)(tx.A,{content:t.final.content,mime:(0,K.yC)(t.final.filename)})})});case"ot":return(0,N.tZ)(W.G,{css:t_.noChangesContainer,children:(0,N.tZ)(ts.ZP,{filePath:t.final.filename,initialDoc:t.final.content,readOnly:!0,style:{width:"100%"},extensions:r})});default:return(0,N.tZ)(W.G,{css:t_.noChangesContainer,children:(0,N.tZ)(F.xv,{color:"dimmest",multiline:!1,children:"This binary file has been added."})})}return"binary"===i&&"binary"===o?(0,N.tZ)(W.G,{css:t_.noChangesContainer,children:(0,N.tZ)(F.xv,{color:"dimmest",multiline:!1,children:"This binary file has changed."})}):"ot"===i&&"ot"===o?(0,N.tZ)(tE,{diff:t,splitOrUnified:n,extensions:r}):(0,N.BX)(W.G,{css:t_.splitContainer,children:[(0,N.tZ)(W.G,{css:t_.splitChild,children:(0,N.tZ)(tR,{content:t.initial.content,type:i,filename:t.initial.filename,extensions:r})}),(0,N.tZ)(W.G,{css:t_.splitChild,children:(0,N.tZ)(tR,{content:t.final.content,type:o,filename:t.final.filename,extensions:r})})]})},tI=function(e){var t=e.diff,n=e.folded,r=e.setFolded,i=e.splitOrUnified;return(0,N.BX)(W.G,{css:t_.diffContainer,children:[(0,N.tZ)(tk,{folded:n,setFolded:r,diff:t}),n?null:(0,N.tZ)(em.Tg,{css:t_.bodyContainer,elevated:!0,children:(0,N.tZ)(tD,{diff:t,splitOrUnified:i})})]},t.id)},tB=n(64432),tG=n(12441),tA=n(15026),tP=n(27387),tL=n(96583),tN=n(69880),tO=n(43182),tU=function(e){var t=e.context,n=e.gitService,r=e.result,i=e.data;tO.$e(function(e){e.setTag("service","git"),e.setTag("context",t),e.setExtra("env",n.getEnv()),i&&tO.sU("data",i),tO.Tb(r.error)})},tM=(i=(0,tP._)(function(e,t,n,r){var i,o,a;return(0,tL.Jh)(this,function(l){switch(l.label){case 0:if("git"!==r.type)return[3,2];return i=r.revision,[4,e.getFileContents({path:n,revision:i})];case 1:if((o=l.sent()).error)throw tU({context:"use-file-at-revision-fetch-content",gitService:e,result:o,data:{path:n,revision:i}}),o.error;return[2,o.content||""];case 2:return[4,t.readFile(n,{fromDisk:!0})];case 3:if((a=l.sent()).error)throw a.error;return[2,a.content.toString("utf8")]}})}),function(e,t,n,r){return i.apply(this,arguments)}),tX=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(0,P._)((0,$.useState)(null),2),o=i[0],a=i[1],l=(0,P._)((0,$.useState)(!0),2),c=l[0],s=l[1],u=(0,q.Z)().fs,d=(0,tN.Z)((n=(0,tP._)(function(n){var r,i;return(0,tL.Jh)(this,function(o){switch(o.label){case 0:s(!0),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,tM(n,u,e,t)];case 2:return r=o.sent(),s(!1),[2,{content:r,error:null}];case 3:return i=o.sent(),s(!1),[2,{content:null,error:i}];case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),[e,t,u],r);return(0,$.useEffect)(function(){d&&(d.error?a(null):a(d.content))},[d]),{fileContent:o,loading:c}},tF=O.Dy.Object({type:O.Dy.Literal("git"),revision:O.Dy.String()}),tW=O.Dy.Object({type:O.Dy.Literal("fs")}),tH=O.Dy.Object({type:O.Dy.Literal("diff"),data:O.Dy.Object({left:O.Dy.Object({path:O.Dy.String(),data:O.Dy.Union([tF,tW])}),right:O.Dy.Object({path:O.Dy.String(),data:O.Dy.Union([tF,tW])})})}),tV=(0,H.X)({container:[j.l0.colWithGap(16),j.l0.p(8)],header:[j.l0.mt(0),j.l0.mb(8)],emphasizedText:[j.l0.fontWeight.bold],bodyContainer:[j.l0.borderRadius(8),j.l0.p(8),j.l0.display.flex,j.l0.flex.row,j.l0.flex.wrap,j.l0.align.center,j.l0.justify.center,j.l0.backgroundColor.backgroundDefault,j.l0.border({color:j.TV.outlineDimmest,direction:"full"})],tooltipContainer:[j.l0.display.inlineBlock]}),tz=function(e){var t=e.filename,n=e.onFileClick;return(0,N.tZ)("span",{css:tV.tooltipContainer,children:(0,N.tZ)(tB.u,{tooltip:"View file",children:(0,N.tZ)("button",{css:[j.l0.reset.button,j.l0.linkStyle,j.l0.fontWeight.medium],onClick:n,children:t})})})},tj=function(e){return"git"===e.type?e.revision:"working directory"},tq=function(e){var t,n,r=e.left,i=e.right,o=e.onFileClick,a=r.path===i.path,l=(t=r.data,n=i.data,t.type===n.type&&("git"!==t.type||t.revision===n.revision));return a?l?(0,N.BX)(F.h4,{level:1,variant:"text",css:tV.header,children:["Comparing"," ",(0,N.BX)("span",{css:tV.emphasizedText,children:[(0,N.tZ)(tz,{filename:r.path,onFileClick:o})," ",tj(r.data)]})," ","to itself"]}):(0,N.BX)(F.h4,{level:1,variant:"text",css:tV.header,children:["Comparing"," ",(0,N.BX)("span",{css:tV.emphasizedText,children:[(0,N.tZ)(tz,{filename:r.path,onFileClick:o})," ",tj(r.data)]})," ","to ",(0,N.tZ)("span",{css:tV.emphasizedText,children:tj(i.data)})]}):l?(0,N.BX)(F.h4,{level:1,variant:"text",css:tV.header,children:["Comparing ",(0,N.tZ)("span",{css:tV.emphasizedText,children:r.path})," to"," ",(0,N.BX)("span",{css:tV.emphasizedText,children:[(0,N.tZ)(tz,{filename:i.path,onFileClick:o})," ",tj(r.data)]})]}):(0,N.BX)(F.h4,{level:1,variant:"text",css:tV.header,children:["Comparing"," ",(0,N.BX)("span",{css:tV.emphasizedText,children:[r.path," ",tj(r.data)]})," ","to"," ",(0,N.BX)("span",{css:tV.emphasizedText,children:[(0,N.tZ)(tz,{filename:i.path,onFileClick:o})," ",tj(i.data)]})]})},tJ=(y={},(0,e5._)(y,"Content",function(e){var t=e.pane.data,n=t.left,r=t.right,i=e.options.performPaneOperation,o=(0,P._)((0,$.useState)("Split"),2),a=o[0],l=o[1],c=tX(n.path,n.data),s=c.fileContent,u=c.loading,d=tX(r.path,r.data),f=d.fileContent,h=d.loading,p=(0,$.useMemo)(function(){return null===s&&null!==f?tA.yH.ADDED:null!==s&&null===f?tA.yH.DELETED:tA.yH.MODIFIED},[s,f]);return(0,N.BX)(W.G,{css:tV.container,children:[(0,N.tZ)(tq,{left:n,right:r,onFileClick:function(){i({operation:"open",pane:{type:(0,eo.Dp)({path:r.path}),data:{path:r.path}}})}}),(0,N.tZ)(tS,{value:a,onChange:l}),(0,N.tZ)(em.Tg,{css:tV.bodyContainer,children:(0,N.tZ)(tD,{diff:{id:"".concat(n.path,"-").concat(r.path),status:p,loading:u||h,initial:{filename:(0,K.UO)(n.path),path:(0,K.Il)(n.path),content:null!=s?s:""},final:{filename:(0,K.UO)(r.path),path:(0,K.Il)(r.path),content:null!=f?f:""}},splitOrUnified:a})})]})}),(0,e5._)(y,"Icon",function(){return(0,N.tZ)(tG.Z,{})}),(0,e5._)(y,"getTitle",function(e){var t=e.data;return t.left.path===t.right.path?"Diff: ".concat((0,K.UO)(t.left.path)):"Diff: ".concat((0,K.UO)(t.left.path)," - ").concat((0,K.UO)(t.right.path))}),(0,e5._)(y,"decode",function(e){return U.B4.Decode(tH,e)}),y),tY=n(7375),t$=n(32317),tK=n(57967),tQ=n(46051),t0=n(55460),t1=n(51973),t2=n(86763),t4=n.n(t2),t3=n(52399),t8=n(92674),t6=n.n(t8);function t5(){var e=(0,ej._)(["\n  query WorkspaceDrawCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return t5=function(){return e},e}var t7={},t9=(0,eq.Ps)(t5()),ne=function(e){return e.reduce(function(e,t){return e[t.id]=t,e},{})},nt=function(e,t,n){if(!e)return[];var r,i=t(e.getSceneElementsIncludingDeleted()),o=e.getAppState();return(r=n.reduce(function(e,t){var n,r,a;return t.id===(null===(n=o.editingElement)||void 0===n?void 0:n.id)||t.id===(null===(r=o.resizingElement)||void 0===r?void 0:r.id)||t.id===(null===(a=o.draggingElement)||void 0===a?void 0:a.id)||(i[t.id]&&i[t.id].version>t.version?e.push(i[t.id]):i[t.id]&&i[t.id].version===t.version&&i[t.id].versionNonce!==t.versionNonce&&i[t.id].versionNonce<t.versionNonce?e.push(i[t.id]):e.push(t),delete i[t.id]),e},[])).concat.apply(r,(0,L._)(Object.values(i)))},nn=function(){var e,t,n=new Promise(function(n,r){e=n,t=r});return n.resolve=e,n.reject=t,n},nr=(0,eU.iv)(".excalidraw.excalidraw-modal-container.excalidraw--mobile{margin-top:",t$.Mz-1,"px;}");function ni(e){var t,r,i,o,a=e.fs,l=e.broadcast,c=e.filePath,s=(0,P._)((0,$.useState)(void 0),2),u=s[0],d=s[1],f=(0,tK.Z)(),h=(0,$.useRef)(function(e){return(0,L._)(e)}),p=(0,$.useRef)(function(e){return -1}),m=(0,$.useRef)({readyPromise:nn()}),v=(0,$.useRef)({promise:null});(0,$.useEffect)(function(){Promise.all([n.e(6655),n.e(3668)]).then(n.t.bind(n,63668,23)).then(function(e){h.current=function(t){return t.filter(function(t){return t.isDeleted||!e.isInvisiblySmallElement(t)})},p.current=e.getSceneVersion,d(e.Excalidraw)})},[]);var g=function(){return m.current},y=(t=(0,es._)({},t7,{ssr:!1}),eJ.a(t9,t)),b=y.data,w=y.loading,Z=(null==b?void 0:null===(o=b.currentUser)||void 0===o?void 0:o.username)||"",x=(0,t0.F)().isDarkColorScheme,C=(0,t1.aG)(),_=(0,tQ.Z)(),S=null==_?void 0:_.color,k=(0,P._)((0,$.useState)(new Map),2),E=k[0],T=k[1],R=(0,P._)((0,$.useState)(-1),2),D=R[0],I=R[1],B=(0,$.useRef)(t6()()).current;(0,$.useEffect)(function(){function e(){return(e=(0,tP._)(function(){var e,t;return(0,tL.Jh)(this,function(n){switch(n.label){case 0:if(!b||!b.currentUser)return[2];return[4,m.current.readyPromise];case 1:return n.sent(),e=g().getAppState().collaborators,t=new Map,C.forEach(function(n){if(n.username!==(null==b?void 0:null===(r=b.currentUser)||void 0===r?void 0:r.username)){var r,i=e.get(n.username)||{};t.set(n.username,(0,eu._)((0,es._)({},i),{username:n.username,color:{background:n.color,foreground:n.color}}))}}),g().updateScene({collaborators:t}),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[b,C]);var G=(r=(0,tP._)(function(e,t){var n,r,i,o,a,s;return(0,tL.Jh)(this,function(u){t||(e=e.filter(function(e){return!E.has(e.id)||e.version>E.get(e.id)})),n=!0,r=!1,i=void 0;try{for(o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)s=a.value,E.set(s.id,s.version),T(new Map(E))}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return l.broadcastMessage(B,{text:JSON.stringify({elements:e,path:c})}),[2]})}),function(e,t){return r.apply(this,arguments)});(0,$.useEffect)(function(){if(l)return l.onBroadcastReceived(B,function(e){var t=e.username,n=JSON.parse(e.text);if(n.path===c){if(n.collaborator&&m.current){var r=g().getAppState().collaborators;r.set(t,(0,eu._)((0,es._)({},r.get(t),n.collaborator),{username:t})),g().updateScene({collaborators:r})}else if(n.elements){var i=nt(g(),ne,n.elements);I(p.current(i)),g().updateScene({elements:i})}else if(n.removePresence){var o=g().getAppState().collaborators;o.delete(n.removePresence),g().updateScene({collaborators:o})}}})},[l,c,B]),(0,$.useEffect)(function(){function e(){return(e=(0,tP._)(function(){return(0,tL.Jh)(this,function(e){var t;return c&&a&&(v.current.promise=new Promise((t=(0,tP._)(function(e){var t,n,r;return(0,tL.Jh)(this,function(i){switch(i.label){case 0:return[4,Promise.all([a.readFile(c),m.current.readyPromise])];case 1:return"content"in(t=P._.apply(void 0,[i.sent(),1])[0])&&(n=JSON.parse(t.content.toString()||"{}"),r=g().getAppState(),n.appState=(0,es._)({},r),n.scrollToContent=!0,e(n)),[2]}})}),function(e){return t.apply(this,arguments)}))),[2]})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[c,a]);var A=(0,$.useCallback)(t4()((i=(0,tP._)(function(e,t){var n;return(0,tL.Jh)(this,function(r){switch(r.label){case 0:if(n=e.filter(function(e){return!e.isDeleted}),!c)return[3,2];return[4,a.writeFile(c,t3.Z.from(JSON.stringify({elements:n,files:t})))];case 1:r.sent(),r.label=2;case 2:return[2]}})}),function(e,t){return i.apply(this,arguments)}),350),[c]),O=function(e){p.current(e)>D&&(D>-1&&G(h.current(e),!1),I(p.current(e)))};return(0,N.BX)(W.G,{css:{position:"relative",height:"100%",width:"100%",flex:1,boxShadow:S?"0 3px 0 3px ".concat(S):"none",backgroundColor:j.TV.backgroundDefault,"& .excalidraw [title~=Library]":{display:"none"}},onMouseLeave:function(){l.broadcastMessage(B,{text:JSON.stringify({removePresence:Z,path:c})})},children:[u&&!w?(0,N.tZ)(u,{ref:m,UIOptions:{canvasActions:{loadScene:!1}},isCollaborating:!0,theme:x?"dark":"light",initialData:v.current.promise,onPointerUpdate:function(e){var t=e.pointer,n=g().getAppState().selectedElementIds||{};l.broadcastMessage(B,{text:JSON.stringify({collaborator:{pointer:t,selectedElementIds:n},path:c})})},onChange:function(e,t,n){O(e),I(p.current(e)),p.current(e)>D&&A(e,n)},name:Z}):null,f?(0,N.tZ)(eU.xB,{styles:[nr]}):null]})}function no(e){var t=e.fs,n=e.broadcast,r=e.filePath;return(0,N.tZ)(ni,{fs:t,broadcast:n,filePath:r},r)}var na=O.Dy.Object({type:O.Dy.Literal("draw"),data:O.Dy.Object({path:O.Dy.String()})}),nl={Content:function(e){var t=e.pane,n=e.options.performPaneOperation;return(0,N.tZ)(nc,{path:t.data.path,performPaneOperation:n})},Icon:function(e){var t=e.size;return(0,N.tZ)(tY.Z,{size:t})},getTitle:function(e){return(0,K.UO)(e.data.path)},decode:function(e){return U.B4.Decode(na,e)}};function nc(e){var t=e.path,n=e.performPaneOperation,r=(0,q.Z)(),i=r.fs,o=r.broadcast,a=(0,J.Mp)({path:t,performPaneOperation:n});return(0,Y.L5)(function(){if(a)return{commands:a}},[a]),(0,N.BX)(N.HY,{children:[(0,N.tZ)(J.HK,{path:t,performPaneOperation:n}),(0,N.tZ)(J.VY,{children:(0,N.tZ)(no,{fs:i,broadcast:o,filePath:t})})]})}var ns=n(18123),nu=n(32903),nd=O.Dy.Object({type:O.Dy.Literal("envEditor")}),nf={Content:function(){return(0,N.tZ)(nh,{})},Icon:function(e){var t=e.size;return(0,N.tZ)(ns.Z,{size:t})},getTitle:function(){return"Secrets"},description:"Store sensitive information (like API keys) securely in your Repl",decode:function(e){return U.B4.Decode(nd,e)}};function nh(){var e=(0,q.Z)().secrets,t=(0,q.Z)().runner;return(0,N.tZ)(nu.ZP,{readRawEnv:e.rawRead,writeRawEnv:e.rawWrite,getRunState:t.getRunState})}var np=n(31892),nm=n(59786),nv=n(72658),ng=n(52621),ny=n(22750),nb=n(40635),nw=(0,$.createContext)(null);function nZ(){var e=(0,$.useContext)(nw);if(!e)throw Error("Expected store in context");return e}var nx=(0,nb.cn)([]),nC=(0,nb.cn)(function(e){return e(nx)},function(e,t,n){var r=e(nx),i=Math.random().toString(36).substring(7);t(nx,[{id:i,type:n,dismiss:function(){var n=e(nx).filter(function(e){return e.id!==i});t(nx,n)}}].concat((0,L._)(r)))});function n_(){return(0,ny.b9)(nC,{store:nZ()})}var nS=n(93720),nk=n(96955),nE=n(47357),nT=n(67242),nR=n(19068),nD=n(53928),nI=n(39667),nB=n(21187),nG=n(29252),nA=n(97658),nP=n(44932),nL=n(94311),nN=n(16098),nO=n(50508),nU=n(78711);function nM(){var e=(0,ej._)(["\n  query GitUserImageByUsername($username: String!) {\n    userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return nM=function(){return e},e}var nX={},nF=(0,eq.Ps)(nM()),nW=n(79032),nH=(0,H.X)({gitUserContainer:[j.l0.flex.row],gitUserInnerContainer:[j.l0.align.center,j.l0.flex.row,{"& > :not(:first-child)":{marginLeft:j.TV.space4}}],gitUserInnerContainerFlipped:[j.l0.align.center,j.l0.flex.rowReverse,{"& > :not(:last-child)":{marginLeft:j.TV.space4}}],alignCenter:[j.l0.align.center]});function nV(e){var t=e.name,n=e.email,r=e.allowPlaceholderAvatar,i=void 0!==r&&r,o=e.color,a=void 0===o?"default":o,l=e.small,c=void 0!==l&&l,s=e.flip,u=void 0!==s&&s,d=e.placement,f=e.showTooltip;return void 0===f||f?(0,N.tZ)(W.G,{css:nH.gitUserContainer,children:(0,N.tZ)(tB.u,{placement:void 0===d?"bottom":d,tooltip:(0,N.tZ)(F.xv,{children:n}),children:(0,N.BX)(W.G,{css:u?nH.gitUserInnerContainerFlipped:nH.gitUserInnerContainer,children:[(0,N.tZ)(nz,{email:n,name:t,enablePlaceholder:i,small:c}),(0,N.tZ)(F.xv,{multiline:!1,color:a,variant:c?"small":"text",children:t})]})})}):(0,N.tZ)(W.G,{css:nH.gitUserContainer,children:(0,N.BX)(W.G,{css:u?nH.gitUserInnerContainerFlipped:nH.gitUserInnerContainer,children:[(0,N.tZ)(nz,{email:n,name:t,enablePlaceholder:i,small:c}),(0,N.tZ)(F.xv,{multiline:!1,color:a,variant:c?"small":"text",children:t})]})})}function nz(e){var t,n=e.name,r=e.email,i=e.enablePlaceholder,o=void 0!==i&&i,a=e.small,l=void 0!==a&&a,c=(0,P._)((t=(0,es._)({},nX,{initialFetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",ssr:!1}),nU.t(nF,t)),1)[0],s=(0,P._)((0,$.useState)(null),2),u=s[0],d=s[1];return(0,$.useEffect)(function(){var e;(e=(0,tP._)(function(){var e,t,n,i,o,a,l,s,u,f;return(0,tL.Jh)(this,function(h){switch(h.label){case 0:if(!r.endsWith("@".concat(nO.O)))return[3,1];return e=r.split("@")[0],(t=(0,P._)(e.split("+"),2))[0],n=t[1],d((0,nP.vt)("https://github.com/".concat(n,".png"))),[3,4];case 1:if(!r.endsWith("@".concat(nO.J)))return[3,3];return a=r.split("@")[0],(l=(0,P._)(a.split("-"),2))[0],[4,c({variables:{username:l[1]}})];case 2:return(s=null===(o=h.sent().data)||void 0===o?void 0:null===(i=o.userByUsername)||void 0===i?void 0:i.image)&&d(s),[3,4];case 3:u=(0,nW.FB)(r),(f=new URL("https://gravatar.com/avatar/".concat(u))).searchParams.append("d","404"),d(f.toString()),h.label=4;case 4:return[2]}})}),function(){return e.apply(this,arguments)})()},[r,c]),(0,$.useMemo)(function(){var e=l?12:16;return null===u?o?(0,N.tZ)(nN.Z,{css:nH.alignCenter,size:e}):null:(0,N.tZ)(nL.q,{css:nH.alignCenter,username:n,src:u,onError:function(){return d(null)},size:e})},[u,o,l,n])}var nj=n(33651),nq=n(31534);(o=b||(b={})).DASHBOARD="DASHBOARD",o.BRANCH="BRANCH",o.CURRENT_BRANCH="CURRENT_BRANCH",o.SETTINGS="SETTINGS",o.COMMIT="COMMIT";var nJ=n(1169),nY=W.K.button,n$=(0,H.X)({container:[j.l0.display.flex,j.l0.flex.growAndShrink(1),j.l0.overflow("hidden")],cursorOverlay:{cursor:"pointer"},fullWidth:[j.l0.width("100%")],searchContainer:[j.l0.p(8)],paddedX:[j.l0.px(8)],loadingContainer:[j.l0.display.flex,j.l0.align.center,j.l0.justify.center,j.l0.py(48)],menu:[j.l0.maxWidth(390),j.l0.width(280),j.l0.display.flex,j.l0.maxHeight(640),j.l0.borderRadius(8),j.l0.overflow("hidden")],form:[j.l0.display.flex,j.l0.flex.growAndShrink(1),j.l0.flex.column,j.l0.overflow("hidden")],body:[j.l0.py(8),j.l0.colWithGap(8),j.l0.flex.growAndShrink(1),j.l0.overflow("auto")],branchMetadata:[j.l0.rowWithGap(8),j.l0.align.center,j.l0.flex.shrink(1)],section:[j.l0.rowWithGap(8),j.l0.align.center,j.l0.justify.spaceBetween],selector:[j.l0.display.flex,j.l0.align.center,j.l0.rowWithGap(4)],header:[j.l0.colWithGap(2),j.l0.width("100%")],menuItem:[{backgroundColor:"inherit"},nR.gU.listItem,j.l0.px(8),j.l0.py(4),j.l0.borderRadius(0),j.l0.align.start],inputDisabled:[{opacity:.75}],padded:[j.l0.p(8)],virtualItem:[j.l0.position.absolute,j.l0.top(0),j.l0.left(0),j.l0.width("100%"),j.l0.overflow("hidden")],virtualList:[j.l0.position.relative],divider:[j.l0.mt(8),j.l0.mb(8),j.l0.ml(0),j.l0.mr(0)],errorText:[j.l0.color.accentNegativeStronger,j.l0.mt(4)],createBranchButton:[j.l0.height(32),j.l0.overflow("hidden"),{whiteSpace:"nowrap",textOverflow:"ellipsis"}]}),nK=function(e,t){var n,r,i,o=n_(),a=(0,q.Z)().git,l=(0,P._)((0,$.useState)(!0),2),c=l[0],s=l[1],u=(0,tN.Z)((n=(0,tP._)(function(e){var t,n,r,i,a,l,c,u,d,f,h,p,m,v,g,y,b,w,Z,x,C;return(0,tL.Jh)(this,function(_){switch(_.label){case 0:return s(!0),[4,e.isInitialized()];case 1:if((t=_.sent()).error)return o(t.error),s(!1),[2,t];if(!t.initialized)return s(!1),[2,{active:[],stale:[],important:[],error:null}];return[4,e.listBranches()];case 2:if((n=_.sent()).error)return o(n.error),s(!1),[2,n];return[4,e.findDefaultBranches()];case 3:if((r=_.sent()).error)return o(r.error),s(!1),[2,r];i=n.branches,a=new Set,l=!0,c=!1,u=void 0;try{for(d=function(){var e=h.value,t=i.find(function(t){return(0,nA.Pi)(t,e)});t&&a.add(t)},f=r.refs[Symbol.iterator]();!(l=(h=f.next()).done);l=!0)d()}catch(e){c=!0,u=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw u}}p=Date.now()-72e6,m=[],v=[],g=!0,y=!1,b=void 0;try{for(w=i[Symbol.iterator]();!(g=(Z=w.next()).done);g=!0)x=Z.value,a.has(x)||(x.commit.author.date>p?m.push(x):v.push(x))}catch(e){y=!0,b=e}finally{try{g||null==w.return||w.return()}finally{if(y)throw b}}return C=Array.from(a),s(!1),[2,{active:m,stale:v,important:C,error:null}]}})}),function(e){return n.apply(this,arguments)}),[o]),d=(r=(0,tP._)(function(t){var n;return(0,tL.Jh)(this,function(r){switch(r.label){case 0:if(c||(0,nA.Pi)(e,t))return[2];return s(!0),[4,a.switchBranch(t)];case 1:return(n=r.sent()).error?(o(n.error),s(!1)):(a.forceRefresh(),(0,nj.J)("branch-switched")),[2]}})}),function(e){return r.apply(this,arguments)}),f=(i=(0,tP._)(function(e){var t;return(0,tL.Jh)(this,function(n){switch(n.label){case 0:if(c||""===e)return[2];return s(!0),[4,a.createBranch({name:e,checkout:!0})];case 1:return(t=n.sent()).error?(o(t.error),s(!1)):(a.forceRefresh(),(0,nj.J)("branch-created")),[2]}})}),function(e){return i.apply(this,arguments)});if((0,$.useEffect)(function(){null!==e&&(s(!1),t({mode:b.CURRENT_BRANCH}))},[e,t]),null===u||c)return{loading:c,active:[],stale:[],important:[],handleSwitchBranch:d,handleCreateBranch:f,error:null};if(u.error)return{loading:c,active:[],stale:[],important:[],handleSwitchBranch:d,handleCreateBranch:f,error:u.error};var h=u.active,p=u.stale,m=u.important;return{loading:c,active:null!=h?h:[],stale:null!=p?p:[],important:null!=m?m:[],handleSwitchBranch:d,handleCreateBranch:f,error:null}},nQ=function(e){var t=e.branch,n=nK(t,e.switchMode),r=n.loading,i=n.active,o=n.important,a=n.stale,l=n.handleSwitchBranch,c=n.handleCreateBranch,s=(0,P._)((0,$.useState)(!1),2),u=s[0],d=s[1],f=(0,P._)((0,$.useState)(""),2),h=f[0],p=f[1],m=(0,P._)((0,$.useState)(!1),2),v=m[0],g=m[1];return(0,N.tZ)(n7,{isOpen:u,setIsOpen:d,important:o,active:i,stale:a,current:t,query:h,setQuery:p,onSwitchBranch:l,createBranchLoading:v,createBranch:(0,tP._)(function(){return(0,tL.Jh)(this,function(e){switch(e.label){case 0:return g(!0),[4,c(h)];case 1:return e.sent(),p(""),g(!1),[2]}})}),loading:r})},n0=function(e){var t=e.onClick,n=e.children,r=(0,$.useRef)(null),i=(0,P._)((0,nJ.XZ)(r,!1),4),o=i[0],a=i[1],l=i[2],c=i[3];return(0,nJ.Ym)(a,r),(0,N.tZ)(nY,{ref:r,role:"menuitem",css:n$.menuItem,onClick:function(e){c(),t(e)},onKeyDown:l,tabIndex:o,children:n})},n1=function(e){var t=e.branch;return(0,N.BX)(W.G,{css:n$.branchMetadata,children:[(0,N.tZ)(nV,{name:t.commit.author.name,email:t.commit.author.email,color:"dimmer",allowPlaceholderAvatar:!0,placement:"top",showTooltip:!1,small:!0}),(0,N.tZ)(F.xv,{color:"dimmer",variant:"small",children:(0,nB.lb)(t.commit.author.date)})]})},n2=function(e){var t=e.branch,n=e.current,r=e.onSwitchBranch,i=(0,$.useMemo)(function(){return(0,ng.p3)(t,n)},[t,n]);return(0,N.BX)(n0,{onClick:function(){return r(t)},children:[(0,N.tZ)(F.xv,{multiline:!1,children:(0,N.tZ)(nq.Lr,{name:t.name,remote:t.type===ng.HO.REMOTE?t.remote:null,current:i})}),(0,N.tZ)(n1,{branch:t})]})},n4=function(e,t){return t.filter(function(t){return(0,nA.Qj)(t).toLowerCase().includes(e.toLowerCase())})},n3=function(e,t,n){var r=0,i=[];if(e.length+t.length+n.length===0)return i;if(e.length>0){i.push({key:"heading-important-".concat(r++),type:"heading",title:"Important"});for(var o=0;o<e.length;++o)i.push({key:"branch-important-".concat(r++),type:"branch",branch:e[o]});t.length+n.length>0&&i.push({key:"divider-important-".concat(r++),type:"divider"})}if(t.length>0){i.push({key:"heading-active-".concat(r++),type:"heading",title:"Active"});for(var a=0;a<t.length;++a)i.push({key:"branch-active-".concat(r++),type:"branch",branch:t[a]});n.length>0&&i.push({key:"divider-active-".concat(r++),type:"divider"})}if(n.length>0){i.push({key:"heading-stale-".concat(r++),type:"heading",title:"Stale"});for(var l=0;l<n.length;++l)i.push({key:"branch-stale-".concat(r++),type:"branch",branch:n[l]})}return i},n8=function(e){var t=e.item,n=e.current,r=e.onSwitchBranch;return"heading"===t.type?(0,N.tZ)(W.G,{css:n$.paddedX,children:(0,N.tZ)(F.xv,{multiline:!1,variant:"small",color:"dimmest",css:j.l0.fontWeight.medium,children:t.title})}):"divider"===t.type?(0,N.tZ)(W.G,{css:n$.divider,children:(0,N.tZ)(nT.R,{})}):(0,N.tZ)(W.G,{children:(0,N.tZ)(n2,{branch:t.branch,current:n,onSwitchBranch:r})})},n6=function(e){var t=e.items,n=e.current,r=e.onSwitchBranch,i=(0,$.useRef)(null),o=(0,nE.MG)({overscan:10,count:t.length,getScrollElement:function(){return i.current},estimateSize:function(e){var n,r;return null!==(n=void 0===(r=t[e])?0:"heading"===r.type?30:"branch"===r.type?65:"divider"===r.type?20:void 0)&&void 0!==n?n:0}});return(0,N.tZ)(nJ.uP,{options:{direction:"vertical"},children:(0,N.tZ)("div",{css:n$.body,ref:i,children:(0,N.tZ)("ul",{css:n$.virtualList,style:{height:"".concat(o.getTotalSize(),"px")},children:o.getVirtualItems().map(function(e){return(0,N.tZ)("div",{css:n$.virtualItem,style:{transform:"translateY(".concat(e.start,"px)")},"data-index":e.index,ref:o.measureElement,children:(0,N.tZ)(n8,{item:t[e.index],current:n,onSwitchBranch:r})},e.key)})})})})},n5=function(e){var t=e.query,n=e.setQuery,r=e.filteredImportant,i=e.filteredActive,o=e.filteredStale,a=e.current,l=e.onSwitchBranch,c=e.createBranchLoading,s=e.createBranch,u=e.loading,d=(0,$.useMemo)(function(){return n3(r,i,o)},[r,i,o]),f='Create Branch "'.concat(t,'"'),h=(0,$.useMemo)(function(){return(0,L._)(r).concat((0,L._)(i),(0,L._)(o)).some(function(e){return e.name===t})},[t,r,i,o]);return(0,N.tZ)(W.G,{css:n$.menu,children:(0,N.tZ)("form",{onSubmit:function(e){e.preventDefault(),s()},css:n$.form,children:u?(0,N.tZ)(W.G,{css:n$.loadingContainer,children:(0,N.tZ)(z.Z,{})}):(0,N.BX)(N.HY,{children:[(0,N.tZ)(W.G,{css:n$.searchContainer,children:(0,N.tZ)(nI.E,{value:t,onChange:function(e){n(e.target.value)},onClear:function(){n("")},loading:!1,placeholder:"Find or create a branch..."})}),(0,N.tZ)(W.G,{css:n$.paddedX,children:(0,N.tZ)(nT.R,{})}),d.length>0?(0,N.tZ)(n6,{items:d,current:a,onSwitchBranch:l}):null,h||""===t?null:(0,N.BX)(W.G,{css:n$.padded,children:[(0,N.tZ)(ep.zx,{text:f,size:"small",iconLeft:c?(0,N.tZ)(z.Z,{}):(0,N.tZ)(nG.Z,{}),stretch:!0,css:n$.createBranchButton,disabled:c||!(0,nA.Dc)(t),type:"submit"}),(0,nA.Dc)(t)?null:(0,N.tZ)(F.xv,{variant:"small",css:n$.errorText,multiline:!1,children:"Invalid branch name"})]})]})})})},n7=function(e){var t=e.isOpen,n=e.setIsOpen,r=e.important,i=e.active,o=e.stale,a=e.current,l=e.query,c=e.setQuery,s=e.onSwitchBranch,u=e.createBranchLoading,d=e.createBranch,f=e.loading,h=(0,$.useMemo)(function(){return n4(l,r)},[l,r]),p=(0,$.useMemo)(function(){return n4(l,i)},[l,i]),m=(0,$.useMemo)(function(){return n4(l,o)},[l,o]);return(0,N.BX)(nD.xo,{label:"View Branches",placement:"bottom",isOpen:t,onOpenChange:function(e){n(e)},offset:16,children:[function(e){var n=e.onClick,r=(0,te._)(e,["onClick"]);return(0,N.tZ)(ep.zx,{variant:"nofill",text:(0,N.BX)(F.xv,(0,eu._)((0,es._)({multiline:!1,variant:"small",css:n$.selector},r),{children:[(0,N.tZ)(nq.Lr,{name:a.name,remote:a.type===ng.HO.REMOTE?a.remote:null,icon:!0}),t?(0,N.tZ)(tg.Z,{}):(0,N.tZ)(tv.Z,{})]})),size:"small",stretch:!0,alignment:"start",css:n$.fullWidth,onClick:n})},(0,N.tZ)(n5,{query:l,setQuery:c,filteredImportant:h,filteredActive:p,filteredStale:m,current:a,onSwitchBranch:s,createBranchLoading:u,createBranch:d,loading:f})]})},n9=n(60199),re=n(96651),rt=n(15434),rn=n(40509);function rr(){var e,t,n,r,i,o=(0,P._)((0,$.useState)(!1),2),a=o[0],l=o[1],c=(0,q.Z)().git,s=(t=(e=(0,P._)((0,$.useState)(!1),2))[0],n=e[1],r=(0,q.Z)().git,(0,$.useEffect)(function(){return r.onBusyChange(n)},[r]),t),u=n_(),d=(0,tN.Z)((i=(0,tP._)(function(e){var t,n;return(0,tL.Jh)(this,function(r){switch(r.label){case 0:return[4,e.isInitialized()];case 1:if((t=r.sent()).error)return u(t.error),[2,t];if(!t.initialized)return[2,{hasRemotes:!1,error:null}];return[4,e.getRemotes()];case 2:if((n=r.sent()).error)return u(n.error),[2,n];return[2,{hasRemotes:n.remotes.size>0,error:null}]}})}),function(e){return i.apply(this,arguments)}),[u]);if(null==d?void 0:d.error)return null;var f=!!d&&d.hasRemotes,h=s||a||null===d;function p(){return(p=(0,tP._)(function(){var e;return(0,tL.Jh)(this,function(t){switch(t.label){case 0:if(c.isBusy()||h)return[2];if(l(!0),!f)return[3,2];return[4,c.fetch()];case 1:(e=t.sent()).error?u(e.error):(0,nj.J)("remote-fetched"),t.label=2;case 2:return[4,c.refreshProfiles()];case 3:return t.sent(),c.forceRefresh(),setTimeout(function(){return l(!1)},500),[2]}})})).apply(this,arguments)}return(0,N.tZ)(M.hU,{alt:f?"Refresh and Fetch":"Refresh",size:24,onClick:function(){return p.apply(this,arguments)},disabled:h,children:h?(0,N.tZ)(z.Z,{}):(0,N.tZ)(rn.Z,{})})}var ri=(0,H.X)({container:[j.l0.height(36),j.l0.px(8),j.l0.py(4),j.l0.rowWithGap(8),j.l0.backgroundColor.backgroundDefault,j.l0.align.center,j.l0.justify.spaceBetween,j.l0.zIndex(1),{borderBottom:"1px solid ".concat(j.TV.outlineDimmer)}],left:[j.l0.rowWithGap(4),j.l0.align.center,j.l0.flex.growAndShrink(1)],right:[j.l0.rowWithGap(8),j.l0.align.center],back:{marginLeft:-4}}),ro=function(e){var t=e.openSettings;return(0,N.BX)(W.G,{css:ri.container,children:[(0,N.BX)(W.G,{css:ri.left,children:[(0,N.tZ)(re.Z,{size:16}),(0,N.tZ)(F.xv,{variant:"subheadDefault",multiline:!1,children:"Repository"})]}),(0,N.BX)(W.G,{css:ri.right,children:[(0,N.tZ)(rf,{openSettings:t}),(0,N.tZ)(rr,{})]})]})},ra=function(e){var t=e.branch,n=e.switchMode,r=e.openSettings;return(0,N.BX)(W.G,{css:ri.container,children:[(0,N.tZ)(W.G,{css:ri.left,children:(0,N.tZ)(nQ,{branch:t,switchMode:n})}),(0,N.BX)(W.G,{css:ri.right,children:[(0,N.tZ)(rf,{openSettings:r}),(0,N.tZ)(rr,{})]})]})},rl=function(e){var t=e.onBack;return(0,N.BX)(W.G,{css:ri.container,children:[(0,N.BX)(W.G,{css:ri.left,children:[(0,N.tZ)(ru,{onBack:t,alt:"Back"}),(0,N.tZ)(F.xv,{variant:"subheadDefault",multiline:!1,children:"Settings"})]}),(0,N.tZ)(W.G,{css:ri.right})]})},rc=function(e){var t=e.switchMode,n=e.openSettings;return(0,N.BX)(W.G,{css:ri.container,children:[(0,N.BX)(W.G,{css:ri.left,children:[(0,N.tZ)(rd,{switchMode:t}),(0,N.tZ)(F.xv,{variant:"subheadDefault",multiline:!1,children:"Commit"})]}),(0,N.BX)(W.G,{css:ri.right,children:[(0,N.tZ)(rf,{openSettings:n}),(0,N.tZ)(rr,{})]})]})};function rs(e){var t=e.mode,n=e.branch,r=e.switchMode,i=e.onBack,o=function(){return r({mode:b.SETTINGS})};switch(t){case b.DASHBOARD:return(0,N.tZ)(ro,{openSettings:o});case b.BRANCH:case b.CURRENT_BRANCH:if(null===n)throw Error("Tried to show branch in header, but branch is null");return(0,N.tZ)(ra,{branch:n,switchMode:r,openSettings:o});case b.SETTINGS:return(0,N.tZ)(rl,{onBack:i});case b.COMMIT:return(0,N.tZ)(rc,{switchMode:r,openSettings:o});default:return(0,N.BX)(W.G,{css:ri.container,children:[(0,N.tZ)(W.G,{css:ri.left}),(0,N.tZ)(W.G,{css:ri.right})]})}}function ru(e){var t=e.onBack,n=e.alt;return(0,N.tZ)(M.hU,{css:ri.back,alt:n,size:28,onClick:t,children:(0,N.tZ)(n9.Z,{})})}function rd(e){var t=e.switchMode;return(0,N.tZ)(ru,{css:ri.back,onBack:function(){return t({mode:b.CURRENT_BRANCH})},alt:"Back to current branch"})}function rf(e){var t=e.openSettings;return(0,N.tZ)(M.hU,{alt:"Settings",size:24,onClick:t,children:(0,N.tZ)(rt.Z,{})})}var rh=n(71089),rp=(0,H.X)({checkboxLabel:j.l0.rowWithGap(8)});function rm(){var e=(0,$.useId)(),t=(0,P._)((0,$.useState)(!0),2),n=t[0],r=t[1],i=(0,P._)((0,$.useState)(!1),2),o=i[0],a=i[1],l=n_(),c=(0,q.Z)().git;function s(){return(s=(0,tP._)(function(){var e;return(0,tL.Jh)(this,function(t){switch(t.label){case 0:if(o)return[2];return a(!0),[4,c.init({initialCommit:n,includeAllInitialFiles:!0})];case 1:return(e=t.sent()).error?(a(!1),l(e.error)):(c.forceRefresh(),(0,nj.J)("repository-initialized")),[2]}})})).apply(this,arguments)}return(0,N.BX)(N.HY,{children:[(0,N.BX)(W.G,{css:rp.checkboxLabel,tag:"label",children:[(0,N.tZ)(rh.X,{id:e,checked:n,onChange:function(e){return r(e)}}),(0,N.tZ)(F.xv,{multiline:!1,children:"Create initial commit with all changes"})]}),(0,N.tZ)(ep.zx,{text:o?"Initializing...":"Initialize Git Repository",iconLeft:o?(0,N.tZ)(z.Z,{}):(0,N.tZ)(np.Z,{}),colorway:"primary",loading:o,onClick:function(){return s.apply(this,arguments)}})]})}var rv=n(87128),rg=n(64318),ry=n(19871),rb=n(63685),rw=n(71407),rZ=n(59947),rx=n(48461);function rC(){var e,t=(0,tN.Z)((e=(0,tP._)(function(e){return(0,tL.Jh)(this,function(t){return[2,{connectedToGithub:r_(e),error:null}]})}),function(t){return e.apply(this,arguments)}));return null==t||t.error?null:t.connectedToGithub}function r_(e){return e.hasProfile(ry.rG.GITHUB)}function rS(e){var t=e.label,n=e.allowReconnect,r=e.callback,i=e.useV2App,o=(0,P._)((0,$.useState)(!1),2),a=o[0],l=o[1],c=(0,q.Z)().git,s=rC(),u=(0,tK.Z)(),d=(0,rw.v)({onAuth:function(){(0,nj.J)("github-user-connected"),l(!1),c.refreshProfiles({preferredProvider:ry.rG.GITHUB}),null==r||r()},onClose:function(){return l(!1)},useV2App:i});return s&&!(void 0!==n&&n)?(0,N.tZ)(ep.zx,{text:"Connected to GitHub",colorway:"primary",iconLeft:(0,N.tZ)(rZ.Z,{}),disabled:!0}):(0,N.tZ)(ep.zx,{text:a||null===s?"Connecting...":u?"Visit account page to connect to GitHub":void 0===t?"Connect to GitHub":t,colorway:"primary",iconLeft:a?(0,N.tZ)(z.Z,{}):(0,N.tZ)(rx.Z,{}),loading:a,onClick:function(){if(u){rb.X.openExternalUrl("/account#connected-services");return}l(!0),d()}})}var rk=n(1675),rE=n(58498);function rT(e){return!!e&&("string"==typeof e?e.includes(rE.Kd):e.fetch.includes(rE.Kd))}function rR(e){return e.endsWith(".git")?e.slice(0,-4):e}function rD(e){if(!e)return null;var t="string"==typeof e?e:e.fetch;return rT(t)?rR(t):null}function rI(e){var t="string"==typeof e?e:e.fetch;if(rT(t)){var n=(t=rR(t)).split("/");if(n.length<2)return null;var r=n[n.length-2],i=n[n.length-1];return"".concat(r,"/").concat(i)}return null}var rB=(0,H.X)({body:[j.l0.p(4),j.l0.colWithGap(8),j.l0.borderRadius(0,0,8,8)],remedies:[j.l0.flex.row,j.l0.align.center,j.l0.justify.end,j.l0.flex.wrap,{gap:"8px"}]});function rG(e){var t=e.description,n=e.remedies,r=e.error;return(0,N.BX)(em.Tg,{css:rB.body,elevated:!0,children:[(0,N.tZ)(F.xv,{children:t}),(0,N.BX)(W.G,{css:rB.remedies,children:[n,(0,N.tZ)(ep.zx,{text:"Dismiss",iconLeft:(0,N.tZ)(rg.Z,{}),onClick:r.dismiss})]})]})}function rA(e){var t,n=e.error,r=(0,tN.Z)((t=(0,tP._)(function(e){var t,r,i,o,a,l,c,s,u,d;return(0,tL.Jh)(this,function(f){switch(f.label){case 0:switch(n.type){case ry.aq.UNKNOWN_NOT_GIT:return[3,1];case ry.aq.UNKNOWN:return[3,2];case ry.aq.CHANNEL_CLOSED:return[3,3];case ry.aq.NOT_INITIALIZED:return[3,4];case ry.aq.UNAUTHENTICATED:return[3,5];case ry.aq.INDEX_FILE_CORRUPT:return[3,7];case ry.aq.UNKNOWN_REMOTE:return[3,8];case ry.aq.INDEX_LOCKED:return[3,9];case ry.aq.NO_COMMITS:return[3,10];case ry.aq.PATH_MATCHED_NO_FILES:return[3,11];case ry.aq.USER_NOT_CONFIGURED:return[3,12];case ry.aq.INVALID_REFERENCE:return[3,13];case ry.aq.BRANCH_ALREADY_EXISTS:return[3,14];case ry.aq.MERGE_CONFLICT:return[3,15];case ry.aq.UPSTREAM_NOT_SET:return[3,16];case ry.aq.HEAD_DETACHED:return[3,17];case ry.aq.DIRTY_WORKTREE:return[3,18];case ry.aq.PROTECTED_BRANCH:return[3,19];case ry.aq.PUSH_REJECTED:return[3,20];case ry.aq.REMOTE_ALREADY_EXISTS:return[3,21];case ry.aq.TIMEOUT:return[3,22];case ry.aq.ALREADY_INITIALIZED:return[3,23]}return[3,24];case 1:return t="Unknown error from the Git service. This is probably a bug in the app.",r=null,[3,25];case 2:return t="There was an unrecognized fatal error with Git. This is probably a bug in the app.",r=null,[3,25];case 3:return t="The command was interrupted. Please try again.",r=null,[3,25];case 4:return t="There isn't a Git repository in the Repl's root directory.",r=null,[3,25];case 5:return[4,e.getRemotes()];case 6:if((i=f.sent()).error)return[2,i];if(0!==i.remotes.size){o=!1,a=!0,l=!1,c=void 0;try{for(s=i.remotes.values()[Symbol.iterator]();!(a=(u=s.next()).done);a=!0)if(d=u.value,rT(d)){o=!0;break}}catch(e){l=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}if(o){if(r_(e))return t="Failed to authenticate with the remote. Please ensure that Replit has access to this repository on GitHub.",r=(0,N.tZ)(rS,{label:"Update GitHub Repository Access",callback:n.dismiss,allowReconnect:!0}),[3,25];return t="Failed to authenticate with the remote. You have not connected your Replit account to GitHub, so Replit may not have access to the remote repository. Please connect your account to GitHub and try again.",r=(0,N.tZ)(rS,{label:"Connect to GitHub",callback:n.dismiss,allowReconnect:!0}),[3,25]}}return t="Failed to authenticate with the remote.",r=null,[3,25];case 7:return t="The Git index file is corrupt. This can happen if the index file is manually edited, or if the Git repository is corrupted.",r=null,[3,25];case 8:return t="The remote specified isn't configured.",r=null,[3,25];case 9:return t="Git tried to perform an action but the index lockfile still exists. This means Git either crashed previously or is still running an action.",r=null,[3,25];case 10:return t="There are no commits in the repository.",r=null,[3,25];case 11:return t="The path specified didn't match any files.",r=null,[3,25];case 12:return t="There isn't any user information configured for Git.",r=null,[3,25];case 13:return t="An unknown/invalid reference was specified. This is usually a branch, but it could be something else, such as a tag.",r=null,[3,25];case 14:return t="The branch specified already exists.",r=null,[3,25];case 15:return t="There was an unexpected merge conflict.",r=null,[3,25];case 16:return t="The upstream branch isn't set.",r=null,[3,25];case 17:return t="The HEAD is detached. You have a commit checked out, not a branch.",r=null,[3,25];case 18:return t="There are uncommitted changes.",r=null,[3,25];case 19:return t="This operation cannot be performed on a protected branch.",r=null,[3,25];case 20:return t="The push was rejected by the remote. This is usually because the remote has commits that aren't in the local repository.",r=null,[3,25];case 21:return t="The remote specified already exists.",r=null,[3,25];case 22:return t="The remote operation timed out.",r=null,[3,25];case 23:return t="There is already a Git repository in the Repl's root directory.",r=null,[3,25];case 24:return t="We ran into an unknown error that we don't have a description for. This is probably a bug with the app.",r=null,[3,25];case 25:return[2,{description:t,remedies:r,error:null}]}})}),function(e){return t.apply(this,arguments)}),[n],{refresh:!1});if(!r)return(0,N.tZ)(rG,{description:null,remedies:null,error:n});if(r.error)return(0,N.tZ)(rG,{description:"Unknown error from the Git service. This is probably a bug in the app.",remedies:null,error:n});var i=r.description,o=r.remedies;return(0,N.tZ)(rG,{description:i,remedies:o,error:n})}var rP=(0,H.X)({errorNotification:[{pointerEvents:"all"},j.l0.p(1),j.l0.backgroundColor.accentNegativeDimmer,j.l0.borderRadius(8),j.l0.shadow(3)],header:[j.l0.py(4),j.l0.px(8),j.l0.display.flex,j.l0.flex.row,j.l0.align.center,j.l0.justify.spaceBetween,j.l0.color.accentNegativeStrongest],headerText:[j.l0.rowWithGap(4),j.l0.align.center],errorType:[j.l0.font.code,{opacity:.75}],body:[j.l0.pt(4),j.l0.pb(8),j.l0.px(8),j.l0.colWithGap(8),j.l0.backgroundColor.backgroundHigher,j.l0.borderRadius(0,0,8,8)]});function rL(e){var t=e.error;return(0,N.BX)(W.G,{css:rP.errorNotification,children:[(0,N.BX)(W.G,{css:rP.header,children:[(0,N.BX)(W.G,{css:rP.headerText,children:[(0,N.tZ)(rv.Z,{}),(0,N.tZ)(F.xv,{variant:"subheadDefault",multiline:!1,children:function(e){switch(e.type){case ry.aq.UNKNOWN_NOT_GIT:return"Unknown Error";case ry.aq.UNKNOWN:return"Unknown Git Error";case ry.aq.NOT_INITIALIZED:case ry.aq.UNAUTHENTICATED:case ry.aq.INDEX_FILE_CORRUPT:case ry.aq.UNKNOWN_REMOTE:case ry.aq.INDEX_LOCKED:case ry.aq.NO_COMMITS:case ry.aq.PATH_MATCHED_NO_FILES:case ry.aq.USER_NOT_CONFIGURED:case ry.aq.INVALID_REFERENCE:case ry.aq.BRANCH_ALREADY_EXISTS:case ry.aq.MERGE_CONFLICT:case ry.aq.HEAD_DETACHED:case ry.aq.DIRTY_WORKTREE:case ry.aq.PUSH_REJECTED:case ry.aq.PROTECTED_BRANCH:case ry.aq.REMOTE_ALREADY_EXISTS:case ry.aq.ALREADY_INITIALIZED:case ry.aq.TIMEOUT:return"Git Error";default:return"Unknown Error"}}(t)})]}),(0,N.tZ)(F.xv,{css:rP.errorType,multiline:!1,children:t.type})]}),(0,N.tZ)(W.G,{css:rP.body,children:(0,N.tZ)(rA,{error:t})})]})}var rN=(0,H.X)({errorList:[{pointerEvents:"none"},{transition:"background-color 100ms"},j.l0.position.absolute,j.l0.top(0),j.l0.bottom(0),j.l0.left(0),j.l0.right(0),j.l0.p(8),j.l0.colWithGap(16),j.l0.zIndex(10)]});function rO(){var e=(0,ny.Dv)(nC,{store:nZ()});return(0,N.tZ)(W.G,{style:{backgroundColor:e.length>0?"rgba(0, 0, 0, 0.25)":"transparent"},css:rN.errorList,children:e.map(function(e){return(0,N.tZ)(rL,{error:e},e.id)})})}function rU(){return(0,N.BX)(W.G,{children:[(0,N.tZ)(F.xv,{multiline:!1,children:"Unsupported state: you are applying a mailbox patch."}),(0,N.tZ)(F.xv,{multiline:!1,children:"Please finish the patch manually."})]})}function rM(){return(0,N.BX)(W.G,{children:[(0,N.tZ)(F.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a bisect."}),(0,N.tZ)(F.xv,{multiline:!1,children:"Please finish the bisect manually."})]})}var rX=n(45271),rF=n(99236),rW=n(81836),rH=n(8684),rV=n(8261);function rz(){var e=(0,ej._)(["\n  query PushBranchButtonIsProjectRepl($id: String!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        project {\n          id\n        }\n      }\n    }\n  }\n"]);return rz=function(){return e},e}var rj={},rq=(0,eq.Ps)(rz()),rJ=function(e){return"repl-".concat(e)},rY=function(e){var t=e.replId,n=e.branch;return"repl-".concat(t,"/").concat(n)},r$=(a=(0,tP._)(function(e){var t,n,r,i,o,a,l,c;return(0,tL.Jh)(this,function(s){switch(s.label){case 0:return t=e.git,r=rJ(n=e.replId),i="".concat(n,"@ssh.v1.replit.dev:."),[4,t.getRemotes()];case 1:if((o=s.sent()).error)return[2,o];if(!o.remotes.has(r))return[3,4];if(!((null===(a=o.remotes.get(r))||void 0===a?void 0:a.fetch)!==i))return[3,3];return[4,t.setRemoteURL({remote:r,url:i})];case 2:if((l=s.sent()).error)return[2,l];s.label=3;case 3:return[2,{error:null,remote:{name:r,url:i}}];case 4:return[4,t.addRemote({name:r,url:i,fetch:!0})];case 5:if((c=s.sent()).error&&c.error!==ry.aq.REMOTE_ALREADY_EXISTS)return[2,c];return[2,{error:null,remote:{name:r,url:i}}]}})}),function(e){return a.apply(this,arguments)}),rK=n(36097),rQ=n(93873),r0=(0,H.X)({modalContainer:[j.l0.colWithGap(24)],statusText:[j.l0.display.flex,j.l0.flex.row,j.l0.textAlign.left],settingsButton:[j.l0.reset.button,j.l0.linkStyle,j.l0.fontWeight.medium,j.l0.textAlign.left,j.l0.ml(4)]}),r1=function(e){var t=e.onViewSettingsClick;return(0,N.tZ)("button",{css:r0.settingsButton,onClick:t,children:"Settings view."})};function r2(e){var t,n,r,i,o,a,l=e.branch,c=e.onViewSettingsClick,s=e.performPaneOperation,u=(0,P._)((0,$.useState)(!1),2),d=u[0],f=u[1],h=(0,P._)((0,$.useState)(!1),2),p=h[0],m=h[1],v=(0,P._)((0,$.useState)(null),2),g=v[0],y=v[1],b=(0,P._)((0,$.useState)(!1),2),w=b[0],Z=b[1],x=(0,rQ.e)({controlName:rK.r}),C=(t={variables:{id:(0,ez.Z)()},skip:!x},n=(0,es._)({},rj,t),eJ.a(rq,n)).data,_=x&&(null==C?void 0:null===(i=C.repl)||void 0===i?void 0:i.__typename)==="Repl"&&(null===(o=C.repl.project)||void 0===o?void 0:o.id)||!1,S=n_(),k=(0,q.Z)().git,E=(0,tN.Z)((r=(0,tP._)(function(e){var t,n,r,i,o,a,l;return(0,tL.Jh)(this,function(c){switch(c.label){case 0:return[4,e.isInitialized()];case 1:if((t=c.sent()).error)return S(t.error),tU({context:"publish-branch-button-initialized",gitService:e,result:t}),[2,{remote:null,error:t.error}];if(!t.initialized)return[2,{remote:null,error:null}];return[4,e.getRemotes()];case 2:if((n=c.sent()).error)return tU({context:"publish-branch-button-get-remotes",gitService:e,result:n}),S(n.error),[2,n];return r=function(e){if(!e||!e.size)return null;if(e.has("origin"))return"origin";var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=(0,P._)(i.value,2),l=a[0];if(!({url:a[1].fetch}).url.endsWith(".replit.dev:."))return l}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return null}(n.remotes),[4,e.status()];case 3:if((i=c.sent()).error)return S(i.error),tU({context:"publish-branch-button-status",gitService:e,result:i}),[2,i];if(!(i.branch&&r))return[3,5];return o=(0,rk.C)(i.branch),a="refs/remotes/".concat(r,"/").concat(o),[4,e.branchExists(a)];case 4:(l=c.sent()).error?(tU({context:"publish-branch-button-branch-exists",gitService:e,result:l,data:{upstream:o,fullRemoteRef:a}}),S(l.error)):l.exists&&y("".concat(r,"/").concat(o)),c.label=5;case 5:return[2,{remote:r,error:null}]}})}),function(e){return r.apply(this,arguments)}),[S],{keepStaleResult:!1});if((0,$.useEffect)(function(){function e(){return(e=(0,tP._)(function(){var e;return(0,tL.Jh)(this,function(t){switch(t.label){case 0:if(!(w&&g))return[3,2];return[4,k.setBranchUpstream({upstream:g})];case 1:(e=t.sent()).error&&(tU({context:"publish-branch-button-set-branch-upstream",gitService:k,result:e,data:{upstream:g}}),S(e.error)),Z(!1),y(null),t.label=2;case 2:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[k,S,w,g]),null==E?void 0:E.error)return null;var T=E?E.remote:null,R=null===E,D=l.type!==ng.HO.LOCAL||!T||w;function I(){return(I=(0,tP._)(function(){var e;return(0,tL.Jh)(this,function(t){switch(t.label){case 0:if(!T||d)return[2];if(g)return m(!0),[2];return f(!0),[4,k.push({publish:{remote:T}})];case 1:return(e=t.sent()).error?(f(!1),S(e.error),tU({context:"publish-branch-button-push",gitService:k,result:e,data:{remote:T}})):(k.forceRefresh(),(0,nj.J)("branch-published-to-remote")),[2]}})})).apply(this,arguments)}var B="".concat(T,"/").concat(l.name);return(a=d?"Pushing to '".concat(B,"'..."):l.type!==ng.HO.LOCAL?"Branch has already been pushed to '".concat(B,"'"):R?"Checking if branch ".concat(l.name," can be pushed..."):T?"Push branch as '".concat(B,"'"):"No remotes to push to",_&&E&&!T)?(0,N.BX)(N.HY,{children:[(0,N.tZ)(ep.zx,{iconLeft:(0,N.tZ)(rV.D,{text:"Beta",variant:"outline",colorway:"blue"}),text:"Collaborate in the Project pane",onClick:function(){s({operation:"open",pane:{type:"project"}})},iconRight:(0,N.tZ)(rH.Z,{})}),(0,N.tZ)(F.xv,{color:"dimmer",children:"Use the Project pane to merge your changes between repls and collaborate with your teammates. You've received early access to this feature with your Replit Teams subscription."})]}):(0,N.BX)(N.HY,{children:[g?(0,N.tZ)(rX.u,{isOpen:p,onRequestClose:function(){return m(!1)},children:(0,N.BX)(W.G,{css:r0.modalContainer,children:[(0,N.tZ)(F.xv,{variant:"headerDefault",children:"Branch already exists"}),(0,N.tZ)(F.xv,{children:"Upstream branch '".concat(g,"' already exists.\n          To push the branch, please confirm you would like to set upstream branch to it.")}),(0,N.tZ)(ep.zx,{text:"Set upstream to '".concat(g,"'"),onClick:function(){g&&(Z(!0),m(!1))}})]})}):null,R||T?null:(0,N.tZ)(rF.E,{text:(0,N.tZ)(W.G,{css:r0.statusText,children:(0,N.BX)("span",{children:["No remote repositories configured. To push your changes, add a remote repository in the",(0,N.tZ)(r1,{onViewSettingsClick:c})]})}),colorway:"warning",closable:!1}),(0,N.tZ)(ep.zx,{text:a,iconLeft:R||d?(0,N.tZ)(z.Z,{}):(0,N.tZ)(rW.Z,{}),onClick:function(){return I.apply(this,arguments)},loading:R||d,disabled:D})]})}var r4=n(85638),r3=n(59249),r8=(0,H.X)({remoteUrl:[{border:"none"},j.l0.height("auto"),j.l0.py(4),j.l0.px(8)]});function r6(e){var t=e.branch,n=e.remotes,r=(0,P._)((0,$.useMemo)(function(){if(t.type===ng.HO.LOCAL)return[null,null,null];var e=n.get(t.remote);if(!e)return[null,null,null];var r=rD(e),i=rI(e),o=rT(r);return[r,i,o]},[t,n]),3),i=r[0],o=r[1],a=r[2];return i&&o?(0,N.tZ)(r4.Z,{css:r8.remoteUrl,text:o,href:i,target:"_blank",iconLeft:a?(0,N.tZ)(rx.Z,{}):void 0,iconRight:(0,N.tZ)(r3.Z,{}),variant:"outlined",size:"small"}):null}var r5=n(81464),r7=n(76171),r9=(0,H.X)({warning:[j.l0.align.start],header:[j.l0.fontWeight.bold]});function ie(){return(0,N.BX)(N.HY,{children:[(0,N.tZ)(rF.E,{css:r9.warning,icon:(0,N.tZ)(rv.Z,{}),colorway:"warning",text:(0,N.BX)(N.HY,{children:[(0,N.tZ)("span",{css:r9.header,children:"Can't push or pull from GitHub"}),(0,N.tZ)("br",{}),(0,N.tZ)("span",{children:"This Repl has a GitHub repository as a remote, but you are not connected to GitHub."})]})}),(0,N.tZ)(rS,{})]})}var it=n(2447),ir=(0,H.X)({text:[j.l0.flex.shrink(1)]});function ii(e){var t=e.date,n=(0,P._)((0,$.useState)(null),2),r=n[0],i=n[1];return((0,$.useEffect)(function(){if(t){var e=function(){var e=new Date,n="just now";e.getTime()-t.getTime()>6e4&&(n=(0,it.Z)(t,e,{addSuffix:!0})),i(n=n.replace(/minutes?/,"min"))};e();var n=setInterval(e,6e4);return function(){clearInterval(n),i(null)}}},[t]),r)?(0,N.BX)(F.xv,{css:ir.text,color:"dimmest",variant:"small",multiline:!1,children:["last fetched ",r]}):null}function io(e){var t=e.hasRemoteMergeConflict,n=e.hasUnpulledCommits,r=e.hasUnpushedCommits,i=e.workTreeDirty,o=[];return i&&n&&o.push("Can't pull: you have uncommitted changes"),t&&(n||r)&&(n&&r?(i||o.push("Warning: pulling will start a merge with conflicts"),o.push("Can't push: unpulled changes must be merged first")):n?i||o.push("Warning: pulling will start a merge with conflicts"):r&&o.push("Can't push: merge conflict with remote")),o.length?(0,N.tZ)(N.HY,{children:o.map(function(e){return(0,N.tZ)(rF.E,{text:e,colorway:"warning",icon:(0,N.tZ)(rv.Z,{})},e)})}):null}var ia=(0,H.X)({divider:[j.l0.mx(8)]});function il(e){var t=e.ahead,n=e.behind;if(!t&&!n)return(0,N.tZ)(F.xv,{color:"dimmest",multiline:!1,children:"Nothing to pull or push"});var r=null,i=null;if(n){var o=(0,eM.Z)("commit",n);r="".concat(n," ").concat(o," to pull")}if(t){var a=(0,eM.Z)("commit",t);i="".concat(t," ").concat(a," to push")}return(0,N.BX)(F.xv,{color:"dimmer",variant:"small",multiline:!1,children:[r?(0,N.tZ)("span",{children:r}):null,r&&i?(0,N.tZ)("span",{css:ia.divider,children:"•"}):null,i?(0,N.tZ)("span",{children:i}):null]})}var ic=(0,H.X)({container:[j.l0.flex.grow(1)],branch:[j.l0.mr(4),j.l0.color.foregroundDefault,j.l0.fontWeight.medium,{"&:hover":{textDecoration:"underline"}}],divider:[j.l0.color.foregroundDimmest],text:[j.l0.ml(4),j.l0.color.foregroundDimmest]});function is(e){var t=e.upstream,n=e.remotes,r=(0,$.useMemo)(function(){return function(e,t){var n=null,r=null;if(e instanceof Map){var i=(0,rk.Tg)(t),o=i[0];if(n=i[1],!o||!n)return null;var a=e.get(o);if(!a)return null;r=rD(a)}else n=t,r=rD(e);return r&&rT(r)?"".concat(r,"/tree/").concat(n):null}(n,t)},[t,n]);return(0,N.BX)(F.xv,{css:ic.container,variant:"small",multiline:!1,children:[r?(0,N.tZ)("a",{css:ic.branch,href:r,target:"_blank",children:t}):(0,N.tZ)("span",{css:ic.branch,children:t}),(0,N.tZ)("span",{css:ic.divider,children:"•"}),(0,N.tZ)("span",{css:ic.text,children:"upstream"})]})}var iu=n(97975);function id(e){return ih.apply(this,arguments)}function ih(){return(ih=(0,tP._)(function(e){var t,n;return(0,tL.Jh)(this,function(r){switch(r.label){case 0:return t=null,[4,Promise.race([e,new Promise(function(e){return t=setTimeout(function(){tO.$e(function(e){e.setTag("gitPane",!0),tO.Tb(Error("Remote update operation timed out"))}),e({error:ry.aq.TIMEOUT})},9e4)})])];case 1:return n=r.sent(),t&&clearTimeout(t),[2,n]}})})).apply(this,arguments)}var ip=(0,H.X)({container:[j.l0.borderRadius(8)],loading:[j.l0.height(64),eX.p.backgroundPulse(),j.l0.borderRadius(8)],header:[j.l0.py(4),j.l0.px(8),j.l0.rowWithGap(8),j.l0.align.center,j.l0.flex.shrink(1),j.l0.border({color:j.TV.outlineDimmer,direction:"bottom"})],fetch:{border:"none"},body:[j.l0.px(8),j.l0.pt(8),j.l0.pb(12),j.l0.colWithGap(8)],buttons:[j.l0.rowWithGap(8),j.l0.flex.grow(1)],sync:[j.l0.flex.grow(1)],pullPush:[j.l0.flex.row],pull:[j.l0.pr(12),j.l0.borderRadius(8,0,0,8),j.l0.border({color:j.TV.outlineDefault,direction:"right"})],push:[j.l0.borderRadius(0,8,8,0)]});function im(e){var t=e.remotes,n=e.gotoPendingState,r=n_(),i=function(e){var t,n=e.onError,r=e.onPullConflicts,i=(0,P._)((0,$.useState)(!1),2),o=i[0],a=i[1],l=(0,P._)((0,$.useState)(!1),2),c=l[0],s=l[1],u=(0,P._)((0,$.useState)(!1),2),d=u[0],f=u[1],h=(0,P._)((0,$.useState)(!1),2),p=h[0],m=h[1],v=(0,q.Z)().git,g=(0,tN.Z)((t=(0,tP._)(function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y;return(0,tL.Jh)(this,function(b){switch(b.label){case 0:return i={upstream:null,hasUnpulledCommits:!1,hasUnpushedCommits:!1,hasRemoteMergeConflict:!1,pullMode:iu.T.FF_ONLY,canPull:!1,canPush:!1,workTreeDirty:!1,needGitHubConnection:!1,ahead:0,behind:0,lastFetched:null},[4,e.getRepositoryState()];case 1:if((o=b.sent()).error)return[2,o];if(a=o.state,o.type!==nv.y5.NORMAL)return[2,{error:ry.aq.INVALID_STATE}];return(a===nv.yG.DIRTY_WORKTREE||a===nv.yG.DIRTY_INDEX)&&(i.workTreeDirty=!0),[4,e.status()];case 2:if((l=b.sent()).error)return[2,l];if(c=l.branch,s=null===(t=l.upstream)||void 0===t?void 0:t.branch,d=null!==(u=null===(n=l.upstream)||void 0===n?void 0:n.ahead)&&void 0!==u?u:0,h=null!==(f=null===(r=l.upstream)||void 0===r?void 0:r.behind)&&void 0!==f?f:0,!c)return[2,{error:ry.aq.HEAD_DETACHED}];if(i.ahead=d,i.behind=h,!s)return[3,7];return i.upstream=s,i.hasUnpulledCommits=h>0,i.hasUnpushedCommits=d>0,[4,e.lastFetched()];case 3:if((p=b.sent()).error)return[2,p];return i.lastFetched=p.lastFetched,[4,e.canMergeBranches(c,s)];case 4:if((m=b.sent()).error)return[2,m];if(m.canMerge||(i.hasRemoteMergeConflict=!0),e.hasProfile(ry.rG.GITHUB))return[3,6];if(!(v=(0,nA.CH)(s)))return[2,{error:ry.aq.INVALID_REFERENCE}];return[4,e.getRemotes()];case 5:if((g=b.sent()).error)return[2,g];if(!(y=g.remotes.get(v)))return[2,{error:ry.aq.INVALID_REFERENCE}];rT(y)&&(i.needGitHubConnection=!0),b.label=6;case 6:i.workTreeDirty||i.needGitHubConnection||(i.canPull=!0),!i.hasUnpushedCommits||i.hasUnpulledCommits||i.needGitHubConnection||(i.canPush=!0),d>0&&(i.pullMode=i.hasRemoteMergeConflict?iu.T.MERGE:iu.T.REBASE),b.label=7;case 7:return[2,(0,eu._)((0,es._)({},i),{error:null})]}})}),function(e){return t.apply(this,arguments)}));if(!g)return{type:"loading"};if(g.error||!g.upstream)return{type:"error",error:g.error};if(!g.upstream)return{type:"noUpstream"};var y=g.upstream,b=g.hasUnpulledCommits,w=g.hasUnpushedCommits,Z=g.hasRemoteMergeConflict,x=g.pullMode,C=g.canPull,_=g.canPush,S=g.workTreeDirty,k=g.needGitHubConnection,E=g.ahead,T=g.behind,R=g.lastFetched;if(k)return{type:"needGitHubConnection",upstream:y};var D=o||c||d||p,I=!y||k||D,B=!C||D,G=!_||D,A=!C&&!_||Z||D;function L(){return(L=(0,tP._)(function(){var e;return(0,tL.Jh)(this,function(t){switch(t.label){case 0:if(I)return[2];return a(!0),[4,id(v.fetch())];case 1:return e=t.sent(),v.forceRefresh(),a(!1),e.error?n(e.error):(0,nj.J)("remote-fetched"),[2]}})})).apply(this,arguments)}function N(){return(N=(0,tP._)(function(){var e;return(0,tL.Jh)(this,function(t){switch(t.label){case 0:if(B)return[2];return s(!0),[4,id(v.pull({mode:x,allowConflicts:!0}))];case 1:return e=t.sent(),s(!1),e.error?n(e.error):(e.hasConflicts&&r(),v.forceRefresh(),(0,nj.J)("upstream-pulled")),[2]}})})).apply(this,arguments)}function O(){return(O=(0,tP._)(function(){var e;return(0,tL.Jh)(this,function(t){switch(t.label){case 0:if(G)return[2];return f(!0),[4,id(v.push())];case 1:return e=t.sent(),v.forceRefresh(),f(!1),e.error?n(e.error):(0,nj.J)("upstream-pushed"),[2]}})})).apply(this,arguments)}function U(){return(U=(0,tP._)(function(){var e,t;return(0,tL.Jh)(this,function(r){switch(r.label){case 0:if(A)return[2];if(m(!0),!C)return[3,2];return[4,id(v.pull({mode:x}))];case 1:if((e=r.sent()).error)return n(e.error),m(!1),[2];(0,nj.J)("upstream-pulled"),r.label=2;case 2:if(!_)return[3,4];return[4,v.push()];case 3:if((t=r.sent()).error)return n(t.error),m(!1),[2];(0,nj.J)("upstream-pushed"),r.label=4;case 4:return v.forceRefresh(),m(!1),[2]}})})).apply(this,arguments)}return{type:"remote",fetch:function(){return L.apply(this,arguments)},fetching:o,fetchDisabled:I,lastFetched:R,pull:function(){return N.apply(this,arguments)},pulling:c,pullDisabled:B,pullMode:x,canPull:C,push:function(){return O.apply(this,arguments)},pushing:d,pushDisabled:G,canPush:_,sync:function(){return U.apply(this,arguments)},syncing:p,syncDisabled:A,upstream:y,hasUnpulledCommits:b,hasUnpushedCommits:w,hasRemoteMergeConflict:Z,workTreeDirty:S,ahead:E,behind:T}}({onError:r,onPullConflicts:n}),o="error"===i.type?i.error:null;return((0,$.useEffect)(function(){o&&r(o)},[o,r]),"loading"===i.type)?(0,N.tZ)(em.Tg,{css:ip.loading,elevated:!0}):"error"===i.type||"noUpstream"===i.type?null:"needGitHubConnection"===i.type?(0,N.BX)(em.Tg,{css:ip.container,elevated:!0,children:[(0,N.BX)(W.G,{css:ip.header,children:[(0,N.tZ)(is,{upstream:i.upstream,remotes:t}),(0,N.tZ)(ep.zx,{css:ip.fetch,text:"Fetch",iconLeft:(0,N.tZ)(rn.Z,{}),disabled:!0,variant:"outlined",size:"small"})]}),(0,N.tZ)(W.G,{css:ip.body,children:(0,N.tZ)(ie,{})})]}):(0,N.BX)(em.Tg,{css:ip.container,elevated:!0,children:[(0,N.BX)(W.G,{css:ip.header,children:[(0,N.tZ)(is,{upstream:i.upstream,remotes:t}),(0,N.tZ)(ii,{date:i.lastFetched}),(0,N.tZ)(ep.zx,{css:ip.fetch,text:"Fetch",iconLeft:i.fetching?(0,N.tZ)(z.Z,{}):(0,N.tZ)(rn.Z,{}),onClick:i.fetch,loading:i.fetching,disabled:i.fetchDisabled,variant:"outlined",size:"small"})]}),(0,N.BX)(W.G,{css:ip.body,children:[(0,N.tZ)(io,{hasRemoteMergeConflict:i.hasRemoteMergeConflict,hasUnpulledCommits:i.hasUnpulledCommits,hasUnpushedCommits:i.hasUnpushedCommits,workTreeDirty:i.workTreeDirty}),(0,N.tZ)(il,{ahead:i.ahead,behind:i.behind}),(0,N.BX)(W.G,{css:ip.buttons,children:[(0,N.tZ)("div",{css:ip.sync,children:(0,N.tZ)(tB.u,{tooltip:"Pull & push the latest changes",children:(0,N.tZ)(ep.zx,{css:ip.sync,text:"Sync with Remote",iconLeft:i.syncing?(0,N.tZ)(z.Z,{}):(0,N.tZ)(r5.Z,{rotate:90}),onClick:i.sync,loading:i.syncing,disabled:i.syncDisabled,size:"small"})})}),(0,N.BX)(W.G,{css:ip.pullPush,children:[(0,N.tZ)(ep.zx,{css:ip.pull,text:"Pull",iconLeft:i.pulling?(0,N.tZ)(z.Z,{}):(0,N.tZ)(V.Z,{}),onClick:i.pull,loading:i.pulling,disabled:i.pullDisabled,size:"small"}),(0,N.tZ)(ep.zx,{css:ip.push,text:"Push",iconLeft:i.pushing?(0,N.tZ)(z.Z,{}):(0,N.tZ)(r7.Z,{}),onClick:i.push,loading:i.pushing,disabled:i.pushDisabled,size:"small"})]})]})]})]})}var iv=function(e,t,n){var r=new Set,i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;r.add(s.hash)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}var u=!0,d=!1,f=void 0;try{for(var h,p=n[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var m=h.value;r.add(m.hash)}}catch(e){d=!0,f=e}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}return e.filter(function(e){return!r.has(e.hash)})},ig=n(97486),iy=n(29212),ib=(0,H.X)({path:[j.l0.rowWithGap(8),j.l0.flex.growAndShrink(1),j.l0.align.center],source:[j.l0.color.foregroundDimmest],sourceArrow:[j.l0.mx(8)]});function iw(e){var t=e.path,n=e.prefix,r=e.source,i=e.onClick;return(0,N.BX)(W.G,{css:ib.path,children:[(0,N.tZ)(X.Z,{path:t}),(0,N.BX)(F.xv,{multiline:!1,children:[(0,N.tZ)(nq.yx,{path:t,prefix:n,onClick:i}),r?(0,N.BX)("span",{css:ib.source,children:[(0,N.tZ)("span",{css:ib.sourceArrow,children:"←"}),(0,N.tZ)(nq.yx,{path:r})]}):null]})]})}var iZ=(0,H.X)({container:[j.l0.colWithGap(8)],buttons:[j.l0.rowWithGap(8),j.l0.justify.end],restoringBoth:[j.l0.colWithGap(12)],listContainer:[j.l0.colWithGap(4)],list:[j.l0.px(4),j.l0.colWithGap(2)]});function ix(e){var t=e.show,n=e.files,r=e.pathMap,i=e.callback,o=(0,td.Z)(i),a=(0,$.useCallback)(function(){var e;null===(e=o.current)||void 0===e||e.call(o,!0)},[o]),l=(0,$.useCallback)(function(){var e;null===(e=o.current)||void 0===e||e.call(o,!1)},[o]);return(0,N.tZ)(rX.u,{isOpen:t,onRequestClose:l,children:t?(0,N.BX)(W.G,{css:iZ.container,children:[(0,N.BX)(F.h4,{level:2,children:["Discard ",(0,eM.Z)("Change",n.length)]}),(0,N.tZ)(iC,{files:n,pathMap:r}),(0,N.BX)(W.G,{css:iZ.buttons,children:[(0,N.tZ)(ep.zx,{text:"Cancel",iconLeft:(0,N.tZ)(ig.Z,{}),onClick:l}),(0,N.tZ)(ep.zx,{text:"Discard ".concat((0,eM.Z)("Change",n.length)),iconLeft:(0,N.tZ)(iy.Z,{}),colorway:"negative",onClick:a})]})]}):null})}function iC(e){var t=e.files,n=e.pathMap,r=[],i=[],o=!0,a=!1,l=void 0;try{for(var c,s=t[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;u.type.worktree===ty.h.UNTRACKED?i.push(u):r.push(u)}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return!r.length&&i.length?(0,N.BX)(W.G,{css:iZ.listContainer,children:[(0,N.tZ)(F.xv,{children:1===i.length?"Do you want to permanently delete this file?":"Do you want to permanently delete these files?"}),(0,N.tZ)(i_,{files:i,pathMap:n})]}):r.length&&!i.length?(0,N.BX)(W.G,{css:iZ.listContainer,children:[(0,N.tZ)(F.xv,{children:1===r.length?"Do you want to undo the changes to this file?":"Do you want to undo the changes to these files?"}),(0,N.tZ)(i_,{files:r,pathMap:n})]}):(0,N.BX)(W.G,{css:iZ.restoringBoth,children:[r.length?(0,N.BX)(W.G,{css:iZ.listContainer,children:[(0,N.BX)(F.h4,{level:3,children:["Tracked ",(0,eM.Z)("File",r.length)]}),(0,N.tZ)(F.xv,{multiline:!1,children:1===r.length?"This file will have its changes undone.":"These files will have their changes undone."}),(0,N.tZ)(i_,{files:r,pathMap:n})]}):null,i.length?(0,N.BX)(W.G,{css:iZ.listContainer,children:[(0,N.BX)(F.h4,{level:3,children:["Untracked ",(0,eM.Z)("File",i.length)]}),(0,N.tZ)(F.xv,{multiline:!1,children:1===i.length?"This file will be permanently deleted.":"These files will be permanently deleted."}),(0,N.tZ)(i_,{files:i,pathMap:n})]}):null]})}function i_(e){var t=e.files,n=e.pathMap,r=(0,$.useMemo)(function(){return t.length>20?t.slice(0,20):t},[t]);return(0,N.tZ)(W.G,{children:(0,N.BX)("ul",{css:iZ.list,children:[r.map(function(e){var t;return(0,N.tZ)("li",{children:(0,N.tZ)(iw,{path:e.path,prefix:n.get(e.path),source:null===(t=e.source)||void 0===t?void 0:t.path})},e.path)}),t.length<=20?null:(0,N.tZ)("li",{children:(0,N.BX)(F.xv,{color:"dimmer",children:["... ",t.length-20," more"," ",(0,eM.Z)("file",t.length-20)]})})]})})}function iS(e){var t=(0,P._)((0,$.useState)(function(){return{show:!1,files:[]}}),2),n=t[0],r=t[1];return{openRestoreConfirmationModal:(0,$.useCallback)(function(e){return new Promise(function(t){0===e.length&&t(!1),r({show:!0,files:e,callback:function(e){r({show:!1,files:[],callback:void 0}),t(e)}})})},[]),restoreConfirmationModal:(0,$.useMemo)(function(){return(0,N.tZ)(ix,(0,eu._)((0,es._)({},n),{pathMap:e}))},[n,e])}}var ik=n(98512),iE=(0,H.X)({actionsIndex:[j.l0.height(24),j.l0.align.center,j.l0.borderRadius(4)],actionsWorktree:[j.l0.height(24),j.l0.flex.row,j.l0.align.center,j.l0.borderRadius(4)],unstage:[j.l0.height(24),j.l0.width(24),j.l0.borderRadius(2)],stage:[j.l0.px(12),j.l0.height(24),j.l0.width(24),j.l0.borderRadius(2)],discard:[j.l0.pl(16),j.l0.pr(12),j.l0.height(24),j.l0.width(24),j.l0.borderRadius(2)],discardIcon:{transform:"scale(0.85)"},divider:[j.l0.height("75%"),j.l0.width(1),j.l0.backgroundColor.outlineStronger]});function iT(e){var t=e.file,n=e.list,r=e.stageFiles,i=e.restoreFiles,o=e.disabled,a=void 0!==o&&o,l=(0,P._)((0,$.useState)(!1),2),c=l[0],s=l[1],u=(0,P._)((0,$.useState)(!1),2),d=u[0],f=u[1];function h(){return(h=(0,tP._)(function(){return(0,tL.Jh)(this,function(e){switch(e.label){case 0:if(a)return[2];return s(!0),[4,r({reset:[t.path]})];case 1:return e.sent(),s(!1),[2]}})})).apply(this,arguments)}function p(){return(p=(0,tP._)(function(){return(0,tL.Jh)(this,function(e){switch(e.label){case 0:if(a)return[2];return s(!0),[4,r({add:[t.path]})];case 1:return e.sent(),s(!1),[2]}})})).apply(this,arguments)}function m(){return(m=(0,tP._)(function(){return(0,tL.Jh)(this,function(e){switch(e.label){case 0:if(a||"worktree"!==n)return[2];return f(!0),[4,i(t.path)];case 1:return e.sent(),f(!1),[2]}})})).apply(this,arguments)}return a=a||d||c,"index"===n?(0,N.tZ)(em.Tg,{elevated:!0,css:iE.actionsIndex,children:(0,N.tZ)(M.hU,{css:iE.unstage,alt:"Unstage changes",size:18,tooltipDelay:"long",onClick:function(){return h.apply(this,arguments)},disabled:a,children:c?(0,N.tZ)(z.Z,{}):(0,N.tZ)(ik.Z,{})})}):(0,N.BX)(em.Tg,{elevated:!0,css:iE.actionsWorktree,children:[(0,N.tZ)(M.hU,{css:iE.discard,alt:"Discard changes",size:18,tooltipDelay:"long",onClick:function(){return m.apply(this,arguments)},disabled:a,children:d?(0,N.tZ)(z.Z,{}):(0,N.tZ)(iy.Z,{css:iE.discardIcon})}),(0,N.tZ)("div",{css:iE.divider}),(0,N.tZ)(M.hU,{css:iE.stage,alt:"Stage changes",size:18,tooltipDelay:"long",onClick:function(){return p.apply(this,arguments)},disabled:a,children:c?(0,N.tZ)(z.Z,{}):(0,N.tZ)(nG.Z,{})})]})}var iR=(0,H.X)({modifiedFile:[j.l0.py(2),j.l0.rowWithGap(4),j.l0.align.center]});function iD(e){var t,n=e.file,r=e.list,i=e.stageFiles,o=e.restoreFiles,a=e.pathMap,l=e.disabled,c=e.onFilePathClick,s=null==a?void 0:a.get(n.path),u=null===(t=n.source)||void 0===t?void 0:t.path,d="index"===r?n.type.index:n.type.worktree,f=(0,ec.Z)(function(){if(d!==ty.h.DELETED)return function(){return c({path:n.path})}},[n.path,c,d]);return(0,N.BX)(W.G,{css:iR.modifiedFile,children:[(0,N.tZ)(iw,{path:n.path,prefix:s,source:u,onClick:f}),(0,N.tZ)(tw,{type:d}),(0,N.tZ)(iT,{file:n,list:r,stageFiles:i,restoreFiles:o,disabled:void 0!==l&&l})]})}var iI=(0,H.X)({actions:[j.l0.rowWithGap(2),j.l0.backgroundColor.backgroundHighest,j.l0.borderRadius(8)],buttonDiscard:[j.l0.borderRadius(8,0,0,8)],buttonStage:[j.l0.borderRadius(0,8,8,0)],divider:[j.l0.my(8),j.l0.width(1),j.l0.backgroundColor.outlineStronger]});function iB(e){var t=e.type,n=e.stageFiles,r=e.restoreFiles,i=e.disabled,o=void 0!==i&&i,a=(0,P._)((0,$.useState)(!1),2),l=a[0],c=a[1],s=(0,P._)((0,$.useState)(!1),2),u=s[0],d=s[1];function f(){return h.apply(this,arguments)}function h(){return(h=(0,tP._)(function(){return(0,tL.Jh)(this,function(e){switch(e.label){case 0:if(o)return[2];return c(!0),[4,n({all:"index"!==t})];case 1:return e.sent(),c(!1),[2]}})})).apply(this,arguments)}function p(){return(p=(0,tP._)(function(){return(0,tL.Jh)(this,function(e){switch(e.label){case 0:if(o||"worktree"!==t)return[2];return d(!0),[4,r(!0)];case 1:return e.sent(),d(!1),[2]}})})).apply(this,arguments)}return o=o||u||l,"index"===t?(0,N.tZ)(ep.zx,{text:"Unstage All",iconLeft:l?(0,N.tZ)(z.Z,{}):(0,N.tZ)(ik.Z,{}),onClick:f,disabled:o,loading:l,size:"small"}):(0,N.BX)(W.G,{css:iI.actions,children:[(0,N.tZ)(ep.zx,{css:iI.buttonDiscard,text:"Discard All",iconLeft:u?(0,N.tZ)(z.Z,{}):(0,N.tZ)(iy.Z,{}),onClick:function(){return p.apply(this,arguments)},disabled:o,loading:u,size:"small"}),(0,N.tZ)("div",{css:iI.divider}),(0,N.tZ)(ep.zx,{css:iI.buttonStage,text:"Stage All",iconLeft:l?(0,N.tZ)(z.Z,{}):(0,N.tZ)(nG.Z,{}),onClick:f,disabled:o,loading:l,size:"small"})]})}var iG=(0,H.X)({list:[j.l0.pt(4),j.l0.pb(8),j.l0.colWithGap(4)],listFolded:[j.l0.py(4)],header:[j.l0.px(8),j.l0.rowWithGap(4),j.l0.align.center],headerFoldable:[j.l0.py(4),j.l0.pl(4),j.l0.pr(8),j.l0.rowWithGap(4),j.l0.align.center],headerText:[j.l0.flex.grow(1)],body:[j.l0.px(8),j.l0.maxHeight("25vh"),j.l0.overflowY("auto")]});function iA(e){var t,n=e.files,r=e.type,i=e.stageFiles,o=e.restoreFiles,a=e.onFilePathClick,l=e.pathMap,c=e.foldable,s=void 0!==c&&c,u=e.disabled,d=void 0!==u&&u,f=(0,P._)((0,$.useState)(!1),2),h=f[0],p=f[1],m=(0,$.useRef)(null),v=(0,$.useRef)(null),g=(0,nE.MG)({count:n.length,getScrollElement:function(){return v.current},getItemKey:function(e){return n[e].path},estimateSize:function(){return 28},overscan:20}),y=g.getVirtualItems();return s&&h?(0,N.tZ)(W.G,{css:iG.listFolded,children:(0,N.BX)(W.G,{css:s?iG.headerFoldable:iG.header,children:[(0,N.tZ)(iP,{files:n,type:r,setFolded:p,foldable:!0,folded:!0}),(0,N.tZ)(iB,{type:r,stageFiles:i,restoreFiles:o,disabled:d})]})}):(0,N.BX)(W.G,{innerRef:m,css:iG.list,children:[(0,N.BX)(W.G,{css:s?iG.headerFoldable:iG.header,children:[(0,N.tZ)(iP,{files:n,type:r,setFolded:p,foldable:s}),(0,N.tZ)(iB,{type:r,stageFiles:i,restoreFiles:o,disabled:d})]}),(0,N.tZ)(W.K.div,{ref:v,css:iG.body,children:(0,N.tZ)("div",{style:{minHeight:g.getTotalSize()},children:(0,N.tZ)("div",{style:{transform:"translateY(".concat(null===(t=y[0])||void 0===t?void 0:t.start,"px)"),willChange:"transform"},children:y.map(function(e){var t=n[e.index];return(0,N.tZ)("div",{"data-index":e.index,children:(0,N.tZ)(iD,{file:t,list:r,stageFiles:i,restoreFiles:o,onFilePathClick:a,pathMap:l,disabled:d},t.path)},e.key)})})})})]})}function iP(e){var t=e.files,n=e.type,r=e.setFolded,i=e.foldable,o=void 0!==i&&i,a=e.folded,l=(0,eM.Z)("file",t.length),c="".concat(t.length," ").concat("index"===n?"staged":"changed"," ").concat(l);return o&&void 0!==a&&a?(0,N.BX)(N.HY,{children:[(0,N.tZ)(M.hU,{alt:"Show list",onClick:function(){return r(!1)},children:(0,N.tZ)(tv.Z,{})}),(0,N.tZ)(F.xv,{css:iG.headerText,multiline:!1,children:c})]}):(0,N.BX)(N.HY,{children:[o?(0,N.tZ)(M.hU,{alt:"Hide list",onClick:function(){return r(!0)},children:(0,N.tZ)(tg.Z,{color:j.TV.foregroundDimmest})}):null,(0,N.tZ)(F.xv,{css:iG.headerText,color:"dimmest",multiline:!1,children:c})]})}var iL=n(30513),iN=[{"& > span:first-child":[j.l0.flex.grow(1),j.l0.textAlign.left]},{"& > span":[j.l0.flex.shrink(1)]}],iO=(0,H.X)({buttonFolded:[iN,j.l0.height("auto"),j.l0.py(8),j.l0.fontWeight.medium],buttonUnfolded:[iN,j.l0.height("auto"),j.l0.py(8),j.l0.fontWeight.medium,j.l0.border({color:j.TV.outlineDimmer,direction:"bottom"}),j.l0.borderRadius(8,8,0,0)],container:[j.l0.flex.grow(1),j.l0.borderRadius(8)],lists:[j.l0.borderRadius(0,0,8,8)],divider:[j.l0.height(1),j.l0.minHeight(1),j.l0.width("100%"),j.l0.backgroundColor.outlineDimmer],autoStageMessage:[j.l0.pt(4),j.l0.pb(8),j.l0.px(4),j.l0.center],noChangesMessage:[j.l0.py(16),j.l0.px(4),j.l0.center],buttonText:[j.l0.flex.grow(1)],details:[j.l0.rowWithGap(4),j.l0.fontWeight.normal,j.l0.color.foregroundDimmest]});function iU(e){var t,n,r=e.status,i=e.stageFiles,o=e.restoreFiles,a=e.onStagedFileClick,l=e.disabled,c=void 0!==l&&l,s=(0,P._)((0,$.useState)(!1),2),u=s[0],d=s[1],f=(0,P._)((0,$.useState)(!1),2),h=f[0],p=f[1],m=(0,P._)((0,$.useState)(!1),2),v=m[0],g=m[1],y=(0,$.useMemo)(function(){return(0,iL.w)(r.changes.map(function(e){return e.path}))},[r]),b=(0,P._)((0,$.useMemo)(function(){var e=[],t=[],n=!0,i=!1,o=void 0;try{for(var a,l=r.changes[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value;c.staged&&e.push(c),c.type.worktree!==ty.h.UNMODIFIED&&t.push(c)}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return[e,t]},[r.changes]),2),w=b[0],Z=b[1],x=w.length>0&&Z.length>0,C=iS(y),_=C.openRestoreConfirmationModal,S=C.restoreConfirmationModal,k=(0,$.useCallback)((t=(0,tP._)(function(e){return(0,tL.Jh)(this,function(t){switch(t.label){case 0:if(!("all"in e))return[3,2];return p(!0),[4,i(e)];case 1:return t.sent(),p(!1),[3,4];case 2:return[4,i(e)];case 3:t.sent(),t.label=4;case 4:return[2]}})}),function(e){return t.apply(this,arguments)}),[i]),E=(0,$.useCallback)((n=(0,tP._)(function(e){var t,n;return(0,tL.Jh)(this,function(r){switch(r.label){case 0:if(!0!==e)return[3,4];return g(!0),[4,_(Z)];case 1:if(!r.sent())return[3,3];return[4,o(e)];case 2:r.sent(),r.label=3;case 3:return g(!1),[3,8];case 4:if("string"==typeof e){if(!(n=Z.find(function(t){return t.path===e})))throw g(!1),Error("Could not find file in worktree list");t=[n]}else t=Z.filter(function(t){return e.includes(t.path)});return[4,_(t)];case 5:if(!r.sent())return[3,7];return[4,o(e)];case 6:r.sent(),r.label=7;case 7:g(!1),r.label=8;case 8:return[2]}})}),function(e){return n.apply(this,arguments)}),[_,o,Z]);return u?(0,N.tZ)(iM,{setFolded:d,changeCount:Z.length,stagedCount:w.length,disabled:c,folded:!0}):0===w.length&&0===Z.length?(0,N.BX)(W.G,{style:{opacity:c?.725:void 0},css:iO.container,children:[(0,N.tZ)(iM,{setFolded:d,changeCount:Z.length,stagedCount:w.length,disabled:c}),(0,N.tZ)(em.Tg,{css:iO.lists,elevated:!0,children:(0,N.tZ)(W.G,{css:iO.noChangesMessage,children:(0,N.tZ)(F.xv,{color:"dimmest",multiline:!1,children:"No changed or staged files."})})})]}):(0,N.BX)(N.HY,{children:[(0,N.BX)(W.G,{style:{opacity:c?.725:void 0},css:iO.container,children:[(0,N.tZ)(iM,{setFolded:d,changeCount:Z.length,stagedCount:w.length,disabled:c}),(0,N.BX)(em.Tg,{css:iO.lists,elevated:!0,children:[0===w.length?null:(0,N.tZ)(iA,{type:"index",files:w,stageFiles:k,restoreFiles:E,onFilePathClick:a,pathMap:y,foldable:x,disabled:c||h||v}),x?(0,N.tZ)("div",{css:iO.divider}):null,0===Z.length?null:(0,N.BX)(N.HY,{children:[(0,N.tZ)(iA,{type:"worktree",files:Z,stageFiles:k,restoreFiles:E,onFilePathClick:a,pathMap:y,foldable:x,disabled:c||h||v}),x?null:(0,N.tZ)(W.G,{css:iO.autoStageMessage,children:(0,N.tZ)(F.xv,{variant:"small",color:"dimmest",multiline:!1,children:"Committing will automatically stage your changes."})})]})]})]}),S]})}function iM(e){var t=e.folded,n=void 0!==t&&t,r=e.setFolded,i=e.changeCount,o=e.stagedCount,a=e.disabled;return(0,N.tZ)(ep.zx,{css:n?iO.buttonFolded:iO.buttonUnfolded,text:"Review Changes",secondaryText:(0,N.tZ)(iX,{folded:n,changeCount:i,stagedCount:o}),onClick:function(){return r(!n)},iconRight:n?(0,N.tZ)(tv.Z,{}):(0,N.tZ)(tg.Z,{}),disabled:void 0!==a&&a,size:"small"})}function iX(e){var t=e.folded,n=e.changeCount,r=e.stagedCount;if(!t)return null;var i=n>0,o=r>0;return i||o?(0,N.BX)("span",{css:iO.details,children:[i?(0,N.BX)("span",{children:[n," ",(0,eM.Z)("change",n)]}):null,i&&o?(0,N.tZ)("span",{children:"/"}):null,o?(0,N.BX)("span",{children:[r," staged"]}):null]}):(0,N.tZ)("span",{css:iO.details,children:(0,N.tZ)("span",{children:"no changes"})})}var iF=n(95563),iW=n(86257),iH=n(54401),iV=n(38172),iz=n(15758),ij=n(72164),iq=n(43208),iJ=n(37058),iY=n(50798),i$={height:32,width:"100%",resize:"none",border:"none"},iK={width:"100%",resize:"none",border:"none"},iQ=(0,H.X)({surface:[j.l0.p(8),j.l0.colWithGap(12),j.l0.borderRadius(0,0,8,8)],button:[j.l0.height("auto"),j.l0.py(8),j.l0.fontWeight.medium,j.l0.borderRadius(8,8,0,0),j.l0.justify.start,j.l0.border({color:j.TV.outlineDimmer,direction:"bottom"}),{"> span:first-child":{flexGrow:1,textAlign:"start"}}],requiredText:[j.l0.display.inlineFlex,j.l0.rowWithGap(4)],subjectField:[j.l0.colWithGap(8)],subjectFieldHeader:[j.l0.flex.row,j.l0.center,j.l0.justify.spaceBetween],bodyField:[j.l0.colWithGap(8)],subjectInput:i$,bodyInput:iK,subjectInputDisabled:[i$,{opacity:.5}],bodyInputDisabled:[iK,{opacity:.5}],required:[j.l0.color.accentNegativeStronger],keyCombo:[j.l0.display.inlineFlex,j.l0.rowWithGap(4),j.l0.flex.grow(1),j.l0.align.center],keyComboText:[j.l0.fontWeight.normal,j.l0.color.foregroundDimmest]});function i0(e){var t=e.message,n=e.disabled,r=void 0!==n&&n,i=e.onMessageChange,o=e.onCommitShortcut,a=(0,P._)((0,$.useState)(!0),2),l=a[0],c=a[1],s=(0,P._)((0,$.useState)(!1),2),u=s[0],d=s[1],f=(0,P._)((0,$.useState)(!1),2),h=f[0],p=f[1],m=(0,$.useRef)(null),v=(0,$.useRef)(null),g=(0,ed._)(t.split("\n\n")),y=g[0],b=void 0===y?"":y,w=g.slice(1).join("\n\n"),Z=(0,iH.d)();function x(e,t){i((e=e.replaceAll("\n"," "))+(t?"\n\n"+t:""))}var C=(0,iJ.gf)(iq.CN.gitCommit.id);return(0,iY.ow)(iq.CT,h),(0,iJ.Il)(function(){return[iq.CN.gitCommit.id,{run:function(){null==o||o()},scope:iq.CT,bubble:!1}]},[o]),(0,N.BX)(W.G,{children:[(0,N.tZ)(ep.zx,{css:iQ.button,text:(0,N.BX)("span",{css:iQ.requiredText,children:[(0,N.tZ)("span",{children:"Message"}),l?(0,N.tZ)(i4,{}):null]}),secondaryText:Z||!C?void 0:(0,N.BX)("span",{css:iQ.keyCombo,children:[(0,N.tZ)("span",{css:iQ.keyComboText,children:"Commit:"}),(0,N.tZ)(iJ.bM,{keyCombo:C,small:!0})]}),iconRight:l?(0,N.tZ)(tv.Z,{}):(0,N.tZ)(tg.Z,{}),onClick:function(){return c(function(e){return!e})},size:"small"}),(0,N.BX)(em.Tg,{css:iQ.surface,elevated:!0,children:[(0,N.tZ)(i1,{ref:m,value:b,compact:l,disabled:r,onChange:function(e){x(e,w)},onNewline:function(){if(l)c(!1),d(!0);else{if(!v.current)return;v.current.focus(),v.current.setSelectionRange(0,0)}},onFocus:function(){p(!0)},onBlur:function(){p(!1)}}),l&&!w?null:(0,N.tZ)(i2,{ref:v,value:w,compact:l,disabled:r,onChange:function(e){if(x(b,e),l&&!e){var t;null===(t=m.current)||void 0===t||t.focus()}else l&&c(!1)},onBackspaceWhenEmpty:function(){m.current&&m.current.focus()},onFocus:function(){u&&d(!1),p(!0)},onBlur:function(){p(!1)},autoFocus:u})]})]})}var i1=(0,$.forwardRef)(function(e,t){var n=e.value,r=e.compact,i=void 0!==r&&r,o=e.disabled,a=void 0!==o&&o,l=e.onChange,c=e.onNewline,s=e.onFocus,u=e.onBlur,d=(0,iF.Un)(),f=(0,q.Z)().container,h=(0,iF.sg)({onResponse:function(e){var t;null==l||l(e||""),null===(t=v.current)||void 0===t||t.focus()}}),p=h.sendMessage,m=h.loading,v=(0,$.useRef)(null),g=(0,iW.Z)().ref;function y(){return(y=(0,tP._)(function(){return(0,tL.Jh)(this,function(e){switch(e.label){case 0:return[4,f.exec("git","diff")];case 1:return[2,e.sent().output||""]}})})).apply(this,arguments)}function b(){return(b=(0,tP._)(function(){var e;return(0,tL.Jh)(this,function(t){switch(t.label){case 0:if(!d)return[2];return[4,function(){return y.apply(this,arguments)}()];case 1:return e=t.sent(),p("You are a helpful robot that conducts code reviews","Based on this diff: ".concat(e," can you write a helpful summary of changes in this commit? Only write two sentences.")),[2]}})})).apply(this,arguments)}return(0,N.BX)(W.G,{css:iQ.subjectField,children:[i?null:(0,N.BX)(W.G,{css:iQ.subjectFieldHeader,children:[(0,N.tZ)(F.xv,{variant:"small",color:"dimmer",multiline:!1,children:(0,N.BX)("span",{css:iQ.requiredText,children:[(0,N.tZ)("span",{children:"Summary"}),(0,N.tZ)(i4,{})]})}),(0,N.tZ)(iz.T,{iconLeft:m?(0,N.tZ)(z.Z,{}):(0,N.tZ)(ij.Z,{}),text:"Summarize with AI",onClick:function(){return b.apply(this,arguments)}})]}),(0,N.tZ)(ef.B,{ref:i?t:(0,iV.l)(t,g,v),css:a?iQ.subjectInputDisabled:iQ.subjectInput,placeholder:"Summary of your commit...",value:n,disabled:a,onChange:function(e){return null==l?void 0:l(e.currentTarget.value)},onKeyDown:function(e){"Enter"!==e.key||e.defaultPrevented||(e.preventDefault(),e.stopPropagation(),null==c||c())},onFocus:s,onBlur:u})]})}),i2=(0,$.forwardRef)(function(e,t){var n=e.value,r=e.compact,i=void 0!==r&&r,o=e.disabled,a=void 0!==o&&o,l=e.autoFocus,c=e.onChange,s=e.onBackspaceWhenEmpty,u=e.onFocus,d=e.onBlur,f=(0,iW.Z)().ref;return(0,N.BX)(W.G,{css:iQ.bodyField,children:[i?null:(0,N.tZ)(F.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Description"}),(0,N.tZ)(ef.B,{ref:i?t:(0,iV.l)(t,f),css:a?iQ.bodyInputDisabled:iQ.bodyInput,placeholder:"Description of your commit...",value:n,disabled:a,onChange:function(e){return null==c?void 0:c(e.currentTarget.value)},onKeyDown:function(e){"Backspace"===e.key&&""===n&&(e.preventDefault(),e.stopPropagation(),null==s||s())},onFocus:u,onBlur:d,autoFocus:void 0!==l&&l})]})});function i4(){return(0,N.tZ)(tB.u,{tooltip:"This field is required.",placement:"top",children:(0,N.tZ)("span",{css:iQ.required,children:"*"})})}var i3=(0,H.X)({commitArea:[j.l0.colWithGap(8)]});function i8(e){var t=e.status,n=e.onStagedFileClick,r=e.defaultMessage,i=(0,P._)((0,$.useState)(t),2),o=i[0],a=i[1],l=(0,P._)((0,$.useState)(null!=r?r:""),2),c=l[0],s=l[1],u=(0,P._)((0,$.useState)(0),2),d=u[0],f=u[1],h=(0,P._)((0,$.useState)(!1),2),p=h[0],m=h[1],v=n_();(0,$.useEffect)(function(){return a(t)},[t]);var g=(0,q.Z)().git;if(!o||!o.changes.length)return(0,N.tZ)(W.G,{css:i3.commitArea,children:(0,N.tZ)(F.xv,{color:"dimmest",multiline:!1,children:"There are no changes to commit."})});var y=o.changes.length,b=o.changes.filter(function(e){return e.staged}).length;function w(){return(w=(0,tP._)(function(e){var t,n;return(0,tL.Jh)(this,function(r){switch(r.label){case 0:if(p)return[2];return f(function(e){return e+1}),[4,g.stageFiles(e)];case 1:if((t=r.sent()).error)return[3,3];return[4,g.status()];case 2:return(n=r.sent()).error?(tU({context:"commit-area-status",gitService:g,result:n,data:{opts:e}}),v(n.error)):a(n),g.forceRefresh(),[3,4];case 3:v(t.error),tU({context:"commit-area-stage-files",gitService:g,result:t,data:{opts:e}}),r.label=4;case 4:return f(function(e){return e-1}),[2]}})})).apply(this,arguments)}function Z(){return(Z=(0,tP._)(function(e){var t,n;return(0,tL.Jh)(this,function(r){switch(r.label){case 0:if(p)return[2];return f(function(e){return e+1}),[4,g.restoreFiles(e)];case 1:if((t=r.sent()).error)return[3,3];return[4,g.status()];case 2:return(n=r.sent()).error?(tU({context:"commit-area-status",gitService:g,result:n,data:{files:e}}),v(n.error)):a(n),g.forceRefresh(),[3,4];case 3:tU({context:"commit-area-restore-files",gitService:g,result:t,data:{files:e}}),v(t.error),r.label=4;case 4:return f(function(e){return e-1}),[2]}})})).apply(this,arguments)}function x(){return C.apply(this,arguments)}function C(){return(C=(0,tP._)(function(){var e,t;return(0,tL.Jh)(this,function(n){switch(n.label){case 0:if(""===c||p||0===y||d>0)return[2];if(m(!0),0!==b)return[3,2];return[4,g.stageFiles({all:!0})];case 1:n.sent(),n.label=2;case 2:return[4,g.commit({message:c})];case 3:if(!(e=n.sent()).error)return[3,4];return m(!1),v(e.error),tU({context:"commit-area-commit",gitService:g,result:e,data:{message:c}}),[3,6];case 4:return(0,nj.J)("commit-created",{hasDescription:-1!==c.trim().indexOf("\n\n")}),[4,g.status()];case 5:t=n.sent(),m(!1),t.error?(v(t.error),tU({context:"commit-area-status",gitService:g,result:t,data:{message:c}})):(s(""),a(t)),g.forceRefresh(),n.label=6;case 6:return[2]}})})).apply(this,arguments)}var _="Nothing to commit";if(p)_="Committing...";else if(b>0&&b<y){var S=(0,eM.Z)("change",b);_="Commit ".concat(b," staged ").concat(S)}else y>0&&(_="Stage and commit all changes");var k=!c||0===y||d>0||p;return(0,N.BX)(W.G,{css:i3.commitArea,children:[(0,N.tZ)(i0,{message:c,disabled:p,onMessageChange:s,onCommitShortcut:x}),(0,N.tZ)(iU,{status:o,stageFiles:function(e){return w.apply(this,arguments)},restoreFiles:function(e){return Z.apply(this,arguments)},onStagedFileClick:n,disabled:p}),k?(0,N.tZ)(tB.u,{tooltip:d>0?"Changes in progress":0===y?"There are no changes to commit.":"You must enter a commit message before you can commit.",children:(0,N.tZ)(ep.zx,{text:_,onClick:x,disabled:k,loading:p,colorway:"primary",iconLeft:(0,N.tZ)(rZ.Z,{}),stretch:!0})}):(0,N.tZ)(ep.zx,{text:_,onClick:x,disabled:k,loading:p,colorway:"primary",iconLeft:(0,N.tZ)(rZ.Z,{}),stretch:!0})]})}var i6=/\s\(#(\d+)\)$/,i5=/^Revert "(.+)"/,i7=/^This reverts commit ([a-f0-9]+)(?:, reversing changes made to ([a-f0-9]+))?\./;function i9(e){var t=i5.exec(e.subject),n=i7.exec(e.body);if(t&&n){var r,i=n[1],o=t[1],a=i6.exec(o);return a&&(r=parseInt(a[1],10)),{hash:i,subject:o,pr:r}}return null}var oe=/\B#\d+\b/g,ot=/^Merged? pull request (#\d+\b)/,on=/^Merge branch '(.+)'/,or=/into (.+)$/;function oi(e){if("GitHub"===e.committer.name&&"noreply@github.com"===e.committer.email){var t=e.subject.match(oe);if(t){var n,r=parseInt(t[t.length-1].slice(1),10);if(r)return i6.test(e.subject)&&(n=e.subject.replace(i6,"").trim()),!n&&ot.test(e.subject)&&e.body&&-1===e.body.indexOf("\n")&&(n=e.body),{type:"pull-request",id:r,subject:n,reverts:i9(e)}}}if(ot.test(e.subject)){var i,o=ot.exec(e.subject);if(o)return e.body&&-1===e.body.indexOf("\n")&&(i=e.body),{type:"pull-request",id:parseInt(o[1].slice(1),10),subject:i,reverts:i9(e)}}if(on.test(e.subject)){var a=on.exec(e.subject);if(a){var l=or.exec(e.subject);return{type:"branch",source:a[1],target:l?l[1]:null}}}return e.parents&&e.parents.length>2?{type:"octopus",parents:e.parents}:e.parents&&e.parents.length>1?{type:"simple",a:e.parents[0],b:e.parents[1]}:null}var oo=n(1712),oa={position:"absolute",top:0,height:9,width:9,border:"1px solid ".concat(j.TV.purpleStrongest),borderRadius:"50%"},ol=(0,H.X)({markerContainer:[j.l0.display.flex,j.l0.align.center,j.l0.justify.center,j.l0.minHeight(20),j.l0.minWidth(20)],commitMarker:[j.l0.height(4),j.l0.width(4),j.l0.backgroundColor.foregroundDefault,j.l0.borderRadius("full")],collapsedMarkerIconDot:[j.l0.height(3),j.l0.width(3),j.l0.backgroundColor.foregroundDimmer,j.l0.borderRadius("full")],collapsedMarkerIconContainer:[j.l0.display.flex,j.l0.align.center,j.l0.justify.center,{"div + div":{marginLeft:1}}],collapsedMarker:[j.l0.display.flex,j.l0.align.center,j.l0.justify.center,j.l0.height(20),j.l0.width(20),j.l0.backgroundColor.backgroundHighest,j.l0.borderRadius("full")],revertMarker:[j.l0.display.flex,j.l0.height(20),j.l0.width(20),j.l0.backgroundColor.orangeDimmest,j.l0.borderRadius("full"),j.l0.align.center,j.l0.justify.center],mergeMarker:[j.l0.display.flex,j.l0.height(20),j.l0.width(20),j.l0.backgroundColor.purpleDimmest,j.l0.borderRadius("full"),j.l0.align.center,j.l0.justify.center],mergeMarkerIconContainer:[j.l0.position.relative,j.l0.height(9),j.l0.width(13)],mergeMarkerIconLeft:[(0,es._)({},oa),j.l0.left(0)],mergeMarkerIconRight:[(0,es._)({},oa),j.l0.right(0)],boundaryMarker:[j.l0.height(6),j.l0.width(6),j.l0.backgroundColor.backgroundDefault,j.l0.borderRadius("full"),{border:"1px solid ".concat(j.TV.backgroundHighest)}]});function oc(e){var t=function(e){switch(e){case"none":default:return null;case"commit":return(0,N.tZ)(os,{});case"revert":return(0,N.tZ)(ou,{});case"merge":return(0,N.tZ)(od,{});case"boundary":return(0,N.tZ)(of,{});case"collapsed":return(0,N.tZ)(oh,{})}}(e.type);return t?(0,N.tZ)("div",{css:ol.markerContainer,children:t}):null}function os(){return(0,N.tZ)("div",{css:ol.commitMarker})}function ou(){return(0,N.tZ)("div",{css:ol.revertMarker,children:(0,N.tZ)(iy.Z,{size:12,color:j.TV.orangeStrongest})})}function od(){return(0,N.tZ)("div",{css:ol.mergeMarker,children:(0,N.BX)("div",{css:ol.mergeMarkerIconContainer,children:[(0,N.tZ)("div",{css:ol.mergeMarkerIconLeft}),(0,N.tZ)("div",{css:ol.mergeMarkerIconRight})]})})}function of(){return(0,N.tZ)("div",{css:ol.boundaryMarker})}function oh(){return(0,N.tZ)("div",{css:ol.collapsedMarker,children:(0,N.BX)("div",{css:ol.collapsedMarkerIconContainer,children:[(0,N.tZ)("div",{css:ol.collapsedMarkerIconDot}),(0,N.tZ)("div",{css:ol.collapsedMarkerIconDot}),(0,N.tZ)("div",{css:ol.collapsedMarkerIconDot})]})})}var op=[j.l0.position.absolute,j.l0.left(0),j.l0.width(18)],om=(0,H.X)({connectorSegmentBorderSolid:[op,{borderRight:"1px solid ".concat(j.TV.outlineDimmest)}],connectorSegmentBorderDashed:[op,{borderRight:"1px dashed ".concat(j.TV.outlineDimmest)}]});function ov(e){var t=e.boundaryTop,n=void 0!==t&&t,r=e.boundaryBottom,i=void 0!==r&&r,o=e.joint,a=void 0===o?"top":o,l=e.hideTop,c=void 0!==l&&l,s=e.hideBottom,u=void 0!==s&&s;if(c&&u)return null;if(n===i&&!c&&!u)return(0,N.tZ)(oy,{top:0,bottom:0,dashed:n&&i});var d=c?null:(0,N.tZ)(og,{start:"top",joint:a,dashed:n}),f=u?null:(0,N.tZ)(og,{start:"bottom",joint:a,dashed:i});return(0,N.BX)(N.HY,{children:[d,f]})}function og(e){var t,n,r=e.start,i=e.joint,o=e.dashed,a="center"===i?(t={},(0,e5._)(t,r,0),(0,e5._)(t,"height","50%"),t):(n={},(0,e5._)(n,r,0),(0,e5._)(n,r===i?"height":i,8),n);return(0,N.tZ)(oy,(0,eu._)((0,es._)({},a),{dashed:void 0!==o&&o}))}function oy(e){var t=e.top,n=e.bottom,r=e.height,i=e.dashed;return(0,N.tZ)("div",{css:void 0!==i&&i?om.connectorSegmentBorderDashed:om.connectorSegmentBorderSolid,style:{top:t,bottom:n,height:r}})}var ob=(0,H.X)({container:{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"},containerInteractive:[nR.gU.nofill,{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"}],nodeFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1,opacity:0,"div:hover > &":{transition:"opacity 120ms ease-out",opacity:1}},nodeUnFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1},nodeContentContainer:[j.l0.colWithGap(4),{position:"relative",paddingTop:8,paddingBottom:8,paddingRight:8}],nodeHeader:{display:"block",height:20},nodeUnfoldedContentSurface:[j.l0.mt(4),j.l0.mb(8),j.l0.p(8),j.l0.borderRadius(8),{marginLeft:36,marginRight:8,overflowX:"hidden"}],unfoldedContentContainer:[j.l0.position.relative]});function ow(e){var t=e.boundaryTop,n=e.boundaryBottom,r=void 0!==n&&n,i=e.hideConnectorTop,o=e.hideConnectorBottom,a=void 0!==o&&o,l=e.joint,c=void 0===l?"top":l,s=e.marker,u=e.header,d=e.unfoldedContent,f=e.children,h=e.className,p=(0,P._)((0,$.useState)(!0),2),m=p[0],v=p[1];return(0,N.BX)(W.G,{className:h,css:j.l0.position.relative,children:[(0,N.tZ)(ov,{boundaryTop:void 0!==t&&t,boundaryBottom:r,joint:c,hideTop:void 0!==i&&i,hideBottom:a}),s?(0,N.tZ)(ox,{joint:c,children:s}):null,d?(0,N.BX)(W.G,{css:ob.containerInteractive,role:"button",tabIndex:0,onClick:function(){v(!m)},onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&v(!m)},children:[m?(0,N.tZ)("div",{css:ob.nodeFoldedIconContainer,children:(0,N.tZ)(tv.Z,{})}):(0,N.tZ)("div",{css:ob.nodeUnFoldedIconContainer,children:(0,N.tZ)(tg.Z,{})}),(0,N.BX)(W.G,{css:ob.nodeContentContainer,children:[u?(0,N.tZ)(W.G,{css:ob.nodeHeader,children:u}):null,f?(0,N.tZ)(W.G,{children:f}):null]})]}):(0,N.tZ)(W.G,{css:ob.container,children:(0,N.BX)(W.G,{css:ob.nodeContentContainer,children:[u?(0,N.tZ)(W.G,{css:ob.nodeHeader,children:u}):null,f?(0,N.tZ)(W.G,{children:f}):null]})}),!d||m?null:(0,N.BX)(W.G,{css:ob.unfoldedContentContainer,children:[a?null:(0,N.tZ)(oy,{top:0,bottom:0,dashed:r}),(0,N.tZ)(em.Tg,{css:ob.nodeUnfoldedContentSurface,elevated:!0,children:d})]})]})}var oZ=(0,H.X)({top:{position:"absolute",top:8,left:18,transform:"translateX(-50%)"},bottom:{position:"absolute",bottom:8,left:18,transform:"translateX(-50%)"},center:{position:"absolute",top:"50%",left:18,transform:"translateX(-50%) translateY(-50%)"}});function ox(e){var t=e.joint,n=e.children;return(0,N.tZ)("div",{css:oZ[void 0===t?"top":t],children:n})}var oC=(0,H.X)({container:[j.l0.rowWithGap(8),j.l0.align.center,j.l0.justify.spaceBetween,j.l0.height("100%")],textContainer:[j.l0.rowWithGap(4),j.l0.center],text:[j.l0.flex.shrink(0)]});function o_(e){var t=e.text,n=(0,te._)(e,["text"]);return(0,N.tZ)(ow,(0,es._)({marker:(0,N.tZ)(oc,{type:"boundary"}),joint:"center",header:(0,N.BX)(W.G,{css:oC.container,children:[(0,N.tZ)(nT.R,{}),(0,N.BX)(W.G,{css:oC.textContainer,children:[(0,N.tZ)(oo.Z,{size:12,color:j.TV.foregroundDimmest}),(0,N.tZ)(F.xv,{css:oC.text,variant:"small",color:"dimmest",multiline:!1,children:t})]}),(0,N.tZ)(nT.R,{})]})},n))}var oS=(0,H.X)({definitionList:{display:"grid",gridTemplateColumns:"auto 1fr",paddingLeft:j.TV.space4,"> dt":{display:"flex",alignItems:"center",paddingBottom:j.TV.space2},"> dd":{marginLeft:j.TV.space12,paddingBottom:j.TV.space2}},listHeader:[j.l0.fontWeight.medium],content:[j.l0.colWithGap(8)],description:[j.l0.colWithGap(8)],commitList:[j.l0.colWithGap(2),j.l0.pl(4)]}),ok=function(e,t){var n=!e.body,r=null,i=null;return t&&"type"in t?(r=t,"pull-request"===t.type&&(t.reverts&&(i=t.reverts),t.subject&&(n=!0))):t&&(i=t),{hideBody:n,merge:r,revert:i}},oE=function(e){var t=e.hash;return(0,N.tZ)(tm.q,{size:"small",iconLeft:(0,N.tZ)(eg.Z,{}),textToCopy:t,text:t.slice(0,7),tooltipSuccessText:"Hash copied!"})},oT=function(e){var t=e.onClick,n=e.text,r=e.loading;return(0,N.tZ)(tB.u,{tooltip:"Discard current changes and restore files to time of commit",children:(0,N.tZ)(ep.zx,{text:n,onClick:t,size:"small",iconLeft:void 0!==r&&r?(0,N.tZ)(z.Z,{}):(0,N.tZ)(iy.Z,{})})})},oR=function(e,t){return!(e.name===t.name&&e.email===t.email)},oD=function(e,t){return!(6e4>Math.abs(e-t))};function oI(e){var t=e.commit,n=e.info,r=oR(t.committer,t.author),i=oD(t.author.date,t.committer.date),o=ok(t,void 0===n?null:n),a=o.hideBody,l=o.merge,c=o.revert;return(0,N.BX)(W.G,{css:oS.content,children:[a?null:(0,N.BX)(W.G,{css:oS.description,children:[(0,N.tZ)(F.xv,{children:(0,N.tZ)(nq.uJ,{body:t.body})}),(0,N.tZ)(nT.R,{css:j.l0.backgroundColor.outlineDimmer})]}),(0,N.BX)(W.G,{children:[(0,N.tZ)(F.xv,{css:oS.listHeader,multiline:!1,children:"Author"}),(0,N.BX)("dl",{css:oS.definitionList,children:[(0,N.tZ)("dt",{children:"Name:"}),(0,N.tZ)("dd",{children:t.author.name}),(0,N.tZ)("dt",{children:"Email:"}),(0,N.tZ)("dd",{children:t.author.email})]})]}),r?(0,N.BX)(W.G,{children:[(0,N.tZ)(F.xv,{css:oS.listHeader,multiline:!1,children:"Committer"}),(0,N.BX)("dl",{css:oS.definitionList,children:[(0,N.tZ)("dt",{children:"Name:"}),(0,N.tZ)("dd",{children:t.committer.name}),(0,N.tZ)("dt",{children:"Email:"}),(0,N.tZ)("dd",{children:t.committer.email})]})]}):null,(0,N.BX)(W.G,{children:[(0,N.tZ)(F.xv,{css:oS.listHeader,multiline:!1,children:"Commit"}),(0,N.BX)("dl",{css:oS.definitionList,children:[i?(0,N.BX)(N.HY,{children:[(0,N.tZ)("dt",{children:"Authored:"}),(0,N.tZ)("dd",{children:(0,N.tZ)(nB.EK,{date:t.author.date,dateFormat:"absolute"})}),(0,N.tZ)("dt",{children:"Committed:"}),(0,N.tZ)("dd",{children:(0,N.tZ)(nB.EK,{date:t.committer.date,dateFormat:"absolute"})})]}):(0,N.BX)(N.HY,{children:[(0,N.tZ)("dt",{children:"Date:"}),(0,N.tZ)("dd",{children:(0,N.tZ)(nB.EK,{date:t.author.date,dateFormat:"absolute"})})]}),(0,N.tZ)("dt",{children:"Hash:"}),(0,N.tZ)("dd",{children:(0,N.tZ)(oE,{hash:t.hash})}),l&&"pull-request"===l.type?(0,N.BX)(N.HY,{children:[(0,N.tZ)("dt",{children:"PR:"}),(0,N.BX)("dd",{children:["#",l.id]})]}):null,l&&"branch"===l.type?(0,N.BX)(N.HY,{children:[(0,N.tZ)("dt",{children:"Merged:"}),(0,N.tZ)("dd",{children:l.source}),l.target?(0,N.BX)(N.HY,{children:[(0,N.tZ)("dt",{children:"Into:"}),(0,N.tZ)("dd",{children:l.target})]}):null]}):null,c?(0,N.BX)(N.HY,{children:[(0,N.tZ)("dt",{children:"Reverted:"}),(0,N.tZ)("dd",{children:c.hash})]}):null]})]}),l&&"simple"===l.type?(0,N.BX)(W.G,{children:[(0,N.tZ)(F.xv,{css:oS.listHeader,multiline:!1,children:"Merged"}),(0,N.BX)(W.G,{css:oS.commitList,children:[(0,N.tZ)(F.xv,{multiline:!1,children:l.a}),(0,N.tZ)(F.xv,{multiline:!1,children:l.b})]})]}):null,l&&"octopus"===l.type?(0,N.BX)(W.G,{children:[(0,N.tZ)(F.xv,{css:oS.listHeader,multiline:!1,children:"Merged"}),(0,N.tZ)(W.G,{css:oS.commitList,children:l.parents.map(function(e,t){return(0,N.tZ)(F.xv,{multiline:!1,children:e},t)})})]}):null]})}var oB=(0,H.X)({authorContainer:[j.l0.rowWithGap(8),j.l0.align.center],headerText:[j.l0.rowWithGap(4),j.l0.flex.row,j.l0.align.stretch,j.l0.fontWeight.medium,j.l0.flex.wrap],headerContainer:[j.l0.colWithGap(4),j.l0.align.start,j.l0.justify.start],button:[j.l0.reset.button,j.l0.linkStyle,j.l0.color.foregroundDefault,j.l0.fontWeight.medium,{display:"block",width:"100%",textAlign:"left"}]}),oG=function(e){var t=e.author;return(0,N.BX)(W.G,{css:oB.authorContainer,children:[(0,N.tZ)(nV,{name:t.name,email:t.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,N.tZ)(nB.EK,{date:t.date,textColor:"dimmest",textVariant:"small"})]})},oA=function(e){var t=e.children;return(0,N.tZ)(F.xv,{css:oB.headerText,multiline:!1,maxLines:1,children:t})},oP=function(e){var t=e.commit,n=e.onViewCommitClick,r=e.children;return(0,N.tZ)(W.G,{css:oB.headerContainer,children:(0,N.tZ)(tB.u,{tooltip:"View ".concat(t.hash.slice(0,7)),children:(0,N.tZ)("button",{css:oB.button,onClick:function(){return n(t.hash)},children:r})})})};function oL(e){var t=e.commit,n=(0,te._)(e,["commit"]);return(0,N.tZ)(ow,(0,eu._)((0,es._)({marker:(0,N.tZ)(oc,{type:"commit"}),header:(0,N.tZ)(oA,{children:(0,N.tZ)(nq.Zr,{subject:t.subject})}),unfoldedContent:(0,N.tZ)(oI,{commit:t})},n),{children:(0,N.tZ)(oG,{author:t.author})}))}var oN=function(e){var t=e.commit,n=e.onViewCommitClick,r=(0,te._)(e,["commit","onViewCommitClick"]);return(0,N.tZ)(ow,(0,eu._)((0,es._)({marker:(0,N.tZ)(oc,{type:"commit"}),header:(0,N.tZ)(oP,{commit:t,onViewCommitClick:function(){return n(t.hash)},children:(0,N.tZ)(oA,{children:(0,N.tZ)(nq.Zr,{subject:t.subject})})})},r),{children:(0,N.tZ)(oG,{author:t.author})}))};function oO(e){var t,n=e.commit,r=e.info,i=(0,te._)(e,["commit","info"]);return"branch"!==r.type&&(t="pull-request"===r.type&&r.subject?r.subject:n.subject),(0,N.tZ)(ow,(0,eu._)((0,es._)({marker:(0,N.tZ)(oc,{type:"merge"}),header:(0,N.BX)(oA,{children:[(0,N.tZ)(nq.ST,{text:"merged"}),(0,N.tZ)(oM,{info:r,hash:n.hash,subject:n.subject})]}),unfoldedContent:(0,N.tZ)(oI,{commit:n,info:r})},i),{children:(0,N.BX)(W.G,{css:[j.l0.colWithGap(8)],children:[t?(0,N.tZ)(F.xv,{color:"dimmer",variant:"small",multiline:!1,children:(0,N.tZ)(nq.Zr,{subject:t})}):null,(0,N.tZ)(oG,{author:n.author})]})}))}var oU=function(e){var t,n=e.commit,r=e.info,i=e.onViewCommitClick,o=(0,te._)(e,["commit","info","onViewCommitClick"]);return"branch"!==r.type&&(t="pull-request"===r.type&&r.subject?r.subject:n.subject),(0,N.tZ)(ow,(0,eu._)((0,es._)({marker:(0,N.tZ)(oc,{type:"merge"}),header:(0,N.tZ)(oP,{commit:n,onViewCommitClick:function(){return i(n.hash)},children:(0,N.BX)(oA,{children:[(0,N.tZ)(nq.ST,{text:"merged"}),(0,N.tZ)(oM,{info:r,hash:n.hash,subject:n.subject})]})})},o),{children:(0,N.BX)(W.G,{css:[j.l0.colWithGap(8)],children:[t?(0,N.tZ)(F.xv,{color:"dimmer",variant:"small",multiline:!1,children:(0,N.tZ)(nq.Zr,{subject:t})}):null,(0,N.tZ)(oG,{author:n.author})]})}))};function oM(e){var t=e.info,n=e.hash,r=e.subject,i=(0,N.tZ)("span",{css:j.l0.fontWeight.medium,children:r});switch(t.type){case"pull-request":return(0,N.BX)(N.HY,{children:[(0,N.tZ)("span",{children:"pull request"}),(0,N.tZ)(nq.$8,{id:t.id}),t.reverts&&t.reverts.pr?(0,N.BX)(N.HY,{children:[(0,N.tZ)("span",{children:"-"}),(0,N.tZ)(nq.po,{text:"reverts"}),(0,N.tZ)(nq.$8,{id:t.reverts.pr})]}):null]});case"branch":if(!t.target)return(0,N.BX)(N.HY,{children:[(0,N.tZ)("span",{children:"branch"}),(0,N.tZ)(nq.Lr,{name:t.source})]});return(0,N.BX)(N.HY,{children:[(0,N.tZ)(nq.Lr,{name:t.source}),(0,N.tZ)("span",{children:"into"}),(0,N.tZ)(nq.Lr,{name:t.target})]});case"simple":return(0,N.BX)(N.HY,{children:[(0,N.tZ)(nq.kb,{hash:t.a}),(0,N.tZ)(r5.Z,{css:{alignSelf:"center"},size:12}),(0,N.tZ)(nq.kb,{hash:t.b})]});case"octopus":return(0,N.BX)(N.HY,{children:[(0,N.tZ)("span",{children:"commit"}),(0,N.tZ)(nq.kb,{hash:n}),(0,N.BX)("span",{children:["(",t.parents.length," parents)"]})]});default:return i}}function oX(e){var t=e.commit,n=e.info,r=(0,te._)(e,["commit","info"]);return(0,N.tZ)(ow,(0,eu._)((0,es._)({marker:(0,N.tZ)(oc,{type:"revert"}),header:(0,N.BX)(oA,{children:[(0,N.tZ)(nq.po,{text:"reverted"}),(0,N.tZ)(nq.kb,{hash:n.hash}),(0,N.tZ)(nq.Zr,{subject:n.subject,quoted:!0})]}),unfoldedContent:(0,N.tZ)(oI,{commit:t,info:n})},r),{children:(0,N.tZ)(oG,{author:t.author})}))}var oF=function(e){var t=e.commit,n=e.info,r=e.onViewCommitClick,i=(0,te._)(e,["commit","info","onViewCommitClick"]);return(0,N.tZ)(ow,(0,eu._)((0,es._)({marker:(0,N.tZ)(oc,{type:"revert"}),header:(0,N.tZ)(oP,{commit:t,onViewCommitClick:function(){return r(t.hash)},children:(0,N.BX)(oA,{children:[(0,N.tZ)(nq.po,{text:"reverted"}),(0,N.tZ)(nq.kb,{hash:n.hash}),(0,N.tZ)(nq.Zr,{subject:n.subject,quoted:!0})]})})},i),{children:(0,N.tZ)(oG,{author:t.author})}))},oW=(0,H.X)({body:[j.l0.flex.growAndShrink(1)],virtualItem:[j.l0.position.absolute,j.l0.top(0),j.l0.left(0),j.l0.width("100%"),j.l0.overflow("hidden")],virtualList:[j.l0.position.relative]}),oH=function(){return 60};function oV(e){var t=e.items,n=(0,$.useRef)(null),r=(0,nE.MG)({overscan:10,count:t.length,getScrollElement:function(){return n.current},estimateSize:oH});return(0,N.tZ)("div",{ref:n,css:oW.body,children:(0,N.tZ)("div",{css:oW.virtualList,style:{height:"".concat(r.getTotalSize(),"px")},children:r.getVirtualItems().map(function(e){return(0,N.tZ)("div",{css:oW.virtualItem,style:{transform:"translateY(".concat(e.start,"px)")},"data-index":e.index,ref:r.measureElement,children:(0,N.tZ)(oz,{items:t,index:e.index})},e.key)})})})}function oz(e){var t=e.items,n=e.index,r=t[n],i=0===n,o=n===t.length-1;if("boundary"===r.type)return(0,N.tZ)(o_,{text:r.text,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:!0,boundaryBottom:!0},r.text);var a=t[n-1]?t[n-1].type:null,l=t[n+1]?t[n+1].type:null;return(0,N.tZ)(oj,{commit:r.commit,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:"commit"!==a,boundaryBottom:"commit"!==l,onViewCommitClick:r.onViewCommitClick},r.commit.hash)}function oj(e){var t=e.commit,n=e.onViewCommitClick,r=(0,te._)(e,["commit","onViewCommitClick"]),i=oi(t);if(i)return n?(0,N.tZ)(oU,(0,es._)({info:i,commit:t,onViewCommitClick:n},r)):(0,N.tZ)(oO,(0,es._)({info:i,commit:t},r));var o=i9(t);return o?n?(0,N.tZ)(oF,(0,es._)({info:o,commit:t,onViewCommitClick:n},r)):(0,N.tZ)(oX,(0,es._)({info:o,commit:t},r)):n?(0,N.tZ)(oN,(0,es._)({commit:t,onViewCommitClick:n},r)):(0,N.tZ)(oL,(0,es._)({commit:t},r))}var oq=(0,eU.F4)({from:{opacity:0},to:{opacity:1}}),oJ=(0,H.X)({loadingView:[{animation:"".concat(oq," 0.125s 0.25s linear backwards")},j.l0.flex.grow(1),j.l0.display.flex,j.l0.center]});function oY(){return(0,N.tZ)(W.G,{css:oJ.loadingView,children:(0,N.tZ)(z.Z,{size:48})})}var o$=(0,H.X)({view:[j.l0.pt(4),j.l0.pb(8),j.l0.px(4),j.l0.colWithGap(8),j.l0.flex.grow(1)],sectionContainer:[j.l0.colWithGap(8)],section:[j.l0.pt(8),j.l0.pb(16),j.l0.px(8),j.l0.colWithGap(8),j.l0.border({color:j.TV.outlineDimmest,direction:"bottom"})],remoteUpdatesHeader:[j.l0.rowWithGap(8),j.l0.align.center,j.l0.justify.spaceBetween],reviewChangesHeader:[j.l0.rowWithGap(8),j.l0.align.center],headerText:[j.l0.fontWeight.medium],replMergingHeader:[j.l0.rowWithGap(8),j.l0.align.center],switchToBranch:[j.l0.p(4),j.l0.flex.row,j.l0.align.center,j.l0.justify.spaceBetween,j.l0.mt(0),j.l0.mb(0)]});function oK(e){var t,n,r,i,o,a=e.status,l=e.remotes,c=e.branch,s=e.onStagedFileClick,u=e.onViewCommitClick,d=e.onViewSettingsClick,f=e.gotoPendingState,h=e.current,p=void 0!==h&&h,m=e.performPaneOperation,v=p?null==a?void 0:null===(i=a.upstream)||void 0===i?void 0:i.behind:void 0,g=p?null==a?void 0:null===(o=a.upstream)||void 0===o?void 0:o.ahead:void 0,y=(t=n_(),r=(0,tN.Z)((n=(0,tP._)(function(e){var t,n,r,i,o,a,l,s,u;return(0,tL.Jh)(this,function(d){switch(d.label){case 0:return[4,e.isInitialized()];case 1:if((t=d.sent()).error)return tU({context:"use-branch-commits",gitService:e,result:t}),[2,{error:t.error}];if(!t.initialized)return[2,{log:[],onlyRemote:[],onlyLocal:[],error:null}];if(!c)return[2,{error:null}];if(!(!c.tracking||0===v&&0===g))return[3,3];return n=(0,nA.bF)(c,!0),[4,e.log({max:100,revRange:n})];case 2:if((r=d.sent()).error)return tU({context:"use-branch-commits",gitService:e,result:r,data:{branch:c,behind:v,ahead:g,revision:n}}),[2,r];return[2,{log:r.commits,error:null}];case 3:return i=(0,nA.bF)(c),[4,Promise.all([e.log({max:100,revRange:c.name}),e.log({max:100,revRange:"".concat(c.name,"..").concat(i)}),e.log({max:100,revRange:"".concat(i,"..").concat(c.name)})])];case 4:if(o=d.sent(),l=(a=(0,P._)(o,3))[0],s=a[1],u=a[2],l.error)return tU({context:"use-branch-commits-log",gitService:e,result:l,data:{branch:c,behind:v,ahead:g,remoteBranch:i}}),[2,{error:l.error}];if(s.error)return tU({context:"use-branch-commits-only-remote",gitService:e,result:s,data:{branch:c,behind:v,ahead:g,remoteBranch:i}}),[2,{error:s.error}];if(u.error)return tU({context:"use-branch-commits-only-local",gitService:e,result:u,data:{branch:c,behind:v,ahead:g,remoteBranch:i}}),[2,{error:u.error}];return[2,{log:l.commits,onlyRemote:s.commits,onlyLocal:u.commits,error:null}]}})}),function(e){return n.apply(this,arguments)}),[c,v,g]),(0,$.useMemo)(function(){if(!r)return null;if(r.error)return t(r.error),{error:r.error};var e=r.log,n=r.onlyRemote,i=r.onlyLocal;return n||i?(e&&(e=iv(e,null!=n?n:[],null!=i?i:[])),{log:e,onlyRemote:n,onlyLocal:i,error:null}):{log:e,error:null}},[t,r])),b=!!l&&l.size>0,w=(null==c?void 0:c.type)===ng.HO.LOCAL,Z=(0,$.useMemo)(function(){if(!y||y.error)return[];var e=[],t=y.log,n=void 0===t?[]:t,r=y.onlyRemote,i=void 0===r?[]:r,o=y.onlyLocal,a=void 0===o?[]:o,l=n.length>0,c=i.length>0,s=a.length>0;return c&&(e.push({type:"boundary",text:"Not pulled from remote"}),e.push.apply(e,(0,L._)(oQ(i,u)))),s&&(e.push({type:"boundary",text:"Not pushed to remote"}),e.push.apply(e,(0,L._)(oQ(a,u)))),l&&((c||s)&&e.push({type:"boundary",text:"Up to date with remote"}),e.push.apply(e,(0,L._)(oQ(n,u)))),e},[y,u]);return c?(0,N.BX)(W.G,{css:o$.view,children:[(0,N.BX)(W.G,{css:o$.sectionContainer,children:[w?(0,N.tZ)(W.G,{css:o$.section,children:(0,N.tZ)(r2,{performPaneOperation:m,branch:c,onViewSettingsClick:d})}):null,p&&!w&&l&&b?(0,N.BX)(W.G,{css:o$.section,children:[(0,N.BX)(W.G,{css:o$.remoteUpdatesHeader,children:[(0,N.tZ)(F.xv,{css:o$.headerText,multiline:!1,children:"Remote Updates"}),(0,N.tZ)(r6,{branch:c,remotes:l})]}),(0,N.tZ)(im,{remotes:l,gotoPendingState:f})]}):null,p&&a?(0,N.BX)(W.G,{css:o$.section,children:[(0,N.tZ)(W.G,{css:o$.reviewChangesHeader,children:(0,N.tZ)(F.xv,{css:o$.headerText,multiline:!1,children:"Commit"})}),(0,N.tZ)(i8,{status:a,onStagedFileClick:s})]}):null]}),y?(0,N.tZ)(oV,{items:Z}):(0,N.tZ)(oY,{})]}):(0,N.tZ)("div",{children:"No branch"})}function oQ(e,t){return e.map(function(e){return{type:"commit",commit:e,onViewCommitClick:t}})}function o0(){return(0,N.BX)(W.G,{children:[(0,N.tZ)(F.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a cherry-pick."}),(0,N.tZ)(F.xv,{multiline:!1,children:"Please finish the cherry-pick manually."})]})}var o1=(0,H.X)({branch:[nR.gU.nofill,j.l0.py(12),j.l0.px(8),j.l0.colWithGap(2),j.l0.justify.center,j.l0.borderRadius(8),j.l0.flex.shrink(1)],branchMetadata:[j.l0.rowWithGap(8),j.l0.align.center,j.l0.flex.shrink(1)]});function o2(e){var t=e.branch,n=e.current,r=e.onClick;return(0,N.BX)(W.G,{css:o1.branch,tabIndex:0,role:"button","aria-label":"Switch to branch ".concat((0,nA.bF)(t,!0)),onClick:r,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(null==r||r())},children:[(0,N.tZ)(F.xv,{multiline:!1,children:(0,N.tZ)(nq.Lr,{name:t.name,remote:t.type===ng.HO.REMOTE?t.remote:null,current:void 0!==n&&n,onClick:r,icon:!0})}),(0,N.tZ)(o4,{branch:t})]})}function o4(e){var t=e.branch;return(0,N.BX)(W.G,{css:o1.branchMetadata,children:[(0,N.tZ)(nV,{name:t.commit.author.name,email:t.commit.author.email,color:"dimmest",allowPlaceholderAvatar:!0}),(0,N.tZ)(nB.EK,{date:t.commit.author.date,textColor:"dimmest",textVariant:"small"})]})}var o3=(0,H.X)({expandButton:[{verticalAlign:"middle"},j.l0.justify.spaceBetween],branchListContainer:[j.l0.display.flex],topRow:[j.l0.p(4),j.l0.flex.row,j.l0.align.center,j.l0.justify.spaceBetween],topRowInteractive:[{verticalAlign:"middle"},j.l0.justify.spaceBetween,j.l0.borderRadius(8,8,0,0)],branchList:[j.l0.borderRadius(8)],branchListFoldable:[j.l0.borderRadius(0,0,8,8)]});function o8(e){var t=e.name,n=e.branches,r=e.current,i=void 0===r?null:r,o=e.foldable,a=void 0!==o&&o,l=e.folded,c=e.switchBranch,s=(0,P._)((0,$.useState)(!!a&&void 0!==l&&l),2),u=s[0],d=s[1],f=(0,$.useMemo)(function(){return n.map(function(e){return(0,N.tZ)(o2,{branch:e,current:(0,ng.p3)(e,i),onClick:function(){return c(e)}},(0,nA.Qj)(e))})},[n,i,c]);return u?(0,N.tZ)(ep.zx,{css:o3.expandButton,text:t,iconRight:(0,N.tZ)(tv.Z,{}),onClick:function(){return d(!1)},size:"big"}):a?(0,N.BX)(W.G,{css:o3.branchListContainer,children:[(0,N.tZ)(ep.zx,{css:o3.topRowInteractive,text:t,iconRight:(0,N.tZ)(tg.Z,{}),onClick:function(){return d(!0)},size:"big"}),(0,N.tZ)(em.Tg,{css:o3.branchListFoldable,elevated:!0,children:f})]}):(0,N.BX)(W.G,{css:o3.branchListContainer,children:[(0,N.tZ)(W.G,{css:o3.topRow,children:(0,N.tZ)(F.xv,{variant:"subheadDefault",multiline:!1,children:t})}),(0,N.tZ)(em.Tg,{css:o3.branchList,elevated:!0,children:f})]})}var o6=(0,H.X)({container:[j.l0.p(8),j.l0.colWithGap(8),j.l0.borderRadius(8)],buttonContainer:[j.l0.rowWithGap(4)],button:[j.l0.flex.grow(1)],inputDisabled:[{opacity:.75}]});function o5(){var e=(0,P._)((0,$.useState)(!0),2),t=e[0],n=e[1],r=(0,P._)((0,$.useState)(""),2),i=r[0],o=r[1],a=(0,P._)((0,$.useState)(!1),2),l=a[0],c=a[1],s=n_(),u=(0,q.Z)().git;function d(){n(!0),o("")}function f(){return h.apply(this,arguments)}function h(){return(h=(0,tP._)(function(){var e;return(0,tL.Jh)(this,function(r){switch(r.label){case 0:if(t||!i||l)return[2];return c(!0),[4,u.createBranch({name:i,checkout:!0})];case 1:return(e=r.sent()).error?(s(e.error),c(!1)):(u.forceRefresh(),c(!1),o(""),n(!0),(0,nj.J)("branch-created")),[2]}})})).apply(this,arguments)}if(t)return(0,N.tZ)(ep.zx,{text:"Create Branch",iconLeft:(0,N.tZ)(nG.Z,{}),onClick:function(){return n(!1)}});var p=!i||!(0,nA.Dc)(i);return(0,N.BX)(em.Tg,{css:o6.container,elevated:!0,children:[(0,N.tZ)(o7,{value:i,onChange:o,onSubmit:f,onCancel:d,disabled:l}),(0,N.BX)(W.G,{css:o6.buttonContainer,children:[(0,N.tZ)(ep.zx,{css:o6.button,text:"Cancel",onClick:d,disabled:l}),(0,N.tZ)(ep.zx,{css:o6.button,text:"Create Branch",colorway:"primary",iconLeft:(0,N.tZ)(nG.Z,{}),onClick:f,loading:l,disabled:p})]})]})}function o7(e){var t=e.value,n=e.disabled,r=e.onChange,i=e.onSubmit,o=e.onCancel;function a(e){(0,nA.dC)(e)&&(null==r||r(e))}return(0,N.tZ)(ef.II,{value:t,css:n?o6.inputDisabled:void 0,disabled:n,placeholder:"Enter a name for your new branch",onChange:function(e){return a(e.currentTarget.value)},onKeyDown:function(e){return function(e,n){switch(e){case"Enter":null==i||i(),n();break;case"Escape":null==o||o(),n();break;case" ":if(""===t){n();break}a(t+"-"),n()}}(e.key,function(){return e.preventDefault()})},onBlur:function(){""===t&&(null==o||o())},autoFocus:!0})}function o9(e){var t,n,r=e.currentBranch,i=e.switchMode,o=n_(),a=(0,q.Z)().git,l=(0,P._)((0,$.useState)(null),2),c=l[0],s=l[1],u=(0,tN.Z)((t=(0,tP._)(function(e){var t,n,r,i,a,l,c,s,u,d,f,h,p,m,v,g,y,b,w;return(0,tL.Jh)(this,function(Z){switch(Z.label){case 0:return[4,e.listBranches()];case 1:if((t=Z.sent()).error)return o(t.error),tU({context:"dashboard-view",gitService:e,result:t}),[2,t];return[4,e.findDefaultBranches()];case 2:if((n=Z.sent()).error)return o(n.error),[2,n];r=t.branches,i=new Set,a=!0,l=!1,c=void 0;try{for(s=function(){var e=d.value,t=r.find(function(t){return(0,nA.Pi)(t,e)});t&&i.add(t)},u=n.refs[Symbol.iterator]();!(a=(d=u.next()).done);a=!0)s()}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}f=Date.now()-5184e6,h=[],p=[],m=!0,v=!1,g=void 0;try{for(y=r[Symbol.iterator]();!(m=(b=y.next()).done);m=!0)w=b.value,i.has(w)||(w.commit.author.date>f?h.push(w):p.push(w))}catch(e){v=!0,g=e}finally{try{m||null==y.return||y.return()}finally{if(v)throw g}}return[2,{active:h,stale:p,important:Array.from(i),error:null}]}})}),function(e){return t.apply(this,arguments)}),[o]),d=(n=(0,tP._)(function(e){var t;return(0,tL.Jh)(this,function(n){switch(n.label){case 0:if(null!==c)return[2];return(0,nA.Pi)(r,e)&&i({mode:b.CURRENT_BRANCH}),s(e),[4,a.switchBranch(e)];case 1:return(t=n.sent()).error?(o(t.error),tU({context:"dashboard-view",gitService:a,result:t,data:{branch:e.name}}),s(null)):(a.forceRefresh(),(0,nj.J)("branch-switched")),[2]}})}),function(e){return n.apply(this,arguments)});if((0,$.useEffect)(function(){null!==c&&(0,nA.Pi)(r,c)&&(s(null),i({mode:b.CURRENT_BRANCH}))},[r,c,i]),!u||null!==c)return(0,N.tZ)(oY,{});if(u.error)return(0,N.tZ)("div",{children:u.error});var f=u.active,h=u.stale,p=u.important;return(0,N.tZ)(W.G,{css:[j.l0.colWithGap(8)],children:(0,N.BX)(W.G,{css:[j.l0.pb(8),j.l0.px(8),j.l0.colWithGap(16)],children:[r?(0,N.BX)(W.G,{css:j.l0.colWithGap(8),children:[(0,N.tZ)(o8,{branches:[r],current:r,name:"Current Branch",switchBranch:d}),(0,N.tZ)(o5,{})]}):null,(0,N.tZ)(F.xv,{variant:"subheadDefault",multiline:!1,css:o$.switchToBranch,children:"Switch Branch"}),0===p.length?null:(0,N.tZ)(o8,{branches:p,current:r,name:"Important",switchBranch:d,foldable:!0}),0===f.length?null:(0,N.tZ)(o8,{branches:f,current:r,name:"Active",switchBranch:d,foldable:!0}),0===h.length?null:(0,N.tZ)(o8,{branches:h,current:r,name:"Stale",switchBranch:d,foldable:!0,folded:!0})]})})}function ae(){return(0,N.BX)(W.G,{children:[(0,N.tZ)(F.xv,{multiline:!1,children:"Unsupported state: your HEAD is currently detached."}),(0,N.tZ)(F.xv,{multiline:!1,children:"Please checkout a branch."})]})}function at(){return(0,N.BX)(W.G,{children:[(0,N.tZ)(F.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a rebase."}),(0,N.tZ)(F.xv,{multiline:!1,children:"Please finish the rebase manually."})]})}function an(){return(0,N.BX)(W.G,{children:[(0,N.tZ)(F.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a revert."}),(0,N.tZ)(F.xv,{multiline:!1,children:"Please finish the revert manually."})]})}var ar=(0,H.X)({container:[j.l0.colWithGap(16),j.l0.p(8),j.l0.pt(16)],fakePaneHeader:[j.l0.px(8),j.l0.py(4),j.l0.rowWithGap(8),j.l0.backgroundColor.backgroundDefault,j.l0.align.center,{borderBottom:"1px solid ".concat(j.TV.outlineDimmer)}]});function ai(e){var t=e.onFileClick,n=e.status;return(0,N.BX)(W.G,{children:[(0,N.tZ)(ao,{}),(0,N.BX)(W.G,{css:ar.container,children:[(0,N.tZ)(rF.E,{colorway:"orange",icon:(0,N.tZ)(rv.Z,{}),text:"Your current branch doesn't have any commits. You need to make an initial commit before continuing."}),(0,N.BX)(W.G,{css:o$.section,children:[(0,N.tZ)(W.G,{css:o$.reviewChangesHeader,children:(0,N.tZ)(F.xv,{css:o$.headerText,multiline:!1,children:"Commit"})}),(0,N.tZ)(i8,{status:n,onStagedFileClick:t,defaultMessage:"Initial commit"})]})]})]})}function ao(){var e,t=n_(),n=(0,tN.Z)((e=(0,tP._)(function(e){var n;return(0,tL.Jh)(this,function(r){switch(r.label){case 0:return[4,e.status()];case 1:return(n=r.sent()).error&&(tU({context:"unborn-branch-view-status",gitService:e,result:n}),t(n.error)),[2,n]}})}),function(t){return e.apply(this,arguments)}),[t]);return(null==n?void 0:n.error)?null:(0,N.tZ)(W.G,{css:ar.fakePaneHeader,children:(null==n?void 0:n.branch)?(0,N.tZ)(nq.Lr,{name:n.branch,current:!0,heading:!0}):null})}var aa=function(e){var t,n=(0,tN.Z)((t=(0,tP._)(function(t){var n,r,i;return(0,tL.Jh)(this,function(o){switch(o.label){case 0:return[4,t.isInitialized()];case 1:if((n=o.sent()).error)return[2,{error:n.error}];if(!n.initialized)return[2,{error:ry.aq.NOT_INITIALIZED}];return[4,t.log({max:1,revRange:e})];case 2:if((r=o.sent()).error)return[2,{error:r.error}];if(0===r.commits.length)return[2,{error:ry.aq.NO_COMMITS}];return[2,{commit:null!==(i=r.commits[0])&&void 0!==i?i:null,error:null}]}})}),function(e){return t.apply(this,arguments)}),[e]);return(0,$.useMemo)(function(){return n?n.error?{error:n.error}:n:null},[n])},al=n(99321),ac=n(72452),as=[{"& > span:first-child":[j.l0.flex.grow(1),j.l0.textAlign.left]},{"& > span":[j.l0.flex.shrink(1)]}],au=(0,H.X)({container:[j.l0.colWithGap(16)],splitOrUnisonContainer:[j.l0.colWithGap(8),j.l0.display.flex,j.l0.flex.row,j.l0.flex.wrap,j.l0.align.center,j.l0.justify.spaceBetween],emphasizedText:[j.l0.fontWeight.medium],buttonFolded:[as,j.l0.height("auto"),j.l0.py(8),j.l0.fontWeight.medium],buttonUnfolded:[as,j.l0.height("auto"),j.l0.py(8),j.l0.fontWeight.medium,j.l0.borderRadius(8,8,0,0)],buttonGroupItem:[j.l0.width(64),j.l0.height(32)],textContainer:[j.l0.mt(8),j.l0.overflow("break-all")]}),ad=function(e){var t=e.children;return(0,N.tZ)(W.G,{css:au.splitOrUnisonContainer,children:t})},af=function(e){var t=e.value,n=e.onChange;return(0,N.BX)(tp.hE,{name:"SplitOrUnifiedDiff",value:t,onChange:n,row:!0,children:[(0,N.tZ)(W.G,{css:au.buttonGroupItem,children:(0,N.tZ)(tp.rK,{value:"Unified",text:"Unified",id:"SplitOrUnifiedDiffUnified"})}),(0,N.tZ)(W.G,{css:au.buttonGroupItem,children:(0,N.tZ)(tp.rK,{value:"Split",text:"Split",id:"SplitOrUnifiedDiffSplit"})})]})},ah=function(e){var t=e.value,n=e.onChange;return(0,N.tZ)(M.hU,{alt:"Markdown"===t?"View Source":"View Markdown",onClick:function(){return n("Markdown"===t?"Source":"Markdown")},children:"Markdown"===t?(0,N.tZ)(al.Z,{}):(0,N.tZ)(ac.Z,{})})},ap=function(e){var t=e.files,n=e.totalFiles;return t===n?(0,N.BX)(F.xv,{css:au.textContainer,children:["Showing"," ",(0,N.BX)("span",{css:au.emphasizedText,children:[n," changed ",(0,eM.Z)("file",n),"."]})]}):(0,N.BX)(F.xv,{css:au.textContainer,children:["Showing"," ",(0,N.BX)("span",{css:au.emphasizedText,children:[t," of ",n," changed ",(0,eM.Z)("file",n),"."]})]})},am=function(e){var t=e.query,n=e.setQuery,r=e.totalDiffs,i=e.diffs,o=e.splitOrUnified,a=e.setSplitOrUnified,l=e.folded,c=e.setFolded,s=(0,$.useMemo)(function(){return i.filter(function(e){var n="".concat(e.final.path,"/").concat(e.final.filename),r="".concat(e.initial.path,"/").concat(e.initial.filename);return n.toLowerCase().includes(t.toLowerCase())||r.toLowerCase().includes(t.toLowerCase())})},[t,i]);return(0,N.BX)(W.G,{css:au.container,children:[(0,N.tZ)(nI.E,{value:t,onChange:function(e){n(e.target.value)},onClear:function(){n("")},loading:!1,placeholder:"Filter changed files"}),(0,N.BX)(ad,{children:[(0,N.tZ)(ap,{files:s.length,totalFiles:r}),i.length>0?(0,N.tZ)(af,{value:o,onChange:function(e){return a(e)}}):null]}),s.map(function(e){var t;return(0,N.tZ)(tI,{folded:null===(t=l[e.id])||void 0===t||t,setFolded:function(t){return c(e.id,t)},diff:e,splitOrUnified:o},e.id)})]})},av=(0,H.X)({metaContainer:[j.l0.rowWithGap(4),j.l0.align.center,j.l0.flex.wrap]}),ag=function(e){var t=e.author,n=e.committer,r=oR(n,t),i=oD(n.date,t.date);return(0,N.BX)(W.G,{css:av.metaContainer,children:[r&&i?(0,N.BX)(N.HY,{children:[(0,N.tZ)(nV,{name:t.name,email:t.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,N.tZ)(F.xv,{variant:"small",children:"authored"}),(0,N.tZ)(nB.EK,{date:t.date,textColor:"dimmest",textVariant:"small"}),(0,N.tZ)(F.xv,{variant:"small",children:"and"})]}):null,r&&!i?(0,N.BX)(N.HY,{children:[(0,N.tZ)(nV,{name:t.name,email:t.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,N.tZ)(F.xv,{variant:"small",children:"authored"}),(0,N.tZ)(F.xv,{variant:"small",children:"and"})]}):null,(0,N.tZ)(nV,{name:n.name,email:n.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),!r&&i?(0,N.BX)(N.HY,{children:[(0,N.tZ)(F.xv,{variant:"small",children:"authored "}),(0,N.tZ)(nB.EK,{date:t.date,textColor:"dimmest",textVariant:"small"}),(0,N.tZ)(F.xv,{variant:"small",children:"and "})]}):null,(0,N.tZ)(F.xv,{variant:"small",children:"committed"}),(0,N.tZ)(nB.EK,{date:n.date,textColor:"dimmest",textVariant:"small"})]})},ay=(0,H.X)({dullText:[j.l0.color.foregroundDimmest],tooltipContainer:[j.l0.display.inlineBlock]}),ab=function(e){var t=e.onViewCommitClick,n=e.hash;return(0,N.tZ)("span",{css:ay.tooltipContainer,children:(0,N.tZ)(tB.u,{tooltip:"View commit",children:(0,N.tZ)("button",{css:[j.l0.reset.button,j.l0.linkStyle,j.l0.fontWeight.medium],onClick:function(){return t(n)},children:n.slice(0,7)})})})},aw=function(e){var t=e.parents,n=e.grafted,r=e.onViewCommitClick;return(0,N.BX)(F.xv,{variant:"small",children:[(0,N.BX)("span",{css:ay.dullText,children:[n?"Grafted with ":null,t.length," ",(0,eM.Z)("parent",t.length)," "]}),0===t.length?null:t.map(function(e,n){return(0,N.BX)($.Fragment,{children:[(0,N.tZ)(ab,{hash:e,onViewCommitClick:r}),n===t.length-1?"":(0,N.tZ)("span",{css:ay.dullText,children:", "})]},e)})]})},aZ=function(e){var t=e.source,n=e.target;return n?(0,N.BX)(N.HY,{children:[(0,N.tZ)("span",{children:"branch"}),(0,N.tZ)(nq.Lr,{name:t}),(0,N.tZ)("span",{children:" into "}),(0,N.tZ)(nq.Lr,{name:n})]}):(0,N.BX)(N.HY,{children:[(0,N.tZ)("span",{children:"branch"}),(0,N.tZ)(nq.Lr,{name:t})]})},ax="gitCommitSubject",aC=(0,eU.iv)([j.l0.display.inline,{fontSize:"inherit",fontWeight:"inherit",lineHeight:"inherit"}]),a_=(0,H.X)({header:[(w={},(0,e5._)(w,"& .".concat(ax),aC),(0,e5._)(w,"& .".concat(ax," > div"),aC),(0,e5._)(w,"& .".concat(ax," p"),aC),w)],markerContainer:[j.l0.display.inlineFlex,j.l0.mr(4)],mergeContainer:[j.l0.rowWithGap(4),j.l0.flex.row,j.l0.flex.wrap,j.l0.align.stretch,j.l0.flex.shrink(0)]}),aS=function(e){var t=e.merge,n=e.revert,r=e.subject,i=e.remotes,o=e.onViewCommitClick,a=(0,$.useMemo)(function(){var e,r=null;if((null==t?void 0:t.type)==="pull-request"?r=t.id:n&&(null==n?void 0:n.pr)&&(r=n.pr),r&&i){var o=i.get("origin");if(!o){var a=Array.from(i.values());if(1!==a.length)return;o=a[0]}return null!==(e=rI(o))&&void 0!==e?e:void 0}},[t,i,n]);return(0,N.BX)(F.h4,{level:2,variant:"subheadDefault",multiline:!0,css:a_.header,children:[t?(0,N.BX)("span",{css:a_.mergeContainer,children:[(0,N.tZ)("span",{css:a_.markerContainer,children:(0,N.tZ)(oc,{type:"merge"})}),(0,N.tZ)(nq.ST,{text:"merged"}),(null==t?void 0:t.type)==="pull-request"?(0,N.BX)(N.HY,{children:["PR ",(0,N.tZ)(nq.$8,{id:t.id,hash:!0}),(null==n?void 0:n.pr)?(0,N.BX)(N.HY,{children:[(0,N.tZ)(nq.po,{text:"reverts"})," ",(0,N.tZ)(nq.$8,{id:n.pr,hash:!0})]}):null]}):null,(null==t?void 0:t.type)==="branch"?(0,N.tZ)(N.HY,{children:(0,N.tZ)(aZ,{source:t.source,target:t.target})}):null]}):null,n&&!t?(0,N.BX)(N.HY,{children:[(0,N.tZ)("span",{css:a_.markerContainer,children:(0,N.tZ)(oc,{type:"revert"})}),(0,N.tZ)(nq.po,{text:"reverted"})," ",(0,N.tZ)("button",{css:[j.l0.reset.button,j.l0.linkStyle,j.l0.fontWeight.medium],onClick:function(){(null==n?void 0:n.hash)!==void 0&&o(n.hash)},children:n.hash.slice(0,7)})," - "]}):null,(0,N.tZ)(nq.Zr,{className:ax,subject:r,remoteName:a})]})},ak=n(69170),aE=function(e){var t,n=n_(),r=(0,tN.Z)((t=(0,tP._)(function(t){var n,r,i,o,a,l;return(0,tL.Jh)(this,function(c){switch(c.label){case 0:return i=e.hash,[4,t.getFilesForCommit(i)];case 1:if(null==(o=c.sent())?void 0:o.error)return tU({context:"use-commit-diffs",gitService:t,result:o,data:{commit:e}}),[2,{error:o.error,diffs:[]}];return a=(null==o?void 0:null===(n=o.files)||void 0===n?void 0:n.filter(function(e){return["ADDED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)}))||[],l=(null==o?void 0:null===(r=o.files)||void 0===r?void 0:r.filter(function(e){return["DELETED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)}))||[],[2,{error:null,diffs:Array.from(new Set((0,L._)(a).concat((0,L._)(l)))).map(function(e){var t,n;return{id:(0,t8.v4)(),status:e.type,loading:!1,initial:{filename:(0,K.UO)(null!==(t=e.originalPath)&&void 0!==t?t:e.path),path:(0,K.Il)(null!==(n=e.originalPath)&&void 0!==n?n:e.path),content:""},final:{filename:(0,K.UO)(e.path),path:(0,K.Il)(e.path),content:""}}})}]}})}),function(e){return t.apply(this,arguments)}),[e]);return(0,$.useMemo)(function(){return r?r.error?(n(r.error),null):r:null},[n,r])},aT=(l=(0,tP._)(function(e,t,n,r){var i,o,a;return(0,tL.Jh)(this,function(l){switch(l.label){case 0:return i=""===t?n:"".concat(t,"/").concat(n),[4,e.getFileContents({path:i,revision:r})];case 1:if((o=l.sent()).error)throw o.error;return[2,null!==(a=null==o?void 0:o.content)&&void 0!==a?a:""]}})}),function(e,t,n,r){return l.apply(this,arguments)}),aR=(c=(0,tP._)(function(e,t,n){var r,i,o,a;return(0,tL.Jh)(this,function(l){switch(l.label){case 0:return i=t.hash,[4,aT(e,n.final.path,n.final.filename,i)];case 1:if(o=l.sent(),a="",!(!t.grafted&&(null===(r=t.parents)||void 0===r?void 0:r.length)))return[3,3];return[4,aT(e,n.initial.path,n.initial.filename,"".concat(i,"^"))];case 2:a=l.sent(),l.label=3;case 3:return[2,(0,eu._)((0,es._)({},n),{loading:!1,initial:(0,eu._)((0,es._)({},n.initial),{content:a}),final:(0,eu._)((0,es._)({},n.final),{content:o})})]}})}),function(e,t,n){return c.apply(this,arguments)}),aD=(0,H.X)({content:[j.l0.colWithGap(16),j.l0.p(16)],splitContainer:[j.l0.display.flex,j.l0.flex.row,j.l0.flex.shrink(1),j.l0.flex.wrap,j.l0.justify.spaceBetween,j.l0.maxWidth("100%"),j.l0.border({color:j.TV.outlineDimmest,direction:"bottom"}),j.l0.pb(16)]}),aI=function(e){var t,n,r=e.git,i=e.commit,o=e.info,a=e.onViewCommitClick,l=void 0===a?function(){}:a,c=e.remotes,s=e.status,u=(0,$.useMemo)(function(){return(0,iL.w)(s?s.changes.map(function(e){return e.path}):[])},[s]),d=(0,$.useMemo)(function(){if(!s)return[];var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=s.changes[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;a.type.worktree!==ty.h.UNMODIFIED&&e.push(a)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e},[s]),f=(0,ak.Z)().showConfirm,h=n_(),p=(0,P._)((0,$.useState)(!1),2),m=p[0],v=p[1],g=(0,P._)((0,$.useState)(""),2),y=g[0],b=g[1],w=(0,P._)((0,$.useState)("Split"),2),Z=w[0],x=w[1],C=(0,P._)((0,$.useState)("Markdown"),2),_=C[0],S=C[1],k=(0,P._)((0,$.useState)({}),2),E=k[0],T=k[1],R=(0,P._)((0,$.useState)([]),2),D=R[0],I=R[1],B=ok(i,o),G=B.hideBody,A=B.merge,O=B.revert,U=i.hash,M=i.subject,X=i.body,H=i.committer,V=i.author,z=i.grafted,q=null!==(n=i.parents)&&void 0!==n?n:[],J=aE(i),Y=(0,$.useCallback)((0,tP._)(function(){var e,t,n,o=arguments;return(0,tL.Jh)(this,function(a){switch(a.label){case 0:return e=!(o.length>0)||void 0===o[0]||o[0],[4,r.restoreFiles(e,i.hash)];case 1:if((t=a.sent()).error)return[3,3];return[4,r.status()];case 2:return(n=a.sent()).error?(h(n.error),tU({context:"commit-view",gitService:r,result:n,data:{files:e,commit:i.hash}})):f("Restored commit!"),r.forceRefresh(),[3,4];case 3:h(t.error),tU({context:"commit-view",gitService:r,result:t,data:{files:e,commit:i.hash}}),a.label=4;case 4:return[2]}})}),[i.hash,r,h,f]),K=iS(u),Q=K.openRestoreConfirmationModal,ee=K.restoreConfirmationModal,et=(0,$.useCallback)((0,tP._)(function(){var e,t,n,r=arguments;return(0,tL.Jh)(this,function(i){switch(i.label){case 0:if(!0!==(e=!(r.length>0)||void 0===r[0]||r[0]))return[3,6];if(v(!0),0!==d.length)return[3,2];return[4,Y()];case 1:return i.sent(),v(!1),[2];case 2:return[4,Q(d)];case 3:if(!i.sent())return[3,5];return[4,Y()];case 4:i.sent(),i.label=5;case 5:return v(!1),[3,10];case 6:if("string"==typeof e){if(!(n=d.find(function(t){return t.path===e})))throw v(!1),Error("Could not find file in worktree list");t=[n]}else t=d.filter(function(t){return e.includes(t.path)});return[4,Q(t)];case 7:if(!i.sent())return[3,9];return[4,Y(e)];case 8:i.sent(),i.label=9;case 9:v(!1),i.label=10;case 10:return[2]}})}),[Q,Y,d]);(0,$.useEffect)(function(){var e;I(null!==(e=null==J?void 0:J.diffs.map(function(e){return(0,eu._)((0,es._)({},e),{loading:!0})}))&&void 0!==e?e:[])},[J]),(0,$.useEffect)(function(){null!==J&&J.error&&h(J.error)},[J,h]);var en=(t=(0,tP._)(function(e,t){var n,o,a;return(0,tL.Jh)(this,function(l){switch(l.label){case 0:if(T(function(n){var r=(0,es._)({},n);return r[e]=t,r}),!(n=D.find(function(t){return t.id===e})))return h(ry.aq.INVALID_STATE),tU({context:"commit-view",gitService:r,result:{error:ry.aq.INVALID_STATE},data:{diffId:e}}),[2];if(!(!t&&n.loading))return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,aR(r,i,n)];case 2:return o=l.sent(),I(function(t){var n=(0,L._)(t),r=n.findIndex(function(t){return t.id===e});return n[r]=o,n}),[3,4];case 3:return tU({context:"commit-view",gitService:r,result:a=l.sent(),data:{diffId:e}}),h(a),[2];case 4:return[2]}})}),function(e,n){return t.apply(this,arguments)});return(0,N.BX)(W.G,{css:aD.content,children:[(0,N.tZ)(aS,{remotes:c,merge:A,revert:O,subject:M,onViewCommitClick:l}),(0,N.BX)(ad,{children:[(0,N.BX)(W.G,{css:[j.l0.rowWithGap(8),j.l0.align.start,j.l0.flex.shrink(1)],children:[(0,N.tZ)(oE,{hash:U}),(0,N.tZ)(oT,{onClick:function(){return et()},text:"Restore All",loading:m})]}),G?null:(0,N.tZ)(ah,{value:_,onChange:function(e){S(e)}})]}),G?null:(0,N.tZ)(nq.uJ,{body:X,view:_}),(0,N.BX)(W.G,{css:aD.splitContainer,children:[(0,N.tZ)(ag,{author:V,committer:H}),(0,N.tZ)(aw,{parents:q,grafted:z,onViewCommitClick:l})]}),null!==A?(0,N.tZ)(F.xv,{variant:"small",color:"dimmest",children:"There is more than one parent, diffing against the first parent."}):null,null===J?(0,N.tZ)(oY,{}):(0,N.tZ)(am,{query:y,setQuery:b,totalDiffs:J.diffs.length,diffs:D,splitOrUnified:Z,setSplitOrUnified:x,folded:E,setFolded:en}),ee]})};function aB(e){var t=e.hash,n=e.remotes,r=e.onViewCommitClick,i=e.switchMode,o=e.status,a=(0,q.Z)().git,l=n_(),c=aa(null!=t?t:"");if(null===c)return(0,N.tZ)(oY,{});if(c.error)return c.error===ry.aq.NOT_INITIALIZED?i({mode:b.CURRENT_BRANCH}):(l(c.error),(c.error===ry.aq.UNKNOWN||c.error===ry.aq.UNKNOWN_NOT_GIT)&&tU({context:"commit-view",gitService:a,result:c,data:{hash:t}})),null;if(null===c.commit)return l(ry.aq.UNKNOWN),null;var s=c.commit,u=oi(s)||i9(s);return(0,N.tZ)(aI,{git:a,commit:s,info:u,onViewCommitClick:r,remotes:n,status:o})}var aG=n(5192),aA=(0,H.X)({container:[j.l0.colWithGap(4)],file:[j.l0.rowWithGap(8),j.l0.align.center],fileLeft:[j.l0.rowWithGap(8),j.l0.flex.grow(1),j.l0.align.center],filePrefix:[j.l0.color.foregroundDimmest]});function aP(e){var t=e.files,n=e.uniquePathMap,r=e.onFileClick,i=[];if(t instanceof Map){var o=!0,a=!1,l=void 0;try{for(var c,s=t[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=(0,P._)(c.value,2),d=u[0],f=u[1],h=n.get(d);i.push({path:d,prefix:h,resolved:f})}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}}else{var p=!0,m=!1,v=void 0;try{for(var g,y=t[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var b=g.value,w=n.get(b);i.push({path:b,prefix:w,resolved:!0})}}catch(e){m=!0,v=e}finally{try{p||null==y.return||y.return()}finally{if(m)throw v}}}return(0,N.tZ)(W.G,{css:aA.container,children:i.map(function(e){var t=e.path,n=e.prefix,i=e.resolved;return(0,N.BX)(W.G,{css:aA.file,children:[(0,N.BX)(W.G,{css:aA.fileLeft,children:[(0,N.tZ)(X.Z,{path:t}),(0,N.tZ)(F.xv,{multiline:!1,children:(0,N.tZ)(nq.yx,{path:t,prefix:n,onClick:function(){return r({path:t,type:"conflict"})}})})]}),i?(0,N.tZ)(rZ.Z,{color:j.TV.greenStronger}):(0,N.tZ)(rv.Z,{color:j.TV.orangeStronger})]},t)})})}function aL(e){var t=e.hasConflicts?(0,N.BX)(N.HY,{children:[(0,N.tZ)("span",{css:j.l0.fontWeight.medium,children:"Resolve all conflicts to complete merge."}),(0,N.tZ)("br",{}),(0,N.tZ)("span",{children:"You can't do anything else until the merge has been completed or aborted."})]}):(0,N.BX)(N.HY,{children:[(0,N.tZ)("span",{css:j.l0.fontWeight.medium,children:"You are in the middle of a merge."}),(0,N.tZ)("br",{}),(0,N.tZ)("span",{children:"You can't do anything else until the merge has been completed or aborted. You have no conflicts to resolve, so the merge can be completed without any further action."})]});return(0,N.tZ)(rF.E,{colorway:"warning",icon:(0,N.tZ)(rv.Z,{}),text:t})}var aN=(0,H.X)({container:[j.l0.rowWithGap(4),j.l0.align.center,j.l0.justify.spaceBetween],left:[{flexBasis:0,flexGrow:1},j.l0.colWithGap(8)],right:{flexBasis:0,flexGrow:1},branch:[j.l0.p(8),j.l0.rowWithGap(4),j.l0.flex.grow(1),j.l0.center,j.l0.borderRadius(8)]});function aO(e){var t,n=e.branch,r=e.refs,i=e.refsAreBranches,o=e.isUpstreamPull;if(!r.length)return null;if(o){var a=(0,P._)((0,rk.Tg)(r[0]),2),l=a[0],c=a[1];l&&c&&(t=(0,N.tZ)(em.Tg,{css:aN.branch,elevated:!0,children:(0,N.tZ)(nq.Lr,{remote:l,name:c,icon:!0,heading:!0})}))}return t||(t=r.map(function(e){return(0,N.tZ)(em.Tg,{css:aN.branch,elevated:!0,children:(0,N.tZ)(nq.Lr,{name:e,icon:!!i||(0,N.tZ)(tG.Z,{size:16}),heading:!0})},e)})),(0,N.BX)(W.G,{css:aN.container,children:[(0,N.tZ)(W.G,{css:aN.left,children:t}),(0,N.tZ)(ev.Z,{size:24,color:j.TV.foregroundDimmest}),(0,N.tZ)(W.G,{css:aN.right,children:(0,N.tZ)(em.Tg,{css:aN.branch,elevated:!0,children:(0,N.tZ)(nq.Lr,{name:n,icon:!0,current:!0,heading:!0})})})]})}var aU=(0,H.X)({container:[j.l0.colWithGap(12),j.l0.pt(16),j.l0.pb(8),j.l0.px(8)],fakePaneHeader:[j.l0.p(8),j.l0.rowWithGap(8),j.l0.backgroundColor.backgroundDefault,j.l0.align.center,{borderBottom:"1px solid ".concat(j.TV.outlineDimmer)}],conflictResolution:[j.l0.colWithGap(16)],listContainer:[j.l0.p(8),j.l0.colWithGap(8),j.l0.borderRadius(8)],list:[j.l0.pb(8),j.l0.colWithGap(8)],listDisabled:[{opacity:.5},j.l0.pb(8),j.l0.colWithGap(8)],listHeader:[j.l0.pb(4),j.l0.flex.grow(1),j.l0.border({color:j.TV.outlineDimmer,direction:"bottom"})],listFiles:[j.l0.px(8)],includeOtherFiles:[{cursor:"pointer",maxWidth:"max-content",userSelect:"none"},j.l0.rowWithGap(8)],buttons:[j.l0.colWithGap(8)]});function aM(e){var t,n=e.onFileClick,r=e.gotoPendingState,i=(0,P._)((0,$.useState)(!0),2),o=i[0],a=i[1],l=(0,P._)((0,$.useState)(!1),2),c=l[0],s=l[1],u=(0,P._)((0,$.useState)(!1),2),d=u[0],f=u[1],h=c||d,p=n_(),m=(0,q.Z)().git,v=(0,$.useId)(),g=(0,tN.Z)((t=(0,tP._)(function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y,b,w;return(0,tL.Jh)(this,function(Z){switch(Z.label){case 0:return[4,e.status()];case 1:if((t=Z.sent()).error)return tU({context:"use-merging-view-state-status",gitService:e,result:t}),[2,t];if(!(n=t.branch))return[2,{error:ry.aq.HEAD_DETACHED}];return[4,e.getConflictingFiles()];case 2:if((r=Z.sent()).error)return[2,r];return i=r.files,[4,e.getMergingRefs()];case 3:if((o=Z.sent()).error)return tU({context:"use-merging-view-state-merging-refs",gitService:e,result:o,data:{status:t,conflictingFiles:i}}),[2,o];a=o.commits,s=(c=(l=o.branches).length>0)?l:a,u=t.changes.filter(function(e){return!e.unmerged}).map(function(e){return e.path}),d=!0,f=!0,h=!1,p=void 0;try{for(m=i[Symbol.iterator]();!(f=(v=m.next()).done);f=!0)if(!(0,P._)(v.value,2)[1]){d=!1;break}}catch(e){h=!0,p=e}finally{try{f||null==m.return||m.return()}finally{if(h)throw p}}return g=(0,iL.w)(t.changes.map(function(e){return e.path})),y=i.size>0,b=u.length>0,w=null!==t.upstream&&1===l.length&&l[0]===t.upstream.branch,[2,{refs:s,branch:n,conflictingFiles:i,otherChangedFiles:u,refsAreBranches:c,allIsResolved:d,uniquePathMap:g,hasConflicts:y,hasOtherChanges:b,isUpstreamPull:w,error:null}]}})}),function(e){return t.apply(this,arguments)}));if((0,$.useEffect)(function(){(null==g?void 0:g.error)&&p(g.error)},[null==g?void 0:g.error,p]),!g)return(0,N.tZ)(oY,{});if(g.error)return null;var y=g.refs,b=g.branch,w=g.conflictingFiles,Z=g.otherChangedFiles,x=g.refsAreBranches,C=g.allIsResolved,_=g.uniquePathMap,S=g.hasConflicts,k=g.hasOtherChanges,E=g.isUpstreamPull;function T(){return(T=(0,tP._)(function(){var e,t,n,i,a,l,c,u,d,f,v;return(0,tL.Jh)(this,function(g){switch(g.label){case 0:if(!C||h)return[2];s(!0),e=[],t=!0,n=!1,i=void 0;try{for(a=w.keys()[Symbol.iterator]();!(t=(l=a.next()).done);t=!0)c=l.value,e.push(c)}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return o&&(u=e).push.apply(u,(0,L._)(Z)),[4,m.stageFiles({all:!1})];case 1:if((d=g.sent()).error)return p(d.error),s(!1),[2];return[4,m.stageFiles({add:e})];case 2:if((f=g.sent()).error)return p(f.error),s(!1),[2];return[4,m.mergeContinue()];case 3:if(!(v=g.sent()).error)return[3,5];return[4,m.stageFiles({all:!1})];case 4:return g.sent(),p(v.error),s(!1),[3,6];case 5:r(),m.forceRefresh(),g.label=6;case 6:return[2]}})})).apply(this,arguments)}function R(){return(R=(0,tP._)(function(){var e;return(0,tL.Jh)(this,function(t){switch(t.label){case 0:if(h)return[2];return f(!0),[4,m.mergeAbort()];case 1:return(e=t.sent()).error?(p(e.error),f(!1),tU({context:"merging-view-abort",gitService:m,result:e,data:{branch:b}})):(r(),m.forceRefresh()),[2]}})})).apply(this,arguments)}var D=E?"Complete in-progress pull":"Complete in-progress merge";return S&&(D=E?"Resolve pull conflicts":"Resolve merge conflicts"),(0,N.BX)(W.G,{children:[(0,N.BX)(W.G,{css:aU.fakePaneHeader,children:[(0,N.tZ)(aG.Z,{}),(0,N.tZ)(F.xv,{variant:"subheadDefault",multiline:!1,children:D})]}),(0,N.BX)(W.G,{css:aU.container,children:[(0,N.tZ)(aO,{branch:b,refs:y,refsAreBranches:x,isUpstreamPull:E}),(0,N.tZ)(aL,{hasConflicts:S}),(0,N.BX)(em.Tg,{css:aU.listContainer,elevated:!0,children:[(0,N.BX)(W.G,{css:aU.list,children:[(0,N.tZ)(W.G,{css:aU.listHeader,children:(0,N.tZ)(F.xv,{css:j.l0.fontWeight.medium,multiline:!1,children:"Conflicting Files"})}),(0,N.tZ)(W.G,{css:aU.listFiles,children:S?(0,N.tZ)(aP,{files:w,uniquePathMap:_,onFileClick:n}):(0,N.tZ)(F.xv,{variant:"small",color:"dimmest",multiline:!1,children:"There are no conflicting files in this merge."})})]}),k?(0,N.BX)(W.G,{css:o?aU.list:aU.listDisabled,children:[(0,N.tZ)(W.G,{css:aU.listHeader,children:(0,N.tZ)(F.xv,{css:j.l0.fontWeight.medium,multiline:!1,children:"Other Changed Files"})}),(0,N.tZ)(W.G,{css:aU.listFiles,children:(0,N.tZ)(aP,{files:Z,uniquePathMap:_,onFileClick:n})})]}):null]}),(0,N.BX)(W.G,{css:aU.includeOtherFiles,tag:"label",children:[(0,N.tZ)(rh.X,{id:v,checked:o,onChange:function(e){return a(e)}}),(0,N.tZ)(F.xv,{multiline:!1,children:"Include other changed files in commit"})]}),(0,N.BX)(W.G,{css:aU.buttons,children:[(0,N.tZ)(ep.zx,{text:E?"Complete pull":"Complete merge and commit",colorway:"primary",iconLeft:c?(0,N.tZ)(z.Z,{}):(0,N.tZ)(aG.Z,{}),disabled:!C||h,loading:c,onClick:function(){return T.apply(this,arguments)}}),(0,N.tZ)(ep.zx,{text:E?"Abort pull":"Abort merge",colorway:"negative",iconLeft:d?(0,N.tZ)(z.Z,{}):(0,N.tZ)(ig.Z,{}),disabled:h,loading:d,onClick:function(){return R.apply(this,arguments)}})]})]})]})}var aX=(0,H.X)({container:[j.l0.colWithGap(12),j.l0.pt(16),j.l0.pb(8),j.l0.px(8)],fakePaneHeader:[j.l0.p(8),j.l0.rowWithGap(8),j.l0.backgroundColor.backgroundDefault,j.l0.align.center,{borderBottom:"1px solid ".concat(j.TV.outlineDimmer)}],conflictResolution:[j.l0.colWithGap(16)],listContainer:[j.l0.p(8),j.l0.colWithGap(8),j.l0.borderRadius(8)],list:[j.l0.pb(8),j.l0.colWithGap(8)],listDisabled:[{opacity:.5},j.l0.pb(8),j.l0.colWithGap(8)],listHeader:[j.l0.pb(4),j.l0.flex.grow(1),j.l0.border({color:j.TV.outlineDimmer,direction:"bottom"})],listFiles:[j.l0.px(8)],includeOtherFiles:[{cursor:"pointer",maxWidth:"max-content",userSelect:"none"},j.l0.rowWithGap(8)],buttons:[j.l0.colWithGap(8)]});function aF(e){var t,n=e.onFileClick,r=e.gotoPendingState,i=(0,P._)((0,$.useState)(!0),2),o=i[0],a=i[1],l=(0,P._)((0,$.useState)(!1),2),c=l[0],s=l[1],u=(0,P._)((0,$.useState)(!1),2),d=u[0],f=u[1],h=c||d,p=n_(),m=(0,q.Z)().git,v=(0,$.useId)(),g=(0,tN.Z)((t=(0,tP._)(function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p;return(0,tL.Jh)(this,function(m){switch(m.label){case 0:return[4,e.status()];case 1:if((t=m.sent()).error)return tU({context:"use-rebasing-view-state-status",gitService:e,result:t}),[2,t];if(!(n=t.branch))return[2,{error:ry.aq.HEAD_DETACHED}];return[4,e.getConflictingFiles()];case 2:if((r=m.sent()).error)return[2,r];i=r.files,o=t.changes.filter(function(e){return!e.unmerged}).map(function(e){return e.path}),a=!0,l=!0,c=!1,s=void 0;try{for(u=i[Symbol.iterator]();!(l=(d=u.next()).done);l=!0)if(!(0,P._)(d.value,2)[1]){a=!1;break}}catch(e){c=!0,s=e}finally{try{l||null==u.return||u.return()}finally{if(c)throw s}}return f=(0,iL.w)(t.changes.map(function(e){return e.path})),h=i.size>0,p=o.length>0,[2,{branch:n,conflictingFiles:i,otherChangedFiles:o,allIsResolved:a,uniquePathMap:f,hasConflicts:h,hasOtherChanges:p,error:null}]}})}),function(e){return t.apply(this,arguments)}));if((0,$.useEffect)(function(){(null==g?void 0:g.error)&&p(g.error)},[null==g?void 0:g.error,p]),!g)return(0,N.tZ)(oY,{});if(g.error)return null;var y=g.branch,b=g.conflictingFiles,w=g.otherChangedFiles,Z=g.allIsResolved,x=g.uniquePathMap,C=g.hasConflicts,_=g.hasOtherChanges;function S(){return(S=(0,tP._)(function(){var e,t,n,i,a,l,c,u,d,f,v;return(0,tL.Jh)(this,function(g){switch(g.label){case 0:if(!Z||h)return[2];s(!0),e=[],t=!0,n=!1,i=void 0;try{for(a=b.keys()[Symbol.iterator]();!(t=(l=a.next()).done);t=!0)c=l.value,e.push(c)}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return o&&(u=e).push.apply(u,(0,L._)(w)),[4,m.stageFiles({all:!1})];case 1:if((d=g.sent()).error)return p(d.error),s(!1),[2];return[4,m.stageFiles({add:e})];case 2:if((f=g.sent()).error)return p(f.error),s(!1),[2];return[4,m.escapeHatchGitExecWrite("git rebase --continue")];case 3:if(!(v=g.sent()).error)return[3,5];return[4,m.stageFiles({all:!1})];case 4:return g.sent(),p(v.error),s(!1),[3,6];case 5:r(),m.forceRefresh(),g.label=6;case 6:return[2]}})})).apply(this,arguments)}function k(){return(k=(0,tP._)(function(){var e;return(0,tL.Jh)(this,function(t){switch(t.label){case 0:if(h)return[2];return f(!0),[4,m.escapeHatchGitExecWrite("git rebase --abort")];case 1:return(e=t.sent()).error?(p(e.error),f(!1),tU({context:"rebasing-view-abort",gitService:m,result:e,data:{branch:y}})):(r(),m.forceRefresh()),[2]}})})).apply(this,arguments)}var E="Complete in-progress rebase";return C&&(E="Resolve conflicts"),(0,N.BX)(W.G,{children:[(0,N.BX)(W.G,{css:aX.fakePaneHeader,children:[(0,N.tZ)(aG.Z,{}),(0,N.tZ)(F.xv,{variant:"subheadDefault",multiline:!1,children:E})]}),(0,N.BX)(W.G,{css:aX.container,children:[(0,N.tZ)(aL,{hasConflicts:C}),(0,N.BX)(em.Tg,{css:aX.listContainer,elevated:!0,children:[(0,N.BX)(W.G,{css:aX.list,children:[(0,N.tZ)(W.G,{css:aX.listHeader,children:(0,N.tZ)(F.xv,{css:j.l0.fontWeight.medium,multiline:!1,children:"Conflicting Files"})}),(0,N.tZ)(W.G,{css:aX.listFiles,children:C?(0,N.tZ)(aP,{files:b,uniquePathMap:x,onFileClick:n}):(0,N.tZ)(F.xv,{variant:"small",color:"dimmest",multiline:!1,children:"There are no conflicting files in this step."})})]}),_?(0,N.BX)(W.G,{css:o?aX.list:aX.listDisabled,children:[(0,N.tZ)(W.G,{css:aX.listHeader,children:(0,N.tZ)(F.xv,{css:j.l0.fontWeight.medium,multiline:!1,children:"Other Changed Files"})}),(0,N.tZ)(W.G,{css:aX.listFiles,children:(0,N.tZ)(aP,{files:w,uniquePathMap:x,onFileClick:n})})]}):null]}),(0,N.BX)(W.G,{css:aX.includeOtherFiles,tag:"label",children:[(0,N.tZ)(rh.X,{id:v,checked:o,onChange:function(e){return a(e)}}),(0,N.tZ)(F.xv,{multiline:!1,children:"Include other changed files in commit"})]}),(0,N.BX)(W.G,{css:aX.buttons,children:[(0,N.tZ)(ep.zx,{text:"commit and continue rebase",colorway:"primary",iconLeft:c?(0,N.tZ)(z.Z,{}):(0,N.tZ)(aG.Z,{}),disabled:!Z||h,loading:c,onClick:function(){return S.apply(this,arguments)}}),(0,N.tZ)(ep.zx,{text:"Abort rebase",colorway:"negative",iconLeft:d?(0,N.tZ)(z.Z,{}):(0,N.tZ)(ig.Z,{}),disabled:h,loading:d,onClick:function(){return k.apply(this,arguments)}})]})]})]})}var aW=n(96372),aH=n(38753),aV=n(54579),az=n(85421),aj=(0,H.X)({gitProfileTitle:[j.l0.rowWithGap(8),j.l0.align.center]});function aq(e){var t=e.username,n=e.avatar;return(0,N.BX)(W.G,{css:aj.gitProfileTitle,children:[(0,N.tZ)(nL.q,{src:null!=n?n:"/images/evalbot/evalbot_24",username:t}),(0,N.tZ)(F.xv,{variant:"subheadDefault",multiline:!1,children:t})]})}var aJ=(0,H.X)({list:{"> div:first-child":j.l0.borderRadius(8,8,0,0),"> div:last-child":[j.l0.borderRadius(0,0,8,8),{border:"none"}]},profile:[nR.gU.filled,j.l0.flex.row,j.l0.justify.spaceBetween,j.l0.p(12),j.l0.borderRadius(0),j.l0.border({color:j.TV.outlineDefault,direction:"bottom"})],information:[j.l0.colWithGap(4),j.l0.flex.shrink(1)],informationRow:[j.l0.rowWithGap(8),j.l0.align.center],email:[j.l0.flex.shrink(1)],connectToGithubContainer:[j.l0.colWithGap(4),j.l0.p(12),j.l0.backgroundColor.backgroundHigher],divider:[j.l0.backgroundColor.outlineDefault],connectToGitHubTitle:[j.l0.rowWithGap(4),j.l0.align.center],notConnectedText:[j.l0.pb(4)],settingsButton:{background:"transparent",border:"none","&:hover":{textDecoration:"underline"}},radio:{pointerEvents:"none"}});function aY(e){var t=e.profiles,n=e.current,r=e.showConnectToGithub,i=e.onSelectProvider,o=(0,az.useRouter)(),a=(0,aH.Gv)(o),l=(0,$.useId)();return(0,N.BX)(aV.E,{name:l,css:aJ.list,value:null!=n?n:"",children:[t.map(function(e){t=e.provider===ry.rG.GITHUB?"GitHub":"Default Profile";var t,r=void 0;return e.provider===ry.rG.GITHUB&&(r=a?"/mobile/auth/github/app_permissions":"/auth/github/app_permissions?close=1"),(0,N.tZ)(a$,{profile:e,providerName:t,current:e.provider===n,onSelectProvider:i,settingsURL:r},e.provider)}),r?(0,N.BX)(W.G,{css:aJ.connectToGithubContainer,children:[(0,N.tZ)(W.G,{css:aJ.connectToGitHubTitle,children:(0,N.tZ)(aq,{username:"GitHub Account"})}),(0,N.tZ)(F.xv,{color:"dimmest",css:aJ.notConnectedText,multiline:!1,children:"Your GitHub account is not connected."}),(0,N.tZ)(rS,{})]}):null]})}function a$(e){var t=e.profile,n=e.current,r=e.providerName,i=e.settingsURL,o=e.onSelectProvider,a=t.provider,l=t.name,c=t.username,s=t.email,u=t.avatar,d=(0,$.useId)();return(0,N.BX)(W.G,{onClick:function(){return o(a)},css:aJ.profile,children:[(0,N.BX)(W.G,{css:aJ.information,children:[(0,N.BX)(W.G,{css:aJ.informationRow,children:[(0,N.tZ)(aq,{username:c,avatar:u}),i?(0,N.tZ)(r4.Z,{css:aJ.settingsButton,text:"".concat(r," Settings"),iconRight:(0,N.tZ)(r3.Z,{}),href:i,target:"_blank",variant:"outlined",size:"small"}):(0,N.tZ)(F.xv,{color:"dimmest",variant:"small",multiline:!1,children:r})]}),(0,N.BX)(F.xv,{color:"dimmest",css:aJ.email,multiline:!1,children:[l," <",s,">"]})]}),(0,N.tZ)(aV.Y,{css:aJ.radio,id:d,checked:n,value:a})]})}var aK=(0,H.X)({profileContainer:[j.l0.flex.column]});function aQ(){var e,t=(0,q.Z)().git,n=(0,tN.Z)((e=(0,tP._)(function(e){var t,n;return(0,tL.Jh)(this,function(r){return t=e.getCurrentProfile(),[2,{profiles:e.getProfiles(),current:null!==(n=null==t?void 0:t.provider)&&void 0!==n?n:null,hasGitHub:!e.hasProfile(ry.rG.GITHUB),error:null}]})}),function(t){return e.apply(this,arguments)}));if(!n)return null;if(null!==n.error)return tU({context:"git-profiles",gitService:t,result:{error:n.error}}),null;var r=n.profiles,i=n.current,o=n.hasGitHub;return(0,N.tZ)(W.G,{css:aK.profileContainer,children:(0,N.tZ)(aY,{profiles:r,current:i,showConnectToGithub:o,onSelectProvider:function(e){t.setCurrentProfile(e),e===ry.rG.REPLIT_DEFAULT?(0,nj.J)("profile-changed",{profile:"replit"}):e===ry.rG.GITHUB&&(0,nj.J)("profile-changed",{profile:"github"})}})})}var a0=n(17519),a1=n(72370),a2=n(85438),a4=n(99165);function a3(){var e=(0,ej._)(["\n  query GithubRemoteConfigRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        description\n        isPrivate\n        slug\n        url\n      }\n    }\n  }\n"]);return a3=function(){return e},e}function a8(){var e=(0,ej._)(["\n  query GithubRemoteConfigUser {\n    currentUser {\n      ... on CurrentUser {\n        id\n        gitHubInfo {\n          accessToken\n        }\n      }\n    }\n  }\n"]);return a8=function(){return e},e}function a6(){var e=(0,ej._)(["\n  mutation GithubRemoteConfigCreateGithubRepo($input: CreateGithubRepoInput!) {\n    createGithubRepo(input: $input) {\n      ... on CreateGithubRepoResult {\n        remoteUrl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return a6=function(){return e},e}var a5={},a7=(0,eq.Ps)(a3());a8();var a9=(0,eq.Ps)(a6()),le=(0,H.X)({errorText:[j.l0.color.accentNegativeStronger,j.l0.pl(4)]});function lt(e){var t,n,r,i,o=e.remoteName,a=e.updateRemote,l=(0,ak.Z)().showConfirm,c=(0,q.Z)().git,s=(0,tK.Z)(),u=rC(),d=(0,a1.U)(),f=(0,ez.Z)(),h=(0,$.useRef)(null),p=(0,$.useRef)(null),m=(0,P._)((0,$.useState)(),2),v=m[0],g=m[1],y=(t=(0,es._)({},a5,{variables:{replId:f}}),eJ.a(a7,t)).data,b=(null==y?void 0:y.repl.__typename)==="Repl"?y.repl:{slug:void 0,description:void 0,isPrivate:void 0,url:void 0},w=b.slug,Z=b.description,x=b.isPrivate,C=b.url,_=(0,P._)((n=(0,es._)({},a5,void 0),a4.D(a9,n)),2),S=_[0],k=_[1].loading,E=(0,rw.v)({onAuth:function(){(0,nj.J)("github-user-connected")}}),T=(0,P._)((0,$.useState)(null==x||x),2),R=T[0],D=T[1],I=(0,P._)((0,$.useState)(w),2),B=I[0],G=I[1],A=(0,P._)((0,$.useState)(),2),L=A[0],O=A[1],U=(0,P._)((0,$.useState)(null!=Z?Z:C&&"Repository for https://replit.com".concat(C)),2),M=U[0],X=U[1],H=(0,P._)((0,$.useState)(),2),V=H[0],z=H[1],J=function(){O(void 0),z(void 0),g(void 0)},Y=(r=(0,tP._)(function(e){var t,n,r;return(0,tL.Jh)(this,function(i){switch(i.label){case 0:return[4,c.getRemotes()];case 1:if((t=i.sent()).error)return g("Error finding current remotes, ".concat(t.error)),[2];if(!t.remotes.has(o))return[3,3];return[4,c.setRemoteURL({remote:o,url:e})];case 2:if((n=i.sent()).error)return g("Error (".concat(n.error,") setting ").concat(o," to use ").concat(e," as a remote.")),[2];return a(e),(0,nj.J)("remote-edited"),[2];case 3:return[4,c.addRemote({name:o,url:e})];case 4:if((r=i.sent()).error)return g("Error (".concat(r.error,") adding ").concat(o," ").concat(e," as a remote.")),[2];return a(e),(0,nj.J)("remote-added"),[2]}})}),function(e){return r.apply(this,arguments)}),K=(i=(0,tP._)(function(){var e,t,n,r;return(0,tL.Jh)(this,function(i){switch(i.label){case 0:if(J(),!B)return[2];if(!(0,nA.GE)(B))return O("Invalid remote name."),[2];return[4,S({variables:{input:{name:B,description:null!=Z?Z:null,homepage:"replit.com".concat(C),isPrivate:R,ownerType:a2.xJ.User}}})];case 1:if((null===(e=(r=i.sent()).data)||void 0===e?void 0:e.createGithubRepo.__typename)==="UnauthorizedError"||(null===(t=r.data)||void 0===t?void 0:t.createGithubRepo.__typename)==="UserError")return g(r.data.createGithubRepo.message),[2];return(null===(n=r.data)||void 0===n?void 0:n.createGithubRepo.__typename)==="CreateGithubRepoResult"&&(Y(r.data.createGithubRepo.remoteUrl),(0,nj.J)("github-repository-published"),l("Created repository on Github")),[2]}})}),function(){return i.apply(this,arguments)});return u?(0,N.BX)(W.G,{children:[(0,N.tZ)(F.xv,{color:"dimmest",multiline:!1,children:"Repository name"}),(0,N.tZ)(ef.II,{ref:h,placeholder:"Enter repository name",value:B,onChange:function(e){O(void 0),G(e.target.value)},onKeyDown:function(e){if("Enter"===e.key){var t;e.preventDefault(),null===(t=p.current)||void 0===t||t.focus()}}}),(0,N.tZ)(F.xv,{css:le.errorText,multiline:!1,children:L}),(0,N.tZ)(aW.Z,{height:1}),(0,N.tZ)(F.xv,{color:"dimmest",multiline:!1,children:"Repository description"}),(0,N.tZ)(ef.B,{ref:p,maxLength:350,name:"Repository description",placeholder:"Enter repository description",value:null!=M?M:void 0,onChange:function(e){z(void 0),X(e.target.value)}}),(0,N.tZ)(F.xv,{css:le.errorText,multiline:!1,children:V}),(0,N.tZ)(aW.Z,{height:1}),(0,N.tZ)(F.xv,{color:"dimmest",multiline:!1,children:"Privacy"}),(0,N.BX)(tp.hE,{tag:"fieldset",id:d("privacy"),name:d("privacy"),value:R,onChange:function(e){return D(e)},row:!0,css:[j.l0.width("100%")],children:[(0,N.tZ)(tp.rK,{id:d("false"),value:!1,text:"Public",icon:(0,N.tZ)(a0.Z,{})}),(0,N.tZ)(tp.rK,{id:d("true"),value:!0,text:"Private",icon:(0,N.tZ)(ns.Z,{})})]}),(0,N.tZ)(aW.Z,{height:2}),(0,N.tZ)(ep.zx,{text:k?"Creating Repository on GitHub…":"Create Repository on GitHub",colorway:"primary",iconLeft:(0,N.tZ)(rx.Z,{}),onClick:K,loading:k}),v?(0,N.tZ)(F.xv,{css:le.errorText,maxLines:2,multiline:!1,children:v}):null]}):s?(0,N.tZ)(W.G,{children:(0,N.tZ)(ep.zx,{colorway:"primary",iconLeft:(0,N.tZ)(rx.Z,{}),text:"Open Account page to connect to GitHub",onClick:function(){rb.X.openExternalUrl("/account#connected-services")}})}):(0,N.tZ)(W.G,{children:(0,N.tZ)(ep.zx,{colorway:"primary",iconLeft:(0,N.tZ)(rx.Z,{}),text:"Connect to GitHub",onClick:E})})}var ln=(0,eU.iv)(j.l0.border({width:1,color:j.TV.outlineDimmer}),j.l0.borderRadius(8)),lr=(0,eU.iv)(nR.gU.filled,j.l0.flex.row,j.l0.justify.spaceBetween,j.l0.align.center,j.l0.px(8),j.l0.py(4),j.l0.borderRadius(8,8,0,0)),li=(0,eU.iv)(j.l0.borderRadius(8,8,0,0)),lo=(0,eU.iv)(j.l0.borderRadius(8)),la=(0,eU.iv)(j.l0.p(8)),ll=(0,eU.iv)(j.l0.flex.growAndShrink(1));function lc(e){var t=e.title,n=e.expanded,r=e.content,i=e.onClick;return(0,N.BX)(W.G,{css:ln,children:[(0,N.BX)(W.G,{css:[lr,n?li:lo],onClick:i,children:[(0,N.tZ)(W.G,{css:ll,children:(0,N.tZ)(F.xv,{variant:"subheadDefault",multiline:!1,children:t})}),n?(0,N.tZ)(tg.Z,{size:20}):(0,N.tZ)(tv.Z,{size:20})]}),n?(0,N.tZ)(W.G,{css:la,children:r}):null]})}var ls=(0,eU.iv)(j.l0.rowWithGap(4)),lu=(0,eU.iv)(j.l0.flex.growAndShrink(1)),ld=(0,eU.iv)(j.l0.color.accentNegativeStronger,j.l0.pl(4));function lf(e){var t,n=e.initialRemoteUrl,r=e.remoteName,i=e.updateRemote,o=(0,q.Z)().git,a=(0,P._)((0,$.useState)(),2),l=a[0],c=a[1];(0,$.useEffect)(function(){c(void 0)},[n]);var s=(0,P._)((0,$.useState)(),2),u=s[0],d=s[1],f=(0,P._)((0,$.useState)(!1),2),h=f[0],p=f[1],m=(t=(0,tP._)(function(){var e,t,n;return(0,tL.Jh)(this,function(a){switch(a.label){case 0:if(a.trys.push([0,5,6,7]),!l)return[2];if(p(!0),!(0,nA.LY)(l))throw Error("Invalid remote url.");return[4,o.getRemotes()];case 1:if((e=a.sent()).error)throw Error("Error finding current remotes, ".concat(e.error));if(!e.remotes.has(r))return[3,3];return[4,o.setRemoteURL({remote:r,url:l})];case 2:if((t=a.sent()).error)throw tU({context:"remote-input",gitService:o,result:t,data:{remote:r,url:l}}),Error("Error (".concat(t.error,") setting ").concat(r," to use ").concat(l," as a remote."));return(0,nj.J)("remote-edited"),i(l),[2];case 3:return[4,o.addRemote({name:r,url:l})];case 4:if((n=a.sent()).error)throw tU({context:"remote-input",gitService:o,result:n,data:{remote:r,url:l}}),Error("Error (".concat(n.error,") adding ").concat(r," ").concat(l," as a remote."));return(0,nj.J)("remote-added"),[3,7];case 5:return d(a.sent().message),[3,7];case 6:return p(!1),[7];case 7:return[2]}})}),function(){return t.apply(this,arguments)});return(0,N.BX)(W.G,{children:[(0,N.tZ)(ef.II,{name:"Remote URL",placeholder:"Enter Remote URL",value:null!=l?l:n,autoComplete:"off",autoCorrect:"off",onChange:function(e){d(void 0),c(e.target.value)},inputMode:"url","aria-label":"Remote URL",onKeyDown:function(e){"Enter"===e.key&&m()}}),u?(0,N.tZ)(F.xv,{variant:"small",css:ld,multiline:!1,children:u}):null,l&&l!==n?(0,N.BX)(N.HY,{children:[(0,N.tZ)(aW.Z,{height:1}),(0,N.BX)(W.G,{css:ls,children:[(0,N.tZ)(ep.zx,{css:lu,text:"Cancel",iconLeft:(0,N.tZ)(rg.Z,{}),onClick:function(){return c(void 0)}}),(0,N.tZ)(ep.zx,{css:lu,text:h?"Saving…":"Save",loading:h,colorway:"primary",iconLeft:(0,N.tZ)(rZ.Z,{}),onClick:m})]})]}):null]})}var lh="origin";function lp(){var e,t=(0,tN.Z)((e=(0,tP._)(function(e){var t,n,r,i;return(0,tL.Jh)(this,function(o){switch(o.label){case 0:return[4,e.getRemotes()];case 1:if((t=o.sent()).error)return tU({context:"remote-config",gitService:e,result:t}),[2,{url:void 0,name:lh,error:t.error}];if(!(r=(0,P._)(null!==(n=t.remotes.values())&&void 0!==n?n:void 0,1)[0]))return[2,{url:void 0,name:lh,error:null}];return[2,{url:r.push||r.fetch,name:null!==(i=r.name)&&void 0!==i?i:lh,error:null}]}})}),function(t){return e.apply(this,arguments)}));return null==t?(0,N.BX)(W.G,{css:j.l0.center,children:[(0,N.tZ)(F.xv,{color:"dimmest",multiline:!1,children:"Loading remote information."}),(0,N.tZ)(oY,{})]}):(null==t?void 0:t.error)?null:(0,N.tZ)(lm,{initialRemoteUrl:null==t?void 0:t.url,remoteName:null==t?void 0:t.name})}function lm(e){var t=e.initialRemoteUrl,n=e.remoteName,r=(0,P._)((0,$.useState)(t),2),i=r[0],o=r[1],a=(0,P._)((0,$.useState)(""===t||void 0===t?0:void 0),2),l=a[0],c=a[1],s=function(e){o(e)};return(0,N.BX)(W.G,{children:[(0,N.tZ)(F.xv,{variant:"subheadDefault",multiline:!1,children:"Remote"}),(0,N.tZ)(aW.Z,{height:1}),(0,N.tZ)(lf,{remoteName:n,initialRemoteUrl:i,updateRemote:s}),(0,N.tZ)(aW.Z,{height:2}),(0,N.tZ)(lc,{title:"GitHub",expanded:0===l,onClick:function(){return c(function(e){return 0===e?void 0:0})},content:(0,N.tZ)(lt,{remoteName:n,updateRemote:s})})]})}(s=Z||(Z={}))[s.GitHub=0]="GitHub";var lv=(0,eU.iv)(j.l0.px(16));function lg(){return(0,N.BX)(W.G,{css:lv,children:[(0,N.tZ)(aW.Z,{height:2}),(0,N.tZ)(lp,{}),(0,N.tZ)(aW.Z,{height:2}),(0,N.tZ)(ly,{})]})}function ly(){return(0,N.BX)(W.G,{children:[(0,N.tZ)(F.xv,{variant:"subheadDefault",multiline:!1,children:"Commit author"}),(0,N.tZ)(aW.Z,{height:1}),(0,N.tZ)(aQ,{})]})}var lb=(0,H.X)({gitPane:[j.l0.position.relative,j.l0.display.flex,j.l0.minHeight("100%")],gitPaneContent:[j.l0.flex.growAndShrink(1),j.l0.overflow("auto")]});function lw(e){var t,n=e.isActive,r=e.performPaneOperation,i=(0,nm.P5)({controlName:"flag-git-commit-view",logFlagToAnalytics:!1}),o=(0,$.useRef)(),a=(0,P._)((0,$.useState)(b.CURRENT_BRANCH),2),l=a[0],c=a[1],s=(0,P._)((0,$.useState)(null),2),u=s[0],d=s[1],f=(0,P._)((0,$.useState)(null),2),h=f[0],p=f[1],m=(0,P._)((0,$.useState)(!1),2),v=m[0],g=m[1];l_(void 0!==n&&n);var y=(0,tN.Z)((t=(0,tP._)(function(e){var t,n,r,i,o,a,l,c,s,u;return(0,tL.Jh)(this,function(d){switch(d.label){case 0:return[4,e.getRepositoryState()];case 1:if((t=d.sent()).error)return[2,t];if(n=t.state,r=t.type,i=null,o=null,a=null,!(r!==nv.y5.INITIALIZING))return[3,6];return[4,e.status()];case 2:if((l=d.sent()).error)return tU({context:"git-pane-status",gitService:e,result:l,data:{state:n,type:r}}),[2,l];return i=l,[4,e.getRemotes()];case 3:if((c=d.sent()).error)return tU({context:"git-pane-remotes",gitService:e,result:c,data:{state:n,type:r}}),[2,c];if(o=c.remotes,!i.branch)return[3,5];return[4,e.getBranch(i.branch)];case 4:if((s=d.sent()).error)return tU({context:"git-pane-branch",gitService:e,result:s,data:{state:n,type:r}}),[2,s];a=s.branch,d.label=5;case 5:return[3,8];case 6:return[4,e.status()];case 7:if((u=d.sent()).error)return tU({context:"git-pane-status-initializing",gitService:e,result:u,data:{state:n,type:r}}),[2,{state:n,type:r,status:i,remotes:o,currentBranch:a,error:null}];i=u,d.label=8;case 8:return[2,{state:n,type:r,status:i,remotes:o,currentBranch:a,error:null}]}})}),function(e){return t.apply(this,arguments)})),w=!y||y.error?null:y.currentBranch,Z=(0,$.useCallback)(function(e){switch(c(e),e){case b.DASHBOARD:(0,nj.J)("pane-mode-changed",{mode:"dashboard"});break;case b.BRANCH:(0,nj.J)("pane-mode-changed",{mode:"branch"});break;case b.CURRENT_BRANCH:(0,nj.J)("pane-mode-changed",{mode:"current-branch"});break;case b.SETTINGS:(0,nj.J)("pane-mode-changed",{mode:"settings"})}},[]),x=(0,$.useCallback)(function(){o.current?(Z(o.current),o.current=void 0):Z(b.CURRENT_BRANCH)},[Z]),C=(0,$.useCallback)(function(e){var t=function(e){o.current=l,Z(e)};switch(e.mode){case b.DASHBOARD:t(b.DASHBOARD);break;case b.BRANCH:if((0,ng.p3)(e.branch,w)){t(b.CURRENT_BRANCH);break}p(e.branch),t(b.BRANCH);break;case b.CURRENT_BRANCH:t(b.CURRENT_BRANCH);break;case b.SETTINGS:t(b.SETTINGS);break;case b.COMMIT:d(e.hash),t(b.COMMIT)}},[Z,l,w]),_=(0,$.useCallback)(function(e){var t=e.path,n=e.type,i=(0,eo.Dp)({path:t});if("codeEditor"!==i){r({operation:"open",pane:{type:i,data:{path:t}},secondary:!0});return}"conflict"===(void 0===n?"change":n)?r({operation:"open",pane:{type:"codeEditor",data:{path:t}},secondary:!0}):r({operation:"open",pane:{type:"diff",data:{left:{path:t,data:{type:"git",revision:"HEAD"}},right:{path:t,data:{type:"fs"}}}},secondary:!0})},[r]),S=(0,$.useCallback)(function(e){C({mode:b.COMMIT,hash:e})},[C]),k=(0,$.useCallback)(function(){g(!0)},[]);if(l===b.BRANCH&&(0,ng.p3)(h,w)&&Z(b.CURRENT_BRANCH),(0,$.useEffect)(function(){return g(!1)},[y]),v||!y||y.error)return(0,N.tZ)(lZ,{children:(null==y?void 0:y.error)?(0,N.tZ)(nS.Z,{headerText:"Git pane is unavailable.",bodyText:(0,N.BX)(N.HY,{children:["Something went wrong. Error: ",(0,N.tZ)("code",{children:y.error})]}),asciiArt:"Computer"}):(0,N.tZ)(oY,{})});switch(y.type){case nv.y5.INITIALIZING:case nv.y5.INTERMEDIATE:case nv.y5.DETACHED_HEAD:return(0,N.tZ)(lZ,{children:(0,N.tZ)(lx,{state:y.state,status:y.status,onFileClick:_,gotoPendingState:k})});case nv.y5.NORMAL:if(l===b.BRANCH&&!h||l===b.CURRENT_BRANCH&&!w)return(0,N.tZ)(lZ,{header:(0,N.tZ)(rs,{mode:b.DASHBOARD,branch:null,switchMode:C,onBack:x}),children:(0,N.tZ)(o9,{currentBranch:null,switchMode:C})});return(0,N.tZ)(lZ,{header:(0,N.tZ)(rs,{mode:l,branch:l===b.CURRENT_BRANCH?w:h,switchMode:C,onBack:x}),children:(0,N.tZ)(lC,{performPaneOperation:r,mode:l,status:y.status,remotes:y.remotes,previewBranch:h,previewCommit:u,currentBranch:w,switchMode:C,onStagedFileClick:_,onViewCommitClick:i?S:void 0,onViewSettingsClick:function(){return C({mode:b.SETTINGS})},gotoPendingState:k})})}}function lZ(e){var t=e.header,n=e.children,r=(0,P._)((0,$.useState)(function(){return(0,nb.MT)()}),1)[0];return(0,N.tZ)(nw.Provider,{value:r,children:(0,N.BX)(W.G,{css:lb.gitPane,children:[(0,N.tZ)(rO,{}),t,(0,N.tZ)(W.G,{css:lb.gitPaneContent,children:n})]})})}function lx(e){var t=e.state,n=e.status,r=e.onFileClick,i=e.gotoPendingState,o=(0,nm.P5)({controlName:"flag-new-rebase-editor",logFlagToAnalytics:!1,default:!1});switch(t){case nv.yG.NOT_INITIALIZED:return(0,N.tZ)(nS.Z,{headerText:"Version control for your Repl.",asciiArt:"Clock",action:(0,N.tZ)(rm,{})});case nv.yG.ON_UNBORN_BRANCH:return(0,N.tZ)(ai,{onFileClick:r,status:n});case nv.yG.MERGING:return(0,N.tZ)(aM,{onFileClick:r,gotoPendingState:i});case nv.yG.REBASING:return o?(0,N.tZ)(aF,{gotoPendingState:i,onFileClick:r}):(0,N.tZ)(at,{});case nv.yG.REVERTING:return(0,N.tZ)(an,{});case nv.yG.CHERRY_PICKING:return(0,N.tZ)(o0,{});case nv.yG.APPLYING_MAILBOX:return(0,N.tZ)(rU,{});case nv.yG.BISECTING:return(0,N.tZ)(rM,{});case nv.yG.DETACHED_HEAD:return(0,N.tZ)(ae,{});default:return null}}function lC(e){var t=e.mode,n=e.status,r=e.remotes,i=e.previewBranch,o=e.previewCommit,a=e.currentBranch,l=e.switchMode,c=e.onStagedFileClick,s=e.onViewCommitClick,u=e.onViewSettingsClick,d=e.gotoPendingState,f=e.performPaneOperation;switch(t){case b.DASHBOARD:return(0,N.tZ)(o9,{currentBranch:a,switchMode:l});case b.BRANCH:return(0,N.tZ)(oK,{performPaneOperation:f,status:n,branch:i,remotes:r,onStagedFileClick:c,onViewCommitClick:s,onViewSettingsClick:u,gotoPendingState:d});case b.CURRENT_BRANCH:return(0,N.tZ)(oK,{performPaneOperation:f,status:n,remotes:r,branch:a,onStagedFileClick:c,onViewCommitClick:s,onViewSettingsClick:u,gotoPendingState:d,current:!0});case b.SETTINGS:return(0,N.tZ)(lg,{});case b.COMMIT:return(0,N.tZ)(aB,{status:n,remotes:r,onViewCommitClick:s,hash:o,switchMode:l});default:(0,nk.Z)(t)}}function l_(e){var t=(0,q.Z)().git;(0,$.useEffect)(function(){e&&t.forceRefresh()},[e,t])}var lS=O.Dy.Object({type:O.Dy.Literal("git")}),lk={Content:function(e){var t=e.options,n=t.isActive,r=t.performPaneOperation;return(0,N.tZ)(lw,{isActive:n,performPaneOperation:r})},Icon:function(e){var t=e.size;return(0,N.tZ)(e4.Pd.Provider,{value:{color:e3.TV.greenStrongest,size:t},children:(0,N.tZ)(np.Z,{})})},getTitle:function(){return"Git"},description:"Version control for your Repl",decode:function(e){return U.B4.Decode(lS,e)}},lE=n(34270),lT=n(60305),lR=n(1813),lD=n(25150),lI=n(96264);function lB(){var e=(0,lR.uV)();return(0,$.useCallback)(function(t,n,r){e({origin:"History2: useHistoryBSOD",error:t,tags:{source:"ws-history2",type:n},extras:(0,es._)({state:lI.BI.current()},r)})},[e])}function lG(e){(0,lT.j)(lD.U3.HISTORY_USED,{action:e,which:"ws"})}function lA(e){var t=e.onClose;return(0,N.tZ)(ep.zx,{text:"Cancel",onClick:function(){lG("historyExplicitlyClosed"),t()}})}var lP=n(40332),lL=(0,eU.iv)({filter:"grayscale(100%) opacity(0.5)",pointerEvents:"none"});function lN(){var e,t="/replEnvironmentMobile"===(0,az.useRouter)().pathname,n=(0,lI.bA)(),r=(0,lI._Z)(),i=(0,a1.U)(),o=!n||0===n.count;return(0,N.BX)(W.G,{css:[j.l0.rowWithGap(8),j.l0.align.center,o?lL:null],children:[(0,N.tZ)(lP.Z,{id:i("diffButton"),isOn:null!==(e=null==n?void 0:n.comparing)&&void 0!==e&&e,onChange:function(e){o||r({comparing:e.target.checked})}}),(0,N.tZ)("label",{css:[{cursor:"pointer",userSelect:"none"},j.l0.flex.column,j.l0.align.center],htmlFor:i("diffButton"),children:(0,N.tZ)(F.xv,{multiline:!1,children:t?"Compare":"Compare Latest"})})]})}function lO(){var e=(0,lI.bA)();if(!e||0===e.count)return null;var t=e.changes[e.version].timestamp;return(0,N.tZ)(nB.EK,{textColor:"dimmer",dateFormat:"switch",date:t})}var lU=n(23742);function lM(e){var t=e.reversed,n=void 0!==t&&t,r=e.hideName,i=void 0!==r&&r,o=e.color,a=void 0===o?"default":o,l=(0,lI.bA)(),c=(0,$.useMemo)(function(){return[n?j.l0.rowReverseWithGap(4):j.l0.rowWithGap(4),j.l0.align.center]},[n]);if(!l)return null;if(0===l.count)return(0,N.BX)(W.G,{css:c,children:[(0,N.tZ)(lU.Z,{size:24}),(0,N.tZ)(F.xv,{color:a,multiline:!1,children:"Server Authored"})]});var s=l.changes[l.version];if(!l.users)return(0,N.BX)(W.G,{css:c,children:[(0,N.tZ)(nL.q,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),i?null:(0,N.tZ)(F.xv,{color:a,multiline:!1,children:"Unknown"})]});var u=l.users[s.userId];return u?(0,N.BX)(W.G,{css:c,children:[(0,N.tZ)(nL.q,{size:24,src:u.image,username:u.username}),i?null:(0,N.tZ)(F.xv,{color:a,multiline:!1,children:u.username})]}):s.timestamp>16546464e5?(0,N.BX)(W.G,{css:c,children:[(0,N.tZ)(lU.Z,{size:24}),i?null:(0,N.tZ)(F.xv,{color:a,multiline:!1,children:"Server Authored"})]}):(0,N.BX)(W.G,{css:c,children:[(0,N.tZ)(nL.q,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),i?null:(0,N.tZ)(F.xv,{color:a,multiline:!1,children:"Unknown"})]})}var lX=n(73789),lF=n(12285),lW=n(4955),lH=n(14105),lV=n(9670),lz=function(e){"use strict";(0,lW._)(n,e);var t=(0,lV._)(n);function n(e){var r;return(0,lF._)(this,n),(r=t.call(this,e)).name="UserError",r}return n}((0,lH._)(Error)),lj=n(51585);function lq(){var e=(0,ej._)(["\n  query WorkspaceHistory2Users($ids: [Int!]!) {\n    currentUser {\n      id\n      username\n      image\n    }\n    usersByIds(ids: $ids) {\n      id\n      username\n      image\n    }\n  }\n"]);return lq=function(){return e},e}function lJ(){var e=(0,ej._)(["\n  query WorkspaceHistory2CurrentUserDate {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return lJ=function(){return e},e}var lY=(0,eq.Ps)(lq());function l$(e,t,n){return new Promise(function(r,i){try{var o,a=e.watchTextFile(t,{onReady:(o=(0,tP._)(function(e){var t,o;return(0,tL.Jh)(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,n(e)];case 1:return t=l.sent(),r(t),[3,3];case 2:return o=l.sent(),i(o),[3,3];case 3:return a(),[2]}})}),function(e){return o.apply(this,arguments)})})}catch(e){i(e)}})}lJ();var lK=lj.I;function lQ(){return(lQ=(0,tP._)(function(e,t){var n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y,b;return(0,tL.Jh)(this,function(w){switch(w.label){case 0:n=new Set,r=!0,i=!1,o=void 0;try{for(a=t[Symbol.iterator]();!(r=(l=a.next()).done);r=!0)(c=l.value).userId&&n.add(c.userId)}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}if(0===n.size)return[2,{}];if(n.size>=lK)return[2,"too_many_users"];return[4,e.query({query:lY,variables:{ids:Array.from(n)}})];case 1:if(u=(s=w.sent()).data,d=s.error)throw d;f=u.currentUser?[u.currentUser].concat((0,L._)(u.usersByIds)):u.usersByIds,h={},p=!0,m=!1,v=void 0;try{for(g=f[Symbol.iterator]();!(p=(y=g.next()).done);p=!0)h[(b=y.value).id]={id:b.id,username:b.username,image:b.image}}catch(e){m=!0,v=e}finally{try{p||null==g.return||g.return()}finally{if(m)throw v}}return[2,h]}})})).apply(this,arguments)}function l0(){return(l0=(0,tP._)(function(e,t,n){var r,i,o;return(0,tL.Jh)(this,function(a){switch(a.label){case 0:var l;return[4,l$(e,n,(l=(0,tP._)(function(e){var t,n;return(0,tL.Jh)(this,function(r){return(t=e.fetchChanges,0===(n=e.version))?[2,{isDisposed:!1,result:[]}]:[2,t(1,n,"")]})}),function(e){return l.apply(this,arguments)}))];case 1:if((r=a.sent()).isDisposed)return[2,{data:null,handledError:"File deleted or removed."}];return[4,function(e,t){return lQ.apply(this,arguments)}(t,i=r.result)];case 2:if("too_many_users"===(o=a.sent()))return[2,{data:{changes:i,users:null},handledError:null}];return[2,{data:{changes:i,users:o},handledError:null}]}})})).apply(this,arguments)}(x||(x={})).TooManyUsersRequestedError="too_many_users";var l1=n(89587),l2=(0,eU.iv)({display:"grid",gridTemplateColumns:"auto 1fr",rowGap:"0.5rem",columnGap:"1rem","> dt":{display:"flex",alignItems:"center",fontWeight:"bold"}});function l4(e){var t=e.onCloseHistory,n=(0,ak.Z)().showError,r=(0,P._)((0,$.useState)(!1),2),i=r[0],o=r[1],a=(0,P._)((0,$.useState)(!1),2),l=a[0],c=a[1],s=(0,q.Z)().fs,u=(0,lI.bA)(),d=lB(),f=(0,nm.P5)({controlName:"flag-draft-buffers"}),h=(0,l1.Qk)(),p="Reset",m=!0;function v(){return(v=(0,tP._)(function(){var e,r;return(0,tL.Jh)(this,function(i){switch(i.label){case 0:if(!u||!s||l)return[2];i.label=1;case 1:var a,p;return i.trys.push([1,3,4,5]),c(!0),lG("versionRestored"),e=u.filePath,[4,(a=u.version+1,l$(s,e,(p=(0,tP._)(function(t){var n,r,i,o,l,c,u,d;return(0,tL.Jh)(this,function(p){switch(p.label){case 0:if(n=t.fetchChanges,r=t.writeChange,a>(i=t.version))throw Error("Cannot reset to a version that does not exist");if(a===i)return[2];o=null,p.label=1;case 1:return p.trys.push([1,3,,4]),[4,n(1,i,"")];case 2:if((l=p.sent()).isDisposed)throw new lz("File deleted or removed.");return o=l.result,[3,4];case 3:throw p.sent(),new lz("Something went wrong while resetting the file. It is possible that a bad connection is to blame. Please try again.");case 4:u=(c=(0,ed._)(o.slice(a,o.length).reverse()))[0],d=c.slice(1).reduce(function(e,t){return e.compose(t.invertedChanges)},u.invertedChanges);try{r(d)}catch(e){throw tO.Tb(e),new lz("Something went wrong while resetting the file. Maybe the file changed while you were restoring it? Please try again.")}if(!(!f||h))return[3,6];return[4,s.flush(new Set([e]))];case 5:p.sent(),p.label=6;case 6:return[2]}})}),function(e){return p.apply(this,arguments)})))];case 2:return i.sent(),t(),[3,5];case 3:if((r=i.sent())instanceof lz)return n(r.message),[2];return d(r,"restore"),[3,5];case 4:return o(!1),c(!1),[7];case 5:return[2]}})})).apply(this,arguments)}return u?0===u.count?(p="No history",m=!0):l||i?(p="Resetting...",m=!0):u.playing?(p="Playing...",m=!0):u.version===u.count-1?(p="Viewing latest",m=!0):(p="Reset editor to here",m=!1):(p="Loading...",m=!0),(0,N.BX)(N.HY,{children:[(0,N.tZ)(ep.zx,{text:p,disabled:m,onClick:function(){return o(!0)},colorway:"primary",iconLeft:(0,N.tZ)(lE.Z,{})}),u&&0!==u.count&&(0,N.tZ)(rX.u,{isOpen:i,onRequestClose:function(){l||o(!1)},children:(0,N.BX)(W.G,{css:j.l0.colWithGap(24),children:[(0,N.tZ)(F.h4,{variant:"headerDefault",level:2,children:"Reset file version"}),(0,N.tZ)(em.Tg,{elevated:!0,css:[j.l0.px(16),j.l0.py(12),j.l0.borderRadius(8)],children:(0,N.BX)("dl",{css:l2,children:[(0,N.tZ)("dt",{children:"File"}),(0,N.tZ)("dd",{children:u.filePath}),(0,N.tZ)("dt",{children:"Version"}),(0,N.BX)("dd",{children:[u.version+1,(0,N.BX)("span",{css:[j.l0.color.foregroundDimmest],children:[(0,N.tZ)("span",{css:j.l0.mx(8),children:"/"}),u.count]})]}),(0,N.tZ)("dt",{children:"Date"}),(0,N.tZ)("dd",{children:(0,N.tZ)(nB.EK,{date:u.changes[u.version].timestamp,dateFormat:"absolute"})}),(0,N.tZ)("dt",{children:"Author"}),(0,N.tZ)("dd",{children:(0,N.tZ)(lM,{})})]})}),(0,N.tZ)(rF.E,{icon:(0,N.tZ)(lX.Z,{}),colorway:"positive",text:"Resetting is non-destructive. The reset content will become a new version at the end of history. You can always go back to the version you just had."}),(0,N.BX)(W.G,{css:[j.l0.rowWithGap(8),j.l0.justify.end],children:[(0,N.tZ)(ep.zx,{text:"Cancel",disabled:l,onClick:function(){return o(!1)}}),(0,N.tZ)(ep.zx,{text:l?"Resetting Version...":"Reset Version",disabled:l,colorway:"primary",onClick:function(){return v.apply(this,arguments)},iconLeft:(0,N.tZ)(lE.Z,{})})]})]})})]})}var l3=n(77862),l8=(0,$.forwardRef)(function(e,t){var n=(0,lI.bA)(),r=(0,$.useRef)(null);(0,$.useImperativeHandle)(t,function(){return r.current}),n&&r.current&&(r.current.setAttribute("aria-valuemin","1"),r.current.setAttribute("aria-valuemax",String(n.count)),r.current.setAttribute("aria-valuenow",String(n.version+1)));var i=(0,$.useMemo)(function(){return(0,N.tZ)("div",{ref:r,role:"slider",tabIndex:0,css:{position:"absolute",top:"0",left:"calc((100% - 16px) * var(--scrubber-progress, 0))",width:"16px",height:"16px",backgroundColor:j.TV.accentPrimaryDefault,borderRadius:"100%",outline:"none",cursor:"pointer",transition:"left var(--scrubber-transition-time, 100ms) ease-out",willChange:"left, transition",":focus":{boxShadow:"0 0 0 1px ".concat(j.TV.foregroundDefault," inset")}}})},[]);return n&&n.count>1?i:null}),l6=(0,$.forwardRef)(function(e,t){var n=(0,lI.bA)(),r=(0,$.useMemo)(function(){return(0,N.BX)(N.HY,{children:[(0,N.tZ)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,N.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"6px",left:"0",width:"100%",height:"4px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:j.TV.backgroundHighest,borderRadius:"2px"},children:(0,N.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"0",left:"0",width:"100%",height:"4px",margin:"0",pointerEvents:"none",backgroundColor:j.TV.accentPrimaryDefault,transformOrigin:"left",transform:"scaleX(var(--scrubber-progress, 0))",transition:"transform var(--scrubber-transition-time, 100ms) ease-out",willChange:"transform, transition"}})})]})},[t]),i=(0,$.useMemo)(function(){return(0,N.tZ)("div",{ref:t,"aria-hidden":!0,css:{width:"100%",height:"16px",pointerEvents:"none"},children:(0,N.tZ)("div",{css:{position:"absolute",width:"100%",height:"4px",top:"6px",left:"0",backgroundColor:j.TV.backgroundHighest,borderRadius:"2px"}})})},[t]);return n&&n.count>1?r:i}),l5=["ArrowLeft","ArrowRight","Home","End"];function l7(){var e=(0,lI.bA)(),t=(0,lI._Z)(),n=(0,P._)((0,$.useState)(!1),2),r=n[0],i=n[1],o=(0,$.useRef)(null),a=(0,$.useRef)(null),l=(0,$.useRef)(null),c=function(e){(0,l3.A)(o,"--scrubber-transition-time",e)},s=function(e){(0,l3.A)(o,"--scrubber-progress",e.toString())};return e&&!r&&(s(e.version/(e.count-1)),e.playing?c("50ms"):c("100ms")),(0,$.useEffect)(function(){if(e&&a.current&&l.current&&!r){var n=a.current,o=l.current,u=function(r){if(0===r.button){i(!0),o.focus();var a=n.getBoundingClientRect(),l=o.getBoundingClientRect(),u=a.width,d=l.width,f=r.target===n?d/2:r.clientX-l.left,h=null,p=function(n){var r=Math.max(0,Math.min(1,(n-a.left-f)/(u-d)));r!==h&&(h=r,s(r),t({version:Math.round(r*(e.count-1)),playing:!1}))};p(r.clientX);var m=function(e){c("0ms"),p(e.clientX),e.preventDefault(),e.stopPropagation()},v=function(){window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",v),c("100ms"),i(!1)};window.addEventListener("pointermove",m),window.addEventListener("pointerup",v),window.addEventListener("pointercancel",v),r.preventDefault(),r.stopPropagation()}};return n.addEventListener("pointerdown",u),o.addEventListener("pointerdown",u),function(){n.removeEventListener("pointerdown",u),o.removeEventListener("pointerdown",u)}}},[e,t,r]),(0,$.useEffect)(function(){if(e&&l.current&&!r){var n=l.current,i=function(n){if(e&&l5.includes(n.key)){var r=n.shiftKey?10:1,i=e.version,o=e.count-1,a=null;switch(n.key){case"ArrowLeft":a=Math.max(0,i-r);break;case"ArrowRight":a=Math.min(o,i+r);break;case"Home":a=0;break;case"End":a=o}null!==a&&(t({version:a,playing:!1}),n.preventDefault(),n.stopPropagation())}};return n.addEventListener("keydown",i),function(){n.removeEventListener("keydown",i)}}},[e,t,r]),(0,$.useMemo)(function(){return(0,N.BX)(W.G,{innerRef:o,css:{position:"relative",height:"16px",width:"100%",touchAction:"none","--scrubber-progress":1,"--scrubber-transition-time":"100ms",":hover, :focus-within":{filter:"brightness(1.1)"},":hover:focus-within":{filter:"brightness(1.2)"}},children:[(0,N.tZ)(l6,{ref:a}),(0,N.tZ)(l8,{ref:l})]})},[])}var l9=n(70501);function ce(){var e=(0,lI.bA)(),t=0,n=0;return e&&0!==e.count&&(t=e.version+1,n=e.count),(0,N.BX)(W.G,{css:[j.l0.rowWithGap(4),j.l0.justify.spaceBetween],children:[(0,N.tZ)(F.xv,{css:{minWidth:"2ch",textAlign:"right"},color:e?"default":"dimmer",multiline:!1,children:t}),(0,N.tZ)(F.xv,{css:{width:"1ch",textAlign:"center"},color:"dimmer",multiline:!1,children:"/"}),(0,N.tZ)(F.xv,{css:{minWidth:"2ch",textAlign:"left"},color:"dimmer",multiline:!1,children:n})]})}var ct=n(92804),cn=n(80888);function cr(e){if(e<0)throw Error('Require at least zero ops to compute pace, got "'+e+'"');return 1/Math.log(e+2)*100}function ci(){var e,t,n,r,i=(0,lI.bA)(),o=(0,lI._Z)(),a=(null!==(t=null==i?void 0:null===(e=i.changes)||void 0===e?void 0:e.length)&&void 0!==t?t:1)-1,l=null!==(n=null==i?void 0:i.version)&&void 0!==n?n:0,c=null!==(r=null==i?void 0:i.playing)&&void 0!==r&&r,s=!i||0===i.count,u=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:cr,i=(0,P._)((0,$.useState)(!1),2),o=i[0],a=i[1],l=(0,$.useCallback)(function(){t(1)},[t]),c=(0,$.useCallback)(function(){if(e+1>n){a(!1);return}t(e+1)},[t,e,n]);return(0,$.useEffect)(function(){if(o){var e=setTimeout(function(){c()},r(n));return function(){return clearTimeout(e)}}},[o,c,r,n]),{isPlaying:o,start:function(){a(!0)},stop:function(){a(!1)},reset:l}}(l,function(e){return o({version:e})},a),d=u.isPlaying,f=u.start,h=u.stop;(0,$.useEffect)(function(){d&&!c?h():!d&&c&&f()},[c,d,f,h]);var p="Loading...";return i&&(d?p="Pause":i.version===i.count-1?p="Play file history from beginning":0===i.version?p="Play file history":i.version>0&&(p="Play file history from here")),(0,N.tZ)(M.hU,{alt:p,size:24,disabled:s,onClick:function(){l===a?o({version:0,playing:!0}):o({playing:!c})},children:d?(0,N.tZ)(ct.Z,{}):(0,N.tZ)(cn.Z,{})})}function co(){return(0,N.BX)(W.G,{css:[j.l0.rowWithGap(4),j.l0.align.center],children:[(0,N.tZ)(ci,{}),(0,N.tZ)(ca,{}),(0,N.tZ)(ce,{}),(0,N.tZ)(cl,{})]})}function ca(){var e=(0,lI.bA)(),t=(0,lI._Z)(),n=!e||0===e.version||0===e.count;return(0,N.tZ)(M.hU,{alt:"Move backwards one version",size:24,disabled:n,onClick:function(){e&&e.version>0&&t({version:e.version-1})},children:(0,N.tZ)(n9.Z,{})})}function cl(){var e=(0,lI.bA)(),t=(0,lI._Z)(),n=!e||e.version===e.count-1||0===e.count;return(0,N.tZ)(M.hU,{alt:"Move forwards one version",size:24,disabled:n,onClick:function(){e&&e.version<e.count-1&&t({version:e.version+1})},children:(0,N.tZ)(l9.Z,{})})}var cc=n(907);function cs(e){var t,n,r,i,o,a=e.filePath,l=e.onCloseHistory,c="/replEnvironmentMobile"===(0,az.useRouter)().pathname,s=c?j.l0.borderRadius(0):j.l0.borderRadius(0,0,8,8),u=(0,lI.bA)(),d=(0,lI._Z)(),f=(0,lI.Ai)(),h=lB(),p=(n=(t=(0,P._)((0,$.useState)({data:null,loading:!0,error:null,handledError:null}),2))[0],r=t[1],i=(0,q.Z)().fs,o=(0,cc.x)(),(0,$.useEffect)(function(){if(!a){r({data:null,loading:!1,error:null,handledError:null});return}r({data:null,loading:!0,error:null,handledError:null});var e=!1;return(function(e,t,n){return l0.apply(this,arguments)})(i,o,a).then(function(t){var n=t.data,i=t.handledError;if(!e){if(i){r({data:null,loading:!1,error:null,handledError:i});return}r({data:n,loading:!1,error:null,handledError:null})}}).catch(function(t){e||(t instanceof Error||(t=Error(t)),r({data:null,loading:!1,error:t,handledError:null}))}),function(){e=!0}},[a,i,o]),n),m=p.data,v=p.loading,g=p.error;return(0,$.useEffect)(function(){if(g){h(g,"history2-index",{filePath:a});return}if(m&&!v)return d({filePath:a,changes:m.changes,users:m.users}),lG("historyLoaded"),function(){f()}},[a,m,v,g,h,d,f]),(0,N.BX)(W.G,{css:[j.l0.colWithGap(8),j.l0.p(8),j.l0.zIndex(3),j.l0.overflow("hidden"),s,j.l0.backgroundColor.backgroundDefault,{borderTop:"2px solid ".concat(j.TV.backgroundHigher),boxShadow:"rgba(2, 2, 3, 0.125) 0px -16px 32px 0px"}],children:[(0,N.BX)(em.Tg,{css:[j.l0.position.relative,j.l0.colWithGap(4),j.l0.px(12),j.l0.pt(8),j.l0.pb(8),j.l0.align.center,j.l0.borderRadius(8),j.l0.overflow("hidden")],elevated:!0,children:[(0,N.tZ)(l7,{}),(0,N.BX)(W.G,{css:[j.l0.display.flex,j.l0.flex.row,j.l0.align.center,j.l0.justify.spaceBetween,j.l0.width("100%")],children:[(0,N.tZ)(co,{}),u&&u.count>0?(0,N.BX)(W.G,{css:[j.l0.rowWithGap(4),j.l0.align.center],children:[(0,N.tZ)(lO,{}),v||c?null:(0,N.tZ)(F.xv,{color:"dimmer",multiline:!1,children:"•"}),(0,N.tZ)(lM,{color:"dimmer",hideName:c,reversed:!0})]}):null]})]}),(0,N.BX)(W.G,{css:[j.l0.display.flex,j.l0.flex.row],children:[(0,N.tZ)(cu,{justify:"flex-start",children:(0,N.tZ)(lN,{})}),(0,N.BX)(cu,{justify:"flex-end",children:[(0,N.tZ)(lA,{onClose:l}),(0,N.tZ)(l4,{onCloseHistory:l})]})]})]})}function cu(e){var t=e.children,n=e.justify;return(0,N.tZ)("div",{css:{display:"flex",flexGrow:1,flexBasis:0,alignItems:"center",justifyContent:n,columnGap:j.TV.space8,minWidth:0},children:t})}var cd=n(33083),cf=n(41691),ch=n(4495),cp=n(5994),cm=(0,ch.B)();function cv(e){if(!(e instanceof e7.YW))return{compareTo:e.field(cm.state,!1),changed:!1};var t=e.state.field(cm.state,!1),n=e.startState.field(cm.state,!1)!==t;return{compareTo:t,changed:n}}function cg(e,t){e.state.field(cm.state,!1)!==t&&e.dispatch({effects:cm.effect.of(t)})}var cy=e7.QQ.define({create:function(){return null},update:function(e,t){var n=cv(t),r=n.compareTo,i=n.changed;if(!r)return null;if(!t.docChanged&&!i)return e;var o=t.state.doc.toString();return new cp.PO(o,r)}}),cb=null!==(C=globalThis.requestIdleCallback)&&void 0!==C?C:globalThis.requestAnimationFrame,cw=null!==(_=globalThis.cancelIdleCallback)&&void 0!==_?_:globalThis.cancelAnimationFrame,cZ=tn.p.line({class:"cm-diff-deleted"}),cx=function(e){"use strict";(0,lW._)(n,e);var t=(0,lV._)(n);function n(e,r){var i;return(0,lF._)(this,n),(i=t.call(this)).insertion=e,i.highlight=r,i}var r=n.prototype;return r.destroy=function(){this.pendingHighlight&&cw(this.pendingHighlight)},r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-inserted cm-line",this.updateDOM(e),e},r.eq=function(e){return!e.pendingHighlight&&this.insertion===e.insertion},r.updateDOM=function(e){var t=this;return this.pendingHighlight&&(cw(this.pendingHighlight),this.pendingHighlight=null),this.insertion.length?e.textContent=this.insertion:e.innerHTML="&nbsp;",this.highlight&&this.insertion.length&&(this.pendingHighlight=cb(function(){if(t.highlight){t.pendingHighlight=null;try{var n=t.highlight();e.innerHTML="",e.append(n)}catch(e){}}})),!0},n}(tn.l9),cC=e7.QQ.define({create:function(){return tn.p.none},update:function(e,t){var n=t.state.field(cy,!1);if(!n)return tn.p.none;var r=cv(t).changed;if(!t.docChanged&&!r)return e.map(t.changes);var i=[],o=function(e,t){i.push({from:e,to:e,value:t})},a=n.startInsertions();if(a){var l=!0,c=!1,s=void 0;try{for(var u,d=a[Symbol.iterator]();!(l=(u=d.next()).done);l=!0)!function(){var e=u.value,n=new cx(e.content,function(){return c_(t.state,e.content)});o(0,tn.p.widget({widget:n,side:-1,block:!0}))}()}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}var f=!0,h=!1,p=void 0;try{for(var m,v=n.lines()[Symbol.iterator]();!(f=(m=v.next()).done);f=!0)!function(){var e=m.value;if(e.isDeleted&&o(e.from,cZ),e.insertions){var n=!0,r=!1,i=void 0;try{for(var a,l=e.insertions[Symbol.iterator]();!(n=(a=l.next()).done);n=!0)!function(){var n=a.value,r=new cx(n.content,function(){return c_(t.state,n.content)});o(e.to,tn.p.widget({widget:r,side:1,block:!0}))}()}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}}}()}catch(e){h=!0,p=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}return tn.p.set(i,!0)},provide:function(e){return tn.tk.decorations.from(e)}});function c_(e,t){var n,r=document.createDocumentFragment(),i=null===(n=e.facet(cd.dK))||void 0===n?void 0:n.parser;if(!i){var o=document.createElement("span");return o.textContent=t,r.append(o),r}var a=i.parse(t),l=0;if((0,cf.bW)(a,{style:function(t){return(0,cd.QN)(e,t)}},function(e,n,i){if(e>l){var o=document.createElement("span");o.textContent=t.slice(l,e),r.append(o)}var a=document.createElement("span");a.className=i,a.textContent=t.slice(e,n),r.append(a),l=n}),l<t.length){var c=document.createElement("span");c.textContent=t.slice(l),r.append(c)}return r}var cS=function(e){"use strict";(0,lW._)(n,e);var t=(0,lV._)(n);function n(e){var r;return(0,lF._)(this,n),(r=t.call(this)).line=e,r}var r=n.prototype;return r.eq=function(e){return this.line===e.line},r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-gutter-element-fallback",e.innerText=this.line.toString(),e},n}(tn.SJ),ck=function(e){"use strict";(0,lW._)(n,e);var t=(0,lV._)(n);function n(e,r){var i;return(0,lF._)(this,n),(i=t.call(this)).elementClass="cm-diff-gutter-block",i.lines=e,r&&(i.preceding=r),i}var r=n.prototype;return r.eq=function(e){var t,n,r,i;if((null===(t=this.lines)||void 0===t?void 0:t.length)!==(null==e?void 0:null===(n=e.lines)||void 0===n?void 0:n.length)||(null===(r=this.preceding)||void 0===r?void 0:r.length)!==(null==e?void 0:null===(i=e.preceding)||void 0===i?void 0:i.length))return!1;if(this.preceding&&e.preceding)for(var o=0;o<this.preceding.length;o++){var a=this.preceding[o],l=e.preceding[o];if(a.height!==l.height||a.left!==l.left||a.right!==l.right)return!1}if(this.lines&&e.lines)for(var c=0;c<this.lines.length;c++){var s=this.lines[c],u=e.lines[c];if(s.height!==u.height||s.left!==u.left||s.right!==u.right)return!1}return!0},r.toDOM=function(){var e=this,t=document.createElement("div");if(this.preceding){var n=this.preceding.slice().reverse(),r=0,i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;r+=s.height;var u=this.piece(s);u.style.position="absolute",u.style.top="-".concat(r,"px"),t.prepend(u)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}var d=this.lines.map(function(t){return e.piece(t)});return t.append.apply(t,(0,L._)(d)),t},r.piece=function(e){var t=e.height,n=e.left,r=e.right,i=document.createElement("span");i.className="cm-diff-gutter-part",null!==n&&(i.innerText=n.toString());var o=document.createElement("span");o.className="cm-diff-gutter-part",null!==r&&(o.innerText=r.toString());var a=document.createElement("div");return a.className="cm-diff-gutter-element",a.style.height="".concat(t,"px"),a.append(i,o),(null===n||null===r)&&(null===r&&a.classList.add("cm-diff-gutter-deleted"),null===n&&a.classList.add("cm-diff-gutter-inserted")),a},n}(tn.SJ),cE=(0,tn.v5)({class:"cm-lineNumbers cm-diff-gutter",markers:function(e){var t=e.viewportLineBlocks,n=[],r=cv(e.state).compareTo,i=e.state.field(cy,!1),o=function(e,t){n.push({from:e,to:e,value:t})};if(!r||!i){var a=!0,l=!1,c=void 0;try{for(var s,u=t[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value,f=e.state.doc.lineAt(d.from).number;if(d.type===tn.kH.Text)o(d.from,new cS(f));else if(Array.isArray(d.type)){var h=!0,p=!1,m=void 0;try{for(var v,g=d.type[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var y=v.value;if(y.type===tn.kH.Text){o(y.from,new cS(f));break}}}catch(e){p=!0,m=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw m}}}}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}return e7.Xs.of(n,!0)}var b=!0,w=!1,Z=void 0;try{for(var x,C=t[Symbol.iterator]();!(b=(x=C.next()).done);b=!0){var _=x.value,S=[],k=e.state.doc.lineAt(_.from).number,E=i.line(k);if(E){var T=e.defaultLineHeight,R=E.offset,D=E.isDeleted,I=E.insertions,B=1===k?i.startInsertions():null,G=B?B.length:0,A=B?[]:null;if(!(Array.isArray(_.type)&&_.type.length>=G+(null!==(O=null==I?void 0:I.length)&&void 0!==O?O:0)+1)){if(B&&A){var P=!0,L=!1,N=void 0;try{for(var O,U,M=B[Symbol.iterator]();!(P=(U=M.next()).done);P=!0){var X=U.value;A.push({height:T,left:null,right:X.number})}}catch(e){L=!0,N=e}finally{try{P||null==M.return||M.return()}finally{if(L)throw N}}}if(S.push({height:_.height,left:k,right:D?null:k+R}),I){var F=!0,W=!1,H=void 0;try{for(var V,z=I[Symbol.iterator]();!(F=(V=z.next()).done);F=!0){var j=V.value;S.push({height:T,left:null,right:j.number})}}catch(e){W=!0,H=e}finally{try{F||null==z.return||z.return()}finally{if(W)throw H}}}o(_.from,new ck(S,A));continue}for(var q=0;q<_.type.length;q++){var J=_.type[q];if((null==J?void 0:J.type)===tn.kH.Text){if(B&&A)for(var Y=0;Y<B.length;Y++){var $,K=B[Y],Q=_.type[q-Y-1];A.push({height:null!==($=null==Q?void 0:Q.height)&&void 0!==$?$:T,left:null,right:K.number})}if(S.push({height:J.height,left:k,right:D?null:k+R}),I)for(var ee=0;ee<I.length;ee++){var et,en=I[ee],er=_.type[q+ee+1];S.push({height:null!==(et=null==er?void 0:er.height)&&void 0!==et?et:T,left:null,right:en.number})}break}}o(_.from,new ck(S,A))}}}catch(e){w=!0,Z=e}finally{try{b||null==C.return||C.return()}finally{if(w)throw Z}}return e7.Xs.of(n,!0)},lineMarkerChange:function(e){if(e.docChanged)return!0;var t=!0,n=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(cv(a).changed)return!0}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return!1},initialSpacer:function(e){return new cS(e.state.doc.lines)},updateSpacer:function(e,t){var n=t.state.doc.lines;return cv(t.state).compareTo?new ck([{height:0,left:n,right:n}]):new cS(n)}}),cT="#0053A644",cR="#c93c3733",cD=[tn.tk.theme({".cm-diff-inserted":{backgroundColor:cT},".cm-diff-deleted":{backgroundColor:cR},".cm-diff-gutter .cm-diff-gutter-block":{position:"relative",padding:"0"},".cm-diff-gutter-element":{display:"flex",width:"100%",alignItems:"center",columnGap:"8px",padding:"0 6px",borderLeft:"4px solid transparent"},".cm-diff-gutter-part":{display:"inline-block",height:"100%",width:"50%",textAlign:"center"},".cm-diff-gutter-inserted":{backgroundColor:cT,borderLeftColor:"#0053A6"},".cm-diff-gutter-deleted":{backgroundColor:cR,borderLeftColor:"#c93c37"},".cm-diff-gutter + .cm-foldGutter":{width:"0",transform:"translateX(-12px)",overflow:"visible"},".cm-diff-gutter .cm-diff-gutter-element":{paddingRight:"16px"},".cm-diff-gutter .cm-diff-gutter-element-fallback":{paddingRight:"12px"}}),cm.state,cy,cC,cE,(0,cd.mi)({openText:"▼",closedText:"▶︎"})],cI=n(4384),cB=function(){"use strict";function e(t){var n=this;(0,lF._)(this,e),this.view=t,this.overlay=document.createElement("div"),this.overlay.className="cm-overlay-generic",this.overlay.style.pointerEvents="none",this.overlay.style.contain="size style",this.overlay.setAttribute("aria-hidden","true"),this.view.scrollDOM.appendChild(this.overlay),this.elements=new Map,this.measureRequest={key:this,read:function(){var e=[],t=n.view.scrollDOM.getBoundingClientRect(),r=n.view.scrollDOM.scrollTop,i=n.view.scrollDOM.scrollLeft,o=!0,a=!1,l=void 0;try{for(var c,s=n.elements.values()[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value,d=u.dom,f=u.pos,h=u.offsetX,p=u.offsetY,m=n.view.coordsAtPos(f),v=n.view.lineBlockAt(f);if(!m){e.push({dom:d,x:null,y:null});continue}var g=v.top-r+t.top+n.view.documentPadding.top,y=Math.round((m.top-g)/n.view.defaultLineHeight)*n.view.defaultLineHeight+g,b=i+m.left-t.left+h,w=r+y-t.top+p;e.push({dom:d,x:b,y:w})}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return e},write:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)!function(){var e=i.value,t=e.dom,n=e.x,r=e.y;if(null===n||null===r)return t.style.visibility="hidden",t.style.transition="none";t.style.visibility="",t.style.transform="translate(".concat(n,"px, ").concat(r,"px)"),t.style.transition.startsWith("none")&&requestAnimationFrame(function(){t.style.transition=""})}()}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}}}var t=e.prototype;return t.destroy=function(){this.view.scrollDOM.removeChild(this.overlay)},t.map=function(e){if(e.geometryChanged||e.viewportChanged){if(e.docChanged){var t=Array.from(this.elements.values()),n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=e.changes.mapPos(l.pos,-1,e7.gc.TrackDel);if(!c){this.removeElement(l.dom);continue}l.pos=c}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}this.view.requestMeasure(this.measureRequest)}},t.addElement=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!this.elements.has(e)){var i={dom:e,pos:t,offsetX:n,offsetY:r};return this.elements.set(e,i),this.overlay.appendChild(e),e.style.visibility="hidden",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.willChange="transform",e.style.transition="none",this.view.requestMeasure(this.measureRequest),i}},t.removeElement=function(e){this.elements.has(e)&&(this.elements.delete(e),e.parentNode===this.overlay&&this.overlay.removeChild(e))},t.updateElement=function(e,t){var n=t.pos,r=t.offsetX,i=t.offsetY,o=this.elements.get(e);o&&(void 0!==n&&(o.pos=n),void 0!==r&&(o.offsetX=r),void 0!==i&&(o.offsetY=i),this.view.requestMeasure(this.measureRequest))},t.clear=function(){this.elements.clear(),this.overlay.innerHTML=""},e}();(u=S||(S={}))[u.Insertion=0]="Insertion",u[u.Deletion=1]="Deletion";var cG=function(){"use strict";function e(t){(0,lF._)(this,e),this.map=new Map,this.duration=t}var t=e.prototype;return t.set=function(e,t,n,r,i){var o=this.map.get(e);o||(o=new Map,this.map.set(e,o)),o.set(t,{from:e,to:t,time:n,type:r,cursor:i})},t.get=function(e,t){var n=this.map.get(e);if(n)return n.get(t)},t.update=function(t){var n=Date.now(),r=new e(this.duration),i=!0,o=!1,a=void 0;try{for(var l,c=this[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;if(!(n-s.time>this.duration)){var u=t.changes.mapPos(s.from,-1,e7.gc.TrackDel),d=t.changes.mapPos(s.to,-1,e7.gc.TrackDel);if(null!==u&&null!==d){var f=s.cursor;t.docChanged&&(f=!1),r.set(u,d,s.time,s.type,f)}}}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return t.changes.iterChangedRanges(function(e,t,i,o){r.set(i,o,n,i!==o?0:1,!0)},!0),r},t.cursors=function(){var e,t,n,r,i,o,a;return(0,tL.Jh)(this,function(l){switch(l.label){case 0:e=!0,t=!1,n=void 0,l.label=1;case 1:l.trys.push([1,6,7,8]),r=this[Symbol.iterator](),l.label=2;case 2:if(e=(i=r.next()).done)return[3,5];if(!(o=i.value).cursor)return[3,4];return[4,{type:o.type,pos:o.to}];case 3:l.sent(),l.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return a=l.sent(),t=!0,n=a,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(t)throw n}return[7];case 8:return[2]}})},t[Symbol.iterator]=function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=this.map.values()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=!0,c=!1,s=void 0;try{for(var u,d=a.values()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value;e.push(f)}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e[Symbol.iterator]()},e}(),cA="cm-flash-insertion",cP="cm-flash-deletion",cL="cm-flash-element",cN=tn.tk.theme((0,e5._)({},".".concat(cA,", .").concat(cP),{display:"inline-block"})),cO=function(e){"use strict";(0,lW._)(n,e);var t=(0,lV._)(n);function n(){return(0,lF._)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.isNested=function(){for(var e=this.parentElement;e&&!e.classList.contains("cm-line");){if(e instanceof n&&e.type===this.type)return!0;e=e.parentElement}return!1},r.stop=function(){var e,t;null===(t=this.animation)||void 0===t||null===(e=t.cancel)||void 0===e||e.call(t)},r.play=function(){var e=this.isPlaying;if(this.stop(),!this.isNested()){var t=Date.now()-parseInt(this.getAttribute("data-time")||"0",10);if(!(t>1e3)){var n=this.type===S.Insertion?"rgba(100, 255, 0, 0.3)":"rgba(255, 32, 32, 0.25)";this.animate&&(this.animation=this.animate({backgroundColor:e?[n,n,"transparent"]:["transparent",n,"transparent"],offset:[0,.05,1]},{id:"cm-flash-anim",duration:1e3,easing:"ease-in-out",delay:-t}))}}},r.connectedCallback=function(){this.play()},r.attributeChangedCallback=function(e,t,n){"data-time"===e&&n&&this.play()},(0,cI._)(n,[{key:"type",get:function(){return this.classList.contains(cA)?S.Insertion:S.Deletion}},{key:"isPlaying",get:function(){var e;return(null===(e=this.animation)||void 0===e?void 0:e.playState)==="running"}}],[{key:"observedAttributes",get:function(){return["data-time"]}}]),n}((0,lH._)(HTMLElement));customElements.get(cL)||customElements.define(cL,cO);var cU=function(){"use strict";function e(t){(0,lF._)(this,e),this.view=t,this.prevFlashes=new cG(1e3),this.decorations=tn.p.set([]),this.hasRenderedOnce=!1,this.overlay=new cB(t)}var t=e.prototype;return t.destroy=function(){this.overlay.destroy()},t.update=function(e){if(!this.hasRenderedOnce){e.docChanged&&(this.hasRenderedOnce=!0);return}var t=this.prevFlashes.update(e),n=[],r=!0,i=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;switch(c.type){case S.Insertion:n.push({from:c.from,to:c.to,value:(s=c.time,tn.p.mark({class:cA,tagName:cL,attributes:{"data-time":s.toString()}}))});break;case S.Deletion:var s,u,d=e.state.wordAt(c.from);d&&n.push({from:d.from,to:c.to,value:(u=c.time,tn.p.mark({class:cP,tagName:cL,attributes:{"data-time":u.toString()}}))})}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}this.overlay.clear();var f=this.view.defaultLineHeight.toString()+"px",h=!0,p=!1,m=void 0;try{for(var v,g=t.cursors()[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var y=v.value,b=y.type,w=y.pos,Z=function(e,t){var n=e===S.Insertion?"rgba(0, 100, 255, 1)":"rgba(255, 32, 32, 1)",r=document.createElement("div");return r.style.width="3px",r.style.height=t,r.style.borderRadius="1px",r.style.backgroundColor=n,r.animate&&r.animate({opacity:[1,0]},{duration:500,delay:400,fill:"forwards"}),r}(b,f);this.overlay.addElement(Z,w)}}catch(e){p=!0,m=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw m}}this.prevFlashes=t,this.decorations=tn.p.set(n,!0)},e}(),cM=tn.lg.fromClass(cU,{decorations:function(e){return e.decorations}}),cX=e7.Wl.lowest([cN,cM]),cF=n(87502),cW=n(60941),cH=n(33675),cV=n(44707),cz=function(){"use strict";function e(t){(0,lF._)(this,e),this.changes=[],this.forward=[],this.inverted=[],this.locations=[];var n=!0,r=!1,i=void 0;try{for(var o,a=this,l=t[Symbol.iterator]();!(n=(o=l.next()).done);n=!0)!function(){var e=o.value,t=e.changes,n=e.invertedChanges,r=null,i=!1;t.iterChangedRanges(function(e,t,n,o){i||(r||(r=o),n===o||(i=!0))}),a.forward.push(t),a.inverted.push(n),a.locations.push(r)}()}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}}var t=e.prototype;return t.slice=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;if(t>this.length||n>this.length||t<0||n<0)throw Error("Invalid version range");if(t===n){if(0===this.length)return[e7.as.empty(0),null];var r=this.forward[t].newLength;return[e7.as.empty(r),null]}var i=t<n?cj(this.forward.slice(t,n)):cj(this.inverted.slice(n,t).reverse()),o=t<n?t:n-1,a=null!==(e=this.locations[o])&&void 0!==e?e:null;return null!==a&&a>i.newLength&&(a=i.newLength),[i,a]},t.get=function(e){if(e>this.length||e<0)throw Error("Invalid version");return this.changes[e]},t.documentFor=function(e){if(e>this.length||e<0)throw Error("Invalid version");if(0===this.length)return"";var t=(0,P._)(this.slice(0,e),1)[0],n=e7.xv.of([""]);return t.apply(n).sliceString(0)},(0,cI._)(e,[{key:"length",get:function(){return this.forward.length}}]),e}();function cj(e){if(0===e.length)return e7.as.empty(0);if(1===e.length)return e[0];var t=(0,ed._)(e),n=t[0],r=t.slice(1),i=n,o=!0,a=!1,l=void 0;try{for(var c,s=r[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;i=i.compose(u)}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return i}var cq=new cW.j(function(){return(0,tn.CT)()}),cJ=[cX,cD];function cY(e){var t,n,r,i=e.filePath,o=(0,lI.bA)(),a=(0,cF.Z)(),l=a.ref,c=a.view;(0,cH.VD)(c),(0,lI._H)(c);var s=lB();t=(0,$.useMemo)(function(){return(null==o?void 0:o.changes)?new cz(o.changes):null},[null==o?void 0:o.changes]),n=(0,$.useMemo)(function(){return t?t.documentFor(t.length):null},[t]),r=(0,$.useRef)({current:-1,next:0,pending:!1}),(0,$.useEffect)(function(){if(c)return function(){r.current.pending=!1,r.current={current:-1,next:0,pending:!1}}},[c]),(0,$.useEffect)(function(){if(c&&o&&t){o.comparing?cg(c,n):cg(c,null);var e=r.current;e.next=o.version,e.pending||e.current===e.next||(e.pending=!0,requestAnimationFrame(function(){!1!==e.pending&&(e.pending=!1,c&&t&&e.current!==e.next&&(function(e,t,n,r){var i=(0,P._)(t.slice(n+1,r+1),2),o=i[0],a=i[1];if(o.length!==e.state.doc.length){var l=(0,P._)(t.slice(0,r+1),1)[0];if(l.length!==e.state.doc.length)throw Error("Unresolvable mismatch between changes and document");e.dispatch({changes:{from:0,to:e.state.doc.length}}),e.dispatch({changes:l});return}e.dispatch({changes:o,effects:a?tn.tk.scrollIntoView(a,{yMargin:10}):void 0})}(c,t,e.current,e.next),e.current=e.next))}))}},[c,o,t,n]);var u=cq.use();return(0,N.tZ)("div",{css:cV.ev,children:(0,N.tZ)("div",{css:cV.ac,children:o&&0===o.count?(0,N.tZ)(c$,{}):(0,N.tZ)("div",{css:cV.ac,children:(0,N.tZ)(ts.ZP,{ref:l,css:cV.Mp,filePath:i,extensions:[u,cJ],initializing:!o,onException:function(e){s(e,"viewer-codemirror")},readOnly:!0,noHistory:!0,hideGutter:!0})})})})}function c$(){return(0,N.tZ)("div",{css:[cV.ac,{display:"flex",alignItems:"center",justifyContent:"center"}],children:(0,N.tZ)("span",{children:"This file has no history."})})}var cK=O.Dy.Object({type:O.Dy.Literal("history"),data:O.Dy.Object({path:O.Dy.Union([O.Dy.String(),O.Dy.Null()])})}),cQ={Content:function(e){var t=e.pane,n=e.options;return(0,N.tZ)(c0,(0,eu._)((0,es._)({},t.data),{performPaneOperation:n.performPaneOperation}))},Icon:function(e){var t=e.size;return(0,N.tZ)(lE.Z,{size:t})},getTitle:function(e){return e.data.path?"History - ".concat((0,K.UO)(e.data.path)):"History - no file open"},decode:function(e){return U.B4.Decode(cK,e)}};function c0(e){var t=e.path,n=e.performPaneOperation,r=(0,P._)((0,$.useState)(function(){return(0,nb.MT)()}),1)[0],i=(0,P._)((0,$.useState)(function(){return(0,nb.MT)()}),1)[0],o=(0,J.Mp)({path:t,performPaneOperation:n});(0,Y.L5)(function(){if(o)return{commands:o}},[o]);var a=(0,ec.Z)(function(){return function(){n({operation:"replace",pane:{type:"codeEditor",data:{path:t}}})}},[t,n]);return t?(0,N.tZ)(cH.Cl.Provider,{value:r,children:(0,N.tZ)(lI.ox.Provider,{value:i,children:(0,N.BX)("div",{css:{position:"relative",display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%",width:"100%"},children:[(0,N.tZ)(J.HK,{path:t,performPaneOperation:n}),(0,N.tZ)(cY,{filePath:t}),(0,N.tZ)(cs,{filePath:t,onCloseHistory:a})]})})}):null}var c1=n(40166),c2=n(11120),c4=n(55927),c3=n(60772),c8=n(64510),c6=n(4723),c5=n(30826),c7=n.n(c5),c9=n(59775),se=n(57253),st=n(77454),sn=n(30364),sr=n(89748),si=(0,$.memo)(c8.Z),so=(0,H.X)({bodyRoot:[j.l0.flex.growAndShrink(1),j.l0.overflowY("auto")],contentRoot:[j.l0.colWithGap(8),j.l0.height("100%"),j.l0.width("100%"),j.l0.overflow("auto"),j.l0.zIndex(2),j.l0.align.center,j.l0.py(16),j.l0.px(16),j.l0.borderRadius(8),(0,e5._)({margin:"0 auto"},"@media only screen and (min-width: ".concat(c3.j.tabletMin,"px)"),j.l0.px(32))],emptyState:[j.l0.colWithGap(4),j.l0.align.center,{"& button":[{color:j.TV.foregroundDimmer}]}],header:[j.l0.rowWithGap(4),j.l0.height(30),j.l0.width("100%"),j.l0.align.center],markdownContainer:[j.l0.width("100%"),{"& .rendered-markdown":[j.l0.flex.column,j.l0.center],"& .rendered-markdown > *":[j.l0.maxWidth(840),j.l0.width("100%")],"& .rendered-markdown > table":j.l0.maxWidth("100%")}],paneRoot:[j.l0.position.relative,j.l0.display.flex,j.l0.flex.column,j.l0.overflowY("hidden"),j.l0.height("100%"),j.l0.width("100%")]});function sa(e){var t,n,r=(0,q.Z)().fs,i=(0,P._)((t=(0,$.useRef)(!1),n=(0,$.useRef)(null),[(0,c4.Z)(function(){t.current=!0,n.current&&clearTimeout(n.current),n.current=setTimeout(function(){t.current=!1},150)},{type:"throttle",wait:37.5}),t]),2),o=i[0],a=i[1],l=(0,$.useRef)(null),c=(0,c2.T)(),s=e.path,u=e.performPaneOperation,d=(0,$.useCallback)(function(){u({operation:"replace",pane:{type:"codeEditor",data:{path:s}}}),u({operation:"commit"})},[u,s]);(0,Y.L5)(function(){return{commands:[{match:sr.pl,data:{label:"Open in Editor",icon:(0,N.tZ)(al.Z,{}),type:"action",run:d}}]}},[d]);var f=e.isHidden,h=(0,st.p5)();(0,$.useEffect)(function(){if(!f){var e=c7()(function(e){(0,c9.Z)(e,{behavior:c?"auto":"smooth",scrollMode:"if-needed"})},100),t=c7()(function(t){if(s===(null==t?void 0:t.path)&&t&&!a.current){var n=l.current?function(e,t){var n=e.querySelectorAll(".rendered-markdown [data-sourcepos]");if(!(null==n?void 0:n.length))return null;var r=Array.from(n).reverse(),i=t.line,o=t.column,a=!0,l=!1,c=void 0;try{for(var s,u=r[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value,f=d.dataset.sourcepos;if(!f)throw Error("Expected data source pos on selected element");var h=(0,P._)(f.split("-"),2),p=h[0],m=h[1],v=(0,P._)(p.split(":").map(Number),2),g=v[0],y=v[1],b=(0,P._)(m.split(":").map(Number),2),w=b[0],Z=b[1];if(i>=g&&o>=y&&(i<w||i===w&&o<=Z))return d}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}}(l.current,t.position):null;n&&e(n)}},200),n=h.subscribe(t);return function(){t.cancel(),e.cancel(),n()}}},[h,f,c,s]);var p=(0,P._)((0,$.useState)(null),2),m=p[0],v=p[1];return(0,$.useEffect)(function(){return v(null),r.watchTextFile(s,{onReady:function(e){v(e.initialContent.toString())},onChange:function(e){v(e.latestContent)},onMoveOrDelete:function(e){e.eventType===se.kS.Delete&&u({operation:"replace",pane:{type:"commands",data:{autoFocus:!0}}})}})},[s,r,u,d]),(0,N.BX)(W.G,{css:so.paneRoot,children:[(0,N.tZ)(J.HK,{path:e.path,performPaneOperation:u,children:m&&m.trim().length?(0,N.tZ)(sn.u,{altText:"Open file in editor",buttonText:"Open in Editor",onClick:d,icon:(0,N.tZ)(al.Z,{})}):null}),(0,N.tZ)(W.G,{css:so.bodyRoot,children:(0,N.tZ)(sl,{ref:o,content:m,fs:r,markdownContainerRef:l,openInEditor:d,path:s})})]})}var sl=(0,$.forwardRef)(function(e,t){var n=e.content,r=e.fs,i=e.markdownContainerRef,o=e.openInEditor,a=e.path;return null===n?(0,N.tZ)(sc,{}):(0,N.tZ)(W.G,{css:so.contentRoot,innerRef:t,children:(0,N.tZ)(W.G,{innerRef:i,css:so.markdownContainer,children:n.trim().length?(0,N.tZ)(si,{path:a,source:n,fs:r,sourcePos:!0}):(0,N.tZ)("div",{className:"rendered-markdown rendered-markdown-empty",children:(0,N.BX)(W.G,{css:so.emptyState,innerRef:t,children:[(0,N.tZ)(F.xv,{color:"dimmer",children:(0,N.tZ)("i",{children:"This file is empty"})}),(0,N.tZ)(ep.zx,{text:"Open in Editor",iconLeft:(0,N.tZ)(al.Z,{}),onClick:o,variant:"nofill"})]})})})})});function sc(){var e=(0,P._)((0,$.useState)(!1),2),t=e[0],n=e[1];return(0,$.useEffect)(function(){var e=setTimeout(function(){return n(!0)},500);return function(){clearTimeout(e)}},[]),t?(0,N.tZ)(c6.Z,{}):null}var ss=O.Dy.Object({type:O.Dy.Literal("markdown"),data:O.Dy.Object({path:O.Dy.String({minLength:1})})}),su={Content:function(e){var t=e.pane,n=e.options;return(0,N.tZ)(sa,{path:t.data.path,isHidden:!!n.isHidden,performPaneOperation:n.performPaneOperation})},Icon:function(e){var t=e.size;return(0,N.tZ)(c1.Z,{fill:"currentColor",size:t})},getTitle:function(e){return e.data.path?(0,K.UO)(e.data.path):"Markdown"},decode:function(e){return U.B4.Decode(ss,e)}},sd=O.Dy.Object({type:O.Dy.Literal("media"),data:O.Dy.Object({path:O.Dy.String()})}),sf={Content:function(e){var t=e.pane,n=e.options;return(0,N.tZ)(sh,{path:t.data.path,performPaneOperation:n.performPaneOperation})},Icon:function(e){var t=e.pane,n=e.size;return(0,N.tZ)(X.Z,{path:t.data.path,size:n})},getTitle:function(e){return(0,K.UO)(e.data.path)},decode:function(e){return U.B4.Decode(sd,e)}};function sh(e){var t=e.path,n=e.performPaneOperation,r=(0,q.Z)().fs,i=(0,J.Mp)({path:t,performPaneOperation:n}),o=i?(0,L._)(i):[],a=(0,$.useCallback)(function(){n({operation:"replace",pane:{type:"codeEditor",data:{path:t}}})},[n,t]),l={match:sr.pl,data:{label:"Open in Editor",icon:(0,N.tZ)(al.Z,{}),type:"action",run:function(){a()}}};return(0,K.B4)(t)&&o.push(l),(0,Y.L5)(function(){if(i)return{commands:o}},[i]),(0,N.BX)(N.HY,{children:[(0,N.tZ)(J.HK,{path:t,performPaneOperation:n,children:(0,N.tZ)(sn.u,{altText:"Open file in editor",buttonText:"Open in Editor",onClick:a,icon:(0,N.tZ)(al.Z,{})})}),(0,N.tZ)(J.VY,{centered:!0,children:(0,N.tZ)(tx.Z,{filePath:t,fs:r})})]})}var sp=n(99742),sm=n(20795),sv=n(44049),sg=function(e){(0,lT.j)(lT.U3.DATABASE_USED,(0,es._)({type:"PostgreSQL",provider:"neon"},e))},sy="DATABASE_URL",sb="PGDATABASE",sw="PGHOST",sZ="PGPORT",sx="5432",sC="PGUSER",s_="PGPASSWORD",sS=function(e){var t=e.envVarKey,n=e.envVarValue,r=e.isSecret,i=(0,a1.U)()("db-env-var-".concat(t)),o=(0,P._)((0,$.useState)(!1),2),a=o[0],l=o[1];return(0,N.BX)(W.G,{css:[j.l0.flex.row,j.l0.flex.wrap,j.l0.align.end,j.l0.pb(8),{gap:j.TV.space8}],children:[(0,N.BX)(W.G,{css:[j.l0.colWithGap(8),{flexBasis:250},j.l0.flex.grow(0),j.l0.flex.shrink(1)],children:[(0,N.tZ)("label",{css:j.l0.color.foregroundDimmer,htmlFor:i,children:t}),(0,N.tZ)(ef.II,{id:i,type:!r||a?"text":"password",readOnly:!0,value:n})]}),(0,N.tZ)(ep.zx,{text:"Copy",iconLeft:(0,N.tZ)(sm.Z,{}),onClick:function(){(0,eh.Z)(n),sg({action:"envVarCopied",envVarKey:t,envVarType:"value"})}}),r?(0,N.tZ)(ep.zx,{text:a?"Hide":"View",iconLeft:a?(0,N.tZ)(sv.Z,{}):(0,N.tZ)(ac.Z,{}),onClick:function(){return l(function(e){return!e})}}):null]})},sk=function(e){var t,n=e.connectionString,r=e.databaseName,i=new URL(n.replace("postgres://","https://")),o=i.host,a=i.username,l=i.password;return t={},(0,e5._)(t,sy,n),(0,e5._)(t,sb,r),(0,e5._)(t,sw,o),(0,e5._)(t,sZ,sx),(0,e5._)(t,sC,a),(0,e5._)(t,s_,l),t},sE=function(){var e=(0,q.Z)().secrets;return(0,$.useCallback)(function(t){var n=sk({connectionString:t.connectionString,databaseName:t.databaseName});function r(){return(r=(0,tP._)(function(){var t,r,i,o,a,l,c,s,u,d,f;return(0,tL.Jh)(this,function(h){switch(h.label){case 0:return[4,e.readSecrets()];case 1:t=h.sent().reduce(function(e,t){return e[t.key]=t.value,e},{}),r=!1,i=(0,es._)({},t),o=!0,a=!1,l=void 0;try{for(c=Object.entries(n)[Symbol.iterator]();!(o=(s=c.next()).done);o=!0)d=(u=(0,P._)(s.value,2))[0],f=u[1],i[d]!==f&&(r=!0,i[d]=f)}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}if(!r)return[2];return[4,e.writeSecrets(i)];case 2:return h.sent(),[2]}})})).apply(this,arguments)}!function(){r.apply(this,arguments)}()},[e])},sT=function(e){var t=e.connectionString,n=e.databaseName,r=(0,ec.Z)(function(){return sk({connectionString:t,databaseName:n})},[t,n]),i=r[sw],o=r[sC],a=r[s_],l=sE();return(0,$.useEffect)(function(){l({connectionString:t,databaseName:n})},[t,n,l]),(0,N.BX)(W.G,{css:[j.l0.colWithGap(8)],children:[(0,N.tZ)(sS,{envVarKey:sy,envVarValue:t,isSecret:!0}),(0,N.tZ)(sS,{envVarKey:sb,envVarValue:n}),(0,N.tZ)(sS,{envVarKey:sw,envVarValue:i}),(0,N.tZ)(sS,{envVarKey:sZ,envVarValue:sx}),(0,N.tZ)(sS,{envVarKey:sC,envVarValue:o}),(0,N.tZ)(sS,{envVarKey:s_,envVarValue:a,isSecret:!0})]})},sR=n(77865),sD=n(55821),sI=n(75076),sB=n(25012),sG=n(68081),sA=n(12113),sP=n(18471),sL=n(43983),sN=n(42182);function sO(){var e=(0,ej._)(["\n  fragment CurrentUserUsageBasedBillingSummary on CurrentUser {\n    __typename\n    usageBasedBilling {\n      __typename\n      ... on UserUsageBasedBillingSummary {\n        capabilities {\n          canUseUsageBasedBilling\n          explanation\n          hasPaymentMethod\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n"]);return sO=function(){return e},e}function sU(){var e=(0,ej._)(["\n  query CurrentUserUsageBasedBilling {\n    currentUser {\n      id\n      username\n      ...CurrentUserUsageBasedBillingSummary\n    }\n  }\n  ","\n"]);return sU=function(){return e},e}var sM=(0,eq.Ps)(sO());function sX(){var e=(0,ej._)(["\n  query DatabaseFrozen {\n    currentUser {\n      id\n      userSubscriptionType\n      ...CurrentUserUsageBasedBillingSummary\n    }\n  }\n  ","\n"]);return sX=function(){return e},e}sU();var sF={},sW=(0,eq.Ps)(sX(),sM);function sH(){var e=(0,ej._)(["\n  mutation CreateNeonDatabase($input: CreateNeonDatabaseInput!) {\n    createNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on CreateNeonDatabaseResult {\n        databaseId\n        databaseName\n        projectId\n        connectionString\n        isFrozen\n      }\n    }\n  }\n"]);return sH=function(){return e},e}function sV(){var e=(0,ej._)(["\n  mutation DeleteNeonDatabase($input: DeleteNeonDatabaseInput!) {\n    deleteNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on DeleteNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return sV=function(){return e},e}function sz(){var e=(0,ej._)(["\n  query GetNeonDatabases($input: GetNeonDatabasesInput!) {\n    getNeonDatabases(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on GetNeonDatabasesResult {\n        databases {\n          databaseId\n          databaseName\n          projectId\n          connectionString\n          isFrozen\n        }\n      }\n    }\n  }\n"]);return sz=function(){return e},e}function sj(){var e=(0,ej._)(["\n  mutation UnfreezeNeonDatabase($input: UnfreezeNeonDatabaseInput!) {\n    unfreezeNeonDatabase(input: $input) {\n      ... on UnfreezeNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return sj=function(){return e},e}var sq={},sJ=(0,eq.Ps)(sH()),sY=(0,eq.Ps)(sV()),s$=(0,eq.Ps)(sz()),sK=(0,eq.Ps)(sj()),sQ=(0,H.X)({self:[],title:[j.l0.rowWithGap(8),j.l0.align.center,j.l0.color.foregroundDimmest],status:[j.l0.width(8),j.l0.height(8),j.l0.backgroundColor.foregroundDimmer,j.l0.borderRadius("full")],main:[j.l0.colWithGap(8),j.l0.align.center],icon:j.l0.mt(32),subTitle:j.l0.my(16),cta:[j.l0.width("100%"),j.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],ctaContainer:[j.l0.colWithGap(8),j.l0.align.center],ctaStatusBanner:[j.l0.textAlign.left],budgetContainer:[j.l0.colWithGap(8),j.l0.border(),j.l0.borderRadius(8),j.l0.p(8)]});function s0(e){var t=e.loading,n=e.ubbExplanation,r=e.hasPaymentMethod,i=e.handleOnUnpause,o=e.refetchUbbCapabilitiesQueryData,a=e.setShowPaymentMethodForm,l=e.showPaymentMethodForm,c=e.setShowSupportForm,s=(0,aH.sG)();return n===a2.Fp.NeedsSubscription||n===a2.Fp.NeedsSubscriptionOrPaymentMethod?s?(0,N.tZ)(rF.E,{text:"You need a subscription to use PostgreSQL databases. Navigate to Account > Billing to upgrade.",colorway:"warning",icon:(0,N.tZ)(rv.Z,{}),css:sQ.ctaStatusBanner}):(0,N.BX)(W.G,{css:sQ.ctaContainer,children:[(0,N.tZ)(sN.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to unpause database",css:sQ.cta,colorway:"primary",variant:"outlined",disabled:l,onPlanCheckoutComplete:o}),(0,N.tZ)(ep.zx,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:sQ.cta,disabled:l,loading:t,iconLeft:(0,N.tZ)(sL.Z,{}),onClick:function(){return a()}})]}):n===a2.Fp.NeedsSmsVerification?(0,N.tZ)(sB.Z,{context:a2.jv.Neon,onSuccess:o}):n===a2.Fp.NeedsPaymentMethod?s?(0,N.tZ)(rF.E,{text:"You have used all free usage for this month. Check your email for more information or contact support.",colorway:"warning",icon:(0,N.tZ)(rv.Z,{}),css:sQ.ctaStatusBanner}):(0,N.tZ)(ep.zx,{colorway:"primary",text:"Add a payment method",css:sQ.cta,disabled:l,loading:t,iconLeft:(0,N.tZ)(sL.Z,{}),onClick:function(){return a()}}):n===a2.Fp.NeedsUnbanning?(0,N.tZ)(sP.u,{text:"Your account currently has restrictions on use PostgreSQL databases. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",iconLeft:(0,N.tZ)(rv.Z,{}),css:sQ.ctaStatusBanner,onClick:function(){return c()}}):n===a2.Fp.InsufficientBudget?(0,N.BX)(N.HY,{children:[(0,N.tZ)(rF.E,{text:"You've reached your monthly usage budget. Increase your budget to unpause your database.",colorway:"warning",icon:(0,N.tZ)(rv.Z,{}),css:sQ.ctaStatusBanner}),(0,N.tZ)(W.G,{css:sQ.budgetContainer,children:(0,N.tZ)(sA.L,{onUpdateSuccess:o})})]}):(0,N.BX)(N.HY,{children:[(0,N.tZ)(ep.zx,{colorway:"primary",onClick:i,text:"Unpause database",loading:t,css:sQ.cta}),!1===r?(0,N.tZ)(sP.u,{text:"Add a payment method to avoid downtime",colorway:"warning",iconLeft:(0,N.tZ)(rv.Z,{}),css:sQ.ctaStatusBanner,onClick:function(){return s?null:a()}}):null]})}function s1(e){var t,n,r,i=e.replId,o=e.neonProjectId,a=e.onDatabaseUnfreezed,l=(0,P._)((0,$.useState)(!1),2),c=l[0],s=l[1],u=(0,P._)((0,$.useState)(!1),2),d=u[0],f=u[1],h=(0,ak.Z)().showError,p=(t=(0,es._)({},sF,{notifyOnNetworkStatusChange:!0,onError:function(e){h(e.message)}}),eJ.a(sW,t)),m=p.loading,v=p.data,g=p.refetch,y=(0,P._)((n=(0,es._)({},sq,{onError:function(e){h("Error when unfreezing Neon database: ".concat(e.message)),sg({action:"unfreeze",success:!1})},onCompleted:function(e){if((null==e?void 0:e.unfreezeNeonDatabase.__typename)!=="UnfreezeNeonDatabaseResult"){h("Error: Unfreezes Neon Database failed."),sg({action:"unfreeze",success:!1});return}(null==e?void 0:e.unfreezeNeonDatabase.success)?(a(),sg({action:"unfreeze",success:!0})):(h("Error: Unfreezes Neon Database failed."),sg({action:"unfreeze",success:!1}))}}),a4.D(sK,n)),2),b=y[0],w=y[1].loading,Z=(null==v?void 0:null===(r=v.currentUser)||void 0===r?void 0:r.usageBasedBilling.__typename)==="UserUsageBasedBillingSummary"?v.currentUser.usageBasedBilling.capabilities:null;return(0,N.BX)(W.G,{css:sQ.self,children:[(0,N.tZ)(rX.u,{isOpen:d,onRequestClose:function(){return f(!1)},children:(0,N.tZ)(sG.Z,{onRequestClose:function(){return f(!1)}})}),(0,N.BX)(W.G,{css:sQ.title,children:[(0,N.tZ)(W.G,{css:sQ.status}),(0,N.tZ)(F.xv,{css:[j.l0.color.foregroundDimmest],multiline:!1,children:"Database paused"})]}),(0,N.BX)(W.G,{css:sQ.main,children:[(0,N.tZ)(ns.Z,{size:32,fill:e3.TV.foregroundDimmest,css:sQ.icon}),(0,N.tZ)(F.xv,{variant:"subheadDefault",css:sQ.subTitle,multiline:!1,children:"Your Database is paused."}),(0,N.tZ)(s0,{loading:m||w,ubbExplanation:null==Z?void 0:Z.explanation,hasPaymentMethod:null==Z?void 0:Z.hasPaymentMethod,handleOnUnpause:function(){b({variables:{input:{replId:i,neonProjectId:o}}})},refetchUbbCapabilitiesQueryData:g,setShowPaymentMethodForm:function(){return s(!0)},showPaymentMethodForm:c,setShowSupportForm:function(){return f(!0)}})]})]})}var s2=function(e){var t=e.title,n=e.children,r=e.isAccordion,i=e.sectionStyles;return(0,N.tZ)(W.G,{css:[j.l0.colWithGap(8),j.l0.pt(8),{borderTopWidth:1,borderTopStyle:"solid",borderTopColor:j.TV.outlineDefault},i],children:r?(0,N.tZ)(eL.Q,{headerContent:(0,N.tZ)(W.G,{css:[j.l0.rowWithGap(8),j.l0.align.center],children:(0,N.tZ)(F.xv,{variant:"subheadDefault",multiline:!1,children:t})}),children:(0,N.tZ)(W.G,{css:[j.l0.p(12),j.l0.colWithGap(8),j.l0.height("100%")],children:n})}):(0,N.BX)(N.HY,{children:[(0,N.tZ)(F.xv,{multiline:!1,css:[j.l0.fontSize(j.TV.fontSizeSubheadDefault),j.l0.fontWeight.medium],children:t}),n]})})},s4=n(95605);function s3(e){var t=e.title,n=e.doWarnAtom,r=e.inactive,i=(0,ny.Dv)(n);return(0,N.BX)(W.G,{css:[j.l0.rowWithGap(4),j.l0.align.center],children:[(0,N.tZ)(F.xv,{variant:"small",css:j.l0.color.foregroundDimmer,multiline:!1,children:void 0!==r&&r?t+" last run":t}),i?(0,N.tZ)(rv.Z,{color:j.TV.orangeStronger}):null]})}function s8(e){var t=e.title,n=e.totalAtom,r=e.currentAtom,i=e.countAtom,o=e.measure,a=e.limitText,l=e.inactive,c=void 0!==l&&l,s=(0,ec.Z)(function(){return(0,nb.cn)(function(e){return s5(e(r),e(n))})},[r,n]),u=(0,ec.Z)(function(){return(0,nb.cn)(function(e){var t,l,c,u;return a||(t=e(s),l=e(r),c=e(n),u=i&&e(i),"empty"===t||void 0===l?void 0:"vCPU"===o?s7(100*Math.min(1,l/c))+"% of "+u+" vCPUs":s7(l).toLocaleString()+"/"+s7(c).toLocaleString()+" "+o)})},[a,s,r,n,i,o]),d=(0,ec.Z)(function(){return(0,nb.cn)(function(e){var t=e(s);return"At limit"===t||"Close to limit"===t})},[s]);return(0,N.BX)(W.G,{css:[j.l0.colWithGap(4),j.l0.flex.growAndShrink(2),{flexBasis:32}],children:[t?(0,N.tZ)(s3,{title:t,doWarnAtom:d,inactive:c}):null,(0,N.tZ)(s6,{currentAtom:r,totalAtom:n,inactive:c,limitTextAtom:u,mini:!0})]})}function s6(e){var t=e.currentAtom,n=e.totalAtom,r=e.limitTextAtom,i=e.inactive,o=e.mini,a=(0,ny.Dv)(n),l=(0,ny.Dv)(t),c=(0,ny.Dv)(r),s=function(e){switch(e){case"empty":case"fine":default:return;case"At limit":return j.TV.accentNegativeDefault;case"Close to limit":return j.TV.orangeDefault}}(s5(l,a));return(0,N.tZ)(eF.J,{css:o&&j.l0.height(8),total:a,current:l,color:s,disabled:i,tooltip:c})}function s5(e,t){if(void 0===e)return"empty";var n=e/t;return n>=1?"At limit":n>=.9?"Close to limit":"fine"}function s7(e){return Math.round((e+Number.EPSILON)*100)/100}var s9=n(47336),ue=n.n(s9),ut=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],un=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];function ur(e,t){var n,r=t||{},i=r.signed,o=r.digitsNumber,a=r.isKib,l=r.isKibNotation;if(n=void 0!==i&&i?e<0?"-":"+":"",0===e)return"".concat(n,"0B");var c=void 0===a||a?1024:1e3,s=Math.floor(Math.log(Math.abs(e))/Math.log(c));return"".concat(n).concat(parseFloat(Math.abs(e/Math.pow(c,s)).toFixed(void 0===o?2:o))).concat((void 0!==l&&l?ut:un)[s])}var ui=n(2511),uo=n(39892),ua=n(48354),ul=n(22739),uc=n(30125),us=n(93507),uu=n(35244),ud=n(20531),uf=n(2574),uh=n(27594),up=n(4059),um=n(93094),uv=n(75543),ug=n(75359),uy=n(98550),ub={"td,th":{border:"1px solid "+j.TV.outlineDefault}},uw={"td,th":{paddingLeft:8,paddingTop:8,paddingBottom:8,paddingRight:8,whiteSpace:"nowrap"},"td:first-of-type,th:first-of-type":{paddingLeft:8}},uZ={outline:"2px solid ".concat(j.TV.accentPrimaryDefault),outlineOffset:"-2px"},ux=(0,eU.iv)({":focus:focus-visible":uZ}),uC=(0,eU.iv)(uZ),u_=(0,eU.iv)([uw,ub,ux]),uS=(0,eU.iv)([j.l0.fontWeight.medium,uw,ub,ux]),uk=(0,eU.iv)({"tbody > tr:hover":{backgroundColor:j.TV.backgroundHigher,cursor:"pointer"}});function uE(e){var t=e.type,n=e.style,r=e.children,i=(0,uo.LA)().rowGroupProps;return(0,N.tZ)(t,(0,eu._)((0,es._)({},i),{style:n,children:r}))}function uT(e){var t=e.item,n=e.state,r=e.children,i=(0,$.useRef)(null),o=(0,ua.Q)({node:t},n,i).rowProps;return(0,N.tZ)("tr",(0,eu._)((0,es._)({css:uS},o),{ref:i,children:r}))}function uR(e){var t,n=e.column,r=e.state,i=(0,$.useRef)(null),o=(0,ul.W)({node:n},r,i).columnHeaderProps,a=(0,uc.F)(),l=a.isFocusVisible,c=a.focusProps;return(0,N.tZ)("th",(0,eu._)((0,es._)({},(0,us.d)(o,c)),{css:[l&&uC,ux],colSpan:n.colspan,style:{textAlign:(null!==(t=n.colspan)&&void 0!==t?t:1)>1?"center":"left"},ref:i,children:n.rendered}))}function uD(e){var t=e.item,n=e.children,r=e.state,i=(0,$.useRef)(null),o=(0,uu.U)({node:t},r,i).rowProps,a=(0,uc.F)(),l=a.isFocusVisible,c=a.focusProps;return(0,N.tZ)("tr",(0,eu._)((0,es._)({css:[l&&uC,u_]},(0,us.d)(o,c)),{ref:i,children:n}))}function uI(e){var t=e.cell,n=e.state,r=(0,$.useRef)(null),i=(0,ud.f)({node:t},n,r).gridCellProps,o=(0,uc.F)(),a=o.isFocusVisible,l=o.focusProps;return(0,N.tZ)("td",(0,eu._)((0,es._)({},(0,us.d)(i,l)),{css:[a&&uC,ux],ref:r,children:t.rendered}))}function uB(e){var t=e.selectionMode,n=e.selectionBehavior,r=(0,uh.o)((0,eu._)((0,es._)({},e),{showSelectionCheckboxes:"multiple"===t&&"replace"!==n})),i=(0,$.useRef)(null),o=r.collection,a=(0,uf.x)(e,r,i).gridProps;return(0,N.BX)("table",(0,eu._)((0,es._)({},a),{ref:i,css:[(null==e?void 0:e.onRowAction)&&uk],style:{borderCollapse:"collapse"},children:[(0,N.tZ)(uE,{type:"thead",children:o.headerRows.map(function(e){return(0,N.tZ)(uT,{item:e,state:r,children:(0,L._)(e.childNodes).map(function(e){return(0,N.tZ)(uR,{column:e,state:r},e.key)})},e.key)})}),(0,N.tZ)(uE,{type:"tbody",children:(0,L._)(o.body.childNodes).map(function(e){return(0,N.tZ)(uD,{item:e,state:r,children:(0,L._)(e.childNodes).map(function(e){return(0,N.tZ)(uI,{cell:e,state:r},e.key)})},e.key)})})]}))}var uG=function(e){var t=e.ariaTableProps,n=e.rows,r=e.columns;return(0,N.BX)(uB,(0,eu._)((0,es._)({},t),{children:[(0,N.tZ)(up.x,{columns:r,children:function(e){return(0,N.tZ)(um.s,{children:e.value})}}),(0,N.tZ)(uv.R,{items:n,children:function(e){return(0,N.tZ)(ug.X,{children:function(t){return(0,N.tZ)(uy.b,{children:e[t]})}})}})]}))};function uA(e){var t=e.headerColumns,n=e.bodyData,r=e.ariaLabel,i=e.scrollRef,o=e.onRowAction,a=t.map(function(e,t){return{key:"string"==typeof e?e:"".concat(t),value:e}}),l=n.map(function(e,n){for(var r={id:n},i=0;i<e.length;i++){var o=t[i];r["string"==typeof o?o:"".concat(i)]=e[i]}return r});return(0,N.tZ)(uG,{ariaTableProps:{selectionMode:"none","aria-label":void 0===r?"Database Table":r,onRowAction:o,scrollRef:i},columns:a,rows:l})}var uP=(0,nb.cn)(["databaseManager"]),uL=(0,nb.cn)(null,function(e,t,n){var r=e(uP);t(uP,(0,L._)(r).concat([n])),sg({action:"pageNav",databasePage:n})}),uN=(0,nb.cn)(null,function(e,t){var n=e(uP);t(uP,n.slice(0,n.length-1))}),uO=(0,nb.cn)(function(e){var t=e(uP);return t[t.length-1]}),uU=function(){return(0,ny.b9)(uL)},uM=function(){return(0,ny.b9)(uN)},uX=function(e,t){var n,r=(0,q.Z)().psql,i=(0,P._)((0,$.useState)(),2),o=i[0],a=i[1],l=(0,P._)((0,$.useState)(!1),2),c=l[0],s=l[1],u=(0,$.useCallback)((n=(0,tP._)(function(){return(0,tL.Jh)(this,function(n){switch(n.label){case 0:if(!e)return[2];n.label=1;case 1:return n.trys.push([1,,3,4]),s(!0),[4,r.run({query:e,connectionString:t})];case 2:return a(n.sent()),[3,4];case 3:return s(!1),[7];case 4:return[2]}})}),function(){return n.apply(this,arguments)}),[t,r,e]);return(0,$.useEffect)(function(){u()},[t,r,e,u]),{data:o,loading:c,refetch:u}},uF=function(e){var t=e.rows,n=e.columns;return!Array.isArray(t)||t.length<1?null:{headerColumns:null!=n?n:[],bodyData:t.map(function(e){return Object.values(e)})}},uW=function(e){return uX("SELECT n.nspname as \"Schema\",\n  c.relname as \"Name\",\n  CASE c.relkind WHEN 'r' THEN 'table' WHEN 'v' THEN 'view' WHEN 'm' THEN 'materialized view' WHEN 'i' THEN 'index' WHEN 'S' THEN 'sequence' WHEN 's' THEN 'special' WHEN 'f' THEN 'foreign table' WHEN 'p' THEN 'partitioned table' WHEN 'I' THEN 'partitioned index' END as \"Type\",\n  pg_catalog.pg_get_userbyid(c.relowner) as \"Owner\",\n  pg_catalog.pg_size_pretty(pg_catalog.pg_total_relation_size(c.oid)) as \"Size\",\n  pg_catalog.obj_description(c.oid, 'pg_class') as \"Description\"\nFROM pg_catalog.pg_class c\n     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace\nWHERE c.relkind IN ('r','p','v','m','S','f','')\n      AND n.nspname <> 'pg_catalog'\n      AND n.nspname <> 'information_schema'\n      AND n.nspname !~ '^pg_toast'\n  AND pg_catalog.pg_table_is_visible(c.oid)\nORDER BY 1,2;",e.connectionString)},uH=(0,nb.cn)(void 0),uV=(0,nb.cn)(function(e){var t=e(uH);return null==t?void 0:t.rows.reduce(function(e,t){var n=t.table_name,r=t.column_name;return e[n]||(e[n]=[]),e[n].push(r),e},{})}),uz=function(e){var t=uX("SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public';",e.connectionString).data,n=(0,ny.b9)(uH);(0,$.useEffect)(function(){n(t)},[t,n])},uj=function(e){var t=e.tableName,n=e.connectionString;return uX("SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public' AND table_name = '".concat(t.replace(/"/g,'""'),"';"),n).data},uq=function(e){var t=e.tableData,n=e.scrollRef,r=t.headerColumns,i=t.bodyData,o=uU(),a=(0,$.useCallback)(function(e){var t=parseInt(String(e),10);if(!isNaN(t)){var n=i[t][r.indexOf("Name")];o("table/".concat(n))}},[o,r,i]);return(0,N.tZ)(uA,{headerColumns:r,bodyData:i,onRowAction:a,scrollRef:n})},uJ=function(e){var t=e.psqlQueryResult,n=e.scrollRef,r=t.data;if(t.loading)return(0,N.tZ)(W.G,{css:[j.l0.flex.row,j.l0.justify.center,j.l0.p(32)],children:(0,N.tZ)(z.Z,{})});if(null==r?void 0:r.error)return(0,N.tZ)(W.G,{css:[j.l0.flex.row,j.l0.justify.center,j.l0.p(32)],children:(0,N.tZ)(F.xv,{css:[j.l0.color.accentNegativeDefault,j.l0.maxWidth("100%")],children:null==r?void 0:r.error})});var i=r?uF(r):null;return i?(0,N.tZ)(uq,{tableData:i,scrollRef:n}):(0,N.tZ)(W.G,{css:[j.l0.flex.row,j.l0.justify.center,j.l0.p(32)],children:(0,N.tZ)(F.xv,{css:[j.l0.color.accentPositiveDefault,j.l0.maxWidth("100%")],children:"No tables found"})})},uY=function(e){var t=e.connectionString,n=uM(),r=(0,$.useRef)(null),i=uW({connectionString:t}),o=i.refetch;return(0,N.BX)(W.G,{css:[j.l0.flex.column,j.l0.height("100%")],children:[(0,N.BX)(W.G,{css:[j.l0.flex.row,j.l0.py(16),j.l0.px(8),j.l0.align.center],children:[(0,N.tZ)(M.hU,{alt:"Go back",size:28,type:"button",onClick:n,children:(0,N.tZ)(ui.Z,{})}),(0,N.tZ)(W.G,{css:[j.l0.flex.growAndShrink(1)],children:(0,N.tZ)(F.xv,{css:[j.l0.fontSize(16),j.l0.ml(8)],multiline:!1,children:"All tables"})}),(0,N.tZ)(M.hU,{alt:"Refresh",size:24,type:"button",onClick:o,children:(0,N.tZ)(rn.Z,{})})]}),(0,N.tZ)(W.G,{css:[j.l0.flex.growAndShrink(1),j.l0.overflow("auto"),j.l0.px(8)],innerRef:r,children:(0,N.tZ)(uJ,{psqlQueryResult:i,scrollRef:r})})]})},u$="1px solid "+j.TV.outlineDefault,uK=(0,eU.iv)([j.l0.p(8),j.l0.backgroundColor.backgroundDefault,j.l0.align.center,j.l0.borderRadius(0),{borderLeft:u$,borderRight:u$,borderBottom:u$},{":not([disabled])":{":focus":{boxShadow:"none",outline:"2px solid ".concat(j.TV.accentPrimaryDefault),outlineOffset:"-2px"},":hover":{backgroundColor:j.TV.backgroundHigher}}}]),uQ=function(e){var t=uW({connectionString:e.connectionString}),n=t.data,r=t.loading,i=(0,P._)((0,$.useState)(!1),2),o=i[0],a=i[1],l=(0,$.useCallback)(function(){a(!0)},[]),c=n?uF(n):null,s=(0,$.useRef)(null);if(!c||r)return null;var u=c.bodyData.length,d=c.headerColumns,f=c.bodyData;return(0,N.tZ)(N.HY,{children:(0,N.BX)(W.G,{css:[j.l0.overflow("auto"),j.l0.display.grid],innerRef:s,children:[(0,N.tZ)(uq,{tableData:{headerColumns:d,bodyData:o?f:f.slice(0,5)},scrollRef:s}),u-5>0&&!o?(0,N.tZ)(ep.zx,{text:"".concat(u-5," more"),css:uK,onClick:l}):null]})})},u0="https://docs.replit.com/cloud-services/storage-and-databases/postgresql-on-replit",u1="https://docs.replit.com/replit-core/about-usage-based-billing#1-postgresql-usage-metrics",u2=n(15457),u4=n(94774),u3=function(e){var t=e.dbSize,n=e.totalSize,r=ur(t),i=ur(n),o=(0,ec.Z)(function(){return(0,nb.cn)(t)},[t]),a=(0,ec.Z)(function(){return(0,nb.cn)(n)},[n]);return(0,N.BX)(N.HY,{children:[(0,N.BX)(F.xv,{css:j.l0.color.foregroundDimmer,multiline:!1,children:[r,"/",i]}),(0,N.tZ)(s8,{totalAtom:a,currentAtom:o,limitText:"".concat(r," / ").concat(i),inactive:!1,measure:"MB"})]})},u8=function(e){var t,n,r=e.connectionString,i=uX("SELECT sum(pg_database_size(datname)) FROM pg_database;",r),o=i.data,a=i.loading,l=uX("SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' ORDER BY table_name;",r),c=l.data,s=l.loading,u=parseInt(null!==(n=null==o?void 0:null===(t=o.rows[0])||void 0===t?void 0:t.sum)&&void 0!==n?n:"0",10),d=null==c?void 0:c.rows.length;return(0,N.BX)(W.G,{css:j.l0.rowWithGap(8),children:[s?null:(0,N.BX)(F.xv,{multiline:!1,children:[d," ",1===d?"table":"tables"]}),a?null:(0,N.tZ)(u3,{dbSize:u,totalSize:10737418240})]})},u6=function(e){var t=e.connectionString,n=e.onOpenDatabaseViewerClick,r=e.showUsageLink,i=(0,u4.$y)(window.location.pathname),o=i.id,a=i.slug,l=(0,u2._Q)({id:o,slug:a}),c=o===el.x0?"/usage#postgres-storage":"".concat(l.usage.href,"#postgres-storage");return(0,N.BX)(W.G,{css:[j.l0.colWithGap(8)],children:[(0,N.BX)(W.G,{children:[(0,N.tZ)(u8,{connectionString:t}),r?(0,N.tZ)(ue(),{legacyBehavior:!0,href:c,passHref:!0,children:(0,N.tZ)("a",{css:j.l0.hover(j.l0.color.accentPrimaryStrongest),children:(0,N.tZ)(F.xv,{children:"See all usage"})})}):null]}),(0,N.tZ)(uQ,{connectionString:t}),(0,N.tZ)(ep.zx,{text:"See Database Contents",iconLeft:(0,N.tZ)(s4.Z,{}),onClick:n})]})},u5=function(e){var t=e.psqlQueryResult,n=e.tableName,r=e.connectionString,i=e.scrollRef,o=t.data,a=t.loading,l=uj({tableName:n,connectionString:r});if(a)return(0,N.tZ)(W.G,{css:[j.l0.flex.row,j.l0.justify.center,j.l0.p(32)],children:(0,N.tZ)(z.Z,{})});if(null==o?void 0:o.error)return(0,N.tZ)(W.G,{css:[j.l0.flex.row,j.l0.justify.center,j.l0.p(32)],children:(0,N.tZ)(F.xv,{css:[j.l0.color.accentNegativeDefault,j.l0.maxWidth("100%")],children:null==o?void 0:o.error})});var c=o?uF(o):null;if(!c)return(0,N.tZ)(W.G,{css:[j.l0.flex.row,j.l0.justify.center,j.l0.p(32)],children:(0,N.tZ)(F.xv,{css:[j.l0.color.accentPositiveDefault,j.l0.maxWidth("100%")],children:"No rows"})});var s=c.headerColumns,u=c.bodyData;return(0,N.tZ)(uA,{headerColumns:s.map(function(e,t){var n,r=null==l?void 0:null===(n=l.rows)||void 0===n?void 0:n.find(function(t){return t.column_name===e}),i=null==r?void 0:r.data_type,o=i?(0,N.tZ)(rV.D,{text:i}):null;return(0,N.BX)(W.G,{css:[j.l0.rowWithGap(8),j.l0.align.center],children:[(0,N.tZ)(F.xv,{multiline:!1,children:e}),o]},t)}),bodyData:u,scrollRef:i})},u7=function(e){var t=e.tableName,n=e.connectionString,r=uM(),i=(0,$.useRef)(null),o=uX('SELECT * FROM "'.concat(t.replace(/"/g,'""'),'" LIMIT ').concat(500),n),a=o.refetch;return(0,N.BX)(W.G,{css:[j.l0.flex.column,j.l0.height("100%")],children:[(0,N.BX)(W.G,{css:[j.l0.flex.row,j.l0.py(16),j.l0.px(8),j.l0.align.center],children:[(0,N.tZ)(M.hU,{alt:"Go back",size:28,type:"button",onClick:r,children:(0,N.tZ)(ui.Z,{})}),(0,N.tZ)(W.G,{css:[j.l0.flex.growAndShrink(1)],children:(0,N.tZ)(F.xv,{css:[j.l0.fontSize(16),j.l0.ml(8)],multiline:!1,children:t})}),(0,N.tZ)(M.hU,{alt:"Refresh",size:24,type:"button",onClick:a,children:(0,N.tZ)(rn.Z,{})})]}),(0,N.tZ)(W.G,{css:[j.l0.flex.growAndShrink(1),j.l0.overflow("auto"),j.l0.px(8)],innerRef:i,children:(0,N.tZ)(u5,{psqlQueryResult:o,tableName:t,connectionString:n,scrollRef:i})})]})},u9=function(e){var t=e.size;return(0,N.BX)("svg",{viewBox:"0 0 128 36",preserveAspectRatio:"xMidYMin",height:void 0===t?16:t,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,N.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"#12FFF7"}),(0,N.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#a)"}),(0,N.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#b)"}),(0,N.tZ)("path",{d:"M29.793 0A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36a.62.62 0 0 0 .62-.62v-19.2c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V1.241C31.035.556 30.479 0 29.793 0Z",fill:"#B9FFB3"}),(0,N.tZ)("path",{d:"M60.686 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L61.082 26h3.938V10.6h-4.334ZM73.054 22.568V19.84h9.702v-3.278h-9.702v-2.53h11.77V10.6H68.632V26h16.434v-3.432H73.054ZM96.583 26.506c6.094 0 10.054-2.992 10.054-8.206 0-5.214-3.96-8.206-10.054-8.206S86.551 13.086 86.551 18.3c0 5.214 3.938 8.206 10.032 8.206Zm0-3.652c-3.388 0-5.478-1.65-5.478-4.554 0-2.904 2.112-4.554 5.478-4.554 3.388 0 5.478 1.65 5.478 4.554 0 2.904-2.09 4.554-5.478 4.554ZM123.249 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L123.645 26h3.938V10.6h-4.334Z",fill:"currentColor"}),(0,N.BX)("defs",{children:[(0,N.BX)("linearGradient",{id:"a",x1:"36",y1:"36",x2:"4.345",y2:"0",gradientUnits:"userSpaceOnUse",children:[(0,N.tZ)("stop",{stopColor:"#B9FFB3"}),(0,N.tZ)("stop",{offset:"1",stopColor:"#B9FFB3",stopOpacity:"0"})]}),(0,N.BX)("linearGradient",{id:"b",x1:"36",y1:"36",x2:"14.617",y2:"27.683",gradientUnits:"userSpaceOnUse",children:[(0,N.tZ)("stop",{stopColor:"#1A1A1A",stopOpacity:".9"}),(0,N.tZ)("stop",{offset:"1",stopColor:"#1A1A1A",stopOpacity:"0"})]})]})]})},de=(0,eU.iv)([j.l0.color.foregroundDimmest,{textDecoration:"underline"}]),dt=function(){return(0,N.tZ)(W.G,{css:[j.l0.colWithGap(8),j.l0.py(8),j.l0.width("100%")],children:(0,N.BX)(W.G,{css:[j.l0.rowWithGap(8),j.l0.align.center,j.l0.justify.spaceBetween],children:[(0,N.tZ)("a",{target:"_blank",href:u0,css:de,children:"Docs"}),(0,N.BX)(W.G,{css:[j.l0.rowWithGap(8),j.l0.align.center],children:[(0,N.tZ)(F.xv,{css:[j.l0.fontSize(14)],multiline:!1,children:"Powered by"}),(0,N.tZ)(u9,{})]})]})})},dn=n(67546),dr=n(73393),di=n(32754),da=n(44322),dl=n(12674),dc=n(76900),ds=n(50585),du=n(40042),dd=n(32774),df=n(73590),dh=n(38938),dp=function(e){var t=e.headerTitle,n=e.onGoBack,r=e.children;return(0,N.BX)(W.G,{css:[j.l0.flex.column,j.l0.height("100%")],children:[(0,N.BX)(W.G,{css:[j.l0.flex.row,j.l0.py(16),j.l0.px(8),j.l0.align.center],children:[(0,N.tZ)(M.hU,{alt:"Go back",size:28,type:"button",onClick:n,children:(0,N.tZ)(ui.Z,{})}),(0,N.tZ)(F.xv,{css:[j.l0.fontSize(16),j.l0.ml(8)],multiline:!1,children:t})]}),(0,N.tZ)(W.G,{css:[j.l0.overflow("auto"),j.l0.height("calc(100% - 60px)")],children:r})]})},dm=(0,nb.cn)(""),dv=(0,nb.cn)(null),dg=(0,nb.cn)(null,function(e,t,n){var r=n.query;r&&t(dm,r);var i=e(dv);i&&i.dispatch({changes:{from:0,to:i.state.doc.length,insert:r}})}),dy=n(85234),db=n.n(dy),dw=n(41974),dZ=n(29547),dx=n(79122),dC=(0,dZ.O4)("replDatabasesQueryHistory",[]),d_=function(e,t){return!e.isPinned&&t.isPinned?1:e.isPinned&&!t.isPinned?-1:"number"==typeof e.pinnedTimestamp&&"number"==typeof t.pinnedTimestamp?e.pinnedTimestamp-t.pinnedTimestamp:t.timestamp-e.timestamp},dS=function(e,t){var n=e.findIndex(function(e){return!e.isPinned&&e.data===t.data});-1!==n?e.splice(n,1,t):e.push(t),e.sort(d_);var r=e.filter(function(e){return!e.isPinned}).length;if(r>=5){var i=r-5;e.splice(e.length-i,i)}},dk=function(e){var t=e.id,n=e.data,r=e.isPinned,i=(0,dx.lV)((0,$.useCallback)(function(e,n){var r=e(dC).find(function(e){return e.id===t}),i=(null==r?void 0:r.data)||"";i&&(n(dg,{query:i}),sg({action:"queryHistoryItemSelected"}))},[t])),o=(0,dx.lV)((0,$.useCallback)(function(e,n){var r=e(dC);n(dC,(0,dw.Uy)(r,function(e){var n=e.find(function(e){return e.id===t});n&&(n.isPinned=!n.isPinned,n.isPinned?n.pinnedTimestamp=Date.now():n.pinnedTimestamp=void 0),e.sort(d_)})),sg({action:"queryHistoryItemPinned"})},[t]));return(0,N.BX)(W.G,{css:[{borderTop:"1px solid ".concat(j.TV.outlineDefault),":hover":{background:j.TV.backgroundHigher}},j.l0.flex.row,j.l0.p(8),j.l0.color.foregroundDimmer,j.l0.align.center,j.l0.cursor.pointer],onClick:i,children:[(0,N.tZ)(F.xv,{css:[j.l0.flex.growAndShrink(1)],multiline:!1,children:n}),(0,N.tZ)(M.hU,{alt:"Pin query",onClick:o,children:r?(0,N.tZ)(ds.Z,{fill:j.TV.accentPrimaryDefault}):(0,N.tZ)(dc.Z,{})})]})},dE=function(e){var t=e.onExpand,n=(0,ny.Dv)(dC);return(0,N.tZ)(eL.Q,{onClick:t,headerContent:(0,N.BX)(W.G,{css:[j.l0.rowWithGap(8),j.l0.align.center,j.l0.p(2)],children:[(0,N.tZ)(lE.Z,{}),(0,N.tZ)(F.xv,{css:[j.l0.color.foregroundDimmest],multiline:!1,children:"Query History"})]}),children:(0,N.tZ)(W.G,{css:[j.l0.colWithGap(8),j.l0.height("100%")],children:0===n.length?(0,N.tZ)(W.G,{css:[j.l0.p(8)],children:(0,N.tZ)(F.xv,{css:[j.l0.color.foregroundDimmer],multiline:!1,children:"No query history"})}):(0,N.tZ)(W.G,{children:n.map(function(e){return(0,N.tZ)(dk,(0,es._)({},e),e.id)})})})})},dT=new dr.Rh(function(){return(0,tn.W$)((0,dl.V)((0,N.tZ)("div",{css:[{fontFamily:j.TV.fontFamilyCode},j.l0.color.foregroundDimmest],children:"Type PostgreSQL queries here to use the database."})))}),dR=new cW.j(function(e){return e7.Wl.high((0,dn.sql)((0,es._)({dialect:dn.PostgreSQL},e)))}),dD=function(e){var t=e.queryResult,n=e.scrollRef;if(null==t?void 0:t.error)return(0,N.tZ)(W.G,{css:j.l0.px(8),children:(0,N.tZ)(F.xv,{css:[j.l0.color.accentNegativeDefault],children:null==t?void 0:t.error})});if(!(null==t?void 0:t.rows))return null;var r=uF(t);if(!r)return(0,N.tZ)(W.G,{css:j.l0.px(8),children:(0,N.tZ)(F.xv,{css:[j.l0.color.accentPositiveDefault],children:"Query successful, no rows returned"})});var i=r.headerColumns,o=r.bodyData;return(0,N.tZ)(W.G,{css:j.l0.px(8),children:(0,N.tZ)(uA,{headerColumns:i,bodyData:o,scrollRef:n})})},dI=(0,eU.iv)([j.l0.height("100%"),j.l0.position.relative,j.l0.overflow("auto")]),dB=(0,eU.iv)([j.l0.position.sticky,j.l0.top(0),j.l0.left(0),j.l0.zIndex(1),j.l0.backgroundColor.backgroundDefault]),dG=function(e){var t=e.connectionString,n=e.performPaneOperation,r=(0,P._)((0,ny.KO)(dm),2),i=r[0],o=r[1],a=(0,cF.Z)(),l=a.ref,c=a.view,s=(0,P._)((0,$.useState)(!1),2),u=s[0],d=s[1];(0,$.useEffect)(function(){return function(){var e;o(null!==(e=null==c?void 0:c.state.doc.toString())&&void 0!==e?e:"")}},[o,null==c?void 0:c.state.doc]);var f=(0,ny.b9)(dv);(0,$.useEffect)(function(){f(c)},[f,c]),uz({connectionString:t});var h=(0,ny.Dv)(uV),p=dh.q,m=(0,di.Z)({filePath:p}),v=(0,q.Z)().psql,g=(0,P._)((0,$.useState)(),2),y=g[0],b=g[1],w=(0,P._)((0,$.useState)(!1),2),Z=w[0],x=w[1],C=(0,dx.lV)((0,$.useCallback)(function(e,t,n){if(n){var r={id:db()(),data:n,timestamp:Date.now()},i=e(dC);t(dC,(0,dw.Uy)(i,function(e){dS(e,r)}))}},[])),_=(0,$.useCallback)(function(){function e(){return(e=(0,tP._)(function(){var e;return(0,tL.Jh)(this,function(n){switch(n.label){case 0:if(!c)return[2];n.label=1;case 1:return n.trys.push([1,,3,4]),x(!0),C(e=null==c?void 0:c.state.doc.toString()),[4,v.run({query:e,connectionString:t})];case 2:return b(n.sent()),sg({action:"queryRan"}),[3,4];case 3:return x(!1),[7];case 4:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[t,v,C,c]),S=uU(),k=(0,$.useCallback)(function(){S("databaseManager")},[S]),E=(0,$.useCallback)(function(){S("tableSchemas")},[S]),T=(0,$.useRef)(null),R=dR.use({schema:h}),D=(0,nm.P5)({controlName:"flag-postgresql-pane-inline-ai"}),I=(0,aH.T3)(),B=(0,du.Ls)({path:p}),G=(0,du.jg)({path:p}),A=(0,du.fD)({path:p}),L=(0,df.W)({generateCode:B,editCode:G,explainCode:A,onMoreClick:void 0}),O=(0,$.useCallback)(function(){c&&B(c,"unknown")},[c,B]),U=(0,$.useCallback)(function(e){return n({operation:"open",pane:e,secondary:!0})},[n]),M=(0,$.useCallback)(function(){U({type:"ghostwriterChat"})},[U]),X=(0,da.W)({onGenerateCode:O,onReplyInChat:M}),F=(0,dd.u)({isMobile:I,generateCode:B,filePath:p});return(0,N.tZ)(dp,{headerTitle:"Database Contents",onGoBack:k,children:(0,N.BX)(W.G,{css:[j.l0.colWithGap(8),dI],innerRef:T,children:[(0,N.BX)(W.G,{css:[j.l0.colWithGap(8),j.l0.px(8),j.l0.pb(8),u?null:dB],children:[(0,N.BX)(W.G,{css:[{border:"1px solid ".concat(j.TV.outlineDefault)},j.l0.borderRadius(2)],children:[(0,N.tZ)(ts.ZP,{ref:l,filePath:p,css:[cV.Mp,j.l0.backgroundColor.backgroundDefault,j.l0.borderRadius(8),j.l0.overflow("auto"),j.l0.minHeight(100),j.l0.maxHeight(500),{".cm-panel":{zIndex:1}}],initialDoc:i,extensions:[D?[]:dT,R,m,D&&!I?L:[],D?X:[],D?F:[]]}),(0,N.tZ)(dE,{expanded:u,onExpand:function(){d(function(e){return!e})}})]}),(0,N.tZ)(ep.zx,{text:"Run Query",iconLeft:Z?(0,N.tZ)(z.Z,{}):(0,N.tZ)(rZ.Z,{}),onClick:_,disabled:Z})]}),(0,N.tZ)(dD,{queryResult:y,scrollRef:T}),(0,N.tZ)(W.G,{css:[j.l0.colWithGap(8),j.l0.px(8),j.l0.py(8)],children:(0,N.tZ)(ep.zx,{css:j.l0.backgroundColor.backgroundDefault,text:"Show All Contents",iconLeft:(0,N.tZ)(s4.Z,{}),onClick:E})})]})})},dA=(0,nb.cn)(null),dP=(0,nb.cn)(null),dL=function(){var e=(0,ny.b9)(dA),t=(0,ny.b9)(dP);return(0,$.useCallback)(function(n){if(!n){e(null),t(null);return}e({connectionString:n,databaseId:-1,databaseName:"Admin Override",isFrozen:!1,projectId:"mock-project-id-does-not-exist",__typename:"NeonDatabase"}),t(n)},[t,e])},dN=(0,H.X)({self:[j.l0.colWithGap(0),j.l0.height("100%"),j.l0.p(8)],main:[j.l0.colWithGap(16),j.l0.flex.grow(1),j.l0.flex.shrink(0)],header:[j.l0.rowWithGap(8),j.l0.align.center],status:[j.l0.width(8),j.l0.height(8),j.l0.backgroundColor.accentPositiveStronger,j.l0.borderRadius("full"),{filter:"drop-shadow(0 0 6px ".concat(j.TV.accentPositiveStronger,")")}],title:[j.l0.color.accentPositiveStronger],docs:[sI.Z,j.l0.maxWidth("100%")],footer:[j.l0.pt(16)],remove:[j.l0.py(8)],removeConfirm:[j.l0.p(8),j.l0.colWithGap(8)]}),dO=function(e){var t,n=e.neonDatabases,r=e.onDatabaseDeleted,i=e.onDatabaseUnfreezed,o=e.performPaneOperation,a=n[0],l=(0,ak.Z)().showError,c=(0,ez.Z)(),s=(0,ny.Dv)(uO),u=uU(),d=(0,$.useCallback)(function(){u("queryEditor")},[u]),f=(0,P._)((t=(0,es._)({},sq,void 0),a4.D(sY,t)),2),h=f[0],p=f[1].loading,m=(0,$.useCallback)(function(){b(!0)},[]),v=(0,$.useCallback)((0,tP._)(function(){var e,t,n;return(0,tL.Jh)(this,function(i){switch(i.label){case 0:return[4,h({variables:{input:{replId:c,databaseId:a.databaseId}}})];case 1:if(t=(e=i.sent()).data,n=e.errors,b(!1),n&&n.length>0)return l("Error when deleting Neon database: ".concat(null==n?void 0:n.join())),sg({action:"removed",success:!1}),[2];if((null==t?void 0:t.deleteNeonDatabase.__typename)!=="DeleteNeonDatabaseResult")return l("Error: ".concat(null==t?void 0:t.deleteNeonDatabase.message)),sg({action:"removed",success:!1}),[2];return(null==t?void 0:t.deleteNeonDatabase.success)?(r(),sg({action:"removed",success:!0})):(l("Error: Delete Neon Database failed."),sg({action:"removed",success:!1})),[2]}})}),[h,a.databaseId,r,c,l]),g=(0,P._)((0,$.useState)(!1),2),y=g[0],b=g[1],w=(0,$.useCallback)(function(){b(!1)},[]),Z=(0,ny.Dv)(dP),x=sk({connectionString:a.connectionString,databaseName:a.databaseName})[sw].split(".")[0],C=Z||"".concat(a.connectionString,"/").concat(a.databaseName,"?sslmode=require&options=project%3D").concat(x);if("queryEditor"===s)return(0,N.tZ)(dG,{connectionString:C,performPaneOperation:o});if("tableSchemas"===s)return(0,N.tZ)(uY,{connectionString:C});if(s.startsWith("table/")){var _=s.slice(s.indexOf("/")+1);return(0,N.tZ)(u7,{tableName:_,connectionString:C})}return(0,N.BX)(W.G,{css:dN.self,children:[(0,N.tZ)(W.G,{css:dN.main,children:a.isFrozen?(0,N.tZ)(s1,{replId:c,neonProjectId:a.projectId,onDatabaseUnfreezed:i}):(0,N.BX)(N.HY,{children:[(0,N.BX)(W.G,{css:dN.header,children:[(0,N.tZ)(W.G,{css:dN.status}),(0,N.tZ)(F.xv,{css:dN.title,multiline:!1,children:"Database connected"})]}),(0,N.tZ)(s2,{title:"Database Info",children:(0,N.tZ)(u6,{connectionString:C,onOpenDatabaseViewerClick:d,showUsageLink:!0})}),(0,N.tZ)(s2,{title:"Using the database",isAccordion:!0,children:(0,N.tZ)(sR.ZP,{css:dN.docs,children:"\nPostgreSQL is a powerful open source relational database system that is widely used in web applications and other software development projects. You can easily create a production-ready PostgreSQL database directly within Replit. For more information on PostgreSQL, visit the [official documentation](https://www.postgresql.org/docs/). Repls use PostgreSQL version 15.\n\nHere is some information to help you get started:\n\n1. Replit databases are backed by [Neon](https://neon.tech/). The [Neon documentation](https://neon.tech/docs/connect/connect-from-any-app#connection-examples) provides guides on how to connect various frameworks, such as Django, to your PostgreSQL database.\n\n1. Environment Variables: We provided environment variables `DATABASE_URL`, `PGDATABASE`, `PGHOST`, `PGHOST`, `PGPORT`, `PGUSER`, `PGPASSWORD`. Provide these values to your framework of choice to connect to your database.\n\n1. Connection pooling: If you need to enable connection pooling for any reason, contact us at support@repl.it.\n\n1. Compute lifecycle: Neon databases go to sleep after 5 minutes of inactivity. You may experience disconnects or reconnects depending on your client.\n"})}),(0,N.tZ)(s2,{title:"Environment variables",isAccordion:!0,children:(0,N.tZ)(sT,{connectionString:C,databaseName:a.databaseName})})]})}),(0,N.tZ)(W.G,{css:dN.footer,children:y||p?(0,N.BX)(em.Tg,{css:dN.removeConfirm,elevated:!0,children:[(0,N.tZ)(F.xv,{children:"Removing this database will remove access to the data for this Repl."}),(0,N.tZ)(rF.E,{icon:(0,N.tZ)(rv.Z,{}),colorway:"warning",text:"This action cannot be undone."}),(0,N.tZ)(ep.zx,{text:"Yes, Remove Database",colorway:"negative",disabled:p,iconLeft:(0,N.tZ)(sD.Z,{}),onClick:v}),(0,N.tZ)(ep.zx,{text:"Cancel",disabled:p,onClick:w})]}):(0,N.tZ)(ep.zx,{css:dN.remove,text:"Remove Database",disabled:p,iconLeft:(0,N.tZ)(sD.Z,{}),onClick:m})}),(0,N.tZ)(dt,{})]})},dU=n(28508),dM=n(24336),dX=n(41365),dF=n(28341);function dW(){var e=(0,ej._)(["\n  query NeonStartPage($replId: String!) {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          resources {\n            neonComputeTime {\n              allotment\n              usage\n            }\n            neonDataStorage {\n              allotment\n              usage\n            }\n          }\n        }\n      }\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          createDatabase {\n            isAuthorized\n            code\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return dW=function(){return e},e}var dH={},dV=(0,eq.Ps)(dW()),dz=n(14375),dj=n(4762),dq=(0,H.X)({self:[j.l0.px(8),j.l0.pt(16)],container:[j.l0.colWithGap(32),j.l0.py(32),j.l0.textAlign.center,dX.Qw.maxWidth],title:[j.l0.colWithGap(4),j.l0.width("100%"),j.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],usage:[j.l0.colWithGap(4),j.l0.width("100%"),j.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],cta:[j.l0.width("100%"),j.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],ctaContainer:[j.l0.colWithGap(8),j.l0.align.center],ctaStatusBanner:[j.l0.textAlign.left],payment:[j.l0.p(16),j.l0.borderRadius(12),j.l0.textAlign.left,j.l0.shadow(2)],budgetContainer:[j.l0.colWithGap(8),j.l0.border(),j.l0.borderRadius(8),j.l0.p(8)],disabledBanner:[j.l0.py(6),{alignSelf:"center"}],details:[j.l0.colWithGap(12),j.l0.maxWidth(400),{marginLeft:"auto",marginRight:"auto"}],detailsItem:{display:"grid",gridTemplateColumns:"56px auto",gap:20},detailsText:[j.l0.flex.growAndShrink(1),j.l0.textAlign.left]});function dJ(e){var t=e.loading,n=e.createDatabaseAuthz,r=e.handleOnCreate,i=e.refetchUbbCapabilitiesQueryData,o=e.setShowPaymentMethodForm,a=e.showPaymentMethodForm,l=e.setShowSupportForm,c=(0,aH.sG)();if(!n)return(0,N.tZ)(W.G,{css:dq.ctaContainer,children:(0,N.tZ)(z.Z,{})});if(!n.isAuthorized&&c)return(0,N.tZ)(rF.E,{text:n.message,colorway:"warning",icon:(0,N.tZ)(rv.Z,{}),css:dq.ctaStatusBanner});switch(n.code){case a2.RO.RequiresPaymentMethodOrSubscription:case a2.RO.RequiresActiveSubscription:return(0,N.BX)(W.G,{css:dq.ctaContainer,children:[(0,N.tZ)(sN.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to create a database",css:dq.cta,colorway:"primary",variant:"outlined",disabled:a,onPlanCheckoutComplete:i}),(0,N.tZ)(ep.zx,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:dq.cta,disabled:a,loading:t,iconLeft:(0,N.tZ)(sL.Z,{}),onClick:function(){return o()}})]});case a2.RO.RequiresSmsVerification:return(0,N.tZ)(sB.Z,{context:a2.jv.Neon,onSuccess:i});case a2.RO.RequiresPaymentMethod:return(0,N.tZ)(ep.zx,{colorway:"primary",text:"Add a payment method",css:dq.cta,disabled:a,loading:t,iconLeft:(0,N.tZ)(sL.Z,{}),onClick:function(){return o()}});case a2.RO.RequiresUnbanning:return(0,N.tZ)(sP.u,{text:"Your account currently has restrictions on creating a database. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",iconLeft:(0,N.tZ)(rv.Z,{}),css:dq.ctaStatusBanner,onClick:function(){return l()}});case a2.RO.InsufficientBudget:return(0,N.BX)(N.HY,{children:[(0,N.tZ)(rF.E,{text:"You've reached your monthly usage budget. Increase your budget to create a database.",colorway:"warning",icon:(0,N.tZ)(rv.Z,{}),css:dq.ctaStatusBanner}),(0,N.tZ)(W.G,{css:dq.budgetContainer,children:(0,N.tZ)(sA.L,{onUpdateSuccess:i})})]});case a2.RO.FeatureUnsupportedForReplitTeams:case a2.RO.FeatureUnsupportedForTeamsEdu:case a2.RO.FeatureUnsupportedForTeamsFree:case a2.RO.FeatureUnsupportedForTeamsPro:case a2.RO.InsufficientPermissions:case a2.RO.InsufficientQuota:case a2.RO.RequiresEmailVerification:return(0,N.tZ)(rF.E,{text:n.message,colorway:"warning",icon:(0,N.tZ)(rv.Z,{}),css:dq.ctaStatusBanner});case a2.RO.Authorized:case a2.RO.AuthorizedQuota:return(0,N.tZ)(ep.zx,{colorway:"primary",onClick:r,css:dq.cta,text:t?"":"Create a database",iconLeft:t?(0,N.tZ)(z.Z,{}):(0,N.tZ)(N.HY,{}),loading:t});default:(0,nk.Z)(n.code)}}var dY=function(e){var t,n,r=e.onDatabaseCreated,i=(0,P._)((0,$.useState)(!1),2),o=i[0],a=i[1],l=(0,P._)((0,$.useState)(!1),2),c=l[0],s=l[1],u=(0,ez.Z)(),d=(0,ak.Z)().showError,f=(t=(0,es._)({},dH,{notifyOnNetworkStatusChange:!0,variables:{replId:u},onError:function(e){d(e.message)}}),eJ.a(dV,t)),h=f.loading,p=f.data,m=f.refetch,v=(0,P._)((n=(0,es._)({},sq,{onError:function(e){d("Error when creating Neon database: ".concat(e.message)),sg({action:"created",success:!1})},onCompleted:function(e){if((null==e?void 0:e.createNeonDatabase.__typename)==="CreateNeonDatabaseResult"){var t=e.createNeonDatabase;r({__typename:"NeonDatabase",databaseId:t.databaseId,databaseName:t.databaseName,connectionString:t.connectionString,projectId:t.projectId,isFrozen:t.isFrozen}),sg({action:"created",success:!0})}else{d("Error: ".concat(null==e?void 0:e.createNeonDatabase.message)),sg({action:"created",success:!1});return}}}),a4.D(sJ,n)),2),g=v[0],y=v[1].loading,b=(null==p?void 0:p.repl.__typename)==="Repl"?p.repl.authorizations.createDatabase:void 0,w="Replit ".concat(dz.we," members receive $").concat(dj.QP,"/month in credits to offset expenses, ");return(0,N.BX)(W.G,{css:dq.self,children:[(0,N.tZ)(rX.u,{isOpen:c,onRequestClose:function(){return s(!1)},children:(0,N.tZ)(sG.Z,{onRequestClose:function(){return s(!1)}})}),(0,N.BX)(W.G,{css:dq.container,children:[(0,N.BX)(W.G,{css:dq.title,children:[(0,N.tZ)(F.xv,{variant:"subheadBig",children:"PostgreSQL Database"}),(0,N.tZ)(F.xv,{color:"dimmer",children:"Fully-managed, usage based PostgreSQL database with 10GB of fast read/write storage."}),(0,N.tZ)(F.xv,{css:j.l0.textAlign.center,children:(0,N.tZ)("a",{href:u0,target:"_blank",rel:"noopener",children:"Learn more"})})]}),(0,N.BX)(W.G,{css:j.l0.colWithGap(16),children:[(0,N.tZ)(W.G,{css:[j.l0.rowWithGap(0),j.l0.justify.center],children:(0,N.tZ)(dU.Z,{art:"Database"})}),(0,N.BX)(W.G,{css:j.l0.colWithGap(8),children:[(0,N.tZ)(dJ,{loading:h||y,createDatabaseAuthz:b,handleOnCreate:function(){g({variables:{input:{replId:u}}})},refetchUbbCapabilitiesQueryData:m,setShowPaymentMethodForm:function(){return a(!0)},showPaymentMethodForm:o,setShowSupportForm:function(){return s(!0)}}),o?(0,N.tZ)(em.Tg,{elevated:!0,css:dq.payment,children:(0,N.tZ)(dF.q,{onSuccess:(0,tP._)(function(){return(0,tL.Jh)(this,function(e){switch(e.label){case 0:return a(!1),[4,m()];case 1:return e.sent(),[2]}})}),context:"workspace_hosting_pane"})}):null]})]}),(0,N.BX)(W.G,{css:dq.details,children:[(0,N.BX)(W.G,{css:dq.detailsItem,children:[(0,N.tZ)(dM.lt,{}),(0,N.BX)(F.xv,{css:dq.detailsText,children:["Get charged for what you use across compute time and storage, ",(0,N.tZ)("a",{href:u1,target:"_blank",rel:"noopener",children:"see pricing"})]})]}),(0,N.BX)(W.G,{css:dq.detailsItem,children:[(0,N.tZ)(dM.fG,{}),(0,N.BX)(F.xv,{css:dq.detailsText,children:[w,(0,N.tZ)("a",{href:u1,target:"_blank",rel:"noopener",children:"see allocations"})]})]})]})]})]})},d$=function(e){var t,n,r=e.performPaneOperation,i=(0,ez.Z)(),o=(0,ak.Z)().showError,a=(0,q.Z)().psql,l=(0,P._)((0,$.useState)([]),2),c=l[0],s=l[1],u=(t=(0,es._)({},sq,{variables:{input:{replId:i}},fetchPolicy:"no-cache",notifyOnNetworkStatusChange:!0,onCompleted:function(e){if("GetNeonDatabasesResult"===e.getNeonDatabases.__typename){s(e.getNeonDatabases.databases);return}o("Error: ".concat(e.getNeonDatabases.message))}}),eJ.a(s$,t)),d=u.loading,f=u.refetch,h=sE(),p=(0,$.useCallback)((n=(0,tP._)(function(e){var t;return(0,tL.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),s([e]),[4,a.ensureNixPsqlPackageInstalled(!0)];case 1:return n.sent(),h({connectionString:e.connectionString,databaseName:e.databaseName}),[3,3];case 2:return t=n.sent(),o("Error: ".concat(t.message)),[3,3];case 3:return[2]}})}),function(e){return n.apply(this,arguments)}),[a,h,o]),m=(0,ny.Dv)(dA);return m?(0,N.tZ)(dO,{neonDatabases:[m],onDatabaseDeleted:f,onDatabaseUnfreezed:f,performPaneOperation:r}):d?(0,N.tZ)(W.G,{css:[j.l0.flex.row,j.l0.justify.center,j.l0.p(32)],children:(0,N.tZ)(z.Z,{})}):c.length?(0,N.tZ)(dO,{neonDatabases:c,onDatabaseDeleted:f,onDatabaseUnfreezed:f,performPaneOperation:r}):(0,N.tZ)(dY,{onDatabaseCreated:p})},dK=O.Dy.Object({type:O.Dy.Literal("neon")}),dQ={Content:function(e){var t=e.options;return(0,N.tZ)(d$,{performPaneOperation:t.performPaneOperation})},Icon:function(e){var t=e.size;return(0,N.tZ)(e4.Pd.Provider,{value:{color:e3.TV.blueStrongest,size:t},children:(0,N.tZ)(sp.Z,{})})},getTitle:function(){return"PostgreSQL"},description:"Fully-managed, usage-based PostgreSQL database with 10GB of fast read/write storage",decode:function(e){return U.B4.Decode(dK,e)}},d0=n(69340),d1=n(46298),d2=n(13033),d4=n(54556),d3=n(49580),d8=n(70316),d6=n(93213),d5=n(10118),d7=(0,H.X)({self:[j.l0.p(12),j.l0.colWithGap(16)],devUrl:[j.l0.rowWithGap(4),j.l0.align.center],url:[j.l0.color.accentPositiveStronger,j.l0.fontSize("small"),j.l0.focusRing,{"&:hover":[j.l0.cursor.pointer,j.l0.color.accentPositiveStrongest]}],secondaryUrl:[j.l0.color.foregroundDimmest,j.l0.fontSize("small"),j.l0.focusRing,{"&:hover":[j.l0.cursor.pointer,j.l0.color.accentPrimaryStrongest]}],section:[j.l0.colWithGap(4)],portHeader:[j.l0.rowWithGap(8),j.l0.align.baseline],openPort:[j.l0.color.accentPositiveStronger],localPortIcon:[j.l0.color.foregroundDefault,j.l0.px(4),{flex:"0 0 auto",marginLeft:"auto"}],internalMessage:[j.l0.flex.shrink(1),{marginLeft:"auto",span:j.l0.color.foregroundDimmest}],portStatus:[j.l0.py(0),j.l0.px(4)],newPort:[j.l0.color.foregroundDefault,j.l0.rowWithGap(4),j.l0.align.center,j.l0.my(1),j.l0.borderRadius(16),j.l0.height(20)],externalPortButton:[{"&":[j.l0.height(20),j.l0.borderRadius(16),j.l0.color.foregroundDefault]}],externalPortPopup:[{"&":[j.l0.height(20),j.l0.p(6),j.l0.borderRadius(16),j.l0.color.foregroundDefault],"& > span":[j.l0.fontSize(12)],"& > svg":[j.l0.mr(4)]}],textButton:[j.l0.cursor.pointer,j.l0.reset.button,j.l0.color.accentPrimaryStronger,j.l0.focusRing,j.l0.hover(j.l0.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],newPortInput:[j.l0.height(20),j.l0.my(1)],newPortClose:j.l0.mr(4),portActionItem:[j.l0.fontSize(j.TV.fontSizeDefault),j.l0.viewStyle,j.l0.height(32),j.l0.px(16),j.l0.py(8),j.l0.flex.row,j.l0.align.center,j.l0.color.foregroundDefault,j.l0.backgroundColor.backgroundDefault,nR.gU.listItem,{":not([disabled])":{":hover":{backgroundColor:j.TV.backgroundHigher}}}]});function d9(e){var t,n,r,i=e.localPort,o=e.externalPort,a=e.isLocalhost,l=e.onPortChange,c=(0,q.Z)().ports.updateDotReplitPortsMapping,s=(t=(0,q.Z)().ports,n=(0,d1.Z)(t.portsState),r=new Set(null==n?void 0:n.map(function(e){var t;return null!==(t=(0,d8.OD)(e.configuration))&&void 0!==t&&t}).filter(Boolean)),Array.from(d8.UK).sort(function(e,t){return e-t}).map(function(e){return{isAvailable:!r.has(e),externalPort:e}}));return(0,N.tZ)(W.G,{css:j.l0.flex.row,children:void 0!==o&&0!==o?(0,N.tZ)(ep.zx,{css:d7.externalPortButton,iconRight:(0,N.tZ)(rg.Z,{}),text:":".concat(o),size:"small",onClick:function(){i&&(c(i,void 0,a),null==l||l())}}):(0,N.tZ)(d2.ZE,{cssProps:[d7.externalPortPopup],label:"Set external port",onAction:function(e){if(i){var t=s.find(function(t){return String(t.externalPort)===e});t&&t.isAvailable&&(c(i,t.externalPort,a),null==l||l())}},children:s.map(function(e){var t=e.isAvailable,n=e.externalPort;return(0,N.tZ)(d2.ck,{"aria-label":String(n),children:(0,N.BX)(W.G,{css:t?j.l0.color.foregroundDefault:j.l0.color.foregroundDimmest,children:[":",n]})},String(n))})})})}function fe(e){var t=e.portState,n=null;switch(t.configuration.type){case d8.DL.MISCONFIGURED:n=(0,N.tZ)(tB.u,{tooltip:"Port misconfigured",delay:"default",children:(0,N.tZ)(rv.Z,{})});break;case d8.DL.CONFIG_MISSING:n=(0,N.tZ)(tB.u,{tooltip:"Configuration missing",delay:"default",children:(0,N.tZ)(rv.Z,{})});break;case d8.DL.NO_MORE_EXTERNAL_PORTS_AVAILABLE:n=(0,N.tZ)(rv.Z,{});break;case d8.DL.FORWARDED:n=(0,N.tZ)(ev.Z,{});case d8.DL.INTERNAL_ONLY:}return(0,N.tZ)("span",{css:d7.localPortIcon,children:n})}function ft(e){var t=e.portState,n=e.width,r=(0,d8.VZ)(t.configuration)?"localhost":"0.0.0.0";return(0,N.BX)(d6.sg,{width:n||130,children:[(0,N.BX)(F.xv,{css:t.isOpen&&d7.openPort,children:[r,":",t.configuration.localPort]}),(0,N.tZ)(fe,{portState:t})]})}function fn(e){var t=e.portState,n=e.openWebview,r=e.openVncOutput,i=e.width;if(t.configuration.type===d8.DL.NO_MORE_EXTERNAL_PORTS_AVAILABLE)return(0,N.tZ)(d6.sg,{width:i||180,children:(0,N.tZ)(rF.E,{css:d7.portStatus,icon:(0,N.tZ)(rv.Z,{}),text:"No ports available"})});var o=!!n&&t.isOpen&&t.configuration.type===d8.DL.FORWARDED,a=!!r&&t.configuration.isVnc;return(0,N.BX)(d6.sg,{width:i||180,children:[t.configuration.isVnc?(0,N.tZ)(rF.E,{css:d7.portStatus,icon:(0,N.tZ)(lX.Z,{}),text:"VNC Ports do not require external port"}):(0,N.tZ)(d9,{localPort:t.configuration.localPort,externalPort:(0,d8.OD)(t.configuration),isLocalhost:(0,d8.VZ)(t.configuration)}),o?(0,N.tZ)(M.hU,{alt:"Open in Webview",onClick:n,css:j.l0.color.foregroundDefault,children:(0,N.tZ)(d4.Z,{})}):null,a?(0,N.tZ)(M.hU,{alt:"View VNC output",onClick:r,css:j.l0.color.foregroundDefault,children:(0,N.tZ)(d4.Z,{})}):null]})}function fr(e){var t,n=e.portState;return n.isOpen?(0,N.BX)(N.HY,{children:[(0,N.tZ)(d6.sg,{width:100,children:(t=n.processInfo.cmdline[0].split("/"))[t.length-1]}),(0,N.tZ)(d6.sg,{width:100,children:n.processInfo.pid})]}):(0,N.tZ)(d6.sg,{width:100})}function fi(e){var t=e.portState,n=e.onAction,r=[{label:"Open external link",key:"EXTERNAL_LINK",icon:(0,N.tZ)(r3.Z,{})},{label:"Remove port config",key:"REMOVE",icon:(0,N.tZ)(sD.Z,{})}];return t.configuration.isVnc?r.unshift({label:"View VNC output",key:"OPEN_VNC_OUTPUT",icon:(0,N.tZ)(d4.Z,{})}):r.unshift({label:"Open webview",key:"OPEN_WEBVIEW",icon:(0,N.tZ)(d4.Z,{})}),(0,N.tZ)(d6.sg,{width:30,last:!0,children:(0,N.tZ)(d2.ZE,{cssProps:[j.l0.height(22),j.l0.width(22),j.l0.color.foregroundDefault,{background:"transparent"}],menuCssProps:[{li:[j.l0.p(0)],"li > div":[j.l0.pl(6),j.l0.rowWithGap(4),j.l0.align.center]}],items:r,icon:(0,N.tZ)(d3.Z,{}),onAction:function(e){switch(e){case"OPEN_WEBVIEW":case"OPEN_VNC_OUTPUT":case"EXTERNAL_LINK":case"REMOVE":n({type:e,payload:{portState:t}})}},children:r.map(function(e){return(0,N.tZ)(d2.ck,{children:(0,N.BX)(W.G,{css:d7.portActionItem,children:[e.icon?e.icon:(0,N.tZ)(W.G,{css:[j.l0.width(16)]}),(0,N.tZ)(F.xv,{multiline:!1,children:e.label})]})},e.key)})})})}function fo(e){var t=e.portState,n=e.portAction;return(0,N.BX)(d6.X2,{children:[(0,N.tZ)(ft,{portState:t}),(0,N.tZ)(fn,{portState:t,openWebview:function(){n({type:"OPEN_WEBVIEW",payload:{portState:t}})},openVncOutput:function(){n({type:"OPEN_VNC_OUTPUT",payload:{portState:t}})}}),(0,N.tZ)(fr,{portState:t}),(0,N.tZ)(fi,{portState:t,onAction:n})]},t.configuration.localPort)}(d=k||(k={})).OPEN_WEBVIEW="OPEN_WEBVIEW",d.OPEN_VNC_OUTPUT="OPEN_VNC_OUTPUT",d.EXTERNAL_LINK="EXTERNAL_LINK",d.REMOVE="REMOVE";var fa=function(e){var t=e.text,n=e.onClick;return(0,N.tZ)("button",{css:d7.textButton,onClick:n,children:t})};function fl(e){var t,n=e.openDotReplit,r=(0,P._)((0,$.useState)(!1),2),i=r[0],o=r[1],a=(0,P._)((0,$.useState)(),2),l=a[0],c=a[1],s=null===(t=(0,q.Z)().ports.portsState.current)||void 0===t?void 0:t.some(function(e){return e.configuration.localPort===l});return i?(0,N.BX)(d6.X2,{children:[(0,N.BX)(d6.sg,{width:130,children:[(0,N.tZ)(M.hU,{css:d7.newPortClose,alt:"Close",onClick:function(){return o(!1)},size:18,children:(0,N.tZ)(rg.Z,{})}),(0,N.tZ)(ef.II,{css:d7.newPortInput,value:(null==l?void 0:l.toString())||"",onChange:function(e){return c(e.target.value?parseInt(e.target.value,10):void 0)}})]}),(0,N.tZ)(d6.sg,{children:s?(0,N.tZ)(rF.E,{css:d7.portStatus,colorway:"warning",text:"Local port already exists"}):(0,N.tZ)(d9,{localPort:l,isLocalhost:!1,onPortChange:function(){return o(!1)}})})]}):(0,N.BX)(d6.X2,{children:[(0,N.tZ)(d6.sg,{width:130,children:(0,N.tZ)(ep.zx,{css:d7.newPort,iconLeft:(0,N.tZ)(nG.Z,{size:12}),text:"New port",size:"small",onClick:function(){return o(!0)}})}),(0,N.tZ)(d6.sg,{children:(0,N.BX)(F.xv,{variant:"small",children:["This port config is saved in the"," ",(0,N.tZ)(fa,{text:".replit file",onClick:n}),"."," "]})})]})}function fc(e){var t,n=e.openDotReplit,r=e.openWebview,i=e.openVncOutput,o=(0,ez.Z)(),a=(0,d5.J_)(o),l=(0,ak.Z)().showError,c=(0,q.Z)().ports,s=c.portsState,u=c.removeDotReplitPortsMapping,d=function(e){switch(e.type){case"OPEN_WEBVIEW":r(e.payload.portState.configuration.localPort);break;case"OPEN_VNC_OUTPUT":i();break;case"EXTERNAL_LINK":var t=(0,d8.OD)(e.payload.portState.configuration);if(!(null==a?void 0:a.presentationUrl)){l("URL not available.");return}var n=(0,d5.hw)(null==a?void 0:a.presentationUrl,t).toString();window.open(n,"_blank");break;case"REMOVE":u(e.payload.portState.configuration.localPort,(0,d8.OD)(e.payload.portState.configuration))}};return(0,N.BX)(W.G,{css:d7.self,children:[(null==a?void 0:a.presentationUrl)?(0,N.BX)(N.HY,{children:[(0,N.BX)(W.G,{css:d7.section,children:[(0,N.tZ)(F.xv,{children:"Dev URL:"}),(0,N.BX)(W.G,{css:d7.devUrl,children:[(0,N.tZ)(ue(),{legacyBehavior:!0,href:a.presentationUrl,passHref:!0,children:(0,N.tZ)("a",{css:d7.url,target:"_blank",children:a.presentationUrl})}),(0,N.tZ)(tm.m,{textToCopy:a.presentationUrl})]})]}),(0,N.tZ)(nT.R,{})]}):null,(0,N.BX)(W.G,{css:d7.section,children:[(0,N.BX)(W.G,{css:d7.portHeader,children:[(0,N.tZ)(F.xv,{children:"Ports"}),(0,N.tZ)(ue(),{legacyBehavior:!0,href:"https://docs.replit.com/replit-workspace/workspace-features/webview",passHref:!0,children:(0,N.tZ)("a",{css:d7.secondaryUrl,target:"_blank",children:"Learn more"})})]}),(0,N.BX)(d6.iA,{children:[(0,N.BX)(d6.X2,{children:[(0,N.tZ)(d6.sg,{header:!0,width:130,children:"Internal Port"}),(0,N.tZ)(d6.sg,{header:!0,width:180,children:"External Port"}),(0,N.tZ)(d6.sg,{header:!0,width:100,children:"Name"}),(0,N.tZ)(d6.sg,{header:!0,width:100,children:"Pid"})]}),s.current&&(null===(t=s.current)||void 0===t?void 0:t.length)>0?s.current.map(function(e){return(0,N.tZ)(fo,{portState:e,portAction:d},e.configuration.localPort)}):null,(0,N.tZ)(fl,{openDotReplit:n})]})]})]})}var fs=O.Dy.Object({type:O.Dy.Literal("networking")}),fu={Content:function(e){var t,n=e.options.performPaneOperation,r=(0,ak.Z)().showError,i=(0,q.Z)().fs;return(0,N.tZ)(fc,{openDotReplit:(0,tP._)(function(){return(0,tL.Jh)(this,function(e){switch(e.label){case 0:return[4,i.stat(".replit")];case 1:if(!e.sent().exists)return r("Could not find .replit configuration file."),[2];return n({operation:"open",secondary:!0,pane:{type:"codeEditor",data:{path:".replit"}}}),[2]}})}),openWebview:(t=(0,tP._)(function(e){return(0,tL.Jh)(this,function(t){return n({operation:"open",pane:{type:"webview",data:e?{portType:"local",port:e}:void 0},secondary:!0}),[2]})}),function(e){return t.apply(this,arguments)}),openVncOutput:(0,tP._)(function(){return(0,tL.Jh)(this,function(e){return n({operation:"open",pane:{type:"vnc"},secondary:!0}),[2]})})})},Icon:function(e){var t=e.size;return(0,N.tZ)(d0.Z,{size:t})},getTitle:function(){return"Networking"},description:"Configure web server ports for your Repl",decode:function(e){return U.B4.Decode(fs,e)}},fd=n(80654),ff=n(26734),fh=n(35021),fp=n(37841),fm=n(91664),fv=O.Dy.Object({id:O.Dy.String(),name:O.Dy.String(),contentType:O.Dy.Optional(O.Dy.String()),timeCreated:O.Dy.String(),size:O.Dy.String()}),fg=O.Dy.Array(fv),fy={FILE:"file"},fb=n(18770);function fw(e){return"".concat(e.status," - ").concat(e.statusText)}function fZ(){return(fZ=(0,tP._)(function(e){var t,n,r,i;return(0,tL.Jh)(this,function(o){switch(o.label){case 0:return t=e.bucketExternalId,[4,fetch("/object-storage/storage/v1/b/".concat(t,"/o"),{method:"GET",credentials:"same-origin"})];case 1:if(!(n=o.sent()).ok)throw Error("Failed to get objects: ".concat(fw(n)));return[4,n.json()];case 2:if(i=null!==(r=o.sent().items)&&void 0!==r?r:[],!U.B4.Check(fg,i))throw(0,fb.ZA)(fg,i);return[2,i]}})})).apply(this,arguments)}function fx(e){return fC.apply(this,arguments)}function fC(){return(fC=(0,tP._)(function(e){var t,n,r,i;return(0,tL.Jh)(this,function(o){switch(t=e.bucketExternalId,n=e.objectName,r=e.file,void 0===(i=e.uploadMethod)?1:i){case 1:return[2,function(e){return f_.apply(this,arguments)}({bucketExternalId:t,objectName:n,file:r})];case 2:return[2,function(e){return fT.apply(this,arguments)}({bucketExternalId:t,objectName:n,file:r})]}return[2]})})).apply(this,arguments)}function f_(){return(f_=(0,tP._)(function(e){var t,n,r,i,o;return(0,tL.Jh)(this,function(a){switch(a.label){case 0:return t=e.bucketExternalId,n=e.objectName,r=e.file,i=encodeURIComponent(n),[4,fetch("/object-storage/upload/storage/v1/b/".concat(t,"/o?uploadType=media&name=").concat(i),{method:"POST",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"},body:r})];case 1:if(!(o=a.sent()).ok)throw Error("Failed to upload object: ".concat(fw(o)));return[2]}})})).apply(this,arguments)}function fS(){return(fS=(0,tP._)(function(e){var t,n,r,i,o,a;return(0,tL.Jh)(this,function(l){switch(l.label){case 0:return t=e.bucketExternalId,n=e.objectName,r=e.file,[4,fetch("/object-storage/".concat(t,"/").concat(n,"?uploads"),{method:"POST",credentials:"same-origin",headers:{"Content-Length":"0","Content-Type":r.type,"X-Requested-With":"XMLHttpRequest"}})];case 1:if(!(i=l.sent()).ok)throw Error("Failed to initiate multipart upload: ".concat(fw(i)));return[4,i.text()];case 2:if(o=l.sent(),!(a=new DOMParser().parseFromString(o,"text/xml").getElementsByTagName("UploadId")[0].textContent))throw Error("Failed to initiate multipart upload: missing UploadId");return[2,a]}})})).apply(this,arguments)}function fk(){return(fk=(0,tP._)(function(e){var t,n,r,i,o,a,l;return(0,tL.Jh)(this,function(c){switch(c.label){case 0:return t=e.bucketExternalId,n=e.objectName,r=e.partNumber,i=e.uploadId,o=e.chunk,[4,fetch("/object-storage/".concat(t,"/").concat(n,"?partNumber=").concat(r,"&uploadId=").concat(i),{method:"PUT",credentials:"same-origin",headers:{"Content-Length":o.length.toString(),"Content-Type":"text/xml","X-Requested-With":"XMLHttpRequest"},body:o})];case 1:if(!(a=c.sent()).ok)throw Error("Failed to upload chunk: ".concat(fw(a)));if(!(l=a.headers.get("x-upload-etag")))throw Error("Failed to upload chunk: missing x-upload-etag");return[2,{partNumber:r,etag:l}]}})})).apply(this,arguments)}function fE(){return(fE=(0,tP._)(function(e){var t,n,r,i,o,a,l,c;return(0,tL.Jh)(this,function(s){switch(s.label){case 0:return t=e.bucketExternalId,n=e.objectName,r=e.uploadId,i=e.parts,a=(o=document.implementation.createDocument("","",null)).createElement("CompleteMultipartUpload"),i.forEach(function(e){var t=o.createElement("Part"),n=o.createElement("PartNumber");n.textContent=e.partNumber.toString(),t.appendChild(n);var r=o.createElement("ETag");r.textContent=e.etag,t.appendChild(r),a.appendChild(t)}),o.appendChild(a),l=new XMLSerializer().serializeToString(o),[4,fetch("/object-storage/".concat(t,"/").concat(n,"?uploadId=").concat(r),{method:"POST",credentials:"same-origin",headers:{"Content-Length":l.length.toString(),"Content-Type":"application/xml","X-Requested-With":"XMLHttpRequest"},body:l})];case 1:if(!(c=s.sent()).ok)throw Error("Failed to complete multipart upload: ".concat(fw(c)));return[2]}})})).apply(this,arguments)}function fT(){return(fT=(0,tP._)(function(e){var t,n,r,i,o,a,l,c;return(0,tL.Jh)(this,function(s){switch(s.label){case 0:return t=e.bucketExternalId,n=e.objectName,r=e.file,[4,(0,fm.pV)(r)];case 1:return i=s.sent(),a=(o=t3.Z.from(i)).toBuffer(),[4,function(e){return fS.apply(this,arguments)}({bucketExternalId:t,objectName:n,file:r})];case 2:return l=s.sent(),[4,Promise.all(Array(Math.ceil(o.length/8388608)).fill(0).map(function(e,r){var i=a.subarray(8388608*r,(r+1)*8388608);return function(e){return fk.apply(this,arguments)}({bucketExternalId:t,objectName:n,partNumber:r+1,uploadId:l,chunk:i})}))];case 3:return c=s.sent(),[4,function(e){return fE.apply(this,arguments)}({bucketExternalId:t,objectName:n,uploadId:l,parts:c})];case 4:return s.sent(),[2]}})})).apply(this,arguments)}function fR(e){return fD.apply(this,arguments)}function fD(){return(fD=(0,tP._)(function(e){var t,n,r;return(0,tL.Jh)(this,function(i){switch(i.label){case 0:return t=e.bucketExternalId,n=e.objectName,[4,fetch("/object-storage/storage/v1/b/".concat(t,"/o/").concat(n.replaceAll("/","%2F")),{method:"DELETE",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}})];case 1:if(!(r=i.sent()).ok)throw Error("Failed to delete object: ".concat(fw(r)));return[2]}})})).apply(this,arguments)}function fI(){return(fI=(0,tP._)(function(e){var t,n,r,i,o,a,l;return(0,tL.Jh)(this,function(c){switch(c.label){case 0:return t=e.sourceBucketExternalId,n=e.destinationBucketExternalId,r=e.sourceObjectName,i=e.destinationObjectName,o=encodeURIComponent(r),a=encodeURIComponent(i),[4,fetch("/object-storage/storage/v1/b/".concat(t,"/o/").concat(o,"/copyTo/b/").concat(n,"/o/").concat(a),{method:"POST",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}})];case 1:if(!(l=c.sent()).ok)throw Error("Failed to copy object: ".concat(fw(l)));return[2]}})})).apply(this,arguments)}(f=E||(E={}))[f.Direct=1]="Direct",f[f.Multipart=2]="Multipart";var fB=(0,nb.cn)(new Map),fG=(0,nb.cn)(null,function(e,t,n){var r=n.bucketExternalId,i=n.objects;t(fB,function(e){return(0,dw.Uy)(e,function(e){e.set(r,i)})})}),fA=(0,nb.cn)(null,function(e,t,n){var r=n.bucketExternalId,i=n.name,o=n.contentType,a=n.size,l={id:"optimistic-"+t6()(),name:i,contentType:o,size:a,timeCreated:new Date().toISOString(),optimisticallyInserted:!0};t(fB,function(e){return(0,dw.Uy)(e,function(e){var t=e.get(r);if(!t){e.set(r,[l]);return}var n=t.find(function(e){return e.name===i});n?Object.assign(n,l):t.push(l)})})}),fP=(0,nb.cn)(null,function(e,t,n){var r=n.name,i=n.bucketExternalId,o=n.isPendingDeletion,a=n.isOptimisticallyInserted;t(fB,function(e){return(0,dw.Uy)(e,function(e){var t=e.get(i);if(!t)throw Error("Bucket not found when updating object");var n=t.findIndex(function(e){return e.name===r});if(-1===n)throw Error("Bucket not found when updating object");void 0!==o&&(t[n].isPendingDeletion=o),void 0!==a&&(t[n].optimisticallyInserted=a)})})}),fL=(0,nb.cn)(null,function(e,t,n){var r=n.name,i=n.bucketExternalId;t(fB,function(e){return(0,dw.Uy)(e,function(e){var t=e.get(i);if(!t)throw Error("Bucket not found when removing object");e.set(i,t.filter(function(e){return e.name!==r}))})})}),fN=new Intl.Collator;function fO(e){return e.sort(function(e,t){return fN.compare(e.displayName,t.displayName)})}function fU(e){var t,n=e.bucketExternalId;return null!==(t=(0,ny.Dv)(fB).get(n))&&void 0!==t?t:[]}function fM(){var e=(0,P._)((0,$.useState)(!1),2),t=e[0],n=e[1],r=(0,ny.b9)(fG);function i(){return(i=(0,tP._)(function(e){var t,i,o,a;return(0,tL.Jh)(this,function(l){switch(l.label){case 0:t=e.bucketExternalId,i=e.onError,n(!0),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,function(e){return fZ.apply(this,arguments)}({bucketExternalId:t})];case 2:return o=l.sent(),r({bucketExternalId:t,objects:o}),[3,4];case 3:return a=l.sent(),null==i||i(a),[3,4];case 4:return n(!1),[2]}})})).apply(this,arguments)}return{loading:t,fetchObjects:function(e){return i.apply(this,arguments)}}}function fX(){var e=(0,P._)((0,$.useState)(!1),2),t=e[0],n=e[1],r=(0,ny.b9)(fA),i=(0,ny.b9)(fL),o=(0,ny.b9)(fP);function a(){return(a=(0,tP._)(function(e){var t,a,l,c,s;return(0,tL.Jh)(this,function(u){switch(u.label){case 0:t=e.bucketExternalId,a=e.files,l=e.targetFolder,c=e.onError,n(!0),u.label=1;case 1:var d;return u.trys.push([1,3,,4]),[4,Promise.all(a.map((d=(0,tP._)(function(e){var n,a;return(0,tL.Jh)(this,function(c){switch(c.label){case 0:n=l+(e.webkitRelativePath||e.dirPath||e.name),r({bucketExternalId:t,name:n,contentType:e.type,size:null==e?void 0:e.size.toString()}),a=e.size>31457280?E.Multipart:E.Direct,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,fx({bucketExternalId:t,objectName:n,file:e,uploadMethod:a})];case 2:return c.sent(),o({bucketExternalId:t,name:n,isOptimisticallyInserted:!1}),[3,4];case 3:return c.sent(),i({bucketExternalId:t,name:n}),[3,4];case 4:return[2]}})}),function(e){return d.apply(this,arguments)})))];case 2:return u.sent(),[3,4];case 3:return s=u.sent(),null==c||c(s),[3,4];case 4:return n(!1),[2]}})})).apply(this,arguments)}return{uploadFiles:function(e){return a.apply(this,arguments)},loading:t}}function fF(){var e=(0,ej._)(["\n  fragment ObjectStorageBucket on Bucket {\n    id\n    externalId\n    name\n  }\n"]);return fF=function(){return e},e}function fW(){var e=(0,ej._)(["\n  query ObjectStoragePane($replId: String!) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          createObjectBucket {\n            isAuthorized\n            code\n            message\n          }\n        }\n        defaultBucket {\n          ... on Bucket {\n            ...ObjectStorageBucket\n          }\n          ... on Error {\n            message\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on UnauthorizedError {\n            message\n          }\n          ... on UserError {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return fW=function(){return e},e}var fH={},fV=(0,eq.Ps)(fF()),fz=(0,eq.Ps)(fW(),fV),fj=n(45077),fq=n(41753),fJ=n(23815),fY=n(320),f$=n(11894),fK=n(90188),fQ=n(27482),f0=[{icon:(0,N.tZ)(fJ.Z,{}),title:"JavaScript",value:"js"},{icon:(0,N.tZ)(fY.Z,{}),title:"Python",value:"py"},{icon:(0,N.tZ)(al.Z,{}),title:"All other languages",value:"other"}],f1={js:{packagerConfigLanguage:"nodejs",description:(0,N.tZ)(sR.ZP,{components:{code:function(e){return(0,N.tZ)(fq.Z,(0,es._)({language:"json"},e))}},children:"This library supports Bun, Deno, and Node.js. It is not recommended for browser-based applications.\n  \nFor more information, see the [SDK Reference](https://docs.replit.com/cloud-services/storage-and-databases/object-storage/typescript-api-reference/)."}),packageName:"@replit/object-storage",commands:[{label:"Import Object Store Library",code:"const { Client } = require('@replit/object-storage');\nconst client = new Client();\n"},{label:"Download an object as text (i.e. JSON)",code:"const { ok, value: textValue, error } = await client.downloadAsText('file.json');\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Download an object as its raw byte representation (i.e. images)",code:"const { ok, value: bytesValue, error } = await client.downloadAsBytes('file.png');\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Download an object by streaming the object's contents (i.e. streaming data over an API)",code:"const { ok, value: stream, error } = await client.downloadAsStream('file.json');\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Download an object to the filesystem",code:"const { ok, error } = await client.downloadToFilename('file.json', destFilename);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"List the objects in the bucket",code:"const { ok, value, error } = await client.list();\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from text (i.e. JSON)",code:"const { ok, error } = await client.uploadFromText('file.json', data);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from its byte representation (i.e. images)",code:"const { ok, error } = await client.uploadFromBytes('file.png', data);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from the filesystem",code:"const { ok, error } = await client.uploadFromFilename('file.json', srcFilename);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from a stream (i.e. streaming data over an API)",code:"const { ok, error } = await client.uploadFromStream('file.json', stream);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Delete an object from the bucket",code:"const { ok, error } = await client.delete('file.json');\nif (!ok) {\n    // ... handle error ...\n}\n"}]},py:{packagerConfigLanguage:"python3",description:(0,N.tZ)(sR.ZP,{components:{code:function(e){return(0,N.tZ)(fq.Z,(0,es._)({language:"json"},e))}},children:"For more information, see the [SDK Reference](https://docs.replit.com/cloud-services/storage-and-databases/object-storage/python-api-reference/)."}),packageName:"replit-object-storage",commands:[{label:"Import Object Store Library",code:"from replit.object_storage import Client\nclient = Client()"},{label:"Download an object as text (i.e. JSON)",code:'client.download_as_text("file.json")'},{label:"Download an object as its raw byte representation (i.e. images)",code:'client.download_as_bytes("file.png")'},{label:"Download an object to the filesystem",code:'client.download_to_filename("file.json", dest_filename)'},{label:"List the objects in the bucket",code:"client.list()"},{label:"Upload an object from text (i.e. JSON)",code:'client.upload_from_text("file.json", data)'},{label:"Upload an object from its byte representation (i.e. images)",code:'client.upload_from_bytes("file.png", data)'},{label:"Upload an object from the filesystem",code:'client.upload_from_filename("file.json", src_filename)'},{label:"Delete an object from the bucket",code:'client.delete("file.json")'}]},other:{description:(0,N.tZ)(sR.ZP,{components:{code:function(e){return(0,N.tZ)(fq.Z,(0,es._)({language:"json"},e))}},children:'\nYou can use the [Google Cloud client libraries](https://cloud.google.com/storage/docs/reference/libraries#use) to interact with your bucket in any of the supported languages.\n\nIf there isn\'t a client library for your language of choice, you can use the [JSON API](https://cloud.google.com/storage/docs/json_api).\n\nWith both the client libraries and the JSON API, only blob/file/object APIs are authorized.\n\n## Authorization\n\n### Client libraries\n\n1. Create a JSON file with these contents in your project root directory, `google_application_credentials.json`\n\n```\n{\n  "type": "external_account",\n  "audience": "replit",\n  "credential_source": {\n    "url": "http://127.0.0.1:1106/credential"\n  },\n  "token_url": "http://127.0.0.1:1106/token"\n}\n```\n\n2. Set the `GOOGLE_APPLICATION_CREDENTIALS` environment variable to `"google_application_credentials.json"`\n3. Set the `GCLOUD_PROJECT` environment variable to `""`\n\n### JSON API\n\n1. Issue a `POST` request to `http://127.0.0.1:1106/token`\n\n## Bucket Selection\nUsing Google Cloud APIs or libraries directly requires a bucket name parameter to be specified on all requests. This field is interchangeable with your bucket\'s ID within Replit Object Storage.\n\nTo get the ID of the default bucket for your Repl or Deployment, issue a `GET` request to `http://127.0.0.1:1106/object-storage/default-bucket`\n'}),commands:[]}},f2=(0,H.X)({wrapper:[j.l0.colWithGap(16)],section:[j.l0.colWithGap(6)],selectWrapper:[j.l0.rowWithGap(0)],statusBanner:[j.l0.maxWidth("fit-content")]});function f4(e){var t=e.onError,n=(0,P._)((0,$.useState)("js"),2),r=n[0],i=n[1],o=(0,ak.Z)().showConfirm,a=(0,q.Z)().packager,l=(0,fK.I)().configs,c=(0,fQ.z9)(),s=(0,P._)((0,$.useState)(!1),2),u=s[0],d=s[1],f=l.find(function(e){return e.language===f1[r].packagerConfigLanguage}),h=!!(f1[r].packagerConfigLanguage&&f1[r].packageName&&f),p=!!(f&&c(f.id).some(function(e){return e.name===f1[r].packageName})),m=(0,P._)((0,$.useState)(!1),2),v=m[0],g=m[1];function y(){return(y=(0,tP._)(function(){return(0,tL.Jh)(this,function(e){switch(e.label){case 0:if(!h)return t(Error("Package not available for selected language")),[2];return d(!0),[4,a.addPackages([{name:f1[r].packageName}])];case 1:return e.sent()?(o("Installed ".concat(f1[r].packageName," package")),g(!0)):t(Error("Failed to install ".concat(f1[r].packageName," package"))),[2]}})})).apply(this,arguments)}var b=f0.find(function(e){return e.value===r}),w=v||p;return(0,$.useLayoutEffect)(function(){var e=!0,t=!1,n=void 0;try{for(var r,o=f0[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=function(){var e=r.value;if(f1[e.value].packagerConfigLanguage&&l.find(function(t){return t.language===f1[e.value].packagerConfigLanguage}))return i(e.value),{v:void 0}}();if("object"===(0,fj._)(a))return a.v}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}i("other")},[]),(0,N.BX)(W.G,{css:f2.wrapper,children:[(0,N.tZ)(W.G,{css:f2.selectWrapper,children:(0,N.tZ)(f$.P,{items:f0,selectedItem:b,initialSelectedItem:f0[0],onChange:function(e){g(!1),i(e.value)}})}),f1[r].description?f1[r].description:null,!w&&h?(0,N.tZ)(ep.zx,{onClick:function(){return y.apply(this,arguments)},text:"Install ".concat(f1[r].packageName," package"),colorway:"primary",loading:u}):null,b&&w?(0,N.tZ)(rF.E,{text:"Package installed",colorway:"positive",css:f2.statusBanner}):null,f1[r].commands.map(function(e){return(0,N.BX)(W.G,{css:f2.section,children:[(0,N.tZ)(F.xv,{children:e.label}),(0,N.tZ)(sR.ZP,{components:{code:function(e){return(0,N.tZ)(fq.Z,(0,es._)({language:r},e))}},children:"```\n".concat(e.code)})]},e.label)})]})}var f3=n(12933),f8=(0,H.X)({wrapper:[j.l0.colWithGap(8)],ctaStatusBanner:[j.l0.textAlign.left],ctaContainer:[j.l0.colWithGap(8),j.l0.align.center],cta:[j.l0.width("100%"),j.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],budgetContainer:[j.l0.colWithGap(8),j.l0.border(),j.l0.borderRadius(8),j.l0.p(8)],payment:[j.l0.p(16),j.l0.borderRadius(12),j.l0.textAlign.left,j.l0.shadow(2)]});function f6(e){var t=e.children,n=e.createBucketAuthz,r=e.actionDescription,i=e.refetchAuthzQueryData,o=e.loading,a=(0,P._)((0,$.useState)(!1),2),l=a[0],c=a[1],s=(0,P._)((0,$.useState)(!1),2),u=s[0],d=s[1];return(0,N.BX)(N.HY,{children:[(0,N.BX)(W.G,{css:f8.wrapper,children:[(0,N.tZ)(f5,{mainActionCTA:t,showPaymentMethodForm:l,setShowPaymentMethodForm:function(){return c(!0)},setShowSupportForm:function(){return d(!0)},createBucketAuthz:n,actionDescription:r,refetchAuthzQueryData:i,loading:o}),l?(0,N.tZ)(em.Tg,{elevated:!0,css:f8.payment,children:(0,N.tZ)(dF.q,{onSuccess:(0,tP._)(function(){return(0,tL.Jh)(this,function(e){switch(e.label){case 0:return c(!1),[4,i()];case 1:return e.sent(),[2]}})}),context:"workspace_hosting_pane"})}):null]}),(0,N.tZ)(rX.u,{isOpen:u,onRequestClose:function(){return d(!1)},children:(0,N.tZ)(sG.Z,{onRequestClose:function(){return d(!1)}})})]})}function f5(e){var t=e.mainActionCTA,n=e.showPaymentMethodForm,r=e.setShowPaymentMethodForm,i=e.setShowSupportForm,o=e.createBucketAuthz,a=e.actionDescription,l=e.refetchAuthzQueryData,c=e.loading,s=(0,aH.sG)();if(!o)return null;if(!o.isAuthorized&&s)return(0,N.tZ)(rF.E,{text:o.message,colorway:"warning",icon:(0,N.tZ)(rv.Z,{}),css:f8.ctaStatusBanner});switch(o.code){case a2.RO.RequiresActiveSubscription:case a2.RO.RequiresPaymentMethodOrSubscription:return(0,N.BX)(W.G,{css:f8.ctaContainer,children:[(0,N.tZ)(sN.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to ".concat(a,"."),css:f8.cta,colorway:"primary",variant:"default",disabled:n,onPlanCheckoutComplete:l}),(0,N.tZ)(ep.zx,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:f8.cta,disabled:n,loading:c,iconLeft:(0,N.tZ)(sL.Z,{}),onClick:function(){return r()}})]});case a2.RO.RequiresSmsVerification:return(0,N.tZ)(sB.Z,{context:a2.jv.ObjectStorage,onSuccess:l});case a2.RO.RequiresPaymentMethod:return(0,N.tZ)(ep.zx,{colorway:"primary",text:"Add a payment method",css:f8.cta,disabled:n,loading:c,iconLeft:(0,N.tZ)(sL.Z,{}),onClick:function(){return r()}});case a2.RO.RequiresUnbanning:return(0,N.tZ)(sP.u,{text:"Your account is not currently allowed to ".concat(a,". We're here to help! Please reach out to our support team for assistance."),colorway:"warning",iconLeft:(0,N.tZ)(rv.Z,{}),css:f8.ctaStatusBanner,onClick:function(){return i()}});case a2.RO.InsufficientBudget:return(0,N.BX)(N.HY,{children:[(0,N.tZ)(rF.E,{text:"You've reached your monthly usage budget. Increase your budget to ".concat(a,"."),colorway:"warning",icon:(0,N.tZ)(rv.Z,{}),css:f8.ctaStatusBanner}),(0,N.tZ)(W.G,{css:f8.budgetContainer,children:(0,N.tZ)(sA.L,{onUpdateSuccess:l})})]});case a2.RO.FeatureUnsupportedForReplitTeams:case a2.RO.FeatureUnsupportedForTeamsEdu:case a2.RO.FeatureUnsupportedForTeamsFree:case a2.RO.FeatureUnsupportedForTeamsPro:case a2.RO.InsufficientPermissions:case a2.RO.InsufficientQuota:case a2.RO.RequiresEmailVerification:return(0,N.tZ)(rF.E,{text:o.message,colorway:"warning",icon:(0,N.tZ)(rv.Z,{}),css:f8.ctaStatusBanner});case a2.RO.Authorized:case a2.RO.AuthorizedQuota:return(0,N.tZ)(N.HY,{children:t});default:(0,nk.Z)(o.code)}}function f7(){var e=(0,ej._)(["\n  mutation ObjectStoragePaneIntroCreateBucket($input: CreateBucketInput!) {\n    createBucket(input: $input) {\n      ... on Bucket {\n        ...ObjectStorageBucket\n      }\n      ... on Error {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f7=function(){return e},e}var f9={},he=(0,eq.Ps)(f7(),fV),ht=[{imageUrl:"/public/images/object-storage/objects-in-bucket.svg",text:"Store immutable files, like photos and documents, in writable buckets (databases for unstructured files).",altText:"An image and a file going into a bucket"},{imageUrl:"/public/images/object-storage/upload-to-cloud.svg",text:"Deploy apps that handle variable sets of files added by your users, like an upload-based photo gallery.",altText:"Images being uploaded to a cloud"},{imageUrl:"/public/images/object-storage/share-same-bucket.svg",text:"Buckets are automatically shared between development and production, so you can easily pass files to your users directly from the Workspace.",altText:"Development icon and deployment icon sharing a bucket"}],hn=(0,H.X)({wrapper:[j.l0.center,j.l0.pt(64),j.l0.px(8)],content:[j.l0.colWithGap(24),j.l0.center,j.l0.maxWidth(400),j.l0.textAlign.center],row:[j.l0.rowWithGap(16)],rowText:[j.l0.flex.growAndShrink(1),j.l0.textAlign.left]});function hr(e){var t,n=e.createBucketAuthz,r=e.refetchAuthzQueryData,i=e.onBucketCreated,o=e.onError,a=(0,ez.Z)(),l=(0,P._)((t=(0,es._)({},f9,{variables:{input:{replId:a}}}),a4.D(he,t)),2),c=l[0],s=l[1].loading;return(0,N.tZ)(W.G,{css:hn.wrapper,children:(0,N.BX)(W.G,{css:hn.content,children:[(0,N.tZ)(F.xv,{variant:"subheadBig",children:"Persistent shared file storage"}),ht.map(function(e,t){return(0,N.BX)(W.G,{css:hn.row,children:[(0,N.tZ)(W.G,{children:(0,N.tZ)(f3.Z,{src:e.imageUrl,width:44,height:44,alt:e.altText})}),(0,N.tZ)(F.xv,{css:hn.rowText,children:e.text})]},t)}),(0,N.tZ)(f6,{createBucketAuthz:n,actionDescription:"create a bucket",refetchAuthzQueryData:r,loading:s,children:(0,N.tZ)(ep.zx,{text:s?"Creating bucket...":"Create a bucket",onClick:function(){c({onCompleted:function(e){var t="Bucket"===e.createBucket.__typename?e.createBucket:null;if(!t){o(Error("Failed to create bucket"));return}i(t)},onError:o})},colorway:"primary",iconLeft:s?(0,N.tZ)(z.Z,{}):void 0,disabled:s})})]})})}var hi=n(80952),ho=n(19653),ha=n(33298),hl=n(65078),hc=n(75334),hs=n(35116),hu=n(34357),hd=n(96213),hf=n(55642),hh=n(36084),hp=n(47968),hm=n(20314),hv=n(25978),hg=n(6191),hy=function(e){var t=e.folderPath,n=e.onDropNativeFiles,r=(0,P._)((0,hv.L)(function(){return{accept:[fy.FILE,hg.FILE],drop:function(e){return"files"in e&&n(e.files),{name:t}},collect:function(e){return{isOver:!!e.isOver()}}}}),2);return{isDraggedOver:r[0].isOver,drop:r[1]}},hb=function(e){var t=e.currentFolder,n=e.onDropNativeFiles,r=(0,P._)((0,hv.L)(function(){return{accept:[hg.FILE],drop:function(e,t){t.didDrop()||e.dirContent.then(function(e){n(e)})},collect:function(e){return{isOverCurrent:e.isOver({shallow:!0})}}}},[t]),2);return{isOverCurrent:r[0].isOverCurrent,drop:r[1]}},hw=n(75588),hZ="1px dashed ".concat(j.TV.accentPrimaryDefault),hx=j.nC.min(500),hC=(0,ha.$)(["bodyOutline"]),h_=hC.cssVars,hS=hC.styleTokens,hk=(0,H.X)({wrapper:[j.l0.flex.grow(1)],buttons:[j.l0.colWithGap(8),(0,e5._)({},hx,[j.l0.rowWithGap(8)])],primaryButtons:[j.l0.rowWithGap(8)],secondaryButtons:[j.l0.rowWithGap(8),j.l0.justify.spaceBetween,j.l0.flex.grow(1)],tableWrapper:[j.l0.flex.growAndShrink(1),j.l0.borderRadius(4),{outline:hS.bodyOutline}],tableHeaderMainColumn:[j.l0.textAlign.left,j.l0.p(4),j.l0.width("50%")],tableHeader:[j.l0.textAlign.left,j.l0.p(4),j.l0.width("25%")]});function hE(e){var t=e.bucketExternalId,n=e.onOpenCommandsTab,r=e.onError,i=fU({bucketExternalId:t}),o=(0,P._)((0,$.useState)(""),2),a=o[0],l=o[1],c=function(e){var t=e.objects,n=e.currentFolder,r=[],i=new Map,o=!0,a=!1,l=void 0;try{for(var c,s=t[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;if(u.name.startsWith(n)&&u.name!==n){var d=u.name.slice(n.length);if(!d.includes("/")){r.push((0,eu._)((0,es._)({},u),{isFolder:!1,displayName:d}));continue}var f=d.split("/")[0];if(i.get(f)||i.set(f,{isFolder:!0,name:n+f+"/",displayName:f}),u.name===n+f+"/"){var h=i.get(f);if(!h)throw Error("Folder should have been added to map");h.optimisticallyInserted=u.optimisticallyInserted,h.isPendingDeletion=u.isPendingDeletion}}}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}var p=fO(Array.from(i.values())),m=fO(r);return(0,L._)(p).concat((0,L._)(m))}({currentFolder:a,objects:i}),s=fM(),u=s.fetchObjects,d=s.loading,f=function(){var e=(0,P._)((0,$.useState)(!1),2),t=e[0],n=e[1],r=(0,ny.b9)(fA),i=(0,ny.b9)(fP),o=(0,ny.b9)(fL);function a(){return(a=(0,tP._)(function(e){var t,a,l,c,s,u,d;return(0,tL.Jh)(this,function(f){switch(f.label){case 0:if(t=e.bucketExternalId,a=e.folderName,l=e.currentFolder,c=e.onError,a.includes("/"))return null==c||c(Error("Folder name cannot contain a forward slash")),[2];n(!0),r({bucketExternalId:t,name:s=l+a+"/",contentType:"text/plain",size:"0"}),u=new File([""],a,{type:"text/plain"}),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,fx({bucketExternalId:t,objectName:s,file:u})];case 2:return f.sent(),i({bucketExternalId:t,name:s,isOptimisticallyInserted:!1}),[3,4];case 3:return d=f.sent(),null==c||c(d),o({bucketExternalId:t,name:s}),[3,4];case 4:return n(!1),[2]}})})).apply(this,arguments)}return{createFolder:function(e){return a.apply(this,arguments)},loading:t}}().createFolder,h=fX().uploadFiles,p=(0,$.useRef)(null),m=(0,$.useRef)(null),v=(0,P._)((0,$.useState)(!1),2),g=v[0],y=v[1],b=(0,P._)((0,$.useState)(null),2),w=b[0],Z=b[1],x=hb({currentFolder:a,onDropNativeFiles:function(e){h({bucketExternalId:t,files:e,targetFolder:a,onError:r})}}),C=x.isOverCurrent,_=x.drop;return(0,N.BX)(N.HY,{children:[(0,N.BX)(W.G,{css:hk.wrapper,children:[(0,N.BX)(W.G,{css:hk.buttons,children:[(0,N.BX)(W.G,{css:hk.primaryButtons,children:[(0,N.tZ)(ep.zx,{onClick:function(){p.current&&p.current.click()},text:"Upload files",colorway:"primary",iconLeft:(0,N.tZ)(hs.Z,{})}),(0,N.tZ)(ep.zx,{onClick:function(){m.current&&m.current.click()},text:"Upload folder",colorway:"primary",iconLeft:(0,N.tZ)(hf.Z,{})})]}),(0,N.BX)(W.G,{css:hk.secondaryButtons,children:[(0,N.tZ)(ep.zx,{onClick:function(){return y(!0)},text:"Create folder",iconLeft:(0,N.tZ)(hd.Z,{})}),(0,N.tZ)(ep.zx,{onClick:function(){return u({bucketExternalId:t})},text:"Refresh",loading:d,iconLeft:(0,N.tZ)(rn.Z,{})})]})]}),(0,N.tZ)(hF,{currentFolder:a,bucketExternalId:t,setCurrentFolder:l,onError:r}),(0,N.tZ)(W.G,{innerRef:_,css:hk.tableWrapper,style:(0,e5._)({},h_.bodyOutline,C?hZ:void 0),children:i.length||g?(0,N.BX)("table",{children:[(0,N.tZ)("thead",{children:(0,N.BX)("tr",{children:[(0,N.tZ)("th",{css:hk.tableHeaderMainColumn,children:"Name"}),(0,N.tZ)("th",{css:hk.tableHeader,children:"Added"}),(0,N.tZ)("th",{css:hk.tableHeader,children:"Size"})]})}),(0,N.BX)("tbody",{children:[g?(0,N.tZ)(hV,{onCreateFolder:function(e){y(!1),f({bucketExternalId:t,folderName:e,currentFolder:a,onError:r})},onCanceled:function(){return y(!1)}}):null,c.map(function(e){return e.isFolder?(0,N.tZ)(hI,{item:e,setCurrentFolder:l,onDeleteClick:Z,bucketExternalId:t,onError:r},e.name):(0,N.tZ)(hB,{item:e,bucketExternalId:t,onDeleteClick:Z,onError:r},e.name)})]})]}):(0,N.tZ)(hJ,{onOpenCommandsTab:n})}),(0,N.tZ)(hw.Q,{fileUploadInputRef:p,dirUploadInputRef:m,uploadFiles:function(e){return h({bucketExternalId:t,files:e.files,targetFolder:a,onError:r})}})]}),(0,N.tZ)(hj,{bucketExternalId:t,requestedDeleteItem:w,onRequestClose:function(){return Z(null)},onError:r})]})}var hT=(0,ha.$)(["rowOutline","rowOpacity","rowTextDecoration","rowCursor"]),hR=hT.cssVars,hD=hT.styleTokens;function hI(e){var t,n=e.item,r=e.bucketExternalId,i=e.setCurrentFolder,o=e.onDeleteClick,a=e.onError,l=fX().uploadFiles,c=(0,ak.Z)().showConfirm,s=hy({folderPath:n.name,onDropNativeFiles:function(e){c('Uploading files to "'.concat(n.name,'"')),l({bucketExternalId:r,files:e,targetFolder:n.name,onError:a})}}),u=s.isDraggedOver,d=s.drop;return(0,N.tZ)(hL,{item:n,ref:d,onDeleteClick:function(){return o(n)},icon:(0,N.tZ)(hu.Z,{}),timeCreatedCell:"-",sizeCell:"-",style:(t={},(0,e5._)(t,hR.rowOutline,u?hZ:void 0),(0,e5._)(t,hR.rowCursor,"pointer"),t),onClick:function(){return i(n.name)},onKeyDown:function(e){"Enter"===e.key&&i(n.name)}})}function hB(e){var t,n,r,i,o,a=e.item,l=e.bucketExternalId,c=e.onDeleteClick,s=e.onError,u="/object-storage/storage/v1/b/".concat(l,"/o/").concat(a.name.replace("/","%2F"),"?alt=media"),d=!!(a.optimisticallyInserted||a.isPendingDeletion),f=function(){var e=(0,P._)((0,$.useState)(!1),2),t=e[0],n=e[1],r=(0,ny.b9)(fP),i=(0,ny.b9)(fA),o=(0,ny.b9)(fL);function a(){return(a=(0,tP._)(function(e){var t,a,l,c,s,u,d;return(0,tL.Jh)(this,function(f){switch(f.label){case 0:t=e.bucketExternalId,a=e.object,l=e.destinationFolder,c=e.onError,s=e.onSuccess,n(!0),u=l+a.name.split("/").pop(),r({bucketExternalId:t,name:a.name,isPendingDeletion:!0}),i({bucketExternalId:t,name:u,contentType:a.contentType,size:a.size}),f.label=1;case 1:return f.trys.push([1,4,,5]),[4,function(e){return fI.apply(this,arguments)}({destinationBucketExternalId:t,sourceBucketExternalId:t,sourceObjectName:a.name,destinationObjectName:u})];case 2:return f.sent(),[4,fR({bucketExternalId:t,objectName:a.name})];case 3:return f.sent(),o({bucketExternalId:t,name:a.name}),r({bucketExternalId:t,name:u,isOptimisticallyInserted:!1}),null==s||s(),[3,5];case 4:return d=f.sent(),null==c||c(d),r({bucketExternalId:t,name:a.name,isPendingDeletion:!1}),o({bucketExternalId:t,name:u}),[3,5];case 5:return n(!1),[2]}})})).apply(this,arguments)}return{loading:t,moveObject:function(e){return a.apply(this,arguments)}}}().moveObject,h=(0,ak.Z)().showConfirm,p=(n=(t={item:a,disableDrag:d,onDropOverFolder:function(e){return f({bucketExternalId:l,object:a,destinationFolder:e,onSuccess:function(){h('Moved "'.concat(a.name,'" to "').concat(e,'"'))},onError:s})}}).item,r=t.disableDrag,i=t.onDropOverFolder,{isDragging:(o=(0,P._)((0,hm.c)(function(){return{type:fy.FILE,canDrag:!r,item:function(){return{name:n.name,type:fy.FILE}},collect:function(e){return{isDragging:!!e.isDragging()}},end:function(e,t){var n=t.getDropResult();n&&n&&i(n.name)}}},[r]),2))[0].isDragging,drag:o[1]}),m=p.isDragging,v=p.drag;return(0,N.tZ)(hL,{item:a,ref:v,onDeleteClick:function(){return c(a)},icon:(0,N.tZ)(hz,{contentType:a.contentType}),timeCreatedCell:(0,N.tZ)(nB.EK,{date:a.timeCreated}),sizeCell:ur(Number(a.size),{isKib:!0,isKibNotation:!0}),style:(0,e5._)({},hR.rowOpacity,m?.5:void 0),additionalActionButtons:(0,N.tZ)(N.HY,{children:(0,N.tZ)(M.hU,{alt:"Download",css:hA.rowActionButton,children:(0,N.tZ)("a",{download:a.displayName,href:u,css:j.l0.color.foregroundDefault,children:(0,N.tZ)(V.Z,{})})})})})}var hG=(0,H.X)({row:[j.l0.position.relative,j.l0.borderRadius(4),{outline:hD.rowOutline,outlineOffset:-1,opacity:hD.rowOpacity,cursor:hD.rowCursor,":nth-of-type(even)":{background:"color-mix(in srgb, ".concat(j.TV.backgroundDefault," 60%, ").concat(j.TV.backgroundRoot,")")},":hover":{background:j.TV.backgroundHigher},":hover #action-buttons":{display:"flex"},":focus":{outline:"2px solid ".concat(j.TV.accentPrimaryDefault)}}],text:[j.l0.flex.shrink(1)]}),hA=(0,H.X)({row:[hG.row],pendingRow:[hG.row,j.l0.color.foregroundDimmest],tableData:[j.l0.p(4),{":first-of-type":{borderTopLeftRadius:4,borderBottomLeftRadius:4},":last-of-type, :nth-last-of-type(2)":{borderTopRightRadius:4,borderBottomRightRadius:4}}],objectIconAndName:[j.l0.rowWithGap(8),j.l0.align.center],text:hG.text,strikeThroughText:[hG.text,{textDecoration:"line-through"}],actionButtonTableData:[j.l0.position.relative],rowActionButtonGroup:[j.l0.px(4),j.l0.position.absolute,j.l0.right(0),j.l0.top(0),j.l0.bottom(0),j.l0.rowWithGap(4),j.l0.align.center,j.l0.backgroundColor.backgroundHigher,{display:"none",borderTopRightRadius:4,borderBottomRightRadius:4}],rowActionButton:[nR.gU.filled],loadingTableData:[j.l0.position.relative],loadingIconWrapper:[j.l0.position.absolute,j.l0.right(4),j.l0.top(0),j.l0.bottom(0),j.l0.justify.center],loadingIcon:[{borderRadius:"50%"},j.l0.backgroundColor.backgroundDefault]}),hP=function(){var e=(0,P._)((0,$.useState)(!1),2),t=e[0],n=e[1],r=(0,P._)((0,$.useState)(null),2),i=r[0],o=r[1];return(0,$.useEffect)(function(){if(null!==i){var e=function(){n(i.offsetWidth<i.scrollWidth||i.offsetHeight<i.scrollHeight)};e();var t=new ResizeObserver(e);return t.observe(i),function(){return t.disconnect()}}},[i]),{attachObserver:o,isOverflowing:t}},hL=$.forwardRef(function(e,t){var n=e.item,r=e.onDeleteClick,i=e.icon,o=e.timeCreatedCell,a=e.sizeCell,l=e.style,c=e.onClick,s=e.onKeyDown,u=e.additionalActionButtons,d=n.isPendingDeletion?hA.strikeThroughText:hA.text,f=n.optimisticallyInserted||n.isPendingDeletion,h=hP(),p=h.attachObserver,m=h.isOverflowing;return(0,N.BX)("tr",{ref:t,tabIndex:0,css:f?hA.pendingRow:hA.row,style:l,onClick:c,onKeyDown:s,children:[(0,N.tZ)("td",{css:hA.tableData,children:(0,N.tZ)(tB.u,{isDisabled:!m,tooltip:n.displayName,children:(0,N.BX)(W.G,{css:hA.objectIconAndName,children:[i,(0,N.tZ)(F.xv,{multiline:!0,maxLines:1,css:d,ref:p,children:n.displayName})]})})}),(0,N.tZ)("td",{css:hA.tableData,children:(0,N.tZ)(F.xv,{multiline:!0,maxLines:1,css:d,children:o})}),(0,N.tZ)("td",{css:hA.tableData,children:(0,N.tZ)(F.xv,{multiline:!0,maxLines:1,css:d,children:a})}),f?null:(0,N.tZ)("td",{css:hA.actionButtonTableData,children:(0,N.BX)(W.G,{css:hA.rowActionButtonGroup,id:"action-buttons",children:[u,(0,N.tZ)(M.hU,{onClick:r,alt:"Delete",css:hA.rowActionButton,children:(0,N.tZ)(sD.Z,{color:j.TV.accentNegativeDefault})})]})}),f?(0,N.tZ)("td",{css:hA.loadingTableData,children:(0,N.tZ)(W.G,{css:hA.loadingIconWrapper,children:(0,N.tZ)(z.Z,{size:24,css:hA.loadingIcon})})}):null]})}),hN=(0,ha.$)(["breadcrumbOutline","breadcrumbTextColor"]),hO=hN.cssVars,hU=hN.styleTokens,hM=(0,H.X)({wrapper:[j.l0.rowWithGap(2),j.l0.align.center,j.l0.pt(12),j.l0.pb(4)],breadcrumb:[{color:hU.breadcrumbTextColor,outline:hU.breadcrumbOutline}]}),hX=function(e){var t=e.split("/").filter(function(e){return""!==e}),n=t.map(function(e,n){return{folderName:e,path:t.slice(0,n+1).join("/")+"/"}});return[{folderName:"Objects",path:""}].concat((0,L._)(n))};function hF(e){var t=e.currentFolder,n=e.bucketExternalId,r=e.setCurrentFolder,i=e.onError,o=hX(t);return(0,N.tZ)(W.G,{css:hM.wrapper,children:o.map(function(e,t){var a=e.folderName,l=e.path,c=t===o.length-1;return(0,N.BX)($.Fragment,{children:[(0,N.tZ)(hW,{folderPath:l,folderName:a,bucketExternalId:n,onClick:function(){return r(l)},isLastBreadcrumb:c,onError:i}),c?null:(0,N.tZ)(F.xv,{color:"dimmest",children:"/"})]},l)})})}function hW(e){var t,n=e.folderPath,r=e.folderName,i=e.bucketExternalId,o=e.onClick,a=e.isLastBreadcrumb,l=e.onError,c=fX().uploadFiles,s=hy({folderPath:n,onDropNativeFiles:function(e){return c({bucketExternalId:i,files:e,targetFolder:n,onError:l})}}),u=s.isDraggedOver,d=s.drop;return(0,N.tZ)(ep.zx,{ref:d,text:r,variant:"nofill",onClick:o,iconLeft:(0,N.tZ)(hu.Z,{}),size:"small",disabled:a,style:(t={},(0,e5._)(t,hO.breadcrumbTextColor,a?j.TV.foregroundDefault:void 0),(0,e5._)(t,hO.breadcrumbOutline,u?hZ:void 0),t),css:hM.breadcrumb})}var hH=(0,H.X)({row:[j.l0.rowWithGap(8),j.l0.align.center],icon:[j.l0.height(24),j.l0.width(24),j.l0.center]});function hV(e){var t=e.onCreateFolder,n=e.onCanceled,r=(0,P._)((0,$.useState)(""),2),i=r[0],o=r[1],a=(0,ho.Z)(n,[]);return(0,N.tZ)("tr",{children:(0,N.tZ)("td",{colSpan:3,children:(0,N.BX)(W.G,{innerRef:a,css:hH.row,children:[(0,N.tZ)(W.G,{css:hH.icon,children:(0,N.tZ)(hu.Z,{})}),(0,N.tZ)(ef.II,{value:i,autoFocus:!0,onChange:function(e){return o(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(t(i),o("")),"Escape"===e.key&&n()},autoCapitalize:"off",autoComplete:"off",autoCorrect:"off"})]})})})}function hz(e){var t=e.contentType;return t?t.startsWith("image/")?(0,N.tZ)(hh.Z,{}):t.startsWith("video/")?(0,N.tZ)(hl.Z,{}):t.startsWith("audio/")?(0,N.tZ)(hp.Z,{}):(0,N.tZ)(hc.Z,{}):(0,N.tZ)(hc.Z,{})}function hj(e){var t,n=e.bucketExternalId,r=e.requestedDeleteItem,i=e.onRequestClose,o=e.onError,a=function(){var e=(0,P._)((0,$.useState)(!1),2),t=e[0],n=e[1],r=(0,ny.b9)(fP),i=(0,ny.b9)(fL);function o(){return(o=(0,tP._)(function(e){var t,o,a,l;return(0,tL.Jh)(this,function(c){switch(c.label){case 0:t=e.bucketExternalId,o=e.objectName,a=e.onError,n(!0),r({bucketExternalId:t,name:o,isPendingDeletion:!0}),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,fR({bucketExternalId:t,objectName:o})];case 2:return c.sent(),i({bucketExternalId:t,name:o}),[3,4];case 3:return l=c.sent(),null==a||a(l),r({bucketExternalId:t,name:o,isPendingDeletion:!1}),[3,4];case 4:return n(!1),[2]}})})).apply(this,arguments)}return{loading:t,deleteObject:function(e){return o.apply(this,arguments)}}}().deleteObject,l=function(){var e=(0,P._)((0,$.useState)(!1),2),t=e[0],n=e[1],r=(0,ny.b9)(fP),i=(0,ny.b9)(fL),o=(0,ny.Dv)(fB);function a(){return(a=(0,tP._)(function(e){var t,a,l,c,s,u;return(0,tL.Jh)(this,function(d){switch(d.label){case 0:t=e.bucketExternalId,a=e.folderPath,l=e.onError,n(!0),s=(null!==(c=o.get(t))&&void 0!==c?c:[]).filter(function(e){return e.name.startsWith(a)}),d.label=1;case 1:var f;return d.trys.push([1,3,,4]),[4,Promise.all(s.map((f=(0,tP._)(function(e){return(0,tL.Jh)(this,function(n){switch(n.label){case 0:r({bucketExternalId:t,name:e.name,isPendingDeletion:!0}),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,fR({bucketExternalId:t,objectName:e.name})];case 2:return n.sent(),i({bucketExternalId:t,name:e.name}),[3,4];case 3:return n.sent(),r({bucketExternalId:t,name:e.name,isPendingDeletion:!1}),[3,4];case 4:return[2]}})}),function(e){return f.apply(this,arguments)})))];case 2:return d.sent(),[3,4];case 3:return u=d.sent(),null==l||l(u),[3,4];case 4:return n(!1),[2]}})})).apply(this,arguments)}return{loading:t,deleteFolder:function(e){return a.apply(this,arguments)}}}().deleteFolder,c=(t=(0,tP._)(function(){return(0,tL.Jh)(this,function(e){switch(e.label){case 0:if(!(null==r?void 0:r.isFolder))return[3,2];return[4,l({bucketExternalId:n,folderPath:r.name,onError:o})];case 1:return e.sent(),i(),[2];case 2:if(!r)return[3,4];return[4,a({bucketExternalId:n,objectName:r.name,onError:o})];case 3:e.sent(),i(),e.label=4;case 4:return[2]}})}),function(){return t.apply(this,arguments)});return(0,N.tZ)(rX.u,{isOpen:!!r,onRequestClose:i,children:r?(0,N.tZ)(hi.Z,{name:r.displayName,description:'"'.concat(r.displayName,'" ').concat(r.isFolder?" and all its contents":""),entityType:r.isFolder?"folder":"file",hideModal:i,delete:c}):null})}var hq=(0,H.X)({wrapper:[j.l0.center,j.l0.colWithGap(16),j.l0.flex.grow(1),j.l0.justify.center,j.l0.borderRadius(4),{outline:hS.bodyOutline}],textWrapper:[j.l0.center,j.l0.colWithGap(4)],text:[j.l0.center],textRow:[j.l0.rowWithGap(4),j.l0.align.center],textButton:[j.l0.color.accentPrimaryStronger]});function hJ(e){var t=e.onOpenCommandsTab;return(0,N.tZ)(W.G,{css:hq.wrapper,style:(0,e5._)({},h_.bodyOutline,"1px dashed ".concat(j.TV.outlineDefault)),children:(0,N.BX)(W.G,{css:hq.textWrapper,children:[(0,N.tZ)(F.xv,{variant:"subheadBig",children:"No objects"}),(0,N.BX)(W.G,{css:hq.text,children:[(0,N.tZ)(F.xv,{children:"Drag and drop or click to upload,"}),(0,N.BX)(W.G,{css:hq.textRow,children:[(0,N.tZ)(F.xv,{children:"or"}),(0,N.tZ)(ep.zx,{variant:"underlinedOnHover",colorway:"primary",onClick:t,text:"upload using commands",css:hq.textButton})]})]})]})})}function hY(){var e=(0,ej._)(["\n  mutation ObjectStorageSettingsDeleteBucket($input: DeleteBucketInput!) {\n    deleteBucket(input: $input) {\n      ... on Bucket {\n        id\n      }\n      ... on Error {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return hY=function(){return e},e}var h$={},hK=(0,eq.Ps)(hY()),hQ=(0,H.X)({wrapper:[j.l0.colWithGap(32)],section:[j.l0.colWithGap(6)]});function h0(e){var t,n=e.bucketId,r=e.bucketExternalId,i=e.onSettingsUpdate,o=e.onError,a=(0,P._)((0,$.useState)(!1),2),l=a[0],c=a[1],s=function(){return c(!1)},u=(0,P._)((t=(0,es._)({},h$,void 0),a4.D(hK,t)),2),d=u[0],f=u[1].loading,h=(0,ak.Z)().showConfirm;return(0,N.BX)(N.HY,{children:[(0,N.BX)(W.G,{css:hQ.wrapper,children:[(0,N.BX)(W.G,{css:hQ.section,children:[(0,N.tZ)(F.xv,{variant:"subheadDefault",children:"Bucket ID"}),(0,N.tZ)(sR.ZP,{children:"```\n".concat(r)})]}),(0,N.BX)(W.G,{css:hQ.section,children:[(0,N.tZ)(ep.zx,{text:f?"Deleting…":"Delete bucket",loading:f,iconLeft:(0,N.tZ)(sD.Z,{color:j.TV.accentNegativeStronger}),css:j.l0.color.accentNegativeStronger,onClick:function(){return c(!0)}}),(0,N.tZ)(F.xv,{color:"dimmest",children:"You cannot undo this action"})]})]}),(0,N.tZ)(rX.u,{isOpen:l,onRequestClose:s,children:(0,N.tZ)(hi.Z,{name:"bucket",description:"this bucket and all its contents",entityType:"bucket",hideModal:s,delete:function(){return d({variables:{input:{bucketId:n}},onError:o,onCompleted:function(e){"Bucket"===e.deleteBucket.__typename?(i({type:"deleteBucket",data:{bucketId:n}}),h("Bucket deleted")):o(Error("Failed to delete bucket: "+e.deleteBucket.message))}})}})})]})}var h1=n(53157),h2=n(63548),h4=[{icon:(0,N.tZ)(fd.Z,{}),title:"Objects",value:"objects"},{icon:(0,N.tZ)(al.Z,{}),title:"Commands",value:"commands"},{icon:(0,N.tZ)(rt.Z,{}),title:"Settings",value:"settings"}],h3=(0,H.X)({bucketSelector:[j.l0.flex.row,j.l0.flex.shrink(1),j.l0.p(16)],controls:[j.l0.align.center,j.l0.flex.row,j.l0.px(8),j.l0.py(4)],controlSeparator:[j.l0.color.outlineDefault,j.l0.px(8)],errorWrapper:[j.l0.p(16)],loadingWrapper:[j.l0.center,j.l0.p(24)],wrapper:[j.l0.flex.column,j.l0.flex.grow(1)],tabList:[j.l0.px(12),j.l0.py(4),j.l0.flex.grow(0)],tabPanels:[j.l0.flex.column,j.l0.px(8),j.l0.py(12),j.l0.flex.grow(1)],objectTabPanel:[j.l0.flex.column,j.l0.flex.grow(1)],panels:[j.l0.flex.column,j.l0.px(8),j.l0.py(12),j.l0.flex.grow(1)]});function h8(){var e,t,n,r,i,o=(0,nm.P5)({controlName:h2.Cd,default:!1,type:"boolean",logFlagToAnalytics:!1}),a=(0,P._)((0,$.useState)(),2),l=a[0],c=a[1],s=(0,P._)((0,$.useState)("objects"),2),u=s[0],d=s[1],f=(0,P._)((0,$.useState)(0),2),h=f[0],p=f[1],m=fU({bucketExternalId:null!==(r=null==l?void 0:l.externalId)&&void 0!==r?r:""}),v=fM(),g=v.fetchObjects,y=v.loading,b=(0,q.Z)().dotReplit,w=(0,ak.Z)().showError,Z=function(e){var t;w(e.message),tO.$e(function(n){n.setTag("object-storage-pane",!0),t&&n.setExtras(t),tO.Tb(e)})},x=(e={variables:{replId:(0,ez.Z)()},fetchPolicy:"network-only",ssr:!1,onCompleted:function(e){if("Repl"!==e.repl.__typename){w("Failed to fetch bucket data");return}if(e.repl.defaultBucket){if("Bucket"!==e.repl.defaultBucket.__typename){Z(Error(e.repl.defaultBucket.message));return}var t=e.repl.defaultBucket;c(t),g({bucketExternalId:t.externalId,onError:Z})}}},t=(0,es._)({},fH,e),eJ.a(fz,t)),C=x.data,_=x.loading,S=x.error,k=x.refetch,E=(null==C?void 0:C.repl.__typename)==="Repl"?C.repl.authorizations.createObjectBucket:void 0;if(S)return(0,N.tZ)(W.G,{css:h3.errorWrapper,children:(0,N.tZ)(rF.E,{text:'Error: "'.concat(S.message,'". The issue has been logged and the Replit team will look into it.'),colorway:"negative"})});if(_||y&&!m.length)return(0,N.tZ)(W.G,{css:h3.loadingWrapper,children:(0,N.tZ)(z.Z,{})});if(!l)return(0,N.tZ)(hr,{createBucketAuthz:E,refetchAuthzQueryData:k,onBucketCreated:(n=(0,tP._)(function(e){return(0,tL.Jh)(this,function(t){switch(t.label){case 0:return c(e),[4,b.updateDotReplit([(0,h1.pp)(e.externalId)])];case 1:return t.sent(),[2]}})}),function(e){return n.apply(this,arguments)}),onError:Z});if(o){switch(u){case"objects":i=(0,N.tZ)(W.G,{css:h3.objectTabPanel,children:(0,N.tZ)(ff.Z,{children:(0,N.tZ)(hE,{bucketExternalId:l.externalId,onOpenCommandsTab:function(){p(h4.findIndex(function(e){return"commands"===e.value}))},onError:Z})})});break;case"commands":i=(0,N.tZ)(W.G,{children:(0,N.tZ)(f4,{onError:Z})});break;case"settings":i=(0,N.tZ)(W.G,{children:(0,N.tZ)(h0,{bucketId:l.id,bucketExternalId:l.externalId,onSettingsUpdate:function(e){"deleteBucket"===e.type&&c(void 0)},onError:Z})})}return(0,N.BX)(N.HY,{children:[(0,N.BX)(W.G,{css:h3.controls,children:[(0,N.tZ)(h6,{}),(0,N.tZ)(F.xv,{css:h3.controlSeparator,variant:"small",children:"/"}),(0,N.tZ)(h5,{onSelect:d})]}),(0,N.tZ)(nT.R,{}),(0,N.tZ)(W.G,{css:h3.panels,children:i})]})}return(0,N.BX)(fp.mQ,{css:h3.wrapper,selectedIndex:h,onSelectionChange:function(e){return p(e)},children:[(0,N.tZ)(fp.td,{withDividers:!1,css:h3.tabList,children:h4.map(function(e){return(0,N.tZ)(fp.OK,{iconLeft:e.icon,children:e.title},e.value)})}),(0,N.BX)(fp.nP,{css:h3.tabPanels,children:[(0,N.tZ)(fp.x4,{css:h3.objectTabPanel,children:(0,N.tZ)(ff.Z,{children:(0,N.tZ)(hE,{bucketExternalId:l.externalId,onOpenCommandsTab:function(){p(h4.findIndex(function(e){return"commands"===e.value}))},onError:Z})})}),(0,N.tZ)(fp.x4,{children:(0,N.tZ)(f4,{onError:Z})}),(0,N.tZ)(fp.x4,{children:(0,N.tZ)(h0,{bucketId:l.id,bucketExternalId:l.externalId,onSettingsUpdate:function(e){"deleteBucket"===e.type&&c(void 0)},onError:Z})})]})]})}function h6(e){var t=e.onSelect,n=(0,P._)((0,$.useState)([{__typename:"Bucket",id:"bucket1",externalId:"bucket1",name:"Bucket 1"},{__typename:"Bucket",id:"bucket2",externalId:"bucket2",name:"Bucket 2"}]),1)[0],r=(0,P._)((0,$.useState)(n[0]),2),i=r[0],o=r[1];return(0,N.tZ)(W.G,{children:(0,N.BX)(fh.ZE,{label:i.name,items:n,trigger:(0,N.tZ)(ep.zx,{size:"default",variant:"nofill",text:i.name,iconRight:(0,N.tZ)(tv.Z,{size:12})}),children:[n.map(function(e){return(0,N.tZ)(fh.sN,{icon:(0,N.tZ)(rZ.Z,{visibility:e.id===i.id?"visible":"hidden"}),id:e.id,label:e.name,onAction:function(){o(e),t&&t(e)}},e.id)}),(0,N.tZ)(fh.Z0,{}),(0,N.tZ)(fh.sN,{icon:(0,N.tZ)(nG.Z,{}),id:"create-new",label:"Create new bucket"},"create-new")]})})}function h5(e){var t=e.onSelect,n=(0,P._)((0,$.useState)(h4[0]),2),r=n[0],i=n[1];return(0,N.tZ)(W.G,{children:(0,N.tZ)(fh.ZE,{onAction:function(e){var n=h4.find(function(t){return t.value===e});n&&(i(n),t&&t(n.value))},label:r.title,items:h4,trigger:(0,N.tZ)(ep.zx,{size:"default",variant:"nofill",text:r.title,iconLeft:r.icon,iconRight:(0,N.tZ)(tv.Z,{size:12})}),children:function(e){return(0,N.tZ)(fh.sN,{icon:e.icon,id:e.value,label:e.title},e.value)}})})}var h7=O.Dy.Object({type:O.Dy.Literal("objectStorage")}),h9={Content:function(){return(0,N.tZ)(h8,{})},Icon:function(e){var t=e.size;return(0,N.tZ)(e4.Pd.Provider,{value:{color:e3.TV.tealStrongest,size:t},children:(0,N.tZ)(fd.Z,{})})},getTitle:function(){return"Object Storage"},description:"Persistent, shared file storage which can be accessed programmatically in your Repl",decode:function(e){return U.B4.Decode(h7,e)}},pe=n(86596),pt=n(36474),pn=n(9142),pr=new Map;function pi(e){var t,n=(0,pt.ZR)(),r=(0,q.Z)(),i=(0,P._)((0,$.useState)(null!==(t=pr.get("".concat(null==n?void 0:n.id,":").concat(e.name)))&&void 0!==t?t:null),2),o=i[0],a=i[1];return(0,$.useEffect)(function(){if((null==n?void 0:n.id)&&e.name){var t,i=e.name;if(!pr.has(i)){var o=(0,pn.C)(n.id),l=!1;return(t=(0,tP._)(function(){var e;return(0,tL.Jh)(this,function(t){switch(t.label){case 0:return[4,o.getPackageInfo({id:n.id,name:i,services:r})];case 1:if((e=t.sent())&&"string"!=typeof(null==e?void 0:e.homepageURL)&&delete e.homepageURL,l)return[2];return pr.set("".concat(n.id,":").concat(i),null!=e?e:null),a(null!=e?e:null),[2]}})}),function(){return t.apply(this,arguments)})(),function(){l=!0}}}},[null==n?void 0:n.id,e.name]),o}var po=n(4911);function pa(e){var t,n,r=e.pkg,i=e.openConsole,o=pi(r),a=o?(0,eu._)((0,es._)({},o),{version:null!==(t=r.spec)&&void 0!==t?t:o.version}):r;return(0,N.tZ)(po.Z,{name:null!==(n=null==o?void 0:o.prettyName)&&void 0!==n?n:void 0,pkg:a,isMetadataLoading:null===o,openConsole:i})}function pl(e){return(0,N.tZ)("a",(0,es._)({href:"https://docs.replit.com/replit-workspace/installing-packages",target:"_blank",rel:"noreferrer"},e))}var pc=(0,H.X)({root:[j.l0.colWithGap(8),{"@container (min-width: 600px)":[j.l0.colWithGap(0),j.l0.align.start,{display:"grid",gridTemplate:"auto / 1fr 1fr",gap:j.TV.space8}],"@container (min-width: 1200px)":[{display:"grid",gridTemplate:"auto / 1fr 1fr 1fr",gap:j.TV.space8}]}]});function ps(e){return(0,N.tZ)(W.G,(0,eu._)((0,es._)({},e),{css:pc.root}))}function pu(e){var t=e.name,n=e.openConsole,r=pi({name:t});return(0,N.tZ)(po.Z,{pkg:null!=r?r:{name:t},isMetadataLoading:null===r,openConsole:n,pills:[(0,N.tZ)(rV.D,{text:"Suggested",colorway:"primary"},"suggested")]})}var pd=(0,H.X)({packages:[j.l0.pt(8)],separator:[j.l0.backgroundColor.backgroundHigher,j.l0.height(1),j.l0.borderRadius(1),j.l0.mt(6),{border:"none",marginLeft:"auto",marginRight:"auto",width:"95%"}]});function pf(e){var t=e.openConsole,n=(0,pt.ZR)(),r=(0,fQ.te)(null==n?void 0:n.id),i=(0,fQ.B2)(),o=(0,fQ.cW)(),a=[];switch(null==n?void 0:n.language){default:return null;case"nodejs":a=["express","discord.js","axios","moment","node-fetch","chalk"];break;case"python3":a=["replit","requests","pandas","discord","matplotlib","flask"]}var l=function(e){if(r.find(function(t){var n;return(null===(n=t.name)||void 0===n?void 0:n.toLowerCase())===e})||(i&&i.kind===fQ.TH.Install?i.pkgs.find(function(t){var n;return(null===(n=t.name)||void 0===n?void 0:n.toLowerCase())===e}):null))return!0;var t=!0,n=!1,a=void 0;try{for(var l,c=o[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var s=l.value;if(s.kind===fQ.TH.Install&&s.pkgs.find(function(t){var n;return(null===(n=t.name)||void 0===n?void 0:n.toLowerCase())===e}))return!0}}catch(e){n=!0,a=e}finally{try{t||null==c.return||c.return()}finally{if(n)throw a}}return!1},c=a.filter(function(e){return!l(e)}).map(function(e){return(0,N.tZ)(pu,{name:e,openConsole:t},e)});return c.length>0?(0,N.BX)(N.HY,{children:[(0,N.tZ)("hr",{css:pd.separator}),(0,N.tZ)(ps,{css:pd.packages,children:c})]}):null}var ph=(0,H.X)({root:[j.l0.maxWidth(800),j.l0.width("100%"),{marginLeft:"auto",marginRight:"auto","@container (min-width: 1200px)":[j.l0.maxWidth(1400)]}],header:[j.l0.flex.row,j.l0.justify.spaceBetween,j.l0.py(4)],headerLeft:[j.l0.rowWithGap(4),j.l0.align.center],headerLoadingIcon:[j.l0.px(4)],headerRight:[j.l0.rowWithGap(4)],headerTitle:[{textTransform:"capitalize"}],packages:[j.l0.pt(8)],empty:[j.l0.pt(8),j.l0.colWithGap(8),j.l0.width("100%")],packagesWrapper:[j.l0.colWithGap(8),j.l0.width("100%")]});function pp(e){var t=e.openFile,n=e.openConsole,r=(0,pt.ZR)(),i=(0,fQ.te)(null==r?void 0:r.id),o=(0,fQ.$z)(null==r?void 0:r.id),a=(0,fQ.cW)(),l=(0,fQ.B2)(),c=(0,P._)((0,$.useState)(!0),2),s=c[0],u=c[1];if(null===r)return null;if(!o||o===fQ.C0.Uninitialized||o===fQ.C0.Initializing)return(0,N.tZ)(W.G,{css:ph.root,children:(0,N.BX)(W.G,{css:ph.header,children:[(0,N.BX)(W.G,{css:ph.headerLeft,children:[(0,N.tZ)(tB.u,{tooltip:"Loading",children:(0,N.tZ)(W.G,{css:ph.headerLoadingIcon,children:(0,N.tZ)(z.Z,{})})}),(0,N.BX)(F.h4,{css:ph.headerTitle,variant:"subheadDefault",level:2,children:[r.language," Packages"]})]}),(0,N.tZ)(W.G,{css:ph.headerRight,children:r.packagerFiles.length>0?(0,N.tZ)(M.hU,{alt:"Open ".concat(r.packagerFiles[0]),onClick:function(){r&&t(r.packagerFiles[0])},children:(0,N.tZ)(hc.Z,{})}):null})]})});var d=l&&l.id===r.id&&l.kind===fQ.TH.Install?l.pkgs:[],f=a.flatMap(function(e){return e.id===r.id&&e.kind===fQ.TH.Install?e.pkgs:[]}),h=(0,L._)(d).concat((0,L._)(f),(0,L._)(i));return(0,N.BX)(W.G,{css:ph.root,children:[(0,N.BX)(W.G,{css:ph.header,children:[(0,N.BX)(W.G,{css:ph.headerLeft,children:[h.length>0?(0,N.tZ)(M.hU,{alt:"Show packages",tooltipBehavior:"hidden",onClick:function(){return u(function(e){return!e})},children:(0,N.tZ)(l9.Z,{rotate:s?90:0})}):null,(0,N.BX)(F.h4,{css:ph.headerTitle,variant:"subheadDefault",level:2,children:[r.language," Packages"]})]}),(0,N.tZ)(W.G,{css:ph.headerRight,children:0===h.length?(0,N.tZ)(F.h4,{level:3,children:"No Packages Installed."}):(0,N.BX)(N.HY,{children:[(0,N.BX)(F.h4,{level:3,children:["Installed ",h.length," ",(0,eM.Z)("package",h.length)]}),r.packagerFiles.length>0?(0,N.tZ)(M.hU,{alt:"Open ".concat(r.packagerFiles[0]),onClick:function(){r&&t(r.packagerFiles[0])},children:(0,N.tZ)(hc.Z,{})}):null]})})]}),s?(0,N.BX)(W.G,{css:0===h.length?ph.empty:ph.packagesWrapper,children:[0===h.length?(0,N.BX)(F.xv,{children:["You don't have any packages installed."," ",r.packageSearch?(0,N.BX)(N.HY,{children:["Try searching for a package to install, or"," ",(0,N.tZ)(pl,{children:"learn more about packages here"}),"","."]}):(0,N.BX)(F.xv,{children:[(0,N.tZ)(pl,{children:"Learn more about packages here"}),"","."]})]}):null,h.length>0?(0,N.tZ)(N.HY,{children:(0,N.tZ)(ps,{css:ph.packages,children:h.sort(function(e,t){return(null==e?void 0:e.name)?(null==t?void 0:t.name)?e.name.localeCompare(t.name):-1:1}).map(function(e){return(0,N.tZ)(pa,{pkg:e,openConsole:n},e.name)})})}):null,(0,N.tZ)(pf,{openConsole:n})]}):null]})}var pm=n(12945),pv=n(15661);function pg(e){var t=e.onResults,n=e.onLoading,r=e.className,i=e.searchOpts,o=e.onQueryChange,a=(0,pt.ZR)(),l=(0,P._)((0,$.useState)(""),2),c=l[0],s=l[1];(0,$.useEffect)(function(){return null==o?void 0:o(c)},[c,o]);var u=(0,$.useRef)(0),d=function(){u.current++,null==t||t(null),null==n||n(!1)},f=(0,pv.Z)();(0,pm.Z)(function(){if(""!==c.trim()){var e,r=++u.current;(e=(0,tP._)(function(){var e;return(0,tL.Jh)(this,function(o){switch(o.label){case 0:return null==n||n(!0),[4,f(c,i)];case 1:if(e=o.sent(),r!==u.current)return[2];return null==t||t(null!=e?e:[]),null==n||n(!1),[2]}})}),function(){return e.apply(this,arguments)})()}},[c,i],500);var h=(0,$.useRef)(null);return(0,$.useEffect)(function(){h.current&&h.current.focus()},[]),(0,N.tZ)(W.G,{className:r,children:(0,N.tZ)(nI.E,{inputRef:h,value:c,onChange:function(e){""===e.target.value.trim()&&d(),s(e.target.value)},onClear:function(){s(""),d()},placeholder:a?"Search ".concat(a.language," packages"):void 0})})}var py=(0,H.X)({root:[j.l0.maxWidth(800),j.l0.width("100%"),{marginLeft:"auto",marginRight:"auto","@container (min-width: 1200px)":[j.l0.maxWidth(1400)]}],skeleton:[j.l0.borderRadius(8),j.l0.p(8),eX.p.backgroundPulse(),j.l0.height(128)]});function pb(){return(0,N.tZ)(W.G,{css:py.root,children:(0,N.tZ)(ps,{children:Array.from({length:3},function(e,t){return(0,N.tZ)(em.Tg,{css:py.skeleton,elevated:!0},"SearchLoading-".concat(t))})})})}var pw=n(93939),pZ=(0,H.X)({root:[j.l0.colWithGap(8),j.l0.maxWidth(800),j.l0.width("100%"),{marginLeft:"auto",marginRight:"auto","@container (min-width: 1200px)":[j.l0.maxWidth(1400)]}],results:[j.l0.colWithGap(8)],empty:[j.l0.flex.row,j.l0.justify.center]});function px(e){var t=e.results,n=e.openConsole;return(0,N.tZ)(W.G,{css:pZ.root,children:(0,N.tZ)(W.G,{css:pZ.results,children:0===t.length?(0,N.tZ)(F.xv,{color:"dimmer",css:pZ.empty,children:"No Packages Found"}):(0,N.tZ)(ps,{children:t.map(function(e){return(0,N.tZ)(pw.Z,{pkg:e,openConsole:n},e.name)})})})})}var pC=n(98250),p_=(0,H.X)({root:[j.l0.p(8),j.l0.borderRadius(8),j.l0.colWithGap(16)],header:[j.l0.flex.row,j.l0.align.center,j.l0.justify.spaceBetween],headerLeft:[j.l0.rowWithGap(4),j.l0.align.center],headerRight:[],content:[j.l0.display.block]});function pS(e){var t=e.title,n=e.onClose,r=e.children,i=(0,P._)((0,$.useState)(!0),2),o=i[0],a=i[1];return(0,N.BX)(em.Tg,{elevated:!0,css:p_.root,children:[(0,N.BX)(W.G,{css:p_.header,children:[(0,N.BX)(W.G,{css:p_.headerLeft,children:[(0,N.tZ)(F.h4,{level:2,variant:"subheadDefault",children:t}),(0,N.tZ)(M.hU,{alt:o?"Minimize tip information":"Expand tip information",tooltipBehavior:"hidden",onClick:function(){return a(function(e){return!e})},children:(0,N.tZ)(l9.Z,{rotate:o?90:0})})]}),(0,N.tZ)(W.G,{css:p_.headerRight,children:(0,N.tZ)(M.hU,{alt:"Dismiss tip",tooltipBehavior:"hidden",onClick:n,children:(0,N.tZ)(rg.Z,{})})})]}),o?(0,N.tZ)(W.G,{css:p_.content,children:r}):null]})}var pk=(0,H.X)({root:[j.l0.colWithGap(8),j.l0.pb(24)]});function pE(){var e=(0,pC.Z)("packager","show_packager_about_tooltip"),t=(0,pC.Z)("packager","show_packager_import_tooltip");return((0,$.useEffect)(function(){e.register()},[e]),(0,$.useEffect)(function(){t.register()},[t]),e.shouldDisplay||t.shouldDisplay)?(0,N.BX)(W.G,{css:pk.root,children:[e.shouldDisplay?(0,N.BX)(pS,{title:"What are packages?",onClose:e.dismiss,children:["Packages are collections of code that can extend the functionality of your programs. For example, you could add a package to make adding image carousels easier on websites, or a package to manage currency comparisons."," ",(0,N.tZ)(pl,{children:"Learn more about packages"}),"","."]}):null,t.shouldDisplay?(0,N.tZ)(pS,{title:"Tip—Auto Import",onClose:t.dismiss,children:"If you know which packages you want to use, you can just import and use them in your files as if they were already installed, and they will be installed automatically the next time you run the Repl."}):null]}):null}var pT=n(69764),pR=(0,H.X)({root:[j.l0.pt(16),j.l0.p(8),{containerType:"inline-size"}],loading:[j.l0.center,j.l0.p(8),j.l0.height("100%")],center:[j.l0.width("100%"),j.l0.maxWidth(600),j.l0.colWithGap(4),{marginLeft:"auto",marginRight:"auto","@container (min-width: 400px)":[j.l0.maxWidth(800)],"@container (min-width: 1200px)":[j.l0.maxWidth(1400)]}],title:[],content:[j.l0.pt(8),j.l0.colWithGap(16)],search:[j.l0.rowWithGap(8),j.l0.width("100%")],searchInput:[j.l0.flex.grow(1)],configSelect:[],packages:[j.l0.colWithGap(16)]});function pD(e){var t,n,r,i,o,a=e.openFile,l=e.openConsole,c=(0,fK.I)(),s=c.configs,u=c.loading,d=(0,ec.Z)(function(){return s.filter(function(e){return"nix"!==e.id})},[s]),f=(0,P._)((t=(0,fK.I)().configs,n=(0,ec.Z)(function(){return t.filter(function(e){return"nix"!==e.id})},[t]),i=(r=(0,P._)((0,$.useState)(null),2))[0],o=r[1],(0,$.useEffect)(function(){n.length>0&&(null==i||!n.find(function(e){return e&&e.id===i.id}))&&o(n[0])},[i,n]),[i,o]),2),h=f[0],p=f[1],m=(0,P._)((0,$.useState)(null),2),v=m[0],g=m[1],y=(0,P._)((0,$.useState)(!1),2),b=y[0],w=y[1],Z=null;return(Z=null!==v?(0,N.tZ)(px,{results:v,openConsole:l}):b?(0,N.tZ)(pb,{}):(0,N.tZ)(N.HY,{children:d.map(function(e){return e.id===(null==h?void 0:h.id)?(0,N.tZ)(pp,{openFile:a,openConsole:l},e.id):(0,N.tZ)(pT.Z,{config:e,children:(0,N.tZ)(pp,{openFile:a,openConsole:l})},e.id)})}),u)?(0,N.tZ)(W.G,{css:pR.loading,children:(0,N.tZ)(z.Z,{})}):(0,N.tZ)(W.G,{css:pR.root,children:(0,N.tZ)(W.G,{css:pR.center,children:0===d.length?(0,N.BX)(W.G,{children:[(0,N.tZ)(F.h4,{level:2,variant:"subheadBig",children:"Sorry, packages are not configured for this Repl."}),(0,N.tZ)(F.xv,{variant:"subheadDefault",children:"We are working on making more features configurable and packages available for more languages, check back again in the future."})]}):(0,N.BX)(N.HY,{children:[(0,N.tZ)(pE,{}),(0,N.tZ)(F.h4,{css:pR.title,level:2,variant:"subheadBig",children:"Packages"}),(0,N.tZ)(W.G,{css:pR.content,children:(0,N.BX)(pT.Z,{config:h,children:[(0,N.BX)(W.G,{css:pR.search,children:[(null==h?void 0:h.packageSearch)?(0,N.tZ)(pg,{css:pR.searchInput,onResults:g,onLoading:w}):(0,N.tZ)(W.G,{css:pR.searchInput}),d.length>1&&(0,N.tZ)(f$.P,{css:pR.configSelect,items:d,selectedItem:h,onChange:function(e){return p(e)},"aria-label":"Select packager configuration"})]}),(0,N.tZ)(W.G,{css:pR.packages,children:Z})]})})]})})})}var pI=O.Dy.Object({type:O.Dy.Literal("packager")}),pB={Content:function(e){var t=e.options;return(0,N.tZ)(pD,{openFile:function(e){return t.performPaneOperation({operation:"open",pane:(0,J.$E)(e),secondary:!0})},openConsole:function(){t.performPaneOperation({operation:"open",pane:{type:"runnerOutput"},secondary:!0})}})},Icon:function(e){var t=e.size;return(0,N.tZ)(e4.Pd.Provider,{value:{color:e3.TV.purpleStrongest,size:t},children:(0,N.tZ)(pe.Z,{})})},getTitle:function(){return"Packages"},decode:function(e){return U.B4.Decode(pI,e)}},pG=n(76575),pA=n(32681),pP=n.n(pA),pL=n(68568),pN=n(79760),pO=(0,H.X)({create:[j.l0.colWithGap(8),j.l0.p(8)],pedit:{width:"100%",height:"100%"},canvas:{width:"100%",height:"100%",outline:"none",position:"absolute",top:0,left:0},upgradeButton:[j.l0.position.absolute,j.l0.top(8),j.l0.left("50%"),{transform:"translateX(-50%)"}]});function pU(e){var t=e.data,n=e.onSave,r=(0,$.useRef)(null),i=(0,$.useRef)(null),o=(0,q.Z)().fs,a=(0,ak.Z)(),l=a.showError,c=a.showConfirm,s=(0,P._)((0,$.useState)(!1),2),u=s[0],d=s[1],f=(0,c4.Z)(function(){var e=r.current;if(!e)return null;e.width=e.offsetWidth,e.height=e.offsetHeight;var t=e.getContext("2d");t&&(t.imageSmoothingEnabled=!1)},{type:"debounce",wait:100});return(0,$.useEffect)(function(){var e=r.current;if(e){e.width=e.offsetWidth,e.height=e.offsetHeight;var o=pP()({canvas:e,data:t}),a=function(){return n(o.save())};return o.on("change",a),o.on("save",a),o.on("export",function(){return d(!0)}),i.current=o,e.focus(),function(){o&&o.cleanUp(),i.current&&(i.current=null)}}},[t,n,r]),(0,N.BX)(N.HY,{children:[(0,N.tZ)("canvas",{css:pO.canvas,ref:function(e){r.current=e,f(e)},tabIndex:0}),(0,N.tZ)(rX.u,{isOpen:u,onRequestClose:function(){return d(!1)},children:(0,N.tZ)(pL.Z,{prompt:"Export",desc:"What name to give to the exported file?",placeholder:"filename",type:"text",onCancel:function(){return d(!1)},onConfirm:function(e){if(!i.current){d(!1);return}var t="".concat(e,".png"),n=i.current.curFrame().toPNG();o.writeFile(t,t3.Z.from(n)).then(function(e){if(e.error){l("Failed to write to file ".concat(t));return}c("Successfully exported to ".concat(t)),d(!1)})}})})]})}function pM(e){var t,n=e.activeFile,r=(0,q.Z)().fs,i=(0,P._)((0,$.useState)(!0),2),o=i[0],a=i[1],l=(0,P._)((0,$.useState)(null),2),c=l[0],s=l[1],u=(0,ak.Z)().showError,d=n.endsWith(".kbmsprite");(0,$.useEffect)(function(){var e=!1;function t(){return(t=(0,tP._)(function(){var t,i,o;return(0,tL.Jh)(this,function(l){switch(l.label){case 0:return[4,r.readFile(n)];case 1:if(t=l.sent(),a(!1),e)return[2];if(t.error)return u("failed to read ".concat(n)),[2];return o=(i=t.content.toString())&&JSON.parse(i),s(d?(0,pN.C)(o):o),[2]}})})).apply(this,arguments)}return!function(){t.apply(this,arguments)}(),function(){e=!0}},[r,n,u,d]);var f=(0,$.useCallback)((t=(0,tP._)(function(e){return(0,tL.Jh)(this,function(t){switch(t.label){case 0:if(!d)return[3,2];return[4,(0,pN.u)(e)];case 1:e=t.sent(),t.label=2;case 2:return[4,r.writeFile(n,t3.Z.from(JSON.stringify(e)))];case 3:return t.sent().error&&u("Failed to save ".concat(n,", please try again")),[2]}})}),function(e){return t.apply(this,arguments)}),[r,n,u,d]);return o?(0,N.tZ)(z.Z,{}):c?(0,N.tZ)(pU,{data:c,onSave:f}):(0,N.tZ)(pX,{onCreate:function(e){return s(e)}})}function pX(e){var t=e.onCreate,n=(0,P._)((0,$.useState)(""),2),r=n[0],i=n[1],o=(0,P._)((0,$.useState)(""),2),a=o[0],l=o[1],c=Number(r),s=Number(a);return(0,N.BX)(W.G,{css:pO.create,children:[(0,N.tZ)(F.xv,{variant:"subheadDefault",multiline:!1,children:"Create a Pedit file"}),(0,N.tZ)(ef.II,{placeholder:"width",value:r,onChange:function(e){return i(e.target.value)}}),(0,N.tZ)(ef.II,{placeholder:"height",value:a,onChange:function(e){return l(e.target.value)}}),(0,N.tZ)(ep.zx,{text:"Create",disabled:!(c>0&&s>0),onClick:function(){t({width:Math.ceil(c),height:Math.ceil(s)})}})]})}var pF=O.Dy.Object({type:O.Dy.Literal("pedit"),data:O.Dy.Object({path:O.Dy.String()})}),pW={Content:function(e){var t=e.pane,n=e.options.performPaneOperation;return(0,N.tZ)(pH,{path:t.data.path,performPaneOperation:n})},Icon:function(e){var t=e.size;return(0,N.tZ)(pG.Z,{size:t})},getTitle:function(e){return(0,K.UO)(e.data.path)},decode:function(e){return U.B4.Decode(pF,e)}};function pH(e){var t=e.path,n=e.performPaneOperation,r=(0,J.Mp)({path:t,performPaneOperation:n});return(0,Y.L5)(function(){if(r)return{commands:r}},[r]),(0,N.BX)(N.HY,{children:[(0,N.tZ)(J.HK,{path:t,performPaneOperation:n}),(0,N.tZ)(J.VY,{children:(0,N.tZ)(pM,{activeFile:t})})]})}var pV=n(2924),pz=n(51460),pj=n(39743),pq=(0,H.X)({badge:[j.l0.backgroundColor.backgroundHighest,j.l0.borderRadius(4),{padding:"0 0.35em"}],container:[j.l0.p(8),j.l0.colWithGap(8)],header:[j.l0.py(4),j.l0.justify.spaceBetween,j.l0.flex.grow(1),j.l0.pr(16),j.l0.height(24)],result:[j.l0.borderRadius(4),j.l0.overflow("hidden")],problems:[j.l0.px(6),j.l0.py(6)],item:[nR.gU.listItem,j.l0.reset.button,j.l0.justify.spaceBetween,j.l0.px(8),j.l0.py(4),j.l0.overflow("hidden"),j.l0.cursor.pointer,j.l0.borderRadius(4),{"&:focus-visible":[j.l0.focusRing],"&:hover, &:focus-visible":[j.l0.backgroundColor.backgroundHighest]}],itemMain:[j.l0.flex.growAndShrink(1)],itemSecondary:[j.l0.color.foregroundDimmest],flex:[j.l0.rowWithGap(8),j.l0.align.center],message:[j.l0.flex.shrink(1),j.l0.overflowX("hidden"),{textOverflow:"ellipsis",whiteSpace:"nowrap"}]});function pJ(e){var t=e.isActive,n=e.performPaneOperation,r=(0,P._)((0,$.useState)({}),2),i=r[0],o=r[1],a=(0,pj.nC)(),l=(0,Y.dr)(),c=(0,$.useCallback)(function(){var e=!0,t=!1,n=void 0;try{for(var r,i=a()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)!function(){var e,t=r.value;if("codeEditor"===t[1].type){var n=l(t[0]);if(n&&"codeEditor"===n.type){var i=t[1].data.path,a=null===(e=n.fetchProblems)||void 0===e?void 0:e.call(n);i&&a&&o(function(e){return(0,eu._)((0,es._)({},e),(0,e5._)({},i,a))})}}}()}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},[l,a]);return(0,$.useEffect)(function(){t&&c()},[t,c]),(0,Y.L5)(function(){return{type:"problems",updateProblems:function(e,t){o(function(n){return(0,eu._)((0,es._)({},n),(0,e5._)({},e,t))})}}},[o]),(0,N.BX)(W.G,{css:pq.container,children:[Object.values(i).some(function(e){return e.length>0})?null:(0,N.tZ)(F.xv,{children:"No problems detected in this workspace"}),Object.keys(i).map(function(e){return 0===i[e].length?null:(0,N.tZ)(em.Tg,{elevated:!0,css:pq.result,children:(0,N.tZ)(eL.Q,{chevron:"end",defaultExpanded:!0,headerContent:(0,N.BX)(W.G,{css:[pq.flex,pq.header],children:[(0,N.BX)(W.G,{css:pq.flex,children:[(0,N.tZ)(X.Z,{path:e}),(0,N.tZ)(F.xv,{children:e})]}),(0,N.tZ)(W.G,{css:pq.badge,children:i[e].length>99?"99+":i[e].length})]}),children:(0,N.tZ)(W.G,{css:pq.problems,children:i[e].map(function(t,r){var i=t.range.start.line+1,o=t.range.start.character;return(0,N.tZ)(pz.Z,{problem:t,onClick:function(){n({operation:"open",pane:{type:"codeEditor",data:{path:e,line:i,col:o}},secondary:!0})}},"".concat(i,"-").concat(o,"-").concat(r))})})},e)},e)})]})}var pY=O.Dy.Object({type:O.Dy.Literal("problems")}),p$={Content:function(e){var t=e.options,n=t.isActive,r=t.performPaneOperation;return(0,N.tZ)(pJ,{isActive:n,performPaneOperation:r})},Icon:function(){return(0,N.tZ)(pV.Z,{})},getTitle:function(){return"Problems"},description:"View problems in your code detected by static analysis tools like type checkers and linters",decode:function(e){return U.B4.Decode(pY,e)}},pK=n(75126),pQ=n(1592),p0=n(46026),p1=n(54443),p2=n(90493),p4=(0,eU.iv)([j.l0.focusRing,j.l0.display.flex,j.l0.center,j.l0.borderRadius(4),j.l0.backgroundColor.backgroundRoot,j.l0.color.foregroundDefault,j.l0.cursor.pointer,j.l0.p(4),(T={transition:"background-color 0.2s",border:"none"},(0,e5._)(T,j.wl.hover,[j.l0.backgroundColor.backgroundHigher]),(0,e5._)(T,":focus",{outline:"none"}),T)]),p3=function(e){var t=e.onClick;return(0,N.tZ)(tB.u,{tooltip:"Search",placement:"bottom-start",children:(0,N.tZ)("button",{"aria-label":"Search",onClick:t,css:p4,children:(0,N.tZ)(p2.Z,{size:16})})})},p8=n(85033),p6=n(17198),p5=n(48058),p7=n(27649),p9=n(59500),me=n(35909),mt=n(27318),mn=(0,nb.cn)(0),mr=(0,nb.cn)(function(e){return e(mn)<=mt.Bk?"compact":"normal"}),mi={CURSOR_SAVE:"\x1b[s",CURSOR_RESTORE:"\x1b[u",ERASE_TO_END_OF_SCREEN:"\x1b[0J",COLOR_RESET:"\x1b[0m",COLOR_BRIGHT_BLACK:"\x1b[0;90m"},mo=(0,eU.iv)([j.l0.position.absolute,j.l0.left(8),j.l0.right(0),j.l0.zIndex(5)]);function ma(e){var t=e.lineNumber,n=e.paneHeight,r=e.shell,i=e.sendToShellChannel,o=e.onClose,a=(0,$.useMemo)(function(){return null==r?void 0:r._term},[r]),l=(0,$.useMemo)(function(){var e,t=null==a?void 0:a._core;return null!==(e=null==t?void 0:t._renderService.dimensions.css.cell)&&void 0!==e?e:{width:0,height:0}},[a]),c=(0,$.useRef)(""),s=(0,$.useRef)(!1),u=(0,$.useRef)(null),d=(0,P._)((0,$.useState)(64),2),f=d[0],h=d[1],p=(0,$.useRef)(null),m=(0,$.useCallback)(function(e){return h(e.height)},[h]),v=(0,iF.WR)({onCode:function(e){if(null===e){c.current="";return}c.current!==e&&(s.current&&(r.write(mi.CURSOR_RESTORE),r.write(mi.ERASE_TO_END_OF_SCREEN)),r.write(mi.CURSOR_SAVE),r.write(mi.COLOR_BRIGHT_BLACK),r.write(e.replaceAll("\n","\r\n")),r.write(mi.COLOR_RESET),s.current=!0,c.current=e)}}),g=v.sendMessage,y=v.stopMessage,b=v.getCode,w=v.loading,Z=v.completed,x=v.error,C=v.clearError,_=(0,$.useCallback)(function(){(0,lT.j)(lT.U3.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"generate",source:"shell"}),y(),s.current&&(r.write(mi.CURSOR_RESTORE),r.write(mi.ERASE_TO_END_OF_SCREEN),r.write(mi.COLOR_RESET)),o()},[r,y,o]);(0,$.useEffect)(function(){return r.onData(function(){y(),o()}).dispose},[r,y,o]);var S=(0,mt.U1)({id:db()(),inputRef:p,loading:w,onSubmit:function(){I?D():((0,lT.j)(lT.U3.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",source:"shell",message_content:k}),B())},onClose:_}),k=S.value,E=S.setValue,T=S.onKeyDown,R=S.escPressed,D=(0,$.useCallback)(function(){var e,t=null===(e=b())||void 0===e?void 0:e.code;if(!s.current||!t){_();return}r.write(mi.CURSOR_RESTORE),r.write(mi.ERASE_TO_END_OF_SCREEN),r.write(mi.COLOR_RESET),i(t),(0,lT.j)(lT.U3.AI_INLINE_EVENT,{action:"suggestion_accepted",intent_type:"generate",source:"shell"}),o()},[r,b,o,_,i]),I=Z&&u.current===k,B=(0,$.useCallback)(function(){u.current=k,(0,lT.j)(lT.U3.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",source:"shell",message_content:k}),g({message:k})},[g,k]),G=l.height*(t+1)+8,A="top";G+f>n&&(A="bottom",G=n-l.height*(t+1)+4);var L=(0,iF.Un)(),O=(0,P._)((0,$.useState)(function(){return(0,nb.MT)()}),1)[0],U=(0,ny.b9)(mn,{store:O}),X=(0,ny.Dv)(mr,{store:O}),F=(0,c4.Z)(function(e){return U(e.width)});return(0,N.tZ)(W.G,{css:mo,style:{top:"top"===A?G:void 0,bottom:"bottom"===A?G:void 0},children:(0,N.BX)(mt.If,{requestMeasure:m,type:"generateCode",isCodeMirrorPocket:!1,error:x,clearError:C,innerRef:F,children:[(0,N.tZ)(mt.II,{value:k,inputRef:p,onChange:function(e){return E(e.currentTarget.value)},placeholder:"Enter a prompt to generate a shell command",onKeyDown:T,autoFocus:!0}),(0,N.BX)(mt.$_,{children:[(0,N.BX)(N.HY,{children:[(0,N.tZ)(mt.Xs,{type:"generateCode"}),Z?(0,N.tZ)(M.hU,{alt:"Rerun the same prompt",onClick:function(){return B()},size:12,colorway:"grey",children:(0,N.tZ)(rn.Z,{})}):null]}),I?(0,N.BX)(N.HY,{children:[(0,N.tZ)(ep.zx,{variant:"outlined",size:"small",text:"Reject",onClick:function(){(0,lT.j)(lT.U3.AI_INLINE_EVENT,{action:"suggestion_rejected",intent_type:"generate",source:"shell"}),_()}}),(0,N.tZ)(ep.zx,{size:"small",text:"Accept",colorway:"blurple",onClick:D,dataCy:"ghostwriter-inline-accept-suggestion"})]}):(0,N.tZ)(mt.k4,{escPressed:R,connecting:!L,loading:w,disabled:!k||!k.trim(),promptPresentation:"normal"===X,onClick:function(){w?((0,lT.j)(lT.U3.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"generate",source:"shell",message_content:k}),y()):((0,lT.j)(lT.U3.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",source:"shell",message_content:k}),B())}})]})]})})}var ml=n(73210);function mc(e){var t=e.portsOpenedByThisShell,n=e.performPaneOperation,r=e.onClose,i=(0,q.Z)().ports,o=(0,$.useCallback)(function(e){i.updateDotReplitPortsMapping(e,void 0)},[i]),a=(0,$.useCallback)(function(e){i.tryExposingPortAutomatically(e)},[i]);return(0,N.tZ)(ml.ms,{configurations:t.map(function(e){return e.configuration}),openWebview:function(){n({operation:"open",secondary:!0,pane:{type:"webview",data:t.length>0?{portType:"local",port:t[0].configuration.localPort}:void 0}})},openNetworkingTool:function(){n({operation:"open",secondary:!0,pane:{type:"networking"}})},onClose:function(){null==r||r()},onDontExposePort:function(){1===t.length&&o(t[0].configuration.localPort)},onDoExposePort:function(){1===t.length&&a(t[0].configuration.localPort)}})}var ms=n(37533),mu=n(44355),md=n(36136),mf=n(25114),mh="\x1b[200~",mp="\x1b[201~",mm=n(45795),mv=(0,eU.iv)([j.l0.height("100%"),j.l0.overflow("hidden"),{"& .xterm":[j.l0.pl(8),j.l0.pt(8),j.l0.pb(4),j.l0.height("100%")]}]),mg=(0,H.X)({container:[j.l0.height("100%"),{"&:focus-within .controls":{opacity:1}}],xterm:mv,xtermWithBorderRadius:[mv,{"& .xterm-viewport":[j.l0.borderRadius(0,0,8,8)]}]}),my=(0,eU.iv)([j.l0.position.absolute,j.l0.flex.row,j.l0.top(8),j.l0.right(8),j.l0.height(30),j.l0.align.center,j.l0.zIndex(8),{opacity:0}]);function mb(e){var t,n,r=e.shell,i=e.shellMetadata,o=e.sendToShellChannel,a=e.shellRef,l=e.className,c=e.openSearchAndReplace,s=e.openAIWithMessage,u=e.performPaneOperation,d=e.isGeneratePromptVisible,f=e.currentPromptLineNumber,h=e.onOpenGeneratePrompt,p=e.onCloseGeneratePrompt,m=e.searchState,v=e.setSearchState,g=(0,p6.Gn)("accessibleTerminal").preferences.accessibleTerminal,y=(0,nm.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1}),b=(0,nm.P5)({controlName:"flag-ai-in-the-shell",logFlagToAnalytics:!1}),w=!y&&b,Z=(0,p5.dF)(null!==(t=null==i?void 0:i.cgroup)&&void 0!==t?t:void 0);r&&m.isSearching&&(n=(0,N.tZ)(p8.R,{searchValue:m.searchText,setSearchValue:function(e){v({isSearching:!0,searchText:e})},findPrevious:r.findPrevious,findNext:r.findNext,exit:function(){return v({isSearching:!1})}})),!r||m.isSearching||w||(n=(0,N.tZ)(p3,{onClick:function(){return v({isSearching:!1})}}));var x=(0,aH.T3)(),C=(0,p9.av)().onContextMenu,_=(0,me.j)({xterm:r,isOutputsTerminal:!1,openAIWithMessage:s,openShellSearch:function(e){v({isSearching:!0,searchText:e})},openSearchAndReplace:c,openGeneratePrompt:h});(0,$.useEffect)(function(){null==r||r.fit()},[r,Z]);var S=(0,P._)((0,$.useState)(0),2),k=S[0],E=S[1],T=(0,c4.Z)(function(e){E(e.height)},{type:"throttle",wait:200});return(0,N.BX)(W.G,{className:l,innerRef:T,css:mg.container,onKeyDown:function(e){"f"===e.key&&(0,p0.jh)(e)&&(v({isSearching:!0,searchText:""}),e.preventDefault())},children:[!g&&(0,N.tZ)(p7.T,{children:'Enable "Accessible Terminal" in Workspace Settings to use a screen reader with the shell.'}),(0,N.BX)(W.G,{css:[j.l0.coverContainer,j.l0.flex.column],onClick:function(){d&&(p(),null==r||r.focus())},children:[(0,N.tZ)(W.G,{css:[x?mg.xterm:mg.xtermWithBorderRadius,j.l0.flex.growAndShrink(1),w&&d?{pointerEvents:"none",filter:"opacity(0.75)"}:null],innerRef:a,onContextMenu:function(e){return C(e,{command:_})}}),(0,N.tZ)(mc,{portsOpenedByThisShell:Z,performPaneOperation:u,onClose:function(){null==r||r.focus(),null==r||r.fit()}})]}),w&&r&&d?(0,N.tZ)(ma,{lineNumber:f,paneHeight:k,shell:r,sendToShellChannel:o,onClose:function(){p(),r.focus()}}):null,r?(0,N.BX)(W.G,{className:"controls",css:my,children:[n,w?null:(0,N.tZ)(p1.Z,{onClick:r.clear})]}):null,r?null:(0,N.tZ)("code",{css:[j.l0.color.foregroundDimmest,j.l0.coverContainer,j.l0.p(8),j.l0.font.code],children:"Loading..."})]})}var mw=n(31417),mZ=n(53594),mx=n(9223),mC=n(84806),m_=n(37715),mS=n(91620).lW,mk=(0,eU.iv)([j.l0.position.relative,j.l0.height("100%")]);function mE(e){var t,n,r,i,o=e.shellId,a=e.paneId,l=e.performPaneOperation,c=e.isActive,s=e.currentUser,u=e.onExit,d=(0,nm.P5)({controlName:"flag-pid2-shell-muxed",logFlagToAnalytics:!1}),f=(0,mC.Z)(),h=(0,q.Z)().fs,p=(0,td.Z)(o),m=(0,$.useRef)(!1),v=(0,$.useRef)(null),g=(0,P._)((0,$.useState)("loading"),2),y=g[0],b=g[1],w=(0,P._)((0,$.useState)(void 0),2),Z=w[0],x=w[1],C=(0,P._)((0,$.useState)(0),2),_=C[0],S=C[1],k=(0,P._)((0,$.useState)(!1),2),E=k[0],T=k[1],R=(0,$.useRef)(!1),D=(0,td.Z)(y),I=s.id,B=(0,$.useCallback)(function(e){l({operation:"open",secondary:!0,pane:{type:(0,eo.Dp)(e),data:e}})},[l]),G=(0,$.useCallback)(function(e,t){l({operation:"open",secondary:!0,pane:{type:"webview",data:{portType:"local",path:e,port:t}}})},[l]),A=(0,$.useCallback)(function(e){l({operation:"open",secondary:!0,pane:{type:"searchReplace",data:{initialQuery:e}}})},[l]),L=(0,iF.bD)({onSession:function(e){l({operation:"open",secondary:!0,pane:{type:"ghostwriterChat",data:{sessionId:e}}})}}).sendMessage,O=(0,P._)((0,iF.Ni)(),1)[0],U=(0,$.useCallback)((t=(0,tP._)(function(e){return(0,tL.Jh)(this,function(t){return(0,lT.j)(lT.U3.AI_CHAT_EVENT,{action:"message_sent",intent_type:"explain",model:O,user_model_selection:O,message_content:e,message_source:"shell"}),L({kind:"message",message:e,intent:iF.$h.EXPLAIN,model:"advanced"===O?iF.BY.ADVANCED:iF.BY.BASIC}),[2]})}),function(e){return t.apply(this,arguments)}),[O,L]),M=(0,md.K)(),X=(0,$.useRef)(null),F=(0,$.useRef)(new Uint8Array([])),H=(0,$.useRef)(""),V=(0,mm.bW)({onFTCSState:function(e){var t=e.state,n=e.data;if(t===mm.qj.CommandExecuted&&(R.current=!0),t===mm.qj.CommandFinished){R.current=!1;var r=parseInt(n,10),i=(0,mx.Z)(F.current.toString());(i=i.substring(0,i.lastIndexOf("\n"))).length>0&&M("user:shell:output",{output:i,exitCode:r}),F.current=new Uint8Array([])}X.current=t},onOpenGeneratePrompt:function(){R.current||T(!0)},onUpdateCurrentPromptLineNumber:S}),z=(0,$.useCallback)(function(e,t){if(t.startsWith("A")){var n=t.replace(/^A;/,"");M("user:shell:exec",{command:n}),(0,lT.j)(lT.U3.SHELL_COMMAND_EVALED,{context:n,replId:null==f?void 0:f.id,api:"pid2",pwd:H.current})}if(t.startsWith("B")){var r=t.replace(/^B;/,"");H.current=r}},[M,f,H]),j=(0,P._)((0,mf.Z)({openFile:B,listFiles:h.listFiles,openWebview:G,onInBandOSCMessages:(i={},(0,e5._)(i,mm.Ch,V),(0,e5._)(i,82,z),i),performPaneOperation:l}),2),J=j[0],K=j[1],Q=(0,$.useId)(),ee="scope-shell-".concat(Q);(0,iY.ow)(ee,c),(0,iJ.Il)(function(){return[mm.CH.id,{run:function(){R.current||T(!0)},scope:ee,bubble:!1}]},[T]),(0,Y.Wk)(function(){return J},[J]);var et=(0,m_.U)(function(e){var t;return t=(0,tP._)(function(t){return(0,tL.Jh)(this,function(n){return e.shellExec.resize.rpc({id:p.current,userId:I,processViewId:a,size:t}),[2]})}),function(e){return t.apply(this,arguments)}},[p,I,a]);(0,mZ.C)((n=(0,tP._)(function(e,t){var n,r,i,o,l,c,s,u,d,f,h,m,g;return(0,tL.Jh)(this,function(y){switch(y.label){case 0:if(n=t.addCleanup,!J)return[2];return[4,e.shellExec.connect.stream({id:p.current,userId:I,processViewId:a})];case 1:i=(r=P._.apply(void 0,[y.sent(),3]))[0],o=r[1],l=r[2],n(l),c=J.getSize(),null==et||et(c),v.current=i,s=!1,u=!1,y.label=2;case 2:y.trys.push([2,7,8,13]),f=(0,mw._)(o),y.label=3;case 3:return[4,f.next()];case 4:if(!(s=!(h=y.sent()).done))return[3,6];if(!(m=h.value).ok){if("UNEXPECTED_DISCONNECT"===m.payload.code)return J.clear(),[3,6];if("NO_PROCESS_MATCHING_ID"===m.payload.code||"PROCESS_IS_NOT_RUNNING"===m.payload.code)return[3,6];throw Error("[".concat(m.payload.code,"]: ").concat(m.payload.message))}"output"===m.payload.$kind&&(X.current===mm.qj.CommandExecuted&&(F.current=mS.concat([F.current,m.payload.output])),J.write(m.payload.output)),y.label=5;case 5:return s=!1,[3,3];case 6:return[3,13];case 7:return g=y.sent(),u=!0,d=g,[3,13];case 8:if(y.trys.push([8,,11,12]),!(s&&null!=f.return))return[3,10];return[4,f.return()];case 9:y.sent(),y.label=10;case 10:return[3,12];case 11:if(u)throw d;return[7];case 12:return[7];case 13:return[2]}})}),function(e,t){return n.apply(this,arguments)}),[J,p,et,I,a]),(0,mZ.C)((r=(0,tP._)(function(e,t){var n,r,i,o,a,l,c,s,f,h,v,g,y;return(0,tL.Jh)(this,function(w){switch(w.label){case 0:return n=t.addCleanup,[4,e.shellExec.monitor.subscribe({id:p.current})];case 1:i=(r=P._.apply(void 0,[w.sent(),2]))[0],o=r[1],n(o),a=!1,l=!1,w.label=2;case 2:w.trys.push([2,10,11,16]),s=(0,mw._)(i),w.label=3;case 3:return[4,s.next()];case 4:if(!(a=!(f=w.sent()).done))return[3,9];if(!(h=f.value).ok){if("UNEXPECTED_DISCONNECT"===h.payload.code)return[3,9];if("NO_PROCESS_MATCHING_ID"===h.payload.code)return[3,8];throw Error("[".concat(h.payload.code,"]: ").concat(h.payload.message))}if(b("Loading"!==(v=h.payload).state?"ready":"loading"),"NotStarted"!==v.state&&v.cgroupPath&&x({cgroup:v.cgroupPath}),!("Finished"===v.state&&!1===m.current))return[3,8];if(m.current=!0,o(),d)return[3,6];return u(),[4,e.shellExec.cleanStoredState.rpc({id:p.current})];case 5:w.sent(),w.label=6;case 6:if(!(d&&1===Object.keys(null!==(g=v.userIdsToProcessViewIds)&&void 0!==g?g:{}).length))return[3,8];return u(),[4,e.shellExec.cleanStoredState.rpc({id:p.current})];case 7:w.sent(),w.label=8;case 8:return a=!1,[3,3];case 9:return[3,16];case 10:return y=w.sent(),l=!0,c=y,[3,16];case 11:if(w.trys.push([11,,14,15]),!(a&&null!=s.return))return[3,13];return[4,s.return()];case 12:w.sent(),w.label=13;case 13:return[3,15];case 14:if(l)throw c;return[7];case 15:return[7];case 16:return[2]}})}),function(e,t){return r.apply(this,arguments)}),[p,u,d]);var en=(0,m_.U)(function(e){var t;return t=(0,tP._)(function(t){var n;return(0,tL.Jh)(this,function(r){switch(r.label){case 0:return n=t.id,[4,e.shellExec.disconnect.rpc({id:n,processViewId:a,userId:I})];case 1:if(r.sent(),!(!d&&"ready"===D.current))return[3,4];return m.current=!0,[4,e.shellExec.kill.rpc({id:n})];case 2:return r.sent(),[4,e.shellExec.cleanStoredState.rpc({id:n})];case 3:r.sent(),r.label=4;case 4:return[2]}})}),function(e){return t.apply(this,arguments)}},[d,D,a,I]),er=(0,td.Z)(en);(0,$.useEffect)(function(){function e(){return(e=(0,tP._)(function(){var e;return(0,tL.Jh)(this,function(t){switch(t.label){case 0:return[4,null===(e=er.current)||void 0===e?void 0:e.call(er,{id:p.current})];case 1:return t.sent(),[2]}})})).apply(this,arguments)}return function(){!function(){e.apply(this,arguments)}()}},[er,p]),(0,$.useEffect)(function(){if(J){var e=J.onData(function(e){var t,n=new Uint8Array(mS.from(e));null===(t=v.current)||void 0===t||t.push({$kind:"stdin",stdin:n})}),t=J.onResize(function(e){null==et||et(e)});return function(){e.dispose(),t.dispose()}}},[J,a,et]),(0,$.useEffect)(function(){return function(){v.current=null}},[]);var ei=(0,$.useCallback)(function(e){if(!v.current)return!1;var t=new Uint8Array(mS.from(e));return v.current.push({$kind:"stdin",stdin:t}),!0},[]);(0,mu.Z)({sendInput:ei,paste:function(e){return!!J&&(J.paste(e),!0)}});var ea=(0,P._)((0,$.useState)({isSearching:!1}),2),el=ea[0],ec=ea[1],es=(0,$.useMemo)(function(){return[{match:sr.pl,data:{type:"action",label:"Clear Shell",icon:(0,N.tZ)(sD.Z,{}),run:function(){return null==J?void 0:J.clear()}}},{match:sr.pl,data:{type:"action",label:"Find in Shell",icon:(0,N.tZ)(p2.Z,{}),run:function(){var e;ec({isSearching:!0,searchText:null!==(e=null==J?void 0:J._term.getSelection())&&void 0!==e?e:""})}}}]},[J]);return(0,Y.L5)(function(){return{commands:es,type:"shell"}},[es]),(0,N.tZ)(W.G,{css:mk,children:(0,N.tZ)(mb,{shell:J,shellMetadata:Z,shellRef:K,performPaneOperation:l,currentPromptLineNumber:_,isGeneratePromptVisible:E,sendToShellChannel:ei,openSearchAndReplace:A,openAIWithMessage:U,onOpenGeneratePrompt:function(){R.current||((0,lT.j)(lT.U3.AI_SHELL_CONTEXT_MENU_GENERATE_CLICKED),T(!0))},onCloseGeneratePrompt:function(){return T(!1)},searchState:el,setSearchState:ec})})}var mT=n(63284),mR=n(4354),mD=n(33967),mI=n(32845),mB=n(42914),mG=n(71921),mA=n(38933),mP=(0,H.X)({wrapper:[j.l0.height("100%"),j.l0.flex.column],headerWrapper:[j.l0.flex.growAndShrink(0),j.l0.align.center,j.l0.justify.spaceBetween,j.l0.rowWithGap(4),j.l0.px(4),j.l0.border({direction:"bottom",color:j.TV.outlineDimmest}),j.l0.height(28)],headerGroupLeft:[j.l0.rowWithGap(4),j.l0.align.center,j.l0.flex.grow(1),j.l0.flex.shrink(1)],headerGroupRight:[j.l0.rowWithGap(4),j.l0.align.center,j.l0.flex.shrink(0)],failureWrapper:[j.l0.p(8),j.l0.color.accentNegativeStronger],avatarWrapper:[j.l0.flex.growAndShrink(0),j.l0.rowWithGap(4),j.l0.align.center],terminalWrapper:[j.l0.height("100%"),j.l0.flex.growAndShrink(1)],shellListButton:[j.l0.viewStyle,j.l0.reset.button,j.l0.p(2),j.l0.height(22),j.l0.rowWithGap(4),j.l0.width("100%"),j.l0.maxWidth(600),j.l0.align.center,nR.gU.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8}],shellListButtonText:[j.l0.font.code,j.l0.flex.shrink(1),{fontSize:j.TV.fontSizeSmall,whiteSpace:"nowrap",overflow:"hidden"}],shellListItem:[j.l0.display.flex,j.l0.borderRadius(),j.l0.px(8),j.l0.py(2),j.l0.align.center,j.l0.rowWithGap(4),j.l0.color.foregroundDefault,j.l0.cursor.pointer,j.l0.maxWidth(600),{transitionProperty:"background-color, box-shadow",backgroundColor:"transparent",borderWidth:1,borderStyle:"solid",borderColor:"transparent",outline:"2px solid ".concat(j.TV.accentPrimaryDefault),outlineOffset:"-2px",outlineColor:"transparent"},{"&[data-hovered],&[data-focused]":{backgroundColor:nR.vb.interactiveBackground},"&[data-selected]":{backgroundColor:nR.vb.interactiveBackgroundActive},"&[aria-disabled]":{color:j.TV.foregroundDimmest,cursor:"not-allowed"}}],shellListItemText:[j.l0.width("100%"),{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}]});function mL(e){var t=e.cwd,n=e.command,r="";return t&&(r+=t.replace(/^\/home\/runner/,"~")),n&&(t&&(r+=": "),r+=n),r}function mN(e){var t,n=(0,nm.P5)({controlName:"flag-pid2-shell-muxed",logFlagToAnalytics:!1}),r=(0,mD.x)(),i=(0,mI.I)(),o=(0,P._)((0,$.useState)({state:"loading"}),2),a=o[0],l=o[1],c=(0,td.Z)(a),s=(0,$.useRef)(!1),u=(0,P._)((0,$.useState)(null),2),d=u[0],f=u[1],h=(0,$.useRef)(!1),p=(0,m_.U)(function(e){var t;return t=(0,tP._)(function(t){var n;return(0,tL.Jh)(this,function(r){switch(r.label){case 0:if(!i||h.current)return[2];return h.current=!0,[4,e.shellExec.spawn.rpc((0,es._)({cmd:"bash",env:i,cwd:null==t?void 0:t.cwd},(null==t?void 0:t.initialCmd)?{initialCmd:t.initialCmd}:void 0))];case 1:return(n=r.sent()).ok?(l({state:"connected",id:n.payload.id}),s.current=!0):(tO.$e(function(e){e.setTag("service","pid2-shell"),tO.Tb(n.payload)}),l({state:"errored"})),h.current=!1,[2]}})}),function(e){return t.apply(this,arguments)}},[i]);(0,mZ.C)((t=(0,tP._)(function(t,r){var i,o,a,u,d,h,m,v,g,y,b,w;return(0,tL.Jh)(this,function(Z){switch(Z.label){case 0:if(i=r.addCleanup,!p)return[2];return[4,t.shellExec.monitorAll.subscribe({})];case 1:a=(o=P._.apply(void 0,[Z.sent(),2]))[0],u=o[1],i(u),d=!1,h=!1,Z.label=2;case 2:Z.trys.push([2,7,8,13]),v=function(){var t=y.value;if(!t.ok){if("UNEXPECTED_DISCONNECT"===t.payload.code)return"break";throw Error("[".concat(t.payload.code,"]: ").concat(t.payload.message))}var r=t.payload.processes;if(f(r),!n&&"exiting"===c.current.state)return{v:void 0};if("connected"===c.current.state){var i=c.current.id;r.find(function(e){return e.id===i})||p()}if(n||"loading"!==c.current.state||p({cwd:e.initialPwd,initialCmd:e.initialCmd}),n&&"connected"!==c.current.state){if(!1===s.current&&(void 0!==e.initialPwd||void 0!==e.initialCmd))return p({cwd:e.initialPwd,initialCmd:e.initialCmd}),{v:void 0};var o=r.filter(function(e){var t;return"NotStarted"!==e.state&&0===Object.keys(null!==(t=e.userIdsToProcessViewIds)&&void 0!==t?t:{}).length});0===o.length?p():l({state:"connected",id:o[0].id})}},g=(0,mw._)(a),Z.label=3;case 3:return[4,g.next()];case 4:if(!(d=!(y=Z.sent()).done))return[3,6];if(b=v(),"object"===(0,fj._)(b))return[2,b.v];if("break"===b)return[3,6];Z.label=5;case 5:return d=!1,[3,3];case 6:return[3,13];case 7:return w=Z.sent(),h=!0,m=w,[3,13];case 8:if(Z.trys.push([8,,11,12]),!(d&&null!=g.return))return[3,10];return[4,g.return()];case 9:Z.sent(),Z.label=10;case 10:return[3,12];case 11:if(h)throw m;return[7];case 12:return[7];case 13:return[2]}})}),function(e,n){return t.apply(this,arguments)}),[n,c,p,e.initialPwd,e.initialCmd]);var m=(0,$.useMemo)(function(){var e;if("connected"===a.state)return null!==(e=null==d?void 0:d.find(function(e){return e.id===a.id}))&&void 0!==e?e:void 0},[d,a]),v=(0,$.useCallback)(function(){l({state:"exiting"}),n||e.performPaneOperation({operation:"remove",pane:{id:e.paneId}})},[n,e]),g=(0,m_.U)(function(e){return(0,tP._)(function(){var t;return(0,tL.Jh)(this,function(n){switch(n.label){case 0:if(!(t=null==m?void 0:m.id))return[3,3];return[4,e.shellExec.kill.rpc({id:t})];case 1:return n.sent(),[4,e.shellExec.cleanStoredState.rpc({id:t})];case 2:n.sent(),n.label=3;case 3:return[2]}})})},[null==m?void 0:m.id]);return(0,N.BX)(W.G,{css:mP.wrapper,children:[n?(0,N.BX)(W.G,{css:mP.headerWrapper,children:[(0,N.tZ)(W.G,{css:mP.headerGroupLeft,children:d&&d.length>0?(0,N.tZ)(fh.ZE,{onAction:function(e){l({state:"connected",id:e})},trigger:(0,N.BX)(mB.z,{css:mP.shellListButton,children:[(0,N.tZ)(tv.Z,{size:12}),(0,N.tZ)(W.G,{css:mP.shellListButtonText,children:m?mL(m):"Shells"}),(0,N.tZ)(mO,{userIdsToProcessViewIds:null==m?void 0:m.userIdsToProcessViewIds})]}),items:d,children:function(e){return(0,N.BX)(mG.sN,{id:e.id,css:mP.shellListItem,children:[(0,N.tZ)(F.xv,{css:mP.shellListItemText,children:mL(e)}),(0,N.tZ)(mO,{userIdsToProcessViewIds:e.userIdsToProcessViewIds})]})}}):null}),(0,N.BX)(W.G,{css:mP.headerGroupRight,children:[(0,N.tZ)(M.hU,{alt:"New Shell",onClick:function(){null==p||p()},children:(0,N.tZ)(nG.Z,{color:j.TV.foregroundDimmest})}),(0,N.tZ)(M.hU,{alt:"Kill Shell",disabled:void 0===m,onClick:function(){null==g||g()},children:(0,N.tZ)(mA.Z,{color:j.TV.foregroundDimmest})}),(null==m?void 0:m.isHealthy)===!1?(0,N.tZ)(tB.u,{tooltip:"The nix environment failed to build. Check if your replit.nix is configured properly. For more information look into /run/replit/env/error.",children:(0,N.tZ)(rv.Z,{color:j.TV.accentNegativeDefault})}):null]})]}):null,(0,N.BX)(W.G,{css:mP.terminalWrapper,children:["loading"===a.state?(0,N.tZ)(mR.Z,{}):null,r&&"connected"===a.state?(0,N.tZ)(mE,(0,eu._)((0,es._)({},e),{shellId:a.id,currentUser:r,onExit:v}),a.id):null,"errored"===a.state?(0,N.tZ)(W.G,{css:mP.failureWrapper,children:"Failed to load the Shell."}):null]})]})}function mO(e){var t=e.userIdsToProcessViewIds,n=(0,ea.aG)(),r=(0,$.useMemo)(function(){var e;return null!==(e=Object.keys(null!=t?t:{}).map(function(e){return parseInt(e,10)}).map(function(e){return n.find(function(t){return t.id===e})}).filter(Boolean))&&void 0!==e?e:[]},[t,n]);return 0===r.length?null:(0,N.tZ)(W.G,{css:mP.avatarWrapper,children:r.map(function(e){return(0,N.tZ)(mT.Z,{user:e,size:16},e.id)})})}var mU=n(29871),mM=O.Dy.Object({type:O.Dy.Literal("shell"),data:O.Dy.Optional(O.Dy.Object({initialPwd:O.Dy.Optional(O.Dy.String()),initialCmd:O.Dy.Optional(O.Dy.String())}))}),mX={Content:function(e){var t,n,r,i=e.pane,o=e.options,a=(0,mU.iM)(),l=(0,nm.P5)({controlName:"flag-pid2-shell-muxed",logFlagToAnalytics:!1}),c=(0,nm.P5)({controlName:"flag-pid2-shell",logFlagToAnalytics:!1});return a&&(l||c)?(0,N.tZ)(mN,{paneId:o.paneId,isActive:o.isActive,initialPwd:null===(n=i.data)||void 0===n?void 0:n.initialPwd,initialCmd:null===(r=i.data)||void 0===r?void 0:r.initialCmd,performPaneOperation:o.performPaneOperation}):(0,N.tZ)(mF,{isActive:o.isActive,initialPwd:null===(t=i.data)||void 0===t?void 0:t.initialPwd,performPaneOperation:o.performPaneOperation})},Icon:function(e){var t=e.size;return(0,N.tZ)(e4.Pd.Provider,{value:{color:e3.TV.blueStrongest,size:t},children:(0,N.tZ)(pQ.Z,{})})},getTitle:function(){return"Shell"},description:"Directly access your Repl through a command line interface (CLI)",decode:function(e){return U.B4.Decode(mM,e)}};function mF(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y,b,w,Z,x,C,_,S,k,E,T=e.isActive,R=e.initialPwd,D=e.performPaneOperation,I=(0,q.Z)(),B=I.container,G=I.fs,A=(0,P._)((0,$.useState)(!1),2),L=A[0],O=A[1],U=(0,P._)((0,$.useState)(void 0),2),M=U[0],X=U[1],F=(0,$.useCallback)(function(e){D({operation:"open",secondary:!0,pane:{type:(0,eo.Dp)(e),data:e}})},[D]),W=(0,$.useCallback)(function(e){D({operation:"open",secondary:!0,pane:{type:"searchReplace",data:{initialQuery:e}}})},[D]),H=(0,iF.bD)({onSession:function(e){D({operation:"open",secondary:!0,pane:{type:"ghostwriterChat",data:{sessionId:e}}})}}).sendMessage,V=(0,P._)((0,iF.Ni)(),1)[0],z=(0,$.useCallback)((t=(0,tP._)(function(e){return(0,tL.Jh)(this,function(t){return(0,lT.j)(lT.U3.AI_CHAT_EVENT,{action:"message_sent",intent_type:"explain",model:V,user_model_selection:V,message_content:e,message_source:"shell"}),H({kind:"message",message:e,intent:iF.$h.EXPLAIN,model:"advanced"===V?iF.BY.ADVANCED:iF.BY.BASIC}),[2]})}),function(e){return t.apply(this,arguments)}),[V,H]),j=(0,$.useCallback)(function(e,t){D({operation:"open",secondary:!0,pane:{type:"webview",data:{portType:"local",path:e,port:t}}})},[D]),J=(0,P._)((0,$.useState)(0),2),K=J[0],Q=J[1],ee=(0,P._)((0,$.useState)(!1),2),et=ee[0],en=ee[1],er=(0,P._)((r=(n={container:B,initialPwd:R,onOutput:(0,$.useCallback)(function(){O(!0)},[O]),onShellMetadata:X,openFile:F,performPaneOperation:D,listFiles:G.listFiles,openWebview:j,onOpenGeneratePrompt:function(){(0,lT.j)(lT.U3.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"generate",source:"shell",message_content:null}),en(!0)},onUpdateCurrentPromptLineNumber:function(e){Q(e)}}).onShellKey,i=n.onOutput,o=n.onShellMetadata,a=n.container,l=n.initialPwd,c=n.openFile,s=n.performPaneOperation,u=n.listFiles,d=n.openWebview,f=n.onOpenGeneratePrompt,h=n.onUpdateCurrentPromptLineNumber,p=(0,mm.bW)({onOpenGeneratePrompt:f,onUpdateCurrentPromptLineNumber:h}),v=(m=(0,P._)((0,mf.Z)({openFile:c,listFiles:u,openWebview:d,onInBandOSCMessages:(0,e5._)({},mm.Ch,p),performPaneOperation:s}),2))[0],g=m[1],b=(y=(0,P._)((0,$.useState)(null),2))[0],w=y[1],Z=(0,td.Z)(o),(0,$.useEffect)(function(){return a.openChannel({service:"shell"},function(e){var t=e.channel;return w(t),t.onCommand(function(e){if(e.shellMetadata){var t;null===(t=Z.current)||void 0===t||t.call(Z,e.shellMetadata)}}),function(){w(null)}})},[a,Z]),x=(0,md.K)({channelId:null==b?void 0:b.id}),C=(0,$.useRef)(!1),_="",S="",k="",E=(0,$.useCallback)(function(e){if(!b||!v)return!1;var t=a.client();if(!b||"open"!==b.status||t.getConnectionState()!==ms.em.CONNECTED)return!1;var n=e.startsWith(mh)&&e.endsWith(mp)?e.slice(mh.length,e.length-mp.length):e;return b.send({input:n}),!0},[v,b,a]),(0,mu.Z)({sendInput:E,paste:function(e){return!!v&&(v.paste(e),!0)}}),(0,$.useEffect)(function(){if(b&&v){var e=v.onKey(function(e){var t=e.key,n=e.domEvent;if("\r"===t){var i=S;S.endsWith(_)&&_.length>0&&(i=S.slice(0,-_.length)),x("user:shell:output:clean",{output:i,command:k}),x("user:shell:exec",{command:_}),x("user:shell:output",{output:S}),k=_,_="",S=""}else _+=t;r&&r(n)}),t=a.client(),n=v.onData(function(e){E(e)});b.onCommand(function(e){e.hint?v.write("\x1b[0m\x1b[33m".concat(e.hint.text,"\x1b[0m\r\n")):e.output&&(v.write(e.output),null==i||i(e.output),S+=e.output)});var o=function(){b&&"open"===b.status&&t.getConnectionState()===ms.em.CONNECTED&&b.send({resizeTerm:v.getSize()})};if(l&&!C.current){var c=l.replace(/"/g,'\\"');b.send({input:'cd "'.concat(c,'"\n')}),C.current=!0}var s=v.onResize(o);return o(),function(){e.dispose(),n.dispose(),s.dispose()}}},[b,v,r,i,o,a,E,l]),[v,g,E]),3),ei=er[0],ea=er[1],el=er[2],ec=(0,$.useMemo)(function(){return[{type:"action",label:"Clear Shell",icon:(0,N.tZ)(sD.Z,{}),run:function(){return null==ei?void 0:ei.clear()}},{type:"action",label:"Find in Shell",icon:(0,N.tZ)(p2.Z,{}),run:function(){var e;eh({isSearching:!0,searchText:null!==(e=null==ei?void 0:ei._term.getSelection())&&void 0!==e?e:""})}}]},[ei]);(0,Y.Wk)(function(){return ei},[ei]),(0,Y.L5)(function(){if(ei&&L)return{actions:ec,type:"shell",exec:function(e){el(e+"\n")}}},[ei,el,L,ec]);var es=(0,$.useId)(),eu="scope-shell-".concat(es);(0,iY.ow)(eu,T),(0,iJ.Il)(function(){return[mm.CH.id,{run:function(){(0,lT.j)(lT.U3.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"generate",source:"shell",message_content:null}),en(!0)},scope:eu,bubble:!1}]},[en]);var ed=(0,P._)((0,$.useState)({isSearching:!1}),2),ef=ed[0],eh=ed[1];return(0,N.tZ)(mb,{shell:ei,shellMetadata:M,sendToShellChannel:el,shellRef:ea,performPaneOperation:D,openSearchAndReplace:W,openAIWithMessage:z,currentPromptLineNumber:K,isGeneratePromptVisible:et,onOpenGeneratePrompt:function(){(0,lT.j)(lT.U3.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"generate",source:"shell"}),en(!0)},onCloseGeneratePrompt:function(){return en(!1)},searchState:ef,setSearchState:eh})}var mW=n(36238),mH=n(72121),mV=(0,H.X)({root:[j.l0.pt(16),j.l0.p(8)],center:[j.l0.width("100%"),j.l0.maxWidth(600),j.l0.colWithGap(4),{marginLeft:"auto",marginRight:"auto","@container (min-width: 400px)":[j.l0.maxWidth(800)],"@container (min-width: 1200px)":[j.l0.maxWidth(1400)]}],title:[],content:[j.l0.pt(8),j.l0.colWithGap(16)],search:[j.l0.rowWithGap(8),j.l0.width("100%")],searchInput:[j.l0.flex.grow(1)],packages:[j.l0.colWithGap(16)],checkboxContainer:[j.l0.rowWithGap(8),j.l0.align.center]}),mz=function(){};function mj(e){var t=e.openConsole,n=(0,fK.I)().configs,r=(0,ec.Z)(function(){return n.find(function(e){return"nix"===e.id})},[n]),i=(0,P._)((0,$.useState)(null),2),o=i[0],a=i[1],l=(0,P._)((0,$.useState)(!1),2),c=l[0],s=l[1],u=(0,P._)((0,$.useState)(!1),2),d=u[0],f=u[1],h=null;h=c?(0,N.tZ)(pb,{}):null!==o?(0,N.tZ)(px,{results:o,openConsole:t}):(null==r?void 0:r.id)?(0,N.tZ)(pp,{openFile:mz,openConsole:t},r.id):null;var p=(0,$.useId)(),m=(0,P._)((0,$.useState)({nixOpts:{filterBuilt:!0}}),2),v=m[0],g=m[1],y=v.nixOpts.filterBuilt,b=(0,$.useCallback)(function(e){s(d),g(function(t){return{nixOpts:(0,eu._)((0,es._)({},t.nixOpts),{filterBuilt:e})}})},[s,g,d]);return(0,N.tZ)(pT.Z,{config:r,children:(0,N.tZ)(W.G,{css:mV.root,children:(0,N.BX)(W.G,{css:mV.center,children:[(0,N.tZ)(F.h4,{css:mV.title,level:2,variant:"subheadBig",children:"System Dependencies"}),(0,N.BX)(W.G,{css:mV.content,children:[(null==r?void 0:r.packageSearch)?(0,N.BX)(W.G,{css:mV.search,children:[(0,N.tZ)(pg,{css:mV.searchInput,onResults:a,onLoading:s,searchOpts:v,onQueryChange:function(e){return f(!!e.trim())}}),(0,N.BX)(W.G,{css:mV.checkboxContainer,children:[(0,N.tZ)(rh.X,{id:p,checked:y,onChange:b}),(0,N.tZ)(mH.Z,{children:"Prebuilt packages"})]})]}):null,(0,N.tZ)(W.G,{css:mV.packages,children:h})]})]})})})}var mq=O.Dy.Object({type:O.Dy.Literal("systemDependencies")}),mJ={Content:function(e){var t=e.options;return(0,N.tZ)(mj,{openConsole:function(){t.performPaneOperation({operation:"open",pane:{type:"runnerOutput"},secondary:!0})}})},Icon:function(e){var t=e.size;return(0,N.tZ)(mW.Z,{size:t})},getTitle:function(){return"System Dependencies"},decode:function(e){return U.B4.Decode(mq,e)}},mY=n(86858),m$=O.Dy.Object({type:O.Dy.Literal("unitTests")}),mK={Content:function(e){var t=e.options,n=(0,pj.nC)(),r=(0,Y.dr)();function i(){var e=n().find(function(e){var t=(0,P._)(e,2);return"runnerOutput"===(t[0],t[1].type)});if(e)return e[0]}return(0,N.tZ)(W.G,{css:[j.l0.p(8),eo.F3],children:(0,N.tZ)(mY.Z,{getRunnerOutput:function(){var e=i();if(e||t.performPaneOperation({operation:"open",secondary:!0,pane:{type:"runnerOutput"}}),e=i()){var n=r(e);if((null==n?void 0:n.type)==="runnerOutput")return n}}})})},Icon:function(e){var t=e.size;return(0,N.tZ)(e4.Pd.Provider,{value:{color:j.TV.greenStrongest,size:t},children:(0,N.tZ)(rZ.Z,{})})},getTitle:function(){return"Unit Tests"},decode:function(e){return U.B4.Decode(m$,e)}},mQ=n(70617),m0=n(21625),m1=n(66810);(h=R||(R={})).Connecting="Connecting",h.Connected="Connected",h.Disconnected="Disconnected",h.Errored="Errored";var m2=(0,H.X)({root:{position:"relative",height:"100%",width:"100%"},target:{height:"100%",width:"100%"},audio:{position:"absolute",bottom:0,right:0,padding:"0.2em"},overlay:{top:0,position:"absolute",height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.85)",color:"var(--white)"}});function m4(e){var t,r,i,o,a=e.fs,l=e.secrets,c=e.container,s=(0,P._)((0,$.useState)(null),2),u=s[0],d=s[1],f=(0,P._)((0,$.useState)(void 0),2),h=f[0],p=f[1],m=(0,P._)((0,$.useState)(!1),2),v=m[0],g=m[1],y=(0,P._)((0,$.useState)("Connecting"),2),b=y[0],w=y[1],Z=(0,P._)((0,$.useState)(null),2),x=Z[0],C=Z[1],_=(0,P._)((0,$.useState)(!1),2),S=_[0],k=_[1],E=(0,P._)((0,$.useState)(!1),2),T=E[0],R=E[1],D=(0,$.useRef)(0),I=(0,$.useRef)(!1),B=(r=(t=(0,P._)((0,$.useState)(null),2))[0],i=t[1],o=(0,m0.Z)(c),(0,$.useEffect)(function(){if(!r){if(c.getConnectionState()===m1.em.CONNECTED){if(!o)return;i((0,d5.hw)(o.replace("http","ws"),m1.Y8).toString());return}return c.onConnectionStateChanged(function(e){e===m1.em.CONNECTED&&o&&i((0,d5.hw)(o.replace("http","ws"),m1.Y8).toString())})}},[o,r,c]),{vncUrl:r}).vncUrl;(0,lT.j)(lT.U3.VNC_OPENED),(0,$.useEffect)(function(){return I.current=!0,function(){I.current=!1}},[]);var G=(0,P._)((0,$.useState)(null),2),A=G[0],L=G[1],O=(0,$.useRef)(function(){return null});(0,$.useEffect)(function(){O.current()},[A]);var U=(0,c4.Z)(function(e){return L(e.width&&e.height?{width:e.width,height:e.height}:null)},{type:"throttle",wait:100}),M=(0,$.useRef)(function(e){});(0,$.useEffect)(function(){M.current(T)},[T]),(0,$.useEffect)(function(){if(!u){var e=!1;return n.e(994).then(n.bind(n,30994)).then(function(t){e||d(t)}),function(){e=!0}}},[u]),(0,$.useEffect)(function(){"Disconnected"===b&&setTimeout(function(){w("Connecting")},Math.random()*(Math.pow(2,D.current)-1)*1e3)},[b]),(0,$.useEffect)(function(){if("Disconnected"===b){var e=setTimeout(function(){w("Connecting")},Math.random()*(Math.pow(2,D.current)-1)*1e3);return function(){clearTimeout(e)}}},[b]);var X=(0,ez.Z)();(0,$.useEffect)(function(){if(B&&x&&u&&"Connecting"===b){D.current++;var e=u.default,t=c.getConnectionMetadata(),n={credentials:{username:null==t?void 0:t.token,password:h||""}};(0,lT.j)(lT.U3.VNC_CONNECTED);var r=new e(x,B,n);r.scaleViewport=!0,r.resizeSession=!0;var i=function(){D.current=0,w("Connected")},o=function(e){var t=e.detail.capabilities.audio;k(void 0!==window.MediaSource&&!!t)},a=function(e){if(O.current=function(){return null},M.current=function(e){},r.removeEventListener("securityfailure",s),r.removeEventListener("disconnect",a),r.removeEventListener("capabilities",o),r.removeEventListener("connect",i),!e.detail.clean){var t=c.getConnectionMetadata(),n=t?(0,mQ.he)(t.token):null;(0,lT.j)(lT.U3.VNC_ERRORED,{vncUrl:B,replId:X,cluster:null==n?void 0:n.cluster}),w("Errored");return}w("Disconnected")},s=function(){var e,t=function(){g(!0)};(e=(0,tP._)(function(){var e;return(0,tL.Jh)(this,function(n){switch(n.label){case 0:return[4,l.readSecret("VNC_PASSWORD")];case 1:if(!(e=n.sent()))return t(),[2];return p(e.value),[2]}})}),function(){return e.apply(this,arguments)})().catch(function(e){return tO.Tb(e)})};return r.addEventListener("connect",i),r.addEventListener("capabilities",o),r.addEventListener("disconnect",a),r.addEventListener("securityfailure",s),O.current=function(){return r._windowResize()},k(!1),R(!1),M.current=function(t){t?((0,lT.j)(lT.U3.VNC_AUDIO_ENABLED),r.enableAudio(2,window.MediaSource.isTypeSupported("audio/webm;codecs=opus")?e.audioCodecs.OpusWebM:e.audioCodecs.MP3,32768)):r.disableAudio()},function(){I.current||(O.current=function(){return null},M.current=function(e){},r.removeEventListener("securityfailure",s),r.removeEventListener("disconnect",a),r.removeEventListener("capabilities",o),r.removeEventListener("connect",i),r.disconnect())}}},[u,x,c,B,a,h,b,X,l]);var F="vnc-output-".concat(b.toLowerCase());return(0,N.BX)("div",{"data-cy":"vnc",css:m2.root,children:[S?(0,N.BX)("label",{css:m2.audio,children:["\uD83C\uDFA7"," ",(0,N.tZ)("input",{type:"checkbox",checked:T,onChange:function(e){return R(e.target.checked)}})]}):null,(0,N.tZ)("div",{ref:function(e){U(e),C(e)},css:m2.target,"data-cy":F}),"Connecting"===b||"Disconnected"===b?(0,N.tZ)("div",{css:m2.overlay,children:(0,N.tZ)(z.Z,{size:32})}):null,"Errored"===b?(0,N.tZ)(m8,{vncUrl:B,onRetry:function(){return w("Connecting")}}):null,(0,N.tZ)(rX.u,{isOpen:v,onRequestClose:function(){return g(!1)},children:(0,N.tZ)(pL.Z,{prompt:"Password",desc:"The output is password protected, please input it",placeholder:"password",type:"text",onCancel:function(){return g(!1)},onConfirm:function(e){p(e),g(!1)}})})]})}var m3=(0,H.X)({root:[j.l0.coverContainer,j.l0.center,j.l0.p(16)],inner:[j.l0.colWithGap(8),j.l0.width(250)],diagnosisContent:[j.l0.py(8)]});function m8(e){var t=e.vncUrl,n=e.onRetry,r=null;return t&&(r=(0,N.tZ)(eL.Q,{headerContent:"Diagnosis",children:(0,N.tZ)(W.G,{css:m3.diagnosisContent,children:(0,N.tZ)(sR.ZP,{children:"If you see a browser error, it's possible that your ISP have security settings blocking the URL. Please contact your ISP and ask them to unblock the URL above. Here are the support links for common ISPs:\n- [Xfinity](https://www.xfinity.com/support/articles/report-blocked-website)\n- [Spectrum.net](https://www.spectrum.net/support/forms/unblock_site)\n"})})})),(0,N.tZ)(W.G,{css:m3.root,children:(0,N.BX)(W.G,{css:m3.inner,children:[(0,N.tZ)(rF.E,{colorway:"warning",text:"There was an error connecting to the server"}),r,(0,N.tZ)(ep.zx,{iconLeft:(0,N.tZ)(rn.Z,{}),text:"Try again",onClick:n})]})})}var m6=O.Dy.Object({type:O.Dy.Literal("vnc")}),m5=(0,eU.iv)([j.l0.flex.growAndShrink(1)]),m7={Content:function(){return(0,N.tZ)(m9,{})},Icon:function(e){var t=e.size;return(0,N.tZ)(d4.Z,{size:t})},getTitle:function(){return"Output"},description:"View your Repl's desktop screen output",decode:function(e){return U.B4.Decode(m6,e)}};function m9(){var e=(0,q.Z)(),t=e.fs,n=e.container,r=e.secrets;return(0,N.tZ)(W.G,{css:m5,children:(0,N.tZ)(m4,{fs:t,container:n,secrets:r})})}var ve=n(36214),vt=n(54501),vn=n(90079),vr=n(98001),vi=n(80012),vo=n(15229);function va(){var e=(0,ej._)(["\n  query AdminPanelGitView {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n        installations {\n          id\n          type\n          avatarUrl\n          name\n        }\n        userInfo {\n          name\n          email\n          avatarUrl\n        }\n      }\n    }\n  }\n"]);return va=function(){return e},e}var vl={},vc=(0,eq.Ps)(va());function vs(e){var t=e.event,n=t.input,r=t.output,i=t.error,o=t.start,a=t.end,l=t.cached,c=(0,P._)((0,$.useState)(!0),2),s=c[0],u=c[1],d=(0,$.useCallback)(function(){return u(function(e){return!e})},[]),f="bash"===n[0]&&"-c"===n[1]?n.slice(2).join(" "):n.join(" "),h=r.trimEnd();return(0,N.BX)(W.G,{css:[(0,vi.ec)(i?"negative":"positive"),l?{opacity:.75}:void 0,j.l0.borderRadius(8)],children:[(0,N.BX)(W.G,{onClick:d,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&d()},tabIndex:0,css:[j.l0.rowWithGap(4),j.l0.justify.spaceBetween,j.l0.py(4),j.l0.px(8),j.l0.font.code,j.l0.cursor.pointer],children:[(0,N.BX)("span",{css:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:["$ ",f]}),(0,N.BX)("span",{css:[j.l0.color.foregroundDimmer,j.l0.flex.shrink(0)],children:[i?(0,N.tZ)("span",{css:[j.l0.mr(16)],children:i}):null,l?(0,N.tZ)("span",{children:"CACHED"}):(0,N.BX)("span",{children:[a-o," ms"]})]})]}),s?null:(0,N.tZ)(W.G,{css:[j.l0.px(2),j.l0.pb(2),j.l0.borderRadius(0,0,8,8)],children:(0,N.tZ)(em.Tg,{elevated:!0,css:[j.l0.p(8),j.l0.borderRadius(8)],children:(0,N.tZ)(vr.Z,{code:h})})})]})}var vu=n(90029),vd=n(6498),vf=n(57117);function vh(e){var t=e.t,n=e.children;return(0,N.BX)("span",{css:{display:"flex",alignItems:"flex-start",columnGap:"0.5rem"},children:[(0,N.BX)(F.xv,{css:{minWidth:"8em"},multiline:!1,children:[t,":"," "]}),(0,N.tZ)("span",{children:n})]})}var vp=n(59452),vm=n(20025),vv=(0,H.X)({container:[j.l0.colWithGap(8),j.l0.height("100%"),j.l0.position.relative],controls:[j.l0.colWithGap(8),j.l0.px(4),j.l0.pb(8),j.l0.backgroundColor.backgroundDefault],filters:[j.l0.rowWithGap(4),j.l0.justify.spaceBetween]}),vg=(0,H.X)({in:[j.l0.color.greenStrongest],out:[j.l0.color.redStrongest],error:[j.l0.color.magentaStrongest]}),vy=[j.l0.flex.row,j.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".link":{textDecoration:"underline"}}}],vb=(0,H.X)({clickable:(0,L._)(vy),clickableHighlighted:(0,L._)(vy).concat([j.l0.backgroundColor.accentPositiveDimmer]),inner:[j.l0.flex.grow(1),j.l0.rowWithGap(4),j.l0.maxWidth("100%")],log:[j.l0.flex.growAndShrink(1),{opacity:.5}],row:[j.l0.my(4),j.l0.mx(4)],timestamp:[j.l0.fontSize(13),{cursor:"pointer"}]});function vw(e){var t,n=e.log,r=e.filters,i=e.timeRef,o=e.setTimeRef,a=(0,$.useMemo)(function(){return r.highlightOnly&&(0,vm.cF)(n,r)},[r,n]),l=null!==(t=n.cmd.channel)&&void 0!==t?t:0,c=(0,$.useMemo)(function(){var e=(0,es._)({},n.cmd);return delete e.channel,{cleaned:e,formatted:JSON.stringify(e,null,2)}},[n]),s=i?n.timestamp-i:n.timestamp,u=(0,P._)((0,vf.Z)(!0),2),d=u[0],f=u[1];return(0,N.BX)(W.G,{css:vb.row,children:[(0,N.tZ)(W.G,{role:"button",onClick:f,onKeyDown:f,tabIndex:0,css:a?vb.clickableHighlighted:vb.clickable,children:(0,N.BX)(W.G,{css:vb.inner,children:[(0,N.tZ)(F.xv,{className:"icon",multiline:!1,children:"in"===n.dir?(0,N.tZ)(W.G,{css:vg.in,children:"→"}):"out"===n.dir?(0,N.tZ)(W.G,{css:vg.out,children:"←"}):(0,N.tZ)(W.G,{css:vg.error,children:"⚠"})}),(0,N.tZ)(F.xv,{className:"link",multiline:!1,children:(0,N.BX)("code",{children:["#",l," - ",n.channel.service,n.channel.name?"::".concat(n.channel.name):""]})}),(0,N.tZ)(F.xv,{css:vb.log,multiline:!1,children:(0,N.tZ)("code",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:c.formatted})}),null!=s&&(0,N.tZ)(W.G,{style:{opacity:.5},onClick:function(){o(n.timestamp)},children:(0,N.tZ)(F.xv,{css:vb.timestamp,multiline:!1,children:n.timestamp===i?"(reference)":(0,N.BX)(N.HY,{children:[s.toFixed(0)," ms"]})})})]})}),!d&&(0,N.tZ)(N.HY,{children:void 0!==c.cleaned&&(0,N.tZ)(vp.g,{name:"cmd",src:c.cleaned})})]})}var vZ=(0,H.X)({listContainer:[j.l0.position.relative,j.l0.height("100%")],listScroller:[j.l0.overflow("auto"),j.l0.coverContainer],listBox:[j.l0.width("100%"),j.l0.position.relative],listItem:[j.l0.position.absolute,j.l0.top(0),j.l0.left(0),j.l0.width("100%")]}),vx=(0,$.memo)(function(e){var t=e.logs,n=e.filters,r=e.timeRef,i=e.setTimeRef,o=(0,$.useRef)(null),a=(0,nE.MG)({count:t.length,getScrollElement:function(){return o.current},getItemKey:function(e){return t[e].id},estimateSize:function(){return 30},overscan:10});return(0,N.tZ)("div",{css:vZ.listContainer,children:(0,N.BX)("div",{ref:o,css:vZ.listScroller,children:[(0,N.tZ)("div",{css:vZ.listBox,style:{height:"".concat(a.getTotalSize(),"px")},children:a.getVirtualItems().map(function(e){var o=e.index,l=e.key,c=e.start,s=t[o];return s?(0,N.tZ)("div",{"data-index":o,ref:a.measureElement,css:vZ.listItem,style:{transform:"translateY(".concat(c,"px)")},children:(0,N.tZ)(vw,{log:s,filters:n,timeRef:r,setTimeRef:i})},l):null})}),(0,N.tZ)("div",{className:"bottom-anchor"})]})})}),vC=function(e){var t=e.filters,n=e.updateFilters;return(0,N.BX)(W.G,{css:j.l0.colWithGap(4),children:[(0,N.tZ)(F.xv,{variant:"subheadDefault",multiline:!1,children:"Regex (regex,flags):"}),(0,N.tZ)(ef.II,{id:"regex",onChange:function(e){var t=null;if(e.currentTarget.value){var r=(0,P._)(e.currentTarget.value.split(","),2),i=r[0],o=r[1];try{t=new RegExp(i,o)}catch(e){}}n({regexp:t})},placeholder:"\\w+,gi"}),(0,N.tZ)(F.xv,{variant:"subheadDefault",multiline:!1,children:"Channel (comma separated ids, clear to reset)"}),(0,N.tZ)(ef.II,{id:"channels",onChange:function(e){n({channels:e.currentTarget.value.split(",").map(function(e){return e.trim()}).map(Number).filter(function(e){return!isNaN(e)})})},placeholder:"1,2,3"}),(0,N.tZ)(F.xv,{variant:"subheadDefault",multiline:!1,children:"Directions:"}),(0,N.tZ)(aV.E,{css:j.l0.rowWithGap(16),name:"direction",value:t.direction,onChange:function(e){var t=e.target.value;n({direction:"in"===t||"out"===t||""===t?t:""})},children:[{val:"",text:"Both"},{val:"in",text:"In"},{val:"out",text:"Out"}].map(function(e){return(0,N.BX)(W.G,{css:[j.l0.rowWithGap(8)],children:[(0,N.tZ)(aV.Y,{id:e.val,value:e.val}),(0,N.tZ)("label",{htmlFor:e.val,children:e.text})]},e.val)})}),(0,N.tZ)(F.xv,{variant:"subheadDefault",multiline:!1,children:"Filter style:"}),(0,N.tZ)(aV.E,{css:j.l0.rowWithGap(16),name:"filter-style",value:t.highlightOnly?"highlight":"filter",onChange:function(e){return n({highlightOnly:"highlight"===e.target.value})},children:[{val:"highlight",text:"Highlight"},{val:"filter",text:"Filter"}].map(function(e){return(0,N.BX)(W.G,{css:[j.l0.rowWithGap(8)],children:[(0,N.tZ)(aV.Y,{id:e.val,value:e.val}),(0,N.tZ)("label",{htmlFor:e.val,children:e.text})]},e.val)})})]})},v_=n(33980),vS=(0,H.X)({root:{height:"100%",overflow:"auto",padding:10,pre:{whiteSpace:"pre-wrap",wordWrap:"break-word"}},command:[j.l0.flex.shrink(1)],copyable:[j.l0.rowWithGap(2)]}),vk=n(75958),vE=n(46547),vT=n(30124),vR=n(48311),vD=n(71462),vI=n(48342);function vB(){var e=(0,ej._)(["\n  fragment AdminPanelRepl on Repl {\n    id\n    title\n    description\n    isProject\n    isPrivate\n    timeCreated\n    timeUpdated\n    slug\n    url\n    language\n    user {\n      id\n    }\n    config {\n      isServer\n      isVnc\n    }\n    isRenamed\n    isProjectFork\n    folderId\n    isOwner\n    origin {\n      id\n    }\n    source {\n      release {\n        id\n        repl {\n          id\n          url\n          templateLabel\n        }\n      }\n    }\n  }\n"]);return vB=function(){return e},e}function vG(){var e=(0,ej._)(["\n  query AdminPanelReplView($replId: String!) {\n    repl(id: $replId) {\n      ...AdminPanelRepl\n    }\n  }\n  ","\n"]);return vG=function(){return e},e}var vA={},vP=(0,eq.Ps)(vB()),vL=(0,eq.Ps)(vG(),vP),vN=(0,eU.iv)([j.l0.colWithGap(16),j.l0.p(4),{pre:{whiteSpace:"pre-wrap",wordWrap:"break-word"}}]),vO=n(47726),vU=n(36556);function vM(e){var t=e.sessionId,n=(0,P._)((0,$.useState)(!1),2),r=n[0],i=n[1],o=(0,P._)((0,$.useState)(""),2),a=o[0],l=o[1],c=(0,P._)((0,$.useState)(!1),2),s=c[0],u=c[1],d=(0,ak.Z)().showConfirm,f=(0,a1.U)();return null==t?(0,N.tZ)(W.G,{children:(0,N.tZ)(F.xv,{multiline:!1,children:"Something went wrong... no RUM session found... Try refreshing the page"})}):(0,N.BX)(W.G,{css:[j.l0.colWithGap(8)],children:[(0,N.BX)(F.xv,{variant:"small",multiline:!1,children:["RUM Session ID: ",t]}),(0,N.tZ)(F.xv,{variant:"headerDefault",multiline:!1,children:"Submit an Issue"}),(0,N.BX)(W.G,{css:[j.l0.colWithGap(16)],children:[(0,N.tZ)(ef.B,{id:f("message"),placeholder:"What can we do better?",value:a,onChange:function(e){return l(e.target.value)},disabled:r}),(0,N.BX)(W.G,{css:[j.l0.rowWithGap(8)],children:[(0,N.tZ)(rh.X,{id:f("issueInRecording"),checked:s,onChange:function(e){return u(e)}}),(0,N.tZ)("label",{htmlFor:f("issueInRecording"),children:(0,N.tZ)(F.xv,{multiline:!1,children:"Issue is demoed in recording"})})]}),(0,N.tZ)(ep.zx,{onClick:function(){var e=db()();i(!0),(0,vU.fc)({name:"replitOnReplit:issue",context:{message:a,issueInRecording:s,customEventId:e}}),d("Issue submitted! Have a cookie \uD83C\uDF6A",5e3),setTimeout(function(){i(!1),l(""),u(!1)},5e3)},text:"Submit",disabled:r||0===a.trim().length,colorway:"primary"})]})]})}var vX=n(39315),vF={"Session state":function(){var e=(0,iF.aV)();return(0,N.tZ)(vD.Z,{json:e})},"File context":function(){var e=(0,iF.Tt)(),t=(0,pj.AA)(),n=(0,P._)((0,iF.Ni)(),1)[0],r=(0,iF.Bk)(),i=(0,q.Z)(),o=i.fs,a=i.dotReplit,l=(0,vX.G)(o,a),c=(0,P._)((0,$.useState)(null),2),s=c[0],u=c[1];return(0,$.useEffect)(function(){var i=!1;function o(){return(o=(0,tP._)(function(){var o;return(0,tL.Jh)(this,function(a){switch(a.label){case 0:return[4,l({model:"advanced"===n&&r()?iF.BY.ADVANCED:iF.BY.BASIC,filePreferences:e,recentFiles:t()})];case 1:if(o=a.sent(),i)return[2];return u(o),[2]}})})).apply(this,arguments)}return function(){o.apply(this,arguments)}(),function(){i=!0}},[t,e,n,r,l]),(0,N.tZ)(vD.Z,{json:s})}},vW=n(49500),vH=(0,eU.iv)([j.l0.pt(16),j.l0.px(12),j.l0.colWithGap(12)]),vV=n(80771),vz=(0,H.X)({container:[j.l0.py(8),j.l0.px(12),j.l0.colWithGap(12)],toggleRow:[j.l0.rowWithGap(8)]}),vj=n(56683),vq=n(76913);function vJ(e){var t,n,r,i,o,a,l=(0,P._)((0,$.useState)(null),2),c=l[0],s=l[1],u=(t=e.logs,n=(0,P._)((0,$.useState)(),2)[1],i=(r=(0,$.useMemo)(function(){if(!t)return{subscribe:function(){return function(){}},getSnapshot:function(){return null}};var e=vq.y$.from(t);return{subscribe:function(t){return e.subscribe({next:t,error:function(e){n(function(){throw e})}})},getSnapshot:function(){return t.current}}},[t])).subscribe,o=r.getSnapshot,a=(0,$.useSyncExternalStore)(i,o,o),t?a:void 0),d=null!==c?u[u.length-c-1]:null,f=(0,cF.Z)(),h=f.ref,p=f.view;(0,$.useEffect)(function(){p&&p.dispatch({changes:{from:0,to:p.state.doc.length,insert:d?d.data:""}})},[d,p]);var m=(0,$.useRef)(c);return(0,$.useEffect)(function(){m.current=c},[c]),(0,$.useEffect)(function(){return e.logs.subscribe(function(e){var t=m.current;(null===t||e.length-2===t)&&s(e.length-1)})},[e.logs]),(0,N.BX)(W.G,{css:v3.outputs,children:[(0,N.BX)(W.G,{css:v3.outputsL,children:[(0,N.tZ)(W.G,{css:v3.logHeader,children:d?null==d?void 0:d.name:null}),(0,N.tZ)(W.G,{css:v3.logData,children:(0,N.tZ)(ts.ZP,{ref:h,language:"json",readOnly:!0})})]}),(0,N.BX)(W.G,{css:v3.outputsR,children:[(0,N.tZ)(W.G,{css:v3.logsHeader,children:(0,N.tZ)(ep.zx,{size:"small",text:"Clear",disabled:!u.length,onClick:e.onClear})}),(0,N.tZ)(W.G,{css:v3.logsList,children:u.map(function(e,t){var n=u.length-t-1;return(0,N.tZ)("code",{role:"button",tabIndex:0,className:c===n?"selected":void 0,onClick:function(){s(n)},onKeyDown:function(e){"Enter"===e.key&&s(n)},children:e.name},n)})})]})]})}var vY=e7.Py.define(),v$=e7.Py.define(),vK=e7.Py.define(),vQ=tn.tk.theme({"&":{border:"1px solid ".concat(j.TV.outlineDefault),height:"225px"},"& .cm-panels":{backgroundColor:"unset"},"& .cm-panels.cm-panels-bottom":{borderTop:"1px solid ".concat(j.TV.outlineDefault)}}),v0=new cW.j(function(e,t){return[vQ,e7.QQ.define({create:function(){return null},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;l.is(vY)&&(e=l.value),l.is(vK)&&(e=null)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e},provide:function(n){return[tn.lg.define(function(){var n,r,i=void 0;return{update:(n=(0,tP._)(function(n){var o,a,l,c,s,u,d,f,h,p,m,v,g,y,b,w,Z,x,C,_,S,k,E,T,R,D,I,B,G,A,L,N,O,U,M,X,F,W,H;return(0,tL.Jh)(this,function(V){switch(V.label){case 0:if(!e)return[2];o=void 0,a=!0,l=!1,c=void 0;try{for(s=n.transactions[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){d=u.value,f=!0,h=!1,p=void 0;try{for(m=d.effects[Symbol.iterator]();!(f=(v=m.next()).done);f=!0){var z;(g=v.value).is(vY)&&g.value&&(o=g.value),g.is(v$)&&(null==r||r.push((z=g.value,JSON.parse(z,function(e,t){return"object"==typeof t&&"Uint8Array"===t.type&&void 0!==t.data?new Uint8Array(t.data):t})))),g.is(vK)&&(null==i||i())}}catch(e){h=!0,p=e}finally{try{f||null==m.return||m.return()}finally{if(h)throw p}}}}catch(e){l=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}if(!o)return[2];switch(y=o.service,b=o.procedure,w=o.type,Z=e.client[y][b][w],x=void 0,C=1,o.type){case"rpc":return[3,1];case"stream":return[3,3];case"subscribe":return[3,5];case"upload":return[3,7]}return[3,9];case 1:case 5:return[4,Z(o.input)];case 2:return _=V.sent(),t({name:"".concat(y,".").concat(b,".").concat(w,".").concat(C),data:v1(_)}),n.view.dispatch({effects:vK.of(null)}),[3,9];case 3:return[4,Z(null!==(S=o.input)&&void 0!==S?S:void 0)];case 4:return E=(k=P._.apply(void 0,[V.sent(),3]))[0],T=k[1],R=k[2],r=E,x=T,i=R,[3,9];case 6:return I=(D=P._.apply(void 0,[V.sent(),2]))[0],B=D[1],x=I,i=B,[3,9];case 7:return[4,Z(null!==(G=o.input)&&void 0!==G?G:void 0)];case 8:return L=(A=P._.apply(void 0,[V.sent(),2]))[0],N=A[1],r=L,i=N,[3,9];case 9:if(!x)return[3,22];O=!1,U=!1,V.label=10;case 10:V.trys.push([10,15,16,21]),X=(0,mw._)(x),V.label=11;case 11:return[4,X.next()];case 12:if(!(O=!(F=V.sent()).done))return[3,14];W=F.value,t({name:"".concat(y,".").concat(b,".").concat(w,".").concat(C),data:v1(W)}),C++,V.label=13;case 13:return O=!1,[3,11];case 14:return[3,21];case 15:return H=V.sent(),U=!0,M=H,[3,21];case 16:if(V.trys.push([16,,19,20]),!(O&&null!=X.return))return[3,18];return[4,X.return()];case 17:V.sent(),V.label=18;case 18:return[3,20];case 19:if(U)throw M;return[7];case 20:return[7];case 21:n.view.dispatch({effects:vK.of(null)}),V.label=22;case 22:return r=void 0,x=void 0,i=void 0,[2]}})}),function(e){return n.apply(this,arguments)})}}),tn.tk.editable.from(n,function(e){return(null==e?void 0:e.type)!=="rpc"&&(null==e?void 0:e.type)!=="subscribe"}),vj.V.compute([n,"doc"],function(e){var t,r;return e.doc.length?null:(null===(t=e.field(n))||void 0===t?void 0:t.type)==="stream"||(null===(r=e.field(n))||void 0===r?void 0:r.type)==="upload"?{from:0,insert:"{\n   # ... input data\n}"}:{from:0,insert:'{\n  "service_name": {\n    "procedure_name": {\n      "rpc" | "stream" | "subscribe" | "upload": {\n        # ... init/input data\n      }\n    }\n  }\n}'}}),tn.$f.of([{key:"Tab",run:function(e){var t;return!e.state.doc.length&&(e.dispatch({changes:null!==(t=e.state.facet(vj.V)[0])&&void 0!==t?t:void 0}),!0)}}]),tn.mH.of(function(t){var r=function(){if(e){var n=v4(t.state.doc.toString());if(n){var r=n.type,i=n.service,o=n.procedure,a=n.input;r&&i&&o&&t.dispatch({effects:vY.of({type:r,service:i,procedure:o,input:a}),changes:"stream"===r||"upload"===r?{from:0,to:t.state.doc.length,insert:""}:void 0})}}},i=function(){t.dispatch({effects:v$.of(t.state.doc.toString()),changes:{from:0,to:t.state.doc.length,insert:""}})},o=function(){var r,i=t.state.field(n),o=new Set,a=t.state.doc.toString();return e&&i&&"rpc"!==i.type&&(o.add("Close"),("stream"===i.type||"upload"===i.type)&&a.startsWith("{")&&a.endsWith("}")&&o.add("Send")),e&&!i&&a.length&&(o.add("Clear"),(null===(r=v4(a))||void 0===r?void 0:r.type)&&o.add("Send")),o},a=v6.create({enabled:o(),onSend:function(){null==t.state.field(n)?r():i(),t.focus()},onClose:function(){t.dispatch({effects:[vK.of(null),vY.of(null)],changes:{from:0,to:t.state.doc.length,insert:""}})},onClear:function(){t.dispatch({changes:{from:0,to:t.state.doc.length,insert:""}}),t.focus()}});return{dom:a,top:!1,update:function(e){if((0,dr.aU)(e,n,"doc")){var t=e.state.field(n);v6.update(a,function(e){return(0,eu._)((0,es._)({},e),{enabled:o(),inProgress:t?"".concat(t.type,": ").concat(t.service,".").concat(t.procedure):void 0})})}}}})]}})]});function v1(e){return JSON.stringify(e,function(e,t){return t instanceof Uint8Array?Array.from(t):t},2)}var v2=["rpc","stream","subscribe","upload"];function v4(e){try{t=JSON.parse(e)}catch(e){return null}var t,n=0,r=null,i=null,o=null;try{for(;n<3;){var a=Object.keys(t)[0];if(void 0===a)throw Error("expected key");if(0===n&&(r=a),1===n&&(i=a),2===n){if(v2.includes(a))o=a;else throw Error("expected procedure type");if("object"!=typeof t[a])throw Error("value must be object or null")}t=t[a],n++}return{type:o,service:r,procedure:i,input:t}}catch(e){return{type:o,service:r,procedure:i,input:null}}}var v3=(0,H.X)({buttons:[j.l0.p(4),j.l0.rowWithGap(4)],status:[j.l0.p(4),j.l0.pb(0)],outputs:[j.l0.rowWithGap(0),j.l0.flex.growAndShrink(1),j.l0.border({width:1,color:j.TV.outlineDefault}),{marginTop:"4px"}],logHeader:[j.l0.align.start,j.l0.justify.center,j.l0.height("37px"),j.l0.display.flex,j.l0.p(4),j.l0.border({width:1,color:j.TV.outlineDefault,direction:"bottom"})],logData:[j.l0.display.block,j.l0.flex.growAndShrink(1),{overflowY:"auto"}],logsHeader:[j.l0.display.flex,j.l0.align.end,j.l0.p(4),j.l0.border({width:1,color:j.TV.outlineDefault,direction:"bottom"})],logsList:[j.l0.display.block,j.l0.flex.growAndShrink(1),{overflowY:"auto"}],outputsL:[j.l0.display.flex,j.l0.flex.growAndShrink(1),{overflowY:"auto"}],outputsR:[j.l0.display.flex,j.l0.border({width:1,color:j.TV.outlineDefault,direction:"left"}),j.l0.width("40%"),j.l0.maxWidth("250px"),{overflowY:"auto","& code":{display:"block",cursor:"pointer",padding:"4px",borderBottom:"1px solid ".concat(j.TV.outlineDimmer),overflowX:"hidden",textOverflow:"ellipsis"},"& code.selected":{backgroundColor:j.TV.accentPrimaryDimmer},"& code:last-of-type":{borderBottom:"unset"}}]}),v8=["Send","Close","Clear"],v6=new dl.J(function(e){return(0,N.BX)(W.G,{children:[(0,N.tZ)(W.G,{css:v3.status,children:(0,N.BX)(F.xv,{variant:"small",color:"dimmer",children:["Status:"," ",e.inProgress?(0,N.BX)(N.HY,{children:["In progress - ",e.inProgress]}):null]})}),(0,N.tZ)(W.G,{css:v3.buttons,children:Object.values(v8).map(function(t){return(0,N.tZ)(ep.zx,{size:"small",disabled:!e.enabled.has(t),text:t,onClick:function(){switch(t){case"Send":e.onSend();break;case"Close":e.onClose();break;case"Clear":e.onClear()}}},t)})})]})}),v5=n(35970),v7=n(99007),v9=n(21822),ge=n(57704),gt=(0,H.X)({wrapper:[j.l0.p(4)],list:[j.l0.colWithGap(4)],runningWorkflowListItem:[j.l0.rowWithGap(4),j.l0.align.center]});(p=D||(D={})).Repl="repl",p.Pid2="pid2",p.Pid2Repl="pid2Repl",p.Logs="logs",p.LSP="lsp",p.AI="ai",p.GhostwriterChat="aiChat",p.Git="git",p.History2="history2",p.Metadata="metadata",p.Override="override",p.DDRum="rum",p.CommandBar="commandBar",p.Workflows="workflows";var gn=(I={},(0,e5._)(I,"repl",function(){var e,t,n,r,i,o,a,l,c,s=(0,ez.Z)(),u=(e=(0,es._)({},vA,{variables:{replId:s}}),eJ.a(vL,e)).data,d=(null==u?void 0:u.repl.__typename)==="Repl"?JSON.parse(JSON.stringify(u.repl)):void 0;return d&&(delete d.__typename,null===(t=d.user)||void 0===t||delete t.__typename,null===(n=d.origin)||void 0===n||delete n.__typename,delete d.config.__typename,null===(r=d.source)||void 0===r||delete r.__typename,null===(o=d.source)||void 0===o||null===(i=o.release)||void 0===i||delete i.__typename,null===(c=d.source)||void 0===c||null===(l=c.release)||void 0===l||null===(a=l.repl)||void 0===a||delete a.__typename),(0,N.BX)(W.G,{css:vN,children:[(0,N.tZ)(vI.Z,{replId:s}),(0,N.tZ)("div",{children:d?(0,N.tZ)(vD.Z,{json:d}):null})]})}),(0,e5._)(I,"pid2",function(){var e,t,n=(0,mU.r9)(),r=(0,P._)((0,$.useState)(vk.Z.get("pid2Version","string")||""),2),i=r[0],o=r[1],a=(0,P._)((0,$.useState)("unknown"),2),l=a[0],c=a[1],s=(0,P._)((0,$.useState)(null),2),u=s[0],d=s[1],f=(0,m_.U)(function(e){return function(){c("loading");var t=setTimeout(function(){c("unhealthy")},5e3);e.healthCheck.ping.rpc({}).then(function(e){d(e.payload),clearTimeout(t),c("ok")}).catch(function(){clearTimeout(t),c("unhealthy")})}});return(0,N.BX)(W.G,{css:vH,children:[(0,N.BX)(F.h4,{level:3,children:["Is pid2 enabled? ",n?"Yes":"No"]}),(0,N.tZ)(ep.zx,{text:"Ping pid2 (state: ".concat(l,")"),colorway:"ok"===l?"green":"unhealthy"===l?"red":"grey",disabled:!f,onClick:function(){null==f||f()}}),u?(0,N.tZ)("code",{children:JSON.stringify(u,null,2)}):null,(0,N.tZ)(ep.zx,{text:"Assign pid2 client to window for testing",onClick:function(){window.pid2=n,vW.log("window.pid2: ",n)}}),(0,N.tZ)("label",{htmlFor:"pid2Version",children:(0,N.tZ)(F.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Custom pid2 version"})}),(0,N.tZ)(ef.II,{id:"pid2Version",placeholder:"pid2 hash (e.g. 76ce274246bb7a07f908076d3a74a0171c3267fb)",value:i,onChange:function(e){return o(e.currentTarget.value)}}),(0,N.BX)("p",{children:[(0,N.tZ)("code",{children:"pid2"})," version:"," ",(0,N.tZ)("code",{children:null!==(t=null!==(e=vk.Z.get("pid2Version","string"))&&void 0!==e?e:"177b27bd553af515e3f827bf69f78ca58b08e59d")&&void 0!==t?t:"dev"})]}),(0,N.tZ)(ep.zx,{colorway:"yellow",text:"Set pid2Version and reload",onClick:function(){vk.Z.set("pid2Version",i),window.location.reload()}}),(0,N.tZ)(ep.zx,{colorway:"orange",text:"Unset pid2Version and reload",onClick:function(){vk.Z.remove("pid2Version"),window.location.reload()}})]})}),(0,e5._)(I,"pid2Repl",function(){var e=(0,P._)((0,$.useState)(function(){return new vq.vU([])}),1)[0],t=(0,$.useCallback)(function(t){return e.update(function(e){return[t].concat((0,L._)(e))})},[e]),n=(0,P._)((0,$.useState)(null),2),r=n[0],i=n[1];(0,mZ.C)(function(e){return i({client:e}),function(){return i(null)}},[]);var o=v0.use(r,t);return(0,N.BX)(N.HY,{children:[(0,N.tZ)(ts.ZP,{language:"json",hideGutter:!0,extensions:o}),(0,N.tZ)(vJ,{logs:e,onClear:function(){return e.set([])}})]})}),(0,e5._)(I,"logs",function(e){var t=e.isHidden,n=(0,P._)((0,vf.Z)(!1),2),r=n[0],i=n[1],o=(0,P._)((0,$.useState)(null),2),a=o[0],l=o[1],c=(0,vm.gd)(),s=(0,vm.qc)(),u=(0,vm.$G)(),d=(0,vm.mN)(),f=(0,vm.Ay)(),h=(0,vm._t)();return t?null:(0,N.BX)(W.G,{css:vv.container,children:[(0,N.BX)(W.G,{css:vv.controls,children:[(0,N.tZ)(ep.zx,{colorway:s?void 0:"positive",onClick:u,text:s?"Stop logging goval":"Start logging goval"}),(0,N.BX)(W.G,{css:vv.filters,children:[(0,N.tZ)(ep.zx,{onClick:i,text:r?"Hide filters":"Show filters"}),a?(0,N.tZ)(ep.zx,{onClick:function(){return l(null)},text:"Reset Time Ref"}):null,(0,N.tZ)(M.hU,{alt:"Download as JSON",onClick:function(){var e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(c)),t=document.createElement("a");t.setAttribute("href",e);var n=new Date().toISOString();t.setAttribute("download","logs-".concat(n.slice(0,n.indexOf(".")).replaceAll("-","").replaceAll(":",""),".json")),t.click()},size:32,children:(0,N.tZ)(V.Z,{})}),(0,N.tZ)(ep.zx,{colorway:"negative",onClick:function(){return h()},text:"Clear logs"})]}),r?(0,N.tZ)(vC,{filters:d,updateFilters:function(e){f((0,es._)({},d,e))}}):null]}),(0,N.tZ)(vx,{logs:c,filters:d,timeRef:a,setTimeRef:l})]})}),(0,e5._)(I,"lsp",vp.L),(0,e5._)(I,"ai",vn.ho),(0,e5._)(I,"aiChat",function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).isHidden;return e?null:(0,N.tZ)(W.G,{children:(0,N.BX)(fp.mQ,{children:[(0,N.tZ)(fp.td,{"aria-label":"Tabs",children:Object.keys(vF).map(function(e){return(0,N.tZ)(fp.OK,{children:e},e)})}),(0,N.tZ)(fp.nP,{children:Object.entries(vF).map(function(e){var t=(0,P._)(e,2),n=t[0],r=t[1];return(0,N.tZ)(fp.x4,{children:(0,N.tZ)(r,{})},n)})})]})})}),(0,e5._)(I,"git",function(){var e,t=(0,P._)((0,$.useState)([]),2),n=t[0],r=t[1],i=(e=(0,es._)({},vl,void 0),eJ.a(vc,e)).data,o=(0,d1.Z)(vo.e);return(0,$.useEffect)(function(){o&&r(function(e){return e.length&&e[0].key===o.key?e:[o].concat((0,L._)(e)).slice(0,100)})},[o]),(0,N.BX)(W.G,{css:[j.l0.p(8)],children:[(0,N.BX)(em.Tg,{elevated:!0,css:[j.l0.borderRadius(8),j.l0.p(8),j.l0.mb(8)],children:[(0,N.tZ)("span",{children:"Git Service Connection Info"}),(0,N.tZ)("pre",{children:(null==i?void 0:i.currentUser)?JSON.stringify(i,function(e,t){return"accessToken"===e?"censored":t},2):"No gitHubInfo"})]}),(0,N.tZ)(W.G,{css:[j.l0.colWithGap(4)],children:n.length?n.map(function(e){return(0,N.tZ)(vs,{event:e},e.key)}):"No events yet..."})]})}),(0,e5._)(I,"history2",function(){var e=(0,a1.U)()("toggleIsShowingChanges"),t=(0,d1.Z)(lI.BI)(),n=(0,d1.Z)(lI.Jp)(),r=(0,P._)((0,vf.Z)(!1),2),i=r[0],o=r[1];if(!t)return null;var a=t.filePath,l=t.changes,c=t.users,s=t.version,u=t.playing,d=t.count,f=l[s];if(!f)return(0,N.BX)(W.G,{children:[(0,N.BX)("div",{children:["Change at ",s," not found. Here's the state"]}),(0,N.tZ)("pre",{children:JSON.stringify(t,null,2)})]});var h=null==c?void 0:c[f.userId],p=f.timestamp,m=i&&n?function(e,t){try{return(0,vd.ed)(e,t).op}catch(e){return e}}(f.changes,n.state.doc.sliceString(0)):null;return(0,N.BX)(W.G,{css:[j.l0.colWithGap(16),j.l0.p(4)],children:[(0,N.BX)(W.G,{css:[j.l0.colWithGap(4)],children:[(0,N.tZ)(vh,{t:"File",children:(0,N.tZ)("pre",{children:a})}),(0,N.BX)(vh,{t:"Version",children:[s," / ",d-1]}),(0,N.tZ)(vh,{t:"Playing",children:(0,N.tZ)(vu.Z,{children:u?"true":"false"})}),(0,N.tZ)(vh,{t:"Date",children:(0,N.tZ)(nB.EK,{date:p})})]}),h?(0,N.BX)(W.G,{children:[(0,N.tZ)(vh,{t:"Author",children:h.username}),(0,N.BX)(W.G,{css:[j.l0.pl(8),j.l0.colWithGap(4)],children:[(0,N.tZ)(vh,{t:"ID",children:h.id}),(0,N.tZ)(vh,{t:"Name",children:h.username}),(0,N.tZ)(vh,{t:"Image",children:(0,N.tZ)("a",{href:h.image,children:h.image})})]})]}):null,(0,N.BX)(W.G,{css:[j.l0.rowWithGap(8),{alignItems:"center"}],children:[(0,N.tZ)(lP.Z,{id:e,isOn:i,onChange:o}),(0,N.tZ)("label",{htmlFor:e,children:"Changes"})]}),f?null:"No changes",i&&f?(0,N.tZ)(N.HY,{children:(0,N.BX)(W.G,{children:[(0,N.tZ)(vh,{t:"Changeset",children:(0,N.tZ)("pre",{children:JSON.stringify(f,null,2)})}),n?(0,N.tZ)(N.HY,{children:(0,N.BX)(W.G,{css:[j.l0.mt(4)],children:[(0,N.tZ)(vh,{t:"OT",children:(0,N.tZ)("pre",{children:JSON.stringify(m,null,2)})}),(0,N.tZ)("p",{children:(0,N.BX)("small",{children:["Note that the OT value is translated ",(0,N.tZ)("em",{children:"back"})," to an operational transformation from the CodeMirror changeset."]})})]})}):null]})}):null]})}),(0,e5._)(I,"metadata",function(){var e=(0,q.Z)().container;(0,v_.Z)(e);var t=e.getConnectionMetadata();if(!t)return(0,N.tZ)("div",{children:"no token yet, wait for connection"});var n=t.token,r=new URL(t.conmanURL).host,i='./conman-repl -t "'.concat(n,'" -u ').concat(r);return(0,N.BX)("div",{css:vS.root,children:[(0,N.BX)(W.G,{css:vS.copyable,children:[(0,N.BX)(F.xv,{css:vS.command,multiline:!1,children:["conman Repl command: ",(0,N.tZ)(vu.Z,{children:i})]}),(0,N.tZ)(M.hU,{alt:"Copy to clipboard",onClick:function(){return(0,eh.Z)(i)},children:(0,N.tZ)(sm.Z,{})})]}),(0,N.BX)("div",{children:["metadata:",(0,N.tZ)("pre",{children:JSON.stringify(t,null,2)})]}),(0,N.tZ)("br",{}),(0,N.tZ)("br",{}),(0,N.BX)("div",{children:["parsed token:",(0,N.tZ)("pre",{children:JSON.stringify((0,mQ.he)(t.token),null,2)})]}),(0,N.tZ)("br",{}),(0,N.tZ)("br",{})]})}),(0,e5._)(I,"override",function(){var e=(0,P._)((0,$.useState)(vk.Z.get("gurl","string")||""),2),t=e[0],n=e[1],r=(0,P._)((0,$.useState)(""),2),i=r[0],o=r[1],a=dL(),l=""===t?"null":JSON.stringify((0,vE.t)(t),null,2);return(0,N.BX)(W.G,{css:[j.l0.pt(16),j.l0.px(12),j.l0.colWithGap(12)],children:[(0,N.BX)(W.G,{css:[j.l0.colWithGap(12)],children:[(0,N.tZ)(vR.ZP,{label:"Custom gurl",placeholder:"ws://localhost:".concat(4560),value:t,onChange:function(e){return n(e.currentTarget.value)}}),(0,N.BX)("pre",{children:["metadata override preview:",l]}),(0,N.BX)(W.G,{css:[j.l0.rowWithGap(12)],children:[(0,N.tZ)(vT.Z,{color:"positive",onClick:function(){vk.Z.set("gurl",t),window.location.reload()},children:"Set gurl and reload"}),(0,N.tZ)(vT.Z,{color:"yellow",onClick:function(){vk.Z.set("gurl","wss://eval.canary.replit.com"),window.location.reload()},children:"Switch to canary & reload"}),(0,N.tZ)(vT.Z,{color:"orange",onClick:function(){vk.Z.remove("gurl"),window.location.reload()},children:"Unset gurl and reload"}),(0,N.tZ)(vT.Z,{color:"red",onClick:function(){vk.Z.set("gurl","ws://localhost:4560"),window.location.reload()},children:"Switch to localhost & reload"})]}),(0,N.tZ)("div",{children:vk.Z.get("gurl","string")?"currently in localStorage: ".concat(vk.Z.get("gurl","string")):'No gurl set in local storage, using default gurl for this user, check "Token" tab for details'}),(0,N.tZ)("p",{children:"Gurl order of precedence:"}),(0,N.BX)("ol",{style:{margin:12},children:[(0,N.tZ)("li",{children:"‘gurl’ in localStorage (set above)"}),(0,N.BX)("li",{children:["If in development webapp and a there’s a response from",(0,N.tZ)("code",{children:"https://localhost:4563"})," or",(0,N.BX)("code",{children:["http://localhost:",4560]}),", then it will use that."]}),(0,N.BX)("li",{children:["default is ",(0,N.tZ)("code",{children:"wss://eval.<usercluster>.replit.com"})]})]})]}),(0,N.tZ)("hr",{css:[j.l0.my(16),{borderColor:j.TV.outlineDefault}]}),(0,N.BX)(W.G,{css:[j.l0.colWithGap(12)],children:[(0,N.tZ)(F.xv,{multiline:!1,children:"Override Database"}),(0,N.tZ)(vR.ZP,{type:"text",value:i,onChange:function(e){o(e.target.value)}}),(0,N.tZ)(W.G,{css:[j.l0.rowWithGap(8)],children:(0,N.tZ)(vT.Z,{color:"positive",onClick:function(){a(i)},children:"Override Postgres connection string"})})]})]})}),(0,e5._)(I,"rum",function(){var e,t=null===(e=vO.v.getInternalContext())||void 0===e?void 0:e.session_id,n=vO.v.getInitConfiguration(),r=null!=n&&100===n.sampleRate,i=(0,P._)((0,$.useState)(null!=t),2),o=i[0],a=i[1];return(0,N.tZ)(W.G,{css:[j.l0.colWithGap(16),j.l0.p(4)],children:r?(0,N.BX)(N.HY,{children:[(0,N.tZ)(ep.zx,{onClick:o?function(){vO.v.stopSessionReplayRecording(),document.cookie="_dd_s=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.location.href=window.location.href.split("?")[0]}:function(){(0,vU.Oo)({name:"replitOnReplit"}),setTimeout(function(){a(!0)},1e3)},text:o?"\uD83D\uDD34 Recording... Click to stop and reload page":"Start Recording",colorway:o?void 0:"primary",css:(0,es._)({},o&&eX.p.backgroundPulse(j.TV.redDimmest,j.TV.redDimmer))}),o?(0,N.tZ)(vM,{sessionId:t}):null]}):(0,N.tZ)(ep.zx,{onClick:function(){window.location.href=window.location.href.split("?")[0].split("#")[0]+"?rum=1"},text:"Click to reload and start recording",colorway:"primary"})})}),(0,e5._)(I,"commandBar",function(){var e=(0,vV.v)(),t=(0,vV.O)();return(0,N.tZ)(W.G,{css:vz.container,children:(0,N.BX)(W.G,{css:vz.toggleRow,children:[(0,N.tZ)(lP.Z,{id:"toggleCommandBarMatchScoresVisiblity",isOn:e,onChange:t}),(0,N.tZ)(F.xv,{children:"Show match scores in Command Bar"})]})})}),(0,e5._)(I,"workflows",function(){var e=(0,P._)((0,$.useState)([]),2),t=e[0],n=e[1],r=(0,P._)((0,$.useState)(void 0),2),i=r[0],o=r[1],a=(0,v9.Oo)(),l=(0,v9.D)(),c=(0,v9.QF)();(0,$.useEffect)(function(){var e,t,r=null!==(t=null==l?void 0:l.map(function(e){return{id:e.name}}))&&void 0!==t?t:[];n(r),o(null===(e=r[0])||void 0===e?void 0:e.id)},[l]);var s=(0,m_.U)(function(e){return function(t){var n=t.workflowId;return e.workflows.runWorkflow.rpc({workflowId:n})}},[]),u=(0,m_.U)(function(e){return function(t){var n=t.runId;e.workflows.stopRun.rpc({runId:n})}},[]);return(0,N.BX)(W.G,{css:gt.wrapper,children:[(0,N.BX)(W.G,{children:[(0,N.tZ)(v7.P,{"aria-label":"Workflow",onSelectionChange:function(e){o(e)},selectedKey:i,items:t,children:function(e){return(0,N.tZ)(v5.m9,{label:e.id},e.id)}}),(0,N.tZ)(ep.zx,{onClick:(0,tP._)(function(){return(0,tL.Jh)(this,function(e){switch(e.label){case 0:if(!i||!s)return[2];return[4,s({workflowId:i})];case 1:return e.sent(),[2]}})}),text:"Run",disabled:!i})]}),c?(0,N.tZ)(W.G,{children:Object.entries(c).map(function(e){var t=(0,P._)(e,2),n=t[0],r=t[1];return(0,N.BX)(W.G,{css:gt.runningWorkflowListItem,children:[n," step: ",r.step,r.step===ge.KX.RUNNING?(0,N.tZ)(ep.zx,{text:"Stop",onClick:function(){null==u||u({runId:n})}}):null]},n)})}):null,(0,N.BX)(W.G,{children:[(0,N.tZ)(F.xv,{children:"Run State"}),(0,N.tZ)(vD.Z,{json:c})]}),(0,N.BX)(W.G,{children:[(0,N.tZ)(F.xv,{children:"Config"}),(0,N.tZ)(vD.Z,{json:a})]})]})}),I),gr=Object.values(D),gi=(0,H.X)({surface:[j.l0.colWithGap(8),j.l0.p(4),j.l0.height("100%")],tabs:[{flexWrap:"wrap",flexDirection:"row",gap:"4px"}],tab:[j.l0.flex.growAndShrink(1),j.l0.overflow("auto")],content:[j.l0.flex.growAndShrink(1),j.l0.height("100%")]});function go(e){var t=e.paneOptions,n=(0,P._)((0,$.useState)("repl"),2),r=n[0],i=n[1],o=gr.map(function(e){return(0,N.tZ)(ep.zx,{colorway:e===r?"primary":void 0,onClick:function(){return i(e)},text:e},e)});return(0,N.BX)(em.Tg,{background:"default",css:gi.surface,children:[(0,N.tZ)(W.G,{css:gi.tabs,children:o}),(0,N.tZ)(W.G,{css:gi.tab,children:Object.entries(gn).map(function(e){var n=(0,P._)(e,2),i=n[0],o=n[1];return(0,N.tZ)(W.G,{css:gi.content,style:{display:i!==r?"none":"inherit"},children:"override"===i&&"override"!==r?null:(0,N.tZ)(o,{isHidden:t.isHidden||r!==i})},i)})})]})}var ga=O.Dy.Object({type:O.Dy.Literal("adminPanel")}),gl={Content:function(e){var t=e.options;return(0,N.tZ)(go,{paneOptions:t})},Icon:function(e){var t=e.size;return(0,N.tZ)(e4.Pd.Provider,{value:{color:e3.TV.redStronger,size:t},children:(0,N.tZ)(vt.Z,{})})},getTitle:function(){return"Debug"},getTitlePill:function(){return{text:"Staff-only",colorway:"warning"}},description:"Replit developer debugging tools",decode:function(e){return U.B4.Decode(ga,e)}},gc=n(69750),gs=n(86471),gu=(0,H.X)({shadow:{position:"absolute",'&[data-position="top"], &[data-position="bottom"]':{left:0,right:0,height:12},'&[data-position="left"], &[data-position="right"]':{top:0,bottom:0,height:12},'&[data-position="top"]':{top:0,backgroundImage:"linear-gradient(to top, transparent, var(--shadow-color))"},'&[data-position="bottom"]':{bottom:0,backgroundImage:"linear-gradient(to bottom, transparent, var(--shadow-color))"},'&[data-position="left"]':{left:0,backgroundImage:"linear-gradient(to left, transparent, var(--shadow-color))"},'&[data-position="right"]':{right:0,backgroundImage:"linear-gradient(to right, transparent, var(--shadow-color))"}}});function gd(e){var t=e.scrolledAmount,n=e.scrollableAmount,r=e.orientation,i=void 0===r?"vertical":r,o=e.hideEnd,a=e.shadowColor,l=void 0===a?"rgba(2, 2, 3, 0.32)":a;return(0,N.BX)(N.HY,{children:[t>0&&(0,N.tZ)("div",{css:gu.shadow,"data-position":"vertical"===i?"top":"left",style:{"--shadow-color":l}}),!(void 0!==o&&o)&&t<n&&(0,N.tZ)("div",{css:gu.shadow,"data-position":"vertical"===i?"bottom":"right",style:{"--shadow-color":l}})]})}var gf=n(83138),gh=(0,H.X)({root:[j.l0.colWithGap(8)],header:[j.l0.flex.row,j.l0.justify.spaceBetween,j.l0.height(36)],description:[j.l0.flex.column,j.l0.gap(8)],divider:[j.l0.backgroundColor.outlineDimmer],package:[j.l0.p(4),j.l0.flex.row,j.l0.align.center,j.l0.border({color:"transparent"}),j.l0.justify.spaceBetween],packageList:[j.l0.maxHeight(220),j.l0.overflowY("auto")],packageMetadata:[j.l0.flex.row,j.l0.flex.growAndShrink(1),j.l0.align.center,j.l0.overflow("hidden"),j.l0.mr(8)],packageName:[j.l0.truncate,j.l0.flex.growAndShrink(1),j.l0.mx(8),{"> a":[j.l0.ml(4),{color:"currentColor",lineHeight:0}]}],packagerRoot:[j.l0.flex.column,j.l0.gap(8)],packager:[j.l0.backgroundColor.backgroundHigher,j.l0.borderRadius(4),j.l0.overflow("hidden")],packagerHeader:[j.l0.pl(4),j.l0.flex.row,j.l0.justify.spaceBetween,j.l0.flex.growAndShrink(1)],packagerHeaderTitle:[j.l0.truncate,j.l0.flex.shrink(1)],shadow:{position:"absolute",left:0,width:"100%",height:10,'&[data-position="top"]':{top:0,backgroundImage:"linear-gradient(to top, transparent, rgba(2, 2, 3, 0.32))"},'&[data-position="bottom"]':{bottom:0,backgroundImage:"linear-gradient(to bottom, transparent, rgba(2, 2, 3, 0.32))"}}});function gp(e){var t=e.pkg,n=e.uninstall,r=(0,pt.ZR)(),i=pi(t),o=(0,$.useMemo)(function(){var e=(null==i?void 0:i.description)||t.description;if(e&&/<[^>]+>|<\/[^>]+>/.test(e)){var n=document.createElement("DIV");return n.innerHTML=e,(n.textContent||n.innerText||"").trim()}return e},[null==i?void 0:i.description,t.description]),a=(0,gc.Z)((null==i?void 0:i.license)||t.license),l=(0,$.useMemo)(function(){if(i){var e;return(0,eu._)((0,es._)({},i),{version:null!==(e=null==i?void 0:i.version)&&void 0!==e?e:t.spec,name:(null==r?void 0:r.id)==="nix"&&(null==i?void 0:i.prettyName)||t.name,license:a,description:o})}return t},[null==r?void 0:r.id,o,i,a,t]),c=(0,fQ.cW)(),s=(0,fQ.B2)(),u=(0,$.useMemo)(function(){return c.some(function(e){return e.pkgs.some(function(e){return e.name===t.name})})},[t.name,c]),d=(0,$.useMemo)(function(){return!!(null!==s&&s.pkgs.find(function(e){return e.name===t.name}))},[s]);return(0,N.BX)(W.G,{css:gh.package,tag:"li",children:[(0,N.BX)(W.G,{css:gh.packageMetadata,children:[(0,N.tZ)(pe.Z,{}),(0,N.BX)(F.xv,{css:gh.packageName,children:[l.name,l.homepageURL?(0,N.tZ)("a",{href:l.homepageURL,target:"_blank",children:(0,N.tZ)(r3.Z,{})}):null]}),l.version?(0,N.tZ)(F.xv,{color:"dimmer",children:l.version}):null]}),(0,N.BX)(W.G,{css:[j.l0.flex.row,j.l0.gap(4),j.l0.align.center],children:[l.description||l.license?(0,N.tZ)(tB.u,{tooltip:(0,N.BX)("div",{children:[(0,N.tZ)("div",{children:l.description}),l.license?(0,N.tZ)(F.xv,{variant:"small",color:"dimmer",children:l.license}):null]}),children:(0,N.tZ)(lX.Z,{})}):null,(0,N.tZ)(M.hU,{alt:"Uninstall",disabled:d||u,onClick:function(){n()},children:(0,N.tZ)(sD.Z,{})})]})]})}function gm(e){var t=e.onAddPackage,n=e.name,r=e.id;return(0,N.BX)(W.G,{css:gh.packagerHeader,children:[(0,N.tZ)(F.xv,{css:gh.packagerHeaderTitle,id:r,children:n}),(0,N.tZ)(M.hU,{alt:"Add new package",onClick:t,children:(0,N.tZ)(nG.Z,{})})]})}function gv(e){var t=e.packages,n=e.labelId,r=(0,pt.ZR)(),i=(0,fQ.Wx)(),o=(0,$.useRef)(null),a=(0,nE.MG)({count:t.length,getScrollElement:function(){return o.current},estimateSize:function(){return 34},overscan:10,measureElement:function(e){return e.getBoundingClientRect().height}}),l=(0,P._)((0,$.useState)(0),2),c=l[0],s=l[1],u=(0,P._)((0,$.useState)(0),2),d=u[0],f=u[1],h=a.getTotalSize();return r?(0,N.tZ)(W.G,{css:j.l0.position.relative,innerRef:function(e){e&&f(e.offsetHeight)},children:(0,N.BX)(W.G,{innerRef:o,css:gh.packageList,onScroll:function(e){s(e.target.scrollTop)},children:[t.length>0?(0,N.tZ)(nT.R,{css:gh.divider}):null,(0,N.tZ)(gd,{scrolledAmount:c,scrollableAmount:h-d,hideEnd:!0}),(0,N.tZ)(W.G,{style:{height:h},tag:"ul","aria-labelledby":n,children:a.getVirtualItems().map(function(e){var n=t[e.index];return(0,N.tZ)(gp,{pkg:n,uninstall:function(){i({id:r.id,pkg:n})}},n.name)})})]})}):null}function gg(e){var t=e.setViewState,n=(0,pt.ZR)(),r=(0,fQ.te)(null==n?void 0:n.id),i=(0,$.useMemo)(function(){return r.filter(function(e){return e.name}).sort(function(e,t){return e.name&&t.name?e.name.localeCompare(t.name):0})},[r]),o=(0,$.useId)();return n?(0,N.BX)(W.G,{css:gh.packagerRoot,children:[(0,N.tZ)(W.G,{css:gh.packager,children:(0,N.tZ)(eL.Q,{defaultExpanded:!0,headerContent:(0,N.tZ)(gm,{id:o,name:n.name,onAddPackage:function(){t({view:gs.z.PackageSearch,packagerConfig:n})}}),children:i.length>0?(0,N.tZ)(gv,{packages:i,labelId:o}):null})}),(0,N.tZ)(ep.zx,{colorway:"primary",variant:"outlined",text:"Add new package",iconLeft:(0,N.tZ)(nG.Z,{}),onClick:function(){t({view:gs.z.PackageSearch,packagerConfig:n})}})]}):null}function gy(e){var t=e.configs,n=e.description,r=e.title,i=(0,te._)(e,["configs","description","title"]);return(0,N.BX)(W.G,{children:[(0,N.tZ)(W.G,{css:gh.header,children:(0,N.tZ)(F.h4,{variant:"subheadDefault",level:2,children:r})}),(0,N.BX)(W.G,{css:gh.root,children:[(0,N.tZ)(gf.M,{color:"dimmer",css:gh.description,children:n}),t.length>0?t.map(function(e){return(0,N.tZ)(pT.Z,{config:e,children:(0,N.tZ)(gg,(0,es._)({},i))},e.id)}):null]})]})}function gb(e){var t=(0,fK.I)().configs,n=(0,$.useMemo)(function(){return t.filter(function(e){return"nix"!==e.id})},[t]);return(0,N.tZ)(gy,(0,eu._)((0,es._)({title:"Project Imports"},e),{configs:n,description:(0,N.BX)(N.HY,{children:[(0,N.tZ)("p",{children:"Packagers manage language-specific dependencies for your project. These can be imported directly from your codebase."}),0===n.length?(0,N.tZ)(F.xv,{color:"dimmest",children:"You don't currently have any packagers. Add support for your language below by adding a module."}):null]})}))}function gw(e){var t=(0,fK.I)().configs,n=(0,$.useMemo)(function(){return t.find(function(e){return"nix"===e.id})},[t]);return n?(0,N.tZ)(gy,(0,eu._)((0,es._)({title:"System Dependencies",description:(0,N.BX)("span",{children:["Add additional support to your environment with"," ",(0,N.tZ)("a",{href:"https://search.nixos.org/packages",target:"_blank",children:"Nix packages."})]})},e),{configs:[n]})):null}var gZ=n(65326),gx=n(54742),gC=(0,H.X)({root:[j.l0.p(8),j.l0.colWithGap(8)],header:[j.l0.rowWithGap(4),j.l0.align.center],section:[j.l0.colWithGap(4)],sectionHeader:[j.l0.flex.row,j.l0.justify.spaceBetween]});function g_(e){var t=e.header,n=e.description,r=e.initialValue,i=e.rightHeaderContent,o=(0,a1.U)(),a=(0,P._)((0,$.useState)(r||""),2),l=a[0],c=a[1];return(0,N.BX)(W.G,{css:gC.section,children:[(0,N.BX)(W.G,{css:gC.sectionHeader,children:[(0,N.tZ)(F.h4,{level:2,variant:"subheadDefault",children:t}),i||null]}),(0,N.tZ)(ef.II,{id:o("section-".concat(t)),value:l,onChange:function(e){return c(e.target.value)}}),(0,N.tZ)(F.xv,{color:"dimmer",variant:"small",children:n})]})}function gS(e){var t,n,r,i,o=e.item,a=e.setViewState,l=(0,P._)((0,$.useState)(!0),2),c=l[0],s=l[1];return(0,N.BX)(W.G,{css:gC.root,children:[(0,N.BX)(W.G,{css:gC.header,children:[(0,N.tZ)(M.hU,{alt:"Back",onClick:function(){a({view:gs.z.Overview})},children:(0,N.tZ)(ui.Z,{})}),(0,N.tZ)(F.h4,{level:1,variant:"subheadBig",children:o.name})]}),(0,N.tZ)(g_,{header:"Apply To",description:"Always apply to files that match these globs",initialValue:null!==(r=null===(t=o.fileTypeAttrs)||void 0===t?void 0:t.filePattern)&&void 0!==r?r:""}),(0,N.tZ)(g_,{header:"Detect new files",rightHeaderContent:(0,N.tZ)(lP.Z,{isOn:c,onChange:function(){s(function(e){return!e})}}),description:"Suggest for any new files that match these extensions",initialValue:(null!==(i=null===(n=o.fileTypeAttrs)||void 0===n?void 0:n.extensions)&&void 0!==i?i:[]).join(", ")}),(0,N.tZ)(g_,{header:"Ignore",description:"Exclude specific files from these rules"})]})}var gk=n(12789),gE=n(83238),gT=(0,H.X)({root:[j.l0.p(12),j.l0.flex.column,j.l0.gap(24),j.l0.width("100%"),j.l0.maxWidth(600),{margin:"0 auto"}],systemModules:[j.l0.flex.column,j.l0.gap(8)],sectionHeader:[j.l0.flex.row,j.l0.justify.spaceBetween,j.l0.height(36)],loading:[j.l0.center,j.l0.flex.growAndShrink(1)]});function gR(){var e=(0,gk._)(),t=e.modules,n=e.configs,r=(0,gE.Z)(),i=(0,P._)((0,$.useState)({view:gs.z.Overview}),2),o=i[0],a=i[1];if(!t||!n||!r)return(0,N.tZ)(W.G,{css:gT.loading,children:(0,N.tZ)(z.Z,{})});switch(o.view){case gs.z.FormatterInfo:var l=n.formatters.find(function(e){return e.id===o.formatterId});if(!l)throw Error("Expected formatter");return(0,N.tZ)(gS,{setViewState:a,item:l});case gs.z.LanguageServerInfo:var c=n.languageServers.find(function(e){return e.id===o.languageServerId});if(!c)throw Error("Expected language server");return(0,N.tZ)(gS,{setViewState:a,item:c});case gs.z.PackageSearch:return(0,N.tZ)(gx.E,{packagerConfig:o.packagerConfig,setViewState:a});case gs.z.ModuleSearch:return(0,N.tZ)(gx.M,{setViewState:a,registry:r,modules:t});case gs.z.Overview:return(0,N.BX)(W.G,{css:gT.root,children:[(0,N.tZ)(gb,{setViewState:a}),(0,N.BX)(W.G,{children:[(0,N.tZ)(W.G,{css:gT.sectionHeader,children:(0,N.tZ)(F.h4,{variant:"subheadDefault",level:2,children:"System Modules"})}),(0,N.BX)(W.G,{css:gT.systemModules,children:[(0,N.tZ)(gf.M,{color:"dimmer",children:"Modules combine support for programming languages, formatters, and packagers. These provide the foundation for your Repl."}),(0,N.tZ)(gZ.Z,{modules:t}),(0,N.tZ)(ep.zx,{text:"Add new module",variant:t.length>0?"outlined":"default",colorway:"primary",iconLeft:(0,N.tZ)(nG.Z,{}),onClick:function(){a({view:gs.z.ModuleSearch})}})]})]}),(0,N.tZ)(gw,{setViewState:a})]});default:(0,nk.Z)(o)}}var gD=O.Dy.Object({type:O.Dy.Literal("dependencies")}),gI={Content:function(){return(0,N.tZ)(gR,{})},Icon:function(e){var t=e.size;return(0,N.tZ)(mW.Z,{size:t})},getTitle:function(){return"Dependencies"},description:"Install, upgrade, and manage dependencies for your environment, build system, and application runtime",decode:function(e){return U.B4.Decode(gD,e)}},gB=n(62924),gG=n(3212),gA=n(44167),gP=n(5357),gL=n(38101),gN=n(9413),gO=n(50274),gU=n(53557),gM=n(16764),gX=n(82314),gF=n(69249),gW=n(84645),gH=function(e){return"color-mix(in srgb, ".concat(e3.TV.blurpleDefault," ").concat(100*e,"%, transparent)")},gV=j.nC.min(440),gz=(0,eU.F4)({"0%":{opacity:0},"100%":{opacity:1}}),gj=(0,ha.$)(["animationDelay"]),gq=gj.styleTokens,gJ=gj.cssVars,gY=(0,H.X)({root:[j.l0.reset.button,nR.gU.filled,j.l0.borderRadius(4),j.l0.align.center,j.l0.p(6),j.l0.color.blurpleDefault,j.l0.cursor.pointer,j.l0.align.start,(B={},(0,e5._)(B,gV,[j.l0.rowWithGap(4),j.l0.align.center]),(0,e5._)(B,nR.dj.interactiveBackground,gH(.1)),(0,e5._)(B,nR.dj.interactiveBackgroundActive,gH(.2)),(0,e5._)(B,"opacity",0),(0,e5._)(B,"animationName",gz),(0,e5._)(B,"animationDuration","800ms"),(0,e5._)(B,"animationFillMode","forwards"),(0,e5._)(B,"animationTimingFunction","ease-out"),(0,e5._)(B,"animationDelay",gq.animationDelay),B)],iconText:j.l0.rowWithGap(4)});function g$(e){return(0,N.BX)(W.G,{css:gY.root,onClick:e.onClick,style:(0,e5._)({},gJ.animationDelay,20*e.index+"ms"),children:[(0,N.BX)(W.G,{css:gY.iconText,children:[(0,$.cloneElement)(e.icon,{size:16,color:e3.TV.blurpleDefault}),(0,N.tZ)(F.xv,{variant:"small",children:e.text})]}),(0,N.tZ)(F.xv,{variant:"small",color:"dimmer",children:e.description})]})}var gK=(0,H.X)({root:[j.l0.flex.growAndShrink(1),j.l0.position.relative,j.l0.overflow("auto"),j.l0.display.block],content:[j.l0.py(32),j.l0.px(32),j.l0.center,j.l0.colWithGap(12),j.l0.minHeight("100%")],header:[j.l0.colWithGap(8),j.l0.align.center,j.l0.maxWidth(370),j.l0.textAlign.center],buttons:[j.l0.colWithGap(8),(0,e5._)({},gV,[j.l0.align.center])],mobileWrapper:[j.l0.p(48),j.l0.center],mobileText:[j.l0.textAlign.center],titleWrapper:[j.l0.rowWithGap(4),j.l0.align.center]});function gQ(e){var t,n,r=e.onPromptClick,i=(t=(0,P._)((0,pj.Bx)(),1)[0],n=(0,nm.P5)({controlName:"flag-porygon-button",logFlagToAnalytics:!1}),(0,$.useMemo)(function(){var e,r=t?gU.$R.from(t):null,i=null!=t?t:"index.js",o=[{icon:(0,N.tZ)(gX.Z,{}),title:"Generate",description:"Create a personal assistant chatbot",action:"GENERATE"},{icon:(0,N.tZ)(vt.Z,{}),title:"Debug",description:t?"Find bugs in ".concat(t):"Fix the price updating logic",action:"DEBUG"},{icon:(0,N.tZ)(gM.Z,{}),title:"Explain",description:"How does ".concat(i," work?"),action:"EXPLAIN",promptToFill:"How does ".concat(i," work?")},{icon:(0,N.tZ)(gM.Z,{}),title:"Ask replit.com",description:"How do I deploy a ".concat(null!==(e=null==r?void 0:r.name)&&void 0!==e?e:"python"," project?"),action:"REPLIT_DOCS"}];return n?(0,L._)(o).concat([{icon:(0,N.tZ)(ij.Z,{}),title:"Agent Mode",description:"Let the agent work for you",action:"AGENT",promptToFill:""}]):o},[n,t])),o=(0,az.useRouter)(),a=(0,aH.S7)(o,"hideChatInput");return r?a?(0,N.tZ)(W.G,{css:gK.mobileWrapper,children:(0,N.tZ)(F.xv,{css:gK.mobileText,children:"Ask AI below for help setting up new projects, answering questions about your code, and assisting your thinking."})}):(0,N.tZ)(W.G,{css:gK.root,children:(0,N.BX)(W.G,{css:gK.content,children:[(0,N.BX)(W.G,{css:gK.header,children:[(0,N.tZ)(gF.R,{advanced:!0,showUsername:!1}),(0,N.BX)(W.G,{css:gK.titleWrapper,children:[(0,N.tZ)(F.xv,{variant:"subheadBig",children:"Replit AI"}),(0,N.tZ)(gW.C,{})]}),(0,N.tZ)(F.xv,{color:"dimmest",children:"Use Replit AI to set up new projects, answer questions about your code, and assist your thinking."})]}),(0,N.tZ)(W.G,{css:gK.buttons,children:i.map(function(e,t){return(0,N.tZ)(g$,{index:t,icon:e.icon,text:e.title,description:e.description,onClick:function(){var t,n=null!==(t=e.promptToFill)&&void 0!==t?t:e.description;(0,lT.j)(lT.U3.GHOSTWRITER_CHAT_EXAMPLE_CLICKED,{title:e.title}),r({intent:e.action,value:n})}},e.action)})})]})}):null}var g0=n(42347),g1=O.Dy.Object({type:O.Dy.Literal("ghostwriterChat"),data:O.Dy.Optional(O.Dy.Object({sessionId:O.Dy.Optional(O.Dy.String())}))}),g2=(0,H.X)({root:[j.l0.center,j.l0.flex.growAndShrink(1),j.l0.p(16)]});function g4(){return(0,N.tZ)(W.G,{css:g2.root,children:(0,N.tZ)(F.xv,{children:"AI is disabled for this team"})})}var g3={Content:function(e){var t,n,r,i,o,a,l,c,s,u,d=e.pane.data,f=e.options,h=(0,nm.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1}),p=f.performPaneOperation,m=(0,$.useCallback)(function(e){p({operation:"open",pane:"string"==typeof e?(0,J.$E)(e):{type:(0,eo.Dp)(e),data:e},secondary:!0})},[p]),v=(0,q.Z)(),g=v.fs,y=v.dotReplit,b=(t=(0,pj.AA)(),n=(0,gA.T)(),(0,$.useCallback)((r=(0,tP._)(function(e){var r,i,o,a,l;return(0,tL.Jh)(this,function(c){switch(c.label){case 0:return[4,g.listFiles()];case 1:if((r=c.sent()).error||!r.files)return[2,{error:null!==(i=r.error)&&void 0!==i?i:"Something went wrong",files:null}];if(o=r.files.filter(function(e){return!n(e)}),!e)return[3,3];return[4,(0,gP.Rz)(e,o)];case 2:return l=c.sent(),[3,4];case 3:l=(0,gG.Z)(o,{existing:t(),getKey:function(e){return e}}).map(function(e){return{path:e}}),c.label=4;case 4:return a=l,[2,{total:o.length,files:a,error:null}]}})}),function(e){return r.apply(this,arguments)}),[g,n,t])),w=(0,vX.G)(g,y),Z=(0,pj._3)(),x=(0,gO.Ds)(),C=(0,ea.Lx)(),_=(0,$.useMemo)(function(){return{openFile:m,listFiles:g.listFiles,findFiles:b,getFileContext:w,codeInsertObservable:x}},[m,b,w,x,g]),S=(0,$.useMemo)(function(){return{suggestedTemplateCard:function(e){return(0,N.tZ)(g0.wh,(0,es._)({},e))}}},[]),k=(0,P._)((0,$.useState)(null),2),E=k[0],T=k[1],R=(0,P._)((0,$.useState)(null),2),D=R[0],I=R[1];o=(i={sessionId:null==D?void 0:D.sessionId,setSessionId:null==D?void 0:D.setSessionId,data:d,performPaneOperation:p}).sessionId,a=i.setSessionId,l=i.data,c=i.performPaneOperation,(0,$.useEffect)(function(){o&&(null==l?void 0:l.sessionId)!==o&&c({operation:"replace",pane:{type:"ghostwriterChat",data:{sessionId:o}}})},[o,c,l]),s=null==l?void 0:l.sessionId,u=(0,td.Z)(o),(0,$.useEffect)(function(){a&&s&&s!==u.current&&a(s)},[s,u,a]),(0,Y.Wk)(function(){return E},[E]);var B=(0,nm.P5)({controlName:"flag-porygon-button",logFlagToAnalytics:!1}),G=(0,$.useCallback)(function(){p({operation:"special",type:"agent-mode"})},[p]);return(0,gN.v)().isTeamWithAiDisabled?(0,N.tZ)(g4,{}):h?(0,N.tZ)(gL.Z,{textVariant:"headerDefault",showImage:!0}):(0,N.tZ)(gB.S,{sessionRef:I,inputRef:T,initialSessionId:null==d?void 0:d.sessionId,recentFilesObservable:Z,workspace:_,replCreationSession:S,hideHeader:C,hideModelSelector:C,hideRagCheckbox:C,inputVariant:C?"compact":void 0,renderEmptyState:function(e){return(0,N.tZ)(gQ,(0,es._)({},e))},onEnterAgentMode:B?G:void 0,analyticsMessageSurface:"workspace_ai_pane"})},Icon:function(e){var t=e.size;return(0,N.tZ)(e4.Pd.Provider,{value:{color:j.TV.blurpleStrongest,size:t},children:(0,N.tZ)(ij.Z,{})})},getTitle:function(){return"AI"},description:"Use Replit AI to set up new projects, answer questions about your code, and assist your thinking",decode:function(e){return U.B4.Decode(g1,e)}},g8=n(39712),g6=n(17841),g5=n(99609),g7=n(818),g9=n(25200),ye=n(25165),yt=n(25360),yn=n(14775),yr=n(36809),yi=n(71326),yo=n(77847),ya=n(79125),yl=n(84522),yc=n(89421),ys=n(68586),yu=n(29507);function yd(){var e=(0,ej._)(["\n  query SshPane($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          connectUsingSsh {\n            isAuthorized\n            message\n            code\n          }\n        }\n        org {\n          id\n          type\n        }\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n  }\n"]);return yd=function(){return e},e}function yf(){var e=(0,ej._)(["\n  query SshPaneCurrentUser {\n    currentUser {\n      id\n      __typename\n      publicSshKeys {\n        ... on PublicSshKeysOutput {\n          keys {\n            id\n            key\n            label\n            timeCreated\n          }\n        }\n        ... on UnauthorizedError {\n          message\n        }\n      }\n    }\n  }\n"]);return yf=function(){return e},e}var yh={},yp=(0,eq.Ps)(yd()),ym=(0,eq.Ps)(yf());function yv(){var e=(0,ya.Z)(),t=e.openInVSCode,n=e.onConfirmConfig,r=e.isConfigModalOpen,i=e.closeConfigModal;return(0,N.BX)(em.Tg,{css:yb.connectInstructions,elevated:!0,children:[(0,N.BX)(W.G,{css:yb.connectHeader,children:[(0,N.tZ)(F.h4,{level:3,children:"Connect to VS Code"}),(0,N.tZ)(F.xv,{color:"dimmer",children:"One-click SSH setup will launch VS Code and configure keys for you."})]}),(0,N.tZ)(ep.zx,{text:"Launch VS Code",iconLeft:(0,N.tZ)(g7.Z,{}),css:yb.launchVSCodeButton,onClick:function(){(0,lT.j)(lT.U3.OPEN_IN_VSCODE_CLICKED,{source:"ssh_pane"}),t()}}),(0,N.tZ)(rX.u,{isOpen:r,onRequestClose:i,centered:!0,children:(0,N.tZ)(ye.Z,{onConfirm:n})})]})}function yg(e){var t=e.sshHostname,n=e.sshUser,r=e.sshPort,i=(0,yo.Z)(),o="ssh -i ".concat(i,"/.ssh/replit -p ").concat(r," ").concat(n,"@").concat(t);return(0,N.BX)(em.Tg,{css:yb.connectInstructions,elevated:!0,children:[(0,N.BX)(W.G,{css:yb.connectHeader,children:[(0,N.tZ)(F.h4,{level:3,children:"Connect manually"}),(0,N.tZ)(F.xv,{color:"dimmer",children:"Use the command below to connect via CLI or another IDE."})]}),(0,N.tZ)(yt.Z,{code:o,header:"Shell command",multiline:!1,onCopy:function(){(0,lT.j)(lT.U3.COPY_SSH_KEY_COMMAND_CLICKED,{source:"ssh_pane"})}})]})}function yy(e){var t=e.onPurchaseComplete,n=e.org,r=e.sshAuthz,i=(0,P._)((0,$.useState)(!1),2),o=i[0],a=i[1];return r.code===a2.RO.RequiresActiveSubscription&&(null==n?void 0:n.type)!==a2.a4.Team?(0,N.BX)(W.G,{css:yb.requireSubscription,children:[(0,N.BX)(F.h4,{level:3,variant:"subheadDefault",children:["SSH is only available to Replit ",dz.we," Members."]}),(0,N.BX)(F.xv,{children:["With SSH, you can access your Repl's shell remotely. SSH enables workflows like easy file transfer or using your favorite local IDE to edit your code on Replit."," ",(0,N.tZ)("a",{href:"https://docs.replit.com/replit-workspace/ssh",target:"_blank",children:"Learn more here"})]}),(0,N.tZ)(ep.zx,{onClick:function(){return a(!0)},text:"Join Replit ".concat(dz.we),iconLeft:(0,N.tZ)(g6.Z,{}),colorway:"blurple"}),(0,N.tZ)(yc.Z,{isOpen:o,onClose:function(){return a(!1)},type:"purchase",onPurchaseComplete:t,analyticsContext:{upgrade:{context:"cycles_page"}}})]}):(0,N.tZ)(rF.E,{colorway:"warning",text:r.message})}var yb=(0,H.X)({manageKeys:[j.l0.flex.row,j.l0.justify.spaceBetween],tabContainer:[j.l0.colWithGap(8),j.l0.p(8)],loading:[j.l0.center,j.l0.coverContainer],requireSubscription:[j.l0.colWithGap(16)],connectEmptyState:[j.l0.colWithGap(8),j.l0.center,j.l0.border({color:j.TV.outlineDefault,width:1,style:"dashed"}),j.l0.borderRadius(4),j.l0.py(24),j.l0.px(12)],connectHeader:[j.l0.colWithGap(4)],connectInstructions:[j.l0.colWithGap(12),j.l0.p(8),j.l0.borderRadius(4)],connectContainer:[j.l0.colWithGap(16),j.l0.py(8)],launchVSCodeButton:[j.l0.borderRadius(8)]});function yw(e){var t=e.legacyKeys,n=e.openFile,r=(0,ez.Z)(),i="legacy-ssh-keys-warning-".concat(r),o=(0,P._)((0,$.useState)(function(){return!vk.Z.get(i,"boolean")}),2),a=o[0],l=o[1],c=(0,$.useRef)(!1);return((0,$.useEffect)(function(){return vk.Z.get(i,"boolean")||l(!0),function(){c.current&&vk.Z.set(i,!0)}},[i]),t&&0!==t.length&&a)?(0,N.tZ)(W.G,{children:(0,N.tZ)(sP.u,{colorway:"warning",iconLeft:(0,N.tZ)(rv.Z,{}),text:"Don't see your SSH keys here? We're moving from Repl-level keys to user-level keys. Click here to view your existing keys and re-add them using the 'New SSH Key' button above.",onClick:function(){n(yi.J),c.current=!0}})}):null}function yZ(e){var t,n,r,i,o,a,l=(o=(0,es._)({},yh,void 0),eJ.a(ym,o)),c=l.data,s=l.loading,u=(0,P._)((0,$.useState)(!1),2),d=u[0],f=u[1],h=(0,P._)((0,$.useState)(0),2),p=h[0],m=h[1],v=(n=(t=(0,P._)((0,$.useState)(null),2))[0],r=t[1],i=(0,q.Z)().fs,(0,$.useEffect)(function(){function e(){return(e=(0,tP._)(function(){var e;return(0,tL.Jh)(this,function(t){switch(t.label){case 0:return[4,i.readFile(yi.J)];case 1:if((e=t.sent()).error===se.Df.NotFound||e.error===se.Df.IsDirectory)return[2];if(e.error)throw Error("Unexpected error reading authorized keys");return r(e.content.toString().split("\n").map(function(e){return e.startsWith("#")||(0,yu.Z)(e)?null:e}).filter(Boolean)),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[i]),n),g=(0,yl.Z)();if(s||!g)return(0,N.tZ)(W.G,{css:yb.loading,children:(0,N.tZ)(z.Z,{size:24})});var y=g.sshHostname,b=g.sshUser,w=g.sshPort,Z=c&&(null===(a=c.currentUser)||void 0===a?void 0:a.__typename)==="CurrentUser"&&"PublicSshKeysOutput"===c.currentUser.publicSshKeys.__typename?c.currentUser.publicSshKeys.keys:[],x=Z.length>=ys.R;return(0,N.BX)(fp.mQ,{selectedIndex:p,onSelectionChange:m,children:[(0,N.BX)(fp.td,{children:[(0,N.tZ)(fp.OK,{iconLeft:(0,N.tZ)(g6.Z,{}),children:"Connect"}),(0,N.tZ)(fp.OK,{iconLeft:(0,N.tZ)(g5.Z,{}),children:"Keys"})]}),(0,N.BX)(fp.nP,{children:[(0,N.tZ)(fp.x4,{children:(0,N.BX)(W.G,{css:yb.tabContainer,children:[(0,N.tZ)(F.h4,{variant:"subheadDefault",level:2,children:"Use Replit with another editor"}),(0,N.tZ)(F.xv,{color:"dimmer",children:"SSH allows you to connect to a Repl from another machine or IDE."}),0===Z.length?(0,N.BX)(W.G,{css:yb.connectEmptyState,children:[(0,N.tZ)(g5.Z,{size:24,color:j.TV.foregroundDimmest}),(0,N.tZ)(F.xv,{color:"dimmer",children:"You need to add an SSH key to your account before connecting"}),(0,N.tZ)(ep.zx,{text:"Manage SSH keys",colorway:"primary",size:"small",onClick:function(){m(1)}})]}):(0,N.BX)(W.G,{css:yb.connectContainer,children:[(0,N.tZ)(yv,{}),(0,N.tZ)(yg,{sshHostname:y,sshPort:w,sshUser:b})]}),(0,N.tZ)(yn.s,{})]})}),(0,N.tZ)(fp.x4,{children:(0,N.BX)(W.G,{css:yb.tabContainer,children:[(0,N.BX)(W.G,{css:yb.manageKeys,children:[(0,N.tZ)(F.h4,{variant:"subheadDefault",level:2,children:"Manage SSH Keys"}),(0,N.tZ)(tB.u,{tooltip:"You are over the SSH key limit. Please remove some of your keys to add more.",isDisabled:!x,children:(0,N.tZ)(ep.zx,{text:"Add SSH key",colorway:"primary",size:"small",disabled:x,iconLeft:(0,N.tZ)(nG.Z,{}),onClick:function(){return f(!0)}})})]}),(0,N.tZ)(F.xv,{color:"dimmer",children:"Add authorized keys to configure SSH access to this Repl."}),(0,N.tZ)(yw,{legacyKeys:v,openFile:e.openFile}),(0,N.tZ)(yr.A,{keys:Z}),(0,N.tZ)(rX.u,{isOpen:d,onRequestClose:function(){return f(!1)},centered:!0,children:(0,N.tZ)(g9.r,{onConfirm:function(){return f(!1)}})})]})})]})]})}function yx(e){var t,n,r,i=(n={variables:{replId:(0,ez.Z)()}},r=(0,es._)({},yh,n),eJ.a(yp,r)),o=i.data,a=i.loading,l=i.refetch;if(!o||a)return(0,N.tZ)(W.G,{css:yb.loading,children:(0,N.tZ)(z.Z,{size:24})});if("ReplRedirect"===o.repl.__typename)throw Error("Got repl redirect for replId query");if("SubscriptionExpiredError"===o.repl.__typename)return(0,N.tZ)(W.G,{children:(0,N.tZ)(F.xv,{children:"This Repl is private and your subscription expried. Please reload for further action."})});var c=o.repl.authorizations.connectUsingSsh;return c.isAuthorized?(0,N.tZ)(yZ,(0,es._)({},e)):(0,N.tZ)(yy,{sshAuthz:c,org:null!==(t=o.repl.org)&&void 0!==t?t:void 0,onPurchaseComplete:function(){l()}})}var yC=O.Dy.Object({type:O.Dy.Literal("ssh")}),y_=(0,H.X)({root:[j.l0.height("100%"),j.l0.overflowY("auto"),eo.F3],header:[j.l0.rowWithGap(8)],container:[j.l0.colWithGap(8),j.l0.flex.grow(1)],wrapper:[j.l0.flex.grow(1),j.l0.py(8),j.l0.position.relative]}),yS={Content:function(e){var t=e.options;return(0,N.tZ)(W.G,{css:y_.root,children:(0,N.tZ)(W.G,{css:y_.container,children:(0,N.tZ)(W.G,{css:y_.wrapper,children:(0,N.tZ)(yx,{openFile:function(e){return t.performPaneOperation({operation:"open",pane:(0,J.$E)(e),secondary:!0})}})})})})},Icon:function(e){var t=e.size;return(0,N.tZ)(e4.Pd.Provider,{value:{color:j.TV.yellowStrongest,size:t},children:(0,N.tZ)(g8.Z,{})})},getTitle:function(){return"SSH"},description:"Configure remote access to connect to this Repl from another machine or IDE",decode:function(e){return U.B4.Decode(yC,e)}},yk=n(39864),yE=n(70972),yT=(0,H.X)({unavailable:[j.l0.p(8)]}),yR=O.Dy.Object({type:O.Dy.Literal("workflows")}),yD={Content:function(e){var t=e.options.isActive;return(0,nm.P5)({controlName:"flag-work-flows",logFlagToAnalytics:!0})?(0,N.tZ)(yE.Z,{isActive:t}):(0,N.tZ)(W.G,{css:yT.unavailable,children:(0,N.tZ)(F.xv,{children:"Workflows is not available."})})},Icon:function(e){var t=e.size;return(0,N.tZ)(yk.Z,{size:t})},getTitle:function(){return"Workflows"},decode:function(e){return U.B4.Decode(yR,e)}},yI=n(9618),yB=n(61967),yG=n(21482),yA=n(98706),yP=n(51197),yL=function(){var e=(0,P._)((0,$.useReducer)(function(){return Math.random()},Math.random()),2);return[e[0],e[1]]},yN=function(e){var t,n=e.ours,r=e.theirs,i=(0,P._)(yL(),2),o=i[0],a=i[1],l=(0,tN.Z)((t=(0,tP._)(function(e){var t,i,o,a,l,c,s;return(0,tL.Jh)(this,function(u){switch(u.label){case 0:return[4,Promise.all([e.log({max:100,revRange:n}),null!==r?e.log({max:100,revRange:"".concat(n,"..").concat(r)}):null,null!==r?e.log({max:100,revRange:"".concat(r,"..").concat(n)}):null])];case 1:if(t=u.sent(),o=(i=(0,P._)(t,3))[0],a=i[1],l=i[2],o.error)return[2,o];if(null==a?void 0:a.error)return[2,a];if(null==l?void 0:l.error)return[2,l];return[2,{error:null,both:o.commits,theirs:null!==(c=null==a?void 0:a.commits)&&void 0!==c?c:[],ours:null!==(s=null==l?void 0:l.commits)&&void 0!==s?s:[]}]}})}),function(e){return t.apply(this,arguments)}),[n,r,o]);return[(0,$.useMemo)(function(){return null===l?{error:null}:l.error?l:{error:null,both:iv(l.both,l.theirs,l.ours),theirs:l.theirs,ours:l.ours}},[l]),a]},yO=function(){var e,t=(0,q.Z)().git,n=(0,P._)((0,$.useState)({loading:!1,error:null}),2),r=n[0],i=n[1];return[(0,$.useCallback)((e=(0,tP._)(function(e){var n,r,o,a,l;return(0,tL.Jh)(this,function(c){switch(c.label){case 0:return n=e.remote,r=e.branch,a=void 0!==(o=e.allowConflicts)&&o,i({loading:!0,error:null}),[4,t.pull({mode:iu.T.MERGE,allowConflicts:a,experimental_override_remote:{name:n,branch:r}})];case 1:return(l=c.sent()).error?i({loading:!1,error:l.error}):(i({loading:!1,error:null}),t.forceRefresh()),[2]}})}),function(t){return e.apply(this,arguments)}),[t]),r]},yU=function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y,b,w,Z,x=e.selectedReplId,C=(t=null!=x?x:null,(r=(0,tN.Z)((n=(0,tP._)(function(e){var n;return(0,tL.Jh)(this,function(r){switch(r.label){case 0:if(!t)return[2,{hasStarted:!1,error:null,remote:null}];return[4,r$({git:e,replId:t})];case 1:if((n=r.sent()).error)return[2,{hasStarted:!0,error:n.error}];return[2,{hasStarted:!0,error:null,remote:n.remote}]}})}),function(e){return n.apply(this,arguments)}),[t]))&&r.hasStarted?r.error?{state:"Error",error:r.error}:{state:"Success",error:null,remote:r.remote}:{state:"Loading",error:null}),_=(0,P._)(yO(),2),S=_[0],k=_[1],E=(0,P._)((o=(i=(0,P._)(yL(),2))[0],a=i[1],[(0,tN.Z)((l=(0,tP._)(function(e){var t;return(0,tL.Jh)(this,function(n){switch(n.label){case 0:return[4,e.getRepositoryState()];case 1:return(t=n.sent()).error,[2,t]}})}),function(e){return l.apply(this,arguments)}),[o]),a]),2),T=E[0],R=E[1],D=(0,P._)((s=(c=(0,P._)(yL(),2))[0],u=c[1],[(0,tN.Z)((d=(0,tP._)(function(e){var t;return(0,tL.Jh)(this,function(n){switch(n.label){case 0:return[4,e.status()];case 1:return(t=n.sent()).error,[2,t]}})}),function(e){return d.apply(this,arguments)}),[s]),u]),1)[0],I=(0,P._)(yN({ours:"main",theirs:x?rY({replId:x,branch:"main"}):null}),2),B=I[0],G=I[1],A=(0,P._)((h=(f={remoteName:x?rJ(x):null,onCompleted:function(){R(),G()}}).remoteName,p=f.onCompleted,v=(m=(0,P._)((0,$.useState)(!1),2))[0],g=m[1],b=(y=(0,P._)(yL(),2))[0],w=y[1],(0,tN.Z)((Z=(0,tP._)(function(e){var t;return(0,tL.Jh)(this,function(n){switch(n.label){case 0:if(!h)return[2,{error:null}];return g(!0),[4,e.fetch({remote:h})];case 1:return t=n.sent(),g(!1),null==t.error&&p(),[2,t]}})}),function(e){return Z.apply(this,arguments)}),[h,b]),[v,w]),2);return{state:T,status:D,commits:B,isFetching:A[0],refetch:A[1],remote:C,pull:{state:k,doPull:function(e){"Success"===C.state&&S((0,eu._)((0,es._)({},e),{remote:C.remote.name}))}}}},yM=$.createContext(null);function yX(){var e=(0,$.useContext)(yM);if(null===e)throw Error("useProjectGitState must be used inside a ProjectGitStateProvider");return e}var yF=n(41674),yW=n(14872),yH=n(65567);function yV(){var e=(0,ej._)(["\n  fragment ProjectMergeSectionRepl on Repl {\n    id\n    title\n  }\n"]);return yV=function(){return e},e}var yz=(0,eq.Ps)(yV()),yj=n(86069),yq=n(95420);function yJ(){var e=(0,ej._)(["\n  fragment ReplToReplMergeOrg on Org {\n    id\n    slug\n  }\n"]);return yJ=function(){return e},e}function yY(){var e=(0,ej._)(["\n  fragment ReplMergeRelatedRepl on Repl {\n    id\n    url\n    nextPagePathname\n    ...ReplSelectorRepl\n  }\n  ","\n"]);return yY=function(){return e},e}function y$(){var e=(0,ej._)(["\n  fragment ReplToReplMergeProject on Project {\n    id\n    mainRepl {\n      id\n      ...ReplMergeRelatedRepl\n    }\n  }\n  ","\n"]);return y$=function(){return e},e}function yK(){var e=(0,ej._)(["\n  fragment ReplToReplMergeCurrentRepl on Repl {\n    id\n    ...ProjectMergeSectionRepl\n  }\n  ","\n"]);return yK=function(){return e},e}function yQ(){var e=(0,ej._)(["\n  query ReplToReplMergeGetRelatedRepls($id: String!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        project {\n          id\n          repls {\n            items {\n              ...ReplMergeRelatedRepl\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return yQ=function(){return e},e}function y0(){var e=(0,ej._)(["\n  query ReplToReplPullRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...CrosisContextRepl\n      }\n    }\n    currentUser {\n      id\n      ...CrosisContextCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return y0=function(){return e},e}var y1={},y2=(0,eq.Ps)(yJ()),y4=(0,eq.Ps)(yY(),yj.$v),y3=(0,eq.Ps)(y$(),y4),y8=(0,eq.Ps)(yK(),yz);yQ();var y6=(0,eq.Ps)(y0(),yq.C,yq.D);function y5(){var e=(0,ej._)(["\n  fragment ProjectReplsComboBoxRepl on Repl {\n    id\n    ...ReplMergeRelatedRepl\n  }\n  ","\n"]);return y5=function(){return e},e}function y7(){var e=(0,ej._)(["\n  query ProjectReplsComboBox($id: String!, $replsInput: ProjectReplsInput!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        project {\n          id\n          mainRepl {\n            ...ProjectReplsComboBoxRepl\n          }\n          repls(input: $replsInput) {\n            items {\n              ...ProjectReplsComboBoxRepl\n            }\n            pageInfo {\n              nextCursor\n              hasNextPage\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return y7=function(){return e},e}var y9={},be=(0,eq.Ps)(y5(),y4),bt=(0,eq.Ps)(y7(),be),bn=(0,H.X)({replSelector:[j.l0.minWidth(240)]}),br={username:"Unknown User",image:""},bi=function(e){var t,n,r=e.replId,i=e.onSelect,o=e.selectedReplId,a=(0,te._)(e,["replId","onSelect","selectedReplId"]),l=(0,P._)((0,$.useState)(""),2),c=l[0],s=l[1],u=(0,yW.Z)(c,250),d=(0,ak.Z)().showError,f=(0,P._)((0,$.useState)({options:[],mainRepl:null,nextCursor:null}),2),h=f[0],p=f[1],m=(t=(0,es._)({},y9,{variables:{id:r,replsInput:{count:10,filters:{title:{search:u}}}},ssr:!1,fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0,onCompleted:function(e){var t,n,r,i=e&&"Repl"===e.repl.__typename&&(null===(t=e.repl.project)||void 0===t?void 0:t.__typename)==="Project"?e.repl.project:null,o=(null==i?void 0:i.repls.__typename)==="ReplConnection"?i.repls:null;i&&o||d("Something went wrong loading Repls - please try again."),p({mainRepl:null!==(n=null==i?void 0:i.mainRepl)&&void 0!==n?n:null,nextCursor:(null==o?void 0:o.pageInfo.hasNextPage)&&o.pageInfo.nextCursor?o.pageInfo.nextCursor:null,options:null!==(r=null==o?void 0:o.items)&&void 0!==r?r:[]})}}),eJ.a(bt,t)),v=m.loading,g=m.refetch,y=m.networkStatus,b=(n=(0,tP._)(function(){var e,t,n,i,o,a;return(0,tL.Jh)(this,function(l){switch(l.label){case 0:if(!(h.nextCursor&&y!==yF.I.fetchMore))return[3,2];return t=h.options,[4,g({id:r,replsInput:{count:10,filters:{title:{search:u}},cursor:h.nextCursor}})];case 1:(i=(n=l.sent())&&"Repl"===n.data.repl.__typename&&(null===(e=n.data.repl.project)||void 0===e?void 0:e.__typename)==="Project"&&"ReplConnection"===n.data.repl.project.repls.__typename?n.data.repl.project.repls:null)||d("Something went wrong loading Repls - please try again."),a=null!==(o=null==i?void 0:i.items)&&void 0!==o?o:[],p((0,eu._)((0,es._)({},h),{nextCursor:(null==i?void 0:i.pageInfo.hasNextPage)&&i.pageInfo.nextCursor?i.pageInfo.nextCursor:null,options:t.concat(a)})),l.label=2;case 2:return[2]}})}),function(){return n.apply(this,arguments)}),w=(0,ec.Z)(function(){var e=h.mainRepl,t=h.options.filter(function(e){return e.id!==r});return""===u&&e&&e.id!==r?[e].concat((0,L._)(t.filter(function(t){return t.id!==e.id}))):t},[h,r,u]),Z=(0,P._)((0,$.useState)(!1),2),x=Z[0],C=Z[1];(0,$.useEffect)(function(){if(!x){var e=w.find(function(e){return e.id===o});e&&(C(!0),""===c&&s(e.title))}},[x,c,o,w]);var _=(0,td.Z)(i),S=(0,$.useCallback)(function(e){var t=w.find(function(t){return t.id===e});t&&(_.current(t),s(t.title))},[w,_]);return(0,N.tZ)(yH.C,(0,eu._)((0,es._)({menuTrigger:"focus",inputValue:c,onInputChange:function(e){s(e)},onSelectionChange:S,items:w,selectedKey:o,css:bn.replSelector,loading:v,allowsEmptyCollection:!0,onLoadMore:b,emptyMessage:"No Repls found",maxHeight:200},a),{children:function(e){var t,n,r,i;return(0,N.tZ)(v5.m9,{label:e.title,icon:(0,N.tZ)(nL.q,{src:null!==(r=null===(t=e.owner)||void 0===t?void 0:t.image)&&void 0!==r?r:br.image,username:null!==(i=null===(n=e.owner)||void 0===n?void 0:n.username)&&void 0!==i?i:br.username,size:16}),description:e.owner?"@".concat(e.owner.username):""})}}))},bo=n(42381),ba=n(91620).lW,bl=[{"& > span:first-child-of-type":[j.l0.flex.grow(1),j.l0.textAlign.left]},{"& > span":[j.l0.flex.shrink(1)]},j.l0.height("auto"),j.l0.p(8),j.l0.fontWeight.medium,j.l0.backgroundColor.backgroundHigher,j.l0.flex.row,j.l0.align.center,j.l0.justify.spaceBetween,j.l0.overflow("hidden"),j.l0.cursor.pointer],bc=(0,H.X)({buttonFolded:[bl,j.l0.borderRadius(8)],buttonUnfolded:[bl,j.l0.borderRadius(8,8,0,0)],rowContainer:[j.l0.align.center,j.l0.rowWithGap(8),j.l0.position.relative,j.l0.zIndex(1),j.l0.overflow("hidden")],diffContainer:[j.l0.flex.grow(1),j.l0.borderRadius(8)],bodyContainer:[j.l0.borderRadius(0,0,8,8),j.l0.p(8),j.l0.display.flex,j.l0.flex.row,j.l0.flex.wrap,j.l0.align.center,j.l0.justify.center,j.l0.backgroundColor.backgroundDefault,j.l0.border({color:j.TV.outlineDimmer,direction:"bottom"}),j.l0.border({color:j.TV.outlineDimmer,direction:"left"}),j.l0.border({color:j.TV.outlineDimmer,direction:"right"})],bodyLoading:[j.l0.p(8)],noChangesContainer:[j.l0.py(8),j.l0.px(8),j.l0.center,j.l0.width("100%")],innerContainer:[j.l0.display.flex,j.l0.align.center],splitContainer:[j.l0.p(8),j.l0.display.flex,j.l0.flex.row,j.l0.justify.spaceBetween,j.l0.maxWidth("100%"),j.l0.align.center],splitChild:[j.l0.align.center,j.l0.justify.center,{flexBasis:"50%"}],buttonGroupItem:[j.l0.width(64),j.l0.height(32)]}),bs=function(e){var t=e.folded,n=void 0!==t&&t,r=e.setFolded,i=e.diff,o="".concat(i.initial.path,"/").concat(i.initial.filename),a="".concat(i.final.path,"/").concat(i.final.filename);return(0,N.BX)(W.G,{css:n?bc.buttonFolded:bc.buttonUnfolded,onClick:function(){return r(!n)},children:[(0,N.BX)(W.G,{css:[bc.rowContainer,j.l0.flex.shrink(1)],children:["RENAMED"===i.status||"COPIED"===i.status?(0,N.BX)(N.HY,{children:[(0,N.tZ)(X.Z,{path:o}),(0,N.tZ)(F.xv,{multiline:!1,children:i.initial.filename}),""===i.initial.path?null:(0,N.tZ)(F.xv,{multiline:!1,color:"dimmest",css:[j.l0.fontWeight.normal],maxLines:1,children:i.initial.path}),(0,N.tZ)(ev.Z,{}),(0,N.tZ)(X.Z,{path:a}),(0,N.tZ)(F.xv,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,N.tZ)(F.xv,{multiline:!1,color:"dimmest",css:[j.l0.fontWeight.normal],children:i.final.path})]}):(0,N.BX)(N.HY,{children:[(0,N.tZ)(X.Z,{path:a}),(0,N.tZ)(F.xv,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,N.tZ)(F.xv,{multiline:!1,color:"dimmest",css:[j.l0.fontWeight.normal],children:i.final.path})]}),(0,N.tZ)(tm.m,{textToCopy:a,tooltipText:"Copy Full Path",tooltipPlacement:"bottom-end"})]}),(0,N.BX)(W.G,{css:bc.rowContainer,children:[(0,N.tZ)(tZ,{type:i.status}),(0,N.tZ)(M.hU,{alt:n?"Collapse diff":"Expand diff",onClick:function(){return r(!n)},children:n?(0,N.tZ)(tv.Z,{}):(0,N.tZ)(tg.Z,{})})]})]})},bu=function(e){var t=e.diff,n=e.splitOrUnified,r=e.extensions;return"Split"===n?(0,N.tZ)(tf,{a:{filePath:t.initial.filename,doc:t.initial.content},b:{filePath:t.final.filename,doc:t.final.content,extensions:r},collapseUnchanged:{},style:{width:"100%"}}):(0,N.tZ)(ts.ZP,{filePath:t.final.filename,initialDoc:t.final.content,extensions:[e9.p.of(e7.xv.of(t.initial.content.split("\n")))],readOnly:!0,style:{width:"100%"}})},bd=function(e){return(0,K.T3)(e)?"media":(0,K.Mb)(e)?"ot":"binary"},bf=function(e){var t=e.content,n=e.type,r=e.filename,i=e.extensions;switch(n){case"media":return(0,N.tZ)(W.G,{css:[{display:"flex",height:"100%"}],children:(0,N.tZ)(tx.A,{content:t,mime:(0,K.yC)(r)})});case"ot":return(0,N.tZ)(ts.ZP,{filePath:r,initialDoc:t,readOnly:!0,style:{width:"100%"},extensions:i});default:return(0,N.tZ)(F.xv,{color:"dimmest",multiline:!1,children:"This binary file has changed."})}},bh=function(e){var t=e.diff,n=e.splitOrUnified,r=e.extensions;if(t.initial.content===t.final.content)return(0,N.tZ)(W.G,{css:bc.noChangesContainer,children:(0,N.tZ)(F.xv,{color:"dimmest",multiline:!1,children:"There are no changes to show."})});if("DELETED"===t.status)return(0,N.tZ)(W.G,{css:bc.noChangesContainer,children:(0,N.tZ)(F.xv,{color:"dimmest",multiline:!1,children:"This file has been deleted."})});var i=(0,bo.Z)(ba.from(t.initial.content))?"binary":bd(t.initial.filename),o=(0,bo.Z)(ba.from(t.final.content))?"binary":bd(t.final.filename);if("binary"===i||"binary"===o)return(0,N.tZ)(W.G,{css:bc.noChangesContainer,children:(0,N.tZ)(F.xv,{color:"dimmest",multiline:!1,children:"This binary file has changed."})});if("ADDED"===t.status)switch(o){case"media":return(0,N.tZ)(W.G,{css:bc.noChangesContainer,children:(0,N.tZ)(W.G,{css:bc.innerContainer,children:(0,N.tZ)(tx.A,{content:t.final.content,mime:(0,K.yC)(t.final.filename)})})});case"ot":return(0,N.tZ)(W.G,{css:bc.noChangesContainer,children:(0,N.tZ)(ts.ZP,{filePath:t.final.filename,initialDoc:t.final.content,readOnly:!0,style:{width:"100%"},extensions:r})});default:return(0,N.tZ)(W.G,{css:bc.noChangesContainer,children:(0,N.tZ)(F.xv,{color:"dimmest",multiline:!1,children:"This binary file has been added."})})}return"ot"===i&&"ot"===o?(0,N.tZ)(bu,{diff:t,splitOrUnified:n,extensions:r}):(0,N.BX)(W.G,{css:bc.splitContainer,children:[(0,N.tZ)(W.G,{css:bc.splitChild,children:(0,N.tZ)(bf,{content:t.initial.content,type:i,filename:t.initial.filename,extensions:r})}),(0,N.tZ)(W.G,{css:bc.splitChild,children:(0,N.tZ)(bf,{content:t.final.content,type:o,filename:t.final.filename,extensions:r})})]})},bp=function(e){var t,n=e.diff,r=e.fetchDiffFileContents,i=e.splitOrUnified,o=(0,P._)((0,$.useState)({expanded:!1,loading:!1,content:null,error:null}),2),a=o[0],l=o[1],c=(t=(0,tP._)(function(e){var t;return(0,tL.Jh)(this,function(i){switch(i.label){case 0:if(l((0,eu._)((0,es._)({},a),{expanded:!e,loading:null==a.content})),e)return[3,2];return[4,r(n)];case 1:t=i.sent(),l(function(e){return(0,eu._)((0,es._)({},e),{loading:!1,error:t.error?t.error:null,content:null==t.error?{initial:t.content.base,final:t.content.head}:null})}),i.label=2;case 2:return[2]}})}),function(e){return t.apply(this,arguments)});return(0,N.BX)(W.G,{css:bc.diffContainer,children:[(0,N.tZ)(bs,{folded:!a.expanded,setFolded:c,diff:n}),a.expanded?(0,N.BX)(em.Tg,{css:bc.bodyContainer,elevated:!0,children:[a.error?(0,N.tZ)(rF.E,{colorway:"negative",icon:(0,N.tZ)(rv.Z,{}),text:a.error}):null,a.loading?(0,N.tZ)(W.G,{css:bc.bodyLoading,children:(0,N.tZ)(z.Z,{})}):null,a.content?(0,N.tZ)(bh,{diff:(0,eu._)((0,es._)({},n),{initial:(0,eu._)((0,es._)({},n.initial),{content:a.content.initial}),final:(0,eu._)((0,es._)({},n.final),{content:a.content.final})}),splitOrUnified:i}):null]}):null]},n.id)};function bm(){return(bm=(0,tP._)(function(e){var t,n;return(0,tL.Jh)(this,function(r){switch(r.label){case 0:return t=e.path,[4,e.fs.readFile(t,{fromDisk:!0})];case 1:if((n=r.sent()).error)return[2,{content:null,error:n.error}];return[2,{content:n.content.toString("utf8"),error:null}]}})})).apply(this,arguments)}function bv(e){return bg.apply(this,arguments)}function bg(){return(bg=(0,tP._)(function(e){var t,n,r;return(0,tL.Jh)(this,function(i){switch(i.label){case 0:if(t=e.file,n=e.fs,r=e.git,"Fs"!==t.type)return[3,2];return[4,function(e){return bm.apply(this,arguments)}({path:t.path,fs:n})];case 1:case 3:return[2,i.sent()];case 2:return[4,r.getFileContents({path:t.path,revision:t.revision})]}})})).apply(this,arguments)}function by(e){return bb.apply(this,arguments)}function bb(){return(bb=(0,tP._)(function(e){var t,n,r,i,o,a,l,c,s,u,d;return(0,tL.Jh)(this,function(f){switch(f.label){case 0:return t=e.fs,n=e.git,r=e.base,i=e.head,c=Promise.all,[4,bv({git:n,fs:t,file:i})];case 1:return s=[f.sent()],[4,bv({git:n,fs:t,file:r})];case 2:return[4,c.apply(Promise,[s.concat([f.sent()])])];case 3:if(a=(o=P._.apply(void 0,[f.sent(),2]))[0],(l=o[1]).error)return[2,{error:"fetchFileContentsForDiff could not fetch base file from ".concat(r.type," for ").concat(r.path),content:null}];if(a.error)return[2,{error:"fetchFileContentsForDiff could not fetch base file from ".concat(i.type," for ").concat(i.path),content:null}];return[2,{error:null,content:{base:null!==(u=l.content)&&void 0!==u?u:"",head:null!==(d=a.content)&&void 0!==d?d:""}}]}})})).apply(this,arguments)}(m=G||(G={})).Git="Git",m.Fs="Fs";var bw={z:!0,findCopies:!0,findCopiesHarder:!0,findRenames:!0,nameStatus:!0},bZ={z:"-z",findCopies:"--find-copies",findCopiesHarder:"--find-copies-harder",findRenames:"--find-renames",nameStatus:"--name-status"};function bx(e){switch(e){case ty.h.UNMODIFIED:return null;case ty.h.MODIFIED:return tA.yH.MODIFIED;case ty.h.TYPE_CHANGED:return tA.yH.TYPE_CHANGED;case ty.h.DELETED:return tA.yH.DELETED;case ty.h.RENAMED:return tA.yH.RENAMED;case ty.h.COPIED:return tA.yH.COPIED;case ty.h.UNTRACKED:case ty.h.UNMERGED:case ty.h.ADDED:return tA.yH.ADDED;default:(0,nk.Z)(e)}}var bC=function(e,t){return""===e?t:"".concat(e,"/").concat(t)};function b_(e,t){return t.filter(function(t){var n="".concat(t.final.path,"/").concat(t.final.filename),r="".concat(t.initial.path,"/").concat(t.initial.filename);return n.toLowerCase().includes(e.toLowerCase())||r.toLowerCase().includes(e.toLowerCase())})}var bS=(0,H.X)({container:[j.l0.colWithGap(16)],topRow:[j.l0.rowWithGap(8),j.l0.align.center,j.l0.justify.spaceBetween],topRowControls:[j.l0.rowWithGap(8)],diffSections:[j.l0.colWithGap(12)],diffs:[j.l0.colWithGap(8)],noChangesContainer:[j.l0.rowWithGap(4),j.l0.align.center]});function bk(e){var t=e.children,n=e.headerContent;return(0,N.BX)(W.G,{css:bS.container,children:[(0,N.BX)(W.G,{css:bS.topRow,children:[(0,N.tZ)(F.h4,{level:2,variant:"subheadDefault",children:"Changed Files"}),n]}),t]})}function bE(e){var t,n,r,i,o,a,l,c,s,u=(0,q.Z)(),d=u.fs,f=u.git,h=(0,P._)((0,$.useState)(""),2),p=h[0],m=h[1],v=(0,P._)((0,$.useState)("Split"),2),g=v[0],y=v[1],b=(t={type:"revisionToRevisionDiff",head:e.head,base:e.base},n=(0,eu._)((0,es._)({},t),{flags:(0,eu._)((0,es._)({},bw),{nameStatus:!0})}),i=(0,tN.Z)((r=(0,tP._)(function(e){var t,r;return(0,tL.Jh)(this,function(i){switch(i.label){case 0:return t=function(e){var t,n=e.base,r=null!==(t=e.flags)&&void 0!==t?t:bw,i=["git","diff"];switch(Object.keys(r).forEach(function(e){bZ[e]&&i.push(bZ[e])}),e.type){case"revisionToRevisionDiff":i.push("".concat(n,"...").concat(e.head));break;case"revisionToIndexDiff":i.push("--staged",n);break;default:(0,nk.Z)(e)}return i}(n),[4,e.escapeHatchGitExecRead(t.join(" "),{serviceMethod:"useGitDiff"})];case 1:if((r=i.sent()).error||null===r.output)return[2,{error:ry.aq.UNKNOWN}];return[2,{diff:r.output,error:null}]}})}),function(e){return r.apply(this,arguments)})),o=(0,ec.Z)(function(){return null==i?{loading:!0,error:null,data:null}:i.error?{loading:!1,error:i.error,data:null}:{loading:!1,error:null,data:i.diff}},[i]),(0,ec.Z)(function(){if(null==o||o.loading)return{loading:!0,error:null,data:null};if(o.error)return{loading:!1,error:o.error,data:null};var e,t=null!==(e=o.data)&&void 0!==e?e:"",n=(0,tA.qE)(t),r=(0,tA.Bi)(t);return{loading:!1,error:null,data:Array.from(new Set((0,L._)(n).concat((0,L._)(r)))).filter(function(e){return["DELETED","ADDED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)}).map(function(e){var t,n;return{id:(0,t8.v4)(),status:e.type,initial:{filename:(0,K.UO)(null!==(t=e.originalPath)&&void 0!==t?t:e.path),path:(0,K.Il)(null!==(n=e.originalPath)&&void 0!==n?n:e.path)},final:{filename:(0,K.UO)(e.path),path:(0,K.Il)(e.path)}}})}},[o])),w=(0,ec.Z)(function(){var e;return b_(p,null!==(e=b.data)&&void 0!==e?e:[])},[p,b]),Z=(a=(0,tP._)(function(t){return(0,tL.Jh)(this,function(n){switch(n.label){case 0:return[4,by({git:f,fs:d,base:{type:G.Git,revision:e.base,path:bC(t.initial.path,t.initial.filename)},head:{type:G.Git,revision:e.head,path:bC(t.final.path,t.final.filename)}})];case 1:return[2,n.sent()]}})}),function(e){return a.apply(this,arguments)}),x=(l=yX().status,c=(0,ec.Z)(function(){return l&&null==l.error?l.changes:[]},[l]),(0,ec.Z)(function(){return c.map(function(e){var t,n,r,i,o=null!==(r=null!==(n=bx(e.type.worktree))&&void 0!==n?n:bx(e.type.index))&&void 0!==r?r:tA.yH.UNKNOWN,a=null!==(i=null===(t=e.source)||void 0===t?void 0:t.path)&&void 0!==i?i:e.path;return{id:(0,t8.v4)(),status:o,initial:{filename:(0,K.UO)(a),path:(0,K.Il)(a)},final:{filename:(0,K.UO)(e.path),path:(0,K.Il)(e.path)}}})},[c])),C=(0,ec.Z)(function(){return b_(p,x)},[p,x]),_=(s=(0,tP._)(function(e){return(0,tL.Jh)(this,function(t){switch(t.label){case 0:return[4,by({git:f,fs:d,base:{type:G.Git,revision:"HEAD",path:bC(e.initial.path,e.initial.filename)},head:{type:G.Fs,path:bC(e.final.path,e.final.filename)}})];case 1:return[2,t.sent()]}})}),function(e){return s.apply(this,arguments)});return b.loading?(0,N.tZ)(bk,{children:(0,N.tZ)(z.Z,{})}):b.error||null==b.data?(0,N.tZ)(bk,{children:(0,N.tZ)(F.xv,{children:"Something went wrong. Please try another Repl."})}):0===b.data.length&&0===x.length?(0,N.tZ)(bk,{children:(0,N.BX)(W.G,{css:bS.noChangesContainer,children:[(0,N.tZ)(yP.Z,{}),(0,N.tZ)(F.xv,{children:"No changes to merge"})]})}):(0,N.tZ)(bk,{headerContent:(0,N.BX)(W.G,{css:bS.topRowControls,children:[(0,N.tZ)(tS,{value:g,onChange:y}),(0,N.tZ)(nI.E,{value:p,onChange:function(e){m(e.target.value)},onClear:function(){m("")},loading:!1,placeholder:"Filter changed files"})]}),children:(0,N.BX)(W.G,{css:bS.diffSections,children:[C.length?(0,N.BX)(W.G,{css:bS.diffs,children:[(0,N.tZ)(F.h4,{level:3,variant:"text",color:"dimmer",children:"Uncommitted Changes"}),C.map(function(e){return(0,N.tZ)(bp,{diff:e,splitOrUnified:g,fetchDiffFileContents:_},e.id)})]}):null,w.length?(0,N.BX)(W.G,{css:bS.diffs,children:[(0,N.tZ)(F.h4,{level:3,variant:"text",color:"dimmer",children:"Committed Changes"}),w.map(function(e){return(0,N.tZ)(bp,{diff:e,splitOrUnified:g,fetchDiffFileContents:Z},e.id)})]}):null]})})}var bT=function(e){var t=e.selectedRepl,n=e.isMainRepl,r=rY({replId:t.id,branch:"main"}),i="HEAD";return(0,N.tZ)(bE,{base:n?i:r,head:n?r:i})};function bR(){var e=(0,P._)((0,$.useState)(!1),2),t=e[0],n=e[1],r=(0,q.Z)().fs;return(0,$.useEffect)(function(){var e=!1,t=r.watchPathStat(".gitignore",{onNewStat:function(t){e||n(!t.exists)},onError:function(){}});return function(){e=!0,t()}},[r]),t?(0,N.tZ)(rF.E,{icon:(0,N.tZ)(lX.Z,{}),text:(0,N.BX)(F.xv,{children:["This project does not have a .gitignore file. It is recommended that all projects have a .gitignore file. You can find templates for .gitignore files for different languages"," ",(0,N.tZ)("a",{href:"https://github.com/github/gitignore",target:"_blank",rel:"noopener noreferrer",children:"here"}),"."]})}):null}var bD=(0,H.X)({self:[j.l0.colWithGap(12)]});function bI(e){var t,n=e.selectedRepl,r=(0,tN.Z)((t=(0,tP._)(function(e){var t;return(0,tL.Jh)(this,function(n){switch(n.label){case 0:return[4,e.getRepositoryState()];case 1:if((t=n.sent()).error)return[2,{error:null,message:"Something went wrong, this Repl's git state could not be read. Please make sure there is still a .git folder."}];if(t.state!==nv.yG.CLEAN)return[2,{error:null,message:"This Repl has uncommitted changes. This will prevent any merges. Please undo or commit your changes before leaving the Repl."}];return[2,{error:null,message:null}]}})}),function(e){return t.apply(this,arguments)})),i=null==r?void 0:r.message;return(0,N.BX)(W.G,{css:bD.self,children:[(0,N.tZ)(F.h4,{level:2,variant:"subheadDefault",children:"Main Repl"}),(0,N.BX)(F.xv,{children:["You are in the main Repl for the project. If you want to merge in changes, head to"," ",n?(0,N.tZ)(ue(),(0,eu._)((0,es._)({target:"_blank"},(0,yB.aq)(n,{projectPane:!0})),{children:n.title})):"a fork","."]}),i?(0,N.tZ)(rF.E,{icon:(0,N.tZ)(lX.Z,{}),colorway:"negative",text:i}):null]})}var bB=n(2993),bG=n(45098),bA=n(52423),bP=n(37711);function bL(){return(bL=(0,tP._)(function(e){var t,n,r;return(0,tL.Jh)(this,function(i){switch(i.label){case 0:return t=e.git,n=e.commitMessage,[4,t.stageFiles({all:!0})];case 1:if(i.sent().error)return[2,{success:!1,error:"Could not commit your changes"}];return[4,t.getRepositoryState()];case 2:if((r=i.sent()).error)return[2,{success:!1,error:"Could not commit your changes"}];if(r.state!==nv.yG.DIRTY_INDEX)return[3,4];return[4,t.commit({message:n})];case 3:if(i.sent().error)return[2,{success:!1,error:"Could not commit your changes"}];i.label=4;case 4:return[2,{success:!0,error:null}]}})})).apply(this,arguments)}var bN=n(63713),bO=(0,H.X)({self:[j.l0.colWithGap(8)],message:[j.l0.rowWithGap(6)],infoIcon:[j.l0.color.foregroundDimmer,{marginTop:3}],infoMessage:{flex:1}});(v=A||(A={})).CannotMerge="CannotMerge",v.NothingToMerge="NothingToMerge",v.OnlyUncommittedChanges="OnlyUncommittedChanges",v.UncommittedAndCommittedChanges="UncommittedAndCommittedChanges",v.OnlyCommittedChanges="OnlyCommittedChanges";var bU=function(){var e,t,n=yX(),r=n.commits,i=n.state;if((null==i?void 0:i.error)!=null||!(null==i?void 0:i.type)||i.type!==nv.y5.NORMAL||(null==i?void 0:i.state)==null||null!=r.error||!(null==r?void 0:r.ours))return"CannotMerge";var o=i.state===nv.yG.DIRTY_WORKTREE||i.state===nv.yG.DIRTY_INDEX,a=!!((null==r?void 0:null===(e=r.ours)||void 0===e?void 0:e.length)&&(null==r?void 0:null===(t=r.ours)||void 0===t?void 0:t.length)>0);return o&&!a?"OnlyUncommittedChanges":o&&a?"UncommittedAndCommittedChanges":!o&&a?"OnlyCommittedChanges":"NothingToMerge"};function bM(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y=e.sourceRepl,b=e.destinationRepl,w=e.projectId,Z=e.mainReplId,x=e.orgId,C=(0,ak.Z)().showError,_=(0,a1.U)()("includeUncommittedChanges"),S=(0,P._)((0,$.useState)(!1),2),k=S[0],E=S[1],T=(0,P._)((n=(t={destinationReplId:b.id,sourceReplId:y.id,onSuccess:function(e){var t=e.didAutoCommit;(0,yG.u)({action:"merge",orgId:x,projectId:w,autoCommitEnabled:t,sourceReplType:y.id===Z?"mainRepl":"devRepl",destinationReplType:b.id===Z?"mainRepl":"devRepl"})}}).sourceReplId,r=t.destinationReplId,i=t.onSuccess,o=(0,q.Z)().git,a=(0,$.useRef)(null),c=(l=(0,P._)((0,$.useState)(!1),2))[0],s=l[1],d=(u=(0,ak.Z)()).showError,f=u.showConfirm,h=(0,es._)({},y1,{variables:{id:r}}),p=eJ.a(y6,h),m=(0,$.useCallback)(function(){if(!p.data)return null;var e=p.data,t=e.repl,n=e.currentUser;if(!n||"Repl"!==t.__typename)return null;if(a.current){if(a.current.replId===t.id&&a.current.currentUserId===n.id)return a.current;a.current.container.close()}var r=(0,bB.ZP)({onUnrecoverableError:function(e){tO.Tb(e,{tags:{projects:!0},extra:{replid:t.id}})}});r.connect({context:(0,bG.U)({repl:t,currentUser:n}),getMinimumRetryDelayMs:function(){return 0}});var i=(0,dh.Z)({container:r}),o=(0,bA.Z)({container:r,fs:i}),l=(0,bP.ZP)({container:r,fs:i,enableReplspaceSshTokenPassthrough:!0});return a.current={container:r,git:o,fs:i,replspace:l,replId:t.id,currentUserId:n.id},a.current},[p.data]),(0,$.useEffect)(function(){if(a.current){var e=a.current.container;return function(){e.close()}}},[]),[(0,$.useCallback)((0,tP._)(function(){var e,t,r,a,l,c,u,h=arguments;return(0,tL.Jh)(this,function(p){switch(p.label){case 0:e=(h.length>0&&void 0!==h[0]?h[0]:{autoCommit:!1}).autoCommit,s(!0),p.label=1;case 1:if(p.trys.push([1,7,8,9]),!e)return[3,3];return[4,function(e){return bL.apply(this,arguments)}({git:o,commitMessage:e.message})];case 2:if((t=p.sent()).error)return d(t.error),[2];p.label=3;case 3:if(!(r=m()))return d("Could not merge (setup-error): the target repl could not be reached, please try again."),[2];return[4,(a=r.git).getRepositoryState()];case 4:if((l=p.sent()).error)return d("Could not merge (state-error): the target repl's git state could not be read, please try again."),[2];if(l.state!==nv.yG.CLEAN)return d("Could not merge (git-dirty-error): the target repl's has uncommitted changes, please open that repl and commit or reset any changes."),[2];return[4,r$({git:a,replId:n})];case 5:if(p.sent().error)return d("Could not merge (remote-error): the target repl could not be reached, please try again."),[2];return[4,a.pull({experimental_override_remote:{name:rJ(n),branch:"main"},allowConflicts:!1,mode:iu.T.REBASE})];case 6:if((c=p.sent()).error){switch(c.error){case ry.aq.MERGE_CONFLICT:u="this would result in a merge conflict. Get the latest changes in your repl, then try again.";break;case ry.aq.DIRTY_WORKTREE:u="the target repl's has uncommitted changes, please open that repl and commit or reset any changes.";break;case ry.aq.HEAD_DETACHED:u="the target repl is on an unknown branch, please open that repl and checkout a branch before merging.";break;default:u="please check the target repl or try again."}return d("Could not merge (pull-error): ".concat(u)),[2]}return f("Changes pushed!"),o.forceRefresh(),null==i||i({didAutoCommit:!!e}),[3,9];case 7:return p.sent(),d("Could not merge (general-error): something went wrong, please try again."),[3,9];case 8:return s(!1),[7];case 9:return[2]}})}),[m,n,d,f,o,i]),{loading:c}]),2),R=T[0],D=T[1].loading,I=bU(),B="NothingToMerge"===I||"CannotMerge"===I||D,G="Automatic commit for ".concat(y.title);switch(I){case"NothingToMerge":g="You do not have any commits to merge in yet";break;case"CannotMerge":g="You cannot merge right now";break;case"OnlyUncommittedChanges":case"UncommittedAndCommittedChanges":case"OnlyCommittedChanges":g="Your changes will be pulled into ".concat(b.title);break;default:(0,nk.Z)(I)}var A=(v=(0,tP._)(function(){return(0,tL.Jh)(this,function(e){switch(e.label){case 0:switch(I){case"NothingToMerge":return[3,1];case"CannotMerge":return[3,2];case"OnlyCommittedChanges":return[3,3];case"UncommittedAndCommittedChanges":return[3,5];case"OnlyUncommittedChanges":return[3,7]}return[3,9];case 1:return C("No changes to merge"),[3,10];case 2:return C("You cannot merge right now"),[3,10];case 3:return[4,R({autoCommit:!1})];case 4:case 6:case 8:return e.sent(),[3,10];case 5:return[4,R({autoCommit:!!k&&{message:G}})];case 7:return[4,R({autoCommit:{message:G}})];case 9:(0,nk.Z)(I),e.label=10;case 10:return[2]}})}),function(){return v.apply(this,arguments)});return(0,N.BX)(W.G,{css:bO.self,children:[(0,N.tZ)(tB.u,{tooltip:g,isDisabled:null===g,placement:"top",maxWidth:300,children:(0,N.tZ)(ep.zx,{colorway:"primary",text:"Merge changes into ".concat(b.title),disabled:B,onClick:A,loading:D,iconLeft:D?(0,N.tZ)(z.Z,{}):void 0})}),"OnlyUncommittedChanges"===I?(0,N.BX)(W.G,{css:bO.message,children:[(0,N.tZ)(lX.Z,{css:bO.infoIcon}),(0,N.tZ)(F.xv,{color:"dimmer",css:bO.infoMessage,children:"All changes are uncommitted, so they will be automatically committed when you merge"})]}):null,"UncommittedAndCommittedChanges"===I?(0,N.BX)(W.G,{css:bO.message,children:[(0,N.tZ)(rh.X,{id:_,checked:k,onChange:E}),(0,N.tZ)(bN._,{htmlFor:_,children:(0,N.tZ)(F.xv,{color:"dimmer",children:"Include uncommitted changes in merge"})}),(0,N.tZ)(tB.u,{tooltip:"Any changes you have not committed will be automatically committed and merged",delay:"default",children:(0,N.tZ)(lX.Z,{css:bO.infoIcon})})]}):null]})}var bX=(0,ha.$)(["commit-text-foreground","commit-extended-text-foreground","commit-graph-color","segment-grid-area"]),bF=bX.cssVars,bW=bX.styleTokens,bH=[j.l0.position.absolute,{top:6,left:3,width:10,height:10,borderRadius:"50%"}],bV=(0,H.X)({graph:[j.l0.display.grid,{gridTemplateAreas:'\n        "title-left title-left"\n        "action-left action-left"\n        "left left"\n        "spacer title-right"\n        "spacer action-right"\n        "spacer right"\n        "split-left split-right"\n        "common common"',gridTemplateColumns:"minmax(16px, min-content) 1fr",gridTemplateRows:"min-content ".repeat(8).trim()},(0,e5._)({},j.nC.min("tabletMin"),{gridTemplateAreas:'\n          "title-left title-right"\n          "action-left action-right"\n          "left right" \n          "split-left split-right"  \n          "common common"',gridTemplateColumns:"1fr 1fr",gridTemplateRows:"min-content ".repeat(5).trim()})],segment:[j.l0.flex.column,j.l0.align.start,j.l0.justify.end,{listStyleType:"none",gridArea:bW["segment-grid-area"],minWidth:0,maxWidth:"100%"}],action:[j.l0.flex.row,j.l0.py(4),j.l0.rowWithGap(8),{gridArea:bW["segment-grid-area"]}],title:[{gridArea:bW["segment-grid-area"]}],commit:[j.l0.flex.row,j.l0.align.start,j.l0.justify.start,j.l0.pr(8),{minWidth:0,maxWidth:"100%"},{'&[data-interactive="true"]':[nR.gU.nofill,j.l0.border({width:0})]}],decoration:[j.l0.position.relative,{height:"100%",width:16}],commitDot:[bH,{backgroundColor:bW["commit-graph-color"]}],commitDotUntracked:[bH,{"&:before":[bH,{boxSizing:"border-box",top:-2,left:-2,content:'""',border:"2px dashed ".concat(bW["commit-graph-color"])}],border:"2px solid ".concat(j.TV.accentPrimaryStronger)}],line:[{marginLeft:"auto",marginRight:"auto",position:"absolute",width:"2px",left:"calc(50% - ".concat(1,"px)"),height:"calc(100% - ".concat(8,"px)"),backgroundColor:bW["commit-graph-color"],transform:"translateY(".concat(15,"px)")},{background:"linear-gradient(to top, transparent 0%,  ".concat(bW["commit-graph-color"]," ").concat(10,"px)")},{"li:last-child  &":{height:"calc(100% - ".concat(15,"px)"),background:"none",backgroundColor:bW["commit-graph-color"]}}],commitColumn:[j.l0.viewStyle,j.l0.colWithGap(8),j.l0.minHeight(24),{minWidth:0,maxWidth:"calc(100% - ".concat(16,"px)"),overflow:"hidden"}],commitMessage:[{color:bW["commit-text-foreground"]}],commitDescription:[{color:bW["commit-extended-text-foreground"]}],splitLeft:[{gridArea:"split-left",position:"relative",height:16,width:"100%"}],splitRight:[{gridArea:"split-right",position:"relative",height:16,width:16}],curveRight:[j.l0.position.absolute,{bottom:0,left:7,borderRadius:"100% 0 0 0",borderTop:"2px solid ".concat(bW["commit-graph-color"]),borderLeft:"2px solid ".concat(bW["commit-graph-color"]),height:9,width:9}],curveUp:[j.l0.position.absolute,{top:0,left:0,borderRadius:"0 0 100% 0",borderBottom:"2px solid ".concat(bW["commit-graph-color"]),borderRight:"2px solid ".concat(bW["commit-graph-color"]),height:9,width:9}],fullLine:[{position:"absolute",width:2,height:"100%",left:7,backgroundColor:bW["commit-graph-color"]}],sidewaysLine:[{position:"absolute",width:"calc(100% - ".concat(16,"px)"),height:2,left:16,top:7,backgroundColor:bW["commit-graph-color"]}],compactLine:[j.l0.height("100%"),j.l0.position.relative,{gridArea:"spacer"},(0,e5._)({},j.nC.min("tabletMin"),{display:"none"})]}),bz=function(e){var t=e.children,n=e.hasLeft,r=e.hasRight;return(0,N.BX)(W.G,{css:bV.graph,children:[t,(0,N.tZ)(bY,{hasLeft:n,hasRight:r}),(0,N.tZ)("div",{css:bV.compactLine,children:(0,N.tZ)("div",{css:bV.decoration,children:(0,N.tZ)("div",{css:bV.fullLine,style:n?(0,e5._)({},bF["commit-graph-color"],j.TV.accentPrimaryDefault):{}})})})]})},bj=function(e){var t,n,r=e.children,i=e.area,o=e.title,a=e.action;if(!$.Children.count(r))return null;var l="common"===i?(t={},(0,e5._)(t,bF["segment-grid-area"],i),(0,e5._)(t,bF["commit-graph-color"],j.TV.outlineDefault),(0,e5._)(t,bF["commit-text-foreground"],j.TV.foregroundDimmer),(0,e5._)(t,bF["commit-extended-text-foreground"],j.TV.foregroundDimmest),t):(n={},(0,e5._)(n,bF["segment-grid-area"],i),(0,e5._)(n,bF["commit-graph-color"],j.TV.accentPrimaryDefault),(0,e5._)(n,bF["commit-text-foreground"],j.TV.accentPrimaryStrongest),(0,e5._)(n,bF["commit-extended-text-foreground"],j.TV.foregroundDimmest),n);return(0,N.BX)(N.HY,{children:["common"===i?null:(0,N.tZ)(bJ,{area:i,children:o}),"common"===i?null:(0,N.tZ)(bq,{area:i,children:a}),(0,N.tZ)(W.G,{style:l,tag:"ol",css:bV.segment,"aria-label":i,children:r})]})},bq=function(e){var t=e.children,n=e.area,r=(0,e5._)({},bF["segment-grid-area"],"action-".concat(n));return(0,N.tZ)(W.G,{style:r,css:bV.action,children:t})},bJ=function(e){var t=e.children,n=e.area,r=(0,e5._)({},bF["segment-grid-area"],"title-".concat(n));return(0,N.tZ)(W.G,{style:r,css:bV.title,children:"string"==typeof t?(0,N.tZ)(F.h4,{level:3,variant:"subheadDefault",color:"dimmer",children:t}):t})},bY=function(e){var t=e.hasLeft,n=e.hasRight,r=(0,e5._)({},bF["commit-graph-color"],t?j.TV.accentPrimaryDefault:"transparent"),i=(0,e5._)({},bF["commit-graph-color"],n?j.TV.accentPrimaryDefault:"transparent");return t||n?(0,N.BX)(N.HY,{children:[(0,N.BX)("div",{css:bV.splitLeft,children:[(0,N.BX)("div",{css:bV.decoration,children:[(0,N.tZ)("div",{css:bV.line,"data-line":!0,style:r}),(0,N.tZ)("div",{css:bV.fullLine,"data-full-line":!0,style:r})]}),(0,N.tZ)("div",{css:bV.curveRight,style:i}),(0,N.tZ)("div",{css:bV.sidewaysLine,style:i})]}),(0,N.tZ)("div",{css:bV.splitRight,style:i,children:(0,N.tZ)("div",{css:bV.curveUp})})]}):null},b$=function(e){var t=e.onClick,n=e.children,r=e.className;return t?(0,N.tZ)(ep.Yd,{className:r,onPress:t,css:j.l0.reset.button,children:n}):(0,N.tZ)("div",{className:r,children:n})},bK=function(e){var t=e.message,n=e.description,r=e.type,i=e.onClick;return(0,N.BX)(W.G,{tag:"li",css:bV.commit,"data-interactive":!!i,children:[(0,N.BX)("div",{css:bV.decoration,children:[(0,N.tZ)("div",{css:bV.line}),(0,N.tZ)("div",{css:"working"===r?bV.commitDotUntracked:bV.commitDot})]}),(0,N.BX)(b$,{onClick:i,css:bV.commitColumn,children:[(0,N.tZ)(F.xv,{multiline:!1,css:bV.commitMessage,style:"working"===r?(0,e5._)({},bF["commit-text-foreground"],j.TV.accentPrimaryStronger):{},children:t}),n?(0,N.tZ)(F.xv,{css:bV.commitDescription,children:n}):null]})]})},bQ=n(10495),b0=(0,H.X)({input:[j.l0.py(0),j.l0.minHeight(24),j.l0.pl(12)]}),b1=function(){var e,t=(0,q.Z)().git;return(0,$.useCallback)((e=(0,tP._)(function(e){return(0,tL.Jh)(this,function(n){switch(n.label){case 0:return[4,t.stageFiles({all:!0})];case 1:return n.sent(),[4,t.commit({message:e,allowEmpty:!1})];case 2:return n.sent(),t.forceRefresh(),[2]}})}),function(t){return e.apply(this,arguments)}),[t])},b2=function(e){var t,n=e.onDone,r=(0,P._)((0,$.useState)(""),2),i=r[0],o=r[1],a=b1(),l=(0,P._)((0,$.useState)(!1),2),c=l[0],s=l[1],u=(t=(0,tP._)(function(e){return(0,tL.Jh)(this,function(t){switch(t.label){case 0:if(!("Enter"===e.key&&e.metaKey))return[3,2];return e.stopPropagation(),e.preventDefault(),s(!0),[4,a(i)];case 1:t.sent(),s(!1),t.label=2;case 2:return"Escape"===e.key&&(o(""),n()),[2]}})}),function(e){return t.apply(this,arguments)});return(0,N.tZ)(ef.II,{autoFocus:!0,autoCapitalize:"off","aria-label":"Commit message",placeholder:"cmd+enter to commit",onKeyDown:u,onChange:function(e){o(e.target.value)},disabled:c,onBlur:n,css:b0.input})};function b4(){var e=(0,ej._)(["\n  query ProjectCommitGraphRemoteRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        title\n      }\n    }\n  }\n"]);return b4=function(){return e},e}var b3={},b8=(0,eq.Ps)(b4()),b6=function(){var e=(0,P._)((0,$.useState)(!1),2),t=e[0],n=e[1];return t?(0,N.tZ)("li",{children:(0,N.tZ)(b2,{onDone:function(){return n(!1)}})}):(0,N.tZ)(bK,{type:"working",message:"uncommitted changes",onClick:function(){return n(!0)}})},b5=function(e){var t,n,r,i,o,a,l,c,s,u,d,f=(u={variables:{id:e.selectedRepl.id}},d=(0,es._)({},b3,u),eJ.a(b8,d)).data,h=yX(),p=h.state,m=h.commits,v=(null==p?void 0:p.error)?null:null!==(l=null==p?void 0:p.state)&&void 0!==l?l:null,g=(null==p?void 0:p.error)?null:null!==(c=null==p?void 0:p.type)&&void 0!==c?c:null,y=(null==f?void 0:null===(t=f.repl)||void 0===t?void 0:t.__typename)==="Repl"&&f.repl.title||"Remote",b=g===nv.y5.NORMAL&&v!==nv.yG.CLEAN;if(null==m?void 0:m.error)return(0,N.tZ)(F.xv,{children:m.error});var w=!!(null==m?void 0:null===(n=m.theirs)||void 0===n?void 0:n.length),Z=!!(null==m?void 0:null===(r=m.ours)||void 0===r?void 0:r.length)||b;return(0,N.BX)(bz,{hasLeft:w,hasRight:Z,children:[w?(0,N.tZ)(bj,{area:"left",title:y,children:null==m?void 0:null===(i=m.theirs)||void 0===i?void 0:i.map(function(e){return(0,N.tZ)(bK,{message:e.subject,description:"".concat(e.author.name,", ").concat((0,bQ.F)(e.author.date))},e.hash)})}):null,Z?(0,N.BX)(bj,{area:"right",title:"My workspace",children:[b?(0,N.tZ)(b6,{}):null,null==m?void 0:null===(o=m.ours)||void 0===o?void 0:o.map(function(e){return(0,N.tZ)(bK,{message:e.subject,description:"".concat(e.author.name,", ").concat((0,bQ.F)(e.author.date))},e.hash)})]}):null,(0,N.tZ)(bj,{area:"common",children:null==m?void 0:null===(a=m.both)||void 0===a?void 0:a.map(function(e){return(0,N.tZ)(bK,{message:e.subject,description:"".concat(e.author.name,", ").concat((0,bQ.F)(e.author.date))},e.hash)})})]})},b7=function(e){var t=(0,P._)((0,$.useState)(function(){return(0,nb.MT)()}),1)[0];return(0,N.BX)(nw.Provider,{value:t,children:[(0,N.tZ)(rO,{}),(0,N.tZ)(b5,(0,es._)({},e))]})},b9=(0,H.X)({header:[j.l0.p(8),j.l0.rowWithGap(2),j.l0.border({color:j.TV.outlineDimmest,direction:"bottom"})],headerLeft:[j.l0.rowWithGap(8),j.l0.flex.wrap,j.l0.align.center,{flex:1}],comboBoxAndActions:[j.l0.rowWithGap(8),j.l0.flex.wrap,j.l0.flex.shrink(1)],iconButtonSet:[j.l0.rowWithGap(0)],iconButton:[j.l0.height(32),j.l0.width(28),j.l0.color.foregroundDimmer,j.l0.hover(j.l0.color.foregroundDefault)],headerRight:[j.l0.rowWithGap(8)],swapIcon:[j.l0.color.foregroundDimmest,{rotate:"90deg"}],warnings:[j.l0.colWithGap(12),j.l0.p(8)],toggle:[j.l0.minWidth(123)],loading:[j.l0.rowWithGap(8),j.l0.justify.center,j.l0.p(8)],buttons:[j.l0.rowWithGap(8)],errorView:[j.l0.rowWithGap(8),j.l0.justify.center],viewSection:[j.l0.px(8),j.l0.py(12),{":not(:last-of-type)":j.l0.border({color:j.TV.outlineDimmest,direction:"bottom"})}]}),we=function(e){var t=e.selectedRepl,n=e.currentRepl,r=e.remoteResult,i=e.tab,o=e.isMainRepl;return t?"Loading"===r.state?(0,N.tZ)(z.Z,{}):"Error"===r.state?(0,N.tZ)(F.xv,{children:"Something went wrong, please try again."}):"changes"===i?(0,N.tZ)(bT,{selectedRepl:t,isMainRepl:o}):(0,N.tZ)(b7,{selectedRepl:t,currentRepl:n}):(0,N.tZ)(F.xv,{children:"Select a Repl to compare against your current Repl."})};function wt(e){var t,n,r,i,o,a=e.repl,l=e.project,c=e.openGitPane,s=e.org,u=!!l.mainRepl&&a.id===l.mainRepl.id,d=(0,P._)((0,$.useState)(u?null:null!==(n=l.mainRepl)&&void 0!==n?n:null),2),f=d[0],h=d[1],p=(0,P._)((0,$.useState)("changes"),2),m=p[0],v=p[1],g=function(){return v("changes"===m?"commits":"changes")};(0,$.useEffect)(function(){(0,yG.u)({action:"tabOpened",orgId:s.id,projectId:l.id,tab:m,replType:u?"mainRepl":"devRepl"})},[m,l,s,u]);var y=yU({selectedReplId:null!==(r=null==f?void 0:f.id)&&void 0!==r?r:null}),b=y.isFetching,w=y.refetch,Z=y.state,x=y.remote,C=y.pull,_=C.doPull,S=C.state,k=S.error,E=S.loading,T=(null==Z?void 0:Z.error)?null:null!==(i=null==Z?void 0:Z.state)&&void 0!==i?i:null,R=k===ry.aq.DIRTY_WORKTREE||k===ry.aq.MERGE_CONFLICT||T===nv.yG.MERGING||T===nv.yG.REBASING||bR();return(0,N.tZ)(yM.Provider,{value:y,children:(0,N.BX)(W.G,{children:[(0,N.BX)(W.G,{css:b9.header,children:[(0,N.BX)(W.G,{css:b9.headerLeft,children:["changes"===m?(0,N.tZ)(ep.zx,{css:b9.toggle,text:"Changes",iconLeft:(0,N.tZ)(yP.Z,{}),iconRight:(0,N.tZ)(r5.Z,{css:b9.swapIcon}),onClick:g},"toggle"):(0,N.tZ)(ep.zx,{css:b9.toggle,text:"Commits",iconLeft:(0,N.tZ)(tG.Z,{}),iconRight:(0,N.tZ)(r5.Z,{css:b9.swapIcon}),onClick:g},"toggle"),(0,N.tZ)(F.xv,{color:"dimmer",multiline:!0,children:"compared against"}),(0,N.BX)(W.G,{css:b9.comboBoxAndActions,children:[(0,N.tZ)(bi,{"aria-label":"Select a Repl",replId:a.id,selectedReplId:null!==(o=null==f?void 0:f.id)&&void 0!==o?o:null,onSelect:h}),(0,N.BX)(W.G,{css:b9.iconButtonSet,children:[(0,N.tZ)(M.hU,{alt:"Pull",onClick:function(){_({branch:"main"}),(0,yG.u)({action:"pull",orgId:s.id,projectId:l.id,replType:u?"mainRepl":"devRepl"})},disabled:E||u,css:b9.iconButton,children:b?(0,N.tZ)(z.Z,{}):(0,N.tZ)(oo.Z,{})}),f?(0,N.tZ)(yA.I,(0,eu._)((0,es._)({alt:"Go to ".concat(f.title),target:"_blank"},(0,yB.aq)(f,{projectPane:!0})),{css:b9.iconButton,children:(0,N.tZ)(r3.Z,{})})):null]})]})]}),(0,N.tZ)(W.G,{css:b9.headerRight,children:(0,N.tZ)(M.hU,{alt:"Fetch",onClick:w,disabled:"Success"!==x.state,css:b9.iconButton,children:b?(0,N.tZ)(z.Z,{}):(0,N.tZ)(rn.Z,{})})})]}),R?(0,N.BX)(W.G,{css:b9.warnings,children:[k===ry.aq.DIRTY_WORKTREE?(0,N.tZ)(W.G,{css:b9.errorView,children:(0,N.tZ)(rF.E,{colorway:"negative",icon:(0,N.tZ)(rv.Z,{}),text:"You have uncommitted changes. Please commit them before pulling."})}):null,k===ry.aq.MERGE_CONFLICT?(0,N.BX)(W.G,{css:b9.errorView,children:[(0,N.tZ)(rF.E,{colorway:"negative",icon:(0,N.tZ)(rv.Z,{}),text:"There were conflicts in the changes you are trying to pull. Click to resolve them."}),(0,N.tZ)(ep.zx,{text:"Resolve Manually",onClick:function(){c(),_({branch:"main",allowConflicts:!0}),(0,yG.u)({projectId:l.id,orgId:s.id,action:"pullWithConflicts",replType:u?"mainRepl":"devRepl"})},colorway:"negative"})]}):null,T===nv.yG.MERGING?(0,N.tZ)(rF.E,{colorway:"primary",text:"Merge in progress"}):null,T===nv.yG.REBASING?(0,N.tZ)(rF.E,{colorway:"primary",text:"Rebase in progress"}):null,(0,N.tZ)(bR,{})]}):null,u?(0,N.tZ)(W.G,{css:b9.viewSection,children:(0,N.tZ)(bI,{selectedRepl:null!=f?f:void 0})}):null,!u&&f?(0,N.tZ)(W.G,{css:b9.viewSection,children:(0,N.tZ)(bM,{destinationRepl:f,sourceRepl:a,projectId:l.id,mainReplId:null===(t=l.mainRepl)||void 0===t?void 0:t.id,orgId:s.id})}):null,(0,N.tZ)(W.G,{css:b9.viewSection,children:(0,N.tZ)(we,{currentRepl:a,selectedRepl:f,remoteResult:x,isMainRepl:u,tab:m})})]})})}function wn(){var e=(0,ej._)(["\n  query ProjectPane($id: String!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        ...ReplToReplMergeCurrentRepl\n        project {\n          ...ReplToReplMergeProject\n          org {\n            ...ReplToReplMergeOrg\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return wn=function(){return e},e}var wr={},wi=(0,eq.Ps)(wn(),y8,y3,y2),wo=n(19480),wa=(0,H.X)({container:[j.l0.p(8)],loading:[j.l0.rowWithGap(8),j.l0.justify.center,j.l0.p(16)]});function wl(e){var t,n,r,i=e.isActive,o=e.performPaneOperation,a=(0,ez.Z)(),l=(0,wo.I9)(),c=(t=(0,es._)({},wr,{variables:{id:a}}),eJ.a(wi,t)),s=c.data,u=c.loading,d=c.error,f=(null==s?void 0:s.repl.__typename)==="Repl"?s.repl:null,h=(null==f?void 0:null===(n=f.project)||void 0===n?void 0:n.__typename)==="Project"?f.project:null,p=(null==h?void 0:null===(r=h.org)||void 0===r?void 0:r.__typename)==="Org"?h.org:null,m=(0,ak.Z)().showError,v="error"===l.state?l.error:null;return((0,$.useEffect)(function(){v&&m(v)},[m,v]),l_(i),u||"loading"===l.state)?(0,N.tZ)(W.G,{css:wa.loading,children:(0,N.tZ)(z.Z,{})}):p&&h?d||!f?(0,N.tZ)(W.G,{css:wa.container,children:(0,N.tZ)(F.xv,{children:"Something went wrong, please try again."})}):(0,N.tZ)(wt,{repl:f,project:h,org:p,openGitPane:function(){return o({operation:"open",pane:{type:"git"}})}}):(0,N.tZ)(W.G,{css:wa.container,children:(0,N.tZ)(F.xv,{children:"This Repl is not a project!"})})}var wc=O.Dy.Object({type:O.Dy.Literal("project")}),ws={Content:function(e){var t=e.options,n=t.isActive,r=t.performPaneOperation;return(0,N.tZ)(wl,{isActive:n,performPaneOperation:r})},Icon:function(){return(0,N.tZ)(yI.Z,{})},getTitle:function(){return"Project"},decode:function(e){return U.B4.Decode(wc,e)}},wu=O.Dy.Object({type:O.Dy.Literal("devdocs")}),wd={Content:function(e){return(0,N.tZ)("iframe",{title:"DevDocs",height:"100%",src:"https://devdocs.io"})},Icon:function(e){var t=e.size;return(0,N.tZ)(e4.Pd.Provider,{value:{color:e3.TV.foregroundDimmer,size:t},children:(0,N.tZ)(d4.Z,{})})},getTitle:function(){return"DevDocs"},getTitlePill:function(){return{text:"Staff-only",colorway:"warning"}},description:"Documentation for common software platforms & APIs",decode:function(e){return U.B4.Decode(wu,e)}},wf=n(48345),wh=n(10692),wp=O.Dy.Object({type:O.Dy.Literal("agentPlan")}),wm={Content:function(e){return(0,N.tZ)(wh.Z,{})},Icon:function(e){var t=e.size;return(0,N.tZ)(e4.Pd.Provider,{value:{color:e3.TV.blurpleStrongest,size:t},children:(0,N.tZ)(wf.Z,{})})},getTitle:function(){return"Plan"},decode:function(e){return U.B4.Decode(wp,e)}};function wv(){return{codeEditor:er.D,webview:ve.R,media:sf,binary:et,pedit:pW,vnc:m7,unitTests:mK,adminPanel:gl,runnerOutput:pK.G,shell:mX,packager:pB,dependencies:gI,systemDependencies:mJ,envEditor:nf,draw:nl,git:lk,diff:tJ,history:cQ,database:e6,neon:dQ,markdown:su,ssh:yS,ghostwriterChat:g3,problems:p$,networking:fu,objectStorage:h9,workflows:yD,project:ws,devdocs:wd,agentPlan:wm}}},89587:function(e,t,n){n.d(t,{Qk:function(){return d},el:function(){return u}});var r=n(27387),i=n(96583),o=n(50959),a=n(40635),l=n(43471),c=n(53157),s=(0,a.cn)(!1),u=function(e){var t=(0,l.$X)(s);(0,o.useEffect)(function(){return e.watch(function(e){var n,r;if(e.error){if("NOT_FOUND"===e.error){t(!0);return}t(!1)}t(!(null===(r=e.config)||void 0===r?void 0:null===(n=r.autoSave)||void 0===n?void 0:n.disabled))})},[e,t])},d=function(){return(0,l.Hg)(s)};(0,r._)(function(e,t){return(0,i.Jh)(this,function(n){switch(n.label){case 0:return[4,e.updateDotReplit([(0,c.Bn)(!t)])];case 1:return[2,n.sent()]}})})},68883:function(e,t,n){n.d(t,{T:function(){return o},u:function(){return a}});var r=n(43471),i=(0,n(40635).cn)(null);function o(){return(0,r.$X)(i)}function a(){return(0,r.Hg)(i)}},67883:function(e,t,n){n.d(t,{mK:function(){return s},qm:function(){return l},xx:function(){return c}});var r=n(40635),i=n(50959),o=n(43471),a=(0,r.cn)(!1);function l(){return(0,o.Hg)(a)}function c(){var e=(0,o.$X)(a);return(0,i.useCallback)(function(){return e(!0)},[e])}function s(e){var t=(0,o.$X)(a),n=(0,i.useRef)(!1);(0,i.useEffect)(function(){n.current||(n.current=!0,t(e))},[t,e])}},39885:function(e,t,n){n.d(t,{a9:function(){return a},kM:function(){return l}});var r=n(40635),i=n(43471),o=(0,r.cn)(null);function a(){return(0,i.$X)(o)}function l(){return(0,i.Hg)(o)}},56400:function(e,t,n){n.d(t,{Nd:function(){return U},OY:function(){return N},Li:function(){return X},bB:function(){return O},BV:function(){return L}});var r=n(66626),i=n(63257),o=n(40635),a=n(58045),l=n(39743),c=n(43471),s=n(59786),u=n(39271),d=n(91175),f=n(38753),h=n(90188),p=n(32501),m=n(49345),v=n(93264),g=n(5017),y=n(288),b=n(46584),w=n(85438),Z=n(85421),x=n(50959),C=n(44079),_=n(41733),S=n(21262),k=n(71440),E=n(58995);function T(){var e=(0,S._)(["\n  fragment WorkspaceToolPanesRepl on Repl {\n    isModelSolution\n    isProject\n    isProjectFork\n    workspaceCta\n    authorizations {\n      editFileContents {\n        isAuthorized\n      }\n      editPermissions {\n        isAuthorized\n      }\n    }\n    authorizations {\n      viewDeploymentConfig {\n        isAuthorized\n      }\n    }\n    config {\n      isServer\n      isVnc\n    }\n  }\n"]);return T=function(){return e},e}function R(){var e=(0,S._)(["\n  query WorkspaceToolPanes($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceToolPanesRepl\n      }\n    }\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n  ","\n"]);return R=function(){return e},e}var D={},I=(0,k.Ps)(T()),B=(0,k.Ps)(R(),I),G=(0,o.cn)([]),A=["shell","git","diff","packager","envEditor","deployments","database","neon","ghostwriterChat","unitTests","submitEduRepl","preferences","docs","multiplayer","objectStorage","adminPanel","ssh","webview","problems","systemDependencies","dependencies","project","workflows"],P=["ghostwriterChat","deployments"];function L(){return(0,c.Hg)(G)}function N(){return(0,c.XD)(G)}function O(){var e,t,n,i,o,l,S,k=(0,c.$X)(G),T=(o=(null==(i=(t={variables:{replId:(0,u.Z)()}},n=(0,_._)({},D,t),E.a(B,n)).data)?void 0:null===(e=i.repl)||void 0===e?void 0:e.__typename)==="Repl"?null==i?void 0:i.repl:null)?{repl:o,currentUser:(null==i?void 0:i.currentUser)||null}:{repl:null,currentUser:null},R=T.repl,I=T.currentUser,L=(0,Z.useRouter)(),N=(0,f.T3)(),O=(0,s.P5)({controlName:"flag-neon-databases",logFlagToAnalytics:!1}),U=(0,s.P5)({controlName:"flag-postgres-db-god-mode",logFlagToAnalytics:!1}),M=!!(null==R?void 0:null===(S=R.authorizations)||void 0===S?void 0:null===(l=S.viewDeploymentConfig)||void 0===l?void 0:l.isAuthorized),X=(0,s.P5)({controlName:"flag-repl-auth-sidebar",logFlagToAnalytics:!1}),F=(0,s.P5)({controlName:"flag-problems-pane",logFlagToAnalytics:!1}),W=(0,s.P5)({controlName:"flag-object-storage-pane"}),H=(0,s.P5)({controlName:"flag-new-dependencies-pane"}),V=(0,s.P5)({controlName:"flag-work-flows",logFlagToAnalytics:!0}),z=(0,s.P5)({controlName:"flag-doc-your-devs"}),j=(0,p.J)().hasProject,q=(0,v.cR)(),J=(0,m.Z)().language,Y=(0,g.T)(),$=(0,b.Ln)(),K=(0,y.Z)().isTutorial,Q=(0,h.I)().configs.some(function(e){return"nix"!==e.id}),ee=(0,C.WG)(),et=(null==I?void 0:I.isAdmin)||!!L.query.debug,en=(0,a.Se)(),er=(0,d.T)();(0,x.useEffect)(function(){var e=N&&(null==R?void 0:R.authorizations.editPermissions.isAuthorized)?[{type:"multiplayer"}]:[];if(R&&I){var t=!er,n=R.isProject||R.isProjectFork,i=!er,o=!n&&null!==J,a=U||!er&&O,l=[[{type:"shell"},!0],[{type:"instructions"},$],[{type:"threadInbox"},!0],[{type:"chat"},!0],[{type:"docs",data:{url:null}},!0],[{type:"webview"},!0],[{type:"vnc"},t],[{type:"runnerOutput"},!er],[{type:"git"},!0],[{type:"packager"},!H],[{type:"systemDependencies"},!H],[{type:"dependencies"},H],[{type:"envEditor"},!0],[{type:"debugger"},!0],[{type:"tutorial"},K],[{type:"database"},i],[{type:"neon"},a],[{type:"replAuth"},!!(X&&Q)],[{type:"autograder"},n],[{type:"unitTests"},o],[{type:"education"},!!Y],[{type:"preferences"},!0],[{type:"adminPanel"},et],[{type:"deployments"},M],[{type:"ssh"},!0],[{type:"ghostwriterChat"},!0],[{type:"searchReplace"},!0],[{type:"extensionStore",data:{page:"store"}},!0],[{type:"extensionDevtools"},q],[{type:"problems"},F],[{type:"networking"},!0],[{type:"objectStorage"},W],[{type:"workflows"},V],[{type:"project"},j],[{type:"devdocs"},z]];if(N){var c=R.workspaceCta===w.Sy.Submit||R.workspaceCta===w.Sy.Resubmit;l.push([{type:"submitEduRepl"},c])}var s=!0,u=!1,d=void 0;try{for(var f,h=ee[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value;l.push([{type:"extension",data:{extensionId:p.extension.extensionId,installationId:p.extension.installationId,name:p.name||p.extension.manifest.name,icon:p.icon||p.extension.manifest.icon,baseUrl:p.extension.baseUrl,path:p.handler}},!0])}}catch(e){u=!0,d=e}finally{try{s||null==h.return||h.return()}finally{if(u)throw d}}var m=!0,v=!1,g=void 0;try{for(var y,b=l[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var Z=(0,r._)(y.value,2),x=Z[0];Z[1]&&(!N||A.includes(x.type))&&e.push(x)}}catch(e){v=!0,g=e}finally{try{m||null==b.return||b.return()}finally{if(v)throw g}}k(e.map(function(e){return{title:en.getTitle(e),pane:e}}).sort(function(e,t){return P.includes(e.pane.type)?-1:P.includes(t.pane.type)?1:e.title.localeCompare(t.title)}).map(function(e){return e.pane}))}},[k,N,R,I,X,Q,J,U,H,O,$,K,Y,et,M,q,F,ee,en,W,V,er,j,z])}var U=8,M=(0,o.cn)(function(e){var t=Array.from(e(l.Yn).values()).flat(),n=e(l.LX),r=(0,i._)(t).concat((0,i._)(n)).sort(function(e,t){return t.lastActiveAt-e.lastActiveAt}),o=[],c=!0,s=!1,u=void 0;try{for(var d,f=r[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var h=function(){var e=d.value;return o.length===U?"break":(0,a.RX)(e.pane.type)||"commands"===e.pane.type?"continue":void(-1===o.findIndex(function(t){return t.type===e.pane.type})&&o.push(e.pane))}();if("break"===h)break}}catch(e){s=!0,u=e}finally{try{c||null==f.return||f.return()}finally{if(s)throw u}}return o});function X(){return(0,c.yL)(M)}},21822:function(e,t,n){n.d(t,{G8:function(){return I},mj:function(){return G},Fq:function(){return R},am:function(){return T},iM:function(){return z},gG:function(){return W},mh:function(){return ea},nR:function(){return S},IV:function(){return V},IP:function(){return j},uL:function(){return er},Vg:function(){return X},sA:function(){return eo},xI:function(){return E},lP:function(){return D},DW:function(){return F},e8:function(){return U},D:function(){return O},Oo:function(){return C},QF:function(){return P},s2:function(){return et}});var r=n(27387),i=n(41733),o=n(96583),a=n(57704),l=n(40635),c=n(43471),s=n(50959),u=n(31417),d=n(66626),f=n(53594),h=n(32845),p=n(29547),m=n(41974),v=n(38117),g=n(3341),y=n.n(g),b=n(42943),w=n.n(b),Z=n(37715),x=(0,l.cn)(void 0);function C(){return(0,c.Hg)(x)}var _=(0,l.cn)(function(e){return void 0===e(x)});function S(){return(0,c.Hg)(_)}var k=(0,l.cn)(null,function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=(0,m.Uy)(e(x),n);return t(x,i),r.persist&&e(en).persist(),i});function E(){var e=(0,c.$X)(k);return(0,s.useCallback)(function(t,n){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).persist;return e(function(e){var r,i=null==e?void 0:null===(r=e.workflow)||void 0===r?void 0:r[t];i&&n(i)},{persist:r})},[e])}function T(){var e=(0,c.$X)(k);return(0,s.useCallback)(function(t){return e(function(e){var n;null==e||null===(n=e.workflow)||void 0===n||n.splice(t,1)},{persist:!0})},[e])}function R(){var e=E();return(0,s.useCallback)(function(t){return e(t.workflowIndex,function(e){null==e||e.tasks.splice(t.taskIndex,1)},{persist:!0})},[e])}function D(){var e=E();return(0,s.useCallback)(function(t,n,r){var i=r.persist;return e(t.workflowIndex,function(e){e.tasks[t.taskIndex]=n},{persist:i})},[e])}function I(){var e=E();return(0,s.useCallback)(function(t){return e(t,function(e){var t,n=null!==(t=e.tasks[e.tasks.length-1])&&void 0!==t?t:{};e.tasks.push(n?(0,i._)({},n):{task:"shell.exec",args:"ls"})})},[e])}var B=(0,l.cn)(null,function(e,t,n){var r=t(k,function(e){e.workflow?e.workflow.push(n):e.workflow=[n]},{persist:!0});return w()(null==r?void 0:r.workflow),r.workflow.length-1});function G(){return(0,c.$X)(B)}var A=(0,l.cn)(void 0);function P(){return(0,c.Hg)(A)}var L=(0,l.cn)(function(e){var t,n=e(x);return null!==(t=null==n?void 0:n.workflow)&&void 0!==t?t:[]}),N=(0,p.kv)(L,function(e){var t;return null!==(t=null==e?void 0:e.map(function(e,t){return t}))&&void 0!==t?t:[]},y());function O(){return(0,c.Hg)(L)}function U(){return(0,c.Hg)(N)}function M(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=Object.values(e)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.workflow.name===t&&n.push(c)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n.length?n.sort(function(e,t){return e.startTime-t.startTime}):null}function X(e){var t,n;return(0,c.Hg)((t=e.workflowIndex,n=e.taskIndex,(0,s.useMemo)(function(){return(0,p.kv)(L,function(e){var r;return e?null===(r=e[t])||void 0===r?void 0:r.tasks[n]:null})},[t,n])))}function F(e){return(0,c.Hg)((0,s.useMemo)(function(){return(0,p.kv)(L,function(t){return t?t[e]:null})},[e]))}function W(){return(0,c.XD)(L)}function H(e){var t=(0,s.useMemo)(function(){return(0,l.cn)(function(t){var n,r=null===(n=t(L)[e])||void 0===n?void 0:n.name;if(!r)return null;var i=t(A);return i?M(i,r):null})},[e]);return(0,s.useMemo)(function(){return(0,p.kv)(t,function(e){return e?e[e.length-1]:null})},[t])}function V(e){return(0,c.Hg)(H(e))}function z(e){return(0,c.XD)(H(e))}function j(e){var t;return(0,c.yL)((t=H(e),(0,s.useMemo)(function(){return(0,p.kv)(t,function(e){return(null==e?void 0:e.step)===a.KX.RUNNING})},[t])))}function q(){return(q=(0,r._)(function(e,t){var n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,e.updateDotReplit([(null===(n=t.workflow)||void 0===n?void 0:n.length)?{path:"workflows",op:"add",value:JSON.stringify(t)}:{path:"workflows",op:"remove",value:""}])];case 1:if(r.sent().error)return[2,(0,v.UG)("Error applying update")];return[2,(0,v.Ok)(null)]}})})).apply(this,arguments)}var J=(0,l.cn)(function(e){var t=e(x);if(!(null==t?void 0:t.workflow)||!(null==t?void 0:t.runButton))return null;var n=!0,r=!1,i=void 0;try{for(var o,a=t.workflow[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.name===t.runButton)return l}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return null}),Y=(0,p.kv)(J,function(e){var t;return null!==(t=null==e?void 0:e.name)&&void 0!==t?t:null}),$=(0,l.cn)(function(e){var t=e(J);if(!t)return null;var n=e(A);if(!n)return null;var r=M(n,t.name);return(null==r?void 0:r[0])?r:null}),K=(0,p.kv)($,function(e){var t;return null!==(t=null==e?void 0:e[e.length-1])&&void 0!==t?t:null}),Q=(0,p.kv)(K,function(e){var t;return null!==(t=null==e?void 0:e.step)&&void 0!==t?t:null}),ee=(0,p.kv)(K,function(e){var t;return null!==(t=null==e?void 0:e.runId)&&void 0!==t?t:null});function et(){var e=(0,c.XD)(ee),t=(0,c.Hg)(Y),n=(0,c.Hg)(Q),r=(0,Z.U)(function(e){return function(){return!!t&&e.workflows.runWorkflow.rpc({workflowId:t})}},[t]),i=(0,Z.U)(function(t){return function(){var n=e();return!!n&&t.workflows.stopRun.rpc({runId:n})}},[e]);return t?{run:r,stop:i,step:n}:null}var en=(0,l.cn)({persist:(0,r._)(function(){return(0,o.Jh)(this,function(e){return[2,(0,v.Ok)(null)]})})});function er(){var e=(0,c.XD)(en);return(0,s.useCallback)(function(){return(0,e().persist)()},[e])}var ei=(0,l.cn)(!1);function eo(e){var t=(0,c.$X)(ei);(0,s.useEffect)(function(){t(e)},[t,e]),(0,s.useEffect)(function(){return function(){t(!1)}},[t,e])}function ea(e){var t,n,i,a,l,p=e.dotReplit,m=(0,c.XD)(x),g=(0,c.$X)(x),b=(0,c.XD)(ei);n=(t={onWorkflowsConfigChange:(0,s.useCallback)(function(e){var t=m();t&&b()||y()(e,t)||g(e||{})},[g,m,b]),onRunStateChange:(0,c.$X)(A)}).onWorkflowsConfigChange,i=t.onRunStateChange,a=(0,h.I)(),(0,f.C)((l=(0,r._)(function(e,t){var l,c;function s(){return(s=(0,r._)(function(){var t,r,i,a,l,s,f,h,p,m;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,e.workflows.config.subscribe({})];case 1:r=(t=d._.apply(void 0,[o.sent(),2]))[0],i=t[1],c(i),a=!1,l=!1,o.label=2;case 2:o.trys.push([2,7,8,13]),f=(0,u._)(r),o.label=3;case 3:return[4,f.next()];case 4:if(!(a=!(h=o.sent()).done))return[3,6];if(!(p=h.value).ok)return[3,5];n(p.payload.config),o.label=5;case 5:return a=!1,[3,3];case 6:return[3,13];case 7:return m=o.sent(),l=!0,s=m,[3,13];case 8:if(o.trys.push([8,,11,12]),!(a&&null!=f.return))return[3,10];return[4,f.return()];case 9:o.sent(),o.label=10;case 10:return[3,12];case 11:if(l)throw s;return[7];case 12:return[7];case 13:return[2]}})})).apply(this,arguments)}function f(){return(f=(0,r._)(function(){var t,n,r,a,l,s,f,h,p,m;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,e.workflows.runState.subscribe({})];case 1:n=(t=d._.apply(void 0,[o.sent(),2]))[0],r=t[1],c(r),a=!1,l=!1,o.label=2;case 2:o.trys.push([2,7,8,13]),f=(0,u._)(n),o.label=3;case 3:return[4,f.next()];case 4:if(!(a=!(h=o.sent()).done))return[3,6];if(!(p=h.value).ok)return[3,5];i(p.payload.state),o.label=5;case 5:return a=!1,[3,3];case 6:return[3,13];case 7:return m=o.sent(),l=!0,s=m,[3,13];case 8:if(o.trys.push([8,,11,12]),!(a&&null!=f.return))return[3,10];return[4,f.return()];case 9:o.sent(),o.label=10;case 10:return[3,12];case 11:if(l)throw s;return[7];case 12:return[7];case 13:return[2]}})})).apply(this,arguments)}return(0,o.Jh)(this,function(n){switch(n.label){case 0:if(l=t.signal,c=t.addCleanup,!a)return[2];return[4,e.workflows.init.rpc({env:a})];case 1:if(n.sent(),l.aborted)return[2];return[4,Promise.all([function(){return s.apply(this,arguments)}(),function(){return f.apply(this,arguments)}()])];case 2:return n.sent(),[2]}})}),function(e,t){return l.apply(this,arguments)}),[n,i,a]);var w=(0,c.yL)(x),Z=(0,c.$X)(en);(0,s.useEffect)(function(){Z({persist:(0,r._)(function(){var e;return(0,o.Jh)(this,function(t){return(e=w.current)?[2,function(e,t){return q.apply(this,arguments)}(p,e)]:[2,(0,v.UG)("No config found")]})})})},[p,Z,w])}},92539:function(e,t,n){n.d(t,{Z:function(){return d},r:function(){return m}});var r=n(27387),i=n(41733),o=n(66626),a=n(96583),l=n(57180);function c(){return(c=(0,r._)(function(e){return(0,a.Jh)(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t){return setTimeout(function(){return t()},e)})];case 1:return t.sent(),[2]}})})).apply(this,arguments)}var s=n(46026),u=new RegExp(/(file:\/\/)?\/home\/runner\/[^/]+\/(.*)/);function d(e,t,n,r){return f.apply(this,arguments)}function f(){return(f=(0,r._)(function(e,t,n,i){var c,u,d;return(0,a.Jh)(this,function(f){switch(f.label){case 0:return u=(c=(0,o._)((0,l.F)(e-1,!1,t),2))[0],d=c[1]+1,[4,m(u,(0,r._)(function(){var e;return(0,a.Jh)(this,function(t){switch(t.label){case 0:return[4,i()];case 1:return[2,null===(e=t.sent())||void 0===e?void 0:e.files]}})}))];case 1:return[2,f.sent().map(function(e){var r=e.from,i=e.to,o=e.file,a=e.line,c=e.col;return{range:(0,l.b)(d,r,i,t),text:o,activate:function(e,t){(0,s.jh)(e)&&n({path:t,line:a,col:c})}}})]}})})).apply(this,arguments)}var h=/[a-zA-Z0-9_\-.[\]$@()]+/,p='", line ';function m(e,t){return v.apply(this,arguments)}function v(){return(v=(0,r._)(function(e,t){var n,r,o,l,s,d,f,m,v;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,Promise.race([t(),(function(e){return c.apply(this,arguments)})(5e3).then(function(){return[]})])];case 1:if(!(n=a.sent())||0===n.length)return[2,[]];for(r=[],o=0,l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e[o+t]},s=function(){var t=e[o];return o++,t},d=function(){var t=o;s();for(var n="";/\d/.test(l());)n+=s();if(0===n.length)return o=t,null;if(":"!==l())return{line:parseInt(n,10),col:0};s();for(var r="";o<e.length&&/\d/.test(l());)r+=s();return 0===r.length?(o--,{line:parseInt(n,10),col:0}):{line:parseInt(n,10),col:parseInt(r,10)}},f=function(){for(var t=o,n=0;n<p.length;n++)s();for(var r="";o<e.length&&/\d/.test(l());)r+=s();return 0===r.length?(o=t,null):{line:parseInt(r,10),col:0}},m=function(){var t=o,r="";for("."===l()&&"/"===l(1)&&(r+=s()+s()),("("===l()||"["===l())&&s();o<e.length;){var a=l();if(h.test(a))r+=s();else if("/"===a){if("/"===r[r.length-1])break;r+=s()}else break}var c={line:1,col:0};if(":"===l()){var m=d();m&&(c=m)}else if(e.substring(o,o+p.length)===p){var v=f();v&&(c=v,t--)}(r.startsWith("a/")||r.startsWith("b/"))&&(e.indexOf("diff --git ")>=0||e.indexOf("--- a/")>=0||e.indexOf("+++ b/")>=0)&&n.indexOf(r.substring(2))>=0&&(r=r.substring(2),t+=2);var g=r.replace(u,"$2").replace(/^\.?\//,"").trim();return g&&n.find(function(e){return e===g||e.substring(e.lastIndexOf("/")+1)===g})?(0,i._)({file:g,from:t,to:o},c):null};o<e.length;)(v=m())?r.push(v):s();return[2,r]}})})).apply(this,arguments)}},57180:function(e,t,n){function r(e,t,n,r){var i=n-t;return{start:{x:(t+1)%r.cols,y:e+Math.floor((t+1)/r.cols)},end:{x:(t+i)%r.cols,y:e+Math.floor((t+i)/r.cols)}}}function i(e,t,n){var r,i,o="";do{var a=n.buffer.active.getLine(e);if(!a)break;a.isWrapped&&e--,i=a.isWrapped}while(i);var l=e;do{var c=n.buffer.active.getLine(e+1);r=!!c&&c.isWrapped;var s=n.buffer.active.getLine(e);if(!s)break;o+=s.translateToString(!r&&t).substring(0,n.cols),e++}while(r);return[o,l]}n.d(t,{F:function(){return i},b:function(){return r}})},57704:function(e,t,n){n.d(t,{KX:function(){return o},PX:function(){return a},zY:function(){return x}});var r,i,o,a,l=n(41733),c=n(30509),s=n(74044);(r=o||(o={})).NOT_STARTED="NOT_STARTED",r.RUNNING="RUNNING",r.FINISHED="FINISHED",r.FAILED="FAILED",(i=a||(a={})).NOT_STARTED="NOT_STARTED",i.RUNNING="RUNNING",i.FINISHED="FINISHED",i.FAILED="FAILED",i.ERROR="ERROR";var u=s.Dy.Object({task:s.Dy.Literal("dummy.echo"),args:s.Dy.Optional(s.Dy.String())}),d=s.Dy.Object({task:s.Dy.Literal("dummy.print"),args:s.Dy.String()}),f=s.Dy.Object({task:s.Dy.Literal("dummy.sleep"),args:s.Dy.Optional(s.Dy.Number({minimum:0}))}),h=s.Dy.Object({task:s.Dy.Literal("dummy.pass")}),p=s.Dy.Object({task:s.Dy.Literal("dummy.fail")}),m=s.Dy.Object({task:s.Dy.Literal("shell.exec"),args:s.Dy.String()}),v=s.Dy.Object({task:s.Dy.Literal("shell.exec"),cgroupPath:s.Dy.Optional(s.Dy.String())}),g=s.Dy.Object({task:s.Dy.Literal("workspace.openWebview"),args:s.Dy.Number({minimum:0})}),y=s.Dy.Object({task:s.Dy.Literal("packager.installForLanguage"),args:s.Dy.String()}),b=s.Dy.Object({task:s.Dy.Literal("packager.installForAll")}),w=s.Dy.Object({task:s.Dy.Literal("workflow.run"),args:s.Dy.String()}),Z=s.Dy.Object({task:s.Dy.Literal("workflow.run"),runId:s.Dy.String()}),x=s.Dy.Union([u,d,f,h,p,m,y,b,g,w]),C=s.Dy.Union([v,Z]),_=s.Dy.Union([s.Dy.Literal("parallel"),s.Dy.Literal("sequential")]),S=s.Dy.Object({name:s.Dy.String(),mode:s.Dy.Optional(_),tasks:s.Dy.Array(x)});s.Dy.Object({workflows:s.Dy.Object({runButton:s.Dy.Optional(s.Dy.String()),workflow:s.Dy.Optional(s.Dy.Array(S))})}),s.Dy.Object({runButton:s.Dy.Optional(s.Dy.String()),workflow:s.Dy.Optional(s.Dy.Array(S))});var k={userIds:s.Dy.Array(s.Dy.Number()),metadata:s.Dy.Optional(s.Dy.Omit(C,["task"]))},E=s.Dy.Union([s.Dy.Object((0,c._)((0,l._)({},k),{state:s.Dy.Literal("NOT_STARTED")})),s.Dy.Object((0,c._)((0,l._)({},k),{state:s.Dy.Literal("RUNNING"),startTime:s.Dy.Number()})),s.Dy.Object((0,c._)((0,l._)({},k),{state:s.Dy.Literal("FAILED"),startTime:s.Dy.Number(),endTime:s.Dy.Number(),result:s.Dy.Optional(s.Dy.Object({message:s.Dy.Optional(s.Dy.String()),exitCode:s.Dy.Optional(s.Dy.Number())}))})),s.Dy.Object((0,c._)((0,l._)({},k),{state:s.Dy.Literal("FINISHED"),startTime:s.Dy.Number(),endTime:s.Dy.Number(),result:s.Dy.Optional(s.Dy.Object({message:s.Dy.Optional(s.Dy.String()),exitCode:s.Dy.Optional(s.Dy.Number())}))})),s.Dy.Object((0,c._)((0,l._)({},k),{state:s.Dy.Literal("ERROR"),startTime:s.Dy.Number(),endTime:s.Dy.Number(),message:s.Dy.String()}))]);s.Dy.Record(s.Dy.String(),s.Dy.Object({runId:s.Dy.String(),startTime:s.Dy.Number(),endTime:s.Dy.Optional(s.Dy.Number()),step:s.Dy.Enum(o),tasks:s.Dy.Array(E),workflow:S}))},80047:function(e,t,n){n.d(t,{OO:function(){return r},Uw:function(){return i},vw:function(){return o}});var r="replit-repltuned-v1-5-3b",i={"replit-repltuned-v1-5-3b":{},"replit-v1-5-3b":{}},o=new Set(Object.keys(i))},97906:function(e,t,n){function r(e){return 15113696===e}function i(e){return 777914===e||r(e)||3944703===e||29762144===e}n.d(t,{v4:function(){return r},xm:function(){return i}})},51585:function(e,t,n){n.d(t,{I:function(){return i},z:function(){return r}});var r=100,i=250},3112:function(e,t,n){n.d(t,{r:function(){return r},u:function(){return i}});var r="flag-ai-modelfarm-usage-gating",i=function(e){return"https://docs.replit.com/replitai/model-farm/".concat(e,"#installation")}},2049:function(e,t,n){n.d(t,{z2:function(){return l}});var r=n(63257),i=n(80047),o=n(77476),a=[{id:"true",editorPreferencesValue:!0,title:"true"},{id:"false",editorPreferencesValue:!1,title:"false"}],l={layout:{id:"layout",name:"Default Layout",description:"Change the layout of the editor.",type:"select",editorPreferencesKey:"isLayoutStacked",options:[{id:"side-by-side",editorPreferencesValue:!1,title:"side-by-side"},{id:"stacked",editorPreferencesValue:!0,title:"stacked"}]},fontSize:{id:"fontSize",name:"Font Size",description:"Change the font size of the editor.",type:"select",editorPreferencesKey:"fontSize",options:[{id:"10",editorPreferencesValue:10,title:"tiny"},{id:"12",editorPreferencesValue:12,title:"small"},{id:"14",editorPreferencesValue:14,title:"normal"},{id:"18",editorPreferencesValue:18,title:"large"},{id:"24",editorPreferencesValue:24,title:"huge"}]},wrapping:{id:"wrapping",name:"Wrapping",description:"Change whether the editor wraps lines or not.",type:"select",editorPreferencesKey:"wrapping",options:[{id:"none",editorPreferencesValue:!1,title:"none"},{id:"soft",editorPreferencesValue:!0,title:"soft wrap"}]},minimap:{id:"minimap",name:"Minimap",description:"Change the minimap display.",type:"select",editorPreferencesKey:"minimapDisplay",options:[{id:"none",editorPreferencesValue:"none",title:"none"},{id:"blocks",editorPreferencesValue:"blocks",title:"blocks"},{id:"characters",editorPreferencesValue:"characters",title:"characters"}]},indentationDetection:{id:"indentDetection",name:"Indentation Detection",description:"Automatically detect indentation settings when opening a file.",type:"boolean",editorPreferencesKey:"indentDetection",options:a},indentFormatPastes:{id:"indentFormatPastes",name:"Format Pasted Text Indentation",description:"Automatically format the indentation of pasted text.",type:"boolean",editorPreferencesKey:"indentFormatPastes",options:a},indentIsSpaces:{id:"indentationCharacter",name:"Indentation Character",description:"The character used for indenting lines.",type:"select",editorPreferencesKey:"indentIsSpaces",options:[{id:"spaces",editorPreferencesValue:!0,title:"spaces"},{id:"tabs",editorPreferencesValue:!1,title:"tabs"}]},keyboardHandler:{id:"keyboardHandler",name:"Keybinds",description:"Use another keyboard mapping",type:"select",editorPreferencesKey:"keyboardHandler",options:[{id:"default",editorPreferencesValue:null,title:"default"},{id:"emacs",editorPreferencesValue:"emacs",title:"emacs"},{id:"vim",editorPreferencesValue:"vim",title:"vim"}]},showFileTreeGitStatus:{id:"showFileTreeGitStatus",name:"Filetree Git Status",description:"Show the Git status of files in the file tree.",type:"boolean",editorPreferencesKey:"showFileTreeGitStatus",options:a},codeIntelligence:{id:"codeIntelligence",name:"Code Intelligence",description:"Code intelligence gives you autocomplete, as well as hints as you type.",type:"boolean",editorPreferencesKey:"codeIntelligence",options:a},semanticTokens:{id:"semanticTokens",name:"Semantic Tokens",description:"Enables enhanced syntax highlighting from language servers.",type:"boolean",editorPreferencesKey:"semanticTokens",options:a},shellBellAudio:{id:"shellBellAudio",name:"Shell Bell Audible Indicator",description:"Play sound in the Shell on issues like a failed tab completion.",type:"boolean",editorPreferencesKey:"shellBellAudio",options:a},accessibleTerminal:{id:"accessibleTerminal",name:"Accessible Terminal Output",description:"Enable this setting to use a screen reader. Warning: this can negatively affect performance.",type:"boolean",editorPreferencesKey:"accessibleTerminal",options:a},webviewAutoOpenOnPortOpened:{id:"webviewAutoOpenOnPortOpened",name:"Automatic Webview",description:"Open a webview automatically when a port is open.",type:"boolean",editorPreferencesKey:"webviewAutoOpenOnPortOpened",options:a},forwardPortsAutomatically:{id:"forwardPortsAutomatically",name:"Forward Opened Ports Automatically",description:"Automatically configure detected newly opened ports.",type:"select",editorPreferencesKey:"forwardPortsAutomatically",options:[{id:"none",editorPreferencesValue:"none",title:"never"},{id:"only-global",editorPreferencesValue:"only-global",title:"all ports except localhost"},{id:"all",editorPreferencesValue:"all",title:"all ports"}]},chatAudioNotification:{id:"chatAudioNotification",name:"Chat Audio Notification",description:"Enables playing a sound when you receive a new chat message.",type:"boolean",editorPreferencesKey:"chatAudioNotification",options:a},multiselectModifierKey:{id:"multiselectModifierKey",name:"Multiselect Modifier Key",description:"Modifier key for selecting multiple items in the filetree.",type:"select",editorPreferencesKey:"multiselectModifierKey",options:[{id:"cmdOrCtrlKey",editorPreferencesValue:"cmdOrCtrlKey",title:"cmdOrCtrlKey"},{id:"altKey",editorPreferencesValue:"altKey",title:"altKey"}]},completeCodeEngine:{id:"completeCodeEngine",name:"AI Code Completion Engine",description:"The engine used for code completion.",type:"select",editorPreferencesKey:"completeCodeEngine",options:[{id:"default",editorPreferencesValue:null,title:"default"}].concat((0,r._)(Array.from(i.vw).map(function(e){return{id:e,editorPreferencesValue:e,title:e}})))},codeSuggestion:{id:"codeSuggestion",name:"AI Code Completion",description:"Code completion provides inline “ghost text” suggestions while you code.",type:"boolean",editorPreferencesKey:"codeSuggestion",options:a},chatEngine:{id:"chatEngine",name:"AI Chat Engine",description:"The engine used for chat completion.",type:"select",editorPreferencesKey:"chatEngine",options:[{id:"default",editorPreferencesValue:null,title:"default"}].concat((0,r._)(Array.from(o.ce).map(function(e){return{id:e,editorPreferencesValue:e,title:e}})))},ghostwriterUseAdvancedModel:{id:"ghostwriterUseAdvancedModel",name:"Use Advanced AI Model",description:"Advanced models require a lot of power and have usage limits. They're most useful for tasks that are ambiguous or require creativity.",type:"boolean",editorPreferencesKey:"ghostwriterUseAdvancedModel",options:a}}},58498:function(e,t,n){n.d(t,{F5:function(){return d},Hk:function(){return s},Kd:function(){return u},N$:function(){return c},Ob:function(){return l},Vl:function(){return a},Vt:function(){return r},ig:function(){return i},lF:function(){return o}});var r=/^([A-Za-z0-9_]{1,15})\/?$/,i=/^([%A-Za-z0-9]+|-)*\/?$/,o=/^([A-Za-z\d](?:[A-Za-z\d]|-){0,38})\/?$/,a=/^https:\/\/(www\.)?youtube\.com(\/(c|channel|user|@(\w)+))*(\/([A-Za-z0-9_-]+))*(\/?)$/,l=/^(.{2,32}#[0-9]{4})$|^([a-zA-Z0-9_.]{2,32})$/,c="https://twitter.com/",s="https://www.linkedin.com/in/",u="https://github.com/",d=/\/$/},19327:function(e,t,n){n.d(t,{Z:function(){return u}});var r,i,o=n(27387),a=n(98924),l=n(96583);(r=i||(i={})).CHANNEL_OPENED="CHANNEL_OPENED",r.OUTPUT_RECEIVED="OUTPUT_RECEIVED",r.STDERR_RECEIVED="STDERR_RECEIVED",r.STATE_CHANGED="STATE_CHANGED";var c=n(12663),s=n(61762);function u(e){var t,n=e.container,r=(0,c.ZP)(),u=null,d=!1;function f(){return(f=(0,o._)(function(){return(0,l.Jh)(this,function(e){if(d)throw Error("closed");return u?[2,u]:[2,new Promise(function(e){r.once(i.CHANNEL_OPENED,function(t){e(t)})})]})})).apply(this,arguments)}var h="",p="",m=n.openChannel({service:"exec"},function(e){var t=e.channel,n=!1;return t.onCommand(function(e){if(null!=e.output)h+=e.output,r.emit(i.OUTPUT_RECEIVED,e.output);else if(null!=e.stderr)p+=e.stderr,r.emit(i.STDERR_RECEIVED,e.stderr);else if(null!=e.state){if(!n){n=!0;return}r.emit(i.STATE_CHANGED,{state:e.state,outputBuffer:h,stderrBuffer:p}),e.state===s.api.State.Stopped&&(h="",p="")}}),u=t,r.emit(i.CHANNEL_OPENED,t),function(){u=null}});return{request:(t=(0,o._)(function(e){var t,n,r,i,o,c,u,d,h,p;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return t=e.env,n=e.args,i=void 0===(r=e.lifecycle)?s.api.Exec.Lifecycle.NON_BLOCKING:r,c=void 0!==(o=e.splitStderr)&&o,u=e.noUserEnv,d=(0,a._)(e,["env","args","lifecycle","splitStderr","noUserEnv"]),[4,function(){return f.apply(this,arguments)}()];case 1:return p=(h=l.sent()).request({exec:{env:t,args:n,lifecycle:i,splitStderr:c,noUserEnv:null!=u&&u}}),i===s.api.Exec.Lifecycle.STDIN&&"stdin"in d&&(h.send({input:d.stdin}),h.send({inputClose:{}})),[2,p]}})}),function(e){return t.apply(this,arguments)}),onOutput:function(e){return r.on(i.OUTPUT_RECEIVED,e),function(){r.off(i.OUTPUT_RECEIVED,e)}},onStderr:function(e){return r.on(i.STDERR_RECEIVED,e),function(){r.off(i.STDERR_RECEIVED,e)}},onStateChanged:function(e){return r.on(i.STATE_CHANGED,e),function(){r.off(i.STATE_CHANGED,e)}},getStatus:function(){return u?u.status:"closed"},dispose:function(){d=!0,m(),u=null}}}}}]);
//# sourceMappingURL=9411-88ead3df931a3ab4.js.map