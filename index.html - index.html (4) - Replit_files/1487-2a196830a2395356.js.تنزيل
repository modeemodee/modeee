!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d3cd5cbf-b44f-4285-a683-09180ac1939e",e._sentryDebugIdIdentifier="sentry-dbid-d3cd5cbf-b44f-4285-a683-09180ac1939e")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"1948ae01"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1487],{32681:function(e){e.exports=(e={})=>{let t=i("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAAAQCAYAAAAoEfIQAAAAAXNSR0IArs4c6QAAActJREFUaIHtmttuwyAMQEm1//9l9kTEHGyMb4HVR6rSJYAdX8CDlpIkSZIkSbITFXxO5WTdT8fd9pe3AANqidWzGR3KxO7DNhpde4dj8mc6aPtYEO0zS0ZJJ3mXENvvbuQVI6zOdqPxOIE3a6MJXgv5fTvI7v5+m2ZbGHerPtXYHpM1vP+zoMCqEpr+UrT6WemwwwrU5EfqwrGrNpAlaMda9anG9iNZ6DhYAltAlYAcYHvvQOSOz3GmNIm58iksKgTpBGxVJXlMsJIEhPciJsMKrv39h+yPszLfDCzFItAmSNuwowKYI0Pz3hV8l2wkYv0i/DHSlfsO2D7LBZ7feK7AGqgAe7s0XSGynKYCdWRPdpnWEVGW9xPfqIqTVCCcDUgLqMlv1obrvz/9d03g/0RUEmOBP0pU2Ibq3xOVCB7VS9QmlKbP7L0fzz0TWOMA7EU8A4ebaFYbE9KxqTbcwKf6Nxkrcrms9Lf09UlVWynzFfoGS+BIR1FjvHWO6UHkSqx5zm0zYzaReJ1lnxo3V3etyPf++vzjcCzOgftxvP6PopLY8occeQ4sY1bCavpzx2CTDsWBjjjRVrutRKdtQibJ60QfZSVJkiQcfgHLRY8eT2qnRAAAAABJRU5ErkJggg=="),a=i("data:image/png;base64,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"),r={};a.onload=()=>{let e=a.width/8;" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~".split("").forEach((t,a)=>{r[t]=[~~(a%e),~~(a/e)]})};let s={pen:{cursor:"crosshair",key:"q",icon:0},erasor:{cursor:"crosshair",key:"w",icon:1},bucket:{cursor:"crosshair",key:"e",icon:2},rect:{cursor:"crosshair",key:"a",icon:3},circle:{cursor:"crosshair",key:"s",icon:4},line:{cursor:"crosshair",key:"d",icon:5},select:{cursor:"cell",key:"z",icon:6},move:{cursor:"move",key:"x",icon:7},eyedropper:{cursor:"crosshair",key:"c",icon:8}};function i(e,t){let a=new window.Image;return a.src=e,t&&(a.onload=()=>{t(a)}),a}function o(e,t,a){return Math.max(Math.min(e,a),t)}let n=(e,t)=>{let a=document.createElement("canvas"),r=(()=>{if(e instanceof window.ImageData)return new window.ImageData(new Uint8ClampedArray(e.data),e.width,e.height);if(!(e instanceof window.Image))return new window.ImageData(new Uint8ClampedArray(e*t*4).fill(0),e,t);{a.width=e.width,a.height=e.height;let t=a.getContext("2d");return t.drawImage(e,0,0),t.getImageData(0,0,e.width,e.height)}})();function s(){a.width=r.width,a.height=r.height,a.getContext("2d").putImageData(r,0,0)}function i(e,t){return(t*r.width+e)*4}return{blend:"alpha",scissorRect:null,width:()=>r.width,height:()=>r.height,toImageData:()=>new window.ImageData(new Uint8ClampedArray(r.data),r.width,r.height),clone(){return n(this.toImageData())},clear(){r=new window.ImageData(new Uint8ClampedArray(r.width*r.height*4).fill(0),r.width,r.height)},set(e,t,a){if(!this.checkPt(e,t))return!1;let s=i(e,t);switch(this.blend){case"alpha":{let e=a[3]/255;r.data[s+0]=r.data[s+0]*(1-e)+a[0]*e,r.data[s+1]=r.data[s+1]*(1-e)+a[1]*e,r.data[s+2]=r.data[s+2]*(1-e)+a[2]*e,r.data[s+3]=r.data[s+3]*(1-e)+a[3]*e;break}case"replace":r.data[s+0]=a[0],r.data[s+1]=a[1],r.data[s+2]=a[2],r.data[s+3]=a[3];break;case"add":{let e=r.data[s+3]/255,t=a[3]/255;r.data[s+0]=r.data[s+0]*e+a[0]*t,r.data[s+1]=r.data[s+1]*e+a[1]*t,r.data[s+2]=r.data[s+2]*e+a[2]*t,r.data[s+3]=r.data[s+3]*e+a[3]*t}}return!0},get(e,t){let a=i(e,t),s=r.data[a+0];return[s,r.data[a+1],r.data[a+2],r.data[a+3]]},line(e,t,a,r,s){let i=a-e,o=r-t,n=Math.abs(i),c=Math.abs(o),l=0,f=i>0?1:-1,h=o>0?1:-1;if(n>c)for(let r=e,i=t;f<0?r>=a:r<=a;r+=f)this.set(r,i,s),(l+=c)<<1>=n&&(i+=h,l-=n);else for(let a=e,i=t;h<0?i>=r:i<=r;i+=h)this.set(a,i,s),(l+=n)<<1>=c&&(a+=f,l-=c)},fillRect(e,t,a,r,s){a<0&&(e+=a,a=-a),r<0&&(t+=r,r=-r);for(let i=e;i<e+a;i++)for(let e=t;e<t+r;e++)this.set(i,e,s)},strokeRect(e,t,a,r,s){a<0&&(e+=a,a=-a),r<0&&(t+=r,r=-r),this.line(e,t,e+a,t,s),this.line(e+a,t,e+a,t+r,s),this.line(e+a,t+r,e,t+r,s),this.line(e,t+r,e,t,s)},fillCircle(e,t,a,r){a=Math.abs(a);for(let s=e-a;s<=e+a;s++)for(let i=t-a;i<=t+a;i++)Math.sqrt((s-e)**2+(i-t)**2)<=a&&this.set(s,i,r)},bucket(e,t,a){if(!this.checkPt(e,t))return!1;let r=this.get(e,t);if(c(r,a))return!1;let s=[];for(s.push([e,t]);s.length;){let[e,t]=s.pop();this.checkPt(e,t)&&c(this.get(e,t),r)&&(this.set(e,t,a),s.push([e,t-1]),s.push([e-1,t]),s.push([e+1,t]),s.push([e,t+1]))}return!0},merge(e,t=0,a=0){for(let s=0;s<r.width;s++)for(let i=0;i<r.height;i++){let o=e.get(s,i);o&&s+t>=0&&s+t<r.width&&i+a>=0&&i+a<r.height&&this.set(s+t,i+a,o)}},checkPt(e,t){if(this.scissorRect){let a=this.scissorRect;return e>=a[0][0]&&e<a[1][0]&&t>=a[0][1]&&t<a[1][1]}return e>=0&&e<r.width&&t>=0&&t<r.height},clampPt:e=>[o(e[0],0,r.width),o(e[1],0,r.height)],bbox(){let e=[0,0],t=[r.width-1,r.height-1];e:for(let a=e[0];a<=t[0];a++)for(let s=e[1];s<=t[1];s++){let t=i(a,s);if(0!==r.data[t+3]){e[0]=a;break e}}e:for(let a=t[0];a>=e[0];a--)for(let s=e[1];s<=t[1];s++){let e=i(a,s);if(0!==r.data[e+3]){t[0]=a;break e}}t:for(let a=e[1];a<=t[1];a++)for(let s=e[0];s<=t[0];s++){let t=i(s,a);if(0!==r.data[t+3]){e[1]=a;break t}}t:for(let a=t[1];a>=e[1];a--)for(let s=e[0];s<=t[0];s++){let e=i(s,a);if(0!==r.data[e+3]){t[1]=a;break t}}return[e,t]},crop(e,t){let a=n(t[0]-e[0]+1,t[1]-e[1]+1);for(let r=e[0];r<=t[0];r++)for(let s=e[1];s<=t[1];s++)a.set(r-e[0],s-e[1],this.get(r,s));r=a.toImageData()},toDataURL:()=>(s(),a.toDataURL("image/png")),toPNG(){let e=this.toDataURL().replace(/^data:image\/png;base64,/,""),t=window.atob(e),a=new Uint8Array(t.length);for(let e=0;e<a.length;e++)a[e]=t.charCodeAt(e);return a.buffer},drawable:()=>(s(),a),game(){let e=this.toImageData();for(let t=0;t<r.height;t++)for(let a=0;a<r.width;a++){let s=0,i=0,o=0,n=0;for(let e=-1;e<=1;e++)for(let c=-1;c<=1;c++)if(!(0===e&&0===c)&&a-e>=0&&a+e<r.width&&t-c>=0&&t+c<r.height){let l=((t+c)*r.width+a+e)*4;r.data[l+3]>0&&(i+=r.data[l+0],o+=r.data[l+1],n+=r.data[l+2],s++)}let c=(t*r.width+a)*4;s<2||s>3?(e.data[c+0]=0,e.data[c+1]=0,e.data[c+2]=0,e.data[c+3]=0):3===s&&(e.data[c+0]=i/s,e.data[c+1]=o/s,e.data[c+2]=n/s,e.data[c+3]=255)}return n(e)}}};function c(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function l(e){return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}function f(e){let t=parseInt(e,16);return[t>>16&255,t>>8&255,255&t,255]}let h=Math.ceil(e.data?.width??e.width??64),d=Math.ceil(e.data?.height??e.height??64);if(h<=0)throw Error("Invalid width");if(d<=0)throw Error("Invalid height");let u=e.canvas,m=e.canvas.getContext("2d"),g={width:h,height:d,curFrame:0,frames:[n(h,d)],fCanvas:n(h,d),anims:{},tool:"pen",color:[0,0,0,255],palette:e.palette||[[0,0,0,255],[255,255,255,255],[255,255,128,255],[255,128,255,255],[0,128,128,255],[128,0,255,255],[255,0,128,255],[0,255,255,255]],view:{offset:[0,0],scale:1},state:{stack:[],offset:0},modified:!1,readOnly:e.readOnly,events:{},curAnim:null,animTimer:0,animSpeed:200,gaming:!1,gameTimer:0,gameSpeed:100},w={mouseDown:!1,mousePressed:!1,mouseMoved:!1,mousePos:[0,0],mousePosPrev:[0,0],mouseStartPos:null,grabbin:!1,delCb:()=>{},hideUI:!1,loopID:null,time:0};A(),m.imageSmoothingEnabled=!1;let p={game:{icon:14,action:function(){g.gaming=!0,g.readOnly=!0,x()}},export:{icon:13,action:()=>C("export")},save:{icon:12,action:()=>C("save")},crop:{icon:9,action:function(){let e,t;g.frames.forEach(a=>{let[r,s]=a.bbox();e&&t?(e[0]=Math.min(e[0],r[0]),e[1]=Math.min(e[1],r[0]),t[0]=Math.max(t[0],s[0]),t[1]=Math.max(t[1],s[0])):(e=r,t=s)}),g.frames.forEach(a=>a.crop(e,t)),g.width=J().width(),g.height=J().height(),x()}},undo:{icon:10,key:"shift+z",action:U},redo:{icon:11,key:"meta+shift+z",action:F}},v=document.createElement("input");function b(e){return[~~((e[0]-g.view.offset[0])/g.view.scale),~~((e[1]-g.view.offset[1])/g.view.scale)]}function k(){g.view.scale<=2||(g.view.scale--,g.view.offset[0]+=g.width/2,g.view.offset[1]+=g.height/2)}function y(){g.view.scale>=64||(g.view.scale++,g.view.offset[0]-=g.width/2,g.view.offset[1]-=g.height/2)}function A(){let e=u.width,t=u.height,a=(e-120)/g.width,r=(t-120)/g.height;g.view.scale=~~Math.min(a,r),g.view.offset=[(e-g.width*g.view.scale)/2,(t-g.height*g.view.scale)/2]}function P(e=g.curFrame){g.frames.splice(g.curFrame,0,J().clone()),e===g.curFrame&&D(g.curFrame+1),x()}function E(e=g.curFrame){g.frames.length>1&&(g.frames.splice(e,1),g.curFrame===g.frames.length&&D(g.frames.length-1)),x()}function D(e){g.curFrame=e,w.delCb=()=>{confirm(`removed frame ${e}?`)&&E(e)}}function I(e){"number"==typeof e?(g.color=g.palette[e],w.delCb=()=>{confirm("remove selected color?")&&(g.palette.splice(e,1),C("change",g.palette))}):g.color=e}function R(){D(0===g.curFrame?g.frames.length-1:g.curFrame-1)}function O(){D((g.curFrame+1)%g.frames.length)}function z(){let e=J(),[t,a]=e.scissorRect;e.blend="replace",e.fillRect(t[0],t[1],a[0]-t[0],a[1]-t[1],[0,0,0,0]),e.blend="alpha",x()}function C(e,...t){if(g.events[e])for(let a of g.events[e])a(...t)}function x(){g.state.stack.length>=64||(g.state.offset>0&&(g.state.stack.splice(g.state.stack.length-g.state.offset,g.state.offset),g.state.offset=0),g.state.stack.push({frames:Y(),curFrame:g.curFrame}),C("change"))}function S(e){g.frames=e.frames.map(n),D(e.curFrame),C("change")}function U(){g.state.offset>=g.state.stack.length-1||(g.state.offset++,S(g.state.stack[g.state.stack.length-g.state.offset-1]))}function F(){0!==g.state.offset&&(g.state.offset--,S(g.state.stack[g.state.stack.length-g.state.offset-1]))}function Y(){return g.frames.map(e=>e.toImageData())}function M(){g.curAnim=null,g.animTimer=0,g.readOnly=e.readOnly}function K(e,t){w.mousePressed=!0,w.mousePosPrev=[...w.mousePos],w.mousePos=[e,t],w.mouseStartPos=[...w.mousePos]}function j(e,t,a,r){if(g.readOnly||(w.mousePosPrev=[...w.mousePos],w.mousePos=[e,t],w.mouseMoved=!0,w.grabbin&&(g.view.offset[0]+=a,g.view.offset[1]+=r),!w.mouseDown))return;let s=J(),[i,o]=b(w.mousePos),[n,c]=b(w.mousePosPrev);if(!w.mouseStartPos)return;let[l,f]=b(w.mouseStartPos);switch(g.tool){case"pen":s.line(n,c,i,o,g.color);break;case"erasor":s.blend="replace",s.line(n,c,i,o,[0,0,0,0]),s.blend="alpha";break;case"rect":g.fCanvas.clear(),g.fCanvas.fillRect(l,f,i-l,o-f,g.color);break;case"line":g.fCanvas.clear(),g.fCanvas.line(l,f,i,o,g.color);break;case"circle":g.fCanvas.clear(),g.fCanvas.fillCircle(l,f,Math.max(i-l,o-f),g.color);break;case"select":{let[e,t]=s.clampPt([l,f]),[a,r]=s.clampPt([i,o]);s.scissorRect=[[e,t],[a,r]];break}case"move":{let[e,t]=[i-n,o-c];s.scissorRect[0][0]+=e,s.scissorRect[1][0]+=e,s.scissorRect[0][1]+=t,s.scissorRect[1][1]+=t}}}function T(e,t){if(g.readOnly)return;w.mouseDown=!1,w.mousePosPrev=[w.mousePos,w.mousePos],void 0!=e&&void 0!=t&&(w.mousePos=[e,t]);let a=J(),[r,s]=b(w.mousePos);if(!w.mouseStartPos)return;let[i,o]=b(w.mouseStartPos);switch(w.mouseStartPos=null,g.tool){case"pen":case"erasor":case"bucket":x();break;case"rect":case"circle":case"line":a.merge(g.fCanvas),g.fCanvas.clear(),x();break;case"move":if(a.scissorRect){let[e,t]=[r-i,s-o];a.merge(g.fCanvas,e,t),g.fCanvas.clear(),x()}}}v.type="color",v.addEventListener("change",e=>{let t=f(e.target.value.substring(1));g.palette.push(t),I(t),C("change",g.palette)}),w.loopID=window.requestAnimationFrame(function e(i){let o=i-w.time;if(w.time=i,g.gaming&&(g.gameTimer+=o,g.gameTimer>=g.gameSpeed&&(g.frames[g.curFrame]=J().game(),g.gameTimer=0)),g.curAnim&&(g.animTimer+=o,g.animTimer>=g.animSpeed)){let e=g.anims[g.curAnim];e.to<e.from?g.curFrame>e.to?R():D(e.from):g.curFrame<e.to?O():D(e.from),g.animTimer=0}let n=!1,h=!1,d=null,k=J(),y=u.width,A=u.height,E=g.view.scale,x=g.view.offset[0],S=g.view.offset[1];function U(e,t,a={}){let r;let s=a.lineWidth||2;return{width:e,height:t,update(){r&&(a.click||a.hover)&&function(e,t,a,r){a<0&&(e+=a,a=-a),r<0&&(t+=r,r=-r);let[s,i]=w.mousePos;return s>=e&&s<=e+a&&i>=t&&i<=t+r}(r.x,r.y,e,t)&&(n=!0,a.hover&&a.hover(),w.mousePressed&&!h&&(a.click&&a.click(),h=!0))},draw(){r=m.getTransform().transformPoint(),this.update(),a.bg&&(m.fillStyle=l(a.bg),m.fillRect(0,0,e,t)),a.border&&(m.lineWidth=s,m.strokeStyle=l(a.border),m.strokeRect(0,0,e,t))}}}function F(e,t={}){let a=t.align||"left",r=t.margin||0,s=t.padding||0,i=0,o=0;for(let t of e)t&&(i=Math.max(t.width,i),o+=t.height+r);let n=i+2*s,c=o+2*s,l=U(n,c,t);return{width:n,height:c,update(){e.reverse().forEach(e=>{e.update()})},draw(){l.draw(),m.save(),m.translate(s,s),e.forEach(e=>{if(!e)return;let t=(()=>{switch(a){case"left":return 0;case"center":return(i-e.width)/2;case"left":return i-e.width}})();m.translate(t,0),e.draw(),m.translate(-t,e.height+r)}),m.restore()}}}function Y(e,t={}){let a=t.align||"top",r=t.margin||0,s=t.padding||0,i=0,o=0;for(let t of e)t&&(i+=t.width,o=Math.max(t.height,o));let n=i+2*s,c=o+2*s,l=U(n,c,t);return{width:n,height:c,update(){e.reverse().forEach(e=>{e.update()})},draw(){l.draw(),m.save(),m.translate(s,s),e.forEach(e=>{if(!e)return;let t=(()=>{switch(a){case"top":return 0;case"center":return(o-2*s-e.height)/2;case"bottom":return o-2*s-e.height}})();m.translate(0,t),e.draw(),m.translate(e.width+r,-t)}),m.restore()}}}function K(e,t={}){let a=t.padding||0,r=t.sw||e.width,s=t.sh||e.height,i=(t.width||r)+2*a,o=(t.height||s)+2*a,n=i+2*a,c=o+2*a,l=t.sx||0,f=t.sy||0;t.lineWidth;let h=U(n,c,t);return{width:n,height:c,update(){h.update()},draw(){h.draw(),m.drawImage(e,l,f,r,s,a,a,i,o)}}}function j(e,t={}){e+="";let s=t.size||12,i=t.padding||0,o=e.length*s+2*i,n=s+2*i,c=t.color||[0,0,0,255];t.lineWidth;let f=U(o,n,t);return{width:o,height:n,update(){f.update()},draw(){f.draw(),m.fillStyle=l(c);let t=e.split(""),o=0;for(let e of t)if(r[e]){let[t,n]=r[e];m.drawImage(a,8*t,8*n,8,8,i+o,i,s,s),o+=s}}}}function T(e,t,a){t||a?(function(e,t,a,r={}){return{width:a.width,height:a.height,update(){a.update()},draw(){m.save(),m.translate(e,t),a.draw(),m.restore()}}})(t,a,e).draw():e.draw()}function L(e,t,a,r={}){let s=U(e,t,r);return{width:e,height:t,update(){a.reverse().forEach(([e])=>{e.update()})},draw(){s.draw(),a.forEach(([e,[t,a]])=>{m.save(),m.translate(t,a),e.draw(),m.restore()})}}}let q=U(y,A,{bg:[170,170,170,255]}),V=Y([...g.frames.map((e,t)=>{let a=t===g.curFrame;return j(t,{padding:a?6:3,bg:a?[255,255,255,255]:[230,230,230,255],border:[0,0,0,255],size:16,click(){D(t)}})}),!g.readOnly&&j("+",{padding:3,bg:[230,230,230,255],border:[0,0,0,255],size:16,click(){P()}})],{align:"bottom"}),G=U(k.width()*E,k.height()*E,{bg:[255,255,255,255]}),N=U(k.width()*E,k.height()*E,{border:[0,0,0,255]});function X(e,t={}){let a=t.dx||0,r=t.dy||0;return{width:e.width()*E,height:e.height()*E,draw(){m.save(),m.scale(E,E),m.translate(a,r),m.drawImage(e.drawable(),0,0),m.restore()}}}if(L(y,A,[[q,[0,0]],[G,[x,S]],[X(k),[x,S]],[(()=>{if("move"!==g.tool||!w.mouseStartPos)return X(g.fCanvas);{let[e,t]=b(w.mousePos),[a,r]=b(w.mouseStartPos),[s,i]=[e-a,t-r];return X(g.fCanvas,{dx:s,dy:i})}})(),[x,S]],[V,[x,S-V.height]],[N,[x,S]]]).draw(),k.scissorRect){let e=k.scissorRect[0],t=k.scissorRect[1];m.lineDashOffset=i/100,m.strokeStyle=l([0,0,0,255]),m.setLineDash([5,5]),m.strokeRect(e[0]*E+x,e[1]*E+S,(t[0]-e[0])*E,(t[1]-e[1])*E),m.strokeStyle=l([255,255,255,255]),m.setLineDash([0,5,5,0]),m.strokeRect(e[0]*E+x,e[1]*E+S,(t[0]-e[0])*E,(t[1]-e[1])*E),m.setLineDash([])}if(!g.readOnly){let[e,t]=b(w.mousePos),a=e*E+x,r=t*E+S;if(k.checkPt(e,t))switch(g.tool){case"pen":case"rect":case"line":case"circle":case"bucket":T(U(E,E,{bg:g.color}),a,r);break;case"erasor":T(U(E,E,{bg:[255,255,255,255],border:[0,0,0,255]}),a,r)}}let H={padding:3,size:16,bg:[255,255,255,255],border:[0,0,0,255]},B=F([...g.palette.map((e,t)=>U(24,24,{bg:e,border:[0,0,0,255],lineWidth:c(e,g.color)?4:2,click(){I(t)}})),j("+",{size:24,bg:[255,255,255,255],border:[0,0,0,255],click(){if(navigator.userAgent.match(/safari/i)){let e=prompt("Enter hex code for new color:");if(e?.length===6||e?.length===7){let t=f(e.startsWith("#")?e.substring(1):e);g.palette.push(t),I(g.palette.length-1),C("change",g.palette)}}else v.click()}})]),Q=F([...Object.keys(s).map(e=>{let a=s[e];return K(t,{sx:16*a.icon,sw:16,sh:16,width:32,height:32,bg:[255,255,255,255],border:[0,0,0,255],lineWidth:g.tool===e?4:2,click(){g.tool=e},hover(){d={msg:`${e} (${a.key})`,pos:[-1,1]}}})})]),W=Y([...Object.keys(p).map(e=>{let a=p[e];return K(t,{sx:16*a.icon,sw:16,sh:16,width:32,height:32,bg:[255,255,255,255],border:[0,0,0,255],click(){a.action()},hover(){d={msg:`${e}`,pos:[-1,-1]}}})})]),Z=F([!g.readOnly&&j("+",{...H,click(){let e=prompt("add anim:");e&&(g.anims[e]={from:0,to:0,loop:!0},C("change"))}}),...Object.keys(g.anims).map(e=>{let t=g.anims[e],a=e===g.curAnim;return Y([j((a?">":"")+e,{...H,lineWidth:a?4:2,click(){var t;t=e,g.curAnim?M():(g.curAnim=t,g.animTimer=0,D(g.anims[t].from),g.readOnly=!0)}}),j(t.from,{...H,lineWidth:a?4:2,click(){t.from=(t.from+1)%g.frames.length,C("change")}}),j(t.to,{...H,lineWidth:a?4:2,click(){t.to=(t.to+1)%g.frames.length,C("change")}})])})]);if(w.hideUI||(function(e,t,a,r={}){return L(e,t,a.filter(e=>e).map(([a,r])=>[a,[r[0]*(e-a.width),r[1]*(t-a.height)]]),r)})(y,A,[!g.readOnly&&[B,[0,0]],!g.readOnly&&[Q,[1,0]],!g.readOnly&&[W,[1,1]],[Z,[0,1]]]).draw(),d){let[e,t]=w.mousePos,a=j(d.msg,{padding:3,bg:[255,255,255,255],border:[0,0,0,255]}),r=a.width*(d.pos[0]-1)/2+6*d.pos[0],s=a.height*(d.pos[1]-1)/2+6*d.pos[1];T(a,e+r,t+s)}if(n?u.style.cursor="pointer":w.grabbin?u.style.cursor="grab":u.style.cursor=s[g.tool].cursor,w.mousePressed&&!h){let[e,t]=b(w.mousePos);if(w.mouseDown=!0,!g.readOnly)switch(g.tool){case"pen":k.set(e,t,g.color);break;case"erasor":k.blend="replace",k.set(e,t,[0,0,0,0]),k.blend="alpha";break;case"bucket":k.bucket(e,t,g.color);break;case"move":k.scissorRect&&(g.fCanvas.scissorRect=k.scissorRect,g.fCanvas.merge(k),g.fCanvas.scissorRect=null,z());break;case"eyedropper":g.color=k.get(e,t)}}w.mousePressed=!1,w.loopID=window.requestAnimationFrame(e)});let L={wheel(e){e.preventDefault(),e.altKey?e.deltaY<0?y():e.deltaY>0&&k():(g.view.offset[0]-=e.deltaX,g.view.offset[1]-=e.deltaY)},mousedown(e){K(e.offsetX,e.offsetY)},mousemove(e){j(e.offsetX,e.offsetY,e.movementX,e.movementY)},mouseup(e){T(e.offsetX,e.offsetY)},touchstart(e){e.preventDefault();let t=e.touches[0];K(t.clientX,t.clientY)},touchmove(e){let t=e.touches[0];j(t.clientX,t.clientY,t.movementX,t.movementY)},touchend(e){let t=e.touches[0];T(t?.clientX,t?.clientY)},touchcancel(e){let t=e.touches[0];T(t?.clientX,t?.clientY)},keydown(t){if(!t.metaKey){for(let e in s)if(s[e].key===t.key){g.tool=e;return}}let a=J();switch(t.key){case"-":k();break;case"=":y();break;case"0":A();break;case"ArrowLeft":R();break;case"ArrowRight":O();break;case" ":w.grabbin=!0,t.preventDefault();break;case"Escape":M(),g.gaming=!1,g.gameTimer=0,g.readOnly=e.readOnly,U()}if(!g.readOnly)switch(t.key){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{let e=parseInt(t.key,10)-1;g.palette[e]&&I(e);break}case"+":P();break;case"_":E();break;case"z":t.metaKey&&(t.preventDefault(),t.shiftKey?F():U());break;case"s":t.metaKey&&(t.preventDefault(),C("save"));break;case"l":t.metaKey&&(t.preventDefault(),C("load"));break;case"Backspace":a.scissorRect?(z(),a.scissorRect=null):w.delCb();break;case"Escape":a.scissorRect=null;break;case"Tab":t.preventDefault(),w.hideUI=!w.hideUI}},keyup(e){" "===e.key&&(w.grabbin=!1)}};for(let e in u.onselectstart=()=>!1,L)u.addEventListener(e,L[e]);function J(){return g.frames[g.curFrame]}function q(){return{version:"1",width:g.width,height:g.height,palette:g.palette,anims:g.anims,frames:g.frames.map(e=>e.toDataURL())}}function V(e){if(!e.width||!e.height)throw Error("Expected width and height from load data");return(null===g.width||void 0===g.width)&&(g.width=e.width),(null===g.height||void 0===g.height)&&(g.height=e.height),g.fCanvas=n(e.width,e.height),A(),(null===g.palette||void 0===g.palette)&&(g.palette=e.palette),(null===g.anims||void 0===g.anims)&&(g.anims=e.anims),e.frames?Promise.all(e.frames.map((t,a)=>(function(e){let t=new Image;return t.src=e,new Promise((e,a)=>{t.onload=()=>{e(t)},t.onerror=()=>{a()}})})(t).then(e=>n(e)).then(t=>{if(t.width()!==e.width||t.height()!==e.height)throw Error("Frame size doesn't match actual size");g.frames[a]=t}))).then(()=>{g.frames.length=e.frames.length,g.curFrame>=g.frames.length&&D(g.frames.length-1)}):Promise.resolve()}function G(e,...t){let a=URL.createObjectURL(new Blob(...t)),r=document.createElement("a");r.href=a,r.download=e,r.click()}return g.state.stack=[{frames:Y(),curFrame:g.curFrame}],e.data&&V(e.data),{frames:function(){return g.frames},curFrame:J,on:function(e,t){g.events[e]||(g.events[e]=[]),g.events[e].push(t)},setTool:function(e){if(!s[e])throw Error(`no tool called ${e} bro`);g.tool=e},setColor:I,setPalette:function(e){g.palette=e},save:q,load:V,undo:U,redo:F,pushState:x,scaleUp:y,scaleDown:k,scaleFit:A,newFrame:P,delFrame:E,prevFrame:R,nextFrame:O,download:function(e){G(e,[JSON.stringify(q())])},downloadPNG:function(e){G(e,[J().toPNG()])},cleanUp:function(){for(let e in L)u.removeEventListener(e,L[e]);window.cancelAnimationFrame(w.loopID)}}}},33024:function(e){var t=1/0,a=0/0,r=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,n=parseInt,c=Object.prototype.toString,l=Math.max,f=Math.min;function h(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function d(e){return e?(e=u(e))===t||e===-t?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}function u(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||t&&"object"==typeof t&&"[object Symbol]"==c.call(t))return a;if(h(e)){var t,l="function"==typeof e.valueOf?e.valueOf():e;e=h(l)?l+"":l}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var f=i.test(e);return f||o.test(e)?n(e.slice(2),f?2:8):s.test(e)?a:+e}e.exports=function(e,t,a){var r,s,i;return t=d(t),void 0===a?(a=t,t=0):a=d(a),(r=e=u(e))>=f(s=t,i=a)&&r<l(s,i)}},72287:function(e,t,a){"use strict";a.d(t,{f:function(){return n}});var r=a(66626),s=a(50959),i=a(34449),o=a(58657);function n(e){var t=(0,o.N)().getMonitor(),a=(0,r._)((0,i.r)(t,e),2),n=a[0],c=a[1];return(0,s.useEffect)(function(){return t.subscribeToOffsetChange(c)}),(0,s.useEffect)(function(){return t.subscribeToStateChange(c)}),n}},98314:function(e,t,a){"use strict";let r;function s(){return r||((r=new Image).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),r}a.d(t,{r:function(){return s}})}}]);
//# sourceMappingURL=1487-2a196830a2395356.js.map