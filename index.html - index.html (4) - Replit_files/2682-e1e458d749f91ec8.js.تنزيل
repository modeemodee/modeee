!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="9e751527-95b3-4a00-bae4-a977e3eeed61",e._sentryDebugIdIdentifier="sentry-dbid-9e751527-95b3-4a00-bae4-a977e3eeed61")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"1948ae01"};"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2682],{26734:function(e,n,t){t.d(n,{Z:function(){return w}});var r=t(4216),i=t(5172),o=Array.prototype.concat,l=function(e){return{recursive:!!e.recursive,bail:e.bail&&e.bail>0?e.bail:1e3}},a=function(e){return o.apply([],e)},u=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;if(!e||t>=n.bail||!e.isDirectory||!e.createReader)return Promise.resolve([]);var o=null!=r?r:e.name;return new Promise(function(r){e.createReader().readEntries(function(e){return Promise.all(e.map(function(e){var r,l,a,c;return r=e,l=n,a=t,c=o,r.isDirectory?l.recursive?u(r,l,a+1,(0,i.join)(c,r.name)):Promise.resolve([]):new Promise(function(e,n){r.file?r.file(e,n):e(null)}).catch(function(){return null}).then(function(e){return e&&(e.dirPath=(0,i.join)(c,e.name)),e?[e]:[]})})).then(function(e){return r(a(e))})},function(){return r([])})})},c=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u("function"==typeof e.getAsEntry?e.getAsEntry():e.webkitGetAsEntry?e.webkitGetAsEntry():null,l(n))},s=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=l(n),new Promise(function(t){var r,i;(null==e?void 0:null===(r=e.dataTransfer)||void 0===r?void 0:r.items)?Promise.all(a(e.dataTransfer.items).filter(function(e){return"file"===e.kind}).map(function(e){return c(e,n).then(function(n){if(!n.length){var t=e.getAsFile();n=t?[t]:n}return n})})).then(function(e){return t(a(e))}):(null==e?void 0:null===(i=e.dataTransfer)||void 0===i?void 0:i.files)?t(a(e.dataTransfer.files)):t([])})},f=t(95571),d=t(50485);t(50959);var h=t(80967),p=t(21769),v=t(6191),g=t(86498),y=null,m=null;function w(e){var n=function(e){var n=e.isTouchBackend;if(m&&n)return m;if(y&&!n)return y;var t={dragDropManager:(0,d.i)(function(e){var t=n?(0,g.zr)(e,void 0,{delayTouchStart:500}):(0,p.PD)(e),r=t.handleTopDropCapture;return t.handleTopDropCapture=function(e){var n,i=t.monitor.getItemType();i===v.HTML||i===v.TEXT?(t.dropTargetIds=[],null===(n=t.currentNativeSource)||void 0===n||n.loadDataTransfer(e.dataTransfer),t.enterLeaveCounter.reset()):r.call(t,e),t.currentNativeSource&&(t.currentNativeSource.item.dirContent=s(e,{recursive:!0}))},t})};return n?m=t:y=t,t}({isTouchBackend:(0,f.w8)()});return(0,r.tZ)(h.L.Provider,{value:n,children:e.children})}},36365:function(e,n,t){t.d(n,{K:function(){return o}});var r=t(50959),i=t(98314);function o(e){(0,r.useEffect)(function(){e((0,i.r)(),{captureDraggingState:!0})},[e])}},97056:function(e,n,t){t.d(n,{UV:function(){return o},fN:function(){return i}});var r=t(63257);function i(e,n){for(var t=0;t<n.length;t+=1e4)e.push.apply(e,(0,r._)(n.slice(t,t+1e4)))}function o(e){return(0,r._)(Array(e))}},60100:function(e,n,t){t.d(n,{FW:function(){return h},NH:function(){return g}});var r=t(41733),i=t(21262),o=t(71440),l=t(95420),a=t(72175),u=t(58995);function c(){var e=(0,i._)(["\n  fragment PublishReplData on Repl {\n    id\n    url\n    title\n    description\n    iconUrl\n    lastPublishedAt\n    publishedAs\n    imageUrl\n    isRenamed\n    templateInfo {\n      iconUrl\n    }\n    replViewSettings {\n      id\n      defaultView\n      replImage\n      replFile\n    }\n    tags {\n      id\n      isOfficial\n    }\n    authorizations {\n      editMetadata {\n        isAuthorized\n      }\n      editFileContents {\n        isAuthorized\n      }\n      publish {\n        isAuthorized\n      }\n    }\n    ...CrosisContextRepl\n    ...PublishedReplShareInfoReplData\n  }\n  ","\n  ","\n"]);return c=function(){return e},e}function s(){var e=(0,i._)(["\n  fragment PublishCurrentUser on CurrentUser {\n    id\n    image\n    isTemplateDeveloper: hasRole(role: TEMPLATE_DEVELOPER)\n    ...CrosisContextCurrentUser\n  }\n  ","\n"]);return s=function(){return e},e}function f(){var e=(0,i._)(["\n  query PublishCurrentUser {\n    currentUser {\n      id\n      ...PublishCurrentUser\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var d={},h=(0,o.Ps)(c(),l.C,a.B),p=(0,o.Ps)(s(),l.D),v=(0,o.Ps)(f(),p);function g(e){var n=(0,r._)({},d,e);return u.a(v,n)}},72175:function(e,n,t){t.d(n,{B:function(){return o}});var r=t(21262);function i(){var e=(0,r._)(["\n  fragment PublishedReplShareInfoReplData on Repl {\n    id\n    url\n    publishedAs\n    title\n  }\n"]);return i=function(){return e},e}var o=(0,t(71440).Ps)(i())},30177:function(e,n,t){t.d(n,{sI:function(){return l}});var r=t(21262);function i(){var e=(0,r._)(["\n  fragment ReplViewerOutputOverlayRepl on Repl {\n    id\n    title\n    imageUrl\n    lastPublishedAt\n    authorizations {\n      editMetadata {\n        isAuthorized\n      }\n    }\n  }\n"]);return i=function(){return e},e}function o(){var e=(0,r._)(["\n  mutation ReplViewerOutputOverlayUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        imageUrl\n      }\n    }\n  }\n"]);return o=function(){return e},e}var l=(0,t(71440).Ps)(i());o()},36384:function(e,n,t){t.d(n,{D:function(){return i},V:function(){return l}});var r,i,o=t(36559);function l(e){return(0,o.gK)(e)?"Markdown":(0,o.sL)(e)?"Draw":(0,o.IQ)(e)?"Pedit":(0,o.T3)(e)?"Media":(0,o.hj)(e)?"Binary":"Code"}(r=i||(i={})).Media="Media",r.Binary="Binary",r.Code="Code",r.Markdown="Markdown",r.Draw="Draw",r.Pedit="Pedit"},84573:function(e,n,t){t.d(n,{Z:function(){return D}});var r=t(66626),i=t(4216),o=t(69170),l=t(60305),a=t(15235),u=t(82230),c=t(94778),s=t(44049),f=t(72093),d=t(85438),h=t(41733),p=t(21262),v=t(71440),g=t(33204),y=t(99165);function m(){var e=(0,p._)(["\n  mutation UnpublishReplUnpublish($input: UnpublishReplFromCommunityInput!) {\n    unpublishReplFromCommunity(input: $input) {\n      ... on Repl {\n        id\n        ...ReplViewReplActionsPermissions\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var w={},x=(0,v.Ps)(m(),g.jN),b=c.K.form;function D(e){var n,t,p=e.repl,v=e.source,g=e.onDone,m=(0,o.Z)(),D=m.showConfirm,S=m.showError,E=(0,r._)((n={variables:{input:{replId:p.id}},onCompleted:function(e){if("Repl"===e.unpublishReplFromCommunity.__typename){var n=e.unpublishReplFromCommunity.likeCount;(0,l.j)(l.U3.REPL_UNPUBLISHED,{source:v,numLikes:n,replType:p.publishedAs===d.O2.Template?"template_repl":"regular_repl"}),D("Repl removed from the community.")}else"NotFoundError"===e.unpublishReplFromCommunity.__typename||"UnauthorizedError"===e.unpublishReplFromCommunity.__typename?S(e.unpublishReplFromCommunity.message):S("An unexpected error occurred.");g()},onError:function(){S("Something went wrong. Please try again.")},update:function(e){e.modify({id:e.identify({__typename:"Repl",id:p.id}),fields:{comments:function(e,n){return n.DELETE},tags:function(e,n){return n.DELETE}}})}},t=(0,h._)({},w,n),y.D(x,t)),2),T=E[0],R=E[1].loading;return(0,i.BX)(c.G,{css:[f.l0.colWithGap(24)],children:[(0,i.tZ)(u.xv,{variant:"subheadBig",children:"Unpublish this Repl from the Community"}),(0,i.BX)(b,{onSubmit:function(e){e.preventDefault(),T()},css:[f.l0.colWithGap(32)],children:[(0,i.tZ)(u.xv,{children:"Unpublishing a Repl will remove it from the Community. This action will delete all associated posts and tags. The Repl and all its comments will still be visible in your profile, but will not be shown in the Community or Trending views anymore. You can always re-publish the Repl again later."}),(0,i.BX)(c.G,{css:[f.l0.rowWithGap(8),f.l0.justify.end],children:[(0,i.tZ)(c.G,{children:(0,i.tZ)(a.zx,{type:"button",text:"Cancel",onClick:function(){return g()}})}),(0,i.tZ)(c.G,{children:(0,i.tZ)(a.zx,{disabled:R,colorway:"negative",text:R?"Unpublishing...":"Yes, unpublish this Repl",type:"submit",iconLeft:(0,i.tZ)(s.Z,{})})})]})]})]})}},12428:function(e,n,t){t.d(n,{Z:function(){return y}});var r=t(42516),i=t(41733),o=t(30509),l=t(4216),a=t(94311),u=t(72093),c=t(64432),s=t(94778),f=t(49224),d=(0,t(33298).$)(["size","fontSize","listGap","iconTextGap","avatarOverlap","tooltipFontSize"]),h=d.styleTokens,p=d.cssVars,v=(0,f.X)({avatarsRow:[u.l0.flex.row,{"& > *":{marginLeft:"calc(-0.4 * ".concat(h.size,")")},"& > *:first-child":{marginLeft:0}}],countCirlce:[u.l0.center,u.l0.overflow("hidden"),u.l0.backgroundColor.backgroundDefault,u.l0.color.foregroundDimmer,u.l0.px(2),{borderRadius:"50%",minWidth:h.size,height:h.size,fontSize:h.fontSize}],tooltop:[{gap:h.listGap,gridTemplateColumns:"repeat(auto-fill, 200px)"}],tooltipRow:[u.l0.rowWithGap(u.TV.space2),u.l0.align.center],tooltipText:[u.l0.flex.growAndShrink(1),u.l0.truncate,u.l0.color.foregroundDimmer,{paddingLeft:h.iconTextGap,fontSize:h.tooltipFontSize}],stackItem:[]}),g={12:{fontSize:8,listGap:2,iconTextGap:2,tooltipAvatarSize:12,tooltipFontSize:8},16:{fontSize:10,listGap:2,iconTextGap:2,tooltipAvatarSize:16,tooltipFontSize:10},24:{fontSize:12,listGap:4,iconTextGap:4,tooltipAvatarSize:16,tooltipFontSize:12},32:{fontSize:14,listGap:4,iconTextGap:4,tooltipAvatarSize:16,tooltipFontSize:14},40:{fontSize:16,listGap:8,iconTextGap:4,tooltipAvatarSize:24,tooltipFontSize:14},48:{fontSize:24,listGap:8,iconTextGap:4,tooltipAvatarSize:24,tooltipFontSize:14}};function y(e){var n,t,u,f,d,h,y,m,w,x=e.activeUsers,b=e.visibleNumOfUsers,D=void 0===b?3:b,S=e.size,E=void 0===S?24:S,T=x.length,R=(w={},(0,r._)(w,p.size,E+"px"),(0,r._)(w,p.fontSize,(null!==(d=null===(n=g[E])||void 0===n?void 0:n.fontSize)&&void 0!==d?d:E)+"px"),(0,r._)(w,p.listGap,(null!==(h=null===(t=g[E])||void 0===t?void 0:t.listGap)&&void 0!==h?h:8)+"px"),(0,r._)(w,p.iconTextGap,(null!==(y=null===(u=g[E])||void 0===u?void 0:u.iconTextGap)&&void 0!==y?y:8)+"px"),(0,r._)(w,p.tooltipFontSize,(null!==(m=null===(f=g[E])||void 0===f?void 0:f.tooltipFontSize)&&void 0!==m?m:14)+"px"),w),_=T>D,C=x.slice(0,_?D-1:D);return(0,l.tZ)(c.u,{tooltip:(0,l.tZ)(s.G,{css:v.tooltop,style:R,children:x.map(function(e){var n;return(0,l.BX)(s.G,{css:v.tooltipRow,children:[(0,l.tZ)(a.q,{size:(null===(n=g[E])||void 0===n?void 0:n.tooltipAvatarSize)||E,src:e.image||null,ringColor:e.color,username:e.username},e.id),(0,l.tZ)(s.G,{css:v.tooltipText,children:e.username})]},e.username)})}),children:function(e,n){return(0,l.BX)(s.G,(0,o._)((0,i._)({},e),{tag:"ul",innerRef:n,css:v.avatarsRow,style:R,children:[C.map(function(e,n){return(0,l.tZ)(s.G,{tag:"li",style:{zIndex:n+1},css:v.stackItem,children:(0,l.tZ)(a.q,{size:E,src:e.image||null,ringColor:e.color,username:e.username})},e.id)}),_?(0,l.tZ)(s.G,{tag:"li",css:v.stackItem,style:{zIndex:C.length},children:(0,l.tZ)(s.G,{css:v.countCirlce,children:(0,l.BX)(s.G,{children:["+",T-D+1]})})}):null]}))}})}},19393:function(e,n,t){t.d(n,{S:function(){return l}});var r=t(85733),i=t(91087),o=t(50959);function l(){var e=(0,i.mC)(),n=(0,r.Z)(e);return(0,o.useCallback)(function(){var e,t;return!Number.isFinite(t=parseInt(null==(e=n.current)?void 0:e.variation("flag-container-retry-minimum-ms",0),10))||t<0?0:t},[n])}},57604:function(e,n,t){t.d(n,{P:function(){return g},n:function(){return v}});var r=t(66626),i=t(74044),o=t(99149),l=t(39271),a=t(36647),u=t(75958),c=t(29775),s=t(50959),f=t(87137),d=i.Dy.Array(i.Dy.String()),h=function(e){return"repl:hiddenFiles:"+e},p={get:function(e){var n=u.Z.get(h(e));return o.B4.Check(d,n)?n:null},set:function(e,n){u.Z.set(h(e),n)}},v=function(e){var n=(0,l.Z)(),t=(0,r._)((0,s.useState)(function(){return p.get(n)}),2),i=t[0],o=t[1];return(0,s.useEffect)(function(){return e.watch(function(e){var t=function(e){p.set(n,e),o(e)};if(e.error){e.error===f.Yt.NotFound&&t([]);return}if(!e.config.hidden){t([]);return}t(e.config.hidden)})},[e,n]),i},g=function(e){var n=v(e);return(0,a.Z)(function(){return null===n?null:n.map(function(e){return(0,c.Z)(e)||e})},[n])}},39126:function(e,n,t){t.d(n,{Z:function(){return S}});var r={};t.r(r),t.d(r,{checkAndTrack:function(){return x},ensureTrackedFile:function(){return y},storeOp:function(){return m}});var i=t(60305),o=t(27387),l=t(66626),a=t(96583),u=t(75958),c=t(41733),s={};function f(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.info("ot client dataloss",(0,c._)({case:n,startTime:t.startTime,opsSinceFlush:t.opsSinceFlush,whileReconnecting:t.whileReconnecting,replid:t.replId,filePath:t.filePath},r))}var d=t(70090),h={replsList:function(){return"dataLossRepls"},replFiles:function(e){return"dataLossReplFiles".concat(e)},latestOp:function(e,n){return"dataLossLatestOp--".concat(e,"--").concat(n)},latestFlushedOp:function(e,n){return"dataLossLatestFlushed--".concat(e,"--").concat(n)},latestOwnOp:function(e,n){return"dataLosslatestOwnOp--".concat(e,"--").concat(n)},opsSinceFlush:function(e,n){return"dataLossOpsSinceFlush--".concat(e,"--").concat(n)}};function p(){var e=u.Z.get(h.replsList(),"array");return e||(e=[],u.Z.set(h.replsList(),e)),e}function v(e){var n=u.Z.get(h.replFiles(e),"array");return n||(n=[],u.Z.set(h.replFiles(e),n)),n}function g(e){var n=v(e),t=!0,r=!1,i=void 0;try{for(var o,l=n[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var a=o.value;"string"==typeof a&&function(e,n){u.Z.remove(h.latestOp(e,n)),u.Z.remove(h.latestFlushedOp(e,n)),u.Z.remove(h.latestOwnOp(e,n));var t=v(e).filter(function(e){return e!==n});u.Z.set(h.replFiles(e),t)}(e,a)}}catch(e){r=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}u.Z.remove(h.replFiles(e));var c=p().filter(function(n){return n!==e});u.Z.set(h.replsList(),c)}function y(e){var n,t=e.replId,r=e.filePath;(n=p()).includes(t)||(n.length>20?(g(n[0]),n[0]=t):n.push(t),u.Z.set(h.replsList(),n));var i=v(t);i.includes(r)||(i.length>20?(g(i[0]),i[0]=r):i.push(r),u.Z.set(h.replFiles(t),i))}function m(e){var n=e.filePath,t=e.replId,r=e.opType,i=e.op;!function(e){var n=e.filePath,t=e.replId,r=e.opType,i=e.logger,o=e.isReconnecting,l=f.bind(null,i),a="".concat(t,"--").concat(n);s[a]||(s[a]={replId:t,filePath:n,timer:null,startTime:null,whileReconnecting:0,opsSinceFlush:0});var u=s[a];if("latestFlushedOp"===r){delete s[a];var c=u.startTime;if(c){var d=Date.now()-c;d>6e4&&l("flush_delay_received",u,{elapsed:d})}var h=u.timer;h&&(clearTimeout(h),u.timer=null)}else{u.opsSinceFlush+=1,o&&(u.whileReconnecting+=1);var p,v=null!==(p=u.startTime)&&void 0!==p?p:Date.now();u.startTime=v,u.timer||(u.timer=setTimeout(function(){l("flush_delay_timeout",u)},6e4)),150===u.opsSinceFlush?l("flush_delay_small",u):1e3===u.opsSinceFlush&&l("flush_delay_large",u)}}({filePath:n,replId:t,opType:r,logger:e.logger,isReconnecting:e.isReconnecting}),u.Z.set(h[r](t,n),i)}var w={};function x(e){return b.apply(this,arguments)}function b(){return(b=(0,o._)(function(e){var n,t,r,i,c,s,f,p;return(0,a.Jh)(this,function(v){var g;return n=e.filePath,t=e.replId,r=e.serverVersion,i=e.serverContent,c=e.fetchOps,s=e.logger,w[n+t]||(w[n+t]=!0,f=function(e,n){var t={latestOp:null,latestFlushedOp:null,latestOwnOp:null},r=Object.keys(t),i=!0,o=!1,l=void 0;try{for(var a,c=r[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){var s=a.value,f=u.Z.get(h[s](e,n),"object");f&&f&&"object"==typeof f&&"number"==typeof f.crc32&&"number"==typeof f.version&&(t[s]=f)}}catch(e){o=!0,l=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw l}}return t}(t,n),p=d.str(i)>>>0,Object.keys(f).forEach((g=(0,o._)(function(e){var n,t,i;return(0,a.Jh)(this,function(o){switch(o.label){case 0:if(!(n=f[e]))return[2];if(r<n.version)return s.info("ot client dataloss",{opType:e,case:"server_forgot"}),[2];if(r===n.version)return p!==n.crc32&&s.info("ot client dataloss",{opType:e,case:"crc32_mismatch"}),[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,c(n.version,n.version)];case 2:return t=l._.apply(void 0,[o.sent(),1])[0],[3,4];case 3:return i=o.sent(),s.info("ot client dataloss",{opType:e,case:"error_fetching_op",originalError:String(i)}),[2];case 4:if(!t)return s.info("ot client dataloss",{opType:e,case:"op_not_found"}),[2];return t.crc32!==n.crc32&&s.info("ot client dataloss",{opType:e,case:"crc32_mismatch"}),[2]}})}),function(e){return g.apply(this,arguments)}))),[2]})})).apply(this,arguments)}var D=t(38938);function S(e){var n=e.container;return(0,D.Z)({container:n,dataloss:r,track:i.j})}},1675:function(e,n,t){t.d(n,{C:function(){return a},Gw:function(){return l},Tg:function(){return u},so:function(){return i},ss:function(){return c},tc:function(){return o}});var r=t(78950);function i(e,n){for(var t=[],r=e.split(n),i=0;i<r.length;i++){var o=r[i].trim();""!==o&&t.push(o)}return t}function o(e){return e.replace(/^<|>$/g,"")}function l(e){return"'".concat(e.replace(/'/g,"'\\''"),"'")}function a(e){return e.replace(/^refs\/(?:heads|remotes)\//,"")}function u(e){if(-1===e.indexOf("/")||e.startsWith("refs/heads/"))return[null,null];if(e.startsWith("refs/remotes/")){var n=(0,r._)(e.split("/"));return[n[2],n.slice(3).join("/")]}var t=(0,r._)(e.split("/"));return[t[0],t.slice(1).join("/")]}function c(e){return e.replace(/^refs\/remotes\//,"")}},44906:function(e,n,t){t.d(n,{Z:function(){return x},h:function(){return l}});var r,i,o,l,a=t(27387),u=t(66626),c=t(96583),s=t(1675),f="# branch.oid ",d="# branch.head ",h="# branch.upstream ",p="# branch.ab ",v="# stash ",g=/^(\S)(\S) (\S{4}) (\S+) (\S+) (\S+) (\S+) (\S+) (.*)$/,y=/^([RC])([0-9]+) (.+?)\t(.+)$/,m=/^(\S)(\S) (\S{4}) (\S+) (\S+) (\S+) (\S+) (\S+) (\S+) (\S+) (.*)$/,w=/([RC][0-9]+ .+?)\0(.+?(?:\0|$))/g;function x(e){return b.apply(this,arguments)}function b(){return(b=(0,a._)(function(e){var n,t,r,i,o,l,a,x,b,S,E,T,R,_,C,Z,P,k,I,z,F,O;return(0,c.Jh)(this,function(c){switch(c.label){case 0:return n=null,t=null,r=null,i=0,o=[],l=["-z","--porcelain=v2","--branch","--show-stash","--untracked-files=all"],[4,e("git status ".concat(l.join(" ")),{serviceMethod:"git-status"})];case 1:if((a=c.sent()).error)return[2,a];x=a.output.replaceAll(w,"$1	$2"),b=(0,s.so)(x,"\x00"),S=!0,E=!1,T=void 0;try{for(R=b[Symbol.iterator]();!(S=(_=R.next()).done);S=!0)(C=_.value).startsWith("#")?C.startsWith(f)?(Z=C.substring(f.length),"(initial)"!==Z&&(n=Z)):C.startsWith(d)?(P=C.substring(d.length),"(detached)"!==P&&(t=P)):C.startsWith(h)?(k=C.substring(h.length),"(not queried)"!==k&&(r={branch:k,ahead:0,behind:0})):C.startsWith(p)?r&&(z=(I=(0,u._)(C.substring(p.length).split(" ").map(function(e){return Math.abs(parseInt(e,10))}),2))[0],F=I[1],r.ahead=z,r.behind=F):C.startsWith(v)&&(i=parseInt(C.substring(v.length),10)):(O=function(e){var n=e[0];switch(e=e.substring(2),n){case"!":default:return null;case"?":return{type:{index:"UNTRACKED",worktree:"UNTRACKED"},path:e,staged:!1,unmerged:!1};case"u":var t=e.match(m);if(!t)return null;var r=(0,u._)(t,12),i=r[1],o=r[2],l=r[11],a=D(i),c=D(o);return{type:{index:a,worktree:c},path:l,staged:"UNMODIFIED"!==a,unmerged:!0};case"1":case"2":var s=e.match(g);if(!s)return null;var f=(0,u._)(s,10),d=f[1],h=f[2],p=f[9],v=D(d),w=D(h),x="UNMODIFIED"!==v;if("1"===n)return{type:{index:v,worktree:w},path:p,staged:x,unmerged:!1};if("2"===n){var b=p.match(y);if(!b)return null;var S=(0,u._)(b,5),E=S[1],T=S[2],R=S[3],_=S[4];return{type:{index:v,worktree:w},path:R,staged:x,unmerged:!1,source:{type:function(e){switch(e){case"R":default:return"RENAMED";case"C":return"COPIED"}}(E),score:parseInt(T,10),path:_}}}return null}}(C),null!==O&&o.push(O))}catch(e){E=!0,T=e}finally{try{S||null==R.return||R.return()}finally{if(E)throw T}}return[2,{commit:n,branch:t,upstream:r,stashes:i,changes:o,error:null}]}})})).apply(this,arguments)}function D(e){switch(e){case".":default:return"UNMODIFIED";case"M":return"MODIFIED";case"T":return"TYPE_CHANGED";case"A":return"ADDED";case"D":return"DELETED";case"R":return"RENAMED";case"C":return"COPIED";case"U":return"UNMERGED"}}(r=o||(o={})).ORDINARY="1",r.RENAMED_OR_COPIED="2",r.UNMERGED="u",r.UNTRACKED="?",r.IGNORED="!",(i=l||(l={})).UNTRACKED="UNTRACKED",i.UNMODIFIED="UNMODIFIED",i.MODIFIED="MODIFIED",i.TYPE_CHANGED="TYPE_CHANGED",i.ADDED="ADDED",i.DELETED="DELETED",i.RENAMED="RENAMED",i.COPIED="COPIED",i.UNMERGED="UNMERGED"},46180:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(85421),i=t.n(r),o=t(6949),l=t(49500);function a(e){var n=e.throwBsod,t=e.tags,r=e.extras,a=e.origin,u=e.onNonBsodUnrecoverableError,c=void 0===u?function(){}:u;return function(e){var u=(0,o.ZP)(e);if(u===o.Gs.NotFound){i().push("/home","~/");return}if(u===o.Gs.LanguageTokenDenied){window.location.reload();return}if(u){c(u);return}l.error(e),n({error:e,tags:t,extras:r,origin:a})}}},37833:function(e,n,t){t.d(n,{tr:function(){return G}});var r=t(42516),i=t(66626),o=t(4216),l=t(77450),a=t(17198),u=t(19653),c=t(33298),s=t(19068),f=t(16923),d=t(17971),h=t(64479),p=t(94778),v=t(49224),g=t(70501),y=t(34357),m=t(72093),w=t(81199),x=t(25129),b=t(44167),D=t(50959),S=t(36559),E=t(73372),T=t(57253);function R(e){var n=e.node;return n.type===T.Tv.Directory?(0,o.tZ)(y.Z,{size:16}):(0,o.tZ)(f.Z,{size:16,path:n.path})}var _=(0,c.$)(["menuY","menuX"]),C=_.cssVars,Z=_.styleTokens,P=(0,v.X)({root:[m.l0.maxHeight(400),m.l0.position.absolute,m.l0.borderRadius(8),m.l0.shadow(3),{border:"1px solid",borderColor:m.TV.outlineDefault,top:Z.menuY,left:Z.menuX,"& > div":[m.l0.maxHeight(400)]}]}),k=(0,l.iv)([s.gU.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}]),I={button:(0,l.iv)([m.l0.reset.button,m.l0.p(2),m.l0.rowWithGap(4),m.l0.align.center,k]),text:(0,l.iv)({fontSize:m.TV.fontSizeSmall})},z={opacity:1};function F(e){var n,t=e.node,l=e.openFile,a=e.expandable,c=void 0===a||a,s=(0,i._)((0,D.useState)(!1),2),f=s[0],v=s[1],g=(0,D.useRef)(null),y=(0,u.Z)(function(e){var n;!f||e.target instanceof HTMLElement&&(null===(n=g.current)||void 0===n?void 0:n.contains(e.target))||v(!1)},[f]),m=(0,D.useId)(),w=(0,D.useId)(),x=(0,S.Il)(t.path)||E.Ql,b=(0,S.UO)(t.path);function T(){var e,n=null===(e=g.current)||void 0===e?void 0:e.getBoundingClientRect();n&&c&&v({x:n.x+"px",y:n.y+n.height+4+"px"})}return(0,o.BX)(o.HY,{children:[(0,o.BX)(p.G,{innerRef:g,tag:"button",id:m,style:f?z:void 0,"aria-haspopup":"true","aria-expanded":!!f,"aria-controls":w,css:I.button,onClick:function(){c&&(f?v(!1):T())},onKeyDown:function(e){switch(e.key){case" ":case"Enter":case"ArrowDown":if(!c)return;T()}},children:[(0,D.cloneElement)((0,o.tZ)(R,{node:t}),{size:12}),(0,o.tZ)(p.G,{css:I.text,children:b})]}),f&&c?(0,o.tZ)(d.h,{children:(0,o.tZ)(h.Tg,{id:w,css:P.root,innerRef:y,style:(n={},(0,r._)(n,C.menuX,f.x),(0,r._)(n,C.menuY,f.y),n),onKeyDown:function(e){if("Escape"===e.key){var n;v(!1),null===(n=g.current)||void 0===n||n.focus()}},children:(0,o.tZ)(O,{openFile:l,parentPath:x,currentPath:t.path})})}):null]})}function O(e){var n=(0,w.Z)().fs,t=(0,a.Gn)("fontSize").preferences,r=(0,b.T)(!0),i=(0,D.useCallback)(function(e){return!r(e.filename)},[r]),l=(0,x.p)({fs:n,filter:i,focusedPath:e.currentPath,fontSize:t.fontSize,root:e.parentPath,manageWidth:!0,onFileSelect:function(n){var t=n.path;e.openFile(t)},alwaysShowCreateRow:!0});return(0,o.tZ)(x.s,{store:l.store})}var N=(0,l.iv)([m.l0.flex.row,m.l0.align.center,m.l0.height("100%"),m.l0.px(2)]),G=(0,D.memo)(function(e){var n,t,r=e.path,i=e.onFileClick,l=e.expandable,a=void 0===l||l,u=e.children,c=(t=(n=r.split("/")).length,n.map(function(e,r){return{type:r===t-1?T.Tv.File:T.Tv.Directory,path:n.slice(0,r+1).join("/")}}));return(0,o.BX)(p.G,{css:N,children:[c.map(function(e){return(0,o.BX)(D.Fragment,{children:[(0,o.tZ)(F,{node:e,openFile:i,expandable:a}),e.type===T.Tv.Directory?(0,o.tZ)(g.Z,{size:12}):null]},CSS.escape(e.path))}),u||null]})})},25129:function(e,n,t){t.d(n,{s:function(){return rc},p:function(){return ru}});var r,i,o,l,a,u,c,s,f,d,h,p=t(42516),v=t(63257),g=t(4216),y=t(38172),m=t(24268),w=t(94778),x=t(49224),b=t(72093),D=t(50959),S=t(57253),E=t(41733),T=t(30509),R=t(66626),_=t(16923),C=t(12428),Z=t(34357),P=t(44900),k=t(29318),I=t(36559),z=t(19068),F=t(82230),O=t(49580),N=t(87128),G=t(19653),U=t(28659),A={name:"sameWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var n=e.state;n.styles.popper.width="".concat(n.rects.reference.width,"px")},effect:function(e){var n=e.state;n.elements.reference instanceof HTMLElement&&(n.elements.popper.style.width="".concat(n.elements.reference.offsetWidth,"px"))}},M=t(99266),L=t(17971),W=t(64479),j=t(34335),B=t(93801),V=t(85733),H=t(41974),X=t(29547),K=t(27387),Q=t(96583),Y=t(40635),J=t(73372),$=t(95938),q=t(97056),ee=t(41600),en="No files",et="Loading...";function er(e,n){var t=n.fromIndex;if("next"===n.dir){for(var r=t+1;r<e.length;r++){var i=e[r];if(i&&("dir"===i.type||"file"===i.type))return i}return null}for(var o=t-1;o>=0;o--){var l=e[o];if(l&&("dir"===l.type||"file"===l.type))return l}return null}function ei(e,n,t){if(t){var r=$.nh.includes(n.filename),i=$.nh.includes(e.filename);if(r&&!i)return -1;if(!r&&i)return 1;var o=$.uP.includes(n.filename),l=$.uP.includes(e.filename);if(o&&!l)return -1;if(!o&&l)return 1}return n.type===S.Tv.Directory&&e.type!==S.Tv.Directory?1:e.type===S.Tv.Directory&&n.type!==S.Tv.Directory?-1:(0,I.IV)(e.filename,n.filename)}function eo(e){var n=e.row,t=e.baseDepth;return"dir"===n.type||"file"===n.type||"uploadFile"===n.type?n.path===J.Ql?0:(0,I.U$)(n.path)-1-t:n.dir===J.Ql?0:(0,I.U$)(n.dir)-t}var el=function(e,n){return e===J.Ql?n:e+"/"+n},ea=function(e,n){return e===J.Ql&&1===(0,I.U$)(n)||(0,ee.pC)(e,n)},eu=(0,Y.cn)(new Map),ec=(0,Y.cn)({width:0,height:0}),es=(0,Y.cn)(0),ef=(0,Y.cn)(null),ed=(0,Y.cn)(new Map),eh=(0,Y.cn)(function(e){var n;return null!==(n=e(eD).root)&&void 0!==n?n:J.Ql}),ep=(0,Y.cn)(null),ev=(0,Y.cn)(void 0),eg=(0,Y.cn)(null),ey=(0,Y.cn)(null,function(e,n,t){e(eE)||n(eg,t)}),em=(0,Y.cn)(function(e){var n=e(eD).root,t=void 0===n?J.Ql:n;return t===J.Ql?0:(0,I.U$)(t)}),ew=(0,Y.cn)(function(e){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=[],r=0,i=!0,o=!1,l=void 0;try{for(var a,u=(0,v._)(e.values()).sort(function(e,n){return e.index-n.index})[Symbol.iterator]();!(i=(a=u.next()).done);i=!0){var c=a.value,s={height:c.height,y:c.y,cols:[]};if(t.push(s),0!==c.depth){var f=c.depth+n;f>r&&(r=f);for(var d="divider"===c.row.type||"error"===c.row.type||"create"===c.row.type||"emptyDir"===c.row.type?c.row.dir:(0,I.Il)(c.row.path),h=d.split("/"),p=0;p<(0,I.U$)(d);p++){var g=h.slice(0,Number(p+1)).join("/");s.cols.push(g)}}}}catch(e){o=!0,l=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw l}}for(var y=new Map,m=n;m<r;m++){var w=[];y.set(m,w);var x=!0,b=!1,D=void 0;try{for(var S,E=t[Symbol.iterator]();!(x=(S=E.next()).done);x=!0){var T=S.value,_=T.cols[m],C=T.y;if(_){var Z=w[w.length-1];Z&&Z.y+Z.height===C?Z.height+=T.height:w.push({y:C,height:T.height,dir:_,depth:m-n})}}}catch(e){b=!0,D=e}finally{try{x||null==E.return||E.return()}finally{if(b)throw D}}}var P=[],k=!0,z=!1,F=void 0;try{for(var O,N=y[Symbol.iterator]();!(k=(O=N.next()).done);k=!0){var G=(0,R._)(O.value,2),U=(G[0],G[1]);P.push.apply(P,(0,v._)(U))}}catch(e){z=!0,F=e}finally{try{k||null==N.return||N.return()}finally{if(z)throw F}}return P}(e(ed),e(em))}),ex=(0,Y.cn)(!1),eb=(0,Y.cn)(null,function(e,n,t){var r=new Map,i=e(ej),o=e(em),l=!0,a=!1,u=void 0;try{for(var c,s=t.rows[Symbol.iterator]();!(l=(c=s.next()).done);l=!0){var f=c.value,d=f.key.toString(),h=i[f.index];if(h){var p=Math.max(0,eo({row:h,baseDepth:o}));r.set(f.index,{y:f.start+8,height:f.size,index:f.index,key:d,depth:p,row:h})}}}catch(e){a=!0,u=e}finally{try{l||null==s.return||s.return()}finally{if(a)throw u}}n(ed,r),n(es,t.scrollHeight)}),eD=(0,Y.cn)({}),eS=(0,X.kv)(eD,function(e){var n;return null!==(n=e.onContextMenu)&&void 0!==n?n:null}),eE=(0,Y.cn)(function(e){return!!e(eD).readOnly||!e(ex)}),eT=(0,Y.cn)(function(e){var n;return null!==(n=e(eD).fontSize)&&void 0!==n?n:14}),eR=function(e,n){if("divider"===n)switch(e){case 10:return 28;case 12:case 13:case 14:return 38;case 18:return 44;default:return 48}switch(e){case 10:return 18;case 12:case 13:return 24;case 14:return 32;case 18:return 38;default:return 40}},e_=(0,Y.cn)(function(e){return eR(e(eT),"file")}),eC=function(e){switch(e){case 10:case 12:return 12;case 13:case 14:return 16;case 18:return 20;default:return 24}},eZ=(0,Y.cn)(function(e){return eC(e(eT))}),eP=(0,Y.cn)(function(e){return 14>e(eT)?4:8}),ek=(0,Y.cn)(function(e){return 14>=e(eT)?4:8}),eI=(0,Y.cn)(function(e){return 13===e(eT)?6:16>e(eT)?4:8}),ez=function(e){switch(e){case 10:return 10;case 12:case 13:case 14:return 12;case 18:return 14;default:return 18}},eF=function(e){switch(e){case 10:return 12;case 12:case 13:return 16;case 14:return 24;case 18:return 32;default:return 40}},eO=(0,Y.cn)(function(e){return eF(e(eT))}),eN=(0,Y.cn)(function(e){return ez(e(eT))}),eG=function(e){switch(e){case 10:case 12:case 13:return 10;case 14:case 18:return 16;default:return 20}},eU=(0,Y.cn)(function(e){return eG(e(eT))}),eA=(0,Y.cn)(new Map);function eM(e){var n=e.filename;return $.nh.includes(n)?"Config files":$.uP.includes(n)?"Packager files":null}var eL=(0,Y.cn)([]),eW=(0,Y.cn)([]),ej=(0,Y.cn)(function(e){var n,t,r=e(eD),i=r.filter,o=r.alwaysShowCreateRow,l=r.root,a=void 0===l?J.Ql:l,u=r.sort,c=r.readOnly;return function(e){var n=e.root,t=void 0===n?J.Ql:n,r=e.dirInfo,i=e.filter,o=e.sort,l=e.getSection,a=e.readOnly,u=e.pendingUploads,c=e.pendingMoves,s=e.pathBeingRenamed,f=e.alwaysShowCreateRow,d=[],h=(null==u?void 0:u.length)?function(e){var n=new Map,t=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var a=o.value,u=(0,I.Il)(a.targetPath)||J.Ql,c=n.get(u),s={filename:(0,I.UO)(a.targetPath),progress:a.progress};c?c.push(s):n.set(u,[s])}}catch(e){r=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}return n}(u):null,p=new Map,g=new Map;if(null==c?void 0:c.length){var y=!0,m=!1,w=void 0;try{for(var x,b=c[Symbol.iterator]();!(y=(x=b.next()).done);y=!0){var D=x.value,E=D.from,T=D.to;p.set(E.path,E.type),g.set(T,E.type)}}catch(e){m=!0,w=e}finally{try{y||null==b.return||b.return()}finally{if(m)throw w}}}return!function e(n){var u=r.get(n);if(!(!u||p.has(n))&&u.expanded){if(n===t&&u.loading&&!u.children){d.push({type:"dir",path:n});return}if(u.error){d.push({type:"error",message:u.error.message,dir:n});return}var c=u.children?(0,v._)(u.children):void 0;c&&p.size>0&&(c=c.filter(function(e){return!p.has(el(n,e.filename))}));var y=!0,m=!1,w=void 0;try{for(var x,b=g[Symbol.iterator]();!(y=(x=b.next()).done);y=!0)!function(){var e=(0,R._)(x.value,2),t=e[0],r=e[1];if(ea(n,t)){var i=(0,I.UO)(t);(null==c||!c.some(function(e){return e.filename===i}))&&(c||(c=[]),c.push({filename:i,type:r}))}}()}catch(e){m=!0,w=e}finally{try{y||null==b.return||b.return()}finally{if(m)throw w}}var D=null==h?void 0:h.get(n);if(D){c||(c=[]);var E=!0,T=!1,_=void 0;try{for(var C,Z=D[Symbol.iterator]();!(E=(C=Z.next()).done);E=!0){var P=C.value,k=P.filename,z=P.progress;c.push({filename:k,type:S.Tv.File,progress:z})}}catch(e){T=!0,_=e}finally{try{E||null==Z.return||Z.return()}finally{if(T)throw _}}}if(c){if(!u.create&&!D&&c&&0===c.length){d.push({type:a?"emptyDir":"create",dir:n});return}var F=function(e,n){var t=n.getSection,r=[],i=new Map,o=!0,l=!1,a=void 0;try{for(var u,c=e[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value,f=t(s),d=s.progress?{type:"upload",progress:s.progress,filename:s.filename}:{type:s.type===S.Tv.File?"file":"dir",filename:s.filename};if(!f){r.push(d);continue}var h=i.get(f);if(h){h.push(d);continue}i.set(f,[d])}}catch(e){l=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(l)throw a}}var p=!0,v=!1,g=void 0;try{for(var y,m=i[Symbol.iterator]();!(p=(y=m.next()).done);p=!0){var w=(0,R._)(y.value,2),x=w[0],b=w[1];r.push({type:"divider",label:x}),(0,q.fN)(r,b)}}catch(e){v=!0,g=e}finally{try{p||null==m.return||m.return()}finally{if(v)throw g}}return r}(c.filter(i).sort(function(e,r){return o(e,r,n===t)}),{getSection:n===J.Ql?l:function(){return null}}),O=-1,N=!0,G=!1,U=void 0;try{for(var A,M=F[Symbol.iterator]();!(N=(A=M.next()).done);N=!0)!function(){var t=A.value;if("error"===t.type||"emptyDir"===t.type)throw Error("Expected dir, file, or divider row");if("divider"===t.type)return -1===O&&(O=d.length),d.push({type:"divider",dir:n,label:t.label});var i=el(n,t.filename);if("dir"===t.type){var o={type:"dir",path:i};s===i&&(o.rename=!0),g.has(i)&&(o.pending=!0);var l=null==h?void 0:h.get(i);if(l&&(o.uploadProgress=l.map(function(e){return e.progress})),d.push(o),!r.get(i))return;e(i)}else if("upload"===t.type)d.push({type:"uploadFile",path:i,progress:t.progress});else if(!D||!D.some(function(e){return e.filename===t.filename})){var a={type:"file",path:i};s===i&&(a.rename=!0),g.has(i)&&(a.pending=!0),d.push(a)}}()}catch(e){G=!0,U=e}finally{try{N||null==M.return||M.return()}finally{if(G)throw U}}if(u.create||f){var L={type:"create",dir:n,fileType:u.create?u.create:void 0};-1===O?d.push(L):d.splice(O,0,L)}}}}(t),d}({root:a,dirInfo:e(eA),filter:i,sort:void 0===u?ei:u,readOnly:void 0!==c&&c,getSection:eM,pendingUploads:e(eL),pathBeingRenamed:null!==(n=e(eg))&&void 0!==n?n:void 0,pendingMoves:null!==(t=e(eW))&&void 0!==t?t:void 0,alwaysShowCreateRow:o})}),eB=(0,Y.cn)(function(e){var n=e(ef);if(!n)return null;var t=e(ej).findIndex(function(e){return("file"===e.type||"dir"===e.type)&&e.path===n});return -1!==t?t:null}),eV=(0,Y.cn)(null,function(e,n,t){var r,i=e(eB),o=e(ef);if((null===(r=document.activeElement)||void 0===r?void 0:r.tagName)!=="INPUT"&&null!==i&&null!==o){var l=e(ej);switch(t.key){case"ArrowDown":t.preventDefault();var a=er(l,{dir:"next",fromIndex:i});((null==a?void 0:a.type)==="dir"||(null==a?void 0:a.type)==="file")&&n(ef,a.path);return;case"ArrowUp":t.preventDefault();var u=er(l,{dir:"previous",fromIndex:i});((null==u?void 0:u.type)==="dir"||(null==u?void 0:u.type)==="file")&&n(ef,u.path);return;case"ArrowLeft":case"ArrowRight":t.preventDefault();var c=e(eA).get(o);if(!c)return;"ArrowLeft"===t.key&&c.expanded?n(eK,o):"ArrowRight"!==t.key||c.expanded||n(eY,o);return;case"Enter":case" ":if("Enter"===t.key&&!e(eE))return;if(e(eA).has(o)){n(eJ,o);return}e(eD).onFileSelect({event:t,path:o,type:"keydown"});return}}}),eH=(0,Y.cn)(null,function(e,n,t){var r;t.path===(null!==(r=e(eD).root)&&void 0!==r?r:J.Ql)&&n(ex,!0),n(eA,function(e){return(0,H.Uy)(e,function(e){var n=t.path===J.Ql?null:t.path+"/",r=!0,i=!1,o=void 0;try{for(var l,a=t.children[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var u,c=l.value,s=n?n+c.filename:c.filename,f=e.get(s);if(c.type!==S.Tv.Directory){f&&(null===(u=f.disposeWatcher)||void 0===u||u.call(f),e.delete(s));continue}f||e.set(s,{expanded:!1})}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}var d=e.get(t.path);d&&(d.children=t.children,d.loading=!1,d.error=void 0)})})}),eX=(0,Y.cn)(null,function(e,n,t){var r;t.path===(null!==(r=e(eD).root)&&void 0!==r?r:J.Ql)&&n(ex,!0),n(eA,function(e){return(0,H.Uy)(e,function(e){var n,r=e.get(t.path);r&&(r.loading=!1,r.error=t.error,null===(n=r.disposeWatcher)||void 0===n||n.call(r),r.disposeWatcher=null)})})}),eK=(0,Y.cn)(null,function(e,n,t){var r=Array.isArray(t)?t:[t];n(eA,function(e){return(0,H.Uy)(e,function(e){var n=!0,t=!1,i=void 0;try{for(var o,l=r[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var a=o.value,u=e.get(a);u&&(u.expanded=!1,u.loading=!1,u.disposeWatcher&&(u.disposeWatcher(),u.disposeWatcher=null))}}catch(e){t=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(t)throw i}}})})}),eQ=(0,Y.cn)(null,function(e,n,t){n(eA,function(e){return(0,H.Uy)(e,function(e){var n,r=e.get(t);r&&(null===(n=r.disposeWatcher)||void 0===n||n.call(r),e.delete(t))})})}),eY=(0,Y.cn)(null,function(e,n,t){var r=Array.isArray(t)?t:[t],i=e(eD).fs;n(eA,function(e){return(0,H.Uy)(e,function(e){var t=!0,o=!1,l=void 0;try{for(var a,u=r[Symbol.iterator]();!(t=(a=u.next()).done);t=!0)!function(){var t,r=a.value,o=null!==(t=e.get(r))&&void 0!==t?t:{expanded:!0};e.has(r)?o.expanded=!0:e.set(r,o),o.disposeWatcher?o.disposeWatcher():o.loading=!0,o.disposeWatcher=i.watchDir(r,{onError:function(e){return n(eX,{path:r,error:e})},onChange:function(e){return n(eH,{path:r,children:e})},onMoveOrDelete:function(){return n(eQ,r)}})}()}catch(e){o=!0,l=e}finally{try{t||null==u.return||u.return()}finally{if(o)throw l}}})})}),eJ=(0,Y.cn)(null,function(e,n,t){var r=e(eA).get(t);if(!r){n(eA,function(e){return(0,H.Uy)(e,function(e){e.set(t,{expanded:!1})})}),n(eY,t);return}n(r.expanded?eK:eY,t)}),e$=(0,Y.cn)(function(e){return e(eD).manageWidth?e(ex)?function(e){var n=e.rows,t=e.baseDepth,r=[],i=new Map,o=!0,l=!1,a=void 0;try{for(var u,c=n[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value,f=function(e){var n=e.row,t=eo({row:n,baseDepth:e.baseDepth});switch(n.type){case"file":case"dir":case"uploadFile":return{text:(0,I.UO)(n.path),depth:t};case"error":return{text:n.message,depth:t};case"divider":return{text:n.label,depth:t};case"create":case"emptyDir":return{text:en,depth:t}}}({row:s,baseDepth:t}),d=f.depth,h=f.text,p=i.get(d);if(!p){i.set(d,new Map([[s.type,h]]));continue}var v=p.get(s.type);v&&(null==v?void 0:v.length)>h.length||p.set(s.type,h)}}catch(e){l=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(l)throw a}}var g=!0,y=!1,m=void 0;try{for(var w,x=i[Symbol.iterator]();!(g=(w=x.next()).done);g=!0){var b=(0,R._)(w.value,2),D=b[0],S=b[1],E=!0,T=!1,_=void 0;try{for(var C,Z=S[Symbol.iterator]();!(E=(C=Z.next()).done);E=!0){var P=(0,R._)(C.value,2),k=P[0],z=P[1];r.push({depth:D,type:k,text:z})}}catch(e){T=!0,_=e}finally{try{E||null==Z.return||Z.return()}finally{if(T)throw _}}}}catch(e){y=!0,m=e}finally{try{g||null==x.return||x.return()}finally{if(y)throw m}}return r}({rows:e(ej),baseDepth:e(em)}):[{type:"dir",text:et,depth:1}]:null}),eq=(0,Y.cn)(null,function(e,n,t){var r=e(eD).onCreateStart;if(r){r({parentPath:t.parentPath,fileType:t.fileType});return}n(eY,t.parentPath),n(eA,function(e){return(0,H.Uy)(e,function(e){var n=e.get(t.parentPath);n&&(n.create=t.fileType)})}),n(ef,null)}),e0=(0,Y.cn)(null,function(e,n,t){n(eA,function(e){return(0,H.Uy)(e,function(e){var n=e.get(t);n&&(n.create=void 0)})})}),e1=(0,Y.cn)(null,function(e,n,t){var r={path:t.path,type:t.fileType};n(ef,r.path),n(e6,{node:r}),n(eA,function(e){return(0,H.Uy)(e,function(e){var n=e.get(t.parentPath);n&&(n.create=void 0)})}),r.type===S.Tv.Directory&&n(eY,r.path)}),e2=(0,Y.cn)(new Map),e4=(0,Y.cn)(null),e3=(0,Y.cn)(function(e){var n,t;return null!==(t=null===(n=e(e4))||void 0===n?void 0:n.path)&&void 0!==t?t:null}),e5=(0,Y.cn)(!0),e6=(0,Y.cn)(null,function(e,n,t){var r=t.node,i=t.mode,o=e(ej),l=e(e4);n(e5,!i),n(e2,function(e){return(0,H.Uy)(e,function(e){!function(e,n){var t=n.node,r=n.rows,i=n.mode,o=n.anchor;if(!i){e.clear(),e.set(t.path,t.type);return}if("multi"===i&&e.has(t.path)){e.delete(t.path);return}if("multi"===i){e.set(t.path,t.type);return}var l=t.type===S.Tv.Directory?"dir":"file",a=r.findIndex(function(e){return e.type===l&&e.path===t.path});if(-1!==a){var u=(null==o?void 0:o.type)===S.Tv.Directory?"dir":"file",c=o?r.findIndex(function(e){return e.type===u&&e.path===o.path}):-1;if(-1!==c){var s=c<a?r.slice(c,a+1):r.slice(a,c+1),f=!0,d=!1,h=void 0;try{for(var p,v=r[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var g=p.value;("file"===g.type||"dir"===g.type)&&(s.includes(g)?e.set(g.path,"file"===g.type?S.Tv.File:S.Tv.Directory):e.delete(g.path))}}catch(e){d=!0,h=e}finally{try{f||null==v.return||v.return()}finally{if(d)throw h}}}}}(e,{node:r,rows:o,mode:i,anchor:l})})});var a=e(e2);if(!(a.size>1)){var u=!0,c=!1,s=void 0;try{for(var f,d=a[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var h=(0,R._)(f.value,2),p=h[0],v=h[1];n(e4,{path:p,type:v})}}catch(e){c=!0,s=e}finally{try{u||null==d.return||d.return()}finally{if(c)throw s}}}}),e7=(0,Y.cn)(null,function(e,n){n(e2,new Map),n(e5,!0),n(e4,null)}),e9=(0,Y.cn)(null,(r=(0,K._)(function(e,n,t){var r,i,o;return(0,Q.Jh)(this,function(l){switch(l.label){case 0:var a;return r=e(eD).fs,[4,Promise.all(t.map((a=(0,K._)(function(e){var n;return(0,Q.Jh)(this,function(t){switch(t.label){case 0:return[4,r.readDir(e)];case 1:return[2,(n=t.sent()).error?n:{path:e,children:n.children,error:null}]}})}),function(e){return a.apply(this,arguments)})))];case 1:if((o=(i=l.sent()).filter(function(e){return null!==e.error})).length)return[2,{errors:o}];return n(eA,function(e){return(0,H.Uy)(e,function(e){var n=!0,t=!1,r=void 0;try{for(var o,l=i[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var a=o.value;if(a.error)throw Error("Unexpected error");var u=e.get(a.path);if(!u){e.set(a.path,{loading:!1,expanded:!0,children:a.children,error:void 0});continue}u.loading=!1,u.expanded=!0,u.children=a.children,u.error=void 0}}catch(e){t=!0,r=e}finally{try{n||null==l.return||l.return()}finally{if(t)throw r}}})}),[2,{errors:null}]}})}),function(e,n,t){return r.apply(this,arguments)})),e8=(0,Y.cn)(null,(i=(0,K._)(function(e,n,t){var r,i,o,l,a,u,c,s,f;return(0,Q.Jh)(this,function(d){switch(d.label){case 0:r=e(eA),i=[],o=!0,l=!1,a=void 0;try{var h;for(u=((h=t.path.split("/")).pop(),[J.Ql].concat((0,v._)(h.map(function(e,n){return h.slice(0,n+1).join("/")}))))[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)s=c.value,null!=(f=r.get(s))&&f.expanded||i.push(s)}catch(e){l=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(l)throw a}}if(!i.length)return[3,2];return[4,n(e9,i)];case 1:d.sent(),d.label=2;case 2:return n(e6,{node:t}),[2]}})}),function(e,n,t){return i.apply(this,arguments)})),ne=(0,Y.cn)(null),nn=(0,Y.cn)(null,function(e,n,t){var r=e(ne);if(r)for(var i=e(ej),o=0;o<i.length;o++){var l=i[o];if(("file"===l.type||"dir"===l.type)&&l.path===t&&!(o>r.options.count-1)){r.scrollToIndex(o);break}}}),nt=t(30660),nr=t(22750),ni=t(79122),no=(0,D.createContext)(null);function nl(e){return(0,g.tZ)(no.Provider,{value:e.store,children:e.children})}function na(){var e=(0,D.useContext)(no);if(!e)throw Error("Expected store in context");return e}function nu(e){return(0,nr.Dv)(e,{store:na()})}function nc(e){return(0,nt.b)(e,na())}var ns=function(e){return(0,nr.b9)(e,{store:na()})};function nf(e){return(0,ni.lV)((0,D.useCallback)(function(n){return n(e)},[e]),{store:na()})}var nd=(0,t(33298).$)(["scrollHeight","fontSize","fontSizeSmall","iconSize","horizontalPadding","borderRadius","gutterWidth","minHeight","iconTextGap","rowWidth","rowHeight","rowLeftIndent","rowY","dropPreviewDepth","dropPreviewHeight","dropPreviewY","dropPreviewOpacity","strokeDashoffset","statusColor","statusBackgroundColor","dirStatusIconSize","nodeBackgroundColor","dragPreviewX","dragPreviewY","contextMenuButtonDisplay","hasUnsavedChangesDisplay"]),nh=nd.cssVars,np=nd.styleTokens,nv={paddingLeft:np.horizontalPadding,paddingRight:np.horizontalPadding},ng={"&& svg":{minWidth:np.iconSize+" !important",minHeight:np.iconSize+" !important",width:np.iconSize+" !important",height:np.iconSize+" !important"}},ny=[b.l0.truncate,{fontSize:np.fontSize}],nm=(0,X.kv)(eD,function(e){return e.autocomplete}),nw=(0,x.X)({icon:[ng,{marginRight:np.iconTextGap}],item:[nv,b.l0.flex.row,b.l0.align.center,z.gU.listItem,{height:np.rowHeight}],text:[ny,b.l0.flex.growAndShrink(1)]});function nx(e){var n=e.id,t=e.items,r=e.activeIndex,i=e.onSuggestion,o=e.fileType,l=e.innerRef;return(0,g.tZ)(w.G,{tag:"ul",id:n,"aria-label":"Suggestions",innerRef:l,children:t.map(function(e,n){var t=n===r;return(0,g.BX)(w.G,{id:e.value,tag:"li",role:"option","aria-selected":t,style:{backgroundColor:t?z.vb.interactiveBackground:void 0,color:t?b.TV.foregroundDefault:b.TV.foregroundDimmer},onClick:function(){return i(e.value)},css:nw.item,children:[(0,g.tZ)(w.G,{css:nw.icon,children:o===S.Tv.Directory?(0,g.tZ)(Z.Z,{}):(0,g.tZ)(_.Z,{path:e.value})}),(0,g.tZ)(B.x,{css:nw.text,text:e.value,highlight:e.highlight,dimmed:!t})]},e.value)})})}var nb=t(47357),nD=t(58474),nS=t(36647),nE=t(46026),nT=t(86976),nR=t(81202),n_=t.n(nR),nC=t(52399);function nZ(e){var n=e.fileName,t=e.parentPath,r=t===J.Ql?"":t+"/",i=r+n,o=i.split("/");return{pathPrefix:r,newFilePath:i,segments:o}}function nP(e){return nk.apply(this,arguments)}function nk(){return(nk=(0,K._)(function(e){var n,t,r,i,o,l,a,u,c,s,f,d,h,p,v,g,y,m,w;return(0,Q.Jh)(this,function(x){switch(x.label){case 0:if(n=e.fileName,t=e.parentPath,r=e.fs,n.startsWith("/"))return[2,"File names cannot include forward slashes"];o=(i=nZ({fileName:n,parentPath:t})).pathPrefix,l=i.newFilePath,a=i.segments,u=!0,c=!1,s=void 0,x.label=1;case 1:x.trys.push([1,7,8,9]),f=Object.entries(a)[Symbol.iterator](),x.label=2;case 2:if(u=(d=f.next()).done)return[3,6];if(p=(h=(0,R._)(d.value,2))[0],v=h[1],g=Number(p),y=[],g!==a.length-1)return[3,4];return[4,r.stat(l)];case 3:x.sent().exists&&y.push((0,I.UO)(l)),x.label=4;case 4:if(!(m=(0,nT.z)({fileName:v,siblingNames:y,parentPath:o+a.slice(0,g).join("/")})))return[3,5];return[2,m];case 5:return u=!0,[3,2];case 6:return[3,9];case 7:return w=x.sent(),c=!0,s=w,[3,9];case 8:try{u||null==f.return||f.return()}finally{if(c)throw s}return[7];case 9:return[2,null]}})})).apply(this,arguments)}function nI(e){var n=nZ({fileName:e.fileName,parentPath:e.parentPath}),t=n.pathPrefix,r=n.segments,i=!0,o=!1,l=void 0;try{for(var a,u=Object.entries(r)[Symbol.iterator]();!(i=(a=u.next()).done);i=!0){var c=(0,R._)(a.value,2),s=c[0],f=c[1],d=Number(s),h=(0,nT.z)({fileName:f,siblingNames:[],parentPath:t+r.slice(0,d).join("/")});if(h)return h}}catch(e){o=!0,l=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw l}}return null}function nz(e,n){return e.shiftKey?"bulk":"altKey"===n&&e.altKey||"cmdOrCtrlKey"===n&&(0,nE.jh)(e)?"multi":void 0}var nF=(0,Y.cn)(null,function(e,n,t){var r=t.event,i=t.path;n(ef,i);var o=e(eD).multiselectModifierKey;n(e6,{node:{path:i,type:S.Tv.Directory},mode:o?nz(r,o):void 0}),n(ef,i),r.shiftKey||r.altKey||(0,nE.jh)(r)||n(eJ,i)});function nO(){return{fontSize:nc(eT),fontSizeSmall:nc(eN),iconSize:nc(eZ),scrollHeight:nc(es),horizontalPadding:nc(eP),borderRadius:nc(ek),gutterWidth:nc(eU),minHeight:nc(e_),iconTextGap:nc(eI)}}function nN(e){return nu((0,nS.Z)(function(){return(0,X.kv)(ef,function(n){return n===e?0:-1})},[e]))}function nG(e){return nu((0,nS.Z)(function(){return(0,X.kv)(ed,function(n){var t,r=n.get(e);return r?{style:(t={},(0,p._)(t,nh.rowHeight,r.height+"px"),(0,p._)(t,nh.rowY,r.y+"px"),(0,p._)(t,nh.rowLeftIndent,"calc(".concat(r.depth," * ").concat(np.gutterWidth,")")),t),depth:r.depth}:void 0},n_())},[e]))}function nU(e){var n=e.index,t=e.path,r=(0,D.useRef)(null),i=nc(ef);return(0,D.useEffect)(function(){var e=function(e){var n;null===(n=r.current)||void 0===n||n.setAttribute("tabIndex",e.toString())},o=function(r){if(!r){e(0===n?0:-1);return}e(r===t?0:-1)};return o(i.current),i.subscribe(o)},[i,t,n]),(0,D.useEffect)(function(){var e=function(e){null!==n&&clearTimeout(n),e===t&&document.activeElement!==r.current&&(n=setTimeout(function(){var e;null===(e=r.current)||void 0===e||e.focus()},50))},n=null;e(i.current);var o=i.subscribe(e);return function(){null!==n&&clearTimeout(n),o()}},[i,t]),[r,ns(ef)]}var nA=[np.horizontalPadding,np.iconSize,np.iconTextGap].join(" + "),nM=[z.gU.filled,{height:"100%",width:"100%",paddingLeft:"calc(".concat(nA,")"),paddingRight:np.horizontalPadding,fontSize:np.fontSize}],nL=(0,x.X)({root:[b.l0.flex.row,nv,{padding:np.horizontalPadding}],icon:[ng,b.l0.color.accentNegativeDefault,{marginRight:np.iconTextGap}],text:[{fontSize:np.fontSize},b.l0.color.foregroundDimmer,b.l0.flex.growAndShrink(1)]});function nW(e){return(0,g.BX)(w.G,{css:nL.root,children:[(0,g.tZ)(w.G,{css:nL.icon,children:(0,g.tZ)(N.Z,{})}),(0,g.tZ)(w.G,{css:nL.text,children:e.message})]})}var nj=(0,x.X)({root:[b.l0.position.relative,b.l0.flex.growAndShrink(1),{height:"100%"}],icon:[ng,b.l0.position.absolute,b.l0.left(np.horizontalPadding),b.l0.top("50%"),{transform:"translateY(-50%)"}],input:nM,inputLoading:[nM,M.p.backgroundPulse()],menu:[b.l0.overflow("hidden"),{borderRadius:np.borderRadius,border:"1px solid",borderColor:b.TV.outlineDefault}],label:[b.l0.visuallyHidden]});function nB(e){var n,t,r,i,o,l,a,u,c,s,f,d=(0,D.useId)(),h=(0,D.useId)(),v=(n=(0,D.useRef)(null),t=nO(),(0,m.j)(n,t.fontSize,function(e){return(0,p._)({},nh.fontSize,e+"px")}),(0,m.j)(n,t.iconTextGap,function(e){return(0,p._)({},nh.iconTextGap,e+"px")}),(0,m.j)(n,t.borderRadius,function(e){return(0,p._)({},nh.borderRadius,e+"px")}),(0,m.j)(n,t.horizontalPadding,function(e){return(0,p._)({},nh.horizontalPadding,e+"px")}),(0,m.j)(n,t.iconSize,function(e){return(0,p._)({},nh.iconSize,e+"px")}),(0,m.j)(n,t.fontSize,function(e){return(0,p._)({},nh.rowHeight,eR(e,"file")+"px")}),(0,m.j)(n,t.iconTextGap,function(e){return(0,p._)({},nh.iconTextGap,e+"px")}),i=(r=(0,R._)((0,D.useState)(null),2))[0],o=r[1],a=(l=(0,R._)((0,D.useState)(null),2))[0],u=l[1],s=(c=(0,j.D)(i,a,{modifiers:[{name:"offset",options:{offset:[0,4]}},A],placement:"bottom-start"})).styles,f=c.attributes,{menuRef:(0,y.l)(n,u),menuAnchorRef:o,styles:s.popper,attributes:f.popper}),x=function(e){var n=e.onSuggestion,t=e.siblings,r=e.value,i=nu(nm),o=(0,R._)((0,D.useState)({items:[],activeIndex:null}),2),l=o[0],a=o[1],u=(0,V.Z)(t),c=(0,V.Z)(r),s=(0,R._)((0,D.useTransition)(),2)[1],f=i?function(e){s(function(){var n=i(e);a(function(e){return(0,H.Uy)(e,function(e){e.items=n.filter(function(e){return e.value!==c.current&&!u.current.some(function(n){return n.filename===e.value})})})})})}:null;function d(){a({items:[],activeIndex:null})}return{items:l.items.length?l.items:null,activeIndex:l.activeIndex,query:f,onKeyDown:function(e){if("Enter"===e.key){var t=null!==l.activeIndex?l.items[l.activeIndex]:null;if(!t)return;return e.preventDefault(),n(t.value),d(),!0}return"ArrowDown"===e.key?(e.preventDefault(),a(function(e){return(0,H.Uy)(e,function(e){if(null===e.activeIndex||e.activeIndex>e.items.length-1){e.activeIndex=0;return}e.activeIndex++})}),!0):"ArrowUp"===e.key?(e.preventDefault(),a(function(e){return(0,H.Uy)(e,function(e){if(null===e.activeIndex){e.activeIndex=e.items.length-1;return}if(0===e.activeIndex){e.activeIndex=null;return}e.activeIndex--})}),!0):void 0},clear:d}}({onSuggestion:e.onSuggestion,siblings:e.siblings,value:e.value}),b=nf(ne),C=(0,R._)((0,D.useState)(!0),2),P=C[0],k=C[1],I=(0,D.useRef)(null);(0,D.useEffect)(function(){if(I.current){var e,n=null===(e=b())||void 0===e?void 0:e.scrollElement;if(n)return(0,U.j)(I.current,function(){return k(!0),function(){return k(!1)}},{root:n})}},[b]);var z=P&&!!(e.error||x.items),F=x.items&&x.activeIndex?x.items[x.activeIndex]:void 0,O=!e.error&&x.items?x.items:null,N=(0,D.useRef)(null),M=x.clear,B=(0,G.Z)(function(e){var n;null!==(n=N.current)&&void 0!==n&&n.contains(e.target)||M()},[M]),X=(0,G.Z)(function(n){var t,r,i=e.inputRef.current;!i||(null===(t=N.current)||void 0===t?void 0:t.contains(n.target))||(null===(r=B.current)||void 0===r?void 0:r.contains(n.target))||e.onClickOutside({inputValue:i.value})},[]);return(0,g.BX)(g.HY,{children:[(0,g.tZ)("label",{css:nj.label,htmlFor:d,children:"file name"}),(0,g.BX)(w.G,{css:nj.root,innerRef:(0,y.l)(N,v.menuAnchorRef),children:[(0,g.tZ)(w.G,{css:nj.icon,children:e.fileType===S.Tv.Directory?(0,g.tZ)(Z.Z,{}):(0,g.tZ)(_.Z,{path:e.value})}),(0,g.tZ)("input",{spellCheck:!1,"aria-controls":x.query?h:void 0,"aria-expanded":x.items?"true":"false","aria-activedescendant":null==F?void 0:F.value,role:x.query?"combobox":void 0,id:d,ref:(0,y.l)(e.inputRef,I,X),css:e.loading?nj.inputLoading:nj.input,value:e.value,onChange:e.loading?void 0:function(n){var t;e.onChange(n),null===(t=x.query)||void 0===t||t.call(x,{input:n.currentTarget.value,fileType:e.fileType,type:e.type,siblings:e.siblings})},onKeyDown:function(n){x.onKeyDown(n)||e.onKeyDown(n)}})]}),(0,g.tZ)(L.h,{children:(0,g.BX)(W.Tg,(0,T._)((0,E._)({css:nj.menu,elevated:!0,innerRef:v.menuRef,style:(0,T._)((0,E._)({},v.styles),{display:z?"block":"none"})},v.attributes),{children:[e.error?(0,g.tZ)(nW,{message:e.error}):null,O?(0,g.tZ)(nx,{id:h,innerRef:B,items:O,activeIndex:x.activeIndex,onSuggestion:function(n){e.onSuggestion(n),M()},fileType:e.fileType}):null]}))})]})}var nV=(0,x.X)({createFilePicker:[b.l0.align.center,b.l0.rowWithGap(4),{fontSize:np.fontSize,paddingRight:np.horizontalPadding,paddingLeft:np.horizontalPadding}],button:[b.l0.reset.button,b.l0.p(2),z.gU.filled,b.l0.color.foregroundDimmer,{fontSize:"inherit"}],text:[ny,b.l0.color.foregroundDimmest],label:[b.l0.visuallyHidden]});function nH(e){var n,t,r,i,o,l,a,u,c,s,f,d,h,p,v,y,m,w,x,b,E,T=(n=e.dir,r=ns(eq),i=ns(e0),o=ns(e1),a=(l=(0,R._)((0,D.useState)(""),2))[0],u=l[1],c=nf(eD),f=(s=(0,R._)((0,D.useState)(!1),2))[0],d=s[1],p=(h=(0,R._)((0,D.useState)(null),2))[0],v=h[1],y=(0,nS.Z)(function(){return(0,X.kv)(eA,function(e){return e.get(n)})},[n]),m=(0,nS.Z)(function(){return(0,X.kv)(y,function(e){var n;return null!==(n=null==e?void 0:e.create)&&void 0!==n?n:null})},[y]),w=nu((0,nS.Z)(function(){return(0,X.kv)(y,function(e){var n;return null!==(n=null==e?void 0:e.children)&&void 0!==n?n:null})},[y])),x=nu(m),b=(0,K._)(function(e){var t,r,i,l,a,s,f,h;return(0,Q.Jh)(this,function(p){switch(p.label){case 0:if(!x)return[2];if(i=c().fs,l=null,0!==e.length)return[3,1];return l="File names cannot be empty",[3,4];case 1:if(!e.includes("/"))return[3,3];return[4,nP({fileName:e,parentPath:n,fs:i})];case 2:return l=p.sent(),[3,4];case 3:l=(0,nT.z)({fileName:e,siblingNames:null!==(a=null==w?void 0:w.map(function(e){return e.filename}))&&void 0!==a?a:[],parentPath:n}),p.label=4;case 4:if(l)return v(l),[2];if((f=(s=n===J.Ql?null:n+"/")?s+e:e).includes("//")&&(f=f.split("/").filter(function(e){return e.length>0}).join("/")),d(!0),x!==S.Tv.Directory)return[3,6];return[4,i.createDir(f)];case 5:return h=p.sent(),[3,8];case 6:return[4,i.writeFile(f,new nC.Z(""))];case 7:h=p.sent(),p.label=8;case 8:if(h.error)return v("Something went wrong"),[2];return d(!1),u(""),o({parentPath:n,path:f,fileType:x}),null===(t=(r=c()).onCreate)||void 0===t||t.call(r,{path:f,type:x}),[2]}})}),!(E=p)&&a.includes("/")?E=nI({fileName:a,parentPath:n}):E||(E=(0,nT.z)({fileName:a,siblingNames:null!==(t=null==w?void 0:w.map(function(e){return e.filename}))&&void 0!==t?t:[],parentPath:n})),{value:a,setValue:u,fileType:x,create:function(e){return b.apply(this,arguments)},creating:f,error:E,clearError:function(){return v(null)},cancel:(0,nS.Z)(function(){return function(){return i(n)}},[n,i]),start:(0,nS.Z)(function(){return function(e){return r({parentPath:n,fileType:e})}},[n,r]),siblings:w}),_=(0,D.useRef)(null);return((0,D.useEffect)(function(){var e;T.fileType&&(null===(e=_.current)||void 0===e||e.focus())},[T.fileType]),T.fileType)?(0,g.tZ)(nB,{siblings:T.siblings||[],type:"create",inputRef:_,loading:T.creating,error:T.error,value:T.value,fileType:T.fileType,onClickOutside:function(e){var n=e.inputValue;if(""===n){T.cancel();return}T.create(n)},onChange:function(e){T.error&&T.clearError(),T.setValue(e.currentTarget.value)},onKeyDown:function(e){if("Escape"===e.key){T.cancel();return}"Enter"===e.key&&T.create(e.currentTarget.value)},onSuggestion:function(e){T.setValue(e),T.create(e)}}):(0,g.tZ)(nX,{create:T.start})}function nX(e){return(0,g.BX)(w.G,{css:nV.createFilePicker,children:[(0,g.tZ)(w.G,{css:nV.text,children:"Add a"}),(0,g.tZ)(w.G,{tag:"button",css:nV.button,onClick:function(){return e.create(S.Tv.File)},children:"file"}),(0,g.tZ)(w.G,{css:nV.text,children:"or "}),(0,g.tZ)(w.G,{tag:"button",css:nV.button,onClick:function(){return e.create(S.Tv.Directory)},children:"folder"})]})}var nK=(0,x.X)({root:[{marginLeft:"auto",paddingLeft:np.horizontalPadding}],svg:[{transform:"rotate(-90deg)",transformOrigin:"center center","& .inner-circle":{strokeDashoffset:np.strokeDashoffset}}]});function nQ(e){var n=nu(eT)/2,t=n/2,r=2*t*Math.PI,i=(0,D.useRef)(null);return(0,m.j)(i,e.progress,function(e){return(0,p._)({},nh.strokeDashoffset,(r-e*r).toString())}),(0,g.tZ)(w.G,{innerRef:i,css:nK.root,children:(0,g.BX)("svg",{css:nK.svg,height:2*n,width:2*n,children:[(0,g.tZ)("circle",{fill:b.TV.backgroundHigher,r:n,cx:n,cy:n}),(0,g.tZ)("circle",{className:"inner-circle",stroke:b.TV.foregroundDimmest,fill:"transparent",strokeWidth:n,strokeDasharray:r+" "+r,r:t,cx:n,cy:n})]})})}var nY=function(e){return e.reduce(function(e,n){return e+n.current},0)/e.length};function nJ(e){var n,t,r,i,o=nu(eT)/2,l=o/2,a=2*l*Math.PI,u=(n=e.uploadProgress,r=(t=(0,R._)((0,D.useState)(nY(n)),2))[0],i=t[1],(0,D.useEffect)(function(){var e=[],t=!0,r=!1,o=void 0;try{for(var l,a=n[Symbol.iterator]();!(t=(l=a.next()).done);t=!0){var u=l.value;e.push(u.subscribe(function(){i(nY(n))}))}}catch(e){r=!0,o=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw o}}return function(){e.map(function(e){return e()})}},[n]),r),c=(0,D.useRef)(null);return(0,g.tZ)(w.G,{innerRef:c,css:nK.root,children:(0,g.BX)("svg",{css:nK.svg,height:2*o,width:2*o,children:[(0,g.tZ)("circle",{fill:b.TV.backgroundHigher,r:o,cx:o,cy:o}),(0,g.tZ)("circle",{className:"inner-circle",style:(0,p._)({},nh.strokeDashoffset,(a-u*a).toString()),stroke:b.TV.foregroundDimmest,fill:"transparent",strokeWidth:o,strokeDasharray:a+" "+a,r:l,cx:o,cy:o})]})})}function n$(e){var n,t,r,i,o,l,a,u,c,s,f,d,h,p,v,y,m,w,x,b,E,T=(0,R._)((n={path:e.path,type:e.fileType},r=nf(eD),o=(i=(0,R._)((0,D.useState)(null),2))[0],l=i[1],a=(0,I.Il)(n.path)||J.Ql,u=(0,I.UO)(n.path),c=ns(eg),s=ns(ef),d=(f=(0,R._)((0,D.useState)(u),2))[0],h=f[1],v=(p=(0,R._)((0,D.useState)(!1),2))[0],y=p[1],m=(0,nS.Z)(function(){return(0,X.kv)(eA,function(e){var n;return null===(n=e.get(a))||void 0===n?void 0:n.children})},[a]),w=d!==u,x=nu(m),b=null,w&&d.includes("/")?b=nI({fileName:d,parentPath:a}):w&&(b=(0,nT.z)({fileName:d,siblingNames:null!==(t=null==x?void 0:x.map(function(e){return e.filename}))&&void 0!==t?t:[],parentPath:a})),E=(0,K._)(function(e){var t,i,o,f,d,h,p,v,g,m;return(0,Q.Jh)(this,function(w){switch(w.label){case 0:if(b||!e||e===u)return[2];if(i=(t=r()).fs,o=t.onFileRenameStart,f=t.onFileRenameEnd,d=null,!e.includes("/"))return[3,2];return[4,nP({fileName:e,parentPath:a,fs:i})];case 1:return d=w.sent(),[3,3];case 2:d=(0,nT.z)({fileName:e,siblingNames:null!==(h=null==x?void 0:x.map(function(e){return e.filename}))&&void 0!==h?h:[],parentPath:a}),w.label=3;case 3:if(d)return l(d),[2];if(v=(p=a===J.Ql?null:a+"/")?p+e:e,g=(0,I.Il)(v)||J.Ql,y(!0),null==o||o({from:n.path,to:v}),!(g!==J.Ql))return[3,6];return[4,i.stat(g)];case 4:if(w.sent().exists)return[3,6];return[4,i.createDir(g)];case 5:w.sent(),w.label=6;case 6:if(n.type!==S.Tv.Directory)return[3,8];return[4,i.moveDir(n.path,v)];case 7:return m=w.sent(),[3,10];case 8:return[4,i.moveFile(n.path,v)];case 9:m=w.sent(),w.label=10;case 10:if(m.error)return l("Something went wrong"),y(!1),null==f||f(),[2];return c(null),null==f||f(),s(v),[2]}})}),[{canRename:!!d&&w&&!b,value:d,renaming:v,error:o||b,siblings:x},{setValue:h,rename:function(e){return E.apply(this,arguments)},cancel:function(){var e=r().onFileRenameEnd;c(null),null==e||e(),s(n.path)}}]),2),_=T[0],C=T[1],Z=C.setValue,P=C.rename,k=C.cancel,z=(0,D.useRef)(null),F=(0,D.useRef)(_.value);return(0,D.useEffect)(function(){if(z.current){var e=F.current;if(e){var n=e.lastIndexOf(".");n<=1&&(n=e.length);var t=e.startsWith(".")?1:0;z.current.focus(),z.current.setSelectionRange(t,n)}}},[]),(0,g.tZ)(nB,{siblings:_.siblings?_.siblings.filter(function(n){return n.filename!==(0,I.UO)(e.path)}):[],type:"rename",inputRef:z,loading:_.renaming,error:_.error,value:_.value,fileType:e.fileType,onClickOutside:function(e){var n=e.inputValue;_.canRename?P(n):_.error||k()},onChange:function(e){Z(e.currentTarget.value)},onKeyDown:function(e){if("Escape"===e.key){k();return}"Enter"!==e.key||(_.canRename?P(e.currentTarget.value):_.error||k())},onSuggestion:function(e){Z(e),P(e)}})}var nq=t(44906),n0=(u={},(0,p._)(u,nq.h.ADDED,"A"),(0,p._)(u,nq.h.UNTRACKED,"A"),(0,p._)(u,nq.h.MODIFIED,"M"),(0,p._)(u,nq.h.DELETED,"D"),(0,p._)(u,nq.h.RENAMED,"R"),(0,p._)(u,nq.h.COPIED,"C"),u),n1=(c={},(0,p._)(c,nq.h.ADDED,b.TV.greenDimmest),(0,p._)(c,nq.h.UNTRACKED,b.TV.greenDimmest),(0,p._)(c,nq.h.MODIFIED,b.TV.yellowDimmest),(0,p._)(c,nq.h.DELETED,b.TV.redDimmest),(0,p._)(c,nq.h.RENAMED,b.TV.tealDimmest),(0,p._)(c,nq.h.COPIED,b.TV.limeDimmest),c),n2=(s={},(0,p._)(s,nq.h.ADDED,b.TV.greenStrongest),(0,p._)(s,nq.h.UNTRACKED,b.TV.greenStrongest),(0,p._)(s,nq.h.MODIFIED,b.TV.yellowStrongest),(0,p._)(s,nq.h.DELETED,b.TV.redStrongest),(0,p._)(s,nq.h.RENAMED,b.TV.tealStrongest),(0,p._)(s,nq.h.COPIED,b.TV.limeStrongest),s);function n4(e){return e===nq.h.ADDED||e===nq.h.UNTRACKED||e===nq.h.MODIFIED||e===nq.h.DELETED||e===nq.h.RENAMED||e===nq.h.COPIED}var n3={color:np.statusColor,fontSize:np.fontSizeSmall,minWidth:np.dirStatusIconSize,height:np.dirStatusIconSize},n5=(0,x.X)({fileIcon:[b.l0.fontWeight.bold,b.l0.px(2),b.l0.center,n3],directoryCountIcon:[b.l0.fontWeight.medium,b.l0.borderRadius(4),b.l0.px(2),b.l0.center,n3,{backgroundColor:np.statusBackgroundColor}],directoryDraftBufferIndicator:[b.l0.width(8),b.l0.height(8),b.l0.ml(8),b.l0.border({color:b.TV.foregroundDimmer,width:1}),{borderRadius:"50%"}],fileDraftBufferIndicator:[b.l0.width(8),b.l0.height(8),b.l0.backgroundColor.foregroundDimmer,{borderRadius:"50%"}]});function n6(e){return(0,g.tZ)(w.G,{css:n5.fileIcon,children:(0,g.tZ)(w.G,{children:e.text})})}function n7(e){return(0,g.tZ)(w.G,{css:n5.directoryCountIcon,children:(0,g.tZ)(w.G,{children:e.count})})}var n9=t(74044),n8=t(99149),te=t(36365),tn=t(69170),tt=t(11120),tr=t(33024),ti=t.n(tr),to=t(30826),tl=t.n(to);function ta(e,n,t){return Math.floor(Math.min(n,Math.max(e,t)))}var tu=t(91664),tc=t(48376);function ts(){return(ts=(0,K._)(function(e){var n,t,r,i,o,l,a,u,c,s,f,d;return(0,Q.Jh)(this,function(h){switch(h.label){case 0:var p;if(n=e.parentPath,t=e.overwrite,r=e.fs,i=e.files,o=e.onStart,l=e.onUpload,a=e.onError,u=e.onDone,c=e.envMigrationFlag,i.length>1e6)throw Error("Trying to upload too many files at once.");if(i.reduce(function(e,n){return n.size+e},0)>104857600)throw Error("Total file upload size exceeds maximum limit.");return p=(0,K._)(function(e){var n,i,o,u,s,f,d;return(0,Q.Jh)(this,function(h){switch(h.label){case 0:if(n=e.targetPath,i=e.file,o=e.progress,t)return[3,2];return[4,r.stat(n)];case 1:if(h.sent().exists)return a(u={file:i,path:n,error:"ALREADY_EXIST"}),[2,u];h.label=2;case 2:s=null,h.label=3;case 3:return h.trys.push([3,5,,6]),[4,(0,tu.pV)(i)];case 4:return s=h.sent(),[3,6];case 5:return h.sent(),a(f={file:i,path:n,error:"FILE_READ"}),[2,f];case 6:return d=nC.Z.from(s),[4,r.transferFile(n,d,function(e,n){o.current=n/e},c)];case 7:return h.sent(),l({file:i,path:n}),[2,{path:n,file:i}]}})}),s=function(e){return p.apply(this,arguments)},o(f=i.map(function(e){var t=e.dirPath||e.webkitRelativePath||e.name;return{targetPath:n?n+"/"+t:t,progress:(0,tc.u)(0),file:e}})),[4,Promise.all(f.map(s))];case 1:return d=h.sent(),u({parentPath:n,uploads:d.filter(function(e){return!("error"in e)}),errors:d.reduce(function(e,n){return"error"in n?(0,v._)(e).concat([n]):e},[])}),[2]}})})).apply(this,arguments)}(o=f||(f={})).AlreadyExists="ALREADY_EXIST",o.FileRead="FILE_READ",o.Network="NETWORK";var tf=t(25978),td=t(20314),th=t(72287),tp=t(6191),tv=t(10422);function tg(e,n){if(n===e.path)return!1;var t=n+"/"+(0,I.UO)(e.path);return!(t===e.path||(0,ee.yr)(e.path,n)||(0,ee.yr)(t,e.path))}var ty=(0,Y.cn)(null,(l=(0,K._)(function(e,n,t){var r,i,o,l,a,u,c,s;return(0,Q.Jh)(this,function(f){var d,h,p,v,g,y,m,w;switch(f.label){case 0:if(i=null==(r=e(eA).get(t.to))?void 0:r.children)return[3,2];return[4,e(eD).fs.readDir(t.to)];case 1:if((o=f.sent()).error)return[2];i=o.children,f.label=2;case 2:if(!i)throw Error("Expected children");if(d=t.nodes,h=t.to,p=i,l=d.reduce(function(e,n){var t=(0,I.UO)(n.path),r=(0,I.Il)(n.path),i=null==p?void 0:p.find(function(e){return e.filename===t});return i&&(""===r?J.Ql:r)!==h&&e.push({type:i.type,path:h===J.Ql?i.filename:h+"/"+i.filename}),e},[]),v=t.nodes,g=t.to,!(a=(y=(0,I.RQ)(v)).every(function(e){return tg(e,g)})?y.map(function(e){var n=(0,I.UO)(e.path);return{from:e,to:g===J.Ql?n:g+"/"+n}}):null))return[2];if(u=e(eD).fs,!l.length)return[3,4];if(l.some(function(e){return a.some(function(n){var t=n.from;return(0,ee.yr)(e.path,t.path)})}))return[2];if(!t.overwrite)return null==(c=e(eD).onConflicts)||c({type:"move",nodes:t.nodes,to:t.to,conflicts:l}),[2];return[4,Promise.all(l.map((m=(0,K._)(function(e){var n;return(0,Q.Jh)(this,function(t){switch(t.label){case 0:return[4,e.type===S.Tv.Directory?u.deleteDir(e.path):u.deleteFile(e.path)];case 1:return[2,(n=t.sent()).error?{error:n.error,node:e}:null]}})}),function(e){return m.apply(this,arguments)})))];case 3:if(f.sent().filter(Boolean).length)return[2];f.label=4;case 4:return n(eW,a),[4,Promise.all(a.map((w=(0,K._)(function(e){var n,t,r;return(0,Q.Jh)(this,function(i){switch(i.label){case 0:return n=e.from,t=e.to,[4,n.type===S.Tv.Directory?u.moveDir(n.path,t):u.moveFile(n.path,t)];case 1:return[2,(r=i.sent()).error?{error:r.error,from:n,to:t}:null]}})}),function(e){return w.apply(this,arguments)})))];case 5:if(s=f.sent(),n(eW,[]),s.filter(Boolean).length)return[2];return n(e2,new Map(a.map(function(e){return[e.to,e.from.type]}))),[2]}})}),function(e,n,t){return l.apply(this,arguments)})),tm=t(36556),tw=(0,Y.cn)(null,(a=(0,K._)(function(e,n,t){var r,i,o,l,a,u,c,s,f;return(0,Q.Jh)(this,function(d){switch(d.label){case 0:if(r=e(eD).fs,i=t.parentPath||J.Ql,l=null==(o=e(eA).get(i))?void 0:o.children,t.files.length>1e6)return t.onError("Trying to upload too many files at once. Please try again with fewer files."),[2];if(t.files.reduce(function(e,n){return n.size+e},0)>104857600)return t.onError("Total file upload size exceeds maximum limit. Please try again with smaller files."),[2];if(l)return[3,2];return[4,r.readDir(i)];case 1:if((a=d.sent()).error)return[2];l=a.children,d.label=2;case 2:var h;if(!l)throw Error("Expected children");if(u=(0,v._)(new Set(t.files.map(function(e){return e.dirPath?e.dirPath.split("/")[0]:e.name}))),(s=(c=l.filter(function(e){return u.some(function(n){return n===e.filename})})).length?c.map(function(e){return{path:i===J.Ql?e.filename:i+"/"+e.filename,type:e.type}}):null)&&!t.overwrite)return null==(f=e(eD).onConflicts)||f({type:"upload",files:t.files,to:i,conflicts:c.map(function(e){return{path:i===J.Ql?e.filename:i+"/"+e.filename,type:e.type}})}),[2];if(!s)return[3,4];return[4,Promise.all(s.map((h=(0,K._)(function(e){var n;return(0,Q.Jh)(this,function(t){switch(t.label){case 0:return[4,e.type===S.Tv.Directory?r.deleteDir(e.path):r.deleteFile(e.path)];case 1:return[2,(n=t.sent()).error?{error:n.error,node:e}:null]}})}),function(e){return h.apply(this,arguments)})))];case 3:if(d.sent().filter(Boolean).length)return[2];d.label=4;case 4:return function(e){ts.apply(this,arguments)}({parentPath:t.parentPath,files:t.files,fs:r,onStart:function(e){n(eL,function(n){return(0,H.Uy)(n,function(n){var t=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var a=o.value;n.push(a)}}catch(e){r=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}})})},onUpload:function(e){n(eL,function(n){return(0,H.Uy)(n,function(n){var t=n.findIndex(function(n){return n.targetPath===e.path});-1!==t&&n.splice(t,1)})})},onError:function(e){n(eL,function(n){return(0,H.Uy)(n,function(n){var t=n.findIndex(function(n){return n.targetPath===e.path});-1!==t&&n.splice(t,1)})})},onDone:function(e){var n=e.errors,t=e.parentPath;if(!n.length){tm.kg.info("Successfully uploaded files",{uploadSource:"filetree",parentPath:t});return}}}),[2]}})}),function(e,n,t){return a.apply(this,arguments)})),tx=(0,Y.cn)(0),tb=(0,Y.cn)(null),tD=(0,Y.cn)(function(e){var n=e(tb);if(null===n)return null;var t=e(ed),r=-1!==n?t.get(n):null;return r&&r.depth>0||(null==r?void 0:r.row.type)==="dir"?function(e,n){var t=e.get(n);if(!t)return null;var r=0,i=t.height,o="dir"===t.row.type?t.depth+1:t.depth;if("dir"===t.row.type)o=t.depth+1,r=t.y;else{o=t.depth;for(var l=n-1;l>=0;l--){var a=e.get(l);if(!a)break;if("dir"===a.row.type&&("file"===t.row.type||"uploadFile"===t.row.type?ea(a.row.path,t.row.path):a.row.path===t.row.dir)){i+=a.height,r=a.y;break}a.depth>=t.depth&&(i+=a.height)}}for(var u=n+1;u<e.size;u++){var c=e.get(u);if(!c||c.depth<=("dir"===t.row.type?t.depth:t.depth-1))break;i+=c.height}return{y:r,height:i,depth:o}}(t,n):{y:e(tx),depth:1,height:e(ec).height-8}}),tS="(".concat(np.dropPreviewDepth," - 1) * ").concat(np.gutterWidth),tE=(0,x.X)({root:[b.l0.position.absolute,b.l0.top(0),b.l0.left(0),b.l0.borderRadius(8),{pointerEvents:"none",transform:"translate(calc(".concat(tS,"), ").concat(np.dropPreviewY,")"),width:"calc(100% - ".concat(tS,")"),height:np.dropPreviewHeight,opacity:np.dropPreviewOpacity,outline:"1px dashed ".concat(np.statusColor),outlineOffset:-1}]}),tT=(0,D.memo)(function(){var e=nc(tD),n=nc(tF),t=nc(tz),r=(0,D.useRef)(null);(0,m.j)(r,e,function(e){var n,t,r,i;return i={},(0,p._)(i,nh.dropPreviewY,(null!==(n=null==e?void 0:e.y)&&void 0!==n?n:0)+"px"),(0,p._)(i,nh.dropPreviewHeight,(null!==(t=null==e?void 0:e.height)&&void 0!==t?t:0)+"px"),(0,p._)(i,nh.dropPreviewDepth,null!==(r=null==e?void 0:e.depth.toString())&&void 0!==r?r:"0"),i}),(0,m.j)(r,t,function(e){return(0,p._)({},nh.dropPreviewOpacity,e?"1":"0")}),(0,m.j)(r,n,function(e){return(0,p._)({},nh.statusColor,e?b.TV.accentPrimaryDefault:b.TV.accentNegativeDefault)});var i=(0,tt.T)();return(0,g.tZ)(w.G,{style:{transition:i?void 0:"transform 140ms, width 140ms, height 140ms, opacity 140ms ease-out 60ms"},innerRef:r,css:tE.root})}),tR=(0,Y.cn)(null,function(e,n,t){if(null!==t){var r=!0,i=!1,o=void 0;try{for(var l,a=e(ed)[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var u=(0,R._)(l.value,2),c=u[0],s=u[1];if(!(t.y<s.y)&&!(t.y>s.y+s.height))return n(tb,c),s}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}n(tb,-1)}}),t_=n9.Dy.Object({type:n9.Dy.Literal("nodes"),width:n9.Dy.Number(),height:n9.Dy.Number(),nodes:n9.Dy.Array(n9.Dy.Object({path:n9.Dy.String(),type:n9.Dy.Enum(S.Tv)}))}),tC=(0,Y.cn)(null,function(e,n,t){n(e2,function(e){return(0,H.Uy)(e,function(e){e.set(t.path,t.type)})});var r=[t];if(e(e5))return r;var i=!0,o=!1,l=void 0;try{for(var a,u=e(e2)[Symbol.iterator]();!(i=(a=u.next()).done);i=!0){var c=(0,R._)(a.value,2),s=c[0],f=c[1];s!==t.path&&r.push({path:s,type:f})}}catch(e){o=!0,l=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw l}}return r});function tZ(e){var n=ns(tb),t=ns(tC),r=nu(eE),i=(0,D.useRef)(null),o=(0,R._)((0,td.c)({type:e.type,item:function(){var n,r,o=t(e),l=null!==(r=null===(n=i.current)||void 0===n?void 0:n.getBoundingClientRect())&&void 0!==r?r:{width:160,height:32};return{nodes:o,type:"nodes",width:l.width,height:l.height}},collect:function(n){var t=n.getItem();return{isDragging:!!((null==t?void 0:t.type)==="nodes"&&t.nodes.some(function(n){return n.path===e.path}))}},end:function(){n(null)}}),3),l=o[0],a=o[1],u=o[2],c=l.isDragging;return(0,te.K)(u),{isDragging:c,dragRef:r?void 0:a,sizeRef:i}}var tP=(0,x.X)({root:[b.l0.position.absolute,{left:0,top:0,transform:"translate(".concat(np.dragPreviewX,", ").concat(np.dragPreviewY,")"),pointerEvents:"none"}],item:[b.l0.backgroundColor.backgroundHighest,b.l0.flex.row,b.l0.align.center,b.l0.shadow(3),nv,{height:np.rowHeight,borderRadius:np.borderRadius}],icon:[ng,{marginRight:np.iconTextGap}],text:[ny,b.l0.flex.growAndShrink(1),{color:np.statusColor}],count:[ny,b.l0.backgroundColor.accentPrimaryDimmest,b.l0.color.accentPrimaryStrongest,b.l0.fontWeight.medium,b.l0.position.absolute,b.l0.left("calc(50% - 4px)"),b.l0.top("calc(100% - 4px)"),b.l0.borderRadius("full"),b.l0.px(4),b.l0.center,{fontSize:np.fontSizeSmall}]}),tk=(0,D.memo)(function(e){var n=(0,D.useRef)(null),t=nO(),r=nc(tI);return(0,m.j)(n,r,function(e){var n;return n={},(0,p._)(n,nh.dragPreviewX,(e?e.x:0)+"px"),(0,p._)(n,nh.dragPreviewY,(e?e.y:0)+"px"),n}),(0,m.j)(n,t.horizontalPadding,function(e){return(0,p._)({},nh.horizontalPadding,e+"px")}),(0,m.j)(n,t.fontSize,function(e){return(0,p._)({},nh.fontSize,e+"px")}),(0,m.j)(n,t.fontSizeSmall,function(e){return(0,p._)({},nh.fontSizeSmall,e+"px")}),(0,m.j)(n,t.iconSize,function(e){return(0,p._)({},nh.iconSize,e+"px")}),(0,m.j)(n,t.iconTextGap,function(e){return(0,p._)({},nh.iconTextGap,e+"px")}),(0,m.j)(n,t.borderRadius,function(e){return(0,p._)({},nh.borderRadius,e+"px")}),(0,m.j)(n,t.gutterWidth,function(e){return(0,p._)({},nh.gutterWidth,e+"px")}),(0,g.tZ)(w.G,{innerRef:n,css:tP.root,children:(0,g.BX)(w.G,{css:tP.item,style:{width:e.width,height:e.height},children:[(0,g.tZ)(w.G,{css:tP.icon,children:e.type===S.Tv.File?(0,g.tZ)(_.Z,{path:e.path}):(0,g.tZ)(Z.Z,{})}),(0,g.tZ)(w.G,{css:tP.text,children:(0,I.UO)(e.path)}),e.count>1?(0,g.tZ)(w.G,{css:tP.count,children:e.count}):null]})})}),tI=(0,Y.cn)(null);(0,Y.cn)(function(e){return null!==e(tI)});var tz=(0,Y.cn)(!1),tF=(0,Y.cn)(!1);function tO(){var e=(0,th.f)(function(e){return{item:e.getItem(),isDragging:e.isDragging(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset()}}),n=e.isDragging,t=e.item,r=e.currentOffset,i=ns(tI);if((0,D.useEffect)(function(){i(r?{x:r.x,y:r.y}:null)},[i,r]),!n||!n8.B4.Check(t_,t))return null;var o=t.nodes,l=t.width,a=t.height,u=(0,R._)(o,1)[0];return u?(0,tv.createPortal)((0,g.tZ)(tk,{type:u.type,path:u.path,count:o.length,width:l,height:a}),document.body):null}var tN=[b.l0.position.absolute,b.l0.top(0),b.l0.left(0),{width:"calc(100% - ".concat(np.rowLeftIndent,")"),height:np.rowHeight,transform:"translateY(".concat(np.rowY,")"),marginLeft:np.rowLeftIndent}],tG=(0,x.X)({divider:(0,v._)(tN).concat([nv,b.l0.flex.growAndShrink(1),b.l0.justify.center]),dividerInner:[{borderTop:"1px dashed",borderColor:b.TV.outlineDimmest,height:"70%",justifyContent:"end"}],dividerText:[b.l0.truncate,b.l0.color.foregroundDimmer,{fontSize:np.fontSizeSmall}],error:(0,v._)(tN).concat([b.l0.rowWithGap(4),b.l0.align.center,nv]),emptyDir:(0,v._)(tN).concat([nv,b.l0.color.foregroundDimmest,b.l0.justify.center,{paddingLeft:np.iconSize,paddingRight:np.horizontalPadding}]),row:(0,v._)(tN).concat([b.l0.flex.growAndShrink(1),b.l0.flex.row,b.l0.align.center,z.gU.nofill,(h={backgroundColor:np.nodeBackgroundColor,borderRadius:np.borderRadius,cursor:"pointer","&:focus":{boxShadow:"0 0 0 2px "+b.TV.accentPrimaryDefault,zIndex:1}},(0,p._)(h,nh.hasUnsavedChangesDisplay,"flex"),(0,p._)(h,"@media (hover: hover)",(0,p._)({},nh.contextMenuButtonDisplay,"none")),(0,p._)(h,"&:hover, &:active, &:focus",(d={},(0,p._)(d,nh.contextMenuButtonDisplay,"flex"),(0,p._)(d,nh.hasUnsavedChangesDisplay,"none"),d)),(0,p._)(h,"transitionDuration","0ms"),h)]),rowContent:[b.l0.flex.row,b.l0.align.center,b.l0.flex.growAndShrink(1),nv],uploadRow:(0,v._)(tN).concat([b.l0.flex.growAndShrink(1),b.l0.align.center,b.l0.flex.row,b.l0.align.center,nv,b.l0.border({color:"transparent"}),(0,p._)({backgroundColor:np.nodeBackgroundColor,borderRadius:np.borderRadius},nh.statusColor,b.TV.foregroundDimmer)]),createRow:(0,v._)(tN).concat([b.l0.justify.center]),icon:[ng,{marginRight:np.iconTextGap}],fileInput:[b.l0.flex.row,b.l0.align.center],text:[ny,b.l0.flex.growAndShrink(1),{color:np.statusColor}],emptyDirText:[ny,b.l0.display.flex,b.l0.justify.center,b.l0.flex.growAndShrink(1),{color:np.statusColor}],contextMenuButton:[b.l0.reset.button,b.l0.height("100%"),b.l0.center,b.l0.cursor.pointer,z.gU.filled,ng,{display:np.contextMenuButtonDisplay,borderRadius:"0 ".concat(np.borderRadius," ").concat(np.borderRadius," 0"),transitionDuration:"0ms",backgroundColor:"transparent"}],draftBufferContainer:[{display:np.hasUnsavedChangesDisplay}]});function tU(e){var n,t=(n=e.path,nu((0,nS.Z)(function(){return(0,Y.cn)(function(e){var t;return null!==(t=e(eu).get(n))&&void 0!==t?t:null})},[n]))),r=nu(eO);return(null==t?void 0:t.length)?(0,g.tZ)(C.Z,{size:r,activeUsers:t}):null}function tA(e){var n,t=(n=e.path,nu((0,nS.Z)(function(){return(0,Y.cn)(function(e){var t=[],r=!0,i=!1,o=void 0;try{for(var l,a=e(eu)[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var u=(0,R._)(l.value,2),c=u[0],s=u[1];if(!(0,ee.yr)(n,c))return;t.push.apply(t,(0,v._)(s))}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return t.length?t:null})},[n])));return(null==t?void 0:t.length)?(0,g.tZ)(C.Z,{activeUsers:t}):null}function tM(e){return(0,g.tZ)(w.G,{title:"menu",tag:"button",css:tG.contextMenuButton,onClick:e.onClick,children:(0,g.tZ)(O.Z,{})})}function tL(e,n){var t=nc((0,nS.Z)(function(){return(0,X.kv)(e2,function(e){return e.has(n)})},[n]));(0,m.j)(e,t,function(e){return(0,p._)({},nh.nodeBackgroundColor,e?b.TV.backgroundHigher:"transparent")}),(0,D.useEffect)(function(){var n=function(n){e.current&&e.current.setAttribute("aria-selected",n?"true":"false")};return n(t.current),t.subscribe(n)},[e,t,n])}var tW=(0,D.memo)(function(e){var n,t,r,i,o,l,a,u,c,s,f,d=(0,D.useRef)(null),h=nG(e.index),v=nu((n=e.path,(0,nS.Z)(function(){return(0,X.kv)(eA,function(e){var t;return!!(null===(t=e.get(n))||void 0===t?void 0:t.expanded)})},[n]))),m=nu((t=e.path,(0,nS.Z)(function(){return(0,X.kv)(eA,function(e){var n;return!!(null===(n=e.get(t))||void 0===n?void 0:n.loading)})},[t]))),x=(i=(r=(0,R._)((0,D.useState)(m),2))[0],o=r[1],(0,D.useEffect)(function(){if(!m){o(!1);return}var e=setTimeout(function(){return o(!0)},500);return function(){clearTimeout(e)}},[m]),i),_=ns(ey),C=nu(eh),z=nN(e.path),F=(l=e.path,a=ns(nF),(0,nS.Z)(function(){return function(e){a({event:e,path:l})}},[a,l])),O=(0,R._)(nU({path:e.path,index:e.index}),2),N=O[0],G=O[1],U=e.path===C&&m,A=U?et:(0,I.UO)(e.path),M=tZ({path:e.path,type:S.Tv.Directory}),L=M.dragRef,W=M.sizeRef,j=M.isDragging;tL(d,e.path);var B=(u=e.path,nu((0,nS.Z)(function(){return(0,X.kv)(ep,function(e){return e?function(e,n){var t=[],r=!0,i=!1,o=void 0;try{for(var l,a=e[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var u=(0,R._)(l.value,2),c=u[0],s=u[1],f=s.index,d=s.worktree;(0,ee.yr)(n,c)&&t.push({path:c,index:f,worktree:d})}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}if(0===t.length)return null;var h=t.every(function(e){return e.index===nq.h.ADDED||e.worktree===nq.h.UNTRACKED})?nq.h.ADDED:nq.h.MODIFIED;if(!n4(h))return null;var p=t.length;return{color:n2[h],backgroundColor:n1[h],count:p}}(e,u):null},n_())},[u]))),V=nu(eS);return(0,g.BX)(w.G,{style:(0,T._)((0,E._)({},null==h?void 0:h.style),(f={},(0,p._)(f,nh.statusColor,null!==(c=null==B?void 0:B.color)&&void 0!==c?c:b.TV.foregroundDimmer),(0,p._)(f,nh.statusBackgroundColor,null==B?void 0:B.backgroundColor),(0,p._)(f,"opacity",j?.1:void 0),f)),tabIndex:z,role:"treeitem","aria-label":A,"aria-expanded":v,"aria-level":(null!==(s=null==h?void 0:h.depth)&&void 0!==s?s:0)+1,css:tG.row,onFocus:function(){return G(e.path)},innerRef:(0,y.l)(d,N,W,e.pending?void 0:L),onContextMenu:V?function(n){V(n,{path:e.path,type:S.Tv.Directory})}:void 0,onKeyDown:e.pending?void 0:function(n){"Enter"===n.key&&_(e.path)},onClick:e.pending?void 0:function(e){e.currentTarget===e.target&&F(e)},children:[(0,g.BX)(w.G,{title:e.path,css:tG.rowContent,onClick:e.pending?void 0:F,children:[(0,g.tZ)(w.G,{css:tG.icon,children:U||x&&!v?(0,g.tZ)(k.Z,{}):(0,g.tZ)(g.HY,{children:v?(0,g.tZ)(P.Z,{color:b.TV.foregroundDimmer}):(0,g.tZ)(Z.Z,{color:b.TV.foregroundDimmer})})}),(0,g.tZ)(w.G,{css:tG.text,children:A}),e.uploadProgress?(0,g.tZ)(nJ,{uploadProgress:e.uploadProgress}):null,B?(0,g.tZ)(n7,{count:B.count}):null,v?null:(0,g.tZ)(tA,{path:e.path}),null]}),V?(0,g.tZ)(tM,{onClick:function(n){V(n,{path:e.path,type:S.Tv.Directory})}}):null]})}),tj=(0,D.memo)(function(e){var n,t,r,i,o,l,a,u,c=(0,D.useRef)(null),s=nG(e.index),f=(n=e.path,t=nf(eD),r=ns(e6),i=ns(ef),(0,nS.Z)(function(){return{onClick:function(e){var o=t(),l=o.onFileSelect,a=o.multiselectModifierKey,u=a?nz(e,a):void 0;r({node:{path:n,type:S.Tv.File},mode:u}),i(n),u||null==l||l({path:n,event:e,type:"click"})},onDoubleClick:function(e){var r=t().onFileDoubleClick;null==r||r(e,n)}}},[n,t,i,r])),d=f.onClick,h=f.onDoubleClick,v=nN(e.path),m=ns(ey),x=(0,R._)(nU({path:e.path,index:e.index}),2),C=x[0],Z=x[1],P=(0,I.UO)(e.path),k=tZ({path:e.path,type:S.Tv.File}),z=k.dragRef,F=k.sizeRef,O=k.isDragging;tL(c,e.path);var N=(o=e.path,nu((0,nS.Z)(function(){return(0,X.kv)(ep,function(e){return e?function(e,n){var t=null==e?void 0:e.get(n);if(!t)return null;var r=null;return t.worktree!==nq.h.UNMODIFIED?r=t.worktree:t.index!==nq.h.UNMODIFIED&&(r=t.index),r&&n4(r)?{color:n2[r],text:n0[r]}:null}(e,o):null},n_())},[o]))),G=nu(eS);return(0,g.BX)(w.G,{style:(0,T._)((0,E._)({},null==s?void 0:s.style),(u={},(0,p._)(u,nh.statusColor,null!==(l=null==N?void 0:N.color)&&void 0!==l?l:b.TV.foregroundDimmer),(0,p._)(u,"opacity",O?.1:void 0),u)),tabIndex:v,dataCy:"filetree-file",css:tG.row,onFocus:function(){return Z(e.path)},innerRef:(0,y.l)(c,C,F,e.pending?void 0:z),role:"treeitem","aria-label":P,"aria-level":(null!==(a=null==s?void 0:s.depth)&&void 0!==a?a:0)+1,onDoubleClick:e.pending?void 0:h,onContextMenu:G?function(n){G(n,{path:e.path,type:S.Tv.File})}:void 0,onKeyDown:e.pending?void 0:function(n){"Enter"===n.key&&m(e.path)},onClick:e.pending?void 0:function(e){e.currentTarget===e.target&&d(e)},children:[(0,g.BX)(w.G,{title:e.path,css:tG.rowContent,onClick:e.pending?void 0:d,children:[(0,g.tZ)(w.G,{css:tG.icon,children:(0,g.tZ)(_.Z,{path:e.path})}),(0,g.tZ)(w.G,{css:tG.text,children:P}),N?(0,g.tZ)(n6,{text:N.text}):null,(0,g.tZ)(tU,{path:e.path}),null]}),G?(0,g.tZ)(tM,{onClick:function(n){G(n,{path:e.path,type:S.Tv.File})}}):null]})}),tB=(0,D.memo)(function(e){var n=nG(e.index);return(0,g.tZ)(w.G,{css:tG.divider,style:null==n?void 0:n.style,role:"treeitem",children:(0,g.tZ)(w.G,{css:tG.dividerInner,children:(0,g.tZ)(w.G,{css:tG.dividerText,children:e.label})})})}),tV=(0,D.memo)(function(e){var n=nG(e.index);return(0,g.BX)(w.G,{css:tG.error,style:null==n?void 0:n.style,role:"treeitem",children:[(0,g.tZ)(N.Z,{}),(0,g.tZ)(F.xv,{multiline:!1,children:e.message})]})}),tH=(0,D.memo)(function(e){var n=nG(e.index);return(0,g.tZ)(w.G,{css:tG.emptyDir,style:null==n?void 0:n.style,role:"treeitem",children:(0,g.tZ)(w.G,{css:tG.emptyDirText,children:en})})}),tX=(0,D.memo)(function(e){var n=nG(e.index);return(0,g.tZ)(w.G,{css:tG.createRow,style:null==n?void 0:n.style,role:"treeitem",children:(0,g.tZ)(nH,{dir:e.dir})})}),tK=(0,D.memo)(function(e){var n=nG(e.index),t=(0,I.UO)(e.path);return(0,g.tZ)(w.G,{style:null==n?void 0:n.style,css:tG.createRow,role:"treeitem","aria-label":t,children:(0,g.tZ)(n$,{path:e.path,fileType:e.fileType})})}),tQ=(0,D.memo)(function(e){var n=nG(e.index),t=(0,I.UO)(e.path);return(0,g.BX)(w.G,{style:null==n?void 0:n.style,css:tG.uploadRow,role:"treeitem","aria-label":t,children:[(0,g.tZ)(w.G,{css:tG.icon,children:(0,g.tZ)(_.Z,{path:e.path})}),(0,g.tZ)(w.G,{css:tG.text,children:t}),(0,g.tZ)(nQ,{progress:e.progress})]})}),tY=(0,D.memo)(function(e){var n,t=nu((n=e.index,(0,nS.Z)(function(){return(0,Y.cn)(function(e){var t,r;return null!==(r=null===(t=e(ed).get(n))||void 0===t?void 0:t.row)&&void 0!==r?r:null})},[n])));return t?"error"===t.type?(0,g.tZ)(tV,{index:e.index,message:t.message}):"divider"===t.type?(0,g.tZ)(tB,{index:e.index,label:t.label}):"emptyDir"===t.type?(0,g.tZ)(tH,{index:e.index}):"create"===t.type?(0,g.tZ)(tX,{index:e.index,dir:t.dir}):"uploadFile"===t.type?(0,g.tZ)(tQ,{index:e.index,path:t.path,progress:t.progress}):t.rename?(0,g.tZ)(tK,{index:e.index,path:t.path,fileType:"file"===t.type?S.Tv.File:S.Tv.Directory}):"file"===t.type?(0,g.tZ)(tj,{index:e.index,path:t.path,pending:!!t.pending}):(0,g.tZ)(tW,{index:e.index,path:t.path,pending:!!t.pending,uploadProgress:t.uploadProgress}):null}),tJ=[np.horizontalPadding,np.rowLeftIndent,np.iconSize,np.iconTextGap].join(" + "),t$=(0,x.X)({root:[b.l0.overflow("hidden"),b.l0.height(0),{pointerEvents:"none"}],file:[{paddingLeft:"calc(".concat(tJ,")"),paddingRight:np.horizontalPadding}]}),tq=(0,D.memo)(function(){var e=nu(e$);return e?(0,g.tZ)(w.G,{css:t$.root,children:e.map(function(e){var n=e.type,t=e.text,r=e.depth,i=(0,p._)({},nh.rowLeftIndent,"calc(".concat(r," * ").concat(np.gutterWidth,")")),o=n+r;return"divider"===n?(0,g.tZ)(w.G,{style:i,css:tG.dividerInner,children:(0,g.tZ)(F.xv,{css:tG.dividerInner,multiline:!1,children:t.toUpperCase()})},o):(0,g.tZ)(w.G,{css:t$.file,style:i,children:"create"===n?(0,g.tZ)(nX,{create:function(){}}):(0,g.tZ)(w.G,{css:tG.text,children:t.toUpperCase()})},o)})}):null}),t0=(0,Y.cn)(null),t1=(0,Y.cn)(null,function(e,n,t){var r=[t];if(!e(e5)){var i=!0,o=!1,l=void 0;try{for(var a,u=e(e2)[Symbol.iterator]();!(i=(a=u.next()).done);i=!0){var c=(0,R._)(a.value,2),s=c[0],f=c[1];t.path!==s&&r.push({path:s,type:f})}}catch(e){o=!0,l=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw l}}}n(t0,(0,I.RQ)(r))});function t2(){return(t2=(0,K._)(function(e,n){return(0,Q.Jh)(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(n){return n.type===S.Tv.Directory?e.deleteDir(n.path):e.deleteFile(n.path)}))];case 1:return[2,{error:t.sent().filter(function(e){return e.error}).length?"Something went wrong deleting files":null}]}})})).apply(this,arguments)}var t4=t(75958),t3=t(86763),t5=t.n(t3),t6=n9.Dy.Enum(S.Tv),t7=n9.Dy.Object({filename:n9.Dy.String({minLength:1}),type:t6}),t9=n9.Dy.Object({scrollOffset:n9.Dy.Number({minimum:0}),dirInfo:n9.Dy.Record(n9.Dy.String(),n9.Dy.Object({expanded:n9.Dy.Boolean(),children:n9.Dy.Array(t7)}))});function t8(e){return"repl:workspace:filetree:"+e}var re=n9.Dy.Array(n9.Dy.String()),rn="repl:workspace:filetree:savedKeys",rt=(0,X.kv)(eD,function(e){return e.localCacheKey?t8(e.localCacheKey):null}),rr=(0,Y.cn)(null,function(e){var n=e(eD),t=n.localCacheKey,r=n.filter;if(t){var i=null!==(f=null===(s=e(ne))||void 0===s?void 0:s.scrollOffset)&&void 0!==f?f:0,o=e(eA),l=!1,a=!0,u=!1,c=void 0;try{for(var s,f,d,h=o[Symbol.iterator]();!(a=(d=h.next()).done);a=!0){var p=(0,R._)(d.value,2)[1].children;if(l=!!(null==p?void 0:p.length))break}}catch(e){u=!0,c=e}finally{try{a||null==h.return||h.return()}finally{if(u)throw c}}if(l){var v=function(e,n){var t={dirInfo:Object.create(null),scrollOffset:e.scrollOffset},r=!0,i=!1,o=void 0;try{for(var l,a=e.dirInfo[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var u=(0,R._)(l.value,2),c=u[0],s=u[1],f=s.expanded,d=s.children;if(d){var h=d.filter(n);h.length&&(t.dirInfo[c]={expanded:f,children:h})}}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return t}({dirInfo:o,scrollOffset:i},r),g=t8(t),y=(S=t4.Z.get(rn),n8.B4.Check(re,S)?S:null);if(y){var m=y.filter(function(e){return e!==g});m.unshift(g);var w=m.splice(20),x=!0,b=!1,D=void 0;try{for(var S,E,T=w[Symbol.iterator]();!(x=(E=T.next()).done);x=!0){var _=E.value;t4.Z.remove(_)}}catch(e){b=!0,D=e}finally{try{x||null==T.return||T.return()}finally{if(b)throw D}}t4.Z.set(rn,m)}else t4.Z.set(rn,[g]);return t4.Z.set(t8(t),v)}}}),ri=(0,x.X)({content:[b.l0.px(2),b.l0.position.relative,{overflowY:"auto",height:"100%",minHeight:np.minHeight}],scroll:[{position:"relative",height:np.scrollHeight}],root:[b.l0.rowWithGap(0),b.l0.align.center],gutter:[b.l0.position.absolute,b.l0.top(0),b.l0.left(0),b.l0.reset.button,b.l0.align.end,b.l0.cursor.pointer,{width:np.gutterWidth,"& > div":[b.l0.height("100%"),b.l0.width(1),{marginRight:"25%",opacity:.2,backgroundColor:b.TV.foregroundDimmest}],"&:hover > div":{backgroundColor:b.TV.accentPrimaryDefault,opacity:1}}]}),ro=(0,D.memo)(function(e){var n,t,r,i,o,l,a,u,c,s,f,d,h,x,b,E,T,_,C,Z,P,k,z,F=nu(ed),O=nO();(0,m.j)(e.scrollRef,O.fontSize,function(e){var n;return n={},(0,p._)(n,nh.fontSize,e+"px"),(0,p._)(n,nh.dirStatusIconSize,e+"px"),n}),(0,m.j)(e.scrollRef,O.fontSizeSmall,function(e){return(0,p._)({},nh.fontSizeSmall,e+"px")}),(0,m.j)(e.scrollRef,O.iconSize,function(e){return(0,p._)({},nh.iconSize,e+"px")}),(0,m.j)(e.scrollRef,O.iconTextGap,function(e){return(0,p._)({},nh.iconTextGap,e+"px")}),(0,m.j)(e.scrollRef,O.horizontalPadding,function(e){return(0,p._)({},nh.horizontalPadding,e+"px")}),(0,m.j)(e.scrollRef,O.borderRadius,function(e){return(0,p._)({},nh.borderRadius,e+"px")}),(0,m.j)(e.scrollRef,O.scrollHeight,function(e){return(0,p._)({},nh.scrollHeight,e+"px")}),(0,m.j)(e.scrollRef,O.gutterWidth,function(e){return(0,p._)({},nh.gutterWidth,e+"px")}),(0,m.j)(e.scrollRef,O.minHeight,function(e){return(0,p._)({},nh.minHeight,e+"px")});var N=ns(eV),G=(n=ns(tR),t=ns(tb),r=(0,D.useRef)(null),i=(0,D.useRef)(null),o=(0,D.useRef)(null),l=(0,tn.Z)().showError,a=nf(tx),u=ns(tw),c=ns(ty),s=ns(tF),f=(0,D.useRef)(null),d=nf(eA),h=nf(eh),x=ns(ec),b=ns(eY),E=nu(eE),_=(T=(0,R._)((0,tf.L)(function(){return{accept:[S.Tv.File,S.Tv.Directory,tp.FILE],canDrop:function(){return!0},hover:function(e,t){var l=o.current;if(l){i.current&&function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{scrollZoneSize:{w:50,h:50},scrollVelocity:{x:50,y:50},scrollUpdateThrottle:100},r=t.scrollZoneSize,i=t.scrollVelocity,o=t.scrollUpdateThrottle,l=tl()(function(){var t=n.getClientOffset();if(!t)return[0,0];var o=t.x,l=t.y,a=e.getBoundingClientRect(),u=a.x,c=a.y,s=a.width,f=a.height,d=Math.min(s/2,r.w),h=Math.min(f/2,r.h),p=function(e,n){var t=(0,R._)(n,2),r=t[0],i=t[1];return ti()(e,r[0],r[1])?(e-r[1])/(r[1]-r[0]):ti()(e,i[0],i[1])?(e-i[0])/(i[1]-i[0]):0};return[p(o,[[u,u+d],[u+s-d,u+s]])*i.x,p(l,[[c,c+h],[c+f-h,c+f]])*i.y]},o,{trailing:!1})();if(l){var a=(0,R._)(l,2),u=a[0],c=a[1];if(0!==u||0!==c){var s=e.scrollLeft,f=e.scrollTop,d=e.scrollWidth,h=e.scrollHeight,p=e.clientWidth,v=e.clientHeight;requestAnimationFrame(function(){e.scrollTop=ta(0,d-p,s+u),e.scrollTop=ta(0,h-v,f+c)})}}}(i.current,t);var u=t.getClientOffset();if(u){var c=n({x:u.x-l.x,y:u.y-l.y+a()});c?"file"===c.row.type||"uploadFile"===c.row.type?r.current=(0,I.Il)(c.row.path)||J.Ql:"dir"===c.row.type?r.current=c.row.path:r.current=c.row.dir:r.current=h();var p="nodes"!==e.type||(0,I.RQ)(e.nodes).every(function(e){var n;return tg(e,null!==(n=r.current)&&void 0!==n?n:h())});if(s(p),(null==c?void 0:c.row.type)!=="dir"){f.current&&(clearTimeout(f.current.timer),f.current=null);return}var v=c.row.path;if(f.current){if(f.current.dir===v)return;clearTimeout(f.current.timer),f.current=null}if(p){var g=setTimeout(function(){var e;null!==(e=d().get(v))&&void 0!==e&&e.expanded||b(v)},400);f.current={dir:v,timer:g}}}}},drop:function(e,n){var t,i=null!==(t=r.current)&&void 0!==t?t:h();if("nodes"===e.type){c({to:i,nodes:e.nodes}),r.current=null;return}e.dirContent.then(function(e){var n=e.reduce(function(e,n){return n.size+e},0);if(e.length>1e6){l("Trying to upload too many files at once. Please try again with fewer files.");return}if(n>104857600){l("Total file upload size exceeds maximum limit. Please try again with smaller files.");return}u({parentPath:i===J.Ql?void 0:i,files:e.filter(Boolean),onError:l})}),r.current=null},collect:function(e){return{isOver:e.isOver()}}}},[]),2))[0].isOver,C=T[1],Z=ns(tz),(0,D.useEffect)(function(){if(Z(_),_){var e,n=null===(e=i.current)||void 0===e?void 0:e.getBoundingClientRect();o.current=n?{x:n.x,y:n.y}:null,n&&x({width:n.width,height:n.height});return}f.current&&(clearTimeout(f.current.timer),f.current=null),r.current=null,t(null)},[Z,_,t,x]),P=ns(tx),(0,D.useEffect)(function(){var e=i.current;if(e){var n=tl()(function(){P(e.scrollTop)},200);return e.addEventListener("scroll",n),function(){n.cancel(),e.removeEventListener("scroll",n)}}},[P]),{dropRef:E?void 0:C,containerRef:i}),U=G.dropRef,A=G.containerRef,M=ns(e7),L=nu(eS),W=nu(eh);return k=ns(nn),z=nc(e3),(0,D.useEffect)(function(){var e=function(){z.current&&k(z.current)};return e(),z.subscribe(e)},[z,k]),(0,g.BX)(w.G,{css:ri.content,innerRef:(0,y.l)(e.scrollRef,U,A),onKeyDown:N,onContextMenu:L?function(e){e.target===e.currentTarget&&L(e,{type:S.Tv.Directory,path:W})}:void 0,onClick:function(e){e.target===e.currentTarget&&M()},children:[(0,g.tZ)(tq,{}),(0,g.BX)(w.G,{css:ri.scroll,role:"tree",children:[(0,v._)(F.values()).map(function(e){var n=e.key,t=e.index;return(0,g.tZ)(tY,{index:t},n)}),(0,g.tZ)(ra,{}),(0,g.tZ)(tT,{}),(0,g.tZ)(tO,{})]})]})}),rl=(0,D.memo)(function(){var e,n,t,r,i,o,l,a,u,c,s,f,d,h,p,y,m,w,x,b,S=(n=(0,D.useRef)(null),t=nu(ej),r=nf(ej),i=nf(eT),o=(0,nS.Z)(function(){return function(e){var n=r()[e];return n?eR(i(),n.type):0}},[r,i]),l=nf(eD),a=nc(eB),u=(0,D.useRef)(nu(ev)),c=(0,nb.MG)({count:t.length,overscan:null!==(e=l().overscan)&&void 0!==e?e:100,getScrollElement:function(){return n.current},getItemKey:function(e){var n=t[e];return n?"error"===n.type?"error:"+n.dir+n.message:"divider"===n.type?"divider:"+n.dir+n.label:"emptyDir"===n.type?"emptyDir:"+n.dir:"create"===n.type?"create:"+n.dir:n.type+":"+n.path:""},estimateSize:o,rangeExtractor:function(e){var n=(0,nD.MK)(e);return null===a.current||n.includes(a.current)||void 0===t[a.current]?n:(0,v._)(n).concat([a.current])}}),(0,D.useEffect)(function(){u.current&&c.scrollToOffset(u.current)},[c,u]),s=ns(eb),f=c.getVirtualItems(),d=c.getTotalSize(),(0,D.useEffect)(function(){s({rows:f,scrollHeight:d})},[s,f,d]),h=nu(ex),(0,D.useEffect)(function(){if(h){var e=function(e){null!==e&&c.getVirtualItems()[e]&&c.scrollToIndex(e,{align:"auto",behavior:"auto"})};return setTimeout(function(){return e(a.current)}),a.subscribe(e)}},[c,a,h]),p=ns(ne),(0,D.useEffect)(function(){p(c)},[p,c]),{scrollRef:n,virtualizer:c}).scrollRef;return y=nc(t0),m=nf(eD),(0,D.useEffect)(function(){return y.subscribe(function(e){if(e){var n=m().onDeleteNodes;n&&n({nodes:e,confirm:function(){return function(e,n){return t2.apply(this,arguments)}(m().fs,e)}})}})},[m,y]),w=nu(rt),x=nc(eA),b=ns(rr),(0,D.useEffect)(function(){if(w){var e,n,t=null,r=null!==(e=window.requestIdleCallback)&&void 0!==e?e:window.requestAnimationFrame,i=null!==(n=window.cancelIdleCallback)&&void 0!==n?n:window.cancelAnimationFrame,o=t5()(function(){t&&i(t),t=r(b)},1e3),l=x.subscribe(o);return document.addEventListener("visibilitychange",b),document.addEventListener("beforeunload",b),function(){o.cancel(),t&&i(t),document.removeEventListener("visibilitychange",b),document.removeEventListener("beforeunload",b),l(),b()}}},[w,x,b]),(0,g.tZ)(ro,{scrollRef:S})}),ra=(0,D.memo)(function(){var e=nu(ew),n=ns(eK);return(0,g.tZ)(g.HY,{children:e.map(function(e){return(0,g.tZ)(w.G,{tag:"button",onClick:function(){return n(e.dir)},css:ri.gutter,style:{height:e.height,transform:"translate(calc(".concat(e.depth," * ").concat(np.gutterWidth,"), ").concat(e.y,"px)")},children:(0,g.tZ)(w.G,{})},"gutter"+e.dir+e.depth+e.y)})})});function ru(e){var n,t,r;return n=(0,tn.Z)().showError,t=(0,R._)((0,D.useState)(function(){var t,r,i,o,l=(0,Y.MT)();l.set(eD,e);var a=null!==(t=e.root)&&void 0!==t?t:J.Ql,u=e.localCacheKey?(i=e.localCacheKey,o=t4.Z.get(t8(i)),n8.B4.Check(t9,o)?{dirInfo:new Map(Object.entries(o.dirInfo)),scrollOffset:o.scrollOffset}:null):null;u&&l.set(ev,u.scrollOffset);var c=null!==(r=null==u?void 0:u.dirInfo)&&void 0!==r?r:new Map;return c.has(a)||c.set(a,{expanded:!0}),l.set(eA,c),e.focusedPath&&l.set(ef,e.focusedPath),{store:l,create:function(e,n){if(n){l.set(eq,{parentPath:n,fileType:e});return}var t=a,r=l.get(e4);(null==r?void 0:r.type)===S.Tv.File?t=(0,I.Il)(r.path)||J.Ql:(null==r?void 0:r.type)===S.Tv.Directory&&(t=r.path),l.set(eq,{parentPath:t,fileType:e})},setPresenceState:function(e){l.set(eu,e)},setFileStatus:function(e){l.set(ep,e)},rename:function(e){l.set(ey,e)},move:function(e){l.set(ty,e)},upload:function(e){l.set(tw,(0,T._)((0,E._)({},e),{onError:n}))},onLoad:function(n){var t=e.fs.watchDir(a,{onChange:function(){n({error:null}),t()},onError:function(e){n({error:e}),t()}});return t},select:function(e){return null===e?l.set(e7):l.set(e8,e)},scrollToPath:function(e){return l.set(nn,e)},hasLocalCache:!!u,getChildren:function(e){var n,t;return null!==(t=null===(n=l.get(eA).get(e))||void 0===n?void 0:n.children)&&void 0!==t?t:null},getSelectedNode:function(){return l.get(e4)},getSelectedNodes:function(){return l.get(e2)},deleteNodes:function(e){l.set(t1,e)},collapse:function(e){return l.set(eK,e)},getExpandedDirs:function(e){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:J.Ql,t=new Set,r=!0,i=!1,o=void 0;try{for(var l,a=e[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var u=(0,R._)(l.value,2),c=u[0],s=u[1];c!==n&&s.expanded&&(n===J.Ql||(0,ee.yr)(n,c))&&t.add(c)}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return 0===t.size?null:t}(l.get(eA),e)}}}),1)[0],(0,D.useEffect)(function(){t.store.set(eD,e)},[t.store,e]),(0,D.useEffect)(function(){var e=!0,n=!1,r=void 0;try{for(var i,o=t.store.get(eA)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var l=(0,R._)(i.value,2),a=l[0];l[1].expanded&&t.store.set(eY,a)}}catch(e){n=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return function(){var e=!0,n=!1,r=void 0;try{for(var i,o=t.store.get(eA)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var l,a=(0,R._)(i.value,2),u=(a[0],a[1]);null===(l=u.disposeWatcher)||void 0===l||l.call(u)}}catch(e){n=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},[t.store]),r=(0,V.Z)(e.onLoad),(0,D.useEffect)(function(){return t.onLoad(function(e){var n;return null===(n=r.current)||void 0===n?void 0:n.call(r,e)})},[t,r]),t}function rc(e){return(0,g.tZ)(nl,{store:e.store,children:(0,g.tZ)(rl,{})})}},64510:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(41733),i=t(4216),o=t(77865),l=t(14872),a=t(36647),u=t(50761),c=t(47713),s=t(50959).memo(o.ZP);function f(e){var n=e.source,t=e.sourcePos,o=e.fs,f=e.path,d=e.onCodeInsert,h=(0,u.l)(o,f),p=(0,l.Z)(n,100),v=(0,a.Z)(function(){return{img:h,a:function(e){return(0,i.tZ)(c.Z,(0,r._)({filePath:f},e))}}},[h,f]);return(0,i.tZ)(s,{onCodeInsert:d,components:v,sourcePos:t,children:p})}},22706:function(e,n,t){t.d(n,{A:function(){return h},Z:function(){return d}});var r=t(66626),i=t(4216),o=t(85763),l=t(82230),a=t(38057),u=t(29318),c=t(72093),s=t(50959),f=t(36559);function d(e){var n=e.fs,t=e.filePath,d=(0,r._)((0,s.useState)(null),2),p=d[0],v=d[1],g=(0,r._)((0,s.useState)(!0),2),y=g[0],m=g[1];return((0,s.useEffect)(function(){var e=n.watchFile(t,{onChange:function(e){v(e.toString("base64")),m(!1)},onError:function(){v(null),m(!1)},onMoveOrDelete:function(){v(null),m(!1)}});return function(){e(),m(!0),v(null)}},[n,t]),y)?(0,i.tZ)(u.Z,{}):p?(0,i.BX)(i.HY,{children:[(0,i.tZ)(h,{content:p,mime:(0,f.yC)(t)}),(0,i.tZ)(o.hU,{alt:"Download",css:[c.l0.position.absolute,c.l0.bottom(8),c.l0.right(8),c.l0.p(16)],children:(0,i.tZ)("a",{href:"data:text/plain;base64,".concat(p),download:(0,f.UO)(t),css:[c.l0.color.foregroundDimmer],children:(0,i.tZ)(a.Z,{})})})]}):(0,i.tZ)(l.xv,{multiline:!1,children:"Failed to load media file"})}var h=function(e){var n=e.content,t=e.mime,r=void 0===t?"":t;if(r.startsWith("video/"))return(0,i.tZ)("video",{src:"data:".concat(r,";base64,").concat(n),css:{maxHeight:"100%",maxWidth:"100%"},controls:!0});if(r.startsWith("image/"))return(0,i.tZ)("img",{alt:"Preview",src:"data:".concat(r,";base64,").concat(n),css:{width:"80%",height:"80%",objectFit:"contain",imageRendering:"pixelated"}});if(r.startsWith("audio/")){var o=r;return"audio/wave"===o&&(o="audio/wav"),(0,i.tZ)("audio",{src:"data:".concat(o,";base64,").concat(n),css:{maxHeight:"100%",maxWidth:"100%"},controls:!0})}return"application/pdf"===r?(0,i.tZ)("object",{data:"data:".concat(r,";base64,").concat(n),type:"application/pdf",css:{width:"100%",height:"100%",flex:1},children:(0,i.tZ)("embed",{src:"data:".concat(r,";base64,").concat(n),type:"application/pdf",css:{width:"100%",height:"100%"}})}):(0,i.tZ)(l.xv,{multiline:!1,children:"File type not supported."})}},44167:function(e,n,t){t.d(n,{T:function(){return y}});var r=t(39271),i=t(57604),o=t(81199),l=t(66048),a=t(50959),u=t(90005),c=t(33444),s=t(41733),f=t(21262),d=t(71440),h=t(58995);function p(){var e=(0,f._)(["\n  query ShouldHideFileInWorkspace($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isProjectFork\n        isModelSolution\n        isModelSolutionFork\n      }\n    }\n  }\n"]);return p=function(){return e},e}var v={},g=(0,d.Ps)(p()),y=function(){var e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,r.Z)(),f=(0,o.Z)().dotReplit,d=(e=(0,s._)({},v,{variables:{replId:t}}),h.a(g,e)),p=d.data,y=d.loading,m=(null==p?void 0:p.repl.__typename)==="Repl"&&(p.repl.isProjectFork||p.repl.isModelSolution||p.repl.isModelSolutionFork),w=(0,i.P)(f),x=(0,l.t9)();return(0,a.useCallback)(function(e){return!!((m||y)&&(0,c.TI)(e)||(0,c.Xl)(e))||!!n&&!x&&((0,c.uC)(e)||(0,u.Ci)(e)||(0,u.cJ)(e)||(0,c.lv)(e,w))},[m,y,x,w,n])}},15493:function(e,n,t){t.d(n,{W:function(){return d}});var r=t(27387),i=t(96583),o=t(66626),l=t(90005),a=t(36559),u=t(73372),c=t(57253);function s(){return(s=(0,r._)(function(e){var n,t,s,f,d,h,p,v,g;function y(){return(y=(0,r._)(function(){var e;return(0,i.Jh)(this,function(t){switch(t.label){case 0:if("function"==typeof n)return[2,n()];return[4,n.getConfig()];case 1:return[2,null===(e=t.sent().config)||void 0===e?void 0:e.entrypoint]}})})).apply(this,arguments)}function m(){return(m=(0,r._)(function(){var e,n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:if(!(e=d))return[2,null];if(!(0,a.Il)(e))return[2,v.includes(e)?e:null];return[4,t.stat(e)];case 1:return[2,(n=r.sent()).exists&&n.type===c.Tv.File?e:null]}})})).apply(this,arguments)}return(0,i.Jh)(this,function(r){switch(r.label){case 0:return n=e.dotReplit,[4,Promise.all([(t=e.fs).readDir(u.Ql),function(){return y.apply(this,arguments)}()])];case 1:if(f=(s=o._.apply(void 0,[r.sent(),2]))[0],d=s[1],!f||f.error)throw Error("Could not read files");return p=(h=f.children).find(function(e){return e.type===c.Tv.File&&e.filename.toLowerCase().endsWith("readme.md")}),v=h.filter(function(e){return e.type===c.Tv.File}).map(function(e){return e.filename}),[4,function(){return m.apply(this,arguments)}()];case 2:var i,w;if(g=r.sent())return[2,{entrypoint:g,readmeFile:null==p?void 0:p.filename}];return[2,{entrypoint:(w=(i=v).find(function(e){return e.toLowerCase().endsWith("readme.md")}))?w:i.includes("Makefile")?"Makefile":i.find(a.gK)||i.find(function(e){return![".replit","replit.nix"].includes(e)&&!(0,l.Ci)(e)&&!(0,l.cJ)(e)}),readmeFile:null==p?void 0:p.filename}]}})})).apply(this,arguments)}var f=t(27197);function d(e){return h.apply(this,arguments)}function h(){return(h=(0,r._)(function(e){return(0,i.Jh)(this,function(n){if(!f.l)throw Error("Expected apollo client");return[2,function(e){return s.apply(this,arguments)}(e)]})})).apply(this,arguments)}},79760:function(e,n,t){function r(e){var n=document.createElement("canvas"),t=n.getContext("2d");if(n.width=e.width,n.height=e.height,!t)throw Error("failed to get canvas ctx");return{version:"1",width:e.width,height:e.height,palette:[[0,0,0,255],[255,255,255,255],[255,255,128,255],[255,128,255,255],[0,128,128,255],[128,0,255,255],[255,0,128,255],[0,255,255,255]],anims:{},frames:e.frames.map(function(r){var i=new window.ImageData(new Uint8ClampedArray(r.pixels),e.width,e.height);return t.putImageData(i,0,0),n.toDataURL()})}}function i(e){return new Promise(function(n,t){var r=new window.Image;r.src=e,r.onload=function(){n(r)},r.onerror=t})}function o(e){return new Promise(function(n,t){Promise.all(e.frames.map(i)).then(function(r){var i=document.createElement("canvas");i.width=e.width,i.height=e.height;var o=i.getContext("2d");if(!o){t(Error("failed to get canvas ctx"));return}n({frames:r.map(function(n){return o.drawImage(n,0,0),{pixels:Array.from(o.getImageData(0,0,e.width,e.height).data),width:e.width,height:e.height}}),preview:e.frames[0],width:e.width,height:e.height})}).catch(t)})}t.d(n,{C:function(){return r},u:function(){return o}})},86976:function(e,n,t){t.d(n,{z:function(){return o}});var r=t(90005),i=t(73372);function o(e){var n=e.siblingNames,t=e.fileName,o=e.initialValue,l=e.parentPath;if(t.includes("/"))return"File names cannot include forward slashes";if("."===t||".."===t)return'File names cannot be "'.concat(t,'"');if(t.match(/^\s/)||t.match(/\s$/))return"File names cannot start or end with whitespace";if(o!==t&&n.includes(t))return"A file or folder with that name already exists";if(t.length>100)return"File names cannot be longer than 100 characters";var a=l===i.Ql?t:l+"/"+t;return(0,r.Ci)(a)?'"'.concat(a,'" is reserved'):null}},36632:function(e,n,t){t.d(n,{Z:function(){return g},l:function(){return v}});var r=t(27387),i=t(63257),o=t(96583),l=t(12663),a=t(87137),u=t(57253),c=t(73372),s=t(39171),f=t(367),d=t(61762),h=t(91620).lW,p=t(9797),v=".replit";function g(e){var n,t,g,y,m=e.container,w=e.fs,x=e.ctx,b=(0,l.ZP)();b.setMaxListeners(50);var D=null,S=null,E=null;function T(){return R.apply(this,arguments)}function R(){return(R=(0,r._)(function(){return(0,o.Jh)(this,function(e){return D&&"open"===D.status?[2,D]:[2,new Promise(function(e){b.once(a.zW.CHANNEL_OPENED,function(n){e(n)})})]})})).apply(this,arguments)}(function(){C.apply(this,arguments)})(),m.openChannel({service:"dotreplit"},function(e){var n=e.channel;return D=n,b.emit(a.zW.CHANNEL_OPENED,n),function(){D=null}});var _=!1;function C(){return(C=(0,r._)(function(){return(0,o.Jh)(this,function(e){return w.watchDir(c.Ql,{onChange:function(e){if(!e.some(function(e){return e.filename===v&&e.type===u.Tv.File})){(null==S?void 0:S.error)!==a.Yt.NotFound&&(S={error:a.Yt.NotFound,errorMessage:"",config:null},b.emit(a.zW.CHANGE,S));return}_||(_=!0,w.watchFile(v,{onChange:function(){S=null,I.getConfig({bypassCache:!0}).then(function(e){b.emit(a.zW.CHANGE,e)})},onMoveOrDelete:function(){_=!1},onError:function(e,n){S=null,_=!1,e.code||m.unrecoverableError(e,n)}}))},onError:function(e,n){m.unrecoverableError(e,n)}}),[2]})})).apply(this,arguments)}function Z(){return(Z=(0,r._)(function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return S=null,E||(E=function(){return P.apply(this,arguments)}()),[4,E];case 1:return S=e.sent(),E=null,[2,S]}})})).apply(this,arguments)}function P(){return(P=(0,r._)(function(){return(0,o.Jh)(this,function(e){var n;return[2,(0,f.DW)(x,"dotreplit.getConfigFromServer",(n=(0,r._)(function(e,n){var t,r,i,l;return(0,o.Jh)(this,function(o){switch(o.label){case 0:var u,c,s;return null==n||n.setAttributes((u={},(null==(c=m.getConnectionMetadata())?void 0:c.token)&&(u.tokenCluster=function(e){var n=e.split(".");if(4!==n.length)throw Error("Invalid token: should have exactly 4 parts: "+e);for(var t=n[2].replace(/-/g,"+").replace(/_/g,"/");t.length%4;)t+="=";var r=window.atob(t);if(r.length<64)throw Error("Invalid token: signed part is too short: "+r.length);var i=r.substring(0,r.length-64);return d.api.token.ReplToken.decode(h.from(i,"base64"))}(c.token).cluster),s=!!window.performance.getEntriesByName(p.Iy.pageNavStart,"mark").length,u.ssr=s,u)),[4,T()];case 1:if("closed"===(r=o.sent()).status)return[2,{error:a.Yt.Disconnected,errorMessage:"channel closed",config:null}];return[4,r.request({dotReplitGetRequest:{},traceInfo:e?(0,f.Rg)(e):void 0})];case 2:if((i=o.sent()).channelClosed)return[2,{error:a.Yt.Disconnected,errorMessage:"channel closed",config:null}];if(i.error){if(i.error.includes("unable to decode"))return[2,{error:a.Yt.ParseError,errorMessage:i.error,config:null}];if(i.error.includes("no such file"))return[2,{error:a.Yt.NotFound,errorMessage:i.error,config:null}];return[2,{error:a.Yt.Unknown,errorMessage:i.error,config:null}]}if(!(l=null===(t=i.dotReplitGetResponse)||void 0===t?void 0:t.dotReplit))return m.unrecoverableError(Error("Dotreplit responded with no error and no config")),[2,{error:a.Yt.Unknown,errorMessage:"Expected dotReplitGetResponse to include dotReplit",config:null}];return[2,{error:null,errorMessage:null,config:l}]}})}),function(e,t){return n.apply(this,arguments)}))]})})).apply(this,arguments)}var k=(n=(0,r._)(function(e){var n;return(0,o.Jh)(this,function(t){switch(t.label){case 0:return[4,w.stat(v)];case 1:if(t.sent().exists)return[3,3];return[4,w.writeFile(v,"")];case 2:t.sent(),t.label=3;case 3:return[4,T()];case 4:return[4,t.sent().request({dotReplitUpdateRequest:{ops:e}})];case 5:if((n=t.sent()).channelClosed)return[2,{errorMessage:"Channel closed.",error:a.au.ChannelClosed,response:null}];if(n.error){if(n.error.includes("could not parse json")||n.error.includes("is not json")||n.error.includes("parsing value field")||n.error.includes("missing field"))return[2,{errorMessage:n.error,error:a.au.JSONParseError,response:null}];if(n.error.includes("could not read file"))return[2,{errorMessage:n.error,error:a.au.NotFound,response:null}];if(n.error.includes("could not parse toml"))return[2,{errorMessage:n.error,error:a.au.TOMLParseError,response:null}];if(n.error.includes("unknown variant"))return[2,{errorMessage:n.error,error:a.au.OpType,response:null}];if(n.error.includes("could not write to file"))return[2,{errorMessage:n.error,error:a.au.CouldNotWrite,response:null}];if(n.error.includes("could not read line"))return[2,{errorMessage:n.error,error:a.au.ReadLine,response:null}];return[2,{errorMessage:n.error,error:a.au.Unknown,response:null}]}if(!n.dotReplitUpdateResponse)throw Error("Expected .replit to be updated");return[2,{response:n.dotReplitUpdateResponse,error:null,errorMessage:null}]}})}),function(e){return n.apply(this,arguments)}),I={watch:function(e){var n=!1,t=!1,r=function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];t=!0,e.apply(void 0,(0,i._)(r))};return b.on(a.zW.CHANGE,r),I.getConfig().then(function(e){n||t||r(e)}),function(){n=!0,b.removeListener(a.zW.CHANGE,r)}},getConfig:function(e){return(0,r._)(function(){return(0,o.Jh)(this,function(n){return(null==e?void 0:e.bypassCache)||!S?[2,function(){return Z.apply(this,arguments)}()]:[2,S]})})()},getRunConfig:function(){return(0,r._)(function(){var e,n;return(0,o.Jh)(this,function(t){switch(t.label){case 0:return[4,T()];case 1:return[4,t.sent().request({runConfigGetRequest:{}})];case 2:if((e=t.sent()).channelClosed)return[2,this.getRunConfig()];if(!e.runConfigGetResponse)throw null!==(n=e.error)&&void 0!==n?n:Error("expected run config");return[2,e.runConfigGetResponse]}})}).apply(this)},updateDotReplit:(t=[],g=400,y=(0,s.Z)((0,r._)(function(){var e;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,k(t)];case 1:return e=n.sent(),t=[],[2,e]}})}),{wait:g}),function(e,n){n&&(g=n);var r=!0,i=!1,o=void 0;try{for(var l,a=e[Symbol.iterator]();!(r=(l=a.next()).done);r=!0)!function(){var e=l.value,n=t.findIndex(function(n){return n.path===e.path});-1!==n?t[n]=e:t.push(e)}()}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return y()})};return I}},87137:function(e,n,t){var r,i,o,l,a,u;t.d(n,{Yt:function(){return r},au:function(){return i},zW:function(){return o}}),(l=r||(r={})).NotFound="NOT_FOUND",l.ParseError="PARSE_ERROR",l.Disconnected="DISCONNECTED",l.Unknown="UNKOWN_ERROR",(a=i||(i={})).ChannelClosed="CHANNEL_CLOSED",a.JSONParseError="JSON_PARSE_ERROR",a.NotFound="NOT_FOUND",a.TOMLParseError="TOML_PARSE_ERROR",a.OpType="OP_TYPE",a.CouldNotWrite="COULD_NOT_WRITE",a.ReadLine="COULD_NOT_READ_LINE",a.Unknown="UNKNOWN_ERROR",(u=o||(o={})).CHANGE="CHANGE",u.CHANNEL_OPENED="CHANNEL_OPENED"}}]);
//# sourceMappingURL=2682-e1e458d749f91ec8.js.map